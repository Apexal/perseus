{"version":3,"file":"index.js","sources":["../../src/version.ts","../../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../src/components/inline-icon.tsx","../../src/dependencies.ts","../../src/components/tex-buttons.tsx","../../src/components/math-input.tsx","../../src/components/tooltip.tsx","../../src/icon-paths.ts","../../src/logging/log.ts","../../src/perseus-error.ts","../../src/mixins/widget-prop-denylist.ts","../../src/mixins/changeable.ts","../../src/components/text-list-editor.tsx","../../src/components/stub-tag-editor.tsx","../../src/perseus-api.tsx","../../src/util/math.ts","../../src/util/answer-types.ts","../../src/widgets/expression.tsx","../../src/asset-context.ts","../../src/util.ts","../../src/zoom.ts","../../src/styles/constants.ts","../../src/components/fixed-to-responsive.tsx","../../src/interactive2/movable-helper-methods.ts","../../src/interactive2/interactive-util.ts","../../../../vendor/raphael/raphael.js","../../src/util/colors.ts","../../src/util/react-render.tsx","../../src/util/tex.ts","../../src/util/graphie.ts","../../src/jquery.mobile.vmouse.js","../../src/interactive2/objective_.ts","../../src/interactive2/wrapped-defaults.ts","../../src/interactive2/wrapped-ellipse.ts","../../src/interactive2/wrapped-line.ts","../../src/interactive2/wrapped-path.ts","../../src/util/interactive.ts","../../src/components/graphie-classes.ts","../../src/interactive2/movable.ts","../../src/interactive2/movable-line-options.ts","../../src/interactive2/movable-line.ts","../../src/interactive2/movable-point-options.ts","../../src/interactive2/movable-point.tsx","../../src/interactive2/movable-polygon-options.ts","../../src/interactive2/movable-polygon.ts","../../src/interactive2.ts","../../src/components/graphie-movables.ts","../../src/components/graphie.tsx","../../src/components/image-loader.tsx","../../src/components/svg-image.tsx","../../src/components/tex.tsx","../../src/components/zoomable.tsx","../../src/components/zoomable-tex.tsx","../../src/definition-context.tsx","../../src/error-boundary.tsx","../../src/interaction-tracker.ts","../../src/jipt-paragraphs.ts","../../src/components/lint.tsx","../../src/perseus-markdown.tsx","../../src/question-paragraph.tsx","../../src/translation-linter.ts","../../src/util/katex-preprocess.ts","../../src/util/sizing-utils.ts","../../src/widgets.ts","../../src/widget-container.tsx","../../src/renderer.tsx","../../src/tex-wrangler.ts","../../src/components/math-output.tsx","../../src/components/text-input.tsx","../../src/components/input-with-examples.tsx","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../src/components/simple-keypad-input.tsx","../../src/widgets/input-number.tsx","../../src/widgets/numeric-input.tsx","../../src/widgets/passage-ref.tsx","../../src/styles/media-queries.ts","../../src/styles/shared.ts","../../src/util/scroll-utils.ts","../../src/components/icon.tsx","../../src/widgets/radio/choice-a11y-text.ts","../../src/widgets/radio/focus-ring.tsx","../../src/widgets/radio/util.ts","../../src/widgets/radio/choice-icon/shared-styles.ts","../../src/widgets/radio/choice-icon/cross-out-line.tsx","../../src/widgets/radio/choice-icon/choice-icon.tsx","../../src/widgets/radio/option-status.tsx","../../src/widgets/radio/choice.tsx","../../src/widgets/radio/choice-none-above.tsx","../../src/widgets/radio/base-radio.tsx","../../src/widgets/radio/widget.tsx","../../src/widgets/radio.ts","../../src/basic-widgets.ts","../../src/mixins/widget-jsonify-deprecated.ts","../../src/widgets/categorizer.tsx","../../src/util/mobile-native-utils.ts","../../src/util/url-utils.ts","../../src/widgets/cs-program.tsx","../../src/widgets/definition.tsx","../../src/widgets/dropdown.tsx","../../src/widgets/explanation.tsx","../../src/util/a11y.ts","../../src/widgets/graded-group-answer-bar.tsx","../../src/widgets/graded-group.tsx","../../src/widgets/graded-group-set.tsx","../../src/components/button-group.tsx","../../src/widgets/grapher/util.tsx","../../src/widgets/grapher.tsx","../../src/widgets/group.tsx","../../src/widgets/iframe.tsx","../../src/widgets/image.tsx","../../src/widgets/interaction.tsx","../../src/components/graph.tsx","../../src/widgets/interactive-graph.tsx","../../src/styles/global-constants.ts","../../src/styles/global-styles.ts","../../src/widgets/label-image/answer-choices.tsx","../../src/widgets/label-image/marker.tsx","../../src/widgets/label-image.tsx","../../src/widgets/lights-puzzle.tsx","../../src/components/sortable.tsx","../../src/widgets/matcher.tsx","../../src/components/number-input.tsx","../../src/widgets/matrix.tsx","../../src/widgets/measurer.tsx","../../src/widgets/molecule/molecule-drawing.ts","../../src/widgets/molecule/molecule-layout.ts","../../src/widgets/molecule/smiles-parser.ts","../../src/widgets/molecule.tsx","../../src/widgets/number-line.tsx","../../src/widgets/orderer.tsx","../../src/components/highlighting/ranges.ts","../../src/components/highlighting/highlights.ts","../../src/components/highlighting/ui/util.ts","../../src/components/highlighting/ui/highlight-renderer.tsx","../../src/components/highlighting/ui/highlight-tooltip.tsx","../../src/components/highlighting/ui/highlight-set-renderer.tsx","../../src/components/highlighting/ui/selection-tracker.tsx","../../src/components/highlighting/ui/highlighting-ui.tsx","../../src/components/highlighting/word-indexer.tsx","../../src/components/highlighting/highlightable-content.tsx","../../src/widgets/passage/passage-markdown.tsx","../../src/widgets/passage.tsx","../../src/widgets/passage-ref-target.tsx","../../src/widgets/plotter.tsx","../../src/widgets/reaction-diagram.tsx","../../src/widgets/sequence.tsx","../../src/components/info-tip/info-tip.tsx","../../src/components/info-tip.tsx","../../src/widgets/simulator.tsx","../../src/widgets/sorter.tsx","../../src/widgets/table.tsx","../../src/widgets/transformer.tsx","../../../../vendor/hubble/hubble.js","../../src/sigfigs.ts","../../src/widgets/unit.tsx","../../src/widgets/video-transcript-link.tsx","../../src/widgets/video.tsx","../../src/extra-widgets.ts","../../src/init.ts","../../src/all-widgets.ts","../../src/item-version.ts","../../src/mixins/provide-keypad.tsx","../../src/article-renderer.tsx","../../src/hint-renderer.tsx","../../src/hints-renderer.tsx","../../src/item-renderer.tsx","../../src/loading-context.ts","../../src/server-item-renderer.tsx","../../src/widgets/interaction/arrow-picker.tsx","../../src/widgets/interaction/color-picker.tsx","../../src/widgets/interaction/dash-picker.tsx","../../src/widgets/interaction/element-container.tsx","../../src/components/hud.tsx","../../src/components/multi-button-group.tsx","../../src/components/prop-check-box.tsx","../../src/components/range-input.tsx","../../src/components/constants.ts","../../src/keypad-context.ts","../../src/traversal.ts","../../src/multi-items/shapes.ts","../../src/multi-items/trees.ts","../../src/multi-items/items.ts","../../src/multi-items/multi-renderer.tsx","../../src/multi-items/prop-type-builders.ts","../../src/multi-items.ts","../../src/renderability.ts","../../src/a11y.ts","../../src/util/register-all-widgets-for-testing.ts","../../src/mixins/editor-jsonify.ts","../../src/index.ts"],"sourcesContent":["export default {\n    apiVersion: {\n        major: 12,\n        minor: 0,\n    },\n\n    itemDataVersion: {\n        major: 0,\n        minor: 1,\n    },\n};\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import * as React from \"react\";\n\ntype InlineIconProps = {\n    // An SVG path to render.\n    path: string;\n    // The path's viewBox dimensions.\n    // We set the viewport height to 1em and scale the width accordingly.\n    height: number;\n    width: number;\n    style?: React.CSSProperties;\n    // A11y description for this icon. If absent, icon is marked\n    // aria-hidden=true\n    title?: string;\n};\n\n/**\n * A stripped version of Icon.jsx from webapp. Takes an SVG icon and renders it\n * inline like Font Awesome did.\n *\n * If you are looking for an icon that we've used before you should look in\n * webapp's `icon-paths.js` which is a reference file for all the SVG paths\n * that we've used. You'll need to copy the object from that file into\n * whichever file you're using the icon and explicitly pass it in to the\n * <InlineIcon/> React component.\n *\n * We assume that the viewBox is cropped and aligned to (0, 0), but icons can\n * be defined differently. At some point we might want to add these attributes\n * to `icon-paths.js`, but for now this is a fairly safe assumption.\n *\n * Sample usage:\n *\n *   const editIcon = {\n *      path: \"M41.209 53.753l5.39 0l0 5.39l3.136 0l6.468-6.517-8.477-8.526-6.517 6.517l0 3.136zm33.173-34.937q-.882-.882-1.862.049l-19.6 19.6q-.931.98-.049 1.862t1.862-.049l19.6-19.6q.931-.98.049-1.862zm-38.563 45.668l0-16.121l37.632-37.632 16.17 16.121-37.632 37.632l-16.17 0zm43.022-12.397l0 10.633q-.049 6.713-4.753 11.417t-11.368 4.704l-46.599 0q-6.713 0-11.417-4.753t-4.704-11.368l0-46.599q0-6.664 4.753-11.417t11.368-4.704l46.599 0q3.528 0 6.566 1.372.833.392.98 1.323t-.49 1.617l-2.744 2.744q-.784.784-1.96.441t-2.352-.343l-46.599 0q-3.675 0-6.321 2.646t-2.646 6.321l0 46.599q0 3.675 2.646 6.321t6.321 2.646l46.599 0q3.675 0 6.321-2.646t2.646-6.321l0-7.056q0-.735.49-1.225l3.577-3.577q.833-.833 1.96-.392t1.127 1.617zm7.203-51.646q2.254 0 3.773 1.568l8.526 8.526q1.568 1.568 1.568 3.822t-1.568 3.773l-5.145 5.145-16.121-16.121 5.145-5.145q1.568-1.568 3.822-1.568z\",\n *      width: 100,\n *      height: 78.912,\n *   };\n *   <InlineIcon {...editIcon} />\n *\n */\nconst InlineIcon = ({\n    path,\n    width,\n    height,\n    style = {},\n    title,\n}: InlineIconProps): React.ReactElement => (\n    <svg\n        role=\"img\"\n        aria-hidden={!title}\n        style={{verticalAlign: \"middle\", ...style}}\n        width={`${width / height}em`}\n        height=\"1em\"\n        viewBox={`0 0 ${width} ${height}`}\n    >\n        {!!title && <title>{title}</title>}\n        <path d={path} fill=\"currentColor\" />\n    </svg>\n);\n\nexport default InlineIcon;\n","import type {PerseusDependencies} from \"./types\";\n\nlet _dependencies: PerseusDependencies | null | undefined = null;\n\nexport const setDependencies = (dependencies: PerseusDependencies) => {\n    _dependencies = dependencies;\n};\n\nexport const getDependencies = (): PerseusDependencies => {\n    if (_dependencies) {\n        return _dependencies;\n    }\n\n    throw new Error(\n        [\n            \"Perseus has not been provided required dependencies.\",\n            \"setDependencies(dependencies) must be called first.\",\n            \"Make sure Perseus is being imported from javascript/perseus/perseus.js.\",\n        ].join(\"\\n\"),\n    );\n};\n","import * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\n\nconst prettyBig = {fontSize: \"150%\"} as const;\nconst slightlyBig = {fontSize: \"120%\"} as const;\nconst symbStyle = {fontSize: \"130%\"} as const;\n\ntype Inserter = string | ((input: any) => void);\ntype ButtonSet = (props: any) => [React.ReactNode, Inserter];\n\ntype ButtonSets = {\n    readonly [key: string]: ReadonlyArray<ButtonSet>;\n};\n\n// These are functions because we want to generate a new component for each use\n// on the page rather than reusing an instance (which will cause an error).\n// Also, it's useful for things which might look different depending on the\n// props.\n\nconst basic: ReadonlyArray<ButtonSet> = [\n    () => [\n        <span key=\"plus\" style={slightlyBig}>\n            +\n        </span>,\n        \"+\",\n    ],\n    () => [\n        <span key=\"minus\" style={prettyBig}>\n            -\n        </span>,\n        \"-\",\n    ],\n\n    // TODO(joel) - display as \\cdot when appropriate\n    (props: any) => {\n        const {TeX} = getDependencies();\n        if (props.convertDotToTimes) {\n            return [\n                <TeX key=\"times\" style={prettyBig}>\n                    {i18n.doNotTranslate(\"\\\\times\")}\n                </TeX>,\n                \"\\\\times\",\n            ];\n        }\n        return [\n            <TeX key=\"times\" style={prettyBig}>\n                {i18n.doNotTranslate(\"\\\\cdot\")}\n            </TeX>,\n            \"\\\\cdot\",\n        ];\n    },\n    () => {\n        const {TeX} = getDependencies();\n        return [\n            <TeX key=\"frac\" style={prettyBig}>\n                {i18n.doNotTranslate(\"\\\\frac{x}{y}\")}\n            </TeX>,\n\n            // If there's something in the input that can become part of a\n            // fraction, typing \"/\" puts it in the numerator. If not, typing\n            // \"/\" does nothing. In that case, enter a \\frac.\n            (input: any) => {\n                const contents = input.latex();\n                input.typedText(\"/\");\n                if (input.latex() === contents) {\n                    input.cmd(\"\\\\frac\");\n                }\n            },\n        ];\n    },\n];\n\nconst buttonSets: ButtonSets = {\n    basic,\n\n    \"basic+div\": basic.concat([\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"div\">{i18n.doNotTranslate(\"\\\\div\")}</TeX>,\n                \"\\\\div\",\n            ];\n        },\n    ]),\n\n    trig: [\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"sin\">{i18n.doNotTranslate(\"\\\\sin\")}</TeX>,\n                \"\\\\sin\",\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"cos\">{i18n.doNotTranslate(\"\\\\cos\")}</TeX>,\n                \"\\\\cos\",\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"tan\">{i18n.doNotTranslate(\"\\\\tan\")}</TeX>,\n                \"\\\\tan\",\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"theta\" style={symbStyle}>\n                    {i18n.doNotTranslate(\"\\\\theta\")}\n                </TeX>,\n                \"\\\\theta\",\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <span key=\"phi\">\n                    {/*NOTE: KaTeX does not render \"phi\" for screen readers*/}\n                    <span className=\"perseus-sr-only\">\n                        {i18n.doNotTranslate(\"phi\")}\n                    </span>\n                    <TeX key=\"pi\" style={symbStyle}>\n                        {i18n.doNotTranslate(\"\\\\phi\")}\n                    </TeX>\n                </span>,\n                \"\\\\phi\",\n            ];\n        },\n    ],\n\n    prealgebra: [\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"sqrt\">{i18n.doNotTranslate(\"\\\\sqrt{x}\")}</TeX>,\n                \"\\\\sqrt\",\n            ];\n        },\n        // TODO(joel) - how does desmos do this?\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"nthroot\">{i18n.doNotTranslate(\"\\\\sqrt[3]{x}\")}</TeX>,\n                (input: any) => {\n                    input.typedText(\"nthroot3\");\n                    input.keystroke(\"Right\");\n                },\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"pow\" style={slightlyBig}>\n                    {i18n.doNotTranslate(\"a^b\")}\n                </TeX>,\n                (input: any) => {\n                    const contents = input.latex();\n                    input.typedText(\"^\");\n\n                    // If the input hasn't changed (for example, if we're\n                    // attempting to add an exponent on an empty input or an empty\n                    // denominator), insert our own \"a^b\"\n                    if (input.latex() === contents) {\n                        input.typedText(\"a^b\");\n                    }\n                },\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"pi\" style={slightlyBig}>\n                    {i18n.doNotTranslate(\"\\\\pi\")}\n                </TeX>,\n                \"\\\\pi\",\n            ];\n        },\n    ],\n\n    logarithms: [\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"log\">{i18n.doNotTranslate(\"\\\\log\")}</TeX>,\n                \"\\\\log\",\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [<TeX key=\"ln\">{i18n.doNotTranslate(\"\\\\ln\")}</TeX>, \"\\\\ln\"];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"log_b\">{i18n.doNotTranslate(\"\\\\log_b\")}</TeX>,\n                (input) => {\n                    input.typedText(\"log_\");\n                    input.keystroke(\"Right\");\n                    input.typedText(\"(\");\n                    input.keystroke(\"Left\");\n                    input.keystroke(\"Left\");\n                },\n            ];\n        },\n    ],\n\n    \"basic relations\": [\n        () => {\n            const {TeX} = getDependencies();\n            return [<TeX key=\"eq\">{\"=\"}</TeX>, \"=\"];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [<TeX key=\"lt\">{i18n.doNotTranslate(\"\\\\lt\")}</TeX>, \"\\\\lt\"];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [<TeX key=\"gt\">{i18n.doNotTranslate(\"\\\\gt\")}</TeX>, \"\\\\gt\"];\n        },\n    ],\n\n    \"advanced relations\": [\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"neq\">{i18n.doNotTranslate(\"\\\\neq\")}</TeX>,\n                \"\\\\neq\",\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"leq\">{i18n.doNotTranslate(\"\\\\leq\")}</TeX>,\n                \"\\\\leq\",\n            ];\n        },\n        () => {\n            const {TeX} = getDependencies();\n            return [\n                <TeX key=\"geq\">{i18n.doNotTranslate(\"\\\\geq\")}</TeX>,\n                \"\\\\geq\",\n            ];\n        },\n    ],\n};\n\nexport type ButtonSetsType = ReadonlyArray<keyof typeof buttonSets>;\n\ntype Props = {\n    sets: ButtonSetsType;\n    onInsert: (arg1: Inserter) => void;\n    className?: string;\n    convertDotToTimes?: boolean;\n};\n\nconst buttonSetsPropType = PropTypes.arrayOf(\n    PropTypes.oneOf(_(buttonSets).keys()),\n);\n\nclass TexButtons extends React.Component<Props> {\n    static buttonSets: typeof buttonSets = buttonSets;\n    static buttonSetsType: any = buttonSetsPropType;\n\n    render(): React.ReactNode {\n        // Always show buttonSets in the same order. Note: Technically it's ok\n        // for _.keys() to return the keys in an arbitrary order, but in\n        // practice, they will be ordered as listed above.\n        const sortedButtonSets = _.sortBy(this.props.sets, (setName) =>\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string | number' is not assignable to parameter of type 'string'.\n            _.keys(buttonSets).indexOf(setName),\n        );\n\n        const buttons = _(sortedButtonSets).map(\n            (setName) => buttonSets[setName],\n        );\n\n        const buttonRows = _(buttons).map((row) =>\n            row.map((symbGen) => {\n                // create a (component, thing we should send to mathquill) pair\n                const symbol = symbGen(this.props);\n                return (\n                    <button\n                        onClick={() => this.props.onInsert(symbol[1])}\n                        className=\"tex-button\"\n                        // @ts-expect-error [FEI-5003] - TS2533 - Object is possibly 'null' or 'undefined'. | TS2339 - Property 'key' does not exist on type 'boolean | ReactChild | ReactFragment | ReactPortal'.\n                        key={symbol[0].key}\n                        type=\"button\"\n                    >\n                        {symbol[0]}\n                    </button>\n                );\n            }),\n        );\n\n        const buttonPopup = _(buttonRows).map((row, i) => {\n            return (\n                <div\n                    className=\"clearfix tex-button-row\"\n                    key={this.props.sets[i]}\n                >\n                    {row}\n                </div>\n            );\n        });\n\n        return (\n            <div className={`${this.props.className || \"\"} preview-measure`}>\n                {buttonPopup}\n            </div>\n        );\n    }\n}\n\nexport default TexButtons;\n","import classNames from \"classnames\";\nimport $ from \"jquery\";\nimport MathQuill from \"mathquill\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport TexButtons from \"./tex-buttons\";\n\nimport type {ButtonSetsType} from \"./tex-buttons\";\n\ntype ButtonsVisibleType = \"always\" | \"never\" | \"focused\";\n\ntype Props = {\n    className?: string;\n    value: string;\n    onChange: any;\n    convertDotToTimes: boolean;\n    buttonsVisible: ButtonsVisibleType;\n    buttonSets: ButtonSetsType;\n    labelText?: string;\n    onFocus?: () => void;\n    onBlur?: () => void;\n};\n\ntype DefaultProps = {\n    value: Props[\"value\"];\n    convertDotToTimes: Props[\"convertDotToTimes\"];\n    buttonsVisible: Props[\"buttonsVisible\"];\n};\n\ntype State = {\n    focused: boolean;\n};\n\n// A WYSIWYG math input that calls `onChange(LaTeX-string)`\nclass MathInput extends React.Component<Props, State> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'mouseDown' has no initializer and is not definitely assigned in the constructor.\n    mouseDown: boolean;\n\n    static defaultProps: DefaultProps = {\n        value: \"\",\n        convertDotToTimes: false,\n        buttonsVisible: \"focused\",\n    };\n\n    state: State = {focused: false};\n\n    componentDidMount() {\n        window.addEventListener(\"mousedown\", this.handleMouseDown);\n        window.addEventListener(\"mouseup\", this.handleMouseUp);\n\n        let initialized = false;\n\n        // Initialize MathQuill.MathField instance\n        this.mathField({\n            // LaTeX commands that, when typed, are immediately replaced by the\n            // appropriate symbol. This does not include ln, log, or any of the\n            // trig functions; those are always interpreted as commands.\n            autoCommands: \"pi theta phi sqrt nthroot\",\n\n            // Pop the cursor out of super/subscripts on arithmetic operators\n            // or (in)equalities.\n            charsThatBreakOutOfSupSub: \"+-*/=<>≠≤≥\",\n\n            // Prevent excessive super/subscripts or fractions from being\n            // created without operands, e.g. when somebody holds down a key\n            supSubsRequireOperand: true,\n\n            // The name of this option is somewhat misleading, as tabbing in\n            // MathQuill breaks you out of a nested context (fraction/script)\n            // if you're in one, but moves focus to the next input if you're\n            // not. Spaces (with this option enabled) are just ignored in the\n            // latter case.\n            //\n            // TODO(alex): In order to allow inputting mixed numbers, we will\n            // have to accept spaces in certain cases. The desired behavior is\n            // still to escape nested contexts if currently in one, but to\n            // insert a space if not (we don't expect mixed numbers in nested\n            // contexts). We should also limit to one consecutive space.\n            spaceBehavesLikeTab: true,\n\n            handlers: {\n                edited: (mathField) => {\n                    // This handler is guaranteed to be called on change, but\n                    // unlike React it sometimes generates false positives.\n                    // One of these is on initialization (with an empty string\n                    // value), so we have to guard against that below.\n                    let value = mathField.latex();\n\n                    // Provide a MathQuill-compatible way to generate the\n                    // not-equals sign without pasting unicode or typing TeX\n                    value = value.replace(/<>/g, \"\\\\ne\");\n\n                    // Use the specified symbol to represent multiplication\n                    // TODO(alex): Add an option to disallow variables, in\n                    // which case 'x' should get converted to '\\\\times'\n                    if (this.props.convertDotToTimes) {\n                        value = value.replace(/\\\\cdot/g, \"\\\\times\");\n\n                        // Preserve cursor position in the common case:\n                        // typing '*' to insert a multiplication sign.\n                        // We do this by modifying internal MathQuill state\n                        // directly, instead of waiting for `.latex()` to be\n                        // called in `componentDidUpdate()`.\n                        const left = mathField.__controller.cursor[MathQuill.L];\n                        if (left && left.ctrlSeq === \"\\\\cdot \") {\n                            mathField.__controller.backspace();\n                            mathField.cmd(\"\\\\times\");\n                        }\n                    } else {\n                        value = value.replace(/\\\\times/g, \"\\\\cdot\");\n                    }\n\n                    if (initialized && this.props.value !== value) {\n                        this.props.onChange(value);\n                    }\n                },\n                enter: () => {\n                    // NOTE(kevinb): This isn't how answers to exercises are\n                    // submitted.  The actual mechanism for this can be found\n                    // in exercise-problem-template.jsx, see `handleSubmit`.\n\n                    // This handler is called when the user presses the enter\n                    // key. Since this isn't an actual <input> element, we have\n                    // to manually trigger the usually automatic form submit.\n                    // eslint-disable-next-line react/no-string-refs\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'submit' does not exist on type 'JQueryStatic'.\n                    $(ReactDOM.findDOMNode(this.refs.mathinput)).submit();\n                },\n                upOutOf: (mathField) => {\n                    // This handler is called when the user presses the up\n                    // arrow key, but there is nowhere in the expression to go\n                    // up to (no numerator or exponent). For ease of use,\n                    // interpret this as an attempt to create an exponent.\n                    mathField.typedText(\"^\");\n                },\n            },\n        });\n\n        // Ideally, we would be able to pass an initial value directly into\n        // the constructor above\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        this.mathField().latex(this.props.value);\n\n        initialized = true;\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"mousedown\", this.handleMouseDown);\n        window.removeEventListener(\"mouseup\", this.handleMouseUp);\n    }\n\n    // handlers:\n    // keep track of two related bits of state:\n    // * this.state.focused - whether the buttons are currently shown\n    // * this.mouseDown - whether a mouse click is active that started in the\n    //   buttons div\n\n    handleFocus: () => void = () => {\n        this.setState({focused: true});\n        // TODO(joel) fix properly - we should probably allow onFocus handlers\n        // to this property, but we need to work correctly with them.\n        // if (this.props.onFocus) {\n        //     this.props.onFocus();\n        // }\n    };\n\n    handleMouseDown: (arg1: MouseEvent) => void = (event) => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2345 - Argument of type 'EventTarget | null' is not assignable to parameter of type 'Node | null'.\n        const focused = ReactDOM.findDOMNode(this).contains(event.target);\n        this.mouseDown = focused;\n        if (!focused) {\n            this.setState({focused: false});\n        }\n    };\n\n    handleMouseUp: (arg1: MouseEvent) => void = () => {\n        // this mouse click started in the buttons div so we should focus the\n        // input\n        if (this.mouseDown) {\n            this.focus();\n        }\n        this.mouseDown = false;\n    };\n\n    handleBlur: (arg1: React.FocusEvent) => void = (e) => {\n        // TODO(michaelpolyak): Consider trapping focus within the button group.\n        // Focusing back on the input when TAB out of the last button in the\n        // group. This will probably require ESCAPE key handling to enable to\n        // close (blur) the button group in order to focus on next page element.\n        if (\n            !this.mouseDown &&\n            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n            !ReactDOM.findDOMNode(this).contains(e.relatedTarget)\n        ) {\n            this.setState({focused: false});\n        }\n    };\n\n    _shouldShowButtons: () => boolean = () => {\n        if (this.props.buttonsVisible === \"always\") {\n            return true;\n        }\n        if (this.props.buttonsVisible === \"never\") {\n            return false;\n        }\n        return this.state.focused;\n    };\n\n    insert: (arg1: any) => void = (value) => {\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        const input = this.mathField();\n        if (_(value).isFunction()) {\n            value(input);\n        } else if (value[0] === \"\\\\\") {\n            input.cmd(value).focus();\n        } else {\n            input.write(value).focus();\n        }\n        input.focus();\n    };\n\n    mathField: (arg1: any) => any = (options) => {\n        // The MathQuill API is now \"versioned\" through its own \"InterVer\"\n        // system.\n        // See: https://github.com/mathquill/mathquill/pull/459\n        const MQ = MathQuill.getInterface(2);\n\n        // MathQuill.MathField takes a DOM node, MathQuill-ifies it if it's\n        // seeing that node for the first time, then returns the associated\n        // MathQuill object for that node. It is stable - will always return\n        // the same object when called on the same DOM node.\n        // eslint-disable-next-line react/no-string-refs\n        return MQ.MathField(ReactDOM.findDOMNode(this.refs.mathinput), options);\n    };\n\n    focus: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        this.mathField().focus();\n        this.setState({focused: true});\n    };\n\n    blur: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        this.mathField().blur();\n        this.setState({focused: false});\n    };\n\n    render(): React.ReactNode {\n        let className = classNames({\n            \"perseus-math-input\": true,\n\n            // mathquill usually adds these itself but react removes them when\n            // updating the component.\n            \"mq-editable-field\": true,\n            \"mq-math-mode\": true,\n        });\n\n        if (this.props.className) {\n            className = className + \" \" + this.props.className;\n        }\n\n        let buttons = null;\n        if (this._shouldShowButtons()) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'Element' is not assignable to type 'null'.\n            buttons = (\n                <TexButtons\n                    sets={this.props.buttonSets}\n                    className=\"math-input-buttons absolute\"\n                    convertDotToTimes={this.props.convertDotToTimes}\n                    onInsert={this.insert}\n                />\n            );\n        }\n\n        return (\n            <div style={{display: \"inline-block\"}}>\n                <div style={{display: \"inline-block\"}}>\n                    <span\n                        className={className}\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"mathinput\"\n                        aria-label={this.props.labelText}\n                        onFocus={this.handleFocus}\n                        onBlur={this.handleBlur}\n                    />\n                </div>\n                <div style={{position: \"relative\"}} onBlur={this.handleBlur}>\n                    {buttons}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default MathInput;\n","/* eslint-disable react/no-unsafe */\n/**\n * A generic tooltip library for React.js\n *\n * This should eventually end up in react-components\n *\n * Interface: ({a, b} means one of a or b)\n * import Tooltip from \"./tooltip\";\n * <Tooltip\n *     className=\"class-for-tooltip-contents\"\n *     horizontalPosition={HoriziontalDirection.Left}\n *     horizontalAlign={HoriziontalDirection.Left}\n *     verticalPosition={VerticalDirection.Top}\n *     arrowSize={10} // arrow size in pixels\n *     borderColor=\"#ccc\" // color of the border for the tooltip\n *     show={true} // whether the tooltip should currently be visible\n *     targetContainerStyle={targetContainerStyle}\n * >\n *     <TargetElementOfTheTooltip />\n *     <TooltipContents1 />\n *     <TooltipContents2 />\n * </Tooltip>\n *\n * To show/hide the tooltip, the parent component should call the\n * .show() and .hide() methods of the tooltip when appropriate.\n * (These are usually set up as handlers of events on the target element.)\n *\n * Notes:\n *     className should not specify a border; that is handled by borderColor\n *     so that the arrow and tooltip match\n */\n\n//          __,,--``\\\\\n//  _,,-''``         \\\\     ,\n// '----------_.------'-.___|\\__\n//    _.--''``    `)__   )__   @\\__\n//   (  .. ''---/___,,E/__,E'------`\n//    `-''`''\n// Here be dragons.\n\n// TODO(joel/aria) fix z-index issues https://s3.amazonaws.com/uploads.hipchat.com/6574/29028/yOApjwmgiMhEZYJ/Screen%20Shot%202014-05-30%20at%203.34.18%20PM.png\n// z-index: 3 on perseus-formats-tooltip seemed to work\n\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport type {Property} from \"csstype\";\n\nconst zIndex = 10;\n\nexport enum HorizontalDirection {\n    Left = \"left\",\n    Right = \"right\",\n}\n\nexport enum VerticalDirection {\n    Top = \"top\",\n    Bottom = \"bottom\",\n}\n\ntype TriangleProps = {\n    color: string;\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n    horizontalDirection: HorizontalDirection;\n    verticalDirection: VerticalDirection;\n};\n\nconst Triangle = (props: TriangleProps) => {\n    let borderLeft;\n    let borderRight;\n    let borderTop;\n    let borderBottom;\n\n    const hBorder = `${props.width}px solid transparent`;\n    if (props.horizontalDirection === \"right\") {\n        borderLeft = hBorder;\n    } else {\n        borderRight = hBorder;\n    }\n\n    const vBorder = `${props.height}px solid ${props.color}`;\n    if (props.verticalDirection === \"top\") {\n        borderTop = vBorder;\n    } else {\n        borderBottom = vBorder;\n    }\n\n    return (\n        <div\n            style={{\n                display: \"block\",\n                height: 0,\n                width: 0,\n                position: \"absolute\",\n                left: props.left,\n                top: props[\"top\"],\n                borderLeft: borderLeft,\n                borderRight: borderRight,\n                borderTop: borderTop,\n                borderBottom: borderBottom,\n            }}\n        />\n    );\n};\n\ntype TooltipArrowProps = {\n    position: Property.Position;\n    visibility: Property.Visibility;\n    left: number;\n    top: number;\n    color: string; // a css color\n    border: string; // a css color\n    width: number;\n    height: number;\n    horizontalDirection: HorizontalDirection;\n    verticalDirection: VerticalDirection;\n    zIndex?: number;\n};\n\nconst TooltipArrow = (props: TooltipArrowProps) => {\n    // TODO(aria): Think about adding a box-shadow to the triangle here\n    // See http://css-tricks.com/triangle-with-shadow/\n\n    //const isRight = (this.props.horizontalDirection === \"right\");\n    const isTop = props.verticalDirection === \"top\";\n\n    const frontTopOffset = isTop ? 0 : 1;\n    const borderTopOffset = isTop ? 0 : -1;\n\n    return (\n        <div\n            style={{\n                display: \"block\",\n                position: props.position,\n                visibility: props.visibility,\n                left: props.left,\n                top: props[\"top\"],\n                width: props.width + 2,\n                height: props.height + 1,\n                marginTop: -1,\n                marginBottom: -2,\n                zIndex: zIndex,\n            }}\n        >\n            {/* The background triangle used to create the effect of a\n                border around the foreground triangle*/}\n            <Triangle\n                horizontalDirection={props.horizontalDirection}\n                verticalDirection={props.verticalDirection}\n                color={props.border}\n                left={0}\n                top={borderTopOffset}\n                width={props.width + 2} // one extra for the diagonal\n                height={props.height + 2}\n            />\n            {/* The foreground triangle covers all but the left/right edges\n                of the background triangle */}\n            <Triangle\n                horizontalDirection={props.horizontalDirection}\n                verticalDirection={props.verticalDirection}\n                color={props.color}\n                left={1}\n                top={frontTopOffset}\n                width={props.width}\n                height={props.height}\n            />\n        </div>\n    );\n};\n\nTooltipArrow.defaultProps = {\n    position: \"relative\",\n    visibility: \"visible\",\n    left: 0,\n    top: 0,\n};\n\nconst VERTICAL_CORNERS = {\n    top: {\n        top: \"-100%\",\n    },\n    bottom: {\n        top: 0,\n    },\n} as const;\n\nconst HORIZONTAL_CORNERS = {\n    left: {\n        targetLeft: 0,\n    },\n\n    right: {\n        targetLeft: \"100%\",\n    },\n} as const;\n\nconst HORIZONTAL_ALIGNMNENTS = {\n    left: {\n        tooltipLeft: 0,\n        arrowLeft: (arrowSize) => 0,\n    },\n    right: {\n        tooltipLeft: \"-100%\",\n        arrowLeft: (arrowSize) => -arrowSize - 2,\n    },\n} as const;\n\ntype Props = {\n    show: boolean;\n    className: string;\n    arrowSize: number;\n    borderColor: string;\n    verticalPosition: VerticalDirection;\n    horizontalPosition: HorizontalDirection;\n    horizontalAlign: HorizontalDirection.Left;\n    children: React.ReactNode;\n    targetContainerStyle: any; // style object\n};\n\ntype DefaultProps = {\n    className: Props[\"className\"];\n    arrowSize: Props[\"arrowSize\"];\n    borderColor: Props[\"borderColor\"];\n    verticalPosition: Props[\"verticalPosition\"];\n    horizontalPosition: Props[\"horizontalPosition\"];\n    horizontalAlign: Props[\"horizontalAlign\"];\n    targetContainerStyle: Props[\"targetContainerStyle\"];\n};\n\ntype State = {\n    height: number | null;\n};\n\nclass Tooltip extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        className: \"\",\n        arrowSize: 10,\n        borderColor: \"#ccc\",\n        verticalPosition: VerticalDirection.Bottom,\n        horizontalPosition: HorizontalDirection.Left,\n        horizontalAlign: HorizontalDirection.Left,\n        targetContainerStyle: {},\n    };\n\n    state: State = {\n        height: null, // used for offsetting \"top\" positioned tooltips\n    };\n\n    componentDidMount() {\n        this._updateHeight();\n    }\n\n    UNSAFE_componentWillReceiveProps() {\n        // If the contents have changed, reset our measure of the height\n        this.setState({height: null});\n    }\n\n    componentDidUpdate() {\n        this._updateHeight();\n    }\n\n    _renderToolTipDiv(isTooltipAbove?: boolean) {\n        const settings = Object.assign(\n            {},\n            HORIZONTAL_CORNERS[this.props.horizontalPosition],\n            HORIZONTAL_ALIGNMNENTS[this.props.horizontalAlign],\n            VERTICAL_CORNERS[this.props.verticalPosition],\n        );\n\n        let arrowAbove;\n        let arrowBelow;\n\n        if (isTooltipAbove) {\n            // We put an absolutely positioned arrow in the correct place\n            arrowAbove = (\n                <TooltipArrow\n                    verticalDirection={VerticalDirection.Top}\n                    horizontalDirection={this.props.horizontalAlign}\n                    position=\"absolute\"\n                    color=\"white\"\n                    border={this.props.borderColor}\n                    left={settings.arrowLeft(this.props.arrowSize)}\n                    top={-this.props.arrowSize + 2}\n                    width={this.props.arrowSize}\n                    height={this.props.arrowSize}\n                    zIndex={zIndex}\n                />\n            );\n\n            // And we use a visibility: hidden arrow below to shift up the\n            // content by the correct amount\n            arrowBelow = (\n                <TooltipArrow\n                    verticalDirection={VerticalDirection.Top}\n                    horizontalDirection={this.props.horizontalAlign}\n                    visibility=\"hidden\"\n                    color=\"white\"\n                    border={this.props.borderColor}\n                    left={settings.arrowLeft(this.props.arrowSize)}\n                    top={-1}\n                    width={this.props.arrowSize}\n                    height={this.props.arrowSize}\n                    zIndex={zIndex}\n                />\n            );\n        } else {\n            arrowAbove = (\n                <TooltipArrow\n                    verticalDirection={VerticalDirection.Bottom}\n                    horizontalDirection={this.props.horizontalAlign}\n                    color=\"white\"\n                    border={this.props.borderColor}\n                    left={settings.arrowLeft(this.props.arrowSize)}\n                    top={-1}\n                    width={this.props.arrowSize}\n                    height={this.props.arrowSize}\n                    zIndex={zIndex}\n                />\n            );\n\n            arrowBelow = null;\n        }\n\n        /* A positioned div below the input to be the parent for our\n            tooltip */\n        return (\n            <div\n                style={{\n                    position: \"relative\",\n                    height: 0,\n                    display: this.props.show ? \"block\" : \"none\",\n                }}\n            >\n                <div\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"tooltipContainer\"\n                    className=\"tooltipContainer\"\n                    style={{\n                        position: \"absolute\",\n                        // height must start out undefined, not null, so that\n                        // we can measure the actual height with jquery.\n                        // This is used to position the tooltip with top: -100%\n                        // when in verticalPosition: \"top\" mode\n                        height: this.state.height || undefined,\n                        left: settings.targetLeft,\n                    }}\n                >\n                    {arrowAbove}\n\n                    {/* The contents of the tooltip */}\n                    <div\n                        className={this.props.className}\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"tooltipContent\"\n                        style={{\n                            position: \"relative\",\n                            top: settings[\"top\"],\n                            left: settings.tooltipLeft,\n                            border: \"1px solid \" + this.props.borderColor,\n                            boxShadow: \"0 1px 3px \" + this.props.borderColor,\n                            zIndex: zIndex - 1,\n                        }}\n                    >\n                        {/* @ts-expect-error TS2533 - First child is target, rest is tooltip content */}\n                        {this.props.children.slice(1)}\n                    </div>\n\n                    {arrowBelow}\n                </div>\n            </div>\n        );\n    }\n\n    _updateHeight() {\n        const tooltipContainer = ReactDOM.findDOMNode(\n            // eslint-disable-next-line react/no-string-refs\n            this.refs.tooltipContainer,\n        ) as HTMLDivElement;\n        const height = tooltipContainer.offsetHeight;\n        if (height !== this.state.height) {\n            this.setState({height});\n        }\n    }\n\n    render() {\n        const isTooltipAbove = this.props.verticalPosition === \"top\";\n\n        /* We wrap the entire output in a span so that it displays inline */\n        return (\n            <span>\n                {isTooltipAbove && this._renderToolTipDiv(isTooltipAbove)}\n\n                {/* We wrap our input in a div so that we can put the tooltip in a\n                div above/below it */}\n                <div style={this.props.targetContainerStyle}>\n                    {/* @ts-expect-error TS2533 - First child is target, rest is tooltip content */}\n                    {this.props.children[0]}\n                </div>\n\n                {!isTooltipAbove && this._renderToolTipDiv()}\n            </span>\n        );\n    }\n}\n\n// Sorry.  // Apology-Oriented-Programming\nexport default Tooltip;\n","/**\n * Icon paths to be used with `inline-icon.jsx`.\n *\n * These paths are taken directly from webapp's `icon-paths.js`. Unlike the\n * webapp equivalent, these can be directly required within Perseus files since\n * this is all bundled together anyway.\n */\n\nexport const iconCheck = {\n    path: `M8.70710678,12.2928932 C8.31658249,11.9023689 7.68341751,11.9023689 7.29289322,12.2928932 C6.90236893,12.6834175 6.90236893,13.3165825 7.29289322,13.7071068 L9.82842712,16.2426407 C10.2207367,16.6349502 10.8574274,16.6328935 11.2471942,16.2380576 L16.7116603,10.7025237 C17.0996535,10.3094846 17.0955629,9.67633279 16.7025237,9.28833966 C16.3094846,8.90034653 15.6763328,8.90443714 15.2883397,9.29747629 L10.5309507,14.1167372 L8.70710678,12.2928932 Z`,\n    width: 24,\n    height: 24,\n} as const;\nexport const iconCheckMedium = {\n    path: \"M6.072 10.4l6.175-7.058a1 1 0 1 1 1.506 1.317L6.769 12.64a1 1 0 0 1-1.55-.054L2.203 8.604a1 1 0 1 1 1.594-1.208L6.072 10.4z\",\n    width: 16,\n    height: 16,\n} as const;\nexport const iconChevronDown = {\n    path: \"M99.669 13.048q0 3.36-2.352 5.712l-41.664 41.664q-2.408 2.408-5.88 2.408t-5.712-2.408l-41.664-41.664q-2.408-2.24-2.408-5.712t2.408-5.88l4.76-4.816q2.52-2.352 5.88-2.352t5.656 2.352l31.136 31.136 31.08-31.136q2.352-2.352 5.712-2.352t5.88 2.352l4.816 4.816q2.352 2.52 2.352 5.88z\",\n    width: 100,\n    height: 63.034,\n} as const;\nexport const iconChevronRight = {\n    path: \"M62.808 49.728q0 3.36-2.352 5.88l-41.72 41.664q-2.352 2.408-5.768 2.408t-5.768-2.408l-4.872-4.76q-2.352-2.52-2.352-5.88t2.352-5.712l31.08-31.136-31.08-31.024q-2.352-2.52-2.352-5.88t2.352-5.712l4.872-4.76q2.296-2.408 5.768-2.408t5.768 2.408l41.72 41.664q2.352 2.296 2.352 5.656z\",\n    width: 63.034,\n    height: 100,\n} as const;\nexport const iconCircle = {\n    path: \"M100.035 50.046q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z\",\n    width: 100,\n    height: 100,\n} as const;\nexport const iconCircleArrowDown = {\n    path: \"M50.046 83.676q1.767 0 2.907-1.14l29.526-29.526q1.197-1.197 1.197-2.907t-1.197-2.964l-5.928-5.928q-1.197-1.14-2.964-1.14t-2.907 1.14l-12.312 12.312l0-32.661q0-1.71-1.254-2.964t-2.907-1.254l-8.322 0q-1.71 0-2.964 1.254t-1.254 2.964l0 32.661l-12.312-12.312q-1.197-1.254-2.907-1.254t-2.907 1.254l-5.928 5.928q-1.197 1.197-1.197 2.964t1.197 2.907l29.469 29.526q1.197 1.14 2.964 1.14zm49.989-33.63q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z\",\n    width: 100,\n    height: 100,\n} as const;\nexport const iconCircleArrowUp = {\n    path: \"M54.207 83.391q1.653 0 2.907-1.254t1.254-2.907l0-32.718l12.312 12.312q1.254 1.254 2.964 1.254t2.907-1.254l5.928-5.928q1.197-1.197 1.14-2.964 0-1.767-1.14-2.907l-29.526-29.526q-1.197-1.14-2.907-1.14t-2.964 1.14l-29.469 29.526q-1.197 1.254-1.197 2.964t1.197 2.907l5.928 5.928q1.197 1.197 2.907 1.197t2.907-1.197l12.312-12.312l0 32.718q0 1.653 1.254 2.907t2.964 1.254l8.322 0zm45.828-33.345q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z\",\n    width: 100,\n    height: 100,\n} as const;\nexport const iconCircleThin = {\n    path: \"M50.046 8.322q-8.493 0-16.188 3.306-15.561 6.669-22.173 22.23-3.363 7.695-3.363 16.188t3.306 16.188 8.949 13.281q5.586 5.586 13.281 8.892t16.188 3.306 16.188-3.306 13.281-8.892 8.892-13.281 3.306-16.188-3.306-16.188-8.892-13.281-13.281-8.949q-7.695-3.306-16.188-3.306zm0 91.713q-13.623 0-25.137-6.726t-18.183-18.183q-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.126q-11.514 6.726-25.08 6.726z\",\n    width: 100,\n    height: 99.944,\n} as const;\nexport const iconDesktop = {\n    path: \"M94.208 52.119l0-43.746q0-.69-.506-1.15t-1.196-.506l-84.088 0q-.69 0-1.196.506t-.506 1.15l0 43.746q0 .69.506 1.196t1.196.506l84.088 0q.69 0 1.196-.506t.506-1.196zm6.716-43.746l0 57.224q0 3.45-2.484 5.934t-5.934 2.484l-28.566 0q0 3.128 2.53 7.774.828 1.61.828 2.622t-1.012 2.07q-1.012 1.012-2.346.966l-26.91 0q-1.38 0-2.392-1.012t-1.012-2.024q0-1.058 1.656-4.14t1.748-6.256l-28.612 0q-3.45 0-5.934-2.484t-2.484-5.934l0-57.224q0-3.45 2.484-5.934t5.934-2.438l84.088 0q3.45 0 5.98 2.438 2.438 2.484 2.438 5.934z\",\n    width: 100,\n    height: 86.648,\n} as const;\nexport const iconDropdownArrow = {\n    path: \"M9 9.8c0 .5.7 1.7 1.5 2.8 1.5 1.9 1.5 1.9 3 0C15.7 9.7 15.4 9 12 9c-1.6 0-3 .4-3 .8z\",\n    width: 24,\n    height: 24,\n} as const;\nexport const iconExclamationSign = {\n    path: \"M58.368 81.225l0-12.369q0-.912-.57-1.539t-1.425-.627l-12.54 0q-.855-.057-1.482.627t-.684 1.539l0 12.369q-.057.855.627 1.482t1.539.684l12.54 0q.855 0 1.425-.627t.57-1.539zm1.026-62.871q0-1.596-2.223-1.71l-14.307 0q-2.109 0-2.223 1.71l1.14 40.47q0 .627.627 1.14t1.539.456l12.084 0q.912-.057 1.539-.513t.684-1.083zm-9.348-18.354q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669z\",\n    width: 100,\n    height: 99.944,\n} as const;\n// Grabbed from https://github.com/encharm/Font-Awesome-SVG-PNG\nexport const iconGear = {\n    path: \"M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z\",\n    width: 1792,\n    height: 1792,\n} as const;\nexport const iconMobilePhone = {\n    path: \"M36.04 89.557q0-2.584-1.836-4.42t-4.42-1.836-4.352 1.836q-1.836 1.836-1.836 4.42t1.836 4.352 4.42 1.836q2.652-.068 4.42-1.836t1.768-4.352zm16.184-12.444l0-54.74q0-1.088-.748-1.768t-1.768-.68l-39.78 0q-1.088 0-1.768.748t-.68 1.7l0 54.74q0 1.02.748 1.768t1.7.68l39.78 0q1.02-.068 1.768-.748t.748-1.7zm-14.892-65.892q0-1.224-1.292-1.292l-12.444 0q-1.224.068-1.224 1.292t1.224 1.224l12.444 0q1.292 0 1.292-1.224zm22.372-1.292l0 79.628q0 3.944-2.992 6.936t-7.004 2.992l-39.78 0q-4.012 0-7.004-2.924-2.924-2.924-2.924-7.004l0-79.628q0-4.012 2.924-6.936t7.004-2.992l39.78 0q4.012-.068 7.004 2.924t2.992 7.004z\",\n    width: 60.013,\n    height: 100,\n} as const;\nexport const iconOk = {\n    path: \"M37.964 76.048q-2.576 0-4.368-1.792l-31.864-31.864q-1.792-1.792-1.792-4.368t1.792-4.368l8.736-8.68q1.792-1.792 4.368-1.792t4.312 1.792l18.816 18.872 42-42.056q1.792-1.792 4.368-1.792t4.312 1.792l8.736 8.736q1.792 1.792 1.792 4.368t-1.792 4.312l-55.048 55.048q-1.792 1.792-4.368 1.792z\",\n    width: 100,\n    height: 76.637,\n} as const;\nexport const iconPlus = {\n    path: \"M99.758 43.09l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-29.45 0l0 29.45q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-29.45l-29.45 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l29.45 0l0-29.45q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836l0 29.45l29.45 0q2.852 0 4.836 1.984t1.984 4.836z\",\n    width: 100,\n    height: 100,\n} as const;\nexport const iconRemove = {\n    path: \"M100.464 80.808q0 3.404-2.368 5.772l-11.47 11.544q-2.368 2.368-5.772 2.368t-5.698-2.368l-24.864-24.864-24.864 24.864q-2.368 2.368-5.772 2.368t-5.772-2.368l-11.47-11.544q-2.368-2.368-2.368-5.772t2.368-5.698l24.864-24.864-24.864-24.864q-2.368-2.368-2.368-5.772t2.368-5.772l11.47-11.47q2.368-2.368 5.772-2.368t5.772 2.368l24.864 24.864 24.864-24.864q2.294-2.368 5.698-2.368t5.772 2.368l11.47 11.47q2.368 2.368 2.368 5.772t-2.368 5.772l-24.864 24.864 24.864 24.864q2.368 2.294 2.368 5.698z\",\n    width: 100,\n    height: 100,\n} as const;\nexport const iconStar = {\n    path: \"M15.1052249,9.55978547 L22.0028147,9.55978545 C23.6568673,9.55978545 23.9349557,10.3753626 22.6181351,11.3858845 L16.9943688,15.7015366 L19.2518801,22.8294455 C19.7526645,24.4106317 19.0984455,24.8825885 17.769353,23.8673293 L12.0490577,19.4977438 L6.5116497,23.8422153 C5.20921411,24.8640642 4.53299569,24.4067544 5.00266927,22.8160582 L7.10332364,15.7015366 L1.42794544,11.3634306 C0.110226041,10.3562014 0.383967283,9.54239221 2.0409646,9.54574013 L8.9924676,9.55978547 L11.1485117,2.72669438 C11.6458693,1.15043244 12.4548928,1.15900049 12.9494787,2.72669438 L15.1052249,9.55978547 Z\",\n    width: 24,\n    height: 24,\n} as const;\nexport const iconTryAgain = {\n    path: \"M3.74890556,17.9799506 C2.19251241,16.1970909 1.10103636,13.4971457 1.13090903,11.1491783 C1.17160478,7.95052637 4.01704076,0.865059407 11.7028044,0.865059407 C19.388568,0.865059407 22.3026521,7.35203035 22.3026521,11.5879453 C22.3026521,15.8238603 19.386629,20.5574509 13.6832464,21.7131548 L13.6757539,17.3722171 C17.0812986,16.2190517 18.331158,14.1944123 18.3311578,11.5879451 C18.3311574,8.16554692 15.6664205,5.03476549 11.7028048,5.20494205 C7.73918903,5.37511861 5.59244567,8.66930079 5.59244567,11.1491783 C5.59244567,12.9090077 6.11128139,14.1753512 6.93640437,15.3053215 L8.14052356,14.2949456 C8.98559348,13.5858477 9.6994861,13.9070448 9.73489556,15.0076413 L9.91284941,20.5388014 C9.94832683,21.6415103 9.09967118,22.3514475 8.02194403,22.1254594 L2.60571602,20.9897332 C1.5259204,20.7633114 1.34338662,19.9984207 2.18070755,19.295825 L3.74890556,17.9799506 Z\",\n    width: 23,\n    height: 23,\n} as const;\nexport const iconTablet = {\n    path: \"M45.322 90.706q0-1.86-1.302-3.224-1.364-1.364-3.224-1.364t-3.224 1.364-1.302 3.224q0 1.86 1.364 3.224 1.302 1.364 3.162 1.302 1.86.062 3.224-1.302t1.302-3.224zm27.218-11.346l0-68.014q0-.93-.682-1.612t-1.55-.682l-58.962 0q-.93 0-1.612.682t-.682 1.612l0 68.014q0 .93.682 1.612t1.612.62l58.962 0q.992-.062 1.612-.682t.62-1.55zm9.114-68.014l0 77.066q0 4.65-3.348 7.998t-7.998 3.348l-58.962 0q-4.65 0-7.998-3.348t-3.348-7.998l0-77.066q0-4.65 3.348-7.998t7.998-3.348l58.962 0q4.65 0 7.998 3.348t3.348 7.998z\",\n    width: 81.852,\n    height: 100,\n} as const;\nexport const iconTrash = {\n    path: \"M31.293 37.506q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.218 0q-.912-.057-1.482-.627t-.57-1.482l0-37.506q0-2.109 2.052-2.109l4.218 0zm18.753 2.109l0 37.506q0 .912-.57 1.482t-1.539.627l-4.161 0q-1.995 0-2.109-2.109l0-37.506q.057-.912.627-1.482t1.482-.627l4.161 0q.969.057 1.539.627t.57 1.482zm14.592-2.109q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.161 0q-.969-.057-1.539-.627t-.57-1.482l0-37.506q0-2.109 2.109-2.109l4.161 0zm10.431 49.248l0-61.731l-58.368 0l0 61.731q.057 2.679.969 3.819t1.083 1.14l54.207 0q.171 0 1.14-1.083t.969-3.876zm-43.776-70.11l29.184 0l-3.135-7.581q-.456-.57-1.14-.741l-20.634 0q-.627.114-1.083.741zm-31.293 2.109q0-1.995 2.109-2.109l20.121 0l4.56-10.83q.969-2.394 3.477-4.104 2.565-1.71 5.187-1.71l20.805 0q2.622 0 5.187 1.71t3.477 4.104l4.56 10.83l20.178 0q.912.057 1.482.627t.57 1.482l0 4.161q0 1.995-2.052 2.109l-6.27 0l0 61.731q0 5.415-3.078 9.348t-7.353 3.933l-54.207 0q-4.275 0-7.353-3.819t-3.078-9.177l0-62.016l-6.213 0q-.969 0-1.539-.57t-.57-1.539l0-4.161z\",\n    width: 91.681,\n    height: 100,\n} as const;\nexport const iconUndo = {\n    path: \"M10,6.6C10,7.2,9.8,8,9.3,9.1c0,0,0,0.1-0.1,0.1S9.2,9.3,9.2,9.4c0,0,0,0.1-0.1,0.1C9,9.6,9,9.6,8.9,9.6 c-0.1,0-0.1,0-0.1-0.1c0,0,0-0.1,0-0.1c0,0,0-0.1,0-0.1s0-0.1,0-0.1c0-0.3,0-0.5,0-0.7c0-0.4,0-0.7-0.1-1C8.6,7.1,8.5,6.9,8.4,6.7S8.2,6.3,8,6.1C7.8,5.9,7.6,5.8,7.4,5.7S6.9,5.5,6.7,5.5S6.1,5.4,5.8,5.4c-0.3,0-0.6,0-1,0H3.6v1.4c0,0.1,0,0.2-0.1,0.3C3.4,7.1,3.3,7.1,3.2,7.1C3.1,7.1,3,7.1,3,7L0.1,4.1C0,4.1,0,4,0,3.9s0-0.2,0.1-0.3L3,0.8C3,0.7,3.1,0.7,3.2,0.7c0.1,0,0.2,0,0.3,0.1C3.5,0.9,3.6,0.9,3.6,1v1.4h1.2c2.6,0,4.3,0.7,4.9,2.2C9.9,5.2,10,5.8,10,6.6z\",\n    width: 10,\n    height: 10,\n} as const;\nexport const iconMinus = {\n    path: `M8,13 L16,13 C16.5522847,13 17,12.5522847 17,12 C17,11.4477153 16.5522847,11 16,11 L8,11 C7.44771525,11 7,11.4477153 7,12 C7,12.5522847 7.44771525,13 8,13 Z`,\n    width: 24,\n    height: 24,\n} as const;\n","import {getDependencies} from \"../dependencies\";\n\nimport type {Metadata} from \"@khanacademy/wonder-stuff-core\";\n\n// TODO(LP-11481): Change the primary API we use for logging in Perseus to use\n// getDependencies() internally... simplify usage to just using a \"singleton\"\n// which get's the injected logger.\n\n/**\n * @typedef {Object} Errors utility for referencing the Perseus error taxonomy.\n */\nexport const Errors = Object.freeze({\n    /**\n     * @property {ErrorKind} Unknown The kind of error is not known.\n     */\n    Unknown: \"Unknown\",\n    /**\n     * @property {ErrorKind} Internal The error is internal to the executing code.\n     */\n    Internal: \"Internal\",\n    /**\n     * @property {ErrorKind} InvalidInput There was a problem with the provided\n     * input, such as the wrong format or a null value.\n     */\n    InvalidInput: \"InvalidInput\",\n    /**\n     * @property {ErrorKind} NotAllowed There was a problem due to the state of\n     * the system not matching the requested operation or input. For example,\n     * trying to create a username that is valid, but is already taken by\n     * another user. Use {@link InvalidInput} instead when the input isn't\n     * valid regardless of the state of the system. Use {@link NotFound} when\n     * the failure is due to not being able to find a resource.\n     */\n    NotAllowed: \"NotAllowed\",\n    /**\n     * @property {ErrorKind} TransientService There was a problem when making a\n     * request to a service.\n     */\n    TransientService: \"TransientService\",\n    /**\n     * @property {ErrorKind} Service There was a non-transient problem when\n     * making a request to service.\n     */\n    Service: \"Service\",\n});\n\n/**\n * @type {ErrorKind} The kind of error being reported\n */\nexport type ErrorKind = typeof Errors[keyof typeof Errors];\n\nexport type LogErrorOptions = {\n    // The cause of the error.\n    cause?: Error | null | undefined;\n    // Extra metadata about the error that is safe and small enough to send to\n    // external log systems (think Sentry).\n    loggedMetadata?: Metadata | null | undefined;\n    // Extra metadata about the error. Any data included in this key is\n    // explicitly marked to _not_ be delivered to any configured logging\n    // systems.\n    metadata?: Metadata | null | undefined;\n};\n\n/**\n * Provides logging infrastructure for Perseus\n */\nexport interface ILogger {\n    // Logs a message\n    // NOTE: Prefer including any data that varies in the `extra` parameter\n    // instead of including it in the message. This makes it easier for error\n    // logging platforms to group like errors together.\n    log(message: string, extra?: Metadata | null | undefined): void;\n    // Logs an error with a message\n    // NOTE: Prefer including any data that varies in the `extra` parameter\n    // instead of including it in the message. This makes it easier for error\n    // logging platforms to group like errors together.\n    error(message: string, kind: ErrorKind, extra?: LogErrorOptions): void;\n}\n\nexport const Log: ILogger = {\n    // Logs a message\n    log: (message: string, extra?: Metadata | null) => {\n        getDependencies().Log.log(message, extra);\n    },\n\n    // Logs an error with a message\n    error: (\n        // NOTE: Prefer including any data that varies in the `extra` parameter\n        // instead of including it in the message. This makes it easier for error\n        // logging platforms to group like errors together.\n        message: string,\n        kind: ErrorKind,\n        extra?: LogErrorOptions,\n    ) => {\n        getDependencies().Log.error(message, kind, extra);\n    },\n};\n","import type {ErrorKind} from \"./logging/log\";\nimport type {Metadata} from \"@khanacademy/wonder-stuff-core\";\n\ntype Options = {\n    metadata?: Metadata | null | undefined;\n};\n\nexport class PerseusError extends Error {\n    kind: ErrorKind;\n    metadata: Metadata | null | undefined;\n\n    constructor(message: string, kind: ErrorKind, options?: Options) {\n        super(message);\n        this.kind = kind;\n        this.metadata = options?.metadata;\n    }\n}\n","/**\n * These are things that widgets should exclude when serializing themselves.\n *\n * The use of this list needs to die. Basically, there are codepaths that\n * blindly serialize the \"props\" of a widget so that it can pass around its\n * info. Unfortunately, props aren't guaranteed to be serializable, and\n * automatically serializing schemaless list of attributes causes issues (e.g.\n * circular JSON structures sometimes).\n *\n * This blocks things that we know don't need to be serialized.\n */\n\nconst denylist = [\n    // standard props \"added\" by react\n    // (technically the renderer still adds them)\n    \"key\",\n    \"ref\",\n    // added by src/renderer.jsx\n    \"containerSizeClass\",\n    \"widgetId\",\n    \"onChange\",\n    \"problemNum\",\n    \"apiOptions\",\n    \"questionCompleted\",\n    \"findWidgets\",\n    // added by src/editor.jsx, for widgets removing themselves\n    // this is soooo not the right place for this, but alas.\n    \"onRemove\",\n    // also added by src/editor.jsx\n    \"id\",\n    // Callbacks and items for interaction handling\n    \"onBlur\",\n    \"onFocus\",\n    \"trackInteraction\",\n    \"keypadElement\",\n];\n\nexport const removeDenylistProps = (props: any): any => {\n    const newProps = {...props} as const;\n    for (const prop of denylist) {\n        if (prop in newProps) {\n            delete newProps[prop];\n        }\n    }\n    return newProps;\n};\n\nexport default denylist;\n","/* eslint-disable @babel/no-invalid-this */\n/**\n * Changeable\n *\n * Adds a this.change() function to a component\n *\n * This.change takes prop changes as parameters, and calls\n * this.props.onChange with the modified props.\n */\n\nimport PropTypes from \"prop-types\";\nimport _ from \"underscore\";\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport WIDGET_PROP_DENYLIST from \"./widget-prop-denylist\";\n\nimport type {ChangeFn} from \"../types\";\n\nconst USAGE =\n    \"Usage:\\n\" +\n    \"  this.change({propName: 5}, callback);\\n\" +\n    '  this.change(\"propName\", 5, callback);\\n' +\n    '  this.change(\"propName\")';\n\n/**\n * Primary helper function for this.change()\n *\n * Takes the parameters in a consistent style, once this.change() has\n * figured out which way it was called.\n */\nconst _changeMultiple = function (\n    component: any,\n    newProps:\n        | string\n        | Record<any, any>\n        | {\n              [key: string]: any;\n          },\n    callback,\n) {\n    // Omit \"default\" props:\n    // ref and key come from react, and don't actually represent\n    //   the conceptual state of our component\n    // onChange comes from our parent to allow this modification,\n    //   and doesn't conceptually represent the state of our component\n    const currProps = _.omit(component.props, WIDGET_PROP_DENYLIST);\n    const nextProps = _.extend(currProps, newProps);\n    component.props.onChange(nextProps, callback);\n};\n\n/**\n * Helper function for changing a single prop\n */\nconst _changeSingle = function (\n    component: any,\n    propName: string,\n    value: any,\n    callback,\n) {\n    if (value === undefined) {\n        // If called with a single prop name, return a lambda to change\n        // a single prop on the current object\n        return _.partial(_changeSingle, component, propName);\n    }\n    // If called with two values, change a single prop of the\n    // current object\n    const newProps: Record<string, any> = {};\n    newProps[propName] = value;\n    _changeMultiple(component, newProps, callback);\n};\n\n/**\n * this.change()\n *\n * Can be called as follows:\n * this.change(newProps, callback);\n *\n * this.change(propName, propValue, callback);\n *\n * this.change(propName) -> returns a lambda that takes a prop value to\n * set and a callback to call after having set that value.\n */\n// TODO(WEB-1727): use proper TypeScript syntax for overloaded functions\nexport const change: ChangeFn = function (\n    newPropsOrSinglePropName,\n    propValue,\n    callback,\n) {\n    if (_.isObject(newPropsOrSinglePropName) && callback === undefined) {\n        // Called with an object of multiple props to change\n        callback = propValue;\n        return _changeMultiple(\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this,\n            newPropsOrSinglePropName, // object newProps\n            callback,\n        );\n    }\n    if (typeof newPropsOrSinglePropName === \"string\") {\n        // Called with a string propName of a single prop to change\n        return _changeSingle(\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this,\n            newPropsOrSinglePropName, // string propName\n            propValue,\n            callback,\n        );\n    }\n    throw new PerseusError(\n        \"Invalid types sent to this.change(): \" +\n            // eslint-disable-next-line prefer-rest-params\n            _.toArray(arguments).join() +\n            \"\\n\" +\n            USAGE,\n        Errors.Internal,\n    );\n};\n\nexport const propTypes = {\n    onChange: PropTypes.func.isRequired,\n} as const;\n\nexport type ChangeableProps = {\n    onChange: (\n        values: {\n            [key: string]: any;\n        },\n        callback?: () => unknown | null | undefined,\n        silent?: boolean,\n    ) => unknown;\n};\n","/* eslint-disable @babel/no-invalid-this, react/forbid-prop-types, react/no-unsafe, react/sort-comp */\nimport $ from \"jquery\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nconst textWidthCache: Record<string, any> = {};\nfunction getTextWidth(text: any) {\n    if (!textWidthCache[text]) {\n        // Hacky way to guess the width of an input box\n        const $test = $(\"<span>\").text(text).appendTo(\"body\");\n        // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n        textWidthCache[text] = $test.width() + 5;\n        $test.remove();\n    }\n    return textWidthCache[text];\n}\n\nclass TextListEditor extends React.Component<any, any> {\n    static propTypes = {\n        options: PropTypes.array,\n        layout: PropTypes.string,\n        onChange: PropTypes.func.isRequired,\n    };\n\n    static defaultProps: any = {\n        options: [],\n        layout: \"horizontal\",\n    };\n\n    state: any = {\n        items: this.props.options.concat(\"\"),\n    };\n\n    UNSAFE_componentWillReceiveProps(nextProps: any) {\n        this.setState({\n            items: nextProps.options.concat(\"\"),\n        });\n    }\n\n    render(): React.ReactNode {\n        const className = [\n            \"perseus-text-list-editor\",\n            \"perseus-clearfix\",\n            \"layout-\" + this.props.layout,\n        ].join(\" \");\n\n        const inputs = _.map(\n            this.state.items,\n            function (item, i) {\n                return (\n                    <li key={i}>\n                        <input\n                            ref={\"input_\" + i}\n                            type=\"text\"\n                            value={item}\n                            // eslint-disable-next-line react/jsx-no-bind\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            onChange={this.onChange.bind(this, i)}\n                            // eslint-disable-next-line react/jsx-no-bind\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            onKeyDown={this.onKeyDown.bind(this, i)}\n                            style={{width: getTextWidth(item)}}\n                        />\n                    </li>\n                );\n            },\n            this,\n        );\n\n        return <ul className={className}>{inputs}</ul>;\n    }\n\n    onChange: (\n        arg1: number,\n        arg2: React.ChangeEvent<HTMLInputElement>,\n    ) => void = (index, event) => {\n        let items = _.clone(this.state.items);\n        items[index] = event.target.value;\n\n        if (index === items.length - 1) {\n            items = items.concat(\"\");\n        }\n\n        this.setState({items: items});\n        this.props.onChange(_.compact(items));\n    };\n\n    onKeyDown: (arg1: number, arg2: React.KeyboardEvent) => void = (\n        index,\n        event,\n    ) => {\n        const which = event.nativeEvent.keyCode;\n\n        // Backspace deletes an empty input...\n        if (which === 8 /* backspace */ && this.state.items[index] === \"\") {\n            event.preventDefault();\n\n            const items = _.clone(this.state.items);\n            const focusIndex = index === 0 ? 0 : index - 1;\n\n            if (\n                index === items.length - 1 &&\n                (index === 0 || items[focusIndex] !== \"\")\n            ) {\n                // ...except for the last one, iff it is the only empty\n                // input at the end.\n                // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n                ReactDOM.findDOMNode(this.refs[\"input_\" + focusIndex]).focus(); // eslint-disable-line react/no-string-refs\n            } else {\n                items.splice(index, 1);\n                this.setState({items: items}, function () {\n                    // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                    ReactDOM.findDOMNode(\n                        // eslint-disable-next-line react/no-string-refs\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.refs[\"input_\" + focusIndex],\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n                    ).focus();\n                });\n            }\n\n            // Deleting the last character in the second-to-last input\n            // removes it\n        } else if (\n            which === 8 /* backspace */ &&\n            this.state.items[index].length === 1 &&\n            index === this.state.items.length - 2\n        ) {\n            event.preventDefault();\n\n            const items = _.clone(this.state.items);\n            items.splice(index, 1);\n            this.setState({items: items});\n            this.props.onChange(_.compact(items));\n\n            // Enter adds an option below the current one...\n        } else if (which === 13 /* enter */) {\n            event.preventDefault();\n\n            const items = _.clone(this.state.items);\n            const focusIndex = index + 1;\n\n            if (index === items.length - 2) {\n                // ...unless the empty input is just below.\n                // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n                ReactDOM.findDOMNode(this.refs[\"input_\" + focusIndex]).focus(); // eslint-disable-line react/no-string-refs\n            } else {\n                items.splice(focusIndex, 0, \"\");\n                this.setState({items: items}, function () {\n                    // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                    ReactDOM.findDOMNode(\n                        // eslint-disable-next-line react/no-string-refs\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.refs[\"input_\" + focusIndex],\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n                    ).focus();\n                });\n            }\n        }\n    };\n}\n\nexport default TextListEditor;\n","/**\n * Stub Tag Editor.\n *\n * This is stupidly used by Perseus Zero because I didn't implement\n * the <TagEditor> for Perseus Zero (since everyone wants me to\n * delete it anyways).\n *\n * This is a small wrapper for a TextListEditor that allows us to\n * edit raw Tag ID strings in perseus zero (please don't use this).\n *\n * It also gives a nicer interface for the group metadata editor\n * in local demo mode.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nimport TextListEditor from \"./text-list-editor\";\n\nconst EMPTY_ARRAY = [];\n\nclass StubTagEditor extends React.Component<any> {\n    static propTypes = {\n        value: PropTypes.arrayOf(PropTypes.string),\n        onChange: PropTypes.func.isRequired,\n        showTitle: PropTypes.bool.isRequired,\n    };\n\n    static defaultProps: any = {\n        value: EMPTY_ARRAY,\n        showTitle: true,\n    };\n\n    render(): React.ReactNode {\n        return (\n            <div>\n                {this.props.showTitle && (\n                    <div style={{fontSize: 14}}>Tags:</div>\n                )}\n                {/* this is silly, but we have to `|| []` here because\n                we sometimes have the metadata set to null\n                (legacy saves, I think), which doesn't get defaulted\n                through defaultProps */}\n                <TextListEditor\n                    options={this.props.value || EMPTY_ARRAY}\n                    layout=\"vertical\"\n                    onChange={this.props.onChange}\n                />\n            </div>\n        );\n    }\n}\n\nexport default StubTagEditor;\n","/**\n * [Most of] the Perseus client API.\n *\n * If making a change to this file, or otherwise to the perseus\n * API, you should increment:\n *  * the perseus api major version if it is a breaking change\n *  * the perseus api minor version if it is an additive-only change\n *  * nothing if it is purely a bug fix.\n *\n * Callbacks passed to Renderer/ItemRenderer:\n *  * onInputError:\n *    Called when there is an error grading a widget\n *  * onFocusChange: (newFocusPath, oldFocusPath, keypadDOMNode)\n *    Called when the user focus changes. The first two parameters are `path`\n *    arrays uniquely identifying the respect inputs. The third parameter,\n *    `keypadDOMNode`, is the DOM node of the custom keypad, or `null` if the\n *    keypad is disabled, which can be used by clients to accommodate for the\n *    appearance of the keypad on the screen.\n *    When focus changes to or from nothing being selected, `path` will be null.\n *  * interactionCallback: Called when the user interacts with a widget.\n *  * answerableCallback: Called with the current `answerability` of the\n *    problem, e.g. whether all required fields have input.\n *  * getAnotherHint: If provided, a button is rendered at the bottom of the\n *    hints (only when at least one hint has been shown, and not all hints\n *    have been shown) allowing the user to take another hint. This function\n *    is then called when the user clicks the button.\n *\n * Stable CSS ClassNames:\n * These are css class names that will continue to preserve their\n * semantic meaning across the same perseus api major version.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nimport StubTagEditor from \"./components/stub-tag-editor\";\n\nimport type {APIOptionsWithDefaults} from \"./types\";\n\nexport const ApiOptions = {\n    propTypes: PropTypes.shape({\n        isArticle: PropTypes.bool.isRequired,\n\n        onInputError: PropTypes.func.isRequired,\n        onFocusChange: PropTypes.func.isRequired,\n        GroupMetadataEditor: PropTypes.func.isRequired,\n        showAlignmentOptions: PropTypes.bool.isRequired,\n        readOnly: PropTypes.bool.isRequired,\n\n        answerableCallback: PropTypes.func,\n        getAnotherHint: PropTypes.func,\n        interactionCallback: PropTypes.func,\n\n        // A function that takes in the relative problem number (starts at\n        // 0 and is incremented for each group widget), and the ID of the\n        // group widget, then returns a react component that will be added\n        // immediately above the renderer in the group widget. If the\n        // function returns null, no annotation will be added.\n        groupAnnotator: PropTypes.func.isRequired,\n\n        // If imagePlaceholder or widgetPlaceholder are set, perseus will\n        // render the placeholder instead of the image or widget node.\n        imagePlaceholder: PropTypes.node,\n        widgetPlaceholder: PropTypes.node,\n\n        // Base React elements that can be used in place of the standard DOM\n        // DOM elements. For example, when provided, <Link /> will be used\n        // in place of <a />. This allows clients to provide pre-styled\n        // components or components with custom behavior.\n        baseElements: PropTypes.shape({\n            // The <Link /> component provided here must adhere to the same\n            // interface as React's base <a /> component.\n            Link: PropTypes.func,\n        }),\n\n        // Function that takes dimensions and returns a React component\n        // to display while an image is loading\n        imagePreloader: PropTypes.func,\n\n        // Function that takes an object argument. The object should\n        // include type and id, both strings, at least and can optionally\n        // include a boolean \"correct\" value. This is used for keeping\n        // track of widget interactions.\n        trackInteraction: PropTypes.func,\n\n        // A boolean that indicates whether or not a custom keypad is\n        // being used.  For mobile web this will be the ProvidedKeypad\n        // component.  In this situation we use the MathInput component\n        // from the math-input repo instead of the existing perseus math\n        // input components.\n        customKeypad: PropTypes.bool,\n\n        // If this is provided, it is called instead of appending an instance\n        // of `math-input`'s keypad to the body. This is used by the native\n        // apps so they can have the keypad be defined on the native side.\n        // It is called with an function that, when called, blurs the input,\n        // and is expected to return an object of the shape\n        // keypadElementPropType from math-input/src/prop-types.js.\n        nativeKeypadProxy: PropTypes.func,\n\n        // Indicates whether or not to use mobile styling.\n        isMobile: PropTypes.bool,\n\n        // A function, called with a bool indicating whether use of the\n        // drawing area (scratchpad) should be allowed/disallowed.\n        // Previously handled by `Khan.scratchpad.enable/disable`\n        setDrawingAreaAvailable: PropTypes.func,\n\n        // Whether to use the Draft.js editor or the legacy textarea\n        useDraftEditor: PropTypes.bool,\n\n        // The color used for the hint progress indicator (eg. 1 / 3)\n        hintProgressColor: PropTypes.string,\n\n        // Whether this Renderer is allowed to auto-scroll the rest of the\n        // page. For example, if this is enabled, the most recently used\n        // radio widget will attempt to keep the \"selected\" answer in view\n        // after entering review mode.\n        //\n        // Defaults to `false`.\n        canScrollPage: PropTypes.bool,\n\n        // Whether or not we are rendering content inside of a modal.\n        inModal: PropTypes.bool,\n\n        // Whether to enable the cross-out feature on multiple-choice radio\n        // widgets. This allows users to note which answers they believe to\n        // be incorrect, to find the answer by process of elimination.\n        //\n        // We plan to roll this out to all call sites eventually, but for\n        // now we have this flag, to add it to Generalized Test Prep first.\n        crossOutEnabled: PropTypes.bool,\n\n        // The value in milliseconds by which the local state of content\n        // in a editor is delayed before propagated to a prop. For example,\n        // when text is typed in the text area of an Editor component,\n        // there will be a delay equal to the value of `editorChangeDelay`\n        // before the change is propagated. This is added for better\n        // responsiveness of the editor when used in certain contexts such\n        // as StructuredItem exercises where constant re-rendering for each\n        // keystroke caused text typed in the text area to appear in it\n        // only after a good few seconds.\n        editorChangeDelay: PropTypes.number,\n    }).isRequired,\n\n    defaults: {\n        isArticle: false,\n        isMobile: false,\n        onInputError: function () {},\n        onFocusChange: function () {},\n        GroupMetadataEditor: StubTagEditor,\n        showAlignmentOptions: false,\n        readOnly: false,\n        groupAnnotator: function (): null {\n            return null;\n        },\n        baseElements: {\n            Link: (\n                props: any,\n            ): React.ReactElement<React.ComponentProps<\"a\">> => {\n                return <a {...props} />;\n            },\n        },\n        setDrawingAreaAvailable: function () {},\n        useDraftEditor: false,\n        canScrollPage: false,\n        inModal: false,\n        crossOutEnabled: false,\n        editorChangeDelay: 0,\n    } as APIOptionsWithDefaults,\n} as const;\n\nexport const ClassNames = {\n    RENDERER: \"perseus-renderer\",\n    TWO_COLUMN_RENDERER: \"perseus-renderer-two-columns\",\n    RESPONSIVE_RENDERER: \"perseus-renderer-responsive\",\n    INPUT: \"perseus-input\",\n    FOCUSED: \"perseus-focused\",\n    RADIO: {\n        OPTION: \"perseus-radio-option\",\n        SELECTED: \"perseus-radio-selected\",\n        OPTION_CONTENT: \"perseus-radio-option-content\",\n    },\n    INTERACTIVE: \"perseus-interactive\",\n    CORRECT: \"perseus-correct\",\n    INCORRECT: \"perseus-incorrect\",\n    UNANSWERED: \"perseus-unanswered\",\n    MOBILE: \"perseus-mobile\",\n} as const;\n","import {number as knumber} from \"@khanacademy/kmath\";\nimport $ from \"jquery\";\nimport _ from \"underscore\";\n\nimport type {MathFormat} from \"../perseus-types\";\n\nconst KhanMath = {\n    // Simplify formulas before display\n    cleanMath: function (expr: string): string {\n        return typeof expr === \"string\"\n            ? expr\n                  .replace(/\\+\\s*-/g, \"- \")\n                  .replace(/-\\s*-/g, \"+ \")\n                  .replace(/\\^1/g, \"\")\n            : expr;\n    },\n\n    // Bound a number by 1e-6 and 1e20 to avoid exponents after toString\n    bound: function (num: number): number {\n        if (num === 0) {\n            return num;\n        }\n        if (num < 0) {\n            return -KhanMath.bound(-num);\n        }\n        return Math.max(1e-6, Math.min(num, 1e20));\n    },\n\n    factorial: function (x: number): number {\n        if (x <= 1) {\n            return x;\n        }\n        return x * KhanMath.factorial(x - 1);\n    },\n\n    getGCD: function (a: number, b: number): number {\n        if (arguments.length > 2) {\n            // TODO(kevinb): rewrite using rest args instead of arguments\n            // eslint-disable-next-line prefer-rest-params\n            const rest = [].slice.call(arguments, 1);\n            // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n            return KhanMath.getGCD(a, KhanMath.getGCD(...rest));\n        }\n        let mod;\n\n        a = Math.abs(a);\n        b = Math.abs(b);\n\n        while (b) {\n            mod = a % b;\n            a = b;\n            b = mod;\n        }\n\n        return a;\n    },\n\n    getLCM: function (a: number, b: number): number {\n        if (arguments.length > 2) {\n            // TODO(kevinb): rewrite using rest args instead of arguments\n            // eslint-disable-next-line prefer-rest-params\n            const rest = [].slice.call(arguments, 1);\n            // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n            return KhanMath.getLCM(a, KhanMath.getLCM(...rest));\n        }\n        return Math.abs(a * b) / KhanMath.getGCD(a, b);\n    },\n\n    primes: [\n        2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67,\n        71, 73, 79, 83, 89, 97,\n    ],\n\n    isPrime: function (n: number): boolean {\n        if (n <= 1) {\n            return false;\n        }\n        if (n < 101) {\n            return !!$.grep(KhanMath.primes, function (p, i) {\n                return Math.abs(p - n) <= 0.5;\n            }).length;\n        }\n        if (n <= 1 || (n > 2 && n % 2 === 0)) {\n            return false;\n        }\n        for (let i = 3, sqrt = Math.sqrt(n); i <= sqrt; i += 2) {\n            if (n % i === 0) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n    // @ts-expect-error [FEI-5003] - TS2366 - Function lacks ending return statement and return type does not include 'undefined'.\n    getPrimeFactorization: function (number: number): ReadonlyArray<number> {\n        if (number === 1) {\n            return [];\n        }\n        if (KhanMath.isPrime(number)) {\n            return [number];\n        }\n\n        const maxf = Math.sqrt(number);\n        for (let f = 2; f <= maxf; f++) {\n            if (number % f === 0) {\n                return $.merge(\n                    KhanMath.getPrimeFactorization(f),\n                    KhanMath.getPrimeFactorization(number / f),\n                );\n            }\n        }\n    },\n\n    // Round a number to the nearest increment\n    // E.g., if increment = 30 and num = 40, return 30. if increment = 30 and\n    //     num = 45, return 60.\n    roundToNearest: function (increment: number, num: number): number {\n        return Math.round(num / increment) * increment;\n    },\n\n    // Round a number to a certain number of decimal places\n    roundTo: function (precision: number, num: number): number {\n        const factor = Math.pow(10, precision).toFixed(5);\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string' is not assignable to parameter of type 'number'. | TS2363 - The right-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type. | TS2363 - The right-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.\n        return Math.round((num * factor).toFixed(5)) / factor;\n    },\n\n    /**\n     * Return a string of num rounded to a fixed precision decimal places,\n     * with an approx symbol if num had to be rounded, and trailing 0s\n     */\n    toFixedApprox: function (num: number, precision: number): string {\n        // TODO(aria): Make this locale-dependent like KhanUtil.localeToFixed\n        const fixedStr = num.toFixed(precision);\n        if (knumber.equal(+fixedStr, num)) {\n            return fixedStr;\n        }\n        return \"\\\\approx \" + fixedStr;\n    },\n\n    /**\n     * Return a string of num rounded to precision decimal places, with an\n     * approx symbol if num had to be rounded, but no trailing 0s if it was\n     * not rounded.\n     */\n    roundToApprox: function (num: number, precision: number): string {\n        const fixed = KhanMath.roundTo(precision, num);\n        if (knumber.equal(fixed, num)) {\n            return String(fixed);\n        }\n        return KhanMath.toFixedApprox(num, precision);\n    },\n\n    // toFraction(4/8) => [1, 2]\n    // toFraction(0.666) => [333, 500]\n    // toFraction(0.666, 0.001) => [2, 3]\n    //\n    // tolerance can't be bigger than 1, sorry\n    toFraction: function (\n        decimal: number,\n        tolerance?: number,\n    ): [number, number] {\n        if (tolerance == null) {\n            tolerance = Math.pow(2, -46);\n        }\n\n        if (decimal < 0 || decimal > 1) {\n            let fract = decimal % 1;\n            fract += fract < 0 ? 1 : 0;\n\n            const nd = KhanMath.toFraction(fract, tolerance);\n            nd[0] += Math.round(decimal - fract) * nd[1];\n            return nd;\n        }\n        if (Math.abs(Math.round(Number(decimal)) - decimal) <= tolerance) {\n            return [Math.round(decimal), 1];\n        }\n        let loN = 0;\n        let loD = 1;\n        let hiN = 1;\n        let hiD = 1;\n        let midN = 1;\n        let midD = 2;\n\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            if (Math.abs(Number(midN / midD) - decimal) <= tolerance) {\n                return [midN, midD];\n            }\n            if (midN / midD < decimal) {\n                loN = midN;\n                loD = midD;\n            } else {\n                hiN = midN;\n                hiD = midD;\n            }\n\n            midN = loN + hiN;\n            midD = loD + hiD;\n        }\n    },\n\n    // Returns the format (string) of a given numeric string\n    // Note: purposively more inclusive than answer-types' predicate.forms\n    // That is, it is not necessarily true that interpreted input are numeric\n    getNumericFormat: function (text: string): MathFormat | null | undefined {\n        text = $.trim(text);\n        text = text.replace(/\\u2212/, \"-\").replace(/([+-])\\s+/g, \"$1\");\n        if (text.match(/^[+-]?\\d+$/)) {\n            return \"integer\";\n        }\n        if (text.match(/^[+-]?\\d+\\s+\\d+\\s*\\/\\s*\\d+$/)) {\n            return \"mixed\";\n        }\n        const fraction = text.match(/^[+-]?(\\d+)\\s*\\/\\s*(\\d+)$/);\n        if (fraction) {\n            return parseFloat(fraction[1]) > parseFloat(fraction[2])\n                ? \"improper\"\n                : \"proper\";\n        }\n        if (text.replace(/[,. ]/g, \"\").match(/^\\d+$/)) {\n            return \"decimal\";\n        }\n        if (text.match(/(pi?|\\u03c0|t(?:au)?|\\u03c4|pau)/)) {\n            return \"pi\";\n        }\n        return null;\n    },\n\n    // Returns a string of the number in a specified format\n    toNumericString: function (number: number, format?: MathFormat): string {\n        if (number == null) {\n            return \"\";\n        }\n        if (number === 0) {\n            return \"0\"; // otherwise it might end up as 0% or 0pi\n        }\n\n        if (format === \"percent\") {\n            return number * 100 + \"%\";\n        }\n\n        if (format === \"pi\") {\n            const fraction = knumber.toFraction(number / Math.PI);\n            const numerator = Math.abs(fraction[0]);\n            const denominator = fraction[1];\n            if (knumber.isInteger(numerator)) {\n                const sign = number < 0 ? \"-\" : \"\";\n                const pi = \"\\u03C0\";\n                return (\n                    sign +\n                    (numerator === 1 ? \"\" : numerator) +\n                    pi +\n                    (denominator === 1 ? \"\" : \"/\" + denominator)\n                );\n            }\n        }\n\n        if (_([\"proper\", \"improper\", \"mixed\", \"fraction\"]).contains(format)) {\n            const fraction = knumber.toFraction(number);\n            const numerator = Math.abs(fraction[0]);\n            const denominator = fraction[1];\n            const sign = number < 0 ? \"-\" : \"\";\n            if (denominator === 1) {\n                return sign + numerator; // for integers, irrational, d > 1000\n            }\n            if (format === \"mixed\") {\n                const modulus = numerator % denominator;\n                const integer = (numerator - modulus) / denominator;\n                return (\n                    sign +\n                    (integer ? integer + \" \" : \"\") +\n                    modulus +\n                    \"/\" +\n                    denominator\n                );\n            } // otherwise proper, improper, or fraction\n            return sign + numerator + \"/\" + denominator;\n        }\n\n        // otherwise (decimal, float, long long)\n        return String(number);\n    },\n} as const;\n\nexport default KhanMath;\n","/* eslint-disable no-useless-escape */\nimport * as KAS from \"@khanacademy/kas\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport $ from \"jquery\";\nimport _ from \"underscore\";\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport KhanMath from \"./math\";\n\nconst MAXERROR_EPSILON = Math.pow(2, -42);\n\ntype Guess = any;\ntype Predicate = any;\n\n// TOOD(kevinb): Figure out how this relates to KEScore in\n// perseus-all-package/types.js and see if there's a way to\n// unify these types.\ntype Score = {\n    empty: boolean;\n    correct: boolean;\n    message: string | null | undefined;\n    suppressAlmostThere?: boolean | null | undefined;\n    guess: Guess;\n    // It would be nice if we could ungraded required\n    ungraded?: boolean;\n};\n\nexport const errors = {\n    APPROXIMATED_PI_ERROR: i18n._(\n        \"Your answer is close, but you may \" +\n            \"have approximated pi. Enter your \" +\n            \"answer as a multiple of pi, like \" +\n            \"<code>12\\\\ \\\\text{pi}</code> or \" +\n            \"<code>2/3\\\\ \\\\text{pi}</code>\",\n    ) as string,\n    EXTRA_SYMBOLS_ERROR: i18n._(\n        \"We could not understand your \" +\n            \"answer. Please check your answer for extra \" +\n            \"text or symbols.\",\n    ) as string,\n    NEEDS_TO_BE_SIMPLFIED_ERROR: i18n._(\n        \"Your answer is almost correct, \" + \"but it needs to be simplified.\",\n    ) as string,\n    MISSING_PERCENT_ERROR: i18n._(\n        \"Your answer is almost correct, \" +\n            \"but it is missing a \" +\n            \"<code>\\\\%</code> at the end.\",\n    ) as string,\n    MULTIPLICATION_SIGN_ERROR: i18n._(\n        \"I'm a computer. I only understand \" +\n            \"multiplication if you use an asterisk \" +\n            \"(*) as the multiplication sign.\",\n    ) as string,\n    WRONG_CASE_ERROR: i18n._(\n        \"Your answer includes use of a variable with the wrong case.\",\n    ) as string,\n    WRONG_LETTER_ERROR: i18n._(\n        \"Your answer includes a wrong variable letter.\",\n    ) as string,\n} as const;\n\n/*\n * Answer types\n *\n * Utility for creating answerable questions displayed in exercises\n *\n * Different answer types produce different kinds of input displays, and do\n * different kinds of checking on the solutions.\n *\n * Each of the objects contain two functions, setup and createValidator.\n *\n * The setup function takes a solutionarea and solution, and performs setup\n * within the solutionarea, and then returns an object which contains:\n *\n * answer: a function which, when called, will retrieve the current answer from\n *         the solutionarea, which can then be validated using the validator\n *         function\n * validator: a function returned from the createValidator function (defined\n *            below)\n * solution: the correct answer to the problem\n * showGuess: a function which, when given a guess, shows the guess within the\n *            provided solutionarea\n * showGuessCustom: a function which displays parts of a guess that are not\n *                  within the solutionarea; currently only used for custom\n *                  answers\n *\n * The createValidator function only takes a solution, and it returns a\n * function which can be used to validate an answer.\n *\n * The resulting validator function returns:\n * - true: if the answer is fully correct\n * - false: if the answer is incorrect\n * - \"\" (the empty string): if no answer has been provided (e.g. the answer box\n *   is left unfilled)\n * - a string: if there is some slight error\n *\n * In most cases, setup and createValidator don't really need the solution DOM\n * element so we have setupFunctional and createValidatorFunctional for them\n * which take only $solution.text() and $solution.data(). This makes it easier\n * to reuse specific answer types.\n *\n * TODO(alpert): Think of a less-absurd name for createValidatorFunctional.\n *\n */\n\nconst KhanAnswerTypes = {\n    /*\n     * predicate answer type\n     *\n     * performs simple predicate-based checking of a numeric solution, with\n     * different kinds of number formats\n     *\n     * Uses the data-forms option on the solution to choose which number formats\n     * are acceptable. Available data-forms:\n     *\n     * - integer:  3\n     * - proper:   3/5\n     * - improper: 5/3\n     * - pi:       3 pi\n     * - log:      log(5)\n     * - percent:  15%\n     * - mixed:    1 1/3\n     * - decimal:  1.7\n     *\n     * The solution should be a predicate of the form:\n     *\n     * function(guess, maxError) {\n     *     return abs(guess - 3) < maxError;\n     * }\n     *\n     */\n    predicate: {\n        defaultForms: \"integer, proper, improper, mixed, decimal\",\n        createValidatorFunctional: function (\n            predicate: Predicate,\n            options: any,\n        ): (arg1: Guess) => Score {\n            // Extract the options from the given solution object\n            options = _.extend(\n                {\n                    simplify: \"required\",\n                    ratio: false,\n                    forms: KhanAnswerTypes.predicate.defaultForms,\n                },\n                options,\n            );\n            let acceptableForms;\n            // this is maintaining backwards compatibility\n            // TODO(merlob) fix all places that depend on this, then delete\n            if (!_.isArray(options.forms)) {\n                acceptableForms = options.forms.split(/\\s*,\\s*/);\n            } else {\n                acceptableForms = options.forms;\n            }\n\n            // TODO(jack): remove options.inexact in favor of options.maxError\n            if (options.inexact === undefined) {\n                // If we aren't allowing inexact, ensure that we don't have a\n                // large maxError as well.\n                options.maxError = 0;\n            }\n            // Allow a small tolerance on maxError, to avoid numerical\n            // representation issues (2.3 should be correct for a solution of\n            // 2.45 with maxError=0.15).\n            options.maxError = +options.maxError + MAXERROR_EPSILON;\n\n            // If percent is an acceptable form, make sure it's the last one\n            // in the list so we don't prematurely complain about not having\n            // a percent sign when the user entered the correct answer in a\n            // different form (such as a decimal or fraction)\n            if (_.contains(acceptableForms, \"percent\")) {\n                acceptableForms = _.without(acceptableForms, \"percent\");\n                acceptableForms.push(\"percent\");\n            }\n\n            // Take text looking like a fraction, and turn it into a number\n            const fractionTransformer = function (text) {\n                text = text\n                    // Replace unicode minus sign with hyphen\n                    .replace(/\\u2212/, \"-\")\n                    // Remove space after +, -\n                    .replace(/([+-])\\s+/g, \"$1\")\n                    // Remove leading/trailing whitespace\n                    .replace(/(^\\s*)|(\\s*$)/gi, \"\");\n\n                // Extract numerator and denominator\n                const match = text.match(/^([+-]?\\d+)\\s*\\/\\s*([+-]?\\d+)$/);\n                // Fractions are represented as \"-\\frac{numerator}{denominator}\"\n                // in Mobile device input instead of \"numerator/denominator\" as\n                // in web-browser.\n                const mobileDeviceMatch = text.match(\n                    /^([+-]?)\\\\frac\\{([+-]?\\d+)\\}\\{([+-]?\\d+)\\}$/,\n                );\n                const parsedInt = parseInt(text, 10);\n                if (match || mobileDeviceMatch) {\n                    let num;\n                    let denom;\n                    let simplified = true;\n                    if (match) {\n                        num = parseFloat(match[1]);\n                        denom = parseFloat(match[2]);\n                    } else {\n                        num = parseFloat(mobileDeviceMatch[2]);\n                        if (mobileDeviceMatch[1] === \"-\") {\n                            if (num < 0) {\n                                simplified = false;\n                            }\n                            num = -num;\n                        }\n                        denom = parseFloat(mobileDeviceMatch[3]);\n                    }\n\n                    simplified =\n                        simplified &&\n                        denom > 0 &&\n                        (options.ratio || denom !== 1) &&\n                        KhanMath.getGCD(num, denom) === 1;\n                    return [\n                        {\n                            value: num / denom,\n                            exact: simplified,\n                        },\n                    ];\n                }\n                if (!isNaN(parsedInt) && \"\" + parsedInt === text) {\n                    return [\n                        {\n                            value: parsedInt,\n                            exact: true,\n                        },\n                    ];\n                }\n\n                return [];\n            };\n\n            /*\n             * Different forms of numbers\n             *\n             * Each function returns a list of objects of the form:\n             *\n             * {\n             *    value: numerical value,\n             *    exact: true/false\n             * }\n             */\n            const forms = {\n                // integer, which is encompassed by decimal\n                integer: function (text) {\n                    // Compare the decimal form to the decimal form rounded to\n                    // an integer. Only accept if the user actually entered an\n                    // integer.\n                    const decimal = forms.decimal(text);\n                    const rounded = forms.decimal(text, 1);\n                    if (\n                        (decimal[0].value != null &&\n                            decimal[0].value === rounded[0].value) ||\n                        (decimal[1].value != null &&\n                            decimal[1].value === rounded[1].value)\n                    ) {\n                        return decimal;\n                    }\n                    return [];\n                },\n\n                // A proper fraction\n                proper: function (text) {\n                    return $.map(fractionTransformer(text), function (o) {\n                        // All fractions that are less than 1\n                        if (Math.abs(o.value) < 1) {\n                            return [o];\n                        }\n                        return [];\n                    });\n                },\n\n                // an improper fraction\n                improper: function (text) {\n                    return $.map(fractionTransformer(text), function (o) {\n                        // All fractions that are greater than 1\n                        if (Math.abs(o.value) >= 1) {\n                            return [o];\n                        }\n                        return [];\n                    });\n                },\n\n                // pi-like numbers\n                pi: function (text) {\n                    let match;\n                    let possibilities: any[] = [];\n\n                    // Replace unicode minus sign with hyphen\n                    text = text.replace(/\\u2212/, \"-\");\n\n                    // - pi\n                    // (Note: we also support \\pi (for TeX), p, tau (and \\tau,\n                    // and t), pau.)\n                    if (\n                        (match = text.match(\n                            /^([+-]?)\\s*(\\\\?pi|p|\\u03c0|\\\\?tau|t|\\u03c4|pau)$/i,\n                        ))\n                    ) {\n                        possibilities = [\n                            {\n                                value: parseFloat(match[1] + \"1\"),\n                                exact: true,\n                            },\n                        ];\n\n                        // 5 / 6 pi\n                    } else if (\n                        (match = text.match(\n                            /^([+-]?\\s*\\d+\\s*(?:\\/\\s*[+-]?\\s*\\d+)?)\\s*\\*?\\s*(\\\\?pi|p|\\u03c0|\\\\?tau|t|\\u03c4|pau)$/i,\n                        ))\n                    ) {\n                        possibilities = fractionTransformer(match[1]);\n\n                        // 4 5 / 6 pi\n                    } else if (\n                        (match = text.match(\n                            /^([+-]?)\\s*(\\d+)\\s*([+-]?\\d+)\\s*\\/\\s*([+-]?\\d+)\\s*\\*?\\s*(\\\\?pi|p|\\u03c0|\\\\?tau|t|\\u03c4|pau)$/i,\n                        ))\n                    ) {\n                        const sign = parseFloat(match[1] + \"1\");\n                        const integ = parseFloat(match[2]);\n                        const num = parseFloat(match[3]);\n                        const denom = parseFloat(match[4]);\n                        const simplified =\n                            num < denom && KhanMath.getGCD(num, denom) === 1;\n\n                        possibilities = [\n                            {\n                                value: sign * (integ + num / denom),\n                                exact: simplified,\n                            },\n                        ];\n\n                        // 5 pi / 6\n                    } else if (\n                        (match = text.match(\n                            /^([+-]?\\s*\\d+)\\s*\\*?\\s*(\\\\?pi|p|\\u03c0|\\\\?tau|t|\\u03c4|pau)\\s*(?:\\/\\s*([+-]?\\s*\\d+))?$/i,\n                        ))\n                    ) {\n                        possibilities = fractionTransformer(\n                            match[1] + \"/\" + match[3],\n                        );\n\n                        // - pi / 4\n                    } else if (\n                        (match = text.match(\n                            /^([+-]?)\\s*\\*?\\s*(\\\\?pi|p|\\u03c0|\\\\?tau|t|\\u03c4|pau)\\s*(?:\\/\\s*([+-]?\\d+))?$/i,\n                        ))\n                    ) {\n                        possibilities = fractionTransformer(\n                            match[1] + \"1/\" + match[3],\n                        );\n\n                        // 0\n                    } else if (text === \"0\") {\n                        possibilities = [{value: 0, exact: true}];\n\n                        // 0.5 pi (fallback)\n                    } else if (\n                        (match = text.match(\n                            /^(.+)\\s*\\*?\\s*(\\\\?pi|p|\\u03c0|\\\\?tau|t|\\u03c4|pau)$/i,\n                        ))\n                    ) {\n                        possibilities = forms.decimal(match[1]);\n                    } else {\n                        possibilities = _.reduce(\n                            KhanAnswerTypes.predicate.defaultForms.split(\n                                /\\s*,\\s*/,\n                            ),\n                            function (memo, form) {\n                                return memo.concat(forms[form](text));\n                            },\n                            [],\n                        );\n\n                        // If the answer is a floating point number that's\n                        // near a multiple of pi, mark is as being possibly\n                        // an approximation of pi.  We actually check if\n                        // it's a plausible approximation of pi/12, since\n                        // sometimes the correct answer is like pi/3 or pi/4.\n                        // We also say it's a pi-approximation if it involves\n                        // x/7 (since 22/7 is an approximation of pi.)\n                        // Never mark an integer as being an approximation\n                        // of pi.\n                        let approximatesPi = false;\n                        const number = parseFloat(text);\n                        if (!isNaN(number) && number !== parseInt(text)) {\n                            const piMult = Math.PI / 12;\n                            const roundedNumber =\n                                piMult * Math.round(number / piMult);\n                            if (Math.abs(number - roundedNumber) < 0.01) {\n                                approximatesPi = true;\n                            }\n                        } else if (text.match(/\\/\\s*7/)) {\n                            approximatesPi = true;\n                        }\n                        if (approximatesPi) {\n                            _.each(possibilities, function (possibility) {\n                                possibility.piApprox = true;\n                            });\n                        }\n                        return possibilities;\n                    }\n\n                    let multiplier = Math.PI;\n                    if (text.match(/\\\\?tau|t|\\u03c4/)) {\n                        multiplier = Math.PI * 2;\n                    }\n\n                    // We're taking an early stand along side xkcd in the\n                    // inevitable ti vs. pau debate... http://xkcd.com/1292\n                    if (text.match(/pau/)) {\n                        multiplier = Math.PI * 1.5;\n                    }\n\n                    $.each(possibilities, function (ix, possibility) {\n                        possibility.value *= multiplier;\n                    });\n                    return possibilities;\n                },\n\n                // Converts '' to 1 and '-' to -1 so you can write \"[___] x\"\n                // and accept sane things\n                coefficient: function (text) {\n                    let possibilities:\n                        | Array<never>\n                        | Array<{\n                              exact: boolean;\n                              value: number;\n                          }> = [];\n\n                    // Replace unicode minus sign with hyphen\n                    text = text.replace(/\\u2212/, \"-\");\n\n                    if (text === \"\") {\n                        possibilities = [{value: 1, exact: true}];\n                    } else if (text === \"-\") {\n                        possibilities = [{value: -1, exact: true}];\n                    }\n                    return possibilities;\n                },\n\n                // simple log(c) form\n                log: function (text) {\n                    let match;\n                    let possibilities = [];\n\n                    // Replace unicode minus sign with hyphen\n                    text = text.replace(/\\u2212/, \"-\");\n                    text = text.replace(/[ \\(\\)]/g, \"\");\n\n                    if ((match = text.match(/^log\\s*(\\S+)\\s*$/i))) {\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type '{ value: number | undefined; exact: boolean; }[]' is not assignable to type 'never[]'.\n                        possibilities = forms.decimal(match[1]);\n                    } else if (text === \"0\") {\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'never'. | TS2322 - Type 'boolean' is not assignable to type 'never'.\n                        possibilities = [{value: 0, exact: true}];\n                    }\n                    return possibilities;\n                },\n\n                // Numbers with percent signs\n                percent: function (text) {\n                    text = $.trim(text);\n                    // store whether or not there is a percent sign\n                    let hasPercentSign = false;\n\n                    if (text.indexOf(\"%\") === text.length - 1) {\n                        text = $.trim(text.substring(0, text.length - 1));\n                        hasPercentSign = true;\n                    }\n\n                    const transformed = forms.decimal(text);\n                    $.each(transformed, function (ix, t) {\n                        t.exact = hasPercentSign;\n                        // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                        t.value = t.value / 100;\n                    });\n                    return transformed;\n                },\n\n                // Mixed numbers, like 1 3/4\n                mixed: function (text) {\n                    const match = text\n                        // Replace unicode minus sign with hyphen\n                        .replace(/\\u2212/, \"-\")\n                        // Remove space after +, -\n                        .replace(/([+-])\\s+/g, \"$1\")\n                        // Extract integer, numerator and denominator\n                        .match(/^([+-]?)(\\d+)\\s+(\\d+)\\s*\\/\\s*(\\d+)$/);\n\n                    if (match) {\n                        const sign = parseFloat(match[1] + \"1\");\n                        const integ = parseFloat(match[2]);\n                        const num = parseFloat(match[3]);\n                        const denom = parseFloat(match[4]);\n                        const simplified =\n                            num < denom && KhanMath.getGCD(num, denom) === 1;\n\n                        return [\n                            {\n                                value: sign * (integ + num / denom),\n                                exact: simplified,\n                            },\n                        ];\n                    }\n\n                    return [];\n                },\n\n                // Decimal numbers -- compare entered text rounded to\n                // 'precision' Reciprical of the precision against the correct\n                // answer. We round to 1/1e10 by default, which is healthily\n                // less than machine epsilon but should be more than any real\n                // decimal answer would use. (The 'integer' answer type uses\n                // precision == 1.)\n                decimal: function (text: string, precision = 1e10) {\n                    const normal = function (text) {\n                        text = $.trim(text);\n\n                        const match = text\n                            // Replace unicode minus sign with hyphen\n                            .replace(/\\u2212/, \"-\")\n                            // Remove space after +, -\n                            .replace(/([+-])\\s+/g, \"$1\")\n                            // Extract integer, numerator and denominator. If\n                            // commas or spaces are used, they must be in the\n                            // \"correct\" places\n                            .match(\n                                /^([+-]?(?:\\d{1,3}(?:[, ]?\\d{3})*\\.?|\\d{0,3}(?:[, ]?\\d{3})*\\.(?:\\d{3}[, ]?)*\\d{1,3}))$/,\n                            );\n\n                        // You can't start a number with `0,`, to prevent us\n                        // interpeting '0.342' as correct for '342'\n                        const badLeadingZero = text.match(/^0[0,]*,/);\n\n                        if (match && !badLeadingZero) {\n                            let x = parseFloat(match[1].replace(/[, ]/g, \"\"));\n\n                            if (options.inexact === undefined) {\n                                x = Math.round(x * precision) / precision;\n                            }\n\n                            return x;\n                        }\n                    };\n\n                    const commas = function (text: string) {\n                        text = text.replace(/([\\.,])/g, function (_, c) {\n                            return c === \".\" ? \",\" : \".\";\n                        });\n                        return normal(text);\n                    };\n\n                    return [\n                        {value: normal(text), exact: true},\n                        {value: commas(text), exact: true},\n                    ];\n                },\n            } as const;\n\n            // validator function\n            return function (guess: Guess): Score {\n                // The fallback variable is used in place of the answer, if no\n                // answer is provided (i.e. the field is left blank)\n                const fallback =\n                    options.fallback != null ? \"\" + options.fallback : \"\";\n\n                guess = $.trim(guess) || fallback;\n\n                const score: Score = {\n                    empty: guess === \"\",\n                    correct: false,\n                    message: null as string | null | undefined,\n                    guess: guess,\n                };\n\n                // iterate over all the acceptable forms, and if one of the\n                // answers is correct, return true\n                $.each(acceptableForms, function (i, form) {\n                    const transformed = forms[form](guess);\n                    for (let j = 0, l = transformed.length; j < l; j++) {\n                        const val = transformed[j].value;\n                        const exact = transformed[j].exact;\n                        const piApprox = transformed[j].piApprox;\n                        // If a string was returned, and it exactly matches,\n                        // return true\n                        if (predicate(val, options.maxError)) {\n                            // If the exact correct number was returned,\n                            // return true\n                            if (exact || options.simplify === \"optional\") {\n                                score.correct = true;\n                                score.message = options.message || null;\n                                // If the answer is correct, don't say it's\n                                // empty. This happens, for example, with the\n                                // coefficient type where guess === \"\" but is\n                                // interpreted as \"1\" which is correct.\n                                score.empty = false;\n                            } else if (form === \"percent\") {\n                                // Otherwise, an error was returned\n                                score.empty = true;\n                                score.message = errors.MISSING_PERCENT_ERROR;\n                            } else {\n                                if (options.simplify !== \"enforced\") {\n                                    score.empty = true;\n                                }\n                                score.message =\n                                    errors.NEEDS_TO_BE_SIMPLFIED_ERROR;\n                            }\n                            // The return false below stops the looping of the\n                            // callback since predicate check  succeeded.\n                            // No more forms to look to verify the user guess.\n                            return false;\n                        }\n                        if (piApprox && predicate(val, Math.abs(val * 0.001))) {\n                            score.empty = true;\n                            score.message = errors.APPROXIMATED_PI_ERROR;\n                        }\n                    }\n                });\n\n                if (score.correct === false) {\n                    let interpretedGuess = false;\n                    _.each(forms, function (form) {\n                        const anyAreNaN = _.any(form(guess), function (t) {\n                            return t.value != null && !_.isNaN(t.value);\n                        });\n\n                        if (anyAreNaN) {\n                            interpretedGuess = true;\n                        }\n                    });\n                    if (!interpretedGuess) {\n                        score.empty = true;\n                        score.message = errors.EXTRA_SYMBOLS_ERROR;\n                        return score;\n                    }\n                }\n\n                return score;\n            };\n        },\n    },\n\n    /*\n     * number answer type\n     *\n     * wraps the predicate answer type to performs simple number-based checking\n     * of a solution\n     */\n    number: {\n        convertToPredicate: function (\n            correctAnswer: string,\n            options: any,\n        ): Predicate {\n            const correctFloat = parseFloat(correctAnswer);\n\n            return [\n                function (guess: Predicate, maxError: Predicate) {\n                    return Math.abs(guess - correctFloat) < maxError;\n                },\n                $.extend({}, options, {type: \"predicate\"}),\n            ];\n        },\n        createValidatorFunctional: function (\n            correctAnswer: string,\n            options: any,\n        ): (arg1: Guess) => Score {\n            return KhanAnswerTypes.predicate.createValidatorFunctional(\n                // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n                ...KhanAnswerTypes.number.convertToPredicate(\n                    correctAnswer,\n                    options,\n                ),\n            );\n        },\n    },\n\n    /*\n     * The expression answer type parses a given expression or equation\n     * and semantically compares it to the solution. In addition, instant\n     * feedback is provided by rendering the last answer that fully parsed.\n     *\n     * Parsing options:\n     * functions (e.g. data-functions=\"f g h\")\n     *     A space or comma separated list of single-letter variables that\n     *     should be interpreted as functions. Case sensitive. \"e\" and \"i\"\n     *     are reserved.\n     *\n     *     no functions specified: f(x+y) == fx + fy\n     *     with \"f\" as a function: f(x+y) != fx + fy\n     *\n     * Comparison options:\n     * same-form (e.g. data-same-form)\n     *     If present, the answer must match the solution's structure in\n     *     addition to evaluating the same. Commutativity and excess negation\n     *     are ignored, but all other changes will trigger a rejection. Useful\n     *     for requiring a particular form of an equation, or if the answer\n     *     must be factored.\n     *\n     *     example question:    Factor x^2 + x - 2\n     *     example solution:    (x-1)(x+2)\n     *     accepted answers:    (x-1)(x+2), (x+2)(x-1), ---(-x-2)(-1+x), etc.\n     *     rejected answers:    x^2+x-2, x*x+x-2, x(x+1)-2, (x-1)(x+2)^1, etc.\n     *     rejection message:   Your answer is not in the correct form\n     *\n     * simplify (e.g. data-simplify)\n     *     If present, the answer must be fully expanded and simplified. Use\n     *     carefully - simplification is hard and there may be bugs, or you\n     *     might not agree on the definition of \"simplified\" used. You will\n     *     get an error if the provided solution is not itself fully expanded\n     *     and simplified.\n     *\n     *     example question:    Simplify ((n*x^5)^5) / (n^(-2)*x^2)^-3\n     *     example solution:    x^31 / n\n     *     accepted answers:    x^31 / n, x^31 / n^1, x^31 * n^(-1), etc.\n     *     rejected answers:    (x^25 * n^5) / (x^(-6) * n^6), etc.\n     *     rejection message:   Your answer is not fully expanded and simplified\n     *\n     * Rendering options:\n     * times (e.g. data-times)\n     *     If present, explicit multiplication (such as between numbers) will\n     *     be rendered with a cross/x symbol (TeX: \\times) instead of the usual\n     *     center dot (TeX: \\cdot).\n     *\n     *     normal rendering:    2 * 3^x -> 2 \\cdot 3^{x}\n     *     but with \"times\":    2 * 3^x -> 2 \\times 3^{x}\n     */\n    expression: {\n        parseSolution: function (solutionString: string, options: any): any {\n            let solution = KAS.parse(solutionString, options);\n            if (!solution.parsed) {\n                throw new PerseusError(\n                    \"The provided solution (\" +\n                        solutionString +\n                        \") didn't parse.\",\n                    Errors.InvalidInput,\n                );\n            } else if (options.simplified && !solution.expr.isSimplified()) {\n                throw new PerseusError(\n                    \"The provided solution (\" +\n                        solutionString +\n                        \") isn't fully expanded and simplified.\",\n                    Errors.InvalidInput,\n                );\n            } else {\n                solution = solution.expr;\n            }\n            return solution;\n        },\n\n        createValidatorFunctional: function (\n            solution: any,\n            options: any,\n        ): (arg1: Guess) => Score {\n            return function (guess: Guess): Score {\n                const score = {\n                    empty: false,\n                    correct: false,\n                    message: null as string | null | undefined,\n                    guess: guess,\n                    // Setting `ungraded` to true indicates that if the\n                    // guess doesn't match any of the solutions, the guess\n                    // shouldn't be marked as incorrect; instead, `message`\n                    // should be shown to the user. This is different from\n                    // setting `empty` to true, since the behavior of `empty`\n                    // is that `message` only will be shown if the guess is\n                    // graded as empty for every solution.\n                    ungraded: false,\n                } as const;\n\n                // Don't bother parsing an empty input\n                if (!guess) {\n                    // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'empty' because it is a read-only property.\n                    score.empty = true;\n                    return score;\n                }\n\n                const answer = KAS.parse(guess, options);\n\n                // An unsuccessful parse doesn't count as wrong\n                if (!answer.parsed) {\n                    // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'empty' because it is a read-only property.\n                    score.empty = true;\n                    return score;\n                }\n\n                // Solution will need to be parsed again if we're creating\n                // this from a multiple question type\n                if (typeof solution === \"string\") {\n                    solution = KhanAnswerTypes.expression.parseSolution(\n                        solution,\n                        options,\n                    );\n                }\n\n                const result = KAS.compare(answer.expr, solution, options);\n\n                if (result.equal) {\n                    // Correct answer\n                    // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'correct' because it is a read-only property.\n                    score.correct = true;\n                } else if (\n                    result.wrongVariableNames ||\n                    result.wrongVariableCase\n                ) {\n                    // We don't want to give people an error for getting the\n                    // variable names or the variable case wrong.\n                    // TODO(aasmund): This should ideally have been handled\n                    // under the `result.message` condition, but the\n                    // KAS messages currently aren't translatable.\n                    // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'ungraded' because it is a read-only property.\n                    score.ungraded = true;\n                    // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'message' because it is a read-only property.\n                    score.message = result.wrongVariableCase\n                        ? errors.WRONG_CASE_ERROR\n                        : errors.WRONG_LETTER_ERROR;\n                    // Don't tell the use they're \"almost there\" in this case, that may not be true and isn't helpful.\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'suppressAlmostThere' does not exist on type '{ readonly empty: false; readonly correct: false; readonly message: string | null | undefined; readonly guess: any; readonly ungraded: false; }'.\n                    score.suppressAlmostThere = true;\n                } else if (result.message) {\n                    // Nearly correct answer\n                    // TODO(aasmund): This message also isn't translatable;\n                    // need to fix that in KAS\n                    // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'message' because it is a read-only property.\n                    score.message = result.message;\n                } else {\n                    // Replace x with * and see if it would have been correct\n                    // TODO(aasmund): I think this branch is effectively dead,\n                    // because the replacement will only work in situations\n                    // where the variables are wrong (except if the variable\n                    // is x, in which case the replacement won't work either),\n                    // which is handled by another branch. When we implement a\n                    // more sophisticated variable check, revive this or\n                    // remove it completely if it will never come into play.\n                    const answerX = KAS.parse(\n                        guess.replace(/[xX]/g, \"*\"),\n                        options,\n                    );\n                    if (answerX.parsed) {\n                        const resultX = KAS.compare(\n                            answerX.expr,\n                            solution,\n                            options,\n                        );\n                        if (resultX.equal) {\n                            // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'ungraded' because it is a read-only property.\n                            score.ungraded = true;\n                            // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'message' because it is a read-only property.\n                            score.message = errors.MULTIPLICATION_SIGN_ERROR;\n                        } else if (resultX.message) {\n                            // TODO(aasmund): I18nize `score.message`\n                            // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'message' because it is a read-only property.\n                            score.message =\n                                resultX.message +\n                                \" Also, I'm a computer. I only understand \" +\n                                \"multiplication if you use an \" +\n                                \"asterisk (*) as the multiplication \" +\n                                \"sign.\";\n                        }\n                    }\n                }\n                return score;\n            };\n        },\n    },\n} as const;\n\nexport default KhanAnswerTypes;\n","/* eslint-disable react/prop-types */\nimport * as KAS from \"@khanacademy/kas\";\nimport {KeypadInput, KeypadType} from \"@khanacademy/math-input\";\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport InlineIcon from \"../components/inline-icon\";\nimport MathInput from \"../components/math-input\";\nimport Tooltip, {\n    HorizontalDirection,\n    VerticalDirection,\n} from \"../components/tooltip\";\nimport {iconExclamationSign} from \"../icon-paths\";\nimport {Errors as PerseusErrors, Log} from \"../logging/log\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {ApiOptions, ClassNames as ApiClassNames} from \"../perseus-api\";\nimport KhanAnswerTypes from \"../util/answer-types\";\n\nimport type {\n    PerseusExpressionWidgetOptions,\n    PerseusExpressionAnswerForm,\n} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\ntype InputPath = ReadonlyArray<string>;\n\nconst ERROR_MESSAGE = i18n._(\"Sorry, I don't understand that!\");\n\nconst insertBraces = (value) => {\n    // HACK(alex): Make sure that all LaTeX super/subscripts are wrapped\n    // in curly braces to avoid the mismatch between KAS and LaTeX sup/sub\n    // parsing.\n    //\n    // What exactly is this mismatch? Due to its heritage of parsing plain\n    // text math from <OldExpression />, KAS parses \"x^12\" as x^(12).\n    // This is both generally what the user expects to happen, and is\n    // consistent with other computer algebra systems. It is NOT\n    // consistent with LaTeX however, where x^12 is equivalent to x^{1}2.\n    //\n    // Since the only LaTeX we parse comes from MathQuill, this wouldn't\n    // be a problem if MathQuill just always gave us the latter version\n    // (with explicit braces). However, instead it always gives the former.\n    // This behavior is baked in pretty deep; my naive attempts at changing\n    // it triggered all sorts of confusing errors. So instead we just make\n    // sure to add in any missing braces before grading MathQuill input.\n    //\n    // TODO(alex): Properly hack MathQuill to always use explicit braces.\n    return value.replace(/([_^])([^{])/g, \"$1{$2}\");\n};\n\ntype Rubric = PerseusExpressionWidgetOptions;\n\ntype ExternalProps = WidgetProps<RenderProps, Rubric>;\n\nexport type Props = ExternalProps & {\n    apiOptions: NonNullable<ExternalProps[\"apiOptions\"]>;\n    buttonSets: NonNullable<ExternalProps[\"buttonSets\"]>;\n    functions: NonNullable<ExternalProps[\"functions\"]>;\n    linterContext: NonNullable<ExternalProps[\"linterContext\"]>;\n    onBlur: NonNullable<ExternalProps[\"onBlur\"]>;\n    onFocus: NonNullable<ExternalProps[\"onFocus\"]>;\n    times: NonNullable<ExternalProps[\"times\"]>;\n    value: string;\n};\n\nexport type ExpressionState = {\n    showErrorTooltip: boolean;\n    showErrorText: boolean;\n};\n\ntype DefaultProps = {\n    apiOptions: Props[\"apiOptions\"];\n    buttonSets: Props[\"buttonSets\"];\n    functions: Props[\"functions\"];\n    linterContext: Props[\"linterContext\"];\n    onBlur: Props[\"onBlur\"];\n    onFocus: Props[\"onFocus\"];\n    times: Props[\"times\"];\n    value: Props[\"value\"];\n};\n\ntype OnInputErrorFunctionType = (\n    arg1?: any,\n    arg2?: any,\n    arg3?: any,\n) => boolean | null | undefined;\n\n// The new, MathQuill input expression widget\nexport class Expression extends React.Component<Props, ExpressionState> {\n    _isMounted = false;\n    errorTimeout: null | number = null;\n\n    //#region Previously a class extension\n    /* Content creators input a list of answers which are matched from top to\n     * bottom. The intent is that they can include spcific solutions which should\n     * be graded as correct or incorrect (or ungraded!) first, then get more\n     * general.\n     *\n     * We iterate through each answer, trying to match it with the user's input\n     * using the following angorithm:\n     * - Try to parse the user's input. If it doesn't parse then return \"not\n     *   graded\".\n     * - For each answer:\n     *   ~ Try to validate the user's input against the answer. The answer is\n     *     expected to parse.\n     *   ~ If the user's input validates (the validator judges it \"correct\"), we've\n     *     matched and can stop considering answers.\n     * - If there were no matches or the matching answer is considered \"ungraded\",\n     *   show the user an error. TODO(joel) - what error?\n     * - Otherwise, pass through the resulting points and message.\n     */\n    static validate(\n        userInput: string,\n        rubric: Rubric,\n        // @ts-expect-error [FEI-5003] - TS2322 - Type '() => void' is not assignable to type 'OnInputErrorFunctionType'.\n        onInputError: OnInputErrorFunctionType = function () {},\n    ): PerseusScore {\n        const options = _.clone(rubric);\n        _.extend(options, {\n            decimal_separator: i18n.getDecimalSeparator(),\n        });\n\n        const createValidator = (answer: PerseusExpressionAnswerForm) => {\n            // We give options to KAS.parse here because it is parsing the\n            // solution answer, not the student answer, and we don't want a\n            // solution to work if the student is using a different language\n            // (different from the content creation language, ie. English).\n            const expression = KAS.parse(answer.value, rubric);\n            // An answer may not be parsed if the expression was defined\n            // incorrectly. For example if the answer is using a symbol defined\n            // in the function variables list for the expression.\n            if (!expression.parsed) {\n                /* c8 ignore next */\n                Log.error(\n                    \"Unable to parse solution answer for expression\",\n                    PerseusErrors.InvalidInput,\n                    {loggedMetadata: {rubric: JSON.stringify(rubric)}},\n                );\n                return null;\n            }\n            return KhanAnswerTypes.expression.createValidatorFunctional(\n                expression.expr,\n                _({}).extend(options, {\n                    simplify: answer.simplify,\n                    form: answer.form,\n                }),\n            );\n        };\n\n        // Find the first answer form that matches the user's input and that\n        // is considered correct. Also, track whether the input is\n        // considered \"empty\" for all answer forms, and keep the validation\n        // result for the first answer form for which the user's input was\n        // considered \"ungraded\".\n        // (Terminology reminder: the answer forms are provided by the\n        // assessment items; they are not the user's input. Each one might\n        // represent a correct answer, an incorrect one (if the exercise\n        // creator has predicted certain common wrong answers and wants to\n        // provide guidance via a message), or an ungraded one (same idea,\n        // but without giving the user an incorrect mark for the question).\n        let matchingAnswerForm;\n        let matchMessage;\n        let allEmpty = true;\n        let firstUngradedResult;\n        for (const answerForm of rubric.answerForms || []) {\n            const validate = createValidator(answerForm);\n            if (!validate) {\n                continue;\n            }\n\n            const result = validate(userInput);\n\n            // Short-circuit as soon as the user's input matches some answer\n            // (independently of whether the answer is correct)\n            if (result.correct) {\n                matchingAnswerForm = answerForm;\n                matchMessage = result.message || \"\";\n                break;\n            }\n\n            allEmpty = allEmpty && result.empty;\n            // If this answer form is correct and the user's input is considered\n            // \"ungraded\" for it, we'll want to keep the evaluation result for\n            // later. If the user's input doesn't match any answer forms, we'll\n            // show the message from this validation.\n            if (\n                answerForm.considered === \"correct\" &&\n                result.ungraded &&\n                !firstUngradedResult\n            ) {\n                firstUngradedResult = result;\n            }\n        }\n\n        // Now check to see if we matched any answer form at all, and if\n        // we did, whether it's considered correct, incorrect, or ungraded\n        if (!matchingAnswerForm) {\n            if (firstUngradedResult) {\n                // While we didn't directly match with any answer form, we\n                // did at some point get an \"ungraded\" validation result,\n                // which might indicate e.g. a mismatch in variable casing.\n                // We'll return \"invalid\", which will let the user try again\n                // with no penalty, and the hopefully helpful validation\n                // message.\n                return {\n                    type: \"invalid\",\n                    message: firstUngradedResult.message,\n                    suppressAlmostThere:\n                        firstUngradedResult.suppressAlmostThere,\n                };\n            }\n            if (allEmpty) {\n                // If everything graded as empty, it's invalid.\n                return {\n                    type: \"invalid\",\n                    message: null,\n                };\n            }\n            // We fell through all the possibilities and we're not empty,\n            // so the answer is considered incorrect.\n            return {\n                type: \"points\",\n                earned: 0,\n                total: 1,\n            };\n        }\n        if (matchingAnswerForm.considered === \"ungraded\") {\n            // We matched an ungraded answer form - return \"invalid\", which\n            // will let the user try again with no penalty\n            const apiResult = onInputError(\n                null, // Reserved for some widget identifier\n                userInput,\n                matchMessage,\n            );\n            return {\n                type: \"invalid\",\n                message: apiResult === false ? null : matchMessage,\n            };\n        }\n        // We matched a graded answer form, so we can now tell the user\n        // whether their input was correct or incorrect, and hand out\n        // points accordingly\n        // TODO(eater): Seems silly to translate result to this\n        // invalid/points thing and immediately translate it back in\n        // ItemRenderer.scoreInput()\n        return {\n            type: \"points\",\n            earned: matchingAnswerForm.considered === \"correct\" ? 1 : 0,\n            total: 1,\n            message: matchMessage,\n        };\n    }\n\n    static getUserInputFromProps(props: Props): string {\n        return insertBraces(props.value);\n    }\n\n    static getOneCorrectAnswerFromRubric(\n        rubric: Rubric,\n    ): string | null | undefined {\n        const correctAnswers = (rubric.answerForms || []).filter(\n            (answerForm) => answerForm.considered === \"correct\",\n        );\n        if (correctAnswers.length === 0) {\n            return;\n        }\n        return correctAnswers[0].value;\n    }\n    //#endregion\n\n    static defaultProps: DefaultProps = {\n        value: \"\",\n        times: false,\n        functions: [],\n        buttonSets: [\"basic\", \"trig\", \"prealgebra\", \"logarithms\"],\n        onFocus: () => {},\n        onBlur: () => {},\n        apiOptions: ApiOptions.defaults,\n        linterContext: linterContextDefault,\n    };\n\n    displayName = \"Expression\";\n\n    state: ExpressionState = {\n        showErrorTooltip: false,\n        showErrorText: false,\n    };\n\n    componentDidMount: () => void = () => {\n        // TODO(scottgrant): This is a hack to remove the deprecated call to\n        // this.isMounted() but is still considered an anti-pattern.\n        this._isMounted = true;\n    };\n\n    // Whenever the input value changes, attempt to parse it.\n    //\n    // Clear any errors if this parse succeeds, show an error within a second\n    // if it fails.\n    componentDidUpdate: (prevProps: Props) => void = (prevProps) => {\n        if (\n            !_.isEqual(this.props.value, prevProps.value) ||\n            !_.isEqual(this.props.functions, prevProps.functions)\n        ) {\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // eslint-disable-next-line no-restricted-syntax\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            clearTimeout(this.errorTimeout);\n\n            if (this.parse(this.props.value, this.props).parsed) {\n                // eslint-disable-next-line react/no-did-update-set-state\n                this.setState({showErrorTooltip: false});\n            } else {\n                // Store timeout ID so that we can clear it above\n                // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n                // eslint-disable-next-line no-restricted-syntax\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'Timeout' is not assignable to type 'number'.\n                this.errorTimeout = setTimeout(() => {\n                    const apiResult = this.props.apiOptions.onInputError(\n                        null, // reserved for some widget identifier\n                        this.props.value,\n                        ERROR_MESSAGE,\n                    );\n                    if (apiResult !== false) {\n                        this.setState({showErrorTooltip: true});\n                    }\n                }, 2000);\n            }\n        }\n    };\n\n    componentWillUnmount: () => void = () => {\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        clearTimeout(this.errorTimeout);\n\n        this._isMounted = false;\n    };\n\n    simpleValidate: (\n        rubric: Rubric,\n        onInputError: OnInputErrorFunctionType,\n    ) => PerseusScore = (rubric, onInputError) => {\n        onInputError = onInputError || function () {};\n        return Expression.validate(this.getUserInput(), rubric, onInputError);\n    };\n\n    getUserInput: () => string = () => {\n        return Expression.getUserInputFromProps(this.props);\n    };\n\n    change: (...args: any) => any | undefined = (...args: any) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    parse: (value: string, props: Props) => any = (\n        value: string,\n        props: Props,\n    ) => {\n        // TODO(jack): Disable icu for content creators here, or\n        // make it so that solution answers with ','s or '.'s work\n        const options = _.pick(props || this.props, \"functions\");\n        _.extend(options, {\n            decimal_separator: i18n.getDecimalSeparator(),\n        });\n        return KAS.parse(insertBraces(value), options);\n    };\n\n    changeAndTrack: (e: any, cb: () => void) => void = (\n        e: any,\n        cb: () => void,\n    ) => {\n        this.change(\"value\", e, cb);\n        this.props.trackInteraction();\n    };\n\n    _handleFocus: () => void = () => {\n        /* c8 ignore next */\n        this.props.onFocus([]);\n    };\n\n    _handleBlur: () => void = () => {\n        /* c8 ignore next */\n        this.props.onBlur([]);\n    };\n\n    focus: () => boolean = () => {\n        if (this.props.apiOptions.customKeypad) {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n            this.refs.input.focus();\n        } else {\n            // The buttons are often on top of text you're trying to read, so\n            // don't focus the editor automatically.\n        }\n\n        return true;\n    };\n\n    focusInputPath: (inputPath: InputPath) => void = (inputPath: InputPath) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        this.refs.input.focus();\n    };\n\n    blurInputPath: (inputPath: InputPath) => void = (inputPath: InputPath) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n        this.refs.input.blur();\n    };\n\n    // HACK(joel)\n    insert: (text: string) => void = (text: string) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'insert' does not exist on type 'ReactInstance'.\n        this.refs.input.insert(text);\n    };\n\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<any>> = () => {\n        // The widget itself is an input, so we return a single empty list to\n        // indicate this.\n        /* c8 ignore next */\n        return [[]];\n    };\n\n    // TODO(Nicole): I believe this is going away and won't be needed anymore\n    getGrammarTypeForPath: (inputPath: string) => string = (\n        inputPath: string,\n    ) => {\n        /* c8 ignore next */\n        return \"expression\";\n    };\n\n    setInputValue: (path: string, newValue: string, cb: () => void) => void = (\n        path: string,\n        newValue: string,\n        cb: () => void,\n    ) => {\n        this.props.onChange(\n            {\n                value: newValue,\n            },\n            cb,\n        );\n    };\n\n    render():\n        | React.ReactNode\n        | React.ReactElement<React.ComponentProps<\"div\">> {\n        if (this.props.apiOptions.customKeypad) {\n            return (\n                <KeypadInput\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"input\"\n                    value={this.props.value}\n                    keypadElement={this.props.keypadElement}\n                    onChange={this.changeAndTrack}\n                    onFocus={() => {\n                        // this.props.keypadElement should always be set\n                        // when apiOptions.customKeypad is set, but how\n                        // to convince TypeScript of this?\n                        this.props.keypadElement?.configure(\n                            this.props.keypadConfiguration,\n                            () => {\n                                if (this._isMounted) {\n                                    this._handleFocus();\n                                }\n                            },\n                        );\n                    }}\n                    onBlur={this._handleBlur}\n                />\n            );\n        }\n        // TODO(alex): Style this tooltip to be more consistent with other\n        // tooltips on the site; align to left middle (once possible)\n        const errorTooltip = (\n            <span className=\"error-tooltip\" role=\"tooltip\">\n                <Tooltip\n                    className=\"error-text-container\"\n                    horizontalPosition={HorizontalDirection.Right}\n                    horizontalAlign={HorizontalDirection.Left}\n                    verticalPosition={VerticalDirection.Top}\n                    arrowSize={10}\n                    borderColor=\"#fcc335\"\n                    show={this.state.showErrorText}\n                >\n                    <span\n                        className=\"error-icon\"\n                        data-test-id=\"test-error-icon\"\n                        onMouseEnter={() => {\n                            this.setState({showErrorText: true});\n                        }}\n                        onMouseLeave={() => {\n                            this.setState({showErrorText: false});\n                        }}\n                        onClick={() => {\n                            // TODO(alex): Better error feedback for mobile\n                            this.setState({\n                                showErrorText: !this.state.showErrorText,\n                            });\n                        }}\n                    >\n                        <InlineIcon {...iconExclamationSign} />\n                    </span>\n                    <div className=\"error-text\">{ERROR_MESSAGE}</div>\n                </Tooltip>\n            </span>\n        );\n\n        const className = classNames({\n            \"perseus-widget-expression\": true,\n            \"show-error-tooltip\": this.state.showErrorTooltip,\n        });\n\n        return (\n            <div className={className}>\n                <MathInput\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"input\"\n                    className={ApiClassNames.INTERACTIVE}\n                    value={this.props.value}\n                    onChange={this.changeAndTrack}\n                    convertDotToTimes={this.props.times}\n                    buttonsVisible={this.props.buttonsVisible || \"focused\"}\n                    buttonSets={this.props.buttonSets}\n                    onFocus={this._handleFocus}\n                    onBlur={this._handleBlur}\n                />\n                {this.state.showErrorTooltip && errorTooltip}\n            </div>\n        );\n    }\n}\n\n/**\n * Determine the keypad configuration parameters for the input, based on the\n * provided properties.\n *\n * There are two configuration parameters to be passed to the keypad:\n *   (1) The keypad type. For the Expression widget, we always use the\n *       Expression keypad.\n *   (2) The extra keys; namely, any variables or constants (like Pi) that need\n *       to be included as keys on the keypad. These are scraped from the answer\n *       forms.\n */\nconst keypadConfigurationForProps = (\n    widgetOptions: PerseusExpressionWidgetOptions,\n) => {\n    // Always use the Expression keypad, regardless of the button sets that have\n    // been enabled.\n    const keypadType = KeypadType.EXPRESSION;\n\n    // Extract any and all variables and constants from the answer forms.\n    const uniqueExtraVariables: Record<string, any> = {};\n    const uniqueExtraConstants: Record<string, any> = {};\n    for (const answerForm of widgetOptions.answerForms) {\n        const maybeExpr = KAS.parse(answerForm.value, widgetOptions);\n        if (maybeExpr.parsed) {\n            const expr = maybeExpr.expr;\n\n            // The keypad expects Greek letters to be capitalized (e.g., it\n            // requires `PI` instead of `pi`). Right now, it only supports Pi\n            // and Theta, so we special-case.\n            const isGreek = (symbol: any) =>\n                symbol === \"pi\" || symbol === \"theta\";\n            const toKey = (symbol: any) =>\n                isGreek(symbol) ? symbol.toUpperCase() : symbol;\n\n            for (const variable of expr.getVars()) {\n                uniqueExtraVariables[toKey(variable)] = true;\n            }\n            for (const constant of expr.getConsts()) {\n                uniqueExtraConstants[toKey(constant)] = true;\n            }\n        }\n    }\n\n    // TODO(charlie): Alert the keypad as to which of these symbols should be\n    // treated as functions.\n    const extraVariables = Object.keys(uniqueExtraVariables);\n    extraVariables.sort();\n\n    const extraConstants = Object.keys(uniqueExtraConstants);\n    extraConstants.sort();\n\n    const extraKeys = [...extraVariables, ...extraConstants];\n    if (!extraKeys.length) {\n        // If there are no extra symbols available, we include Pi anyway, so\n        // that the \"extra symbols\" button doesn't appear empty.\n        extraKeys.push(\"PI\");\n    }\n\n    return {keypadType, extraKeys};\n};\n\nconst propUpgrades = {\n    /* c8 ignore next */\n    \"1\": (v0props: any): PerseusExpressionWidgetOptions => ({\n        times: v0props.times,\n        buttonSets: v0props.buttonSets,\n        functions: v0props.functions,\n        buttonsVisible: v0props.buttonsVisible,\n\n        answerForms: [\n            {\n                considered: \"correct\",\n                form: v0props.form,\n                simplify: v0props.simplify,\n                value: v0props.value,\n            },\n        ],\n    }),\n} as const;\n\ntype RenderProps = {\n    buttonSets: any;\n    buttonsVisible?: \"always\" | \"focused\" | \"never\";\n    functions: ReadonlyArray<string>;\n    keypadConfiguration: {\n        extraKeys: ReadonlyArray<any | string>;\n        keypadType: any;\n    };\n    times: boolean;\n};\n\nexport default {\n    name: \"expression\",\n    displayName: \"Expression / Equation\",\n    defaultAlignment: \"inline-block\",\n    widget: Expression,\n    transform: (widgetOptions: PerseusExpressionWidgetOptions): RenderProps => {\n        const {times, functions, buttonSets, buttonsVisible} = widgetOptions;\n        return {\n            keypadConfiguration: keypadConfigurationForProps(widgetOptions),\n            times,\n            functions,\n            buttonSets,\n            buttonsVisible,\n        };\n    },\n    version: {major: 1, minor: 0},\n    propUpgrades: propUpgrades,\n\n    // For use by the editor\n    isLintable: true,\n} as WidgetExports<typeof Expression>;\n","/**\n * A React context for keeping track of whether an component is fully\n * loaded.  This is used to know when SvgImage and (Zoomable)TeX are finished\n * renderering.\n */\n\nimport * as React from \"react\";\n\ntype Context = {\n    // A dictionary of asset statues.  See server-item-renderer.jsx for\n    // an example of its definition.\n    assetStatuses: {\n        [assetKey: string]: boolean;\n    };\n    // setAssetStatus(key, false) must be called in the constructor of\n    // any component which isn't fully rendered on initial render.  This\n    // adds the asset key to asssetStatuses, see server-item-renderer.jsx.\n    // setAssetStatus(key, true) must be called when the component has\n    // fully rendered itself.  See svg-image.jsx and tex.jsx.\n    setAssetStatus: (assetKey: string, loaded: boolean) => void;\n};\n\nconst defaultContext: Context = {\n    assetStatuses: {},\n    setAssetStatus: (assetKey: string, loaded: boolean) => {},\n};\n\nconst context: React.Context<Context> = React.createContext(defaultContext);\n\nexport default context;\n","/* eslint-disable @babel/no-invalid-this, getter-return, one-var */\nimport _ from \"underscore\";\n\nimport {Errors} from \"./logging/log\";\nimport {PerseusError} from \"./perseus-error\";\nimport KhanAnswerTypes from \"./util/answer-types\";\n\nimport type {Range} from \"./perseus-types\";\nimport type {Widget, PerseusScore, KEScore} from \"./types\";\n\ntype WordPosition = {\n    start: number;\n    end: number;\n};\n\ntype WordAndPosition = {\n    string: string;\n    pos: WordPosition;\n};\n\ntype RNG = () => number;\n\nexport type ParsedValue = {\n    value: number;\n    exact: boolean;\n};\n\n// TODO: dedupe this with Coord in interactive2/types.js\ntype Coordinates = [number, number];\n\nexport type GridDimensions = {\n    scale: number;\n    tickStep: number;\n    unityLabel: boolean;\n};\n\ntype QueryParams = {\n    [param: string]: string;\n};\n\nexport type Position = {\n    top: number;\n    left: number;\n};\n\ntype TouchHandlers = {\n    pointerDown: boolean;\n    currentTouchIdentifier: string | null | undefined;\n};\n\nlet supportsPassive = false;\n\nconst svgLabelsRegex = /^web\\+graphie:/;\n// For offline exercises in the mobile app, we download the graphie data\n// (svgs and localized data files) and serve them from the local file\n// system (with file://). We replace urls that start with `web+graphie`\n// in the perseus json with this `file+graphie` prefix to indicate that\n// they should have the `file://` protocol instead of `https://`.\nconst svgLocalLabelsRegex = /^file\\+graphie:/;\n\nconst nestedMap = function <T, M>(\n    children: T | ReadonlyArray<T>,\n    func: (arg1: T) => M,\n    context: unknown,\n): M | ReadonlyArray<M> {\n    if (Array.isArray(children)) {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type '(M | readonly M[])[]' is not assignable to type 'M | readonly M[]'.\n        return _.map(children, function (child) {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 3 arguments, but got 2.\n            return nestedMap(child, func);\n        });\n    }\n    return func.call(context, children);\n};\n\n/**\n * Used to compare equality of two input paths, which are represented as\n * arrays of strings.\n */\nfunction inputPathsEqual(\n    a?: ReadonlyArray<string> | null,\n    b?: ReadonlyArray<string> | null,\n): boolean {\n    if (a == null || b == null) {\n        return (a == null) === (b == null);\n    }\n\n    return (\n        a.length === b.length &&\n        a.every((item, index) => {\n            return b[index] === item;\n        })\n    );\n}\n\nconst rWidgetRule = /^\\[\\[\\u2603 (([a-z-]+) ([0-9]+))\\]\\]/;\nconst rTypeFromWidgetId = /^([a-z-]+) ([0-9]+)$/;\n\nconst rWidgetParts = new RegExp(rWidgetRule.source + \"$\");\nconst snowman = \"\\u2603\";\nconst noScore: PerseusScore = {\n    type: \"points\",\n    earned: 0,\n    total: 0,\n    message: null,\n};\n\nconst seededRNG: (seed: number) => RNG = function (seed: number): RNG {\n    let randomSeed = seed;\n\n    return function () {\n        // Robert Jenkins' 32 bit integer hash function.\n        let seed = randomSeed;\n        seed = (seed + 0x7ed55d16 + (seed << 12)) & 0xffffffff;\n        seed = (seed ^ 0xc761c23c ^ (seed >>> 19)) & 0xffffffff;\n        seed = (seed + 0x165667b1 + (seed << 5)) & 0xffffffff;\n        seed = ((seed + 0xd3a2646c) ^ (seed << 9)) & 0xffffffff;\n        seed = (seed + 0xfd7046c5 + (seed << 3)) & 0xffffffff;\n        seed = (seed ^ 0xb55a4f09 ^ (seed >>> 16)) & 0xffffffff;\n        return (randomSeed = seed & 0xfffffff) / 0x10000000;\n    };\n};\n\n// Shuffle an array using a given random seed or function.\n// If `ensurePermuted` is true, the input and ouput are guaranteed to be\n// distinct permutations.\nfunction shuffle<T>(\n    array: ReadonlyArray<T>,\n    randomSeed: number | RNG,\n    ensurePermuted = false,\n): ReadonlyArray<T> {\n    // Always return a copy of the input array\n    const shuffled = _.clone(array);\n\n    // Handle edge cases (input array is empty or uniform)\n    if (\n        !shuffled.length ||\n        _.all(shuffled, function (value) {\n            return _.isEqual(value, shuffled[0]);\n        })\n    ) {\n        return shuffled;\n    }\n\n    let random;\n    if (typeof randomSeed === \"function\") {\n        random = randomSeed;\n    } else {\n        random = seededRNG(randomSeed);\n    }\n\n    do {\n        // Fischer-Yates shuffle\n        for (let top = shuffled.length; top > 0; top--) {\n            const newEnd = Math.floor(random() * top),\n                temp = shuffled[newEnd];\n\n            // @ts-expect-error [FEI-5003] - TS2542 - Index signature in type 'readonly T[]' only permits reading.\n            shuffled[newEnd] = shuffled[top - 1];\n            // @ts-expect-error [FEI-5003] - TS2542 - Index signature in type 'readonly T[]' only permits reading.\n            shuffled[top - 1] = temp;\n        }\n    } while (ensurePermuted && _.isEqual(array, shuffled));\n\n    return shuffled;\n}\n\n/**\n * TODO(somewhatabstract, FEI-3463):\n * Drop this custom split thing.\n */\n// In IE8, split doesn't work right. Implement it ourselves.\nconst split: (str: string, r: RegExp) => ReadonlyArray<string> = \"x\".split(\n    /(.)/g,\n).length\n    ? function (str: string, r) {\n          return str.split(r);\n      }\n    : function (str: string, r: RegExp) {\n          // Based on Steven Levithan's MIT-licensed split, available at\n          // http://blog.stevenlevithan.com/archives/cross-browser-split\n          const output = [];\n          let lastIndex = (r.lastIndex = 0);\n          let match;\n\n          while ((match = r.exec(str))) {\n              const m = match;\n              // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string' is not assignable to parameter of type 'never'.\n              output.push(str.slice(lastIndex, m.index));\n              // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n              output.push(...m.slice(1));\n              lastIndex = m.index + m[0].length;\n          }\n\n          // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string' is not assignable to parameter of type 'never'.\n          output.push(str.slice(lastIndex));\n          return output;\n      };\n\n/**\n * Combine two score objects.\n *\n * Given two score objects for two different widgets, combine them so that\n * if one is wrong, the total score is wrong, etc.\n */\nfunction combineScores(\n    scoreA: PerseusScore,\n    scoreB: PerseusScore,\n): PerseusScore {\n    let message;\n\n    if (scoreA.type === \"points\" && scoreB.type === \"points\") {\n        if (\n            scoreA.message &&\n            scoreB.message &&\n            scoreA.message !== scoreB.message\n        ) {\n            // TODO(alpert): Figure out how to combine messages usefully\n            message = null;\n        } else {\n            message = scoreA.message || scoreB.message;\n        }\n\n        return {\n            type: \"points\",\n            earned: scoreA.earned + scoreB.earned,\n            total: scoreA.total + scoreB.total,\n            message: message,\n        };\n    }\n    if (scoreA.type === \"points\" && scoreB.type === \"invalid\") {\n        return scoreB;\n    }\n    if (scoreA.type === \"invalid\" && scoreB.type === \"points\") {\n        return scoreA;\n    }\n    if (scoreA.type === \"invalid\" && scoreB.type === \"invalid\") {\n        if (\n            scoreA.message &&\n            scoreB.message &&\n            scoreA.message !== scoreB.message\n        ) {\n            // TODO(alpert): Figure out how to combine messages usefully\n            message = null;\n        } else {\n            message = scoreA.message || scoreB.message;\n        }\n\n        return {\n            type: \"invalid\",\n            message: message,\n        };\n    }\n\n    /**\n     * The above checks cover all combinations of score type, so if we get here\n     * then something is amiss with our inputs.\n     */\n    throw new PerseusError(\n        \"PerseusScore with unknown type encountered\",\n        Errors.InvalidInput,\n        {\n            metadata: {\n                scoreA: JSON.stringify(scoreA),\n                scoreB: JSON.stringify(scoreB),\n            },\n        },\n    );\n}\n\nfunction keScoreFromPerseusScore(\n    score: PerseusScore,\n    guess: any,\n    state: any,\n): KEScore {\n    if (score.type === \"points\") {\n        return {\n            empty: false,\n            correct: score.earned >= score.total,\n            message: score.message,\n            guess: guess,\n            state: state,\n        };\n    }\n    if (score.type === \"invalid\") {\n        return {\n            empty: true,\n            correct: false,\n            message: score.message,\n            suppressAlmostThere: score.suppressAlmostThere,\n            guess: guess,\n            state: state,\n        };\n    }\n    throw new PerseusError(\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'type' does not exist on type 'never'.\n        \"Invalid score type: \" + score.type,\n        Errors.InvalidInput,\n        {\n            metadata: {\n                score: JSON.stringify(score),\n                guess: JSON.stringify(guess),\n                state: JSON.stringify(state),\n            },\n        },\n    );\n}\n\n/**\n * Return the first valid interpretation of 'text' as a number, in the form\n * {value: 2.3, exact: true}.\n */\nfunction firstNumericalParse(text: string): ParsedValue | null | undefined {\n    // TODO(alpert): This is sort of hacky...\n    let first;\n    const val = KhanAnswerTypes.predicate.createValidatorFunctional(\n        function (ans) {\n            first = ans;\n            return true; /* break */\n        },\n        {\n            simplify: \"optional\",\n            inexact: true,\n            forms: \"integer, proper, improper, pi, log, mixed, decimal\",\n        },\n    );\n\n    val(text);\n    return first;\n}\n\nfunction stringArrayOfSize(size: number): ReadonlyArray<string> {\n    return _(size).times(function () {\n        return \"\";\n    });\n}\n\n/**\n * For a graph's x or y dimension, given the tick step,\n * the ranges extent (e.g. [-10, 10]), the pixel dimension constraint,\n * and the grid step, return a bunch of configurations for that dimension.\n *\n * Example:\n *      gridDimensionConfig(10, [-50, 50], 400, 5)\n *\n * Returns: {\n *      scale: 4,\n *      snap: 2.5,\n *      tickStep: 2,\n *      unityLabel: true\n * };\n */\nfunction gridDimensionConfig(\n    absTickStep: number,\n    extent: Coordinates,\n    dimensionConstraint: number,\n    gridStep: number,\n): GridDimensions {\n    const scale = scaleFromExtent(extent, dimensionConstraint);\n    const stepPx = absTickStep * scale;\n    const unityLabel = stepPx > 30;\n    return {\n        scale: scale,\n        tickStep: absTickStep / gridStep,\n        unityLabel: unityLabel,\n    };\n}\n/**\n * Given the range, step, and boxSize, calculate the reasonable gridStep.\n * Used for when one was not given explicitly.\n *\n * Example:\n *      getGridStep([[-10, 10], [-10, 10]], [1, 1], 340)\n *\n * Returns: [1, 1]\n *\n * TODO(somewhatabstract, FEI-3464): Consolidate query string parsing functions.\n */\nfunction getGridStep(\n    range: [Coordinates, Coordinates],\n    step: Coordinates,\n    boxSize: number,\n): Coordinates {\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(number | null | undefined)[]' is not assignable to type 'Coordinates'.\n    return _(2).times(function (i) {\n        const scale = scaleFromExtent(range[i], boxSize);\n        const gridStep = gridStepFromTickStep(step[i], scale);\n        return gridStep;\n    });\n}\n\nfunction snapStepFromGridStep(gridStep: [number, number]): [number, number] {\n    return [gridStep[0] / 2, gridStep[1] / 2];\n}\n\n/**\n * Given the tickStep and the graph's scale, find a\n * grid step.\n * Example:\n *      gridStepFromTickStep(200, 0.2) // returns 100\n */\nfunction gridStepFromTickStep(\n    tickStep: number,\n    scale: number,\n): number | null | undefined {\n    const tickWidth = tickStep * scale;\n    const x = tickStep;\n    const y = Math.pow(10, Math.floor(Math.log(x) / Math.LN10));\n    const leadingDigit = Math.floor(x / y);\n    if (tickWidth < 25) {\n        return tickStep;\n    }\n    if (tickWidth < 50) {\n        if (leadingDigit === 5) {\n            return tickStep;\n        }\n        return tickStep / 2;\n    }\n    if (leadingDigit === 1) {\n        return tickStep / 2;\n    }\n    if (leadingDigit === 2) {\n        return tickStep / 4;\n    }\n    if (leadingDigit === 5) {\n        return tickStep / 5;\n    }\n}\n\n/**\n * Given the range and a dimension, come up with the appropriate\n * scale.\n * Example:\n *      scaleFromExtent([-25, 25], 500) // returns 10\n */\nfunction scaleFromExtent(\n    extent: Coordinates,\n    dimensionConstraint: number,\n): number {\n    const span = extent[1] - extent[0];\n    const scale = dimensionConstraint / span;\n    return scale;\n}\n\n/**\n * Return a reasonable tick step given extent and dimension.\n * (extent is [begin, end] of the domain.)\n * Example:\n *      tickStepFromExtent([-10, 10], 300) // returns 2\n */\nfunction tickStepFromExtent(\n    extent: Coordinates,\n    dimensionConstraint: number,\n): number {\n    const span = extent[1] - extent[0];\n\n    let tickFactor;\n    // If single number digits\n    if (15 < span && span <= 20) {\n        tickFactor = 23;\n\n        // triple digit or decimal\n    } else if (span > 100 || span < 5) {\n        tickFactor = 10;\n\n        // double digit\n    } else {\n        tickFactor = 16;\n    }\n    const constraintFactor = dimensionConstraint / 500;\n    const desiredNumTicks = tickFactor * constraintFactor;\n    return tickStepFromNumTicks(span, desiredNumTicks);\n}\n\n/**\n * Find a good tick step for the desired number of ticks in the range\n * Modified from d3.scale.linear: d3_scale_linearTickRange.\n * Thanks, mbostock!\n * Example:\n *      tickStepFromNumTicks(50, 6) // returns 10\n */\nfunction tickStepFromNumTicks(span: number, numTicks: number): number {\n    let step = Math.pow(10, Math.floor(Math.log(span / numTicks) / Math.LN10));\n    const err = (numTicks / span) * step;\n\n    // Filter ticks to get closer to the desired count.\n    if (err <= 0.15) {\n        step *= 10;\n    } else if (err <= 0.35) {\n        step *= 5;\n    } else if (err <= 0.75) {\n        step *= 2;\n    }\n\n    // Round start and stop values to step interval.\n    return step;\n}\n\nconst constrainTickStep = (step: number, range: Range): number => {\n    const span = range[1] - range[0];\n    const numTicks = span / step;\n    if (numTicks <= 10) {\n        // Will displays fine on mobile\n        return step;\n    }\n    if (numTicks <= 20) {\n        // Will be crowded on mobile, so hide every other tick\n        return step * 2;\n    }\n    // Fallback in case we somehow have more than 20 ticks\n    // Note: This shouldn't happen due to GraphSettings.validStep\n    return tickStepFromNumTicks(span, 10);\n};\n\n/**\n * Constrain tick steps intended for desktop size graphs\n * to something more suitable for mobile size graphs.\n * Specifically, we aim for 10 or fewer ticks per graph axis.\n */\nfunction constrainedTickStepsFromTickSteps(\n    tickSteps: [number, number],\n    ranges: [Range, Range],\n): Coordinates {\n    return [\n        constrainTickStep(tickSteps[0], ranges[0]),\n        constrainTickStep(tickSteps[1], ranges[1]),\n    ];\n}\n\n/**\n * Transparently update deprecated props so that the code to deal\n * with them only lives in one place: (Widget).deprecatedProps\n *\n * For example, if a boolean `foo` was deprecated in favor of a\n * number 'bar':\n *      deprecatedProps: {\n *          foo: function(props) {\n *              return {bar: props.foo ? 1 : 0};\n *          }\n *      }\n */\nconst DeprecationMixin: any = {\n    // This lifecycle stage is only called before first render\n    // TODO(jangmi, CP-3288): Remove usage of `UNSAFE_componentWillMount`\n    UNSAFE_componentWillMount: function () {\n        const newProps: Record<string, any> = {};\n\n        _.each(\n            this.deprecatedProps,\n            function (func, prop) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                if (_.has(this.props, prop)) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    _.extend(newProps, func(this.props));\n                }\n            },\n            this,\n        );\n\n        if (!_.isEmpty(newProps)) {\n            // Set new props directly so that widget renders correctly\n            // when it first mounts, even though these will be overwritten\n            // almost immediately afterwards...\n            _.extend(this.props, newProps);\n\n            // ...when we propagate the new props upwards and they come\n            // back down again.\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(this.props.onChange, 0, newProps);\n        }\n    },\n};\n\n/**\n * Approximate equality on numbers and primitives.\n */\nfunction eq<T>(x: T, y: T): boolean {\n    if (typeof x === \"number\" && typeof y === \"number\") {\n        return Math.abs(x - y) < 1e-9;\n    }\n    return x === y;\n}\n\n/**\n * Deep approximate equality on primitives, numbers, arrays, and objects.\n * Recursive.\n */\nfunction deepEq<T>(x: T, y: T): boolean {\n    if (Array.isArray(x) && Array.isArray(y)) {\n        if (x.length !== y.length) {\n            return false;\n        }\n        for (let i = 0; i < x.length; i++) {\n            if (!deepEq(x[i], y[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    if (Array.isArray(x) || Array.isArray(y)) {\n        return false;\n    }\n    if (typeof x === \"function\" && typeof y === \"function\") {\n        return eq(x, y);\n    }\n    if (typeof x === \"function\" || typeof y === \"function\") {\n        return false;\n    }\n    if (typeof x === \"object\" && typeof y === \"object\" && !!x && !!y) {\n        return (\n            x === y ||\n            (_.all(x, function (v, k) {\n                // @ts-expect-error [FEI-5003] - TS2536 - Type 'CollectionKey<T>' cannot be used to index type 'T'.\n                return deepEq(y[k], v);\n            }) &&\n                _.all(y, function (v, k) {\n                    // @ts-expect-error [FEI-5003] - TS2536 - Type 'CollectionKey<T>' cannot be used to index type 'T'.\n                    return deepEq(x[k], v);\n                }))\n        );\n    }\n    if ((typeof x === \"object\" && !!x) || (typeof y === \"object\" && !!y)) {\n        return false;\n    }\n    return eq(x, y);\n}\n\n/**\n * Query String Parser\n *\n * Original from:\n * http://stackoverflow.com/questions/901115/get-querystring-values-in-javascript/2880929#2880929\n */\nfunction parseQueryString(query: string): QueryParams {\n    // TODO(jangmi, CP-3340): Use withLocation to access SSR safe location.\n    // eslint-disable-next-line no-restricted-syntax\n    query = query || window.location.search.substring(1);\n    const urlParams: Record<string, any> = {};\n    // Regex for replacing addition symbol with a space\n    const a = /\\+/g;\n    const r = /([^&=]+)=?([^&]*)/g;\n    const d = function (s) {\n        return decodeURIComponent(s.replace(a, \" \"));\n    };\n\n    let e;\n    while ((e = r.exec(query))) {\n        const m = e;\n        urlParams[d(m[1])] = d(m[2]);\n    }\n\n    return urlParams;\n}\n\n/**\n * Query string adder\n * Works for URLs without #.\n * Original from:\n * http://stackoverflow.com/questions/5999118/add-or-update-query-string-parameter\n */\nfunction updateQueryString(uri: string, key: string, value: string): string {\n    value = encodeURIComponent(value);\n    const re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\n    const separator = uri.indexOf(\"?\") !== -1 ? \"&\" : \"?\";\n    if (uri.match(re)) {\n        return uri.replace(re, \"$1\" + key + \"=\" + value + \"$2\");\n    }\n    return uri + separator + key + \"=\" + value;\n}\n\n/**\n * A more strict encodeURIComponent that escapes `()'!`s\n * Especially useful for creating URLs that are embeddable in markdown\n *\n * Adapted from\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\n * This function and the above original available under the\n * CC-BY-SA 2.5 license.\n */\nfunction strongEncodeURIComponent(str: string): string {\n    return (\n        encodeURIComponent(str)\n            // Note that although RFC3986 reserves \"!\", RFC5987 does not,\n            // so we do not need to escape it\n            .replace(/['()!]/g, window.escape) // i.e., %27 %28 %29\n            .replace(/\\*/g, \"%2A\")\n    );\n}\n\n/**\n * TODO(somewhatabstract, JIRA-XXXX):\n * This does not appear to be used within webapp. Could be dead code.\n * Need to check with mobile.\n */\n// There are certain widgets where we don't want to provide the \"answered\"\n// highlight indicator.\n// The issue with just using the `graded` flag on questions is that showing\n// that a certain widget is ungraded can sometimes reveal the answer to a\n// question (\"is this transformation possible? if so, do it\")\n// This is kind of a hack to get around this.\nfunction widgetShouldHighlight(widget: Widget): boolean {\n    if (!widget) {\n        return false;\n    }\n    switch (widget.type) {\n        /**\n         * Highlight bar denylist\n         */\n        case \"measurer\":\n        case \"protractor\":\n            return true;\n\n        default:\n            return false;\n    }\n}\n\n/**\n * If a widget says that it is empty once it is graded.\n * Trying to encapsulate references to the score format.\n */\nfunction scoreIsEmpty(score: PerseusScore): boolean {\n    // HACK(benkomalo): ugh. this isn't great; the Perseus score objects\n    // overload the type \"invalid\" for what should probably be three\n    // distinct cases:\n    //  - truly empty or not fully filled out\n    //  - invalid or malformed inputs\n    //  - \"almost correct\" like inputs where the widget wants to give\n    //  feedback (e.g. a fraction needs to be reduced, or `pi` should\n    //  be used instead of 3.14)\n    //\n    //  Unfortunately the coercion happens all over the place, as these\n    //  Perseus style score objects are created *everywhere* (basically\n    //  in every widget), so it's hard to change now. We assume that\n    //  anything with a \"message\" is not truly empty, and one of the\n    //  latter two cases for now.\n    return (\n        score.type === \"invalid\" &&\n        (!score.message || score.message.length === 0)\n    );\n}\n\n/*\n * The touchHandlers are used to track the current state of the touch\n * event, such as whether or not the user is currently pressed down (either\n * through touch or mouse) on the screen.\n */\nconst touchHandlers: TouchHandlers = {\n    pointerDown: false,\n    currentTouchIdentifier: null,\n};\n\nfunction resetTouchHandlers() {\n    Object.assign(touchHandlers, {\n        pointerDown: false,\n        currentTouchIdentifier: null,\n    });\n}\n\n/**\n * Extracts the location of a touch or mouse event, allowing you to pass\n * in a \"mouseup\", \"mousedown\", or \"mousemove\" event and receive the\n * correct coordinates. Shouldn't be used with \"vmouse\" events.\n */\nfunction extractPointerLocation(event: any): Position | null | undefined {\n    let touchOrEvent;\n\n    if (touchHandlers.pointerDown) {\n        // Look for the touch matching the one we're tracking; ignore others\n        if (touchHandlers.currentTouchIdentifier != null) {\n            const len = event.changedTouches ? event.changedTouches.length : 0;\n            for (let i = 0; i < len; i++) {\n                if (\n                    event.changedTouches[i].identifier ===\n                    touchHandlers.currentTouchIdentifier\n                ) {\n                    touchOrEvent = event.changedTouches[i];\n                }\n            }\n        } else {\n            touchOrEvent = event;\n        }\n\n        const isEndish =\n            event.type === \"touchend\" || event.type === \"touchcancel\";\n        if (touchOrEvent && isEndish) {\n            touchHandlers.pointerDown = false;\n            touchHandlers.currentTouchIdentifier = null;\n        }\n    } else {\n        // touchstart or mousedown\n        touchHandlers.pointerDown = true;\n        if (event.changedTouches) {\n            touchOrEvent = event.changedTouches[0];\n            touchHandlers.currentTouchIdentifier = touchOrEvent.identifier;\n        } else {\n            touchOrEvent = event;\n        }\n    }\n\n    if (touchOrEvent) {\n        return {\n            left: touchOrEvent.pageX,\n            top: touchOrEvent.pageY,\n        };\n    }\n}\n\n// Older browsers don't support passive events and so we need to feature-\n// detect them and do event subscription differently for them.\n// See: orderer.jsx\nconst supportsPassiveEvents: () => boolean = () => {\n    // Test via a getter in the options object to see if the passive\n    // property is accessed\n    try {\n        const opts = Object.defineProperty({}, \"passive\", {\n            get: function () {\n                supportsPassive = true;\n            },\n        });\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        window.addEventListener(\"testPassive\", null, opts);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        window.removeEventListener(\"testPassive\", null, opts);\n    } catch (e: any) {\n        // Intentionally left empty!\n    }\n\n    return supportsPassive;\n};\n\n/**\n * Pass this function as the touchstart for an element to\n * avoid sending the touch to the mobile scratchpad\n */\nfunction captureScratchpadTouchStart(e: TouchEvent) {\n    e.stopPropagation();\n}\n\nfunction getImageSize(\n    url: string,\n    callback: (arg1: number, arg2: number) => void,\n): void {\n    const img = new Image();\n    img.onload = function () {\n        // IE 11 seems to have problems calculating the heights of svgs\n        // if they're not in the DOM. To solve this, we add the element to\n        // the dom, wait for a rerender, and use `.clientWidth` and\n        // `.clientHeight`. I think we could also solve the problem by\n        // adding the image to the document before setting the src, but then\n        // the experience would be worse for other browsers.\n        // TODO(scottgrant): This is correctly calculating the width of SVG\n        // images in browsers, but incorrectly saving the width of what may\n        // be a smaller viewport when using the editor, and reusing that\n        // width in a full-screen article.\n        if (img.width === 0 && img.height === 0) {\n            document.body?.appendChild(img);\n            // TODO(scottgrant): Remove this use of _.defer.\n            _.defer(function () {\n                callback(img.clientWidth, img.clientHeight);\n                document.body?.removeChild(img);\n            });\n        } else {\n            callback(img.width, img.height);\n        }\n    };\n\n    img.src = getRealImageUrl(url);\n}\n\n// Sometimes other components want to download the actual image e.g. to\n// determine its size. Here, we transform an .svg-labels url into the\n// correct image url, and leave normal image urls alone\nfunction getRealImageUrl(url: string): string {\n    if (isLabeledSVG(url)) {\n        return getSvgUrl(url);\n    }\n    return url;\n}\n\nfunction isLabeledSVG(url: string): boolean {\n    return svgLabelsRegex.test(url) || svgLocalLabelsRegex.test(url);\n}\n\n// For each svg+labels, there are two urls we need to download from. This gets\n// the base url without the suffix, and `getSvgUrl` and `getDataUrl` apply\n// appropriate suffixes to get the image and other data\nfunction getBaseUrl(url: string): string {\n    return url\n        .replace(svgLabelsRegex, \"https:\")\n        .replace(svgLocalLabelsRegex, \"file:\");\n}\n\nfunction getSvgUrl(url: string): string {\n    return getBaseUrl(url) + \".svg\";\n}\n\nfunction getDataUrl(url: string): string {\n    return getBaseUrl(url) + \"-data.json\";\n}\n\n/**\n * Gets the word right before where the textarea cursor is\n *\n * @param {Element} textarea - The textarea DOM element\n * @return {JSON} - An object with the word and its starting and ending positions in the textarea\n */\nfunction getWordBeforeCursor(textarea: HTMLTextAreaElement): WordAndPosition {\n    const text = textarea.value;\n\n    const endPos = textarea.selectionStart - 1;\n    const startPos =\n        Math.max(\n            text.lastIndexOf(\"\\n\", endPos),\n            text.lastIndexOf(\" \", endPos),\n        ) + 1;\n\n    return {\n        string: text.substring(startPos, endPos + 1),\n        pos: {\n            start: startPos,\n            end: endPos,\n        },\n    };\n}\n\n/**\n * Moves the textarea cursor at the specified position\n *\n * @param {Element} textarea - The textarea DOM element\n * @param {int} pos - The position where the cursor will be moved\n */\nfunction moveCursor(textarea: HTMLTextAreaElement, pos: number): void {\n    textarea.selectionStart = pos;\n    textarea.selectionEnd = pos;\n}\n\nconst textarea = {\n    getWordBeforeCursor,\n    moveCursor,\n} as const;\n\n/**\n * Many of our labels are automatically converted into math mode without\n * the dollar signs. Unfortunately, this makes them untranslatable! This\n * helper function removes the math mode symbols from a string if we want\n * to translate it but don't need the extra dollar signs.\n */\nconst unescapeMathMode: (label: string) => string = (label) =>\n    label.startsWith(\"$\") && label.endsWith(\"$\") ? label.slice(1, -1) : label;\n\nconst random: RNG = seededRNG(new Date().getTime() & 0xffffffff);\n\nconst Util = {\n    inputPathsEqual,\n    nestedMap,\n    rWidgetRule,\n    rTypeFromWidgetId,\n    rWidgetParts,\n    snowman,\n    noScore,\n    seededRNG,\n    shuffle,\n    split,\n    combineScores,\n    keScoreFromPerseusScore,\n    firstNumericalParse,\n    stringArrayOfSize,\n    gridDimensionConfig,\n    getGridStep,\n    snapStepFromGridStep,\n    scaleFromExtent,\n    tickStepFromExtent,\n    gridStepFromTickStep,\n    tickStepFromNumTicks,\n    constrainedTickStepsFromTickSteps,\n    DeprecationMixin,\n    eq,\n    deepEq,\n    parseQueryString,\n    updateQueryString,\n    strongEncodeURIComponent,\n    widgetShouldHighlight,\n    scoreIsEmpty,\n    touchHandlers,\n    resetTouchHandlers,\n    extractPointerLocation,\n    supportsPassiveEvents,\n    captureScratchpadTouchStart,\n    getImageSize,\n    getRealImageUrl,\n    isLabeledSVG,\n    getBaseUrl,\n    getSvgUrl,\n    getDataUrl,\n    textarea,\n    unescapeMathMode,\n    random,\n} as const;\n\nexport default Util;\n","// Derived from the MIT-licensed:\n// https://github.com/fat/zoom.js/blob/fd4f3e43153da7596da0bade198e99f98b47791e/js/zoom.js\n\n// NOTE(kevindangoor)\n// This version zooms a new, absolutely positioned image element rather than\n// scaling the original image element within a new container. The problem that\n// I ran into was that we had a grandparent node with a z-index\n// which caused the zoomed image to end up behind the overlay. We sidestep all\n// of that by simplifying to just use a new image element.\n\nimport $ from \"jquery\";\n\n/*jshint browser:true, node:true */\n\n/* ========================================================================\n * Bootstrap: transition.js v3.3.4\n * http://getbootstrap.com/javascript/#transitions\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n// CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n// ============================================================\n\nfunction transitionEnd() {\n    const el = document.createElement(\"bootstrap\");\n\n    const transEndEventNames = {\n        WebkitTransition: \"webkitTransitionEnd\",\n        MozTransition: \"transitionend\",\n        OTransition: \"oTransitionEnd otransitionend\",\n        transition: \"transitionend\",\n    } as const;\n\n    for (const name in transEndEventNames) {\n        if (el.style[name] !== undefined) {\n            return {\n                end: transEndEventNames[name],\n            };\n        }\n    }\n\n    return false; // explicit for ie8 (  ._.)\n}\n\n// http://blog.alexmaccaw.com/css-transitions\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'emulateTransitionEnd' does not exist on type 'JQuery<HTMLElement>'.\n$.fn.emulateTransitionEnd = function (duration: any) {\n    let called = false;\n    const $el = this;\n    $(this).one(\"bsTransitionEnd\", function () {\n        called = true;\n    });\n    const callback = function () {\n        if (!called) {\n            $($el).trigger($.support.transition.end);\n        }\n    };\n\n    // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n    // eslint-disable-next-line no-restricted-syntax\n    setTimeout(callback, duration);\n    return this;\n};\n\n$(function () {\n    $.support.transition = transitionEnd();\n\n    if (!$.support.transition) {\n        return;\n    }\n\n    $.event.special.bsTransitionEnd = {\n        bindType: $.support.transition.end,\n        delegateType: $.support.transition.end,\n        handle: function (e) {\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            if ($(e.target).is(this)) {\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'IArguments' is not assignable to parameter of type '[t: TriggeredEvent<EventTarget, any, any, any>, ...args: any[]]'.\n                // eslint-disable-next-line prefer-rest-params\n                return e.handleObj.handler.apply(this, arguments);\n            }\n        },\n    };\n});\n\n/**\n * Changes the viewport meta tag to the given contentString. Invokes callback\n * after viewport meta tag changes have taken effect.\n *\n * TODO(david): Return a promise instead of invoking a callback.\n */\nfunction changeViewportTag(\n    contentString,\n    callback: (() => void) | (() => never),\n) {\n    const scrollX = window.scrollX;\n    const scrollY = window.scrollY;\n\n    const viewport = document.querySelector(\"meta[name=viewport]\");\n    if (viewport) {\n        viewport.setAttribute(\"content\", contentString);\n    } else {\n        $(\"head\").append(`<meta name=\"viewport\" content=\"${contentString}\">`);\n    }\n\n    // Hacky way to get the page to take the changes\n    // From http://stackoverflow.com/a/36894653\n    // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'string'.\n    document.body.style.opacity = 0.9999;\n\n    // ... and undo the temporary change.\n    // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n    // eslint-disable-next-line no-restricted-syntax\n    setTimeout(() => {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'string'.\n        document.body.style.opacity = 1;\n\n        // ... which involves restoring the scroll position, which may have\n        // changed.\n        window.scrollTo(scrollX, scrollY);\n\n        // Invoke callback on the next tick to wait for scroll position to have\n        // finished resetting.\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        callback && setTimeout(callback, 0);\n    }, 0);\n}\n\n/**\n * The zoom service\n */\nfunction ZoomServiceClass() {}\n\nZoomServiceClass.prototype._initialize = function (enableMobilePinch: any) {\n    // Check to see if the service is already initialized\n    if (this._$document) {\n        return;\n    }\n    this._activeZoom =\n        this._initialScrollPosition =\n        this._initialTouchPosition =\n        this._touchMoveListener =\n            null;\n\n    this._$document = $(document);\n    this._$window = $(window);\n    this._$body = $(document.body);\n\n    this._boundClick = $.proxy(this._clickHandler, this);\n\n    this._enableMobilePinch = enableMobilePinch;\n};\n\nZoomServiceClass.prototype.handleZoomClick = function (\n    e: any,\n    enableMobilePinch: any,\n) {\n    this._initialize(enableMobilePinch);\n    const target = e.target;\n\n    if (!target || target.tagName !== \"IMG\") {\n        return;\n    }\n\n    if (this._$body.hasClass(\"zoom-overlay-open\")) {\n        return;\n    }\n\n    if (e.metaKey || e.ctrlKey) {\n        return window.open(e.target.src, \"_blank\");\n    }\n\n    if (\n        !enableMobilePinch &&\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        target.width >= window.innerWidth - Zoom.getOffset()\n    ) {\n        return;\n    }\n\n    this._activeZoomClose(true);\n\n    // Enable page zooming in (i.e. make sure there's no maximum-scale). Also,\n    // disable page zoom out on mobile devices, because the container that the\n    // image is placed in becomes bigger than the viewport if the page can be\n    // zoomed out. We explored other fixes like fixing the overlay and page\n    // size to be the viewport, but thought that might be even worse of a hack.\n    // See for more info:\n    // http://dbushell.com/2013/09/10/css-fixed-positioning-and-mobile-zoom/\n    if (enableMobilePinch) {\n        // Disable zoom out by setting minimum scale of 1 on the viewport tag.\n        changeViewportTag(\n            \"width=device-width, initial-scale=1, minimum-scale=1\",\n            () => this._zoom(target),\n        );\n    } else {\n        this._zoom(target);\n    }\n\n    if (!enableMobilePinch) {\n        // todo(fat): probably worth throttling this\n        this._$window.on(\"scroll.zoom\", $.proxy(this._scrollHandler, this));\n\n        this._$document.on(\"keyup.zoom\", $.proxy(this._keyHandler, this));\n        this._$document.on(\"touchstart.zoom\", $.proxy(this._touchStart, this));\n    }\n\n    // we use a capturing phase here to prevent unintended js events\n    // sadly no useCapture in jquery api (http://bugs.jquery.com/ticket/14953)\n    document.addEventListener(\"click\", this._boundClick, true);\n\n    e.stopPropagation();\n};\n\nZoomServiceClass.prototype._zoom = function (target: any) {\n    this._activeZoom = new Zoom(target, this._enableMobilePinch);\n    this._activeZoom.zoomImage();\n};\n\nZoomServiceClass.prototype._activeZoomClose = function (forceDispose) {\n    if (!this._activeZoom) {\n        return;\n    }\n\n    if (forceDispose) {\n        this._activeZoom.dispose();\n        this._disposeActiveZoom();\n    } else {\n        // Reset any underlying page zoom in case the user had pinched to zoom.\n        changeViewportTag(\n            `width=device-width, initial-scale=1, minimum-scale=1,\n            maximum-scale=1`,\n            () => {\n                if (this._activeZoom) {\n                    this._activeZoom.close();\n                    this._disposeActiveZoom();\n                }\n            },\n        );\n    }\n};\n\nZoomServiceClass.prototype._disposeActiveZoom = function () {\n    this._$window.off(\".zoom\");\n    this._$document.off(\".zoom\");\n\n    document.removeEventListener(\"click\", this._boundClick, true);\n\n    this._activeZoom = null;\n};\n\nZoomServiceClass.prototype._scrollHandler = function (e: any) {\n    if (this._initialScrollPosition === null) {\n        this._initialScrollPosition = window.scrollY;\n    }\n    const deltaY = this._initialScrollPosition - window.scrollY;\n    if (Math.abs(deltaY) >= 40) {\n        this._activeZoomClose();\n    }\n};\n\nZoomServiceClass.prototype._keyHandler = function (e: any) {\n    if (e.keyCode === 27) {\n        this._activeZoomClose();\n    }\n};\n\nZoomServiceClass.prototype._clickHandler = function (e: any) {\n    e.stopPropagation();\n    e.preventDefault();\n    this._activeZoomClose();\n};\n\nZoomServiceClass.prototype._touchStart = function (e: any) {\n    // Our jQuery doesn't include `touches` in its event\n    // TODO(kevindangoor) Remove `originalEvent` once jQuery is updated\n    this._initialTouchPosition = e.originalEvent.touches[0].pageY;\n    $(e.target).on(\"touchmove.zoom\", $.proxy(this._touchMove, this));\n};\n\nZoomServiceClass.prototype._touchMove = function (e) {\n    // Our jQuery doesn't include `touches` in its event\n    // TODO(kevindangoor) Remove `originalEvent` once jQuery is updated\n    if (\n        Math.abs(\n            e.originalEvent.touches[0].pageY - this._initialTouchPosition,\n        ) > 10\n    ) {\n        this._activeZoomClose();\n        $(e.target).off(\"touchmove.zoom\");\n    }\n};\n\n/**\n * The zoom object\n */\nfunction Zoom(img: any, enableMobilePinch: any) {\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this._fullHeight = this._fullWidth = this._overlay = null;\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this._targetImage = img;\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this._enableMobilePinch = enableMobilePinch;\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this._$body = $(document.body);\n}\n\n/** Margin around the image when in the \"zoomed\"/lightbox state. */\nZoom._OFFSET = 80;\nZoom._MAX_WIDTH = 2560;\nZoom._MAX_HEIGHT = 4096;\n\nZoom.getOffset = function (zoomToFitOnMobile: undefined) {\n    return zoomToFitOnMobile ? 0 : Zoom._OFFSET;\n};\n\nZoom.prototype.getOffset = function () {\n    return Zoom.getOffset(this._enableMobilePinch);\n};\n\nZoom.prototype.zoomImage = function () {\n    const img = document.createElement(\"img\");\n    const $zoomedImage = $(img);\n\n    img.onload = function () {\n        // Load the image without specifying height and width so that we can find\n        // the true height and width.\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this._fullHeight = Number(img.height);\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this._fullWidth = Number(img.width);\n\n        // Set up our image to mirror the current image on the document.\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        const imageOffset = (this._imageOffset = $(this._targetImage).offset());\n\n        // Position the image using viewport-fixed coordinates so that it is\n        // exactly over the image on the document.\n        //\n        // Said another way ... get the coordinates of the image relative to\n        // the viewport, and use those to position our new image (which is\n        // absolutely positioned within a full-bleed fixed-position container).\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n        const left = (this._left = imageOffset.left - $(window).scrollLeft());\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n        const top = (this._top = imageOffset.top - $(window).scrollTop());\n\n        $zoomedImage.css({\n            left: left,\n            top: top,\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            width: this._targetImage.width,\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            height: this._targetImage.height,\n        });\n\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this._zoomOriginal();\n    }.bind(this);\n\n    img.src = this._targetImage.src;\n\n    this.$zoomedImage = $zoomedImage;\n};\n\nZoom.prototype._zoomOriginal = function () {\n    this.$zoomedImage.addClass(\"zoom-img\").attr(\"data-action\", \"zoom-out\");\n    $(this._targetImage).css(\"visibility\", \"hidden\");\n\n    this._backdrop = document.createElement(\"div\");\n    this._backdrop.className = \"zoom-backdrop\";\n    document.body?.appendChild(this._backdrop);\n\n    this._overlay = document.createElement(\"div\");\n    this._overlay.className = \"zoom-overlay\";\n\n    document.body?.appendChild(this._overlay);\n    this._overlay?.appendChild(this.$zoomedImage[0]);\n\n    this._calculateZoom();\n    this._triggerAnimation();\n};\n\nZoom.prototype._calculateZoom = function () {\n    const originalFullImageWidth = this._fullWidth;\n    const originalFullImageHeight = this._fullHeight;\n    const viewportHeight = window.innerHeight - this.getOffset();\n    const viewportWidth = window.innerWidth - this.getOffset();\n\n    const maxScaleFactor = originalFullImageWidth / this._targetImage.width;\n\n    // Zoom to fit the viewport.\n    const imageAspectRatio = originalFullImageWidth / originalFullImageHeight;\n    const viewportAspectRatio = viewportWidth / viewportHeight;\n\n    if (\n        originalFullImageWidth < viewportWidth &&\n        originalFullImageHeight < viewportHeight\n    ) {\n        this._imgScaleFactor = maxScaleFactor;\n    } else if (imageAspectRatio < viewportAspectRatio) {\n        this._imgScaleFactor =\n            (viewportHeight / originalFullImageHeight) * maxScaleFactor;\n    } else {\n        this._imgScaleFactor =\n            (viewportWidth / (originalFullImageWidth ?? 0)) * maxScaleFactor;\n    }\n};\n\nZoom.prototype._triggerAnimation = function () {\n    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n    const viewportY = $(window).scrollTop() + window.innerHeight / 2;\n    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n    const viewportX = $(window).scrollLeft() + window.innerWidth / 2;\n\n    const scaleFactor = this._imgScaleFactor;\n\n    const imageCenterY = this._imageOffset.top + this._targetImage.height / 2;\n    const imageCenterX = this._imageOffset.left + this._targetImage.width / 2;\n\n    this._translateY = (viewportY - imageCenterY) / scaleFactor;\n    this._translateX = (viewportX - imageCenterX) / scaleFactor;\n\n    // NOTE: This is re-used below.\n    this._zoomedInTransformString = `\n        scale(${scaleFactor})\n        translate3d(${this._translateX}px, ${this._translateY}px, 0)\n    `;\n\n    this.$zoomedImage\n        .css({\n            transform: this._zoomedInTransformString,\n        })\n        .addClass(\"zoom-transition\")\n        .one($.support.transition.end, $.proxy(this._onZoomInFinish, this))\n        .emulateTransitionEnd(300);\n\n    this._$body.addClass(\"zoom-overlay-open\");\n};\n\nZoom.prototype._onZoomInFinish = function () {\n    // Remove the transform on the image, but make it look exactly the same as\n    // the image with the transform -- full-size and centered in the viewport\n    // -- using margins + left/top + scroll\n    //\n    // We need to remove the transform for scrolling to work -- the browser\n    // would still calculate the element position/sizing by its pre-transform\n    // dimensions.\n\n    const height = this._targetImage.height * this._imgScaleFactor;\n    const width = this._targetImage.width * this._imgScaleFactor;\n    let left = 0;\n    let top = 0;\n    let marginLeft = 0;\n    let marginTop = 0;\n    let scrollLeft = 0;\n    let scrollTop = 0;\n\n    // Horizontally center the image within the viewport, either by positioning\n    // with CSS or scrolling the viewport.\n    if (width < window.innerWidth) {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'number'.\n        left = \"50%\";\n        marginLeft = -width / 2;\n    } else {\n        scrollLeft = (width - window.innerWidth) / 2;\n    }\n\n    // ... and similarly, vertically center the image within the viewport.\n    if (height < window.innerHeight) {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'number'.\n        top = \"50%\";\n        marginTop = -height / 2;\n    } else {\n        scrollTop = (height - window.innerHeight) / 2;\n    }\n\n    this.$zoomedImage\n        .css({\n            height: height,\n            left: left,\n            marginLeft: marginLeft,\n            marginTop: marginTop,\n            top: top,\n            transform: \"\",\n            width: width,\n        })\n        .removeClass(\"zoom-transition\");\n\n    $(this._overlay).scrollLeft(scrollLeft).scrollTop(scrollTop);\n};\n\nZoom.prototype.close = function () {\n    this._$body\n        .removeClass(\"zoom-overlay-open\")\n        .addClass(\"zoom-overlay-transitioning\");\n\n    // Upon closing the image, zoom it back out. Do this by first re-applying the\n    // zoomed-in transform and resetting the CSS top/left + margins to what it\n    // was right after zooming in -- basically undoing what we did in\n    // _onZoomInFinish.\n    // TODO(david): Adjust this translation of the transform to take into\n    //     account the current scroll position of the image (if the user\n    //     scrolled the image after it was zoomed).\n    this.$zoomedImage\n        .css({\n            height: this._targetImage.height,\n            left: this._left,\n            marginLeft: 0,\n            marginTop: 0,\n            top: this._top,\n            transform: this._zoomedInTransformString,\n            width: this._targetImage.width,\n        })\n        .removeClass(\"zoom-transition\");\n\n    $(this._overlay).scrollLeft(0).scrollTop(0);\n\n    // ... now that the image and its container have been set up to be in the\n    // same state as right at the end of the zoom-in animation, reset the\n    // transform to scale(1) to achieve the zoom-out-into-image-on-document\n    // animation.\n    // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n    // eslint-disable-next-line no-restricted-syntax\n    setTimeout(() => {\n        this.$zoomedImage\n            .css({\n                transform: \"scale(1)\",\n            })\n            .addClass(\"zoom-transition\")\n            .one($.support.transition.end, $.proxy(this.dispose, this))\n            .emulateTransitionEnd(300);\n    }, 10);\n};\n\nZoom.prototype.dispose = function () {\n    if (this.$zoomedImage && this.$zoomedImage[0].parentNode) {\n        this.$zoomedImage.remove();\n        this.$zoomedImage = null;\n\n        this._overlay.parentNode.removeChild(this._overlay);\n        this._backdrop.parentNode.removeChild(this._backdrop);\n\n        this._$body.removeClass(\"zoom-overlay-transitioning\");\n    }\n    $(this._targetImage).css(\"visibility\", \"visible\");\n    this._targetImage.focus();\n};\n\nexport const ZoomService: any = new ZoomServiceClass();\n","// @baseFontFamily:        \"Proxima Nova\", sans-serif;\nexport const baseFontFamily = \"'Proxima Nova',sans-serif\";\n// @boldFontFamily:        \"Proxima Nova Semibold\", sans-serif;\nexport const boldFontFamily = \"'Proxima Nova Semibold',sans-serif\";\n// @green:                 #76a005;\nexport const green = \"#76A005\";\n// @kaGreen:               #71b307;\nexport const kaGreen = \"#71B307\";\n// @blue:                  #1c758a;\nexport const blue = \"#1C758A\";\n// @gray:                  #aaa;\nexport const gray = \"#AAAAAA\";\n// @red:                   #ffbaba;\nexport const red = \"#FFBABA\";\n// @grayLight:             #aaa;\nexport const grayLight = \"#AAAAAA\";\n// @grayLighter:           #ddd;\nexport const grayLighter = \"#DDDDDD\";\n// @learnstormBlue:        #4898fc;\nexport const learnstormBlue = \"#4898FC\";\n\nexport const white = \"#FFFFFF\";\nexport const gray98 = \"#FAFAFA\";\nexport const gray97 = \"#F6F7F7\";\nexport const gray95 = \"#F0F1F2\";\nexport const gray90 = \"#E3E5E6\";\nexport const gray85 = \"#D6D8DA\";\nexport const gray76 = \"#BABEC2\";\nexport const gray68 = \"#888D93\";\nexport const gray41 = \"#626569\";\nexport const gray25 = \"#3B3e40\";\nexport const gray17 = \"#21242c\";\nexport const black = \"#000000\";\n\nexport const warning1 = \"#F86700\";\nexport const warning3 = \"#C75300\";\n\n// @pure-sm-min: 568px;\nexport const pureSmMin = \"568px\";\n// @pure-md-min: 768px;\nexport const pureMdMin = \"768px\";\n// @pure-lg-min: 1024px;\nexport const pureLgMin = \"1024px\";\n// @pure-xl-min: 1280px;\nexport const pureXlMin = \"1280px\";\n// @pure-xs-max: (@pure-sm-min - 1);\nexport const pureXsMax = \"567px\";\n// @pure-sm-max: (@pure-md-min - 1);\nexport const pureSmMax = \"767px\";\n// @pure-md-max: (@pure-lg-min - 1);\nexport const pureMdMax = \"1023px\";\n// @pure-lg-max: (@pure-xl-min - 1);\nexport const pureLgMax = \"1279px\";\n// @tableBackgroundAccent: #f9f9f9; // for striping\nexport const tableBackgroundAccent = \"#F9F9F9\";\n// @zIndexScratchPad: 1;\nexport const zIndexScratchPad = 1;\n// @zIndexAboveScratchpad: @zIndexScratchPad + 1;\nexport const zIndexAboveScratchpad = 2;\n// @zIndexInteractiveComponent: @zIndexAboveScratchpad + 1;\nexport const zIndexInteractiveComponent = 3;\n// @zIndexCurrentlyDragging: @zIndexInteractiveComponent + 1;\nexport const zIndexCurrentlyDragging = 4;\n// @zIndexCalculator: @zIndexCurrentlyDragging + 1;\nexport const zIndexCalculator = 5;\n// @phoneMargin: 16px;\nexport const phoneMargin = 16;\n\nexport const negativePhoneMargin = -16;\nexport const hintBorderWidth = 4;\n\n// The 'base unit' -- our new typography and layout styles are defined in\n// terms of multiples of the 'base unit'.\nexport const baseUnitPx = 16;\n\nexport const interactiveSizes = {\n    defaultBoxSize: 400,\n    defaultBoxSizeSmall: 288,\n} as const;\n\nexport const circleSize = 24;\nexport const radioMarginWidth = 2;\n\nexport const warningColor = \"#f86700\";\nexport const warningColorHover = \"#df5c00\";\nexport const warningColorActive = \"#c75300\";\n\nexport const publishBlockingErrorColor = \"#be2612\";\n\nexport const radioBorderColor = \"#BABEC2\";\nexport const checkedColor = \"#71B307\";\n\nexport const articleMaxWidthInPx = 688;\nexport const articleMaxWidthTableInPx = 512;\n","/**\n * A wrapper for a component that would otherwise have a fixed width and\n * height, that magically makes it reponsive while preserving its aspect ratio.\n * Specifically, the component will shrink dynamically when it needs to but\n * won't ever grow past its original dimensions.\n *\n * Can wrap multiple components with the same dimensions at the same time;\n * these will be overlaid on top of each other.\n *\n * Usage:\n * <FixedToResponsive width={400} height={400}>\n *     <img src=\"bottom-layer.png\" />\n *     <img src=\"top-layer.png\" />\n * </FixedToResponsive>\n */\nimport classNames from \"classnames\";\nimport * as React from \"react\";\n\nimport {negativePhoneMargin} from \"../styles/constants\";\n\nconst MIN_VIEWPORT_HEIGHT = 480;\n\ntype Props = {\n    width: number;\n    height: number;\n    children: React.ReactNode;\n    className?: string;\n    constrainHeight?: boolean;\n    allowFullBleed?: boolean;\n};\n\ntype DefaultProps = {\n    className: Props[\"className\"];\n    constrainHeight: Props[\"constrainHeight\"];\n    allowFullBleed: Props[\"allowFullBleed\"];\n};\n\ntype State = {\n    viewportHeight: number | null;\n    viewportWidth: number | null;\n};\n\nclass FixedToResponsive extends React.Component<Props, State> {\n    _isMounted = false;\n\n    static defaultProps: DefaultProps = {\n        className: \"\",\n        constrainHeight: false,\n        allowFullBleed: false,\n    };\n\n    state: State = {\n        viewportHeight: null,\n        viewportWidth: null,\n    };\n\n    componentDidMount() {\n        // TODO(scottgrant): This is a hack to remove the deprecated call to\n        // this.isMounted() but is still considered an anti-pattern.\n        this._isMounted = true;\n\n        // Cache viewport sizes instead of computing on each render.\n        // We setState() in componentDidMount(), even though it's a React\n        // anti-pattern, because we do actually want to trigger a re-render\n        // after the initial render (because initial render may be\n        // server-side).\n        // TODO(david): Don't do this for each image. Do this once per page.\n        if (window.innerHeight < MIN_VIEWPORT_HEIGHT) {\n            // There is a weird issue when this gets rendered in an Android\n            // webview where window.innerHeight might be initially very small,\n            // like 46, but seems to be good after ~400ms.\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(this._cacheViewportSize, 800);\n        } else {\n            this._cacheViewportSize();\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    _cacheViewportSize: () => void = (): void => {\n        if (this._isMounted) {\n            this.setState({\n                viewportHeight: Math.max(\n                    MIN_VIEWPORT_HEIGHT,\n                    window.innerHeight,\n                ),\n                viewportWidth: window.innerWidth,\n            });\n        }\n    };\n\n    render() {\n        // The ideal behavior for responsified, fixed size child components is\n        // that they shrink when they need to (while preserving aspect ratio)\n        // but never grow larger than their original dimensions. We accomplish\n        // this by absolutely positioning the children and telling them to fill\n        // up all of a space that has the correct aspect ratio.\n        const aspectRatio = this.props.width / this.props.height;\n\n        // This works because padding percentages are interpreted in terms of\n        // the width of the containing block, so:\n        //     (fixed height / fixed width) * display width = display height\n        // Based on http://refills.bourbon.io/components/#video && medium.com\n        const spacer = (\n            <div\n                style={{\n                    // @ts-expect-error [FEI-5003] - TS2362 - The left-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.\n                    paddingBottom: (1 / aspectRatio).toFixed(4) * 100 + \"%\",\n                }}\n            />\n        );\n\n        let {width, height} = this.props;\n\n        // Constrain height to be at most 2/3 viewport height, maintaining\n        // aspect ratio.\n        if (this.props.constrainHeight && this.state.viewportHeight) {\n            const maxHeight = (2 / 3) * this.state.viewportHeight;\n            if (this.props.height >= maxHeight) {\n                height = maxHeight;\n                width = maxHeight * aspectRatio;\n            }\n        }\n\n        // Prevent child components from growing (aka \"the Peter Pan effect\")\n        const style = {\n            maxWidth: width,\n            maxHeight: height,\n        } as const;\n\n        // NOTE(jeremy): This depends on styles defined in perseus-renderer.less\n        const className = classNames(\n            \"fixed-to-responsive\",\n            this.props.className,\n        );\n\n        const container = (\n            <div className={className} style={style}>\n                {spacer}\n                {this.props.children}\n            </div>\n        );\n\n        const shouldFullBleed =\n            this.props.allowFullBleed &&\n            this.state.viewportWidth &&\n            width >= this.state.viewportWidth;\n\n        if (shouldFullBleed) {\n            return (\n                <div\n                    style={{\n                        marginLeft: negativePhoneMargin,\n                        marginRight: negativePhoneMargin,\n                    }}\n                >\n                    {container}\n                </div>\n            );\n        }\n        return container;\n    }\n}\n\nexport default FixedToResponsive;\n","/* eslint-disable @babel/no-invalid-this */\n/**\n * MovableThing convenience methods\n *\n * Usually added to a Movable* class through\n * InteractiveUtils.addMovableHelperMethodsTo(), but these implementations\n * are simply for convenience.\n */\n\nimport {point as kpoint} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\n/* Local helper methods. */\n\nfunction getKey(eventName: any, id: any) {\n    return eventName + \":\" + id;\n}\n\nfunction getEventName(key) {\n    return key.split(\":\")[0];\n}\n\nconst MovableHelperMethods: any = {\n    /**\n     * Fire an onSomething type event to all functions in listeners\n     */\n    _fireEvent: function (listeners, currentValue, previousValue) {\n        _.invoke(listeners, \"call\", this, currentValue, previousValue);\n    },\n\n    /**\n     * Combine the array of constraints functions\n     * Returns either an [x, y] coordinate or false\n     */\n    _applyConstraints: function (current, previous, extraOptions) {\n        let skipRemaining = false;\n\n        return _.reduce(\n            this.state.constraints,\n            (memo, constraint) => {\n                // A move that has been cancelled won't be propagated to later\n                // constraints calls\n                if (memo === false) {\n                    return false;\n                }\n\n                if (skipRemaining) {\n                    return memo;\n                }\n\n                const result = constraint.call(this, memo, previous, {\n                    onSkipRemaining: () => {\n                        skipRemaining = true;\n                    },\n                    ...extraOptions,\n                });\n\n                if (result === false) {\n                    // Returning false cancels the move\n                    return false;\n                }\n                if (kpoint.is(result, 2)) {\n                    // Returning a coord from constraints overrides the move\n                    return result;\n                }\n                if (result === true || result == null) {\n                    // Returning true or undefined allow the move to occur\n                    return memo;\n                }\n                // Anything else is an error\n                throw new PerseusError(\n                    \"Constraint returned invalid result: \" + result,\n                    Errors.Internal,\n                );\n            },\n            current,\n            this,\n        );\n    },\n\n    /**\n     * Call all draw functions, and update our prevState for the next\n     * draw function\n     */\n    draw: function () {\n        const currState = this.cloneState();\n        MovableHelperMethods._fireEvent.call(\n            this,\n            this.state.draw,\n            currState,\n            this.prevState,\n        );\n        this.prevState = currState;\n    },\n\n    /**\n     * Add a listener to any event: startMove, constraints, onMove, onMoveEnd,\n     * etc. If a listener is already bound to the given eventName and id, then\n     * it is overwritten by func.\n     *\n     * eventName: the string name of the event to listen to. one of:\n     *   \"onMoveStart\", \"onMove\", \"onMoveEnd\", \"draw\", \"remove\"\n     *\n     * id: a string id that can be used to remove this event at a later time\n     *   note: adding multiple listeners with the same id is undefined behavior\n     *\n     * func: the function to call when the event happens, which is called\n     *   with the event's standard parameters [usually (coord, prevCoord) or\n     *   (state, prevState)]\n     */\n    listen: function (eventName, id, func) {\n        this._listenerMap = this._listenerMap || {};\n\n        // If there's an existing handler, replace it by using its index in\n        // `this.state[eventName]`; otherwise, add this handler to the end\n        const key = getKey(eventName, id);\n        const index = (this._listenerMap[key] =\n            this._listenerMap[key] || this.state[eventName].length);\n        this.state[eventName][index] = func;\n    },\n\n    /**\n     * Remove a previously added listener, by the id specified in the\n     * corresponding listen() call\n     *\n     * If the given id has not been registered already, this is a no-op\n     */\n    unlisten: function (eventName, id) {\n        this._listenerMap = this._listenerMap || {};\n\n        const key = getKey(eventName, id);\n        const index = this._listenerMap[key];\n        if (index !== undefined) {\n            // Remove handler from list of event handlers and listenerMap\n            this.state[eventName].splice(index, 1);\n            delete this._listenerMap[key];\n\n            // Re-index existing events: if they occur after `index`, decrement\n            const keys = _.keys(this._listenerMap);\n            _.each(\n                keys,\n                function (key) {\n                    if (\n                        getEventName(key) === eventName &&\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this._listenerMap[key] > index\n                    ) {\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this._listenerMap[key]--;\n                    }\n                },\n                this,\n            );\n        }\n    },\n};\n\nexport default MovableHelperMethods;\n","/**\n * Utility functions for writing Interactive2 movablethings\n */\n\nimport _ from \"underscore\";\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport MovableHelperMethods from \"./movable-helper-methods\";\n\n/**\n * Compute the correct vendor-prefixed `transform`.\n */\nlet prefixedTransform = null;\nfunction computePrefixedTransform(): string | null | undefined {\n    // Temporary element for testing prefix validity\n    const el = document.createElement(\"div\");\n\n    const prefixes = [\n        \"transform\",\n        \"msTransform\",\n        \"MozTransform\",\n        \"WebkitTransform\",\n        \"OTransform\",\n    ];\n    let correctPrefix = null;\n    _.each(prefixes, function (prefix) {\n        if (typeof el.style[prefix] !== \"undefined\") {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n            correctPrefix = prefix;\n        }\n    });\n\n    return correctPrefix;\n}\n\n/**\n * Compute whether the browser can use 3d transforms by trying to use the\n * translateZ transformation.\n */\nlet canUse3dTransform = null;\nfunction computeCanUse3dTransform(): boolean {\n    const el = document.createElement(\"div\");\n\n    const prefix = InteractiveUtil.getPrefixedTransform();\n\n    // Prefix could be null.\n    // @ts-expect-error [FEI-5003] - TS2538 - Type 'null' cannot be used as an index type. | TS2538 - Type 'undefined' cannot be used as an index type.\n    el.style[prefix] = \"translateZ(0px)\";\n    // @ts-expect-error [FEI-5003] - TS2538 - Type 'null' cannot be used as an index type. | TS2538 - Type 'undefined' cannot be used as an index type.\n    return !!el.style[prefix];\n}\n\nconst InteractiveUtil = {\n    assert: function (isTrue: boolean, message?: string) {\n        if (!isTrue) {\n            throw new PerseusError(\n                \"Assertion Error\" + (message ? \": \" + message : \"\"),\n                Errors.Internal,\n            );\n        }\n    },\n\n    /**\n     * Create getters for this.state, based on the default state, `defaults`\n     */\n    createGettersFor: function (Class: any, defaults: Record<any, any>) {\n        _.each(_.keys(defaults), function (key) {\n            if (Class.prototype[key] === undefined) {\n                Class.prototype[key] = function () {\n                    return this.state[key];\n                };\n            }\n        });\n    },\n\n    /**\n     * Add MovableHelperMethods methods to a MovableThing class\n     */\n    addMovableHelperMethodsTo: function (Class: any) {\n        _.each(MovableHelperMethods, function (methodFunc, methodName) {\n            if (Class.prototype[methodName] === undefined) {\n                Class.prototype[methodName] = methodFunc;\n            }\n        });\n    },\n\n    /**\n     * Turn a function or an array of functions into an array of functions\n     */\n    arrayify: function (\n        funcOrArray:\n            | ((...args: ReadonlyArray<unknown>) => unknown)\n            | ReadonlyArray<unknown>,\n    ): ReadonlyArray<unknown> {\n        if (funcOrArray == null) {\n            return [];\n        }\n        if (_.isArray(funcOrArray)) {\n            return _.filter(_.flatten(funcOrArray), _.identity);\n        }\n        return [funcOrArray];\n    },\n\n    /**\n     * Convert all function-or-array arguments to arrays of functions\n     */\n    normalizeOptions: function (\n        arrayOptionNames: ReadonlyArray<string>,\n        options: Record<any, any>,\n    ): Record<any, any> {\n        // TODO(jack): Having to clone here is annoying; this\n        // function should really just modify this.state in place\n        // (and maybe be a function on MovableHelperMethods to get access\n        // to this.state), which would also be nicer because we could\n        // normalizeOptions once in this.modify\n        const result = _.clone(options);\n        _.each(arrayOptionNames, function (eventName) {\n            const funcOrArray = options[eventName];\n            // Only propagate values which were set; not present values\n            // shouldn't be added to options because we'd like them to\n            // fall through to defaults\n            if (funcOrArray !== undefined) {\n                const funcArray = InteractiveUtil.arrayify(funcOrArray);\n                result[eventName] = funcArray;\n            }\n        });\n        return result;\n    },\n\n    /**\n     * Get the correct vendor-prefixed `transform`.\n     */\n    getPrefixedTransform: function (): string | null | undefined {\n        // Cache result to avoid re-computation\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'string | null | undefined' is not assignable to type 'null'.\n        prefixedTransform = prefixedTransform || computePrefixedTransform();\n        return prefixedTransform;\n    },\n\n    /**\n     * Get whether the browser can use 3d transforms.\n     */\n    getCanUse3dTransform: function (): boolean {\n        if (canUse3dTransform == null) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'boolean' is not assignable to type 'null'.\n            canUse3dTransform = computeCanUse3dTransform();\n        }\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'boolean'.\n        return canUse3dTransform;\n    },\n} as const;\n\nexport default InteractiveUtil;\n","/*!\n * Raphael 1.5.2 - JavaScript Vector Library\n *\n * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)\n * Licensed under the MIT (http://raphaeljs.com/license.html) license.\n */\n(function () {\n    var setAttr;\n    if (\"\".trim) {\n        setAttr = function(node, att, value) {\n            node.setAttribute(att, String(value).trim());\n        };\n    } else {\n        setAttr = function(node, att, value) {\n            node.setAttribute(att, String(value));\n        };\n    }\n    function R() {\n        if (R.is(arguments[0], array)) {\n            var a = arguments[0],\n                cnv = create[apply](R, a.splice(0, 3 + R.is(a[0], nu))),\n                res = cnv.set();\n            for (var i = 0, ii = a[length]; i < ii; i++) {\n                var j = a[i] || {};\n                elements[has](j.type) && res[push](cnv[j.type]().attr(j));\n            }\n            return res;\n        }\n        return create[apply](R, arguments);\n    }\n    R.version = \"1.5.2\";\n    var separator = /[, ]+/,\n        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},\n        formatrg = /\\{(\\d+)\\}/g,\n        proto = \"prototype\",\n        has = \"hasOwnProperty\",\n        doc = document,\n        win = window,\n        oldRaphael = {\n            was: Object[proto][has].call(win, \"Raphael\"),\n            is: win.Raphael\n        },\n        Paper = function () {\n            this.customAttributes = {};\n        },\n        paperproto,\n        appendChild = \"appendChild\",\n        apply = \"apply\",\n        concat = \"concat\",\n        supportsTouch = \"createTouch\" in doc,\n        E = \"\",\n        S = \" \",\n        Str = String,\n        split = \"split\",\n        events = \"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend\"[split](S),\n        touchMap = {\n            mousedown: \"touchstart\",\n            mousemove: \"touchmove\",\n            mouseup: \"touchend\"\n        },\n        join = \"join\",\n        length = \"length\",\n        lowerCase = Str[proto].toLowerCase,\n        math = Math,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        pow = math.pow,\n        PI = math.PI,\n        nu = \"number\",\n        string = \"string\",\n        array = \"array\",\n        toString = \"toString\",\n        fillString = \"fill\",\n        objectToString = Object[proto][toString],\n        paper = {},\n        push = \"push\",\n        ISURL = /^url\\(['\"]?([^\\)]+?)['\"]?\\)$/i,\n        colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\))\\s*$/i,\n        isnan = {\"NaN\": 1, \"Infinity\": 1, \"-Infinity\": 1},\n        bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\n        round = math.round,\n        toFloat = parseFloat,\n        toInt = parseInt,\n        ms = \" progid:DXImageTransform.Microsoft\",\n        upperCase = Str[proto].toUpperCase,\n        availableAttrs = {blur: 0, \"clip-rect\": \"0 0 1e9 1e9\", cursor: \"default\", cx: 0, cy: 0, fill: \"#fff\", \"fill-opacity\": 1, font: '10px \"Arial\"', \"font-family\": '\"Arial\"', \"font-size\": \"10\", \"font-style\": \"normal\", \"font-weight\": 400, gradient: 0, height: 0, href: \"http://raphaeljs.com/\", opacity: 1, path: \"M0,0\", r: 0, rotation: 0, rx: 0, ry: 0, scale: \"1 1\", src: \"\", stroke: \"#000\", \"stroke-dasharray\": \"\", \"stroke-linecap\": \"butt\", \"stroke-linejoin\": \"butt\", \"stroke-miterlimit\": 0, \"stroke-opacity\": 1, \"stroke-width\": 1, target: \"_blank\", \"text-anchor\": \"middle\", title: \"Raphael\", translation: \"0 0\", width: 0, x: 0, y: 0},\n        availableAnimAttrs = {along: \"along\", blur: nu, \"clip-rect\": \"csv\", cx: nu, cy: nu, fill: \"colour\", \"fill-opacity\": nu, \"font-size\": nu, height: nu, opacity: nu, path: \"path\", r: nu, rotation: \"csv\", rx: nu, ry: nu, scale: \"csv\", stroke: \"colour\", \"stroke-opacity\": nu, \"stroke-width\": nu, translation: \"csv\", width: nu, x: nu, y: nu},\n        rp = \"replace\",\n        animKeyFrames= /^(from|to|\\d+%?)$/,\n        commaSpaces = /\\s*,\\s*/,\n        hsrg = {hs: 1, rg: 1},\n        p2s = /,?([achlmqrstvxz]),?/gi,\n        pathCommand = /([achlmqstvz])[\\s,]*((-?\\d*\\.?\\d*(?:e[-+]?\\d+)?\\s*,?\\s*)+)/ig,\n        pathValues = /(-?\\d*\\.?\\d*(?:e[-+]?\\d+)?)\\s*,?\\s*/ig,\n        radial_gradient = /^r(?:\\(([^,]+?)\\s*,\\s*([^\\)]+?)\\))?/,\n        sortByKey = function (a, b) {\n            return a.key - b.key;\n        };\n\n    R.type = (win.SVGAngle || doc.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\") ? \"SVG\" : \"VML\");\n    if (R.type == \"VML\") {\n        var d = doc.createElement(\"div\"),\n            b;\n        d.innerHTML = '<v:shape adj=\"1\"/>';\n        b = d.firstChild;\n        b.style.behavior = \"url(#default#VML)\";\n        if (!(b && typeof b.adj == \"object\")) {\n            return R.type = null;\n        }\n        d = null;\n    }\n    R.svg = !(R.vml = R.type == \"VML\");\n    Paper[proto] = R[proto];\n    paperproto = Paper[proto];\n    R._id = 0;\n    R._oid = 0;\n    R.fn = {};\n    R.is = function (o, type) {\n        type = lowerCase.call(type);\n        if (type == \"finite\") {\n            return !isnan[has](+o);\n        }\n        return  (type == \"null\" && o === null) ||\n                (type == typeof o) ||\n                (type == \"object\" && o === Object(o)) ||\n                (type == \"array\" && Array.isArray && Array.isArray(o)) ||\n                objectToString.call(o).slice(8, -1).toLowerCase() == type;\n    };\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\n        if (x3 == null) {\n            var x = x1 - x2,\n                y = y1 - y2;\n            if (!x && !y) {\n                return 0;\n            }\n            return ((x < 0) * 180 + math.atan(-y / -x) * 180 / PI + 360) % 360;\n        } else {\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\n        }\n    };\n    R.rad = function (deg) {\n        return deg % 360 * PI / 180;\n    };\n    R.deg = function (rad) {\n        return rad * 180 / PI % 360;\n    };\n    R.snapTo = function (values, value, tolerance) {\n        tolerance = R.is(tolerance, \"finite\") ? tolerance : 10;\n        if (R.is(values, array)) {\n            var i = values.length;\n            while (i--) if (abs(values[i] - value) <= tolerance) {\n                return values[i];\n            }\n        } else {\n            values = +values;\n            var rem = value % values;\n            if (rem < tolerance) {\n                return value - rem;\n            }\n            if (rem > values - tolerance) {\n                return value - rem + values;\n            }\n        }\n        return value;\n    };\n    function createUUID() {\n        // http://www.ietf.org/rfc/rfc4122.txt\n        var s = [],\n            i = 0;\n        for (; i < 32; i++) {\n            s[i] = (~~(math.random() * 16))[toString](16);\n        }\n        s[12] = 4;  // bits 12-15 of the time_hi_and_version field to 0010\n        s[16] = ((s[16] & 3) | 8)[toString](16);  // bits 6-7 of the clock_seq_hi_and_reserved to 01\n        return \"r-\" + s[join](\"\");\n    }\n\n    R.setWindow = function (newwin) {\n        win = newwin;\n        doc = win.document;\n    };\n    // colour utilities\n    var toHex = function (color) {\n        if (R.vml) {\n            // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\n            var trim = /^\\s+|\\s+$/g;\n            var bod;\n            try {\n                var docum = new ActiveXObject(\"htmlfile\");\n                docum.write(\"<body>\");\n                docum.close();\n                bod = docum.body;\n            } catch(e) {\n                bod = createPopup().document.body;\n            }\n            var range = bod.createTextRange();\n            toHex = cacher(function (color) {\n                try {\n                    bod.style.color = Str(color)[rp](trim, E);\n                    var value = range.queryCommandValue(\"ForeColor\");\n                    value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\n                    return \"#\" + (\"000000\" + value[toString](16)).slice(-6);\n                } catch(e) {\n                    return \"none\";\n                }\n            });\n        } else {\n            var i = doc.createElement(\"i\");\n            i.title = \"Rapha\\xebl Colour Picker\";\n            i.style.display = \"none\";\n            doc.body[appendChild](i);\n            toHex = cacher(function (color) {\n                i.style.color = color;\n                return doc.defaultView.getComputedStyle(i, E).getPropertyValue(\"color\");\n            });\n        }\n        return toHex(color);\n    },\n    hsbtoString = function () {\n        return \"hsb(\" + [this.h, this.s, this.b] + \")\";\n    },\n    hsltoString = function () {\n        return \"hsl(\" + [this.h, this.s, this.l] + \")\";\n    },\n    rgbtoString = function () {\n        return this.hex;\n    };\n    R.hsb2rgb = function (h, s, b, o) {\n        if (R.is(h, \"object\") && \"h\" in h && \"s\" in h && \"b\" in h) {\n            b = h.b;\n            s = h.s;\n            h = h.h;\n            o = h.o;\n        }\n        return R.hsl2rgb(h, s, b / 2, o);\n    };\n    R.hsl2rgb = function (h, s, l, o) {\n        if (R.is(h, \"object\") && \"h\" in h && \"s\" in h && \"l\" in h) {\n            l = h.l;\n            s = h.s;\n            h = h.h;\n        }\n        if (h > 1 || s > 1 || l > 1) {\n            h /= 360;\n            s /= 100;\n            l /= 100;\n        }\n        var rgb = {},\n            channels = [\"r\", \"g\", \"b\"],\n            t2, t1, t3, r, g, b;\n        if (!s) {\n            rgb = {\n                r: l,\n                g: l,\n                b: l\n            };\n        } else {\n            if (l < .5) {\n                t2 = l * (1 + s);\n            } else {\n                t2 = l + s - l * s;\n            }\n            t1 = 2 * l - t2;\n            for (var i = 0; i < 3; i++) {\n                t3 = h + 1 / 3 * -(i - 1);\n                t3 < 0 && t3++;\n                t3 > 1 && t3--;\n                if (t3 * 6 < 1) {\n                    rgb[channels[i]] = t1 + (t2 - t1) * 6 * t3;\n                } else if (t3 * 2 < 1) {\n                    rgb[channels[i]] = t2;\n                } else if (t3 * 3 < 2) {\n                    rgb[channels[i]] = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                } else {\n                    rgb[channels[i]] = t1;\n                }\n            }\n        }\n        rgb.r *= 255;\n        rgb.g *= 255;\n        rgb.b *= 255;\n        rgb.hex = \"#\" + (16777216 | rgb.b | (rgb.g << 8) | (rgb.r << 16)).toString(16).slice(1);\n        R.is(o, \"finite\") && (rgb.opacity = o);\n        rgb.toString = rgbtoString;\n        return rgb;\n    };\n    R.rgb2hsb = function (red, green, blue) {\n        if (green == null && R.is(red, \"object\") && \"r\" in red && \"g\" in red && \"b\" in red) {\n            blue = red.b;\n            green = red.g;\n            red = red.r;\n        }\n        if (green == null && R.is(red, string)) {\n            var clr = R.getRGB(red);\n            red = clr.r;\n            green = clr.g;\n            blue = clr.b;\n        }\n        if (red > 1 || green > 1 || blue > 1) {\n            red /= 255;\n            green /= 255;\n            blue /= 255;\n        }\n        var max = mmax(red, green, blue),\n            min = mmin(red, green, blue),\n            hue,\n            saturation,\n            brightness = max;\n        if (min == max) {\n            return {h: 0, s: 0, b: max, toString: hsbtoString};\n        } else {\n            var delta = (max - min);\n            saturation = delta / max;\n            if (red == max) {\n                hue = (green - blue) / delta;\n            } else if (green == max) {\n                hue = 2 + ((blue - red) / delta);\n            } else {\n                hue = 4 + ((red - green) / delta);\n            }\n            hue /= 6;\n            hue < 0 && hue++;\n            hue > 1 && hue--;\n        }\n        return {h: hue, s: saturation, b: brightness, toString: hsbtoString};\n    };\n    R.rgb2hsl = function (red, green, blue) {\n        if (green == null && R.is(red, \"object\") && \"r\" in red && \"g\" in red && \"b\" in red) {\n            blue = red.b;\n            green = red.g;\n            red = red.r;\n        }\n        if (green == null && R.is(red, string)) {\n            var clr = R.getRGB(red);\n            red = clr.r;\n            green = clr.g;\n            blue = clr.b;\n        }\n        if (red > 1 || green > 1 || blue > 1) {\n            red /= 255;\n            green /= 255;\n            blue /= 255;\n        }\n        var max = mmax(red, green, blue),\n            min = mmin(red, green, blue),\n            h,\n            s,\n            l = (max + min) / 2,\n            hsl;\n        if (min == max) {\n            hsl =  {h: 0, s: 0, l: l};\n        } else {\n            var delta = max - min;\n            s = l < .5 ? delta / (max + min) : delta / (2 - max - min);\n            if (red == max) {\n                h = (green - blue) / delta;\n            } else if (green == max) {\n                h = 2 + (blue - red) / delta;\n            } else {\n                h = 4 + (red - green) / delta;\n            }\n            h /= 6;\n            h < 0 && h++;\n            h > 1 && h--;\n            hsl = {h: h, s: s, l: l};\n        }\n        hsl.toString = hsltoString;\n        return hsl;\n    };\n    R._path2string = function () {\n        return this.join(\",\")[rp](p2s, \"$1\");\n    };\n    function cacher(f, scope, postprocessor) {\n        function newf() {\n            var arg = Array[proto].slice.call(arguments, 0),\n                args = arg[join](\"\\u25ba\"),\n                cache = newf.cache = newf.cache || {},\n                count = newf.count = newf.count || [];\n            if (cache[has](args)) {\n                return postprocessor ? postprocessor(cache[args]) : cache[args];\n            }\n            count[length] >= 1e3 && delete cache[count.shift()];\n            count[push](args);\n            cache[args] = f[apply](scope, arg);\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\n        }\n        return newf;\n    }\n\n    R.getRGB = cacher(function (colour) {\n        if (!colour || !!((colour = Str(colour)).indexOf(\"-\") + 1)) {\n            return {r: -1, g: -1, b: -1, hex: \"none\", error: 1};\n        }\n        if (colour == \"none\") {\n            return {r: -1, g: -1, b: -1, hex: \"none\"};\n        }\n        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == \"#\") && (colour = toHex(colour));\n        var res,\n            red,\n            green,\n            blue,\n            opacity,\n            t,\n            values,\n            rgb = colour.match(colourRegExp);\n        if (rgb) {\n            if (rgb[2]) {\n                blue = toInt(rgb[2].substring(5), 16);\n                green = toInt(rgb[2].substring(3, 5), 16);\n                red = toInt(rgb[2].substring(1, 3), 16);\n            }\n            if (rgb[3]) {\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\n            }\n            if (rgb[4]) {\n                values = rgb[4][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                rgb[1].toLowerCase().slice(0, 4) == \"rgba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n            }\n            if (rgb[5]) {\n                values = rgb[5][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == \"hsba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n                return R.hsb2rgb(red, green, blue, opacity);\n            }\n            if (rgb[6]) {\n                values = rgb[6][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == \"hsla\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n                return R.hsl2rgb(red, green, blue, opacity);\n            }\n            rgb = {r: red, g: green, b: blue};\n            rgb.hex = \"#\" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\n            R.is(opacity, \"finite\") && (rgb.opacity = opacity);\n            return rgb;\n        }\n        return {r: -1, g: -1, b: -1, hex: \"none\", error: 1};\n    }, R);\n    R.getColor = function (value) {\n        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},\n            rgb = this.hsb2rgb(start.h, start.s, start.b);\n        start.h += .075;\n        if (start.h > 1) {\n            start.h = 0;\n            start.s -= .2;\n            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});\n        }\n        return rgb.hex;\n    };\n    R.getColor.reset = function () {\n        delete this.start;\n    };\n    // path utilities\n    R.parsePathString = cacher(function (pathString) {\n        if (!pathString) {\n            return null;\n        }\n        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0},\n            data = [];\n        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption\n            data = pathClone(pathString);\n        }\n        if (!data[length]) {\n            Str(pathString)[rp](pathCommand, function (a, b, c) {\n                var params = [],\n                    name = lowerCase.call(b);\n                c[rp](pathValues, function (a, b) {\n                    b && params[push](+b);\n                });\n                if (name == \"m\" && params[length] > 2) {\n                    data[push]([b][concat](params.splice(0, 2)));\n                    name = \"l\";\n                    b = b == \"m\" ? \"l\" : \"L\";\n                }\n                while (params[length] >= paramCounts[name]) {\n                    data[push]([b][concat](params.splice(0, paramCounts[name])));\n                    if (!paramCounts[name]) {\n                        break;\n                    }\n                }\n            });\n        }\n        data[toString] = R._path2string;\n        return data;\n    });\n    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t,\n            x = pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n            y = pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y,\n            mx = p1x + 2 * t * (c1x - p1x) + t * t * (c2x - 2 * c1x + p1x),\n            my = p1y + 2 * t * (c1y - p1y) + t * t * (c2y - 2 * c1y + p1y),\n            nx = c1x + 2 * t * (c2x - c1x) + t * t * (p2x - 2 * c2x + c1x),\n            ny = c1y + 2 * t * (c2y - c1y) + t * t * (p2y - 2 * c2y + c1y),\n            ax = (1 - t) * p1x + t * c1x,\n            ay = (1 - t) * p1y + t * c1y,\n            cx = (1 - t) * c2x + t * p2x,\n            cy = (1 - t) * c2y + t * p2y,\n            alpha = (90 - math.atan((mx - nx) / (my - ny)) * 180 / PI);\n        (mx > nx || my < ny) && (alpha += 180);\n        return {x: x, y: y, m: {x: mx, y: my}, n: {x: nx, y: ny}, start: {x: ax, y: ay}, end: {x: cx, y: cy}, alpha: alpha};\n    };\n    var pathDimensions = cacher(function (path) {\n        if (!path) {\n            return {x: 0, y: 0, width: 0, height: 0};\n        }\n        path = path2curve(path);\n        var x = 0,\n            y = 0,\n            X = [],\n            Y = [],\n            p;\n        for (var i = 0, ii = path[length]; i < ii; i++) {\n            p = path[i];\n            if (p[0] == \"M\") {\n                x = p[1];\n                y = p[2];\n                X[push](x);\n                Y[push](y);\n            } else {\n                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                X = X[concat](dim.min.x, dim.max.x);\n                Y = Y[concat](dim.min.y, dim.max.y);\n                x = p[5];\n                y = p[6];\n            }\n        }\n        var xmin = mmin[apply](0, X),\n            ymin = mmin[apply](0, Y);\n        return {\n            x: xmin,\n            y: ymin,\n            width: mmax[apply](0, X) - xmin,\n            height: mmax[apply](0, Y) - ymin\n        };\n    }),\n        pathClone = function (pathArray) {\n            var res = [];\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            for (var i = 0, ii = pathArray[length]; i < ii; i++) {\n                res[i] = [];\n                for (var j = 0, jj = pathArray[i][length]; j < jj; j++) {\n                    res[i][j] = pathArray[i][j];\n                }\n            }\n            res[toString] = R._path2string;\n            return res;\n        },\n        pathToRelative = cacher(function (pathArray) {\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == \"M\") {\n                x = pathArray[0][1];\n                y = pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res[push]([\"M\", x, y]);\n            }\n            for (var i = start, ii = pathArray[length]; i < ii; i++) {\n                var r = res[i] = [],\n                    pa = pathArray[i];\n                if (pa[0] != lowerCase.call(pa[0])) {\n                    r[0] = lowerCase.call(pa[0]);\n                    switch (r[0]) {\n                        case \"a\":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] - x).toFixed(3);\n                            r[7] = +(pa[7] - y).toFixed(3);\n                            break;\n                        case \"v\":\n                            r[1] = +(pa[1] - y).toFixed(3);\n                            break;\n                        case \"m\":\n                            mx = pa[1];\n                            my = pa[2];\n                        default:\n                            for (var j = 1, jj = pa[length]; j < jj; j++) {\n                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\n                            }\n                    }\n                } else {\n                    r = res[i] = [];\n                    if (pa[0] == \"m\") {\n                        mx = pa[1] + x;\n                        my = pa[2] + y;\n                    }\n                    for (var k = 0, kk = pa[length]; k < kk; k++) {\n                        res[i][k] = pa[k];\n                    }\n                }\n                var len = res[i][length];\n                switch (res[i][0]) {\n                    case \"z\":\n                        x = mx;\n                        y = my;\n                        break;\n                    case \"h\":\n                        x += +res[i][len - 1];\n                        break;\n                    case \"v\":\n                        y += +res[i][len - 1];\n                        break;\n                    default:\n                        x += +res[i][len - 2];\n                        y += +res[i][len - 1];\n                }\n            }\n            res[toString] = R._path2string;\n            return res;\n        }, 0, pathClone),\n        pathToAbsolute = cacher(function (pathArray) {\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            var res = [],\n                x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            if (pathArray[0][0] == \"M\") {\n                x = +pathArray[0][1];\n                y = +pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res[0] = [\"M\", x, y];\n            }\n            for (var i = start, ii = pathArray[length]; i < ii; i++) {\n                var r = res[i] = [],\n                    pa = pathArray[i];\n                if (pa[0] != upperCase.call(pa[0])) {\n                    r[0] = upperCase.call(pa[0]);\n                    switch (r[0]) {\n                        case \"A\":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] + x);\n                            r[7] = +(pa[7] + y);\n                            break;\n                        case \"V\":\n                            r[1] = +pa[1] + y;\n                            break;\n                        case \"H\":\n                            r[1] = +pa[1] + x;\n                            break;\n                        case \"M\":\n                            mx = +pa[1] + x;\n                            my = +pa[2] + y;\n                        default:\n                            for (var j = 1, jj = pa[length]; j < jj; j++) {\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\n                            }\n                    }\n                } else {\n                    for (var k = 0, kk = pa[length]; k < kk; k++) {\n                        res[i][k] = pa[k];\n                    }\n                }\n                switch (r[0]) {\n                    case \"Z\":\n                        x = mx;\n                        y = my;\n                        break;\n                    case \"H\":\n                        x = r[1];\n                        break;\n                    case \"V\":\n                        y = r[1];\n                        break;\n                    case \"M\":\n                        mx = res[i][res[i][length] - 2];\n                        my = res[i][res[i][length] - 1];\n                    default:\n                        x = res[i][res[i][length] - 2];\n                        y = res[i][res[i][length] - 1];\n                }\n            }\n            res[toString] = R._path2string;\n            return res;\n        }, null, pathClone),\n        l2c = function (x1, y1, x2, y2) {\n            return [x1, y1, x2, y2, x2, y2];\n        },\n        q2c = function (x1, y1, ax, ay, x2, y2) {\n            var _13 = 1 / 3,\n                _23 = 2 / 3;\n            return [\n                    _13 * x1 + _23 * ax,\n                    _13 * y1 + _23 * ay,\n                    _13 * x2 + _23 * ax,\n                    _13 * y2 + _23 * ay,\n                    x2,\n                    y2\n                ];\n        },\n        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n            // for more information of where this math came from visit:\n            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n            var _120 = PI * 120 / 180,\n                rad = PI / 180 * (+angle || 0),\n                res = [],\n                xy,\n                rotate = cacher(function (x, y, rad) {\n                    var X = x * math.cos(rad) - y * math.sin(rad),\n                        Y = x * math.sin(rad) + y * math.cos(rad);\n                    return {x: X, y: Y};\n                });\n            if (!recursive) {\n                xy = rotate(x1, y1, -rad);\n                x1 = xy.x;\n                y1 = xy.y;\n                xy = rotate(x2, y2, -rad);\n                x2 = xy.x;\n                y2 = xy.y;\n                var cos = math.cos(PI / 180 * angle),\n                    sin = math.sin(PI / 180 * angle),\n                    x = (x1 - x2) / 2,\n                    y = (y1 - y2) / 2;\n                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n                if (h > 1) {\n                    h = math.sqrt(h);\n                    rx = h * rx;\n                    ry = h * ry;\n                }\n                var rx2 = rx * rx,\n                    ry2 = ry * ry,\n                    k = (large_arc_flag == sweep_flag ? -1 : 1) *\n                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n                    cx = k * rx * y / ry + (x1 + x2) / 2,\n                    cy = k * -ry * x / rx + (y1 + y2) / 2,\n                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n\n                f1 = x1 < cx ? PI - f1 : f1;\n                f2 = x2 < cx ? PI - f2 : f2;\n                f1 < 0 && (f1 = PI * 2 + f1);\n                f2 < 0 && (f2 = PI * 2 + f2);\n                if (sweep_flag && f1 > f2) {\n                    f1 = f1 - PI * 2;\n                }\n                if (!sweep_flag && f2 > f1) {\n                    f2 = f2 - PI * 2;\n                }\n            } else {\n                f1 = recursive[0];\n                f2 = recursive[1];\n                cx = recursive[2];\n                cy = recursive[3];\n            }\n            var df = f2 - f1;\n            if (abs(df) > _120) {\n                var f2old = f2,\n                    x2old = x2,\n                    y2old = y2;\n                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n                x2 = cx + rx * math.cos(f2);\n                y2 = cy + ry * math.sin(f2);\n                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n            }\n            df = f2 - f1;\n            var c1 = math.cos(f1),\n                s1 = math.sin(f1),\n                c2 = math.cos(f2),\n                s2 = math.sin(f2),\n                t = math.tan(df / 4),\n                hx = 4 / 3 * rx * t,\n                hy = 4 / 3 * ry * t,\n                m1 = [x1, y1],\n                m2 = [x1 + hx * s1, y1 - hy * c1],\n                m3 = [x2 + hx * s2, y2 - hy * c2],\n                m4 = [x2, y2];\n            m2[0] = 2 * m1[0] - m2[0];\n            m2[1] = 2 * m1[1] - m2[1];\n            if (recursive) {\n                return [m2, m3, m4][concat](res);\n            } else {\n                res = [m2, m3, m4][concat](res)[join]()[split](\",\");\n                var newres = [];\n                for (var i = 0, ii = res[length]; i < ii; i++) {\n                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n                }\n                return newres;\n            }\n        },\n        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n            var t1 = 1 - t;\n            return {\n                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\n            };\n        },\n        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\n                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\n                c = p1x - c1x,\n                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,\n                y = [p1y, p2y],\n                x = [p1x, p2x],\n                dot;\n            abs(t1) > \"1e12\" && (t1 = .5);\n            abs(t2) > \"1e12\" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x[push](dot.x);\n                y[push](dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x[push](dot.x);\n                y[push](dot.y);\n            }\n            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\n            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\n            c = p1y - c1y;\n            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;\n            abs(t1) > \"1e12\" && (t1 = .5);\n            abs(t2) > \"1e12\" && (t2 = .5);\n            if (t1 > 0 && t1 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n                x[push](dot.x);\n                y[push](dot.y);\n            }\n            if (t2 > 0 && t2 < 1) {\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n                x[push](dot.x);\n                y[push](dot.y);\n            }\n            return {\n                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},\n                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}\n            };\n        }),\n        path2curve = cacher(function (path, path2) {\n            var p = pathToAbsolute(path),\n                p2 = path2 && pathToAbsolute(path2),\n                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\n                processPath = function (path, d) {\n                    var nx, ny;\n                    if (!path) {\n                        return [\"C\", d.x, d.y, d.x, d.y, d.x, d.y];\n                    }\n                    !(path[0] in {T:1, Q:1}) && (d.qx = d.qy = null);\n                    switch (path[0]) {\n                        case \"M\":\n                            d.X = path[1];\n                            d.Y = path[2];\n                            break;\n                        case \"A\":\n                            path = [\"C\"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));\n                            break;\n                        case \"S\":\n                            nx = d.x + (d.x - (d.bx || d.x));\n                            ny = d.y + (d.y - (d.by || d.y));\n                            path = [\"C\", nx, ny][concat](path.slice(1));\n                            break;\n                        case \"T\":\n                            d.qx = d.x + (d.x - (d.qx || d.x));\n                            d.qy = d.y + (d.y - (d.qy || d.y));\n                            path = [\"C\"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                            break;\n                        case \"Q\":\n                            d.qx = path[1];\n                            d.qy = path[2];\n                            path = [\"C\"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                            break;\n                        case \"L\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, path[1], path[2]));\n                            break;\n                        case \"H\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, path[1], d.y));\n                            break;\n                        case \"V\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, d.x, path[1]));\n                            break;\n                        case \"Z\":\n                            path = [\"C\"][concat](l2c(d.x, d.y, d.X, d.Y));\n                            break;\n                    }\n                    return path;\n                },\n                fixArc = function (pp, i) {\n                    if (pp[i][length] > 7) {\n                        pp[i].shift();\n                        var pi = pp[i];\n                        while (pi[length]) {\n                            pp.splice(i++, 0, [\"C\"][concat](pi.splice(0, 6)));\n                        }\n                        pp.splice(i, 1);\n                        ii = mmax(p[length], p2 && p2[length] || 0);\n                    }\n                },\n                fixM = function (path1, path2, a1, a2, i) {\n                    if (path1 && path2 && path1[i][0] == \"M\" && path2[i][0] != \"M\") {\n                        path2.splice(i, 0, [\"M\", a2.x, a2.y]);\n                        a1.bx = 0;\n                        a1.by = 0;\n                        a1.x = path1[i][1];\n                        a1.y = path1[i][2];\n                        ii = mmax(p[length], p2 && p2[length] || 0);\n                    }\n                };\n            for (var i = 0, ii = mmax(p[length], p2 && p2[length] || 0); i < ii; i++) {\n                p[i] = processPath(p[i], attrs);\n                fixArc(p, i);\n                p2 && (p2[i] = processPath(p2[i], attrs2));\n                p2 && fixArc(p2, i);\n                fixM(p, p2, attrs, attrs2, i);\n                fixM(p2, p, attrs2, attrs, i);\n                var seg = p[i],\n                    seg2 = p2 && p2[i],\n                    seglen = seg[length],\n                    seg2len = p2 && seg2[length];\n                attrs.x = seg[seglen - 2];\n                attrs.y = seg[seglen - 1];\n                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\n                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\n                attrs2.x = p2 && seg2[seg2len - 2];\n                attrs2.y = p2 && seg2[seg2len - 1];\n            }\n            return p2 ? [p, p2] : p;\n        }, null, pathClone),\n        parseDots = cacher(function (gradient) {\n            var dots = [];\n            for (var i = 0, ii = gradient[length]; i < ii; i++) {\n                var dot = {},\n                    par = gradient[i].match(/^([^:]*):?([\\d\\.]*)/);\n                dot.color = R.getRGB(par[1]);\n                if (dot.color.error) {\n                    return null;\n                }\n                dot.color = dot.color.hex;\n                par[2] && (dot.offset = par[2] + \"%\");\n                dots[push](dot);\n            }\n            for (i = 1, ii = dots[length] - 1; i < ii; i++) {\n                if (!dots[i].offset) {\n                    var start = toFloat(dots[i - 1].offset || 0),\n                        end = 0;\n                    for (var j = i + 1; j < ii; j++) {\n                        if (dots[j].offset) {\n                            end = dots[j].offset;\n                            break;\n                        }\n                    }\n                    if (!end) {\n                        end = 100;\n                        j = ii;\n                    }\n                    end = toFloat(end);\n                    var d = (end - start) / (j - i + 1);\n                    for (; i < j; i++) {\n                        start += d;\n                        dots[i].offset = start + \"%\";\n                    }\n                }\n            }\n            return dots;\n        }),\n        getContainer = function (x, y, w, h) {\n            var container;\n            if (R.is(x, string) || R.is(x, \"object\")) {\n                container = R.is(x, string) ? doc.getElementById(x) : x;\n                if (container.tagName) {\n                    if (y == null) {\n                        return {\n                            container: container,\n                            width: container.style.pixelWidth || container.offsetWidth,\n                            height: container.style.pixelHeight || container.offsetHeight\n                        };\n                    } else {\n                        return {container: container, width: y, height: w};\n                    }\n                }\n            } else {\n                return {container: 1, x: x, y: y, width: w, height: h};\n            }\n        },\n        plugins = function (con, add) {\n            var that = this;\n            for (var prop in add) {\n                if (add[has](prop) && !(prop in con)) {\n                    switch (typeof add[prop]) {\n                        case \"function\":\n                            (function (f) {\n                                con[prop] = con === that ? f : function () { return f[apply](that, arguments); };\n                            })(add[prop]);\n                        break;\n                        case \"object\":\n                            con[prop] = con[prop] || {};\n                            plugins.call(this, con[prop], add[prop]);\n                        break;\n                        default:\n                            con[prop] = add[prop];\n                        break;\n                    }\n                }\n            }\n        },\n        tear = function (el, paper) {\n            el == paper.top && (paper.top = el.prev);\n            el == paper.bottom && (paper.bottom = el.next);\n            el.next && (el.next.prev = el.prev);\n            el.prev && (el.prev.next = el.next);\n        },\n        tofront = function (el, paper) {\n            if (paper.top === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = null;\n            el.prev = paper.top;\n            paper.top.next = el;\n            paper.top = el;\n        },\n        toback = function (el, paper) {\n            if (paper.bottom === el) {\n                return;\n            }\n            tear(el, paper);\n            el.next = paper.bottom;\n            el.prev = null;\n            paper.bottom.prev = el;\n            paper.bottom = el;\n        },\n        insertafter = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.top && (paper.top = el);\n            el2.next && (el2.next.prev = el);\n            el.next = el2.next;\n            el.prev = el2;\n            el2.next = el;\n        },\n        insertbefore = function (el, el2, paper) {\n            tear(el, paper);\n            el2 == paper.bottom && (paper.bottom = el);\n            el2.prev && (el2.prev.next = el);\n            el.prev = el2.prev;\n            el2.prev = el;\n            el.next = el2;\n        },\n        removed = function (methodname) {\n            return function () {\n                throw new Error(\"Rapha\\xebl: you are calling to method \\u201c\" + methodname + \"\\u201d of removed object\");\n            };\n        };\n    R.pathToRelative = pathToRelative;\n    // SVG\n    if (R.svg) {\n        paperproto.svgns = \"http://www.w3.org/2000/svg\";\n        paperproto.xlink = \"http://www.w3.org/1999/xlink\";\n        round = function (num) {\n            return +num + (~~num === num) * .5;\n        };\n        var $ = function (el, attr) {\n            if (attr) {\n                for (var key in attr) {\n                    if (attr[has](key)) {\n                        setAttr(el, key, Str(attr[key]));\n                    }\n                }\n            } else {\n                el = doc.createElementNS(paperproto.svgns, el);\n                el.style.webkitTapHighlightColor = \"rgba(0,0,0,0)\";\n                return el;\n            }\n        };\n        R[toString] = function () {\n            return  \"Your browser supports SVG.\\nYou are running Rapha\\xebl \" + this.version;\n        };\n        var thePath = function (pathString, SVG) {\n            var el = $(\"path\");\n            SVG.canvas && SVG.canvas[appendChild](el);\n            var p = new Element(el, SVG);\n            p.type = \"path\";\n            setFillAndStroke(p, {fill: \"none\", stroke: \"#000\", path: pathString});\n            return p;\n        };\n        var addGradientFill = function (o, gradient, SVG) {\n            var type = \"linear\",\n                fx = .5, fy = .5,\n                s = o.style;\n            gradient = Str(gradient)[rp](radial_gradient, function (all, _fx, _fy) {\n                type = \"radial\";\n                if (_fx && _fy) {\n                    fx = toFloat(_fx);\n                    fy = toFloat(_fy);\n                    var dir = ((fy > .5) * 2 - 1);\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&\n                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&\n                        fy != .5 &&\n                        (fy = fy.toFixed(5) - 1e-5 * dir);\n                }\n                return E;\n            });\n            gradient = gradient[split](/\\s*\\-\\s*/);\n            if (type == \"linear\") {\n                var angle = gradient.shift();\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n                var vector = [0, 0, math.cos(angle * PI / 180), math.sin(angle * PI / 180)],\n                    max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\n                vector[2] *= max;\n                vector[3] *= max;\n                if (vector[2] < 0) {\n                    vector[0] = -vector[2];\n                    vector[2] = 0;\n                }\n                if (vector[3] < 0) {\n                    vector[1] = -vector[3];\n                    vector[3] = 0;\n                }\n            }\n            var dots = parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n            var id = o.getAttribute(fillString);\n            id = id.match(/^url\\(#(.*)\\)$/);\n            id && SVG.defs.removeChild(doc.getElementById(id[1]));\n\n            var el = $(type + \"Gradient\");\n            el.id = createUUID();\n            $(el, type == \"radial\" ? {fx: fx, fy: fy} : {x1: vector[0], y1: vector[1], x2: vector[2], y2: vector[3]});\n            SVG.defs[appendChild](el);\n            for (var i = 0, ii = dots[length]; i < ii; i++) {\n                var stop = $(\"stop\");\n                $(stop, {\n                    offset: dots[i].offset ? dots[i].offset : !i ? \"0%\" : \"100%\",\n                    \"stop-color\": dots[i].color || \"#fff\"\n                });\n                el[appendChild](stop);\n            }\n            $(o, {\n                fill: \"url(#\" + el.id + \")\",\n                opacity: 1,\n                \"fill-opacity\": 1\n            });\n            s.fill = E;\n            s.opacity = 1;\n            s.fillOpacity = 1;\n            return 1;\n        };\n        var updatePosition = function (o) {\n            var bbox = o.getBBox();\n            $(o.pattern, {patternTransform: R.format(\"translate({0},{1})\", bbox.x, bbox.y)});\n        };\n        var setFillAndStroke = function (o, params) {\n            var dasharray = {\n                    \"\": [0],\n                    \"none\": [0],\n                    \"-\": [3, 1],\n                    \".\": [1, 1],\n                    \"-.\": [3, 1, 1, 1],\n                    \"-..\": [3, 1, 1, 1, 1, 1],\n                    \". \": [1, 3],\n                    \"- \": [4, 3],\n                    \"--\": [8, 3],\n                    \"- .\": [4, 3, 1, 3],\n                    \"--.\": [8, 3, 1, 3],\n                    \"--..\": [8, 3, 1, 3, 1, 3]\n                },\n                node = o.node,\n                attrs = o.attrs,\n                rot = o.rotate(),\n                addDashes = function (o, value) {\n                    value = dasharray[lowerCase.call(value)];\n                    if (value) {\n                        var width = o.attrs[\"stroke-width\"] || \"1\",\n                            butt = {round: width, square: width, butt: 0}[o.attrs[\"stroke-linecap\"] || params[\"stroke-linecap\"]] || 0,\n                            dashes = [];\n                        var i = value[length];\n                        while (i--) {\n                            dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;\n                        }\n                        $(node, {\"stroke-dasharray\": dashes[join](\",\")});\n                    }\n                };\n            params[has](\"rotation\") && (rot = params.rotation);\n            var rotxy = Str(rot)[split](separator);\n            if (!(rotxy.length - 1)) {\n                rotxy = null;\n            } else {\n                rotxy[1] = +rotxy[1];\n                rotxy[2] = +rotxy[2];\n            }\n            toFloat(rot) && o.rotate(0, true);\n            for (var att in params) {\n                if (params[has](att)) {\n                    if (!availableAttrs[has](att)) {\n                        continue;\n                    }\n                    var value = params[att];\n                    attrs[att] = value;\n                    switch (att) {\n                        case \"blur\":\n                            o.blur(value);\n                            break;\n                        case \"rotation\":\n                            o.rotate(value, true);\n                            break;\n                        case \"href\":\n                        case \"title\":\n                        case \"target\":\n                            var pn = node.parentNode;\n                            if (lowerCase.call(pn.tagName) != \"a\") {\n                                var hl = $(\"a\");\n                                pn.insertBefore(hl, node);\n                                hl[appendChild](node);\n                                pn = hl;\n                            }\n                            if (att == \"target\" && value == \"blank\") {\n                                pn.setAttributeNS(o.paper.xlink, \"show\", \"new\");\n                            } else {\n                                pn.setAttributeNS(o.paper.xlink, att, value);\n                            }\n                            break;\n                        case \"cursor\":\n                            node.style.cursor = value;\n                            break;\n                        case \"clip-rect\":\n                            var rect = Str(value)[split](separator);\n                            if (rect[length] == 4) {\n                                o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\n                                var el = $(\"clipPath\"),\n                                    rc = $(\"rect\");\n                                el.id = createUUID();\n                                $(rc, {\n                                    x: rect[0],\n                                    y: rect[1],\n                                    width: rect[2],\n                                    height: rect[3]\n                                });\n                                el[appendChild](rc);\n                                o.paper.defs[appendChild](el);\n                                $(node, {\"clip-path\": \"url(#\" + el.id + \")\"});\n                                o.clip = rc;\n                            }\n                            if (!value) {\n                                var clip = doc.getElementById(node.getAttribute(\"clip-path\")[rp](/(^url\\(#|\\)$)/g, E));\n                                clip && clip.parentNode.removeChild(clip);\n                                $(node, {\"clip-path\": E});\n                                delete o.clip;\n                            }\n                        break;\n                        case \"path\":\n                            if (o.type == \"path\") {\n                                $(node, {d: value ? attrs.path = pathToAbsolute(value) : \"M0,0\"});\n                            }\n                            break;\n                        case \"width\":\n                            setAttr(node, att, value);\n                            if (attrs.fx) {\n                                att = \"x\";\n                                value = attrs.x;\n                            } else {\n                                break;\n                            }\n                        case \"x\":\n                            if (attrs.fx) {\n                                value = -attrs.x - (attrs.width || 0);\n                            }\n                        case \"rx\":\n                            if (att == \"rx\" && o.type == \"rect\") {\n                                break;\n                            }\n                        case \"cx\":\n                            rotxy && (att == \"x\" || att == \"cx\") && (rotxy[1] += value - attrs[att]);\n                            setAttr(node, att, value);\n                            o.pattern && updatePosition(o);\n                            break;\n                        case \"height\":\n                            setAttr(node, att, value);\n                            if (attrs.fy) {\n                                att = \"y\";\n                                value = attrs.y;\n                            } else {\n                                break;\n                            }\n                        case \"y\":\n                            if (attrs.fy) {\n                                value = -attrs.y - (attrs.height || 0);\n                            }\n                        case \"ry\":\n                            if (att == \"ry\" && o.type == \"rect\") {\n                                break;\n                            }\n                        case \"cy\":\n                            rotxy && (att == \"y\" || att == \"cy\") && (rotxy[2] += value - attrs[att]);\n                            setAttr(node, att, value);\n                            o.pattern && updatePosition(o);\n                            break;\n                        case \"r\":\n                            if (o.type == \"rect\") {\n                                $(node, {rx: value, ry: value});\n                            } else {\n                                setAttr(node, att, value);\n                            }\n                            break;\n                        case \"src\":\n                            if (o.type == \"image\") {\n                                node.setAttributeNS(o.paper.xlink, \"href\", value);\n                            }\n                            break;\n                        case \"stroke-width\":\n                            node.style.strokeWidth = value;\n                            // Need following line for Firefox\n                            setAttr(node, att, value);\n                            if (attrs[\"stroke-dasharray\"]) {\n                                addDashes(o, attrs[\"stroke-dasharray\"]);\n                            }\n                            break;\n                        case \"stroke-dasharray\":\n                            addDashes(o, value);\n                            break;\n                        case \"translation\":\n                            var xy = Str(value)[split](separator);\n                            xy[0] = +xy[0] || 0;\n                            xy[1] = +xy[1] || 0;\n                            if (rotxy) {\n                                rotxy[1] += xy[0];\n                                rotxy[2] += xy[1];\n                            }\n                            translate.call(o, xy[0], xy[1]);\n                            break;\n                        case \"scale\":\n                            xy = Str(value)[split](separator);\n                            o.scale(+xy[0] || 1, +xy[1] || +xy[0] || 1, isNaN(toFloat(xy[2])) ? null : +xy[2], isNaN(toFloat(xy[3])) ? null : +xy[3]);\n                            break;\n                        case fillString:\n                            var isURL = Str(value).match(ISURL);\n                            if (isURL) {\n                                el = $(\"pattern\");\n                                var ig = $(\"image\");\n                                el.id = createUUID();\n                                $(el, {x: 0, y: 0, patternUnits: \"userSpaceOnUse\", height: 1, width: 1});\n                                $(ig, {x: 0, y: 0});\n                                ig.setAttributeNS(o.paper.xlink, \"href\", isURL[1]);\n                                el[appendChild](ig);\n\n                                var img = doc.createElement(\"img\");\n                                img.style.cssText = \"position:absolute;left:-9999em;top-9999em\";\n                                img.onload = function () {\n                                    $(el, {width: this.offsetWidth, height: this.offsetHeight});\n                                    $(ig, {width: this.offsetWidth, height: this.offsetHeight});\n                                    doc.body.removeChild(this);\n                                    o.paper.safari();\n                                };\n                                doc.body[appendChild](img);\n                                img.src = isURL[1];\n                                o.paper.defs[appendChild](el);\n                                node.style.fill = \"url(#\" + el.id + \")\";\n                                $(node, {fill: \"url(#\" + el.id + \")\"});\n                                o.pattern = el;\n                                o.pattern && updatePosition(o);\n                                break;\n                            }\n                            var clr = R.getRGB(value);\n                            if (!clr.error) {\n                                delete params.gradient;\n                                delete attrs.gradient;\n                                !R.is(attrs.opacity, \"undefined\") &&\n                                    R.is(params.opacity, \"undefined\") &&\n                                    $(node, {opacity: attrs.opacity});\n                                !R.is(attrs[\"fill-opacity\"], \"undefined\") &&\n                                    R.is(params[\"fill-opacity\"], \"undefined\") &&\n                                    $(node, {\"fill-opacity\": attrs[\"fill-opacity\"]});\n                            } else if ((({circle: 1, ellipse: 1})[has](o.type) || Str(value).charAt() != \"r\") && addGradientFill(node, value, o.paper)) {\n                                attrs.gradient = value;\n                                attrs.fill = \"none\";\n                                break;\n                            }\n                            clr[has](\"opacity\") && $(node, {\"fill-opacity\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                        case \"stroke\":\n                            clr = R.getRGB(value);\n                            setAttr(node, att, clr.hex);\n                            att == \"stroke\" && clr[has](\"opacity\") && $(node, {\"stroke-opacity\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\n                            break;\n                        case \"gradient\":\n                            (({circle: 1, ellipse: 1})[has](o.type) || Str(value).charAt() != \"r\") && addGradientFill(node, value, o.paper);\n                            break;\n                        case \"opacity\":\n                            if (attrs.gradient && !attrs[has](\"stroke-opacity\")) {\n                                $(node, {\"stroke-opacity\": value > 1 ? value / 100 : value});\n                            }\n                            // fall\n                        case \"fill-opacity\":\n                            if (attrs.gradient) {\n                                var gradient = doc.getElementById(node.getAttribute(fillString)[rp](/^url\\(#|\\)$/g, E));\n                                if (gradient) {\n                                    var stops = gradient.getElementsByTagName(\"stop\");\n                                    setAttr(stops[stops[length] - 1], \"stop-opacity\", value);\n                                }\n                                break;\n                            }\n                        default:\n                            att == \"font-size\" && (value = toInt(value, 10) + \"px\");\n                            var cssrule = att[rp](/(\\-.)/g, function (w) {\n                                return upperCase.call(w.substring(1));\n                            });\n                            node.style[cssrule] = value;\n                            // Need following line for Firefox\n                            setAttr(node, att, value);\n                            break;\n                    }\n                }\n            }\n\n            tuneText(o, params);\n            if (rotxy) {\n                o.rotate(rotxy.join(S));\n            } else {\n                toFloat(rot) && o.rotate(rot, true);\n            }\n        };\n        var leading = 1.2,\n        tuneText = function (el, params) {\n            if (el.type != \"text\" || !(params[has](\"text\") || params[has](\"font\") || params[has](\"font-size\") || params[has](\"x\") || params[has](\"y\"))) {\n                return;\n            }\n            var a = el.attrs,\n                node = el.node,\n                fontSize = node.firstChild ? toInt(doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue(\"font-size\"), 10) : 10;\n\n            if (params[has](\"text\")) {\n                a.text = params.text;\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n                var texts = Str(params.text)[split](\"\\n\");\n                for (var i = 0, ii = texts[length]; i < ii; i++) if (texts[i]) {\n                    var tspan = $(\"tspan\");\n                    i && $(tspan, {dy: fontSize * leading, x: a.x});\n                    tspan[appendChild](doc.createTextNode(texts[i]));\n                    node[appendChild](tspan);\n                }\n            } else {\n                texts = node.getElementsByTagName(\"tspan\");\n                for (i = 0, ii = texts[length]; i < ii; i++) {\n                    i && $(texts[i], {dy: fontSize * leading, x: a.x});\n                }\n            }\n            $(node, {y: a.y});\n            var bb = el.getBBox(),\n                dif = a.y - (bb.y + bb.height / 2);\n            dif && R.is(dif, \"finite\") && $(node, {y: a.y + dif});\n        },\n        Element = function (node, svg) {\n            var X = 0,\n                Y = 0;\n            this[0] = node;\n            this.id = R._oid++;\n            this.node = node;\n            node.raphael = this;\n            this.paper = svg;\n            this.attrs = this.attrs || {};\n            this.transformations = []; // rotate, translate, scale\n            this._ = {\n                tx: 0,\n                ty: 0,\n                rt: {deg: 0, cx: 0, cy: 0},\n                sx: 1,\n                sy: 1\n            };\n            !svg.bottom && (svg.bottom = this);\n            this.prev = svg.top;\n            svg.top && (svg.top.next = this);\n            svg.top = this;\n            this.next = null;\n        };\n        var elproto = Element[proto];\n        Element[proto].rotate = function (deg, cx, cy) {\n            if (this.removed) {\n                return this;\n            }\n            if (deg == null) {\n                if (this._.rt.cx) {\n                    return [this._.rt.deg, this._.rt.cx, this._.rt.cy][join](S);\n                }\n                return this._.rt.deg;\n            }\n            var bbox = this.getBBox();\n            deg = Str(deg)[split](separator);\n            if (deg[length] - 1) {\n                cx = toFloat(deg[1]);\n                cy = toFloat(deg[2]);\n            }\n            deg = toFloat(deg[0]);\n            if (cx != null && cx !== false) {\n                this._.rt.deg = deg;\n            } else {\n                this._.rt.deg += deg;\n            }\n            (cy == null) && (cx = null);\n            this._.rt.cx = cx;\n            this._.rt.cy = cy;\n            cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n            cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n            if (this._.rt.deg) {\n                this.transformations[0] = R.format(\"rotate({0} {1} {2})\", this._.rt.deg, cx, cy);\n                this.clip && $(this.clip, {transform: R.format(\"rotate({0} {1} {2})\", -this._.rt.deg, cx, cy)});\n            } else {\n                this.transformations[0] = E;\n                this.clip && $(this.clip, {transform: E});\n            }\n            $(this.node, {transform: this.transformations[join](S)});\n            return this;\n        };\n        Element[proto].hide = function () {\n            !this.removed && (this.node.style.display = \"none\");\n            return this;\n        };\n        Element[proto].show = function () {\n            !this.removed && (this.node.style.display = \"\");\n            return this;\n        };\n        Element[proto].remove = function () {\n            if (this.removed) {\n                return;\n            }\n            tear(this, this.paper);\n            this.node.parentNode.removeChild(this.node);\n            for (var i in this) {\n                delete this[i];\n            }\n            this.removed = true;\n        };\n        Element[proto].getBBox = function () {\n            if (this.removed) {\n                return this;\n            }\n            if (this.type == \"path\") {\n                return pathDimensions(this.attrs.path);\n            }\n            if (this.node.style.display == \"none\") {\n                this.show();\n                var hide = true;\n            }\n            var bbox = {};\n            try {\n                bbox = this.node.getBBox();\n            } catch(e) {\n                // Firefox 3.0.x plays badly here\n            } finally {\n                bbox = bbox || {};\n            }\n            if (this.type == \"text\") {\n                bbox = {x: bbox.x, y: Infinity, width: 0, height: 0};\n                for (var i = 0, ii = this.node.getNumberOfChars(); i < ii; i++) {\n                    var bb = this.node.getExtentOfChar(i);\n                    (bb.y < bbox.y) && (bbox.y = bb.y);\n                    (bb.y + bb.height - bbox.y > bbox.height) && (bbox.height = bb.y + bb.height - bbox.y);\n                    (bb.x + bb.width - bbox.x > bbox.width) && (bbox.width = bb.x + bb.width - bbox.x);\n                }\n            }\n            hide && this.hide();\n            return bbox;\n        };\n        Element[proto].attr = function (name, value) {\n            if (this.removed) {\n                return this;\n            }\n            if (name == null) {\n                var res = {};\n                for (var i in this.attrs) if (this.attrs[has](i)) {\n                    res[i] = this.attrs[i];\n                }\n                this._.rt.deg && (res.rotation = this.rotate());\n                (this._.sx != 1 || this._.sy != 1) && (res.scale = this.scale());\n                res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n                return res;\n            }\n            if (value == null && R.is(name, string)) {\n                if (name == \"translation\") {\n                    return translate.call(this);\n                }\n                if (name == \"rotation\") {\n                    return this.rotate();\n                }\n                if (name == \"scale\") {\n                    return this.scale();\n                }\n                if (name == fillString && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                    return this.attrs.gradient;\n                }\n                return this.attrs[name];\n            }\n            if (value == null && R.is(name, array)) {\n                var values = {};\n                for (var j = 0, jj = name.length; j < jj; j++) {\n                    values[name[j]] = this.attr(name[j]);\n                }\n                return values;\n            }\n            if (value != null) {\n                var params = {};\n                params[name] = value;\n            } else if (name != null && R.is(name, \"object\")) {\n                params = name;\n            }\n            for (var key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \"function\")) {\n                var par = this.paper.customAttributes[key].apply(this, [][concat](params[key]));\n                this.attrs[key] = params[key];\n                for (var subkey in par) if (par[has](subkey)) {\n                    params[subkey] = par[subkey];\n                }\n            }\n            setFillAndStroke(this, params);\n            return this;\n        };\n        Element[proto].toFront = function () {\n            if (this.removed) {\n                return this;\n            }\n            this.node.parentNode[appendChild](this.node);\n            var svg = this.paper;\n            svg.top != this && tofront(this, svg);\n            return this;\n        };\n        Element[proto].toBack = function () {\n            if (this.removed) {\n                return this;\n            }\n            if (this.node.parentNode.firstChild != this.node) {\n                this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);\n                toback(this, this.paper);\n                var svg = this.paper;\n            }\n            return this;\n        };\n        Element[proto].insertAfter = function (element) {\n            if (this.removed) {\n                return this;\n            }\n            var node = element.node || element[element.length - 1].node;\n            if (node.nextSibling) {\n                node.parentNode.insertBefore(this.node, node.nextSibling);\n            } else {\n                node.parentNode[appendChild](this.node);\n            }\n            insertafter(this, element, this.paper);\n            return this;\n        };\n        Element[proto].insertBefore = function (element) {\n            if (this.removed) {\n                return this;\n            }\n            var node = element.node || element[0].node;\n            node.parentNode.insertBefore(this.node, node);\n            insertbefore(this, element, this.paper);\n            return this;\n        };\n        Element[proto].blur = function (size) {\n            // Experimental. No Safari support. Use it on your own risk.\n            var t = this;\n            if (+size !== 0) {\n                var fltr = $(\"filter\"),\n                    blur = $(\"feGaussianBlur\");\n                t.attrs.blur = size;\n                fltr.id = createUUID();\n                $(blur, {stdDeviation: +size || 1.5});\n                fltr.appendChild(blur);\n                t.paper.defs.appendChild(fltr);\n                t._blur = fltr;\n                $(t.node, {filter: \"url(#\" + fltr.id + \")\"});\n            } else {\n                if (t._blur) {\n                    t._blur.parentNode.removeChild(t._blur);\n                    delete t._blur;\n                    delete t.attrs.blur;\n                }\n                t.node.removeAttribute(\"filter\");\n            }\n        };\n        var theCircle = function (svg, x, y, r) {\n            var el = $(\"circle\");\n            svg.canvas && svg.canvas[appendChild](el);\n            var res = new Element(el, svg);\n            res.attrs = {cx: x, cy: y, r: r, fill: \"none\", stroke: \"#000\"};\n            res.type = \"circle\";\n            $(el, res.attrs);\n            return res;\n        },\n        theRect = function (svg, x, y, w, h, r) {\n            var el = $(\"rect\");\n            svg.canvas && svg.canvas[appendChild](el);\n            var res = new Element(el, svg);\n            res.attrs = {x: x, y: y, width: w, height: h, r: r || 0, rx: r || 0, ry: r || 0, fill: \"none\", stroke: \"#000\"};\n            res.type = \"rect\";\n            $(el, res.attrs);\n            return res;\n        },\n        theEllipse = function (svg, x, y, rx, ry) {\n            var el = $(\"ellipse\");\n            svg.canvas && svg.canvas[appendChild](el);\n            var res = new Element(el, svg);\n            res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: \"none\", stroke: \"#000\"};\n            res.type = \"ellipse\";\n            $(el, res.attrs);\n            return res;\n        },\n        theImage = function (svg, src, x, y, w, h) {\n            var el = $(\"image\");\n            $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: \"none\"});\n            el.setAttributeNS(svg.xlink, \"href\", src);\n            svg.canvas && svg.canvas[appendChild](el);\n            var res = new Element(el, svg);\n            res.attrs = {x: x, y: y, width: w, height: h, src: src};\n            res.type = \"image\";\n            return res;\n        },\n        theText = function (svg, x, y, text) {\n            var el = $(\"text\");\n            $(el, {x: x, y: y, \"text-anchor\": \"middle\"});\n            svg.canvas && svg.canvas[appendChild](el);\n            var res = new Element(el, svg);\n            res.attrs = {x: x, y: y, \"text-anchor\": \"middle\", text: text, font: availableAttrs.font, stroke: \"none\", fill: \"#000\"};\n            res.type = \"text\";\n            setFillAndStroke(res, res.attrs);\n            return res;\n        },\n        setSize = function (width, height) {\n            this.width = width || this.width;\n            this.height = height || this.height;\n            setAttr(this.canvas, \"width\", this.width);\n            setAttr(this.canvas, \"height\", this.height);\n            return this;\n        },\n        create = function () {\n            var con = getContainer[apply](0, arguments),\n                container = con && con.container,\n                x = con.x,\n                y = con.y,\n                width = con.width,\n                height = con.height;\n            if (!container) {\n                throw new Error(\"SVG container not found.\");\n            }\n            var cnvs = $(\"svg\");\n            x = x || 0;\n            y = y || 0;\n            width = width || 512;\n            height = height || 342;\n            $(cnvs, {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                version: 1.1,\n                width: width,\n                height: height\n            });\n            if (container == 1) {\n                cnvs.style.cssText = \"position:absolute;left:\" + x + \"px;top:\" + y + \"px\";\n                doc.body[appendChild](cnvs);\n            } else {\n                if (container.firstChild) {\n                    container.insertBefore(cnvs, container.firstChild);\n                } else {\n                    container[appendChild](cnvs);\n                }\n            }\n            container = new Paper;\n            container.width = width;\n            container.height = height;\n            container.canvas = cnvs;\n            plugins.call(container, container, R.fn);\n            container.clear();\n            return container;\n        };\n        paperproto.clear = function () {\n            var c = this.canvas;\n            while (c.firstChild) {\n                c.removeChild(c.firstChild);\n            }\n            this.bottom = this.top = null;\n            (this.desc = $(\"desc\"))[appendChild](doc.createTextNode(\"Created with Rapha\\xebl\"));\n            c[appendChild](this.desc);\n            c[appendChild](this.defs = $(\"defs\"));\n        };\n        paperproto.remove = function () {\n            this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\n            for (var i in this) {\n                this[i] = removed(i);\n            }\n        };\n    }\n\n    // VML\n    if (R.vml) {\n        var map = {M: \"m\", L: \"l\", C: \"c\", Z: \"x\", m: \"t\", l: \"r\", c: \"v\", z: \"x\"},\n            bites = /([clmz]),?([^clmz]*)/gi,\n            blurregexp = / progid:\\S+Blur\\([^\\)]+\\)/g,\n            val = /-?[^,\\s-]+/g,\n            coordsize = 1e3 + S + 1e3,\n            zoom = 10,\n            pathlike = {path: 1, rect: 1},\n            path2vml = function (path) {\n                var total =  /[ahqstv]/ig,\n                    command = pathToAbsolute;\n                Str(path).match(total) && (command = path2curve);\n                total = /[clmz]/g;\n                if (command == pathToAbsolute && !Str(path).match(total)) {\n                    var res = Str(path)[rp](bites, function (all, command, args) {\n                        var vals = [],\n                            isMove = lowerCase.call(command) == \"m\",\n                            res = map[command];\n                        args[rp](val, function (value) {\n                            if (isMove && vals[length] == 2) {\n                                res += vals + map[command == \"m\" ? \"l\" : \"L\"];\n                                vals = [];\n                            }\n                            vals[push](round(value * zoom));\n                        });\n                        return res + vals;\n                    });\n                    return res;\n                }\n                var pa = command(path), p, r;\n                res = [];\n                for (var i = 0, ii = pa[length]; i < ii; i++) {\n                    p = pa[i];\n                    r = lowerCase.call(pa[i][0]);\n                    r == \"z\" && (r = \"x\");\n                    for (var j = 1, jj = p[length]; j < jj; j++) {\n                        r += round(p[j] * zoom) + (j != jj - 1 ? \",\" : E);\n                    }\n                    res[push](r);\n                }\n                return res[join](S);\n            };\n\n        R[toString] = function () {\n            return  \"Your browser doesn\\u2019t support SVG. Falling down to VML.\\nYou are running Rapha\\xebl \" + this.version;\n        };\n        thePath = function (pathString, vml) {\n            var g = createNode(\"group\");\n            g.style.cssText = \"position:absolute;left:0;top:0;width:\" + vml.width + \"px;height:\" + vml.height + \"px\";\n            g.coordsize = vml.coordsize;\n            g.coordorigin = vml.coordorigin;\n            var el = createNode(\"shape\"), ol = el.style;\n            ol.width = vml.width + \"px\";\n            ol.height = vml.height + \"px\";\n            el.coordsize = coordsize;\n            el.coordorigin = vml.coordorigin;\n            g[appendChild](el);\n            var p = new Element(el, g, vml),\n                attr = {fill: \"none\", stroke: \"#000\"};\n            pathString && (attr.path = pathString);\n            p.type = \"path\";\n            p.path = [];\n            p.Path = E;\n            setFillAndStroke(p, attr);\n            vml.canvas[appendChild](g);\n            return p;\n        };\n        setFillAndStroke = function (o, params) {\n            o.attrs = o.attrs || {};\n            var node = o.node,\n                a = o.attrs,\n                s = node.style,\n                xy,\n                newpath = (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.r != a.r) && o.type == \"rect\",\n                res = o;\n\n            for (var par in params) if (params[has](par)) {\n                a[par] = params[par];\n            }\n            if (newpath) {\n                a.path = rectPath(a.x, a.y, a.width, a.height, a.r);\n                o.X = a.x;\n                o.Y = a.y;\n                o.W = a.width;\n                o.H = a.height;\n            }\n            params.href && (node.href = params.href);\n            params.title && (node.title = params.title);\n            params.target && (node.target = params.target);\n            params.cursor && (s.cursor = params.cursor);\n            \"blur\" in params && o.blur(params.blur);\n            if (params.path && o.type == \"path\" || newpath) {\n                node.path = path2vml(a.path);\n            }\n            if (params.rotation != null) {\n                o.rotate(params.rotation, true);\n            }\n            if (params.translation) {\n                xy = Str(params.translation)[split](separator);\n                translate.call(o, xy[0], xy[1]);\n                if (o._.rt.cx != null) {\n                    o._.rt.cx +=+ xy[0];\n                    o._.rt.cy +=+ xy[1];\n                    o.setBox(o.attrs, xy[0], xy[1]);\n                }\n            }\n            if (params.scale) {\n                xy = Str(params.scale)[split](separator);\n                o.scale(+xy[0] || 1, +xy[1] || +xy[0] || 1, +xy[2] || null, +xy[3] || null);\n            }\n            if (\"clip-rect\" in params) {\n                var rect = Str(params[\"clip-rect\"])[split](separator);\n                if (rect[length] == 4) {\n                    rect[2] = +rect[2] + (+rect[0]);\n                    rect[3] = +rect[3] + (+rect[1]);\n                    var div = node.clipRect || doc.createElement(\"div\"),\n                        dstyle = div.style,\n                        group = node.parentNode;\n                    dstyle.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", rect);\n                    if (!node.clipRect) {\n                        dstyle.position = \"absolute\";\n                        dstyle.top = 0;\n                        dstyle.left = 0;\n                        dstyle.width = o.paper.width + \"px\";\n                        dstyle.height = o.paper.height + \"px\";\n                        group.parentNode.insertBefore(div, group);\n                        div[appendChild](group);\n                        node.clipRect = div;\n                    }\n                }\n                if (!params[\"clip-rect\"]) {\n                    node.clipRect && (node.clipRect.style.clip = E);\n                }\n            }\n            if (o.type == \"image\" && params.src) {\n                node.src = params.src;\n            }\n            if (o.type == \"image\" && params.opacity) {\n                node.filterOpacity = ms + \".Alpha(opacity=\" + (params.opacity * 100) + \")\";\n                s.filter = (node.filterMatrix || E) + (node.filterOpacity || E);\n            }\n            params.font && (s.font = params.font);\n            params[\"font-family\"] && (s.fontFamily = '\"' + params[\"font-family\"][split](\",\")[0][rp](/^['\"]+|['\"]+$/g, E) + '\"');\n            params[\"font-size\"] && (s.fontSize = params[\"font-size\"]);\n            params[\"font-weight\"] && (s.fontWeight = params[\"font-weight\"]);\n            params[\"font-style\"] && (s.fontStyle = params[\"font-style\"]);\n            if (params.opacity != null ||\n                params[\"stroke-width\"] != null ||\n                params.fill != null ||\n                params.stroke != null ||\n                params[\"stroke-width\"] != null ||\n                params[\"stroke-opacity\"] != null ||\n                params[\"fill-opacity\"] != null ||\n                params[\"stroke-dasharray\"] != null ||\n                params[\"stroke-miterlimit\"] != null ||\n                params[\"stroke-linejoin\"] != null ||\n                params[\"stroke-linecap\"] != null) {\n                node = o.shape || node;\n                var fill = (node.getElementsByTagName(fillString) && node.getElementsByTagName(fillString)[0]),\n                    newfill = false;\n                !fill && (newfill = fill = createNode(fillString));\n                if (\"fill-opacity\" in params || \"opacity\" in params) {\n                    var opacity = ((+a[\"fill-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);\n                    opacity = mmin(mmax(opacity, 0), 1);\n                    fill.opacity = opacity;\n                }\n                params.fill && (fill.on = true);\n                if (fill.on == null || params.fill == \"none\") {\n                    fill.on = false;\n                }\n                if (fill.on && params.fill) {\n                    var isURL = params.fill.match(ISURL);\n                    if (isURL) {\n                        fill.src = isURL[1];\n                        fill.type = \"tile\";\n                    } else {\n                        fill.color = R.getRGB(params.fill).hex;\n                        fill.src = E;\n                        fill.type = \"solid\";\n                        if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != \"r\") && addGradientFill(res, params.fill)) {\n                            a.fill = \"none\";\n                            a.gradient = params.fill;\n                        }\n                    }\n                }\n                newfill && node[appendChild](fill);\n                var stroke = (node.getElementsByTagName(\"stroke\") && node.getElementsByTagName(\"stroke\")[0]),\n                newstroke = false;\n                !stroke && (newstroke = stroke = createNode(\"stroke\"));\n                if ((params.stroke && params.stroke != \"none\") ||\n                    params[\"stroke-width\"] ||\n                    params[\"stroke-opacity\"] != null ||\n                    params[\"stroke-dasharray\"] ||\n                    params[\"stroke-miterlimit\"] ||\n                    params[\"stroke-linejoin\"] ||\n                    params[\"stroke-linecap\"]) {\n                    stroke.on = true;\n                }\n                (params.stroke == \"none\" || stroke.on == null || params.stroke == 0 || params[\"stroke-width\"] == 0) && (stroke.on = false);\n                var strokeColor = R.getRGB(params.stroke);\n                stroke.on && params.stroke && (stroke.color = strokeColor.hex);\n                opacity = ((+a[\"stroke-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);\n                var width = (toFloat(params[\"stroke-width\"]) || 1) * .75;\n                opacity = mmin(mmax(opacity, 0), 1);\n                params[\"stroke-width\"] == null && (width = a[\"stroke-width\"]);\n                params[\"stroke-width\"] && (stroke.weight = width);\n                width && width < 1 && (opacity *= width) && (stroke.weight = 1);\n                stroke.opacity = opacity;\n\n                params[\"stroke-linejoin\"] && (stroke.joinstyle = params[\"stroke-linejoin\"] || \"miter\");\n                stroke.miterlimit = params[\"stroke-miterlimit\"] || 8;\n                params[\"stroke-linecap\"] && (stroke.endcap = params[\"stroke-linecap\"] == \"butt\" ? \"flat\" : params[\"stroke-linecap\"] == \"square\" ? \"square\" : \"round\");\n                if (params[\"stroke-dasharray\"]) {\n                    var dasharray = {\n                        \"-\": \"shortdash\",\n                        \".\": \"shortdot\",\n                        \"-.\": \"shortdashdot\",\n                        \"-..\": \"shortdashdotdot\",\n                        \". \": \"dot\",\n                        \"- \": \"dash\",\n                        \"--\": \"longdash\",\n                        \"- .\": \"dashdot\",\n                        \"--.\": \"longdashdot\",\n                        \"--..\": \"longdashdotdot\"\n                    };\n                    stroke.dashstyle = dasharray[has](params[\"stroke-dasharray\"]) ? dasharray[params[\"stroke-dasharray\"]] : E;\n                }\n                newstroke && node[appendChild](stroke);\n            }\n            if (res.type == \"text\") {\n                s = res.paper.span.style;\n                a.font && (s.font = a.font);\n                a[\"font-family\"] && (s.fontFamily = a[\"font-family\"]);\n                a[\"font-size\"] && (s.fontSize = a[\"font-size\"]);\n                a[\"font-weight\"] && (s.fontWeight = a[\"font-weight\"]);\n                a[\"font-style\"] && (s.fontStyle = a[\"font-style\"]);\n                res.node.string && (res.paper.span.innerHTML = Str(res.node.string)[rp](/</g, \"&#60;\")[rp](/&/g, \"&#38;\")[rp](/\\n/g, \"<br>\"));\n                res.W = a.w = res.paper.span.offsetWidth;\n                res.H = a.h = res.paper.span.offsetHeight;\n                res.X = a.x;\n                res.Y = a.y + round(res.H / 2);\n\n                // text-anchor emulationm\n                switch (a[\"text-anchor\"]) {\n                    case \"start\":\n                        res.node.style[\"v-text-align\"] = \"left\";\n                        res.bbx = round(res.W / 2);\n                    break;\n                    case \"end\":\n                        res.node.style[\"v-text-align\"] = \"right\";\n                        res.bbx = -round(res.W / 2);\n                    break;\n                    default:\n                        res.node.style[\"v-text-align\"] = \"center\";\n                    break;\n                }\n            }\n        };\n        addGradientFill = function (o, gradient) {\n            o.attrs = o.attrs || {};\n            var attrs = o.attrs,\n                fill,\n                type = \"linear\",\n                fxfy = \".5 .5\";\n            o.attrs.gradient = gradient;\n            gradient = Str(gradient)[rp](radial_gradient, function (all, fx, fy) {\n                type = \"radial\";\n                if (fx && fy) {\n                    fx = toFloat(fx);\n                    fy = toFloat(fy);\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\n                    fxfy = fx + S + fy;\n                }\n                return E;\n            });\n            gradient = gradient[split](/\\s*\\-\\s*/);\n            if (type == \"linear\") {\n                var angle = gradient.shift();\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n            }\n            var dots = parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n            o = o.shape || o.node;\n            fill = o.getElementsByTagName(fillString)[0] || createNode(fillString);\n            !fill.parentNode && o.appendChild(fill);\n            if (dots[length]) {\n                fill.on = true;\n                fill.method = \"none\";\n                fill.color = dots[0].color;\n                fill.color2 = dots[dots[length] - 1].color;\n                var clrs = [];\n                for (var i = 0, ii = dots[length]; i < ii; i++) {\n                    dots[i].offset && clrs[push](dots[i].offset + S + dots[i].color);\n                }\n                fill.colors && (fill.colors.value = clrs[length] ? clrs[join]() : \"0% \" + fill.color);\n                if (type == \"radial\") {\n                    fill.type = \"gradientradial\";\n                    fill.focus = \"100%\";\n                    fill.focussize = fxfy;\n                    fill.focusposition = fxfy;\n                } else {\n                    fill.type = \"gradient\";\n                    fill.angle = (270 - angle) % 360;\n                }\n            }\n            return 1;\n        };\n        Element = function (node, group, vml) {\n            var Rotation = 0,\n                RotX = 0,\n                RotY = 0,\n                Scale = 1;\n            this[0] = node;\n            this.id = R._oid++;\n            this.node = node;\n            node.raphael = this;\n            this.X = 0;\n            this.Y = 0;\n            this.attrs = {};\n            this.Group = group;\n            this.paper = vml;\n            this._ = {\n                tx: 0,\n                ty: 0,\n                rt: {deg:0},\n                sx: 1,\n                sy: 1\n            };\n            !vml.bottom && (vml.bottom = this);\n            this.prev = vml.top;\n            vml.top && (vml.top.next = this);\n            vml.top = this;\n            this.next = null;\n        };\n        elproto = Element[proto];\n        elproto.rotate = function (deg, cx, cy) {\n            if (this.removed) {\n                return this;\n            }\n            if (deg == null) {\n                if (this._.rt.cx) {\n                    return [this._.rt.deg, this._.rt.cx, this._.rt.cy][join](S);\n                }\n                return this._.rt.deg;\n            }\n            deg = Str(deg)[split](separator);\n            if (deg[length] - 1) {\n                cx = toFloat(deg[1]);\n                cy = toFloat(deg[2]);\n            }\n            deg = toFloat(deg[0]);\n            if (cx != null) {\n                this._.rt.deg = deg;\n            } else {\n                this._.rt.deg += deg;\n            }\n            cy == null && (cx = null);\n            this._.rt.cx = cx;\n            this._.rt.cy = cy;\n            this.setBox(this.attrs, cx, cy);\n            this.Group.style.rotation = this._.rt.deg;\n            // gradient fix for rotation. TODO\n            // var fill = (this.shape || this.node).getElementsByTagName(fillString);\n            // fill = fill[0] || {};\n            // var b = ((360 - this._.rt.deg) - 270) % 360;\n            // !R.is(fill.angle, \"undefined\") && (fill.angle = b);\n            return this;\n        };\n        elproto.setBox = function (params, cx, cy) {\n            if (this.removed) {\n                return this;\n            }\n            var gs = this.Group.style,\n                os = (this.shape && this.shape.style) || this.node.style;\n            params = params || {};\n            for (var i in params) if (params[has](i)) {\n                this.attrs[i] = params[i];\n            }\n            cx = cx || this._.rt.cx;\n            cy = cy || this._.rt.cy;\n            var attr = this.attrs,\n                x,\n                y,\n                w,\n                h;\n            switch (this.type) {\n                case \"circle\":\n                    x = attr.cx - attr.r;\n                    y = attr.cy - attr.r;\n                    w = h = attr.r * 2;\n                    break;\n                case \"ellipse\":\n                    x = attr.cx - attr.rx;\n                    y = attr.cy - attr.ry;\n                    w = attr.rx * 2;\n                    h = attr.ry * 2;\n                    break;\n                case \"image\":\n                    x = +attr.x;\n                    y = +attr.y;\n                    w = attr.width || 0;\n                    h = attr.height || 0;\n                    break;\n                case \"text\":\n                    this.textpath.v = [\"m\", round(attr.x), \", \", round(attr.y - 2), \"l\", round(attr.x) + 1, \", \", round(attr.y - 2)][join](E);\n                    x = attr.x - round(this.W / 2);\n                    y = attr.y - this.H / 2;\n                    w = this.W;\n                    h = this.H;\n                    break;\n                case \"rect\":\n                case \"path\":\n                    if (!this.attrs.path) {\n                        x = 0;\n                        y = 0;\n                        w = this.paper.width;\n                        h = this.paper.height;\n                    } else {\n                        var dim = pathDimensions(this.attrs.path);\n                        x = dim.x;\n                        y = dim.y;\n                        w = dim.width;\n                        h = dim.height;\n                    }\n                    break;\n                default:\n                    x = 0;\n                    y = 0;\n                    w = this.paper.width;\n                    h = this.paper.height;\n                    break;\n            }\n            cx = (cx == null) ? x + w / 2 : cx;\n            cy = (cy == null) ? y + h / 2 : cy;\n            var left = cx - this.paper.width / 2,\n                top = cy - this.paper.height / 2, t;\n            gs.left != (t = left + \"px\") && (gs.left = t);\n            gs.top != (t = top + \"px\") && (gs.top = t);\n            this.X = pathlike[has](this.type) ? -left : x;\n            this.Y = pathlike[has](this.type) ? -top : y;\n            this.W = w;\n            this.H = h;\n            if (pathlike[has](this.type)) {\n                os.left != (t = -left * zoom + \"px\") && (os.left = t);\n                os.top != (t = -top * zoom + \"px\") && (os.top = t);\n            } else if (this.type == \"text\") {\n                os.left != (t = -left + \"px\") && (os.left = t);\n                os.top != (t = -top + \"px\") && (os.top = t);\n            } else {\n                gs.width != (t = this.paper.width + \"px\") && (gs.width = t);\n                gs.height != (t = this.paper.height + \"px\") && (gs.height = t);\n                os.left != (t = x - left + \"px\") && (os.left = t);\n                os.top != (t = y - top + \"px\") && (os.top = t);\n                os.width != (t = w + \"px\") && (os.width = t);\n                os.height != (t = h + \"px\") && (os.height = t);\n            }\n        };\n        elproto.hide = function () {\n            !this.removed && (this.Group.style.display = \"none\");\n            return this;\n        };\n        elproto.show = function () {\n            !this.removed && (this.Group.style.display = \"block\");\n            return this;\n        };\n        elproto.getBBox = function () {\n            if (this.removed) {\n                return this;\n            }\n            if (pathlike[has](this.type)) {\n                return pathDimensions(this.attrs.path);\n            }\n            return {\n                x: this.X + (this.bbx || 0),\n                y: this.Y,\n                width: this.W,\n                height: this.H\n            };\n        };\n        elproto.remove = function () {\n            if (this.removed) {\n                return;\n            }\n            tear(this, this.paper);\n            this.node.parentNode.removeChild(this.node);\n            this.Group.parentNode.removeChild(this.Group);\n            this.shape && this.shape.parentNode.removeChild(this.shape);\n            for (var i in this) {\n                delete this[i];\n            }\n            this.removed = true;\n        };\n        elproto.attr = function (name, value) {\n            if (this.removed) {\n                return this;\n            }\n            if (name == null) {\n                var res = {};\n                for (var i in this.attrs) if (this.attrs[has](i)) {\n                    res[i] = this.attrs[i];\n                }\n                this._.rt.deg && (res.rotation = this.rotate());\n                (this._.sx != 1 || this._.sy != 1) && (res.scale = this.scale());\n                res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n                return res;\n            }\n            if (value == null && R.is(name, \"string\")) {\n                if (name == \"translation\") {\n                    return translate.call(this);\n                }\n                if (name == \"rotation\") {\n                    return this.rotate();\n                }\n                if (name == \"scale\") {\n                    return this.scale();\n                }\n                if (name == fillString && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                    return this.attrs.gradient;\n                }\n                return this.attrs[name];\n            }\n            if (this.attrs && value == null && R.is(name, array)) {\n                var ii, values = {};\n                for (i = 0, ii = name[length]; i < ii; i++) {\n                    values[name[i]] = this.attr(name[i]);\n                }\n                return values;\n            }\n            var params;\n            if (value != null) {\n                params = {};\n                params[name] = value;\n            }\n            value == null && R.is(name, \"object\") && (params = name);\n            if (params) {\n                for (var key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \"function\")) {\n                    var par = this.paper.customAttributes[key].apply(this, [][concat](params[key]));\n                    this.attrs[key] = params[key];\n                    for (var subkey in par) if (par[has](subkey)) {\n                        params[subkey] = par[subkey];\n                    }\n                }\n                if (params.text && this.type == \"text\") {\n                    this.node.string = params.text;\n                }\n                setFillAndStroke(this, params);\n                if (params.gradient && (({circle: 1, ellipse: 1})[has](this.type) || Str(params.gradient).charAt() != \"r\")) {\n                    addGradientFill(this, params.gradient);\n                }\n                (!pathlike[has](this.type) || this._.rt.deg) && this.setBox(this.attrs);\n            }\n            return this;\n        };\n        elproto.toFront = function () {\n            !this.removed && this.Group.parentNode[appendChild](this.Group);\n            this.paper.top != this && tofront(this, this.paper);\n            return this;\n        };\n        elproto.toBack = function () {\n            if (this.removed) {\n                return this;\n            }\n            if (this.Group.parentNode.firstChild != this.Group) {\n                this.Group.parentNode.insertBefore(this.Group, this.Group.parentNode.firstChild);\n                toback(this, this.paper);\n            }\n            return this;\n        };\n        elproto.insertAfter = function (element) {\n            if (this.removed) {\n                return this;\n            }\n            if (element.constructor == Set) {\n                element = element[element.length - 1];\n            }\n            if (element.Group.nextSibling) {\n                element.Group.parentNode.insertBefore(this.Group, element.Group.nextSibling);\n            } else {\n                element.Group.parentNode[appendChild](this.Group);\n            }\n            insertafter(this, element, this.paper);\n            return this;\n        };\n        elproto.insertBefore = function (element) {\n            if (this.removed) {\n                return this;\n            }\n            if (element.constructor == Set) {\n                element = element[0];\n            }\n            element.Group.parentNode.insertBefore(this.Group, element.Group);\n            insertbefore(this, element, this.paper);\n            return this;\n        };\n        elproto.blur = function (size) {\n            var s = this.node.runtimeStyle,\n                f = s.filter;\n            f = f.replace(blurregexp, E);\n            if (+size !== 0) {\n                this.attrs.blur = size;\n                s.filter = f + S + ms + \".Blur(pixelradius=\" + (+size || 1.5) + \")\";\n                s.margin = R.format(\"-{0}px 0 0 -{0}px\", round(+size || 1.5));\n            } else {\n                s.filter = f;\n                s.margin = 0;\n                delete this.attrs.blur;\n            }\n        };\n\n        theCircle = function (vml, x, y, r) {\n            var g = createNode(\"group\"),\n                o = createNode(\"oval\"),\n                ol = o.style;\n            g.style.cssText = \"position:absolute;left:0;top:0;width:\" + vml.width + \"px;height:\" + vml.height + \"px\";\n            g.coordsize = coordsize;\n            g.coordorigin = vml.coordorigin;\n            g[appendChild](o);\n            var res = new Element(o, g, vml);\n            res.type = \"circle\";\n            setFillAndStroke(res, {stroke: \"#000\", fill: \"none\"});\n            res.attrs.cx = x;\n            res.attrs.cy = y;\n            res.attrs.r = r;\n            res.setBox({x: x - r, y: y - r, width: r * 2, height: r * 2});\n            vml.canvas[appendChild](g);\n            return res;\n        };\n        function rectPath(x, y, w, h, r) {\n            if (r) {\n                return R.format(\"M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z\", x + r, y, w - r * 2, r, -r, h - r * 2, r * 2 - w, r * 2 - h);\n            } else {\n                return R.format(\"M{0},{1}l{2},0,0,{3},{4},0z\", x, y, w, h, -w);\n            }\n        }\n        theRect = function (vml, x, y, w, h, r) {\n            var path = rectPath(x, y, w, h, r),\n                res = vml.path(path),\n                a = res.attrs;\n            res.X = a.x = x;\n            res.Y = a.y = y;\n            res.W = a.width = w;\n            res.H = a.height = h;\n            a.r = r;\n            a.path = path;\n            res.type = \"rect\";\n            return res;\n        };\n        theEllipse = function (vml, x, y, rx, ry) {\n            var g = createNode(\"group\"),\n                o = createNode(\"oval\"),\n                ol = o.style;\n            g.style.cssText = \"position:absolute;left:0;top:0;width:\" + vml.width + \"px;height:\" + vml.height + \"px\";\n            g.coordsize = coordsize;\n            g.coordorigin = vml.coordorigin;\n            g[appendChild](o);\n            var res = new Element(o, g, vml);\n            res.type = \"ellipse\";\n            setFillAndStroke(res, {stroke: \"#000\"});\n            res.attrs.cx = x;\n            res.attrs.cy = y;\n            res.attrs.rx = rx;\n            res.attrs.ry = ry;\n            res.setBox({x: x - rx, y: y - ry, width: rx * 2, height: ry * 2});\n            vml.canvas[appendChild](g);\n            return res;\n        };\n        theImage = function (vml, src, x, y, w, h) {\n            var g = createNode(\"group\"),\n                o = createNode(\"image\");\n            g.style.cssText = \"position:absolute;left:0;top:0;width:\" + vml.width + \"px;height:\" + vml.height + \"px\";\n            g.coordsize = coordsize;\n            g.coordorigin = vml.coordorigin;\n            o.src = src;\n            g[appendChild](o);\n            var res = new Element(o, g, vml);\n            res.type = \"image\";\n            res.attrs.src = src;\n            res.attrs.x = x;\n            res.attrs.y = y;\n            res.attrs.w = w;\n            res.attrs.h = h;\n            res.setBox({x: x, y: y, width: w, height: h});\n            vml.canvas[appendChild](g);\n            return res;\n        };\n        theText = function (vml, x, y, text) {\n            var g = createNode(\"group\"),\n                el = createNode(\"shape\"),\n                ol = el.style,\n                path = createNode(\"path\"),\n                ps = path.style,\n                o = createNode(\"textpath\");\n            g.style.cssText = \"position:absolute;left:0;top:0;width:\" + vml.width + \"px;height:\" + vml.height + \"px\";\n            g.coordsize = coordsize;\n            g.coordorigin = vml.coordorigin;\n            path.v = R.format(\"m{0},{1}l{2},{1}\", round(x * 10), round(y * 10), round(x * 10) + 1);\n            path.textpathok = true;\n            ol.width = vml.width;\n            ol.height = vml.height;\n            o.string = Str(text);\n            o.on = true;\n            el[appendChild](o);\n            el[appendChild](path);\n            g[appendChild](el);\n            var res = new Element(o, g, vml);\n            res.shape = el;\n            res.textpath = path;\n            res.type = \"text\";\n            res.attrs.text = text;\n            res.attrs.x = x;\n            res.attrs.y = y;\n            res.attrs.w = 1;\n            res.attrs.h = 1;\n            setFillAndStroke(res, {font: availableAttrs.font, stroke: \"none\", fill: \"#000\"});\n            res.setBox();\n            vml.canvas[appendChild](g);\n            return res;\n        };\n        setSize = function (width, height) {\n            var cs = this.canvas.style;\n            width == +width && (width += \"px\");\n            height == +height && (height += \"px\");\n            cs.width = width;\n            cs.height = height;\n            cs.clip = \"rect(0 \" + width + \" \" + height + \" 0)\";\n            return this;\n        };\n        var createNode;\n        doc.createStyleSheet().addRule(\".rvml\", \"behavior:url(#default#VML)\");\n        try {\n            !doc.namespaces.rvml && doc.namespaces.add(\"rvml\", \"urn:schemas-microsoft-com:vml\");\n            createNode = function (tagName) {\n                return doc.createElement('<rvml:' + tagName + ' class=\"rvml\">');\n            };\n        } catch (e) {\n            createNode = function (tagName) {\n                return doc.createElement('<' + tagName + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"rvml\">');\n            };\n        }\n        create = function () {\n            var con = getContainer[apply](0, arguments),\n                container = con.container,\n                height = con.height,\n                s,\n                width = con.width,\n                x = con.x,\n                y = con.y;\n            if (!container) {\n                throw new Error(\"VML container not found.\");\n            }\n            var res = new Paper,\n                c = res.canvas = doc.createElement(\"div\"),\n                cs = c.style;\n            x = x || 0;\n            y = y || 0;\n            width = width || 512;\n            height = height || 342;\n            width == +width && (width += \"px\");\n            height == +height && (height += \"px\");\n            res.width = 1e3;\n            res.height = 1e3;\n            res.coordsize = zoom * 1e3 + S + zoom * 1e3;\n            res.coordorigin = \"0 0\";\n            res.span = doc.createElement(\"span\");\n            res.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\";\n            c[appendChild](res.span);\n            cs.cssText = R.format(\"top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden\", width, height);\n            if (container == 1) {\n                doc.body[appendChild](c);\n                cs.left = x + \"px\";\n                cs.top = y + \"px\";\n                cs.position = \"absolute\";\n            } else {\n                if (container.firstChild) {\n                    container.insertBefore(c, container.firstChild);\n                } else {\n                    container[appendChild](c);\n                }\n            }\n            plugins.call(res, res, R.fn);\n            return res;\n        };\n        paperproto.clear = function () {\n            this.canvas.innerHTML = E;\n            this.span = doc.createElement(\"span\");\n            this.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\";\n            this.canvas[appendChild](this.span);\n            this.bottom = this.top = null;\n        };\n        paperproto.remove = function () {\n            this.canvas.parentNode.removeChild(this.canvas);\n            for (var i in this) {\n                this[i] = removed(i);\n            }\n            return true;\n        };\n    }\n\n    // rest\n    // WebKit rendering bug workaround method\n    var version = navigator.userAgent.match(/Version\\/(.*?)\\s/);\n    if ((navigator.vendor == \"Apple Computer, Inc.\") && (version && version[1] < 4 || navigator.platform.slice(0, 2) == \"iP\")) {\n        paperproto.safari = function () {\n            var rect = this.rect(-99, -99, this.width + 99, this.height + 99).attr({stroke: \"none\"});\n            win.setTimeout(function () {rect.remove();});\n        };\n    } else {\n        paperproto.safari = function () {};\n    }\n\n    // Events\n    var preventDefault = function () {\n        this.returnValue = false;\n    },\n    preventTouch = function () {\n        return this.originalEvent.preventDefault();\n    },\n    stopPropagation = function () {\n        this.cancelBubble = true;\n    },\n    stopTouch = function () {\n        return this.originalEvent.stopPropagation();\n    },\n    addEvent = (function () {\n        if (doc.addEventListener) {\n            return function (obj, type, fn, element) {\n                var realName = supportsTouch && touchMap[type] ? touchMap[type] : type;\n                var f = function (e) {\n                    if (supportsTouch && touchMap[has](type)) {\n                        for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\n                            if (e.targetTouches[i].target == obj) {\n                                var olde = e;\n                                e = e.targetTouches[i];\n                                e.originalEvent = olde;\n                                e.preventDefault = preventTouch;\n                                e.stopPropagation = stopTouch;\n                                break;\n                            }\n                        }\n                    }\n                    return fn.call(element, e);\n                };\n                obj.addEventListener(realName, f, false);\n                return function () {\n                    obj.removeEventListener(realName, f, false);\n                    return true;\n                };\n            };\n        } else if (doc.attachEvent) {\n            return function (obj, type, fn, element) {\n                var f = function (e) {\n                    e = e || win.event;\n                    e.preventDefault = e.preventDefault || preventDefault;\n                    e.stopPropagation = e.stopPropagation || stopPropagation;\n                    return fn.call(element, e);\n                };\n                obj.attachEvent(\"on\" + type, f);\n                var detacher = function () {\n                    obj.detachEvent(\"on\" + type, f);\n                    return true;\n                };\n                return detacher;\n            };\n        }\n    })(),\n    drag = [],\n    dragMove = function (e) {\n        var x = e.clientX,\n            y = e.clientY,\n            scrollY = doc.documentElement.scrollTop || doc.body.scrollTop,\n            scrollX = doc.documentElement.scrollLeft || doc.body.scrollLeft,\n            dragi,\n            j = drag.length;\n        while (j--) {\n            dragi = drag[j];\n            if (supportsTouch) {\n                var i = e.touches.length,\n                    touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    if (touch.identifier == dragi.el._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        (e.originalEvent ? e.originalEvent : e).preventDefault();\n                        break;\n                    }\n                }\n            } else {\n                e.preventDefault();\n            }\n            x += scrollX;\n            y += scrollY;\n            dragi.move && dragi.move.call(dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\n        }\n    },\n    dragUp = function (e) {\n        R.unmousemove(dragMove).unmouseup(dragUp);\n        var i = drag.length,\n            dragi;\n        while (i--) {\n            dragi = drag[i];\n            dragi.el._drag = {};\n            dragi.end && dragi.end.call(dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n        }\n        drag = [];\n    };\n    for (var i = events[length]; i--;) {\n        (function (eventName) {\n            R[eventName] = Element[proto][eventName] = function (fn, scope) {\n                if (R.is(fn, \"function\")) {\n                    this.events = this.events || [];\n                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || doc, eventName, fn, scope || this)});\n                }\n                return this;\n            };\n            R[\"un\" + eventName] = Element[proto][\"un\" + eventName] = function (fn) {\n                var events = this.events,\n                    l = events[length];\n                while (l--) if (events[l].name == eventName && events[l].f == fn) {\n                    events[l].unbind();\n                    events.splice(l, 1);\n                    !events.length && delete this.events;\n                    return this;\n                }\n                return this;\n            };\n        })(events[i]);\n    }\n    elproto.hover = function (f_in, f_out, scope_in, scope_out) {\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\n    };\n    elproto.unhover = function (f_in, f_out) {\n        return this.unmouseover(f_in).unmouseout(f_out);\n    };\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\n        this._drag = {};\n        this.mousedown(function (e) {\n            (e.originalEvent || e).preventDefault();\n            var scrollY = doc.documentElement.scrollTop || doc.body.scrollTop,\n                scrollX = doc.documentElement.scrollLeft || doc.body.scrollLeft;\n            this._drag.x = e.clientX + scrollX;\n            this._drag.y = e.clientY + scrollY;\n            this._drag.id = e.identifier;\n            onstart && onstart.call(start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\n            drag.push({el: this, move: onmove, end: onend, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});\n        });\n        return this;\n    };\n    elproto.undrag = function (onmove, onstart, onend) {\n        var i = drag.length;\n        while (i--) {\n            drag[i].el == this && (drag[i].move == onmove && drag[i].end == onend) && drag.splice(i++, 1);\n        }\n        !drag.length && R.unmousemove(dragMove).unmouseup(dragUp);\n    };\n    paperproto.circle = function (x, y, r) {\n        return theCircle(this, x || 0, y || 0, r || 0);\n    };\n    paperproto.rect = function (x, y, w, h, r) {\n        return theRect(this, x || 0, y || 0, w || 0, h || 0, r || 0);\n    };\n    paperproto.ellipse = function (x, y, rx, ry) {\n        return theEllipse(this, x || 0, y || 0, rx || 0, ry || 0);\n    };\n    paperproto.path = function (pathString) {\n        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);\n        return thePath(R.format[apply](R, arguments), this);\n    };\n    paperproto.image = function (src, x, y, w, h) {\n        return theImage(this, src || \"about:blank\", x || 0, y || 0, w || 0, h || 0);\n    };\n    paperproto.text = function (x, y, text) {\n        return theText(this, x || 0, y || 0, Str(text));\n    };\n    paperproto.set = function (itemsArray) {\n        arguments[length] > 1 && (itemsArray = Array[proto].splice.call(arguments, 0, arguments[length]));\n        return new Set(itemsArray);\n    };\n    paperproto.setSize = setSize;\n    paperproto.top = paperproto.bottom = null;\n    paperproto.raphael = R;\n    function x_y() {\n        return this.x + S + this.y;\n    }\n    elproto.resetScale = function () {\n        if (this.removed) {\n            return this;\n        }\n        this._.sx = 1;\n        this._.sy = 1;\n        this.attrs.scale = \"1 1\";\n    };\n    elproto.scale = function (x, y, cx, cy) {\n        if (this.removed) {\n            return this;\n        }\n        if (x == null && y == null) {\n            return {\n                x: this._.sx,\n                y: this._.sy,\n                toString: x_y\n            };\n        }\n        y = y || x;\n        !+y && (y = x);\n        var dx,\n            dy,\n            dcx,\n            dcy,\n            a = this.attrs;\n        if (x != 0) {\n            var bb = this.getBBox(),\n                rcx = bb.x + bb.width / 2,\n                rcy = bb.y + bb.height / 2,\n                kx = abs(x / this._.sx),\n                ky = abs(y / this._.sy);\n            cx = (+cx || cx == 0) ? cx : rcx;\n            cy = (+cy || cy == 0) ? cy : rcy;\n            var posx = this._.sx > 0,\n                posy = this._.sy > 0,\n                dirx = ~~(x / abs(x)),\n                diry = ~~(y / abs(y)),\n                dkx = kx * dirx,\n                dky = ky * diry,\n                s = this.node.style,\n                ncx = cx + abs(rcx - cx) * dkx * (rcx > cx == posx ? 1 : -1),\n                ncy = cy + abs(rcy - cy) * dky * (rcy > cy == posy ? 1 : -1),\n                fr = (x * dirx > y * diry ? ky : kx);\n            switch (this.type) {\n                case \"rect\":\n                case \"image\":\n                    var neww = a.width * kx,\n                        newh = a.height * ky;\n                    this.attr({\n                        height: newh,\n                        r: a.r * fr,\n                        width: neww,\n                        x: ncx - neww / 2,\n                        y: ncy - newh / 2\n                    });\n                    break;\n                case \"circle\":\n                case \"ellipse\":\n                    this.attr({\n                        rx: a.rx * kx,\n                        ry: a.ry * ky,\n                        r: a.r * fr,\n                        cx: ncx,\n                        cy: ncy\n                    });\n                    break;\n                case \"text\":\n                    this.attr({\n                        x: ncx,\n                        y: ncy\n                    });\n                    break;\n                case \"path\":\n                    var path = pathToRelative(a.path),\n                        skip = true,\n                        fx = posx ? dkx : kx,\n                        fy = posy ? dky : ky;\n                    for (var i = 0, ii = path[length]; i < ii; i++) {\n                        var p = path[i],\n                            P0 = upperCase.call(p[0]);\n                        if (P0 == \"M\" && skip) {\n                            continue;\n                        } else {\n                            skip = false;\n                        }\n                        if (P0 == \"A\") {\n                            p[path[i][length] - 2] *= fx;\n                            p[path[i][length] - 1] *= fy;\n                            p[1] *= kx;\n                            p[2] *= ky;\n                            p[5] = +(dirx + diry ? !!+p[5] : !+p[5]);\n                        } else if (P0 == \"H\") {\n                            for (var j = 1, jj = p[length]; j < jj; j++) {\n                                p[j] *= fx;\n                            }\n                        } else if (P0 == \"V\") {\n                            for (j = 1, jj = p[length]; j < jj; j++) {\n                                p[j] *= fy;\n                            }\n                         } else {\n                            for (j = 1, jj = p[length]; j < jj; j++) {\n                                p[j] *= (j % 2) ? fx : fy;\n                            }\n                        }\n                    }\n                    var dim2 = pathDimensions(path);\n                    dx = ncx - dim2.x - dim2.width / 2;\n                    dy = ncy - dim2.y - dim2.height / 2;\n                    path[0][1] += dx;\n                    path[0][2] += dy;\n                    this.attr({path: path});\n                break;\n            }\n            if (this.type in {text: 1, image:1} && (dirx != 1 || diry != 1)) {\n                if (this.transformations) {\n                    this.transformations[2] = \"scale(\"[concat](dirx, \",\", diry, \")\");\n                    setAttr(this.node, \"transform\", this.transformations[join](S));\n                    dx = (dirx == -1) ? -a.x - (neww || 0) : a.x;\n                    dy = (diry == -1) ? -a.y - (newh || 0) : a.y;\n                    this.attr({x: dx, y: dy});\n                    a.fx = dirx - 1;\n                    a.fy = diry - 1;\n                } else {\n                    this.node.filterMatrix = ms + \".Matrix(M11=\"[concat](dirx,\n                        \", M12=0, M21=0, M22=\", diry,\n                        \", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')\");\n                    s.filter = (this.node.filterMatrix || E) + (this.node.filterOpacity || E);\n                }\n            } else {\n                if (this.transformations) {\n                    this.transformations[2] = E;\n                    setAttr(this.node, \"transform\", this.transformations[join](S));\n                    a.fx = 0;\n                    a.fy = 0;\n                } else {\n                    this.node.filterMatrix = E;\n                    s.filter = (this.node.filterMatrix || E) + (this.node.filterOpacity || E);\n                }\n            }\n            a.scale = [x, y, cx, cy][join](S);\n            this._.sx = x;\n            this._.sy = y;\n        }\n        return this;\n    };\n    elproto.clone = function () {\n        if (this.removed) {\n            return null;\n        }\n        var attr = this.attr();\n        delete attr.scale;\n        delete attr.translation;\n        return this.paper[this.type]().attr(attr);\n    };\n    var curveslengths = {},\n    getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\n        // Is this a straight line?\n        // Added for huge speed improvements\n        if ( p1x === c1x && p1y === c1y && c2x === p2x && c2y == p2y ) {\n            var dx = p2x - p1x, dy = p2y - p1y;\n            var totalLength = Math.sqrt( dx * dx + dy * dy );\n\n            if ( length == null ) {\n                return totalLength;\n            } else {\n                var fract = length / totalLength;\n                return {\n                    start: { x: p1x, y: p1y },\n                    m: { x: p1x, y: p1y },\n                    n: { x: p2x, y: p2y },\n                    end: { x: p2x, y: p2y },\n                    x: p1x + fract * dx,\n                    y: p1y + fract * dy,\n                    alpha: (90 - math.atan(dx / dy) * 180 / PI)\n                };\n            }\n        }\n\n        var len = 0,\n            precision = 100,\n            name = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y].join(),\n            cache = curveslengths[name],\n            old, dot;\n        !cache && (curveslengths[name] = cache = {data: []});\n        cache.timer && clearTimeout(cache.timer);\n        cache.timer = setTimeout(function () {delete curveslengths[name];}, 2000);\n        if (length != null) {\n            var total = getPointAtSegmentLength(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\n            precision = ~~total * 10;\n        }\n        for (var i = 0; i < precision + 1; i++) {\n            if (cache.data[length] > i) {\n                dot = cache.data[i * precision];\n            } else {\n                dot = R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, i / precision);\n                cache.data[i] = dot;\n            }\n            i && (len += pow(pow(old.x - dot.x, 2) + pow(old.y - dot.y, 2), .5));\n            if (length != null && len >= length) {\n                return dot;\n            }\n            old = dot;\n        }\n        if (length == null) {\n            return len;\n        }\n    },\n    getLengthFactory = function (istotal, subpath) {\n        return function (path, length, onlystart) {\n            path = path2curve(path);\n            var x, y, p, l, sp = \"\", subpaths = {}, point,\n                len = 0;\n            for (var i = 0, ii = path.length; i < ii; i++) {\n                p = path[i];\n                if (p[0] == \"M\") {\n                    x = +p[1];\n                    y = +p[2];\n                } else {\n                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                    if (len + l > length) {\n                        if (subpath && !subpaths.start) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            sp += [\"C\", point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\n                            if (onlystart) {return sp;}\n                            subpaths.start = sp;\n                            sp = [\"M\", point.x, point.y + \"C\", point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]][join]();\n                            len += l;\n                            x = +p[5];\n                            y = +p[6];\n                            continue;\n                        }\n                        if (!istotal && !subpath) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            return {x: point.x, y: point.y, alpha: point.alpha};\n                        }\n                    }\n                    len += l;\n                    x = +p[5];\n                    y = +p[6];\n                }\n                sp += p;\n            }\n            subpaths.end = sp;\n            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[1], p[2], p[3], p[4], p[5], p[6], 1);\n            point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});\n            return point;\n        };\n    };\n    var getTotalLength = getLengthFactory(1),\n        getPointAtLength = getLengthFactory(),\n        getSubpathsAtLength = getLengthFactory(0, 1);\n    elproto.getTotalLength = function () {\n        if (this.type != \"path\") {return;}\n        if (this.node.getTotalLength) {\n            return this.node.getTotalLength();\n        }\n        return getTotalLength(this.attrs.path);\n    };\n    elproto.getPointAtLength = function (length) {\n        if (this.type != \"path\") {return;}\n        return getPointAtLength(this.attrs.path, length);\n    };\n    elproto.getSubpath = function (from, to) {\n        if (this.type != \"path\") {return;}\n        if (abs(this.getTotalLength() - to) < \"1e-6\") {\n            return getSubpathsAtLength(this.attrs.path, from).end;\n        }\n        var a = getSubpathsAtLength(this.attrs.path, to, 1);\n        return from ? getSubpathsAtLength(a, from).end : a;\n    };\n\n    // animation easing formulas\n    R.easing_formulas = {\n        linear: function (n) {\n            return n;\n        },\n        \"<\": function (n) {\n            return pow(n, 3);\n        },\n        \">\": function (n) {\n            return pow(n - 1, 3) + 1;\n        },\n        \"<>\": function (n) {\n            n = n * 2;\n            if (n < 1) {\n                return pow(n, 3) / 2;\n            }\n            n -= 2;\n            return (pow(n, 3) + 2) / 2;\n        },\n        backIn: function (n) {\n            var s = 1.70158;\n            return n * n * ((s + 1) * n - s);\n        },\n        backOut: function (n) {\n            n = n - 1;\n            var s = 1.70158;\n            return n * n * ((s + 1) * n + s) + 1;\n        },\n        elastic: function (n) {\n            if (n == 0 || n == 1) {\n                return n;\n            }\n            var p = .3,\n                s = p / 4;\n            return pow(2, -10 * n) * math.sin((n - s) * (2 * PI) / p) + 1;\n        },\n        bounce: function (n) {\n            var s = 7.5625,\n                p = 2.75,\n                l;\n            if (n < (1 / p)) {\n                l = s * n * n;\n            } else {\n                if (n < (2 / p)) {\n                    n -= (1.5 / p);\n                    l = s * n * n + .75;\n                } else {\n                    if (n < (2.5 / p)) {\n                        n -= (2.25 / p);\n                        l = s * n * n + .9375;\n                    } else {\n                        n -= (2.625 / p);\n                        l = s * n * n + .984375;\n                    }\n                }\n            }\n            return l;\n        }\n    };\n\n    var animationElements = [],\n        animation = function () {\n            var Now = +new Date;\n            for (var l = 0; l < animationElements[length]; l++) {\n                var e = animationElements[l];\n                if (e.stop || e.el.removed) {\n                    continue;\n                }\n                var time = Now - e.start,\n                    ms = e.ms,\n                    easing = e.easing,\n                    from = e.from,\n                    diff = e.diff,\n                    to = e.to,\n                    t = e.t,\n                    that = e.el,\n                    set = {},\n                    now;\n                if (time < ms) {\n                    var pos = easing(time / ms);\n                    for (var attr in from) if (from[has](attr)) {\n                        switch (availableAnimAttrs[attr]) {\n                            case \"along\":\n                                now = pos * ms * diff[attr];\n                                to.back && (now = to.len - now);\n                                var point = getPointAtLength(to[attr], now);\n                                that.translate(diff.sx - diff.x || 0, diff.sy - diff.y || 0);\n                                diff.x = point.x;\n                                diff.y = point.y;\n                                that.translate(point.x - diff.sx, point.y - diff.sy);\n                                to.rot && that.rotate(diff.r + point.alpha, point.x, point.y);\n                                break;\n                            case nu:\n                                now = +from[attr] + pos * ms * diff[attr];\n                                break;\n                            case \"colour\":\n                                now = \"rgb(\" + [\n                                    upto255(round(from[attr].r + pos * ms * diff[attr].r)),\n                                    upto255(round(from[attr].g + pos * ms * diff[attr].g)),\n                                    upto255(round(from[attr].b + pos * ms * diff[attr].b))\n                                ][join](\",\") + \")\";\n                                break;\n                            case \"path\":\n                                now = [];\n                                for (var i = 0, ii = from[attr][length]; i < ii; i++) {\n                                    now[i] = [from[attr][i][0]];\n                                    for (var j = 1, jj = from[attr][i][length]; j < jj; j++) {\n                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                    }\n                                    now[i] = now[i][join](S);\n                                }\n                                now = now[join](S);\n                                break;\n                            case \"csv\":\n                                switch (attr) {\n                                    case \"translation\":\n                                        var x = pos * ms * diff[attr][0] - t.x,\n                                            y = pos * ms * diff[attr][1] - t.y;\n                                        t.x += x;\n                                        t.y += y;\n                                        now = x + S + y;\n                                    break;\n                                    case \"rotation\":\n                                        now = +from[attr][0] + pos * ms * diff[attr][0];\n                                        from[attr][1] && (now += \",\" + from[attr][1] + \",\" + from[attr][2]);\n                                    break;\n                                    case \"scale\":\n                                        now = [+from[attr][0] + pos * ms * diff[attr][0], +from[attr][1] + pos * ms * diff[attr][1], (2 in to[attr] ? to[attr][2] : E), (3 in to[attr] ? to[attr][3] : E)][join](S);\n                                    break;\n                                    case \"clip-rect\":\n                                        now = [];\n                                        i = 4;\n                                        while (i--) {\n                                            now[i] = +from[attr][i] + pos * ms * diff[attr][i];\n                                        }\n                                    break;\n                                }\n                                break;\n                            default:\n                              var from2 = [].concat(from[attr]);\n                                now = [];\n                                i = that.paper.customAttributes[attr].length;\n                                while (i--) {\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\n                                }\n                                break;\n                        }\n                        set[attr] = now;\n                    }\n                    that.attr(set);\n                    that._run && that._run.call(that);\n                } else {\n                    if (to.along) {\n                        point = getPointAtLength(to.along, to.len * !to.back);\n                        that.translate(diff.sx - (diff.x || 0) + point.x - diff.sx, diff.sy - (diff.y || 0) + point.y - diff.sy);\n                        to.rot && that.rotate(diff.r + point.alpha, point.x, point.y);\n                    }\n                    (t.x || t.y) && that.translate(-t.x, -t.y);\n                    to.scale && (to.scale += E);\n                    that.attr(to);\n                    animationElements.splice(l--, 1);\n                }\n            }\n            R.svg && that && that.paper && that.paper.safari();\n            animationElements[length] && setTimeout(animation);\n        },\n        keyframesRun = function (attr, element, time, prev, prevcallback) {\n            var dif = time - prev;\n            element.timeouts.push(setTimeout(function () {\n                R.is(prevcallback, \"function\") && prevcallback.call(element);\n                element.animate(attr, dif, attr.easing);\n            }, prev));\n        },\n        upto255 = function (color) {\n            return mmax(mmin(color, 255), 0);\n        },\n        translate = function (x, y) {\n            if (x == null) {\n                return {x: this._.tx, y: this._.ty, toString: x_y};\n            }\n            this._.tx += +x;\n            this._.ty += +y;\n            switch (this.type) {\n                case \"circle\":\n                case \"ellipse\":\n                    this.attr({cx: +x + this.attrs.cx, cy: +y + this.attrs.cy});\n                    break;\n                case \"rect\":\n                case \"image\":\n                case \"text\":\n                    this.attr({x: +x + this.attrs.x, y: +y + this.attrs.y});\n                    break;\n                case \"path\":\n                    var path = pathToRelative(this.attrs.path);\n                    path[0][1] += +x;\n                    path[0][2] += +y;\n                    this.attr({path: path});\n                break;\n            }\n            return this;\n        };\n    elproto.animateWith = function (element, params, ms, easing, callback) {\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\n            if (animationElements[i].el.id == element.id) {\n                params.start = animationElements[i].start;\n            }\n        }\n        return this.animate(params, ms, easing, callback);\n    };\n    elproto.animateAlong = along();\n    elproto.animateAlongBack = along(1);\n    function along(isBack) {\n        return function (path, ms, rotate, callback) {\n            var params = {back: isBack};\n            R.is(rotate, \"function\") ? (callback = rotate) : (params.rot = rotate);\n            path && path.constructor == Element && (path = path.attrs.path);\n            path && (params.along = path);\n            return this.animate(params, ms, callback);\n        };\n    }\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n        var cx = 3 * p1x,\n            bx = 3 * (p2x - p1x) - cx,\n            ax = 1 - cx - bx,\n            cy = 3 * p1y,\n            by = 3 * (p2y - p1y) - cy,\n            ay = 1 - cy - by;\n        function sampleCurveX(t) {\n            return ((ax * t + bx) * t + cx) * t;\n        }\n        function solve(x, epsilon) {\n            var t = solveCurveX(x, epsilon);\n            return ((ay * t + by) * t + cy) * t;\n        }\n        function solveCurveX(x, epsilon) {\n            var t0, t1, t2, x2, d2, i;\n            for(t2 = x, i = 0; i < 8; i++) {\n                x2 = sampleCurveX(t2) - x;\n                if (abs(x2) < epsilon) {\n                    return t2;\n                }\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\n                if (abs(d2) < 1e-6) {\n                    break;\n                }\n                t2 = t2 - x2 / d2;\n            }\n            t0 = 0;\n            t1 = 1;\n            t2 = x;\n            if (t2 < t0) {\n                return t0;\n            }\n            if (t2 > t1) {\n                return t1;\n            }\n            while (t0 < t1) {\n                x2 = sampleCurveX(t2);\n                if (abs(x2 - x) < epsilon) {\n                    return t2;\n                }\n                if (x > x2) {\n                    t0 = t2;\n                } else {\n                    t1 = t2;\n                }\n                t2 = (t1 - t0) / 2 + t0;\n            }\n            return t2;\n        }\n        return solve(t, 1 / (200 * duration));\n    }\n    elproto.onAnimation = function (f) {\n        this._run = f || 0;\n        return this;\n    };\n    elproto.animate = function (params, ms, easing, callback) {\n        var element = this;\n        element.timeouts = element.timeouts || [];\n        if (R.is(easing, \"function\") || !easing) {\n            callback = easing || null;\n        }\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var from = {},\n            to = {},\n            animateable = false,\n            diff = {};\n        for (var attr in params) if (params[has](attr)) {\n            if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {\n                animateable = true;\n                from[attr] = element.attr(attr);\n                (from[attr] == null) && (from[attr] = availableAttrs[attr]);\n                to[attr] = params[attr];\n                switch (availableAnimAttrs[attr]) {\n                    case \"along\":\n                        var len = getTotalLength(params[attr]);\n                        var point = getPointAtLength(params[attr], len * !!params.back);\n                        var bb = element.getBBox();\n                        diff[attr] = len / ms;\n                        diff.tx = bb.x;\n                        diff.ty = bb.y;\n                        diff.sx = point.x;\n                        diff.sy = point.y;\n                        to.rot = params.rot;\n                        to.back = params.back;\n                        to.len = len;\n                        params.rot && (diff.r = toFloat(element.rotate()) || 0);\n                        break;\n                    case nu:\n                        diff[attr] = (to[attr] - from[attr]) / ms;\n                        break;\n                    case \"colour\":\n                        from[attr] = R.getRGB(from[attr]);\n                        var toColour = R.getRGB(to[attr]);\n                        diff[attr] = {\n                            r: (toColour.r - from[attr].r) / ms,\n                            g: (toColour.g - from[attr].g) / ms,\n                            b: (toColour.b - from[attr].b) / ms\n                        };\n                        break;\n                    case \"path\":\n                        var pathes = path2curve(from[attr], to[attr]);\n                        from[attr] = pathes[0];\n                        var toPath = pathes[1];\n                        diff[attr] = [];\n                        for (var i = 0, ii = from[attr][length]; i < ii; i++) {\n                            diff[attr][i] = [0];\n                            for (var j = 1, jj = from[attr][i][length]; j < jj; j++) {\n                                diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\n                            }\n                        }\n                        break;\n                    case \"csv\":\n                        var values = Str(params[attr])[split](separator),\n                            from2 = Str(from[attr])[split](separator);\n                        switch (attr) {\n                            case \"translation\":\n                                from[attr] = [0, 0];\n                                diff[attr] = [values[0] / ms, values[1] / ms];\n                            break;\n                            case \"rotation\":\n                                from[attr] = (from2[1] == values[1] && from2[2] == values[2]) ? from2 : [0, values[1], values[2]];\n                                diff[attr] = [(values[0] - from[attr][0]) / ms, 0, 0];\n                            break;\n                            case \"scale\":\n                                params[attr] = values;\n                                from[attr] = Str(from[attr])[split](separator);\n                                diff[attr] = [(values[0] - from[attr][0]) / ms, (values[1] - from[attr][1]) / ms, 0, 0];\n                            break;\n                            case \"clip-rect\":\n                                from[attr] = Str(from[attr])[split](separator);\n                                diff[attr] = [];\n                                i = 4;\n                                while (i--) {\n                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;\n                                }\n                            break;\n                        }\n                        to[attr] = values;\n                        break;\n                    default:\n                        values = [].concat(params[attr]);\n                        from2 = [].concat(from[attr]);\n                        diff[attr] = [];\n                        i = element.paper.customAttributes[attr][length];\n                        while (i--) {\n                            diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;\n                        }\n                        break;\n                }\n            }\n        }\n        if (!animateable) {\n            var attrs = [],\n                lastcall;\n            for (var key in params) if (params[has](key) && animKeyFrames.test(key)) {\n                attr = {value: params[key]};\n                key == \"from\" && (key = 0);\n                key == \"to\" && (key = 100);\n                attr.key = toInt(key, 10);\n                attrs.push(attr);\n            }\n            attrs.sort(sortByKey);\n            if (attrs[0].key) {\n                attrs.unshift({key: 0, value: element.attrs});\n            }\n            for (i = 0, ii = attrs[length]; i < ii; i++) {\n                keyframesRun(attrs[i].value, element, ms / 100 * attrs[i].key, ms / 100 * (attrs[i - 1] && attrs[i - 1].key || 0), attrs[i - 1] && attrs[i - 1].value.callback);\n            }\n            lastcall = attrs[attrs[length] - 1].value.callback;\n            if (lastcall) {\n                element.timeouts.push(setTimeout(function () {lastcall.call(element);}, ms));\n            }\n        } else {\n            var easyeasy = R.easing_formulas[easing];\n            if (!easyeasy) {\n                easyeasy = Str(easing).match(bezierrg);\n                if (easyeasy && easyeasy[length] == 5) {\n                    var curve = easyeasy;\n                    easyeasy = function (t) {\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\n                    };\n                } else {\n                    easyeasy = function (t) {\n                        return t;\n                    };\n                }\n            }\n            animationElements.push({\n                start: params.start || +new Date,\n                ms: ms,\n                easing: easyeasy,\n                from: from,\n                diff: diff,\n                to: to,\n                el: element,\n                t: {x: 0, y: 0}\n            });\n            R.is(callback, \"function\") && (element._ac = setTimeout(function () {\n                callback.call(element);\n            }, ms));\n            animationElements[length] == 1 && setTimeout(animation);\n        }\n        return this;\n    };\n    elproto.stop = function () {\n        for (var i = 0; i < animationElements.length; i++) {\n            animationElements[i].el.id == this.id && animationElements.splice(i--, 1);\n        }\n        for (i = 0, ii = this.timeouts && this.timeouts.length; i < ii; i++) {\n            clearTimeout(this.timeouts[i]);\n        }\n        this.timeouts = [];\n        clearTimeout(this._ac);\n        delete this._ac;\n        return this;\n    };\n    elproto.translate = function (x, y) {\n        return this.attr({translation: x + \" \" + y});\n    };\n    elproto[toString] = function () {\n        return \"Rapha\\xebl\\u2019s object\";\n    };\n    R.ae = animationElements;\n\n    // Set\n    var Set = function (items) {\n        this.items = [];\n        this[length] = 0;\n        this.type = \"set\";\n        if (items) {\n            for (var i = 0, ii = items[length]; i < ii; i++) {\n                if (items[i] && (items[i].constructor == Element || items[i].constructor == Set)) {\n                    this[this.items[length]] = this.items[this.items[length]] = items[i];\n                    this[length]++;\n                }\n            }\n        }\n    };\n    Set[proto][push] = function () {\n        var item,\n            len;\n        for (var i = 0, ii = arguments[length]; i < ii; i++) {\n            item = arguments[i];\n            if (item && (item.constructor == Element || item.constructor == Set)) {\n                len = this.items[length];\n                this[len] = this.items[len] = item;\n                this[length]++;\n            }\n        }\n        return this;\n    };\n    Set[proto].pop = function () {\n        delete this[this[length]--];\n        return this.items.pop();\n    };\n    for (var method in elproto) if (elproto[has](method)) {\n        Set[proto][method] = (function (methodname) {\n            return function () {\n                for (var i = 0, ii = this.items[length]; i < ii; i++) {\n                    this.items[i][methodname][apply](this.items[i], arguments);\n                }\n                return this;\n            };\n        })(method);\n    }\n    Set[proto].attr = function (name, value) {\n        if (name && R.is(name, array) && R.is(name[0], \"object\")) {\n            for (var j = 0, jj = name[length]; j < jj; j++) {\n                this.items[j].attr(name[j]);\n            }\n        } else {\n            for (var i = 0, ii = this.items[length]; i < ii; i++) {\n                this.items[i].attr(name, value);\n            }\n        }\n        return this;\n    };\n    Set[proto].animate = function (params, ms, easing, callback) {\n        (R.is(easing, \"function\") || !easing) && (callback = easing || null);\n        var len = this.items[length],\n            i = len,\n            item,\n            set = this,\n            collector;\n        callback && (collector = function () {\n            !--len && callback.call(set);\n        });\n        easing = R.is(easing, string) ? easing : collector;\n        item = this.items[--i].animate(params, ms, easing, collector);\n        while (i--) {\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, params, ms, easing, collector);\n        }\n        return this;\n    };\n    Set[proto].insertAfter = function (el) {\n        var i = this.items[length];\n        while (i--) {\n            this.items[i].insertAfter(el);\n        }\n        return this;\n    };\n    Set[proto].getBBox = function () {\n        var x = [],\n            y = [],\n            w = [],\n            h = [];\n        for (var i = this.items[length]; i--;) {\n            var box = this.items[i].getBBox();\n            x[push](box.x);\n            y[push](box.y);\n            w[push](box.x + box.width);\n            h[push](box.y + box.height);\n        }\n        x = mmin[apply](0, x);\n        y = mmin[apply](0, y);\n        return {\n            x: x,\n            y: y,\n            width: mmax[apply](0, w) - x,\n            height: mmax[apply](0, h) - y\n        };\n    };\n    Set[proto].clone = function (s) {\n        s = new Set;\n        for (var i = 0, ii = this.items[length]; i < ii; i++) {\n            s[push](this.items[i].clone());\n        }\n        return s;\n    };\n\n    R.registerFont = function (font) {\n        if (!font.face) {\n            return font;\n        }\n        this.fonts = this.fonts || {};\n        var fontcopy = {\n                w: font.w,\n                face: {},\n                glyphs: {}\n            },\n            family = font.face[\"font-family\"];\n        for (var prop in font.face) if (font.face[has](prop)) {\n            fontcopy.face[prop] = font.face[prop];\n        }\n        if (this.fonts[family]) {\n            this.fonts[family][push](fontcopy);\n        } else {\n            this.fonts[family] = [fontcopy];\n        }\n        if (!font.svg) {\n            fontcopy.face[\"units-per-em\"] = toInt(font.face[\"units-per-em\"], 10);\n            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {\n                var path = font.glyphs[glyph];\n                fontcopy.glyphs[glyph] = {\n                    w: path.w,\n                    k: {},\n                    d: path.d && \"M\" + path.d[rp](/[mlcxtrv]/g, function (command) {\n                            return {l: \"L\", c: \"C\", x: \"z\", t: \"m\", r: \"l\", v: \"c\"}[command] || \"M\";\n                        }) + \"z\"\n                };\n                if (path.k) {\n                    for (var k in path.k) if (path[has](k)) {\n                        fontcopy.glyphs[glyph].k[k] = path.k[k];\n                    }\n                }\n            }\n        }\n        return font;\n    };\n    paperproto.getFont = function (family, weight, style, stretch) {\n        stretch = stretch || \"normal\";\n        style = style || \"normal\";\n        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;\n        if (!R.fonts) {\n            return;\n        }\n        var font = R.fonts[family];\n        if (!font) {\n            var name = new RegExp(\"(^|\\\\s)\" + family[rp](/[^\\w\\d\\s+!~.:_-]/g, E) + \"(\\\\s|$)\", \"i\");\n            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {\n                if (name.test(fontName)) {\n                    font = R.fonts[fontName];\n                    break;\n                }\n            }\n        }\n        var thefont;\n        if (font) {\n            for (var i = 0, ii = font[length]; i < ii; i++) {\n                thefont = font[i];\n                if (thefont.face[\"font-weight\"] == weight && (thefont.face[\"font-style\"] == style || !thefont.face[\"font-style\"]) && thefont.face[\"font-stretch\"] == stretch) {\n                    break;\n                }\n            }\n        }\n        return thefont;\n    };\n    paperproto.print = function (x, y, string, font, size, origin, letter_spacing) {\n        origin = origin || \"middle\"; // baseline|middle\n        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);\n        var out = this.set(),\n            letters = Str(string)[split](E),\n            shift = 0,\n            path = E,\n            scale;\n        R.is(font, string) && (font = this.getFont(font));\n        if (font) {\n            scale = (size || 16) / font.face[\"units-per-em\"];\n            var bb = font.face.bbox.split(separator),\n                top = +bb[0],\n                height = +bb[1] + (origin == \"baseline\" ? bb[3] - bb[1] + (+font.face.descent) : (bb[3] - bb[1]) / 2);\n            for (var i = 0, ii = letters[length]; i < ii; i++) {\n                var prev = i && font.glyphs[letters[i - 1]] || {},\n                    curr = font.glyphs[letters[i]];\n                shift += i ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;\n                curr && curr.d && out[push](this.path(curr.d).attr({fill: \"#000\", stroke: \"none\", translation: [shift, 0]}));\n            }\n            out.scale(scale, scale, top, height).translate(x - top, y - height);\n        }\n        return out;\n    };\n\n    R.format = function (token, params) {\n        var args = R.is(params, array) ? [0][concat](params) : arguments;\n        token && R.is(token, string) && args[length] - 1 && (token = token[rp](formatrg, function (str, i) {\n            return args[++i] == null ? E : args[i];\n        }));\n        return token || E;\n    };\n    R.ninja = function () {\n        oldRaphael.was ? (win.Raphael = oldRaphael.is) : Raphael = undefined;\n        return R;\n    };\n    R.el = elproto;\n    R.st = Set[proto];\n\n    module.exports = R;\n})();","/**\n * Color constants we use throughout Perseus (originally on KhanUtil).\n *\n * Note that if the color palette changes substantially, it may also need to be\n * updated in khan-exercises and cherry-picked into graphie-to-png's\n * khan-exercises submodule, as graphie-to-png still relies on the palette\n * provided on KhanUtil.\n */\nconst KhanColors = {\n    BLUE: \"#6495ED\",\n    ORANGE: \"#FFA500\",\n    PINK: \"#FF00AF\",\n    GREEN: \"#28AE7B\",\n    PURPLE: \"#9D38BD\",\n    RED: \"#DF0030\",\n    GRAY: \"gray\",\n    BLACK: \"black\",\n    LIGHT_BLUE: \"#9AB8ED\",\n    LIGHT_ORANGE: \"#EDD19B\",\n    LIGHT_PINK: \"#ED9BD3\",\n    LIGHT_GREEN: \"#9BEDCE\",\n    LIGHT_PURPLE: \"#DA9BED\",\n    LIGHT_RED: \"#ED9AAC\",\n    LIGHT_GRAY: \"#ED9B9B\",\n    LIGHT_BLACK: \"#ED9B9B\",\n    GRAY10: \"#D6D6D6\",\n    GRAY20: \"#CDCDCD\",\n    GRAY30: \"#B3B3B3\",\n    GRAY40: \"#9A9A9A\",\n    GRAY50: \"#808080\",\n    GRAY60: \"#666666\",\n    GRAY70: \"#4D4D4D\",\n    GRAY80: \"#333333\",\n    GRAY90: \"#1A1A1A\",\n    BLUE_A: \"#CCFAFF\",\n    BLUE_B: \"#80F6FF\",\n    BLUE_C: \"#63D9EA\",\n    BLUE_D: \"#11ACCD\",\n    BLUE_E: \"#0C7F99\",\n    TEAL_A: \"#94FFF5\",\n    TEAL_B: \"#26EDD5\",\n    TEAL_C: \"#01D1C1\",\n    TEAL_D: \"#01A995\",\n    TEAL_E: \"#208170\",\n    GREEN_A: \"#B6FFB0\",\n    GREEN_B: \"#8AF281\",\n    GREEN_C: \"#74CF70\",\n    GREEN_D: \"#1FAB54\",\n    GREEN_E: \"#0D923F\",\n    GOLD_A: \"#FFD0A9\",\n    GOLD_B: \"#FFBB71\",\n    GOLD_C: \"#FF9C39\",\n    GOLD_D: \"#E07D10\",\n    GOLD_E: \"#A75A05\",\n    RED_A: \"#FCA9A9\",\n    RED_B: \"#FF8482\",\n    RED_C: \"#F9685D\",\n    RED_D: \"#E84D39\",\n    RED_E: \"#BC2612\",\n    MAROON_A: \"#FFBDE0\",\n    MAROON_B: \"#FF92C6\",\n    MAROON_C: \"#ED5FA6\",\n    MAROON_D: \"#CA337C\",\n    MAROON_E: \"#9E034E\",\n    PURPLE_A: \"#DDD7FF\",\n    PURPLE_B: \"#C6B9FC\",\n    PURPLE_C: \"#AA87FF\",\n    PURPLE_D: \"#7854AB\",\n    PURPLE_E: \"#543B78\",\n    MINT_A: \"#F5F9E8\",\n    MINT_B: \"#EDF2DF\",\n    MINT_C: \"#E0E5CC\",\n    GRAY_A: \"#F6F7F7\",\n    GRAY_B: \"#F0F1F2\",\n    GRAY_C: \"#E3E5E6\",\n    GRAY_D: \"#D6D8DA\",\n    GRAY_E: \"#BABEC2\",\n    GRAY_F: \"#888D93\",\n    GRAY_G: \"#626569\",\n    GRAY_H: \"#3B3E40\",\n    GRAY_I: \"#21242C\",\n    KA_BLUE: \"#314453\",\n    KA_GREEN: \"#71B307\",\n    // Don't actually use _BACKGROUND! Make things transparent instead. The\n    // background color used in exercises is subject to change at the whim\n    // of any redesigns.\n    _BACKGROUND: \"#FDFDFD\", // TODO(eater): Get rid of this altogether.\n    INTERACTING: \"#71B307\", // KA_GREEN\n    INTERACTIVE: \"#71B307\", // KA_GREEN\n    DYNAMIC: \"#6495ED\", // BLUE\n} as const;\n\nexport default KhanColors;\n","import {RenderStateRoot} from \"@khanacademy/wonder-blocks-core\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nexport default function render<ElementType extends React.ElementType>(\n    element: React.ReactNode,\n    container: HTMLElement,\n    callback?: () => void,\n): React.ElementRef<ElementType> {\n    // TODO(LP-11406): Replace this, or callers, with React Portal\n    // @ts-expect-error [FEI-5003] - TS2322 - Type 'void' is not assignable to type 'ElementRef<ElementType>'.\n    // eslint-disable-next-line no-restricted-syntax\n    return ReactDOM.render(\n        /**\n         * `RenderStateRoot` is responsible for tracking whether it's\n         * the initial render or subsequent renders.  It's used by\n         * `useUniqueId` and will be used by `UniqueIDProvider` and\n         * `WithSSRPlaceholder` in the future.  We're placing it as\n         * high up in the render tree as possible to ensure that any\n         * components using that hook or those components will function\n         * correctly.\n         */\n        <RenderStateRoot throwIfNested={false}>{element}</RenderStateRoot>,\n        container,\n        callback,\n    );\n}\n","import $ from \"jquery\";\nimport * as React from \"react\";\n\nimport {getDependencies} from \"../dependencies\";\n\nimport KhanMath from \"./math\";\nimport reactRender from \"./react-render\";\n\ndeclare const MathJax: any;\n\nfunction findChildOrAdd(elem: any, className: string) {\n    const $child = $(elem).find(\".\" + className);\n    if ($child.length === 0) {\n        return $(\"<span>\").addClass(className).appendTo($(elem));\n    }\n    return $child;\n}\n\nfunction doCallback(\n    elem: HTMLElement,\n    callback: (() => unknown) | (() => void),\n) {\n    let tries = 0;\n    (function check() {\n        const height = elem.scrollHeight;\n        // Heuristic to guess if the font has kicked in\n        // so we have box metrics (magic number ick,\n        // but this seems to work mostly-consistently)\n        if (height > 18 || tries >= 10) {\n            callback();\n        } else {\n            tries++;\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(check, 100);\n        }\n    })();\n}\n\nexport default {\n    // Process a node and add math inside of it. This attempts to use KaTeX to\n    // format the math, and if that fails it falls back to MathJax.\n    //\n    // elem: The element which the math should be added to.\n    //\n    // text: The text that should be formatted inside of the node. If the node\n    //       has already had math formatted inside of it before, this doesn't\n    //       have to be provided. If this is not provided, and the node hasn't\n    //       been formatted before, the text content of the node is used.\n    //\n    // force: (optional) if the node has been processed before, then it will\n    //        not be formatted again, unless this argument is true\n    //\n    // callback: (optional) a callback to be run after the math has been\n    //           processed\n    processMath: async function (\n        elem: HTMLElement,\n        text: string,\n        force?: boolean,\n        callback?: () => unknown,\n    ) {\n        const $elem = $(elem);\n\n        // Only process if it hasn't been done before, or it is forced\n        if ($elem.attr(\"data-math-formula\") == null || force) {\n            const $katexHolder = findChildOrAdd($elem, \"katex-holder\");\n            const $mathjaxHolder = findChildOrAdd($elem, \"mathjax-holder\");\n\n            // Search for MathJax-y script tags inside of the node. These are\n            // used by MathJax to denote the formula to be typeset. Before, we\n            // would update the formula by updating the contents of the script\n            // tag, which shouldn't happen any more, but we manage them just in\n            // case.\n            const script: HTMLElement | undefined = $mathjaxHolder.find(\n                \"script[type='math/tex']\",\n            )[0];\n\n            // If text wasn't provided, we look in two places\n            if (text == null) {\n                if ($elem.attr(\"data-math-formula\")) {\n                    // The old typeset formula\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'string | undefined' is not assignable to type 'string'.\n                    text = $elem.attr(\"data-math-formula\");\n                } else if (script) {\n                    // The contents of the <script> tag\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'text' does not exist on type 'HTMLElement'.\n                    text = script.text || script.textContent;\n                }\n            }\n\n            text = text != null ? text + \"\" : \"\";\n\n            // Attempt to clean up some of the math\n            text = KhanMath.cleanMath(text);\n\n            // Store the formula that we're using\n            $elem.attr(\"data-math-formula\", text);\n\n            const {TeX} = await getDependencies();\n            // We use createElement instead of JSX here because we can't name this file tex.tsx;\n            // that name is already taken.\n            reactRender(\n                React.createElement(TeX, {children: text}),\n                $katexHolder[0],\n                () => {\n                    if (callback) {\n                        doCallback(elem, callback);\n                    }\n                },\n            );\n        }\n    },\n\n    // Function to restore a node to a non-math-processed state\n    cleanupMath: function (elem: HTMLElement): HTMLElement {\n        const $elem = $(elem);\n\n        // Only mess with it if it's been processed before\n        if ($elem.attr(\"data-math-formula\")) {\n            // Remove MathJax remnants\n            if (typeof MathJax !== \"undefined\") {\n                const jax = MathJax.Hub.getJaxFor($elem.find(\"script\")[0]);\n                if (jax) {\n                    const e = jax.SourceElement();\n                    if (e.previousSibling && e.previousSibling.className) {\n                        jax.Remove();\n                    }\n                }\n            }\n\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            $elem.text($elem.attr(\"data-math-formula\"));\n            $elem.attr(\"data-math-formula\", null);\n            $elem.attr(\"data-math-type\", null);\n        }\n\n        return elem;\n    },\n\n    // Function to retrieve the formula of a typeset math node\n    retrieveMathFormula: function (elem: HTMLElement): any {\n        return $(elem).attr(\"data-math-formula\");\n    },\n};\n","/* eslint-disable @babel/no-invalid-this */\nimport {point as kpoint, vector as kvector} from \"@khanacademy/kmath\";\nimport $ from \"jquery\";\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport Raphael from \"raphael\";\nimport _ from \"underscore\";\n\n// Minify Raphael ourselves because IE8 has a problem with the 1.5.2 minified\n// release\n// http://groups.google.com/group/raphaeljs/browse_thread/thread/c34c75ad8d431544\n\nimport {Errors, Log} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport KhanColors from \"./colors\";\nimport KhanMath from \"./math\";\nimport Tex from \"./tex\";\n\nimport type {Coord} from \"../interactive2/types\";\n\nconst {processMath} = Tex;\n\n/* Convert cartesian coordinates [x, y] to polar coordinates [r,\n * theta], with theta in degrees, or in radians if angleInRadians is\n * specified.\n */\nfunction cartToPolar(coord: any, angleInRadians: any) {\n    const r = Math.sqrt(Math.pow(coord[0], 2) + Math.pow(coord[1], 2));\n    let theta = Math.atan2(coord[1], coord[0]);\n    // convert angle range from [-pi, pi] to [0, 2pi]\n    if (theta < 0) {\n        theta += 2 * Math.PI;\n    }\n    if (!angleInRadians) {\n        theta = (theta * 180) / Math.PI;\n    }\n    return [r, theta];\n}\n\nfunction polar(r: Array<never>, th: number) {\n    if (typeof r === \"number\") {\n        r = [r, r];\n    }\n    th = (th * Math.PI) / 180;\n    return [r[0] * Math.cos(th), r[1] * Math.sin(th)];\n}\n\nconst GraphUtils: any = {\n    unscaledSvgPath: function (points) {\n        // If this is an empty closed path, return \"\" instead of \"z\", which\n        // would give an error\n        if (points[0] === true) {\n            return \"\";\n        }\n        return $.map(points, function (point, i) {\n            if (point === true) {\n                return \"z\";\n            }\n            return (i === 0 ? \"M\" : \"L\") + point[0] + \" \" + point[1];\n        }).join(\"\");\n    },\n\n    getDistance: function (point1, point2) {\n        return kpoint.distanceToPoint(point1, point2);\n    },\n\n    /**\n     * Return the difference between two sets of coordinates\n     */\n    coordDiff: function (startCoord, endCoord) {\n        return _.map(endCoord, function (val, i) {\n            return endCoord[i] - startCoord[i];\n        });\n    },\n\n    /**\n     * Round the given coordinates to a given snap value\n     * (e.g., nearest 0.2 increment)\n     */\n    snapCoord: function (coord, snap) {\n        return _.map(coord, function (val, i) {\n            return KhanMath.roundToNearest(snap[i], val);\n        });\n    },\n\n    // Find the angle in degrees between two or three points\n    findAngle: function (point1, point2, vertex) {\n        if (vertex === undefined) {\n            const x = point1[0] - point2[0];\n            const y = point1[1] - point2[1];\n            if (!x && !y) {\n                return 0;\n            }\n            return (180 + (Math.atan2(-y, -x) * 180) / Math.PI + 360) % 360;\n        }\n        return (\n            GraphUtils.findAngle(point1, vertex) -\n            GraphUtils.findAngle(point2, vertex)\n        );\n    },\n\n    graphs: {},\n};\n\nconst Graphie = (GraphUtils.Graphie = function () {});\n\n_.extend(Graphie.prototype, {\n    cartToPolar: cartToPolar,\n    polar: polar,\n});\n\nconst labelDirections = {\n    center: [-0.5, -0.5],\n    above: [-0.5, -1.0],\n    \"above right\": [0.0, -1.0],\n    right: [0.0, -0.5],\n    \"below right\": [0.0, 0.0],\n    below: [-0.5, 0.0],\n    \"below left\": [-1.0, 0.0],\n    left: [-1.0, -0.5],\n    \"above left\": [-1.0, -1.0],\n} as const;\n\n/**\n * Safari applies some SVG-specific styles to things that are not SVGs, so we\n * need to exclude those styles from things that are not SVGs.\n *\n * To see this behavior in action, open https://codepen.io/anon/pen/zENEoa in\n * Safari.\n *\n * Usage `$.extend({}, someStyles, SVG_SPECIFIC_STYLE_MASK)`\n */\nconst SVG_SPECIFIC_STYLE_MASK = {\n    \"stroke-width\": null,\n} as const;\n\nGraphUtils.createGraphie = function (el: any) {\n    let xScale = 40;\n    let yScale = 40;\n    let xRange;\n    let yRange;\n\n    $(el).css(\"position\", \"relative\");\n    const raphael = Raphael(el);\n\n    // For a sometimes-reproducible IE8 bug; doesn't affect SVG browsers at all\n    $(el).children(\"div\").css(\"position\", \"absolute\");\n\n    // Set up some reasonable defaults\n    let currentStyle: any = {\n        \"stroke-width\": 2,\n        fill: \"none\",\n    };\n\n    const scaleVector = function (point: number | Coord) {\n        if (typeof point === \"number\") {\n            return scaleVector([point, point]);\n        }\n\n        const x = point[0];\n        const y = point[1];\n        return [x * xScale, y * yScale];\n    };\n\n    const scalePoint = function scalePoint(point: number | Coord): Coord {\n        if (typeof point === \"number\") {\n            return scalePoint([point, point]);\n        }\n\n        const x = point[0];\n        const y = point[1];\n        return [(x - xRange[0]) * xScale, (yRange[1] - y) * yScale];\n    };\n\n    const unscalePoint = function (point: Array<never>) {\n        if (typeof point === \"number\") {\n            return unscalePoint([point, point]);\n        }\n\n        const x = point[0];\n        const y = point[1];\n        return [x / xScale + xRange[0], yRange[1] - y / yScale];\n    };\n\n    const unscaleVector = function (point: Array<never>) {\n        if (typeof point === \"number\") {\n            return unscaleVector([point, point]);\n        }\n\n        return [point[0] / xScale, point[1] / yScale];\n    };\n\n    const setLabelMargins = function (span: any, size: Array<any>) {\n        const $span = $(span);\n        const direction = $span.data(\"labelDirection\");\n        let [width, height] = size;\n        // This can happen when a span\n        // is invisible but we still want to update the CSS. At worst, we will\n        // be off by a few pixels instead of in a different position entirely.\n        if (width === 0 && height === 0) {\n            [width, height] = [1, 1];\n            Log.log(\"Label size was 0x0 in graphie.js; using 1x1 instead\");\n        }\n        $span.css(\"visibility\", \"\");\n\n        if (typeof direction === \"number\") {\n            const x = Math.cos(direction);\n            const y = Math.sin(direction);\n\n            const scale = Math.min(\n                width / 2 / Math.abs(x),\n                height / 2 / Math.abs(y),\n            );\n\n            $span.css({\n                marginLeft: -width / 2 + x * scale,\n                marginTop: -height / 2 - y * scale,\n            });\n        } else {\n            const multipliers = labelDirections[direction || \"center\"];\n            $span.css({\n                marginLeft: Math.round(width * multipliers[0]),\n                marginTop: Math.round(height * multipliers[1]),\n            });\n        }\n    };\n\n    const svgPath = function (points: any, alreadyScaled) {\n        return $.map(points, function (point, i) {\n            if (point === true) {\n                return \"z\";\n            }\n            const scaled = alreadyScaled ? point : scalePoint(point);\n            return (\n                (i === 0 ? \"M\" : \"L\") +\n                KhanMath.bound(scaled[0]) +\n                \" \" +\n                KhanMath.bound(scaled[1])\n            );\n        }).join(\"\");\n    };\n\n    const svgParabolaPath = function (a: any, b: any, c: any) {\n        const computeParabola = function (x) {\n            return (a * x + b) * x + c;\n        };\n\n        // If points are collinear, plot a line instead\n        if (a === 0) {\n            const points = _.map(xRange, function (x) {\n                return [x, computeParabola(x)];\n            });\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n            return svgPath(points);\n        }\n\n        // Calculate x coordinates of points on parabola\n        const xVertex = -b / (2 * a);\n        const distToEdge = Math.max(\n            Math.abs(xVertex - xRange[0]),\n            Math.abs(xVertex - xRange[1]),\n        );\n\n        // To guarantee that drawn parabola to spans the viewport, use a point\n        // on the edge of the graph furtherest from the vertex\n        const xPoint = xVertex + distToEdge;\n\n        // Compute parabola and other point on the curve\n        const vertex = [xVertex, computeParabola(xVertex)];\n        const point = [xPoint, computeParabola(xPoint)];\n\n        // Calculate SVG 'control' point, defined by spec\n        const control = [vertex[0], vertex[1] - (point[1] - vertex[1])];\n\n        // Calculate mirror points across parabola's axis of symmetry\n        const dx = Math.abs(vertex[0] - point[0]);\n        const left = [vertex[0] - dx, point[1]];\n        const right = [vertex[0] + dx, point[1]];\n\n        // Scale and bound\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(point: number | Coord) => Coord' is not assignable to parameter of type 'Iteratee<any[][], any, any[]>'.\n        const points = _.map([left, control, right], scalePoint);\n        const values = _.map(_.flatten(points), KhanMath.bound);\n        return (\n            \"M\" +\n            values[0] +\n            \",\" +\n            values[1] +\n            \" Q\" +\n            values[2] +\n            \",\" +\n            values[3] +\n            \" \" +\n            values[4] +\n            \",\" +\n            values[5]\n        );\n    };\n\n    const svgSinusoidPath = function (a, b, c: any, d: any) {\n        // Plot a sinusoid of the form: f(x) = a * sin(b * x - c) + d\n        const quarterPeriod = Math.abs(Math.PI / (2 * b));\n\n        const computeSine = function (x: number) {\n            return a * Math.sin(b * x - c) + d;\n        };\n\n        const computeDerivative = function (x) {\n            return a * b * Math.cos(c - b * x);\n        };\n\n        const coordsForOffset = function (initial: number, i: number) {\n            // Return the cubic coordinates (including the two anchor and two\n            // control points) for the ith portion of the sinusoid.\n            const x0 = initial + quarterPeriod * i;\n            const x1 = x0 + quarterPeriod;\n\n            // Interpolate using derivative technique\n            // See: http://stackoverflow.com/questions/13932704/how-to-draw-sine-waves-with-svg-js\n            const xCoords = [\n                x0,\n                (x0 * 2) / 3 + (x1 * 1) / 3,\n                (x0 * 1) / 3 + (x1 * 2) / 3,\n                x1,\n            ];\n            const yCoords = [\n                computeSine(x0),\n                computeSine(x0) + (computeDerivative(x0) * (x1 - x0)) / 3,\n                computeSine(x1) - (computeDerivative(x1) * (x1 - x0)) / 3,\n                computeSine(x1),\n            ];\n\n            // Zip and scale\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(point: number | Coord) => Coord' is not assignable to parameter of type 'Iteratee<any[][], any, any[]>'.\n            return _.map(_.zip(xCoords, yCoords), scalePoint);\n        };\n\n        // How many quarter-periods do we need to span the graph?\n        const extent = xRange[1] - xRange[0];\n        const numQuarterPeriods = Math.ceil(extent / quarterPeriod) + 1;\n\n        // Find starting coordinate: first anchor point curve left of xRange[0]\n        let initial = c / b;\n        const distToEdge = initial - xRange[0];\n        initial -= quarterPeriod * Math.ceil(distToEdge / quarterPeriod);\n\n        // First portion of path is special-case, requiring move-to ('M')\n        let coords = coordsForOffset(initial, 0);\n        let path =\n            \"M\" +\n            coords[0][0] +\n            \",\" +\n            coords[0][1] +\n            \" C\" +\n            coords[1][0] +\n            \",\" +\n            coords[1][1] +\n            \" \" +\n            coords[2][0] +\n            \",\" +\n            coords[2][1] +\n            \" \" +\n            coords[3][0] +\n            \",\" +\n            coords[3][1];\n        for (let i = 1; i < numQuarterPeriods; i++) {\n            coords = coordsForOffset(initial, i);\n            path +=\n                \" C\" +\n                coords[1][0] +\n                \",\" +\n                coords[1][1] +\n                \" \" +\n                coords[2][0] +\n                \",\" +\n                coords[2][1] +\n                \" \" +\n                coords[3][0] +\n                \",\" +\n                coords[3][1];\n        }\n\n        return path;\n    };\n\n    // `svgPath` is independent of graphie range, so we export it independently\n    GraphUtils.svgPath = svgPath;\n\n    const processAttributes = function (attrs) {\n        const transformers = {\n            scale: function (scale) {\n                if (typeof scale === \"number\") {\n                    scale = [scale, scale];\n                }\n\n                xScale = scale[0];\n                yScale = scale[1];\n\n                // Update the canvas size\n                raphael.setSize(\n                    (xRange[1] - xRange[0]) * xScale,\n                    (yRange[1] - yRange[0]) * yScale,\n                );\n            },\n\n            clipRect: function (pair) {\n                const point = pair[0];\n                const size = pair[1];\n                point[1] += size[1]; // because our coordinates are flipped\n\n                return {\n                    \"clip-rect\": scalePoint(point)\n                        .concat(scaleVector(size))\n                        .join(\" \"),\n                };\n            },\n\n            strokeWidth: function (val) {\n                return {\"stroke-width\": parseFloat(val)};\n            },\n\n            rx: function (val) {\n                return {rx: scaleVector([val, 0])[0]};\n            },\n\n            ry: function (val) {\n                return {ry: scaleVector([0, val])[1]};\n            },\n\n            r: function (val) {\n                const scaled = scaleVector([val, val]);\n                return {rx: scaled[0], ry: scaled[1]};\n            },\n        } as const;\n\n        const processed: Record<string, any> = {};\n        $.each(attrs || {}, function (key, value) {\n            const transformer = transformers[key];\n\n            if (typeof transformer === \"function\") {\n                $.extend(processed, transformer(value));\n            } else {\n                const dasherized = key\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'replace' does not exist on type 'string | number | symbol'.\n                    .replace(/([A-Z]+)([A-Z][a-z])/g, \"$1-$2\")\n                    .replace(/([a-z\\d])([A-Z])/g, \"$1-$2\")\n                    .toLowerCase();\n                processed[dasherized] = value;\n            }\n        });\n\n        return processed;\n    };\n\n    const addArrowheads = function arrows(path: any) {\n        const type = path.constructor.prototype;\n\n        if (type === Raphael.el) {\n            if (\n                path.type === \"path\" &&\n                typeof path.arrowheadsDrawn === \"undefined\"\n            ) {\n                const w = path.attr(\"stroke-width\");\n                const s = 0.6 + 0.4 * w;\n                const l = path.getTotalLength();\n                const set = raphael.set();\n                const head = raphael.path(\n                    graphie.isMobile\n                        ? \"M-4,4 C-4,4 -0.25,0 -0.25,0 C-0.25,0 -4,-4 -4,-4\"\n                        : \"M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4\",\n                );\n                const end = path.getPointAtLength(l - 0.4);\n                const almostTheEnd = path.getPointAtLength(l - 0.75 * s);\n                const angle =\n                    (Math.atan2(\n                        end.y - almostTheEnd.y,\n                        end.x - almostTheEnd.x,\n                    ) *\n                        180) /\n                    Math.PI;\n                const attrs = path.attr();\n                delete attrs.path;\n\n                let subpath = path.getSubpath(0, l - 0.75 * s);\n                subpath = raphael.path(subpath).attr(attrs);\n                subpath.arrowheadsDrawn = true;\n                path.remove();\n\n                // For some unknown reason 0 doesn't work for the rotation\n                // origin so we use a tiny number.\n                head.rotate(angle, graphie.isMobile ? 1e-5 : 0.75, 0)\n                    .scale(s, s, 0.75, 0)\n                    .translate(almostTheEnd.x, almostTheEnd.y)\n                    .attr(attrs)\n                    .attr({\n                        \"stroke-linejoin\": \"round\",\n                        \"stroke-linecap\": \"round\",\n                    });\n\n                head.arrowheadsDrawn = true;\n                set.push(subpath);\n                set.push(head);\n                return set;\n            }\n        } else if (type === Raphael.st) {\n            for (let i = 0, l = path.items.length; i < l; i++) {\n                arrows(path.items[i]);\n            }\n        }\n        return path;\n    };\n\n    const drawingTools: any = {\n        circle: function (center, radius) {\n            return raphael.ellipse(\n                ...scalePoint(center).concat(scaleVector([radius, radius])),\n            );\n        },\n\n        // (x, y) is coordinate of bottom left corner\n        rect: function (x, y, width, height) {\n            // Raphael needs (x, y) to be coordinate of upper left corner\n            const corner = scalePoint([x, y + height]);\n            const dims = scaleVector([width, height]);\n            const elem = raphael.rect(...corner.concat(dims));\n\n            if (graphie.isMobile) {\n                elem.node.style.shapeRendering = \"crispEdges\";\n            }\n\n            return elem;\n        },\n\n        ellipse: function (center, radii) {\n            return raphael.ellipse(\n                ...scalePoint(center).concat(scaleVector(radii)),\n            );\n        },\n\n        fixedEllipse: function (\n            center: number | Coord,\n            // Different type than Coord, this is radiusX, radiusY\n            radii: number | [number, number],\n            maxScale: number,\n            padding: number,\n        ) {\n            // Scale point and radius\n            const scaledPoint = scalePoint(center);\n            const scaledRadii = scaleVector(radii);\n\n            const width = 2 * scaledRadii[0] * maxScale + padding;\n            const height = 2 * scaledRadii[1] * maxScale + padding;\n\n            // Calculate absolute left, top\n            const left = scaledPoint[0] - width / 2;\n            const top = scaledPoint[1] - height / 2;\n\n            // Wrap in <div>\n            const wrapper = document.createElement(\"div\");\n            $(wrapper).css({\n                position: \"absolute\",\n                width: width + \"px\",\n                height: height + \"px\",\n                left: left + \"px\",\n                top: top + \"px\",\n            });\n            // wrapper.setAttribute(\"data-graphie-type\", \"ellipse\");\n\n            // Create Raphael canvas\n            const localRaphael = Raphael(wrapper, width, height);\n            const visibleShape = localRaphael.ellipse(\n                width / 2,\n                height / 2,\n                scaledRadii[0],\n                scaledRadii[1],\n            );\n\n            return {\n                wrapper: wrapper,\n                visibleShape: visibleShape,\n            };\n        },\n\n        arc: function (center, radius, startAngle, endAngle, sector) {\n            startAngle = ((startAngle % 360) + 360) % 360;\n            endAngle = ((endAngle % 360) + 360) % 360;\n\n            const cent = scalePoint(center);\n            const radii = scaleVector(radius);\n            const startVector = polar(radius, startAngle);\n            const endVector = polar(radius, endAngle);\n\n            const startPoint = scalePoint([\n                center[0] + startVector[0],\n                center[1] + startVector[1],\n            ]);\n            const endPoint = scalePoint([\n                center[0] + endVector[0],\n                center[1] + endVector[1],\n            ]);\n\n            const largeAngle =\n                (((endAngle - startAngle) % 360) + 360) % 360 > 180;\n\n            return raphael.path(\n                \"M\" +\n                    startPoint.join(\" \") +\n                    \"A\" +\n                    radii.join(\" \") +\n                    \" 0 \" + // ellipse rotation\n                    (largeAngle ? 1 : 0) +\n                    \" 0 \" + // sweep flag\n                    endPoint.join(\" \") +\n                    (sector ? \"L\" + cent.join(\" \") + \"z\" : \"\"),\n            );\n        },\n\n        path: function (points) {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n            const p = raphael.path(svgPath(points));\n            p.graphiePath = points;\n\n            return p;\n        },\n\n        fixedPath: function (points, center, createPath) {\n            points = _.map(points, scalePoint);\n            center = center ? scalePoint(center) : null;\n            createPath = createPath || svgPath;\n\n            const pathLeft = _.min(_.pluck(points, 0));\n            const pathRight = _.max(_.pluck(points, 0));\n            const pathTop = _.min(_.pluck(points, 1));\n            const pathBottom = _.max(_.pluck(points, 1));\n\n            // Apply padding to line\n            const padding = [4, 4];\n\n            // Calculate and apply additional offset\n            const extraOffset = [pathLeft, pathTop];\n\n            // Apply padding and offset to points\n            points = _.map(points, function (point) {\n                return kvector.add(\n                    kvector.subtract(point, extraOffset),\n                    kvector.scale(padding, 0.5),\n                );\n            });\n\n            // Calculate <div> dimensions\n            const width = pathRight - pathLeft + padding[0];\n            const height = pathBottom - pathTop + padding[1];\n            const left = extraOffset[0] - padding[0] / 2;\n            const top = extraOffset[1] - padding[1] / 2;\n\n            // Create <div>\n            const wrapper = document.createElement(\"div\");\n            $(wrapper).css({\n                position: \"absolute\",\n                width: width + \"px\",\n                height: height + \"px\",\n                left: left + \"px\",\n                top: top + \"px\",\n                // If user specified a center, set it\n                // NOTE(kevinb): jQuery doesn't like that `transformOrigin `could be `null`\n                // so we cast to `any` here.\n                transformOrigin: center\n                    ? width / 2 +\n                      center[0] +\n                      \"px \" +\n                      (height / 2 + center[1]) +\n                      \"px\"\n                    : null,\n            } as any);\n\n            // Create Raphael canvas\n            const localRaphael = Raphael(wrapper, width, height);\n\n            // Calculate path\n            const visibleShape = localRaphael.path(createPath(points));\n\n            return {\n                wrapper: wrapper,\n                visibleShape: visibleShape,\n            };\n        },\n\n        scaledPath: function (points) {\n            const p = raphael.path(svgPath(points, /* alreadyScaled */ true));\n            p.graphiePath = points;\n            return p;\n        },\n\n        line: function (start, end) {\n            const l = this.path([start, end]);\n\n            if (graphie.isMobile) {\n                l.node.style.shapeRendering = \"crispEdges\";\n            }\n\n            return l;\n        },\n\n        parabola: function (a, b, c) {\n            // Plot a parabola of the form: f(x) = (a * x + b) * x + c\n            return raphael.path(svgParabolaPath(a, b, c));\n        },\n\n        fixedLine: function (start, end, thickness) {\n            // Apply padding to line\n            const padding = [thickness, thickness];\n\n            // Scale points to get values in pixels\n            start = scalePoint(start);\n            end = scalePoint(end);\n\n            // Calculate and apply additional offset\n            const extraOffset = [\n                Math.min(start[0], end[0]),\n                Math.min(start[1], end[1]),\n            ];\n\n            // Apply padding and offset to start, end points\n            start = kvector.add(\n                kvector.subtract(start, extraOffset),\n                kvector.scale(padding, 0.5),\n            );\n            end = kvector.add(\n                kvector.subtract(end, extraOffset),\n                kvector.scale(padding, 0.5),\n            );\n\n            // Calculate <div> dimensions\n            const left = extraOffset[0] - padding[0] / 2;\n            const top = extraOffset[1] - padding[1] / 2;\n            const width = Math.abs(start[0] - end[0]) + padding[0];\n            const height = Math.abs(start[1] - end[1]) + padding[1];\n\n            // Create <div>\n            const wrapper = document.createElement(\"div\");\n            $(wrapper).css({\n                position: \"absolute\",\n                width: width + \"px\",\n                height: height + \"px\",\n                left: left + \"px\",\n                top: top + \"px\",\n                // Outsiders should feel like the line's 'origin' (i.e., for\n                // rotation) is the starting point\n                transformOrigin: start[0] + \"px \" + start[1] + \"px\",\n            });\n\n            // Create Raphael canvas\n            const localRaphael = Raphael(wrapper, width, height);\n\n            // Calculate path\n            const path =\n                \"M\" +\n                start[0] +\n                \" \" +\n                start[1] +\n                \" \" +\n                \"L\" +\n                end[0] +\n                \" \" +\n                end[1];\n            const visibleShape = localRaphael.path(path);\n            visibleShape.graphiePath = [start, end];\n\n            return {\n                wrapper: wrapper,\n                visibleShape: visibleShape,\n            };\n        },\n\n        sinusoid: function (a, b, c, d) {\n            // Plot a sinusoid of the form: f(x) = a * sin(b * x - c) + d\n            return raphael.path(svgSinusoidPath(a, b, c, d));\n        },\n\n        grid: function (xr, yr) {\n            const step: any = currentStyle.step || [1, 1];\n            const set = raphael.set();\n\n            let x = step[0] * Math.ceil(xr[0] / step[0]);\n            for (; x <= xr[1]; x += step[0]) {\n                set.push(this.line([x, yr[0]], [x, yr[1]]));\n            }\n\n            let y = step[1] * Math.ceil(yr[0] / step[1]);\n            for (; y <= yr[1]; y += step[1]) {\n                set.push(this.line([xr[0], y], [xr[1], y]));\n            }\n\n            return set;\n        },\n\n        label: function (point, text, direction, latex) {\n            latex = typeof latex === \"undefined\" || latex;\n\n            const $span = $(\"<span>\").addClass(\"graphie-label\");\n\n            const pad = currentStyle[\"label-distance\"];\n\n            $span\n                .css(\n                    $.extend(\n                        {},\n                        {\n                            position: \"absolute\",\n                            padding: (pad != null ? pad : 7) + \"px\",\n                            color: \"black\",\n                        },\n                    ),\n                )\n                .data(\"labelDirection\", direction)\n                .appendTo(el);\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'setPosition' does not exist on type 'JQuery<HTMLElement>'.\n            $span.setPosition = function (point) {\n                const scaledPoint = scalePoint(point);\n                $span.css({\n                    left: scaledPoint[0],\n                    top: scaledPoint[1],\n                });\n            };\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'setPosition' does not exist on type 'JQuery<HTMLElement>'.\n            $span.setPosition(point);\n\n            const span = $span[0];\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'processMath' does not exist on type 'JQuery<HTMLElement>'.\n            $span.processMath = function (math, force) {\n                processMath(span, math, force, function () {\n                    const width = span.scrollWidth;\n                    const height = span.scrollHeight;\n                    setLabelMargins(span, [width, height]);\n                });\n            };\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'processText' does not exist on type 'JQuery<HTMLElement>'.\n            $span.processText = function (text: any) {\n                $span.html(text);\n                const width = span.scrollWidth;\n                const height = span.scrollHeight;\n                setLabelMargins(span, [width, height]);\n            };\n\n            if (latex) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'processMath' does not exist on type 'JQuery<HTMLElement>'.\n                $span.processMath(text, /* force */ false);\n            } else {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'processText' does not exist on type 'JQuery<HTMLElement>'.\n                $span.processText(text);\n            }\n\n            return $span;\n        },\n\n        plotParametric: function (fn, range, shade, fn2) {\n            // Note: fn2 should only be set if 'shade' is true, as it denotes\n            // the function between which fn should have its area shaded.\n            // In general, plotParametric shouldn't be used to shade the area\n            // between two arbitrary parametrics functions over an interval,\n            // as the method assumes that fn and fn2 are both of the form\n            // fn(t) = (t, fn'(t)) for some initial fn'.\n            fn2 =\n                fn2 ||\n                function (t) {\n                    return [t, 0];\n                };\n\n            // We truncate to 500,000, since anything bigger causes\n            // overflow in the firefox svg renderer.  This is safe\n            // since 500,000 is outside the viewport anyway.  We\n            // write these functions the way we do to handle undefined.\n            const clipper = (xy) => {\n                if (Math.abs(xy[1]) > 500000) {\n                    return [xy[0], Math.min(Math.max(xy[1], -500000), 500000)];\n                }\n                return xy;\n            };\n            const clippedFn = (x) => clipper(fn(x));\n            const clippedFn2 = (x: number) => clipper(fn2(x));\n\n            if (!currentStyle.strokeLinejoin) {\n                currentStyle.strokeLinejoin = \"round\";\n            }\n            if (!currentStyle.strokeLinecap) {\n                currentStyle.strokeLinecap = \"round\";\n            }\n\n            const min = range[0];\n            const max = range[1];\n            let step = (max - min) / (currentStyle[\"plot-points\"] || 800);\n            if (step === 0) {\n                step = 1;\n            }\n\n            const paths = raphael.set();\n            let points = [];\n            let lastDiff = GraphUtils.coordDiff(\n                clippedFn(min),\n                clippedFn2(min),\n            );\n\n            let lastFlip = min;\n            for (let t = min; t <= max; t += step) {\n                const top = clippedFn(t);\n                const bottom = clippedFn2(t);\n                const diff = GraphUtils.coordDiff(top, bottom);\n\n                // Find points where it flips\n                // Create path that sketches area between the two functions\n                if (\n                    // if there is an asymptote here, meaning that the graph\n                    // switches signs and has a large difference\n                    (diff[1] < 0 !== lastDiff[1] < 0 &&\n                        Math.abs(diff[1] - lastDiff[1]) > 2 * yScale) ||\n                    // or the function is undefined\n                    isNaN(diff[1])\n                ) {\n                    // split the path at this point, and draw it\n                    if (shade) {\n                        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                        points.push(top);\n\n                        // backtrack to draw paired function\n                        for (let u = t - step; u >= lastFlip; u -= step) {\n                            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                            points.push(clippedFn2(u));\n                        }\n                        lastFlip = t;\n                    }\n                    paths.push(this.path(points));\n                    // restart the path, excluding this point\n                    points = [];\n                    if (shade) {\n                        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                        points.push(top);\n                    }\n                } else {\n                    // otherwise, just add the point to the path\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                    points.push(top);\n                }\n\n                lastDiff = diff;\n            }\n\n            if (shade) {\n                // backtrack to draw paired function\n                for (let u = max - step; u >= lastFlip; u -= step) {\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                    points.push(clippedFn2(u));\n                }\n            }\n            paths.push(this.path(points));\n\n            return paths;\n        },\n\n        plotPolar: function (fn, range) {\n            const min = range[0];\n            const max = range[1];\n\n            // There is probably a better heuristic for this\n            if (!currentStyle[\"plot-points\"]) {\n                currentStyle[\"plot-points\"] = 2 * (max - min) * xScale;\n            }\n\n            return this.plotParametric(function (th) {\n                return polar(fn(th), (th * 180) / Math.PI);\n            }, range);\n        },\n\n        plot: function (fn, range, swapAxes, shade, fn2) {\n            const min = range[0];\n            const max = range[1];\n            if (!currentStyle[\"plot-points\"]) {\n                currentStyle[\"plot-points\"] = 2 * (max - min) * xScale;\n            }\n\n            if (swapAxes) {\n                if (fn2) {\n                    // TODO(charlie): support swapped axis area shading\n                    throw new PerseusError(\n                        \"Can't shade area between functions with swapped axes.\",\n                        Errors.Internal,\n                    );\n                }\n                return this.plotParametric(\n                    function (y) {\n                        return [fn(y), y];\n                    },\n                    range,\n                    shade,\n                );\n            }\n            if (fn2) {\n                if (shade) {\n                    return this.plotParametric(\n                        function (x) {\n                            return [x, fn(x)];\n                        },\n                        range,\n                        shade,\n                        function (x) {\n                            return [x, fn2(x)];\n                        },\n                    );\n                }\n                throw new PerseusError(\n                    \"fn2 should only be set when 'shade' is True.\",\n                    Errors.Internal,\n                );\n            }\n            return this.plotParametric(\n                function (x) {\n                    return [x, fn(x)];\n                },\n                range,\n                shade,\n            );\n        },\n\n        /**\n         * Given a piecewise function, return a Raphael set of paths that\n         * can be used to draw the function, e.g. using style().\n         * Calls plotParametric.\n         *\n         * @param  {[]} fnArray    array of functions which when called\n         *                         with a parameter i return the value of\n         *                         the function at i\n         * @param  {[]} rangeArray array of ranges over which the\n         *                         corresponding functions are defined\n         * @return {Set<any>}      set of paths\n         */\n        plotPiecewise: function (fnArray, rangeArray) {\n            const paths = raphael.set();\n            const self = this;\n            _.times(fnArray.length, function (i) {\n                const fn = fnArray[i];\n                const range = rangeArray[i];\n                const fnPaths = self.plotParametric(function (x) {\n                    return [x, fn(x)];\n                }, range);\n                _.each(fnPaths, function (fnPath) {\n                    paths.push(fnPath);\n                });\n            });\n\n            return paths;\n        },\n\n        /**\n         * Given an array of coordinates of the form [x, y], create and\n         * return a Raphael set of Raphael circle objects at those\n         * coordinates\n         *\n         * @param  {Array<[number, number]>} endpointArray\n         * @return {Set<any>} set of circles\n         */\n        plotEndpointCircles: function (endpointArray) {\n            const circles = raphael.set();\n            const self = this;\n\n            _.each(endpointArray, function (coord, i) {\n                circles.push(self.circle(coord, 0.15));\n            });\n\n            return circles;\n        },\n\n        plotAsymptotes: function (fn, range) {\n            const min = range[0];\n            const max = range[1];\n            const step = (max - min) / (currentStyle[\"plot-points\"] || 800);\n\n            const asymptotes = raphael.set();\n            let lastVal = fn(min);\n\n            for (let t = min; t <= max; t += step) {\n                const funcVal = fn(t);\n\n                if (\n                    funcVal < 0 !== lastVal < 0 &&\n                    Math.abs(funcVal - lastVal) > 2 * yScale\n                ) {\n                    asymptotes.push(this.line([t, yScale], [t, -yScale]));\n                }\n\n                lastVal = funcVal;\n            }\n\n            return asymptotes;\n        },\n    };\n\n    const graphie = new Graphie();\n    _.extend(graphie, {\n        raphael: raphael,\n\n        init: function (options) {\n            let scale = options.scale || [40, 40];\n            scale = typeof scale === \"number\" ? [scale, scale] : scale;\n\n            xScale = scale[0];\n            yScale = scale[1];\n\n            if (options.range == null) {\n                throw new PerseusError(\n                    \"range should be specified in graph init\",\n                    Errors.Internal,\n                );\n            }\n\n            xRange = options.range[0];\n            yRange = options.range[1];\n\n            const w = (xRange[1] - xRange[0]) * xScale;\n            const h = (yRange[1] - yRange[0]) * yScale;\n            raphael.setSize(w, h);\n\n            $(el).css({\n                width: w,\n                height: h,\n            });\n\n            this.range = options.range;\n            this.scale = scale;\n            this.dimensions = [w, h];\n            this.xpixels = w;\n            this.ypixels = h;\n\n            this.isMobile = options.isMobile;\n\n            return this;\n        },\n\n        style: function (attrs, fn) {\n            const processed = processAttributes(attrs);\n\n            if (typeof fn === \"function\") {\n                const oldStyle = currentStyle;\n                currentStyle = $.extend({}, currentStyle, processed);\n                const result = fn.call(graphie);\n                currentStyle = oldStyle;\n                return result;\n            }\n            $.extend(currentStyle, processed);\n        },\n\n        scalePoint: scalePoint,\n        scaleVector: scaleVector,\n\n        unscalePoint: unscalePoint,\n        unscaleVector: unscaleVector,\n\n        // Custom SVG path functions that are dependent on graphie range\n        // `svgPath`, while independent of range, is exported for consistency\n        svgPath: svgPath,\n        svgParabolaPath: svgParabolaPath,\n        svgSinusoidPath: svgSinusoidPath,\n    });\n\n    $.each(drawingTools, function (name) {\n        graphie[name] = function (...args) {\n            const last = args[args.length - 1];\n            const oldStyle = currentStyle;\n            let result;\n\n            // The last argument is probably trying to change the style\n            if (typeof last === \"object\" && !_.isArray(last)) {\n                currentStyle = {\n                    ...currentStyle,\n                    ...processAttributes(last),\n                };\n\n                const rest = [].slice.call(args, 0, args.length - 1);\n                result = drawingTools[name](...rest);\n            } else {\n                currentStyle = $.extend({}, currentStyle);\n\n                result = drawingTools[name](...args);\n            }\n\n            // Bad heuristic for recognizing Raphael elements and sets\n            const type = result.constructor.prototype;\n            if (type === Raphael.el || type === Raphael.st) {\n                result.attr(currentStyle);\n\n                if (currentStyle.arrows) {\n                    result = addArrowheads(result);\n                }\n            } else if (result instanceof $) {\n                // We assume that if it's not a Raphael element/set, it\n                // does not contain SVG.\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'css' does not exist on type '{}'.\n                result.css({...currentStyle, ...SVG_SPECIFIC_STYLE_MASK});\n            }\n\n            currentStyle = oldStyle;\n            return result;\n        };\n    });\n\n    // Initializes graphie settings for a graph and draws the basic graph\n    // features (axes, grid, tick marks, and axis labels)\n    // Options expected are:\n    // - range: [[a, b], [c, d]] or [a, b]\n    // - scale: [a, b] or number\n    // - gridOpacity: number (0 - 1)\n    // - gridStep: [a, b] or number (relative to units)\n    // - tickStep: [a, b] or number (relative to grid steps)\n    // - tickLen: [a, b] or number (in pixels)\n    // - labelStep: [a, b] or number (relative to tick steps)\n    // - yLabelFormat: fn to format label string for y-axis\n    // - xLabelFormat: fn to format label string for x-axis\n    // - smartLabelPositioning: true or false to ignore minus sign\n    graphie.graphInit = function (options: any) {\n        options = options || {};\n\n        $.each(options, function (prop, val: any) {\n            // allow options to be specified by a single number for shorthand if\n            // the horizontal and vertical components are the same\n            if (\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'match' does not exist on type 'string | number | symbol'.\n                !prop.match(/.*Opacity$/) &&\n                prop !== \"range\" &&\n                typeof val === \"number\"\n            ) {\n                options[prop] = [val, val];\n            }\n\n            // allow symmetric ranges to be specified by the absolute values\n            if (prop === \"range\" || prop === \"gridRange\") {\n                if (val.constructor === Array) {\n                    // but don't mandate symmetric ranges\n                    if (val[0].constructor !== Array) {\n                        options[prop] = [\n                            [-val[0], val[0]],\n                            [-val[1], val[1]],\n                        ];\n                    }\n                } else if (typeof val === \"number\") {\n                    options[prop] = [\n                        [-val, val],\n                        [-val, val],\n                    ];\n                }\n            }\n        });\n\n        const range = options.range || [\n            [-10, 10],\n            [-10, 10],\n        ];\n        const gridRange = options.gridRange || options.range;\n        const scale = options.scale || [20, 20];\n        const grid = options.grid != null ? options.grid : true;\n        const gridOpacity = options.gridOpacity || 0.1;\n        const gridStep = options.gridStep || [1, 1];\n        const axes = options.axes != null ? options.axes : true;\n        const axisArrows = options.axisArrows || \"\";\n        const axisOpacity = options.axisOpacity || 1.0;\n        const axisCenter = options.axisCenter || [\n            Math.min(Math.max(range[0][0], 0), range[0][1]),\n            Math.min(Math.max(range[1][0], 0), range[1][1]),\n        ];\n        const axisLabels =\n            options.axisLabels != null ? options.axisLabels : false;\n        const ticks = options.ticks != null ? options.ticks : true;\n        const tickStep = options.tickStep || [2, 2];\n        const tickLen = options.tickLen || [5, 5];\n        const tickOpacity = options.tickOpacity || 1.0;\n        const labels = options.labels || options.labelStep || false;\n        const labelStep = options.labelStep || [1, 1];\n        const labelOpacity = options.labelOpacity || 1.0;\n        let unityLabels = options.unityLabels || false;\n        const labelFormat =\n            options.labelFormat ||\n            function (a: any) {\n                return a;\n            };\n        let xLabelFormat = options.xLabelFormat || labelFormat;\n        let yLabelFormat = options.yLabelFormat || labelFormat;\n        const smartLabelPositioning =\n            options.smartLabelPositioning != null\n                ? options.smartLabelPositioning\n                : true;\n        const realRange = [\n            [\n                range[0][0] - (range[0][0] > 0 ? 1 : 0),\n                range[0][1] + (range[0][1] < 0 ? 1 : 0),\n            ],\n            [\n                range[1][0] - (range[1][0] > 0 ? 1 : 0),\n                range[1][1] + (range[1][1] < 0 ? 1 : 0),\n            ],\n        ];\n\n        if (!_.isArray(unityLabels)) {\n            unityLabels = [unityLabels, unityLabels];\n        }\n\n        if (smartLabelPositioning) {\n            const minusIgnorer = function (lf: any) {\n                return function (a) {\n                    return (lf(a) + \"\").replace(/-(\\d)/g, \"\\\\llap{-}$1\");\n                };\n            };\n\n            xLabelFormat = minusIgnorer(xLabelFormat);\n            yLabelFormat = minusIgnorer(yLabelFormat);\n        }\n\n        this.init({\n            range: realRange,\n            scale: scale,\n            isMobile: options.isMobile,\n        });\n\n        // draw grid\n        if (grid) {\n            this.grid(gridRange[0], gridRange[1], {\n                stroke: options.isMobile ? KhanColors.GRAY_C : \"#000000\",\n                opacity: options.isMobile ? 1 : gridOpacity,\n                step: gridStep,\n                strokeWidth: options.isMobile ? 1 : 2,\n            });\n        }\n\n        // draw axes\n        if (axes) {\n            // this is a slight hack until <-> arrowheads work\n            if (axisArrows === \"<->\" || axisArrows === true) {\n                this.style(\n                    {\n                        stroke: options.isMobile\n                            ? KhanColors.GRAY_G\n                            : \"#000000\",\n                        opacity: options.isMobile ? 1 : axisOpacity,\n                        strokeWidth: options.isMobile ? 1 : 2,\n                        arrows: \"->\",\n                    },\n                    function () {\n                        if (range[1][0] < 0 && range[1][1] > 0) {\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.path([\n                                axisCenter,\n                                [gridRange[0][0], axisCenter[1]],\n                            ]);\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.path([\n                                axisCenter,\n                                [gridRange[0][1], axisCenter[1]],\n                            ]);\n                        }\n                        if (range[0][0] < 0 && range[0][1] > 0) {\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.path([\n                                axisCenter,\n                                [axisCenter[0], gridRange[1][0]],\n                            ]);\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.path([\n                                axisCenter,\n                                [axisCenter[0], gridRange[1][1]],\n                            ]);\n                        }\n                    },\n                );\n\n                // also, we don't support \"<-\" arrows yet, but why you\n                // would want that on your graph is beyond me.\n            } else if (axisArrows === \"->\" || axisArrows === \"\") {\n                this.style(\n                    {\n                        stroke: \"#000000\",\n                        opacity: axisOpacity,\n                        strokeWidth: 2,\n                        arrows: axisArrows,\n                    },\n                    function () {\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.path([\n                            [gridRange[0][0], axisCenter[1]],\n                            [gridRange[0][1], axisCenter[1]],\n                        ]);\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.path([\n                            [axisCenter[0], gridRange[1][0]],\n                            [axisCenter[0], gridRange[1][1]],\n                        ]);\n                    },\n                );\n            }\n\n            if (axisLabels && axisLabels.length === 2) {\n                this.label(\n                    [gridRange[0][1], axisCenter[1]],\n                    axisLabels[0],\n                    \"right\",\n                );\n                this.label(\n                    [axisCenter[0], gridRange[1][1]],\n                    axisLabels[1],\n                    \"above\",\n                );\n            }\n        }\n\n        // draw tick marks\n        if (ticks) {\n            const halfWidthTicks = options.isMobile;\n            this.style(\n                {\n                    stroke: options.isMobile ? KhanColors.GRAY_G : \"#000000\",\n                    opacity: options.isMobile ? 1 : tickOpacity,\n                    strokeWidth: 1,\n                },\n                function () {\n                    // horizontal axis\n                    let step = gridStep[0] * tickStep[0];\n                    let len = tickLen[0] / scale[1];\n                    let start = gridRange[0][0];\n                    let stop = gridRange[0][1];\n\n                    if (range[1][0] < 0 && range[1][1] > 0) {\n                        for (\n                            let x = step + axisCenter[0];\n                            x <= stop;\n                            x += step\n                        ) {\n                            if (x < stop || !axisArrows) {\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.line(\n                                    [x, -len + axisCenter[1]],\n                                    [\n                                        x,\n                                        halfWidthTicks\n                                            ? 0\n                                            : len + axisCenter[1],\n                                    ],\n                                );\n                            }\n                        }\n\n                        for (\n                            let x = -step + axisCenter[0];\n                            x >= start;\n                            x -= step\n                        ) {\n                            if (x > start || !axisArrows) {\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.line(\n                                    [x, -len + axisCenter[1]],\n                                    [\n                                        x,\n                                        halfWidthTicks\n                                            ? 0\n                                            : len + axisCenter[1],\n                                    ],\n                                );\n                            }\n                        }\n                    }\n\n                    // vertical axis\n                    step = gridStep[1] * tickStep[1];\n                    len = tickLen[1] / scale[0];\n                    start = gridRange[1][0];\n                    stop = gridRange[1][1];\n\n                    if (range[0][0] < 0 && range[0][1] > 0) {\n                        for (\n                            let y = step + axisCenter[1];\n                            y <= stop;\n                            y += step\n                        ) {\n                            if (y < stop || !axisArrows) {\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.line(\n                                    [-len + axisCenter[0], y],\n                                    [\n                                        halfWidthTicks\n                                            ? 0\n                                            : len + axisCenter[0],\n                                        y,\n                                    ],\n                                );\n                            }\n                        }\n\n                        for (\n                            let y = -step + axisCenter[1];\n                            y >= start;\n                            y -= step\n                        ) {\n                            if (y > start || !axisArrows) {\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.line(\n                                    [-len + axisCenter[0], y],\n                                    [\n                                        halfWidthTicks\n                                            ? 0\n                                            : len + axisCenter[0],\n                                        y,\n                                    ],\n                                );\n                            }\n                        }\n                    }\n                },\n            );\n        }\n\n        // draw axis labels\n        if (labels) {\n            this.style(\n                {\n                    stroke: options.isMobile ? KhanColors.GRAY_G : \"#000000\",\n                    opacity: options.isMobile ? 1 : labelOpacity,\n                },\n                function () {\n                    // horizontal axis\n                    let step = gridStep[0] * tickStep[0] * labelStep[0];\n                    let start = gridRange[0][0];\n                    let stop = gridRange[0][1];\n                    const xAxisPosition = axisCenter[0] < 0 ? \"above\" : \"below\";\n                    const yAxisPosition = axisCenter[0] < 0 ? \"right\" : \"left\";\n                    const xShowZero =\n                        axisCenter[0] === 0 && axisCenter[1] !== 0;\n                    const yShowZero =\n                        axisCenter[0] !== 0 && axisCenter[1] === 0;\n                    const axisOffCenter =\n                        axisCenter[0] !== 0 || axisCenter[1] !== 0;\n                    const showUnityX = unityLabels[0] || axisOffCenter;\n                    const showUnityY = unityLabels[1] || axisOffCenter;\n\n                    // positive x-axis\n                    for (\n                        let x = (xShowZero ? 0 : step) + axisCenter[0];\n                        x <= stop;\n                        x += step\n                    ) {\n                        if (x < stop || !axisArrows) {\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.label(\n                                [x, axisCenter[1]],\n                                xLabelFormat(x),\n                                xAxisPosition,\n                            );\n                        }\n                    }\n\n                    // negative x-axis\n                    for (\n                        let x = -step * (showUnityX ? 1 : 2) + axisCenter[0];\n                        x >= start;\n                        x -= step\n                    ) {\n                        if (x > start || !axisArrows) {\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.label(\n                                [x, axisCenter[1]],\n                                xLabelFormat(x),\n                                xAxisPosition,\n                            );\n                        }\n                    }\n\n                    step = gridStep[1] * tickStep[1] * labelStep[1];\n                    start = gridRange[1][0];\n                    stop = gridRange[1][1];\n\n                    // positive y-axis\n                    for (\n                        let y = (yShowZero ? 0 : step) + axisCenter[1];\n                        y <= stop;\n                        y += step\n                    ) {\n                        if (y < stop || !axisArrows) {\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.label(\n                                [axisCenter[0], y],\n                                yLabelFormat(y),\n                                yAxisPosition,\n                            );\n                        }\n                    }\n\n                    // negative y-axis\n                    for (\n                        let y = -step * (showUnityY ? 1 : 2) + axisCenter[1];\n                        y >= start;\n                        y -= step\n                    ) {\n                        if (y > start || !axisArrows) {\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.label(\n                                [axisCenter[0], y],\n                                yLabelFormat(y),\n                                yAxisPosition,\n                            );\n                        }\n                    }\n                },\n            );\n        }\n    };\n\n    return graphie;\n};\n\nexport default GraphUtils;\n","/* eslint-disable */\n/*\n * jQuery Mobile Framework : \"mouse\" plugin\n * Copyright (c) jQuery Project\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://jquery.org/license\n */\n\n// This plugin is an experiment for abstracting away the touch and mouse\n// events so that developers don't have to worry about which method of input\n// the device their document is loaded on supports.\n//\n// The idea here is to allow the developer to register listeners for the\n// basic mouse events, such as mousedown, mousemove, mouseup, and click,\n// and the plugin will take care of registering the correct listeners\n// behind the scenes to invoke the listener at the fastest possible time\n// for that device, while still retaining the order of event firing in\n// the traditional mouse environment, should multiple handlers be registered\n// on the same element for different events.\n//\n// The current version exposes the following virtual events to jQuery bind methods:\n// \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\"\nimport $ from \"jquery\";\n\n(function ($, window, document, undefined) {\n    if (typeof $ === \"undefined\") {\n        return;\n    }\n\n    var dataPropertyName = \"virtualMouseBindings\",\n        touchTargetPropertyName = \"virtualTouchID\",\n        virtualEventNames =\n            \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\".split(\n                \" \",\n            ),\n        touchEventProps = \"clientX clientY pageX pageY screenX screenY\".split(\n            \" \",\n        ),\n        mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],\n        mouseEventProps = $.event.props.concat(mouseHookProps),\n        activeDocHandlers = {},\n        resetTimerID = 0,\n        startX = 0,\n        startY = 0,\n        didScroll = false,\n        clickBlockList = [],\n        blockMouseTriggers = false,\n        blockTouchTriggers = false,\n        eventCaptureSupported = \"addEventListener\" in document,\n        $document = $(document),\n        nextTouchID = 1,\n        lastTouchID = 0;\n\n    $.vmouse = {\n        moveDistanceThreshold: 10,\n        clickDistanceThreshold: 10,\n        resetTimerDuration: 1500,\n    };\n\n    function getNativeEvent(event) {\n        while (event && typeof event.originalEvent !== \"undefined\") {\n            event = event.originalEvent;\n        }\n        return event;\n    }\n\n    function createVirtualEvent(event, eventType) {\n        var t = event.type,\n            oe,\n            props,\n            ne,\n            prop,\n            ct,\n            touch,\n            i,\n            j,\n            len;\n\n        event = $.Event(event);\n        event.type = eventType;\n\n        oe = event.originalEvent;\n        props = $.event.props;\n\n        // addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280\n        // https://github.com/jquery/jquery-mobile/issues/3280\n        if (t.search(/mouse/) > -1) {\n            props = mouseEventProps;\n        }\n\n        // copy original event properties over to the new event\n        // this would happen if we could call $.event.fix instead of $.Event\n        // but we don't have a way to force an event to be fixed multiple times\n        if (oe) {\n            for (i = props.length, prop; i; ) {\n                prop = props[--i];\n                event[prop] = oe[prop];\n            }\n        }\n\n        // make sure that if the mouse and click virtual events are generated\n        // without a .which one is defined\n        if (t.search(/mouse(down|up)|click/) > -1 && !event.which) {\n            event.which = 1;\n        }\n\n        if (t.search(/^touch/) !== -1) {\n            ne = getNativeEvent(oe);\n            t = ne.touches;\n            ct = ne.changedTouches;\n            touch = t && t.length ? t[0] : ct && ct.length ? ct[0] : undefined;\n\n            if (touch) {\n                for (j = 0, len = touchEventProps.length; j < len; j++) {\n                    prop = touchEventProps[j];\n                    event[prop] = touch[prop];\n                }\n            }\n        }\n\n        return event;\n    }\n\n    function getVirtualBindingFlags(element) {\n        var flags = {},\n            b,\n            k;\n\n        while (element) {\n            b = $.data(element, dataPropertyName);\n\n            for (k in b) {\n                if (b[k]) {\n                    flags[k] = flags.hasVirtualBinding = true;\n                }\n            }\n            element = element.parentNode;\n        }\n        return flags;\n    }\n\n    function getClosestElementWithVirtualBinding(element, eventType) {\n        var b;\n        while (element) {\n            b = $.data(element, dataPropertyName);\n\n            if (b && (!eventType || b[eventType])) {\n                return element;\n            }\n            element = element.parentNode;\n        }\n        return null;\n    }\n\n    function enableTouchBindings() {\n        blockTouchTriggers = false;\n    }\n\n    function disableTouchBindings() {\n        blockTouchTriggers = true;\n    }\n\n    function enableMouseBindings() {\n        lastTouchID = 0;\n        clickBlockList.length = 0;\n        blockMouseTriggers = false;\n\n        // When mouse bindings are enabled, our\n        // touch bindings are disabled.\n        disableTouchBindings();\n    }\n\n    function disableMouseBindings() {\n        // When mouse bindings are disabled, our\n        // touch bindings are enabled.\n        enableTouchBindings();\n    }\n\n    function startResetTimer() {\n        clearResetTimer();\n        resetTimerID = setTimeout(function () {\n            resetTimerID = 0;\n            enableMouseBindings();\n        }, $.vmouse.resetTimerDuration);\n    }\n\n    function clearResetTimer() {\n        if (resetTimerID) {\n            clearTimeout(resetTimerID);\n            resetTimerID = 0;\n        }\n    }\n\n    function triggerVirtualEvent(eventType, event, flags) {\n        var ve;\n\n        if (\n            (flags && flags[eventType]) ||\n            (!flags &&\n                getClosestElementWithVirtualBinding(event.target, eventType))\n        ) {\n            ve = createVirtualEvent(event, eventType);\n\n            $(event.target).trigger(ve);\n        }\n\n        return ve;\n    }\n\n    function mouseEventCallback(event) {\n        var touchID = $.data(event.target, touchTargetPropertyName);\n\n        if (!blockMouseTriggers && (!lastTouchID || lastTouchID !== touchID)) {\n            var ve = triggerVirtualEvent(\"v\" + event.type, event);\n            if (ve) {\n                if (ve.isDefaultPrevented()) {\n                    event.preventDefault();\n                }\n                if (ve.isPropagationStopped()) {\n                    event.stopPropagation();\n                }\n                if (ve.isImmediatePropagationStopped()) {\n                    event.stopImmediatePropagation();\n                }\n            }\n        }\n    }\n\n    function handleTouchStart(event) {\n        var touches = getNativeEvent(event).touches,\n            target,\n            flags;\n\n        if (touches && touches.length === 1) {\n            target = event.target;\n            flags = getVirtualBindingFlags(target);\n\n            if (flags.hasVirtualBinding) {\n                lastTouchID = nextTouchID++;\n                $.data(target, touchTargetPropertyName, lastTouchID);\n\n                clearResetTimer();\n\n                disableMouseBindings();\n                didScroll = false;\n\n                var t = getNativeEvent(event).touches[0];\n                startX = t.pageX;\n                startY = t.pageY;\n\n                triggerVirtualEvent(\"vmouseover\", event, flags);\n                triggerVirtualEvent(\"vmousedown\", event, flags);\n            }\n        }\n    }\n\n    function handleScroll(event) {\n        if (blockTouchTriggers) {\n            return;\n        }\n\n        if (!didScroll) {\n            triggerVirtualEvent(\n                \"vmousecancel\",\n                event,\n                getVirtualBindingFlags(event.target),\n            );\n        }\n\n        didScroll = true;\n        startResetTimer();\n    }\n\n    function handleTouchMove(event) {\n        if (blockTouchTriggers) {\n            return;\n        }\n\n        var t = getNativeEvent(event).touches[0],\n            didCancel = didScroll,\n            moveThreshold = $.vmouse.moveDistanceThreshold,\n            didScroll =\n                didScroll ||\n                Math.abs(t.pageX - startX) > moveThreshold ||\n                Math.abs(t.pageY - startY) > moveThreshold,\n            flags = getVirtualBindingFlags(event.target);\n\n        if (didScroll && !didCancel) {\n            triggerVirtualEvent(\"vmousecancel\", event, flags);\n        }\n\n        triggerVirtualEvent(\"vmousemove\", event, flags);\n        startResetTimer();\n    }\n\n    function handleTouchEnd(event) {\n        if (blockTouchTriggers) {\n            return;\n        }\n\n        disableTouchBindings();\n\n        var flags = getVirtualBindingFlags(event.target),\n            t;\n        triggerVirtualEvent(\"vmouseup\", event, flags);\n\n        if (!didScroll) {\n            var ve = triggerVirtualEvent(\"vclick\", event, flags);\n            if (ve && ve.isDefaultPrevented()) {\n                // The target of the mouse events that follow the touchend\n                // event don't necessarily match the target used during the\n                // touch. This means we need to rely on coordinates for blocking\n                // any click that is generated.\n                t = getNativeEvent(event).changedTouches[0];\n                clickBlockList.push({\n                    touchID: lastTouchID,\n                    x: t.clientX,\n                    y: t.clientY,\n                });\n\n                // Prevent any mouse events that follow from triggering\n                // virtual event notifications.\n                blockMouseTriggers = true;\n            }\n        }\n        triggerVirtualEvent(\"vmouseout\", event, flags);\n        didScroll = false;\n\n        startResetTimer();\n    }\n\n    function hasVirtualBindings(ele) {\n        var bindings = $.data(ele, dataPropertyName),\n            k;\n\n        if (bindings) {\n            for (k in bindings) {\n                if (bindings[k]) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function dummyMouseHandler() {}\n\n    function getSpecialEventObject(eventType) {\n        var realType = eventType.substr(1);\n\n        return {\n            setup: function (data, namespace) {\n                // If this is the first virtual mouse binding for this element,\n                // add a bindings object to its data.\n\n                if (!hasVirtualBindings(this)) {\n                    $.data(this, dataPropertyName, {});\n                }\n\n                // If setup is called, we know it is the first binding for this\n                // eventType, so initialize the count for the eventType to zero.\n                var bindings = $.data(this, dataPropertyName);\n                bindings[eventType] = true;\n\n                // If this is the first virtual mouse event for this type,\n                // register a global handler on the document.\n\n                activeDocHandlers[eventType] =\n                    (activeDocHandlers[eventType] || 0) + 1;\n\n                if (activeDocHandlers[eventType] === 1) {\n                    $document.bind(realType, mouseEventCallback);\n                }\n\n                // Some browsers, like Opera Mini, won't dispatch mouse/click events\n                // for elements unless they actually have handlers registered on them.\n                // To get around this, we register dummy handlers on the elements.\n\n                $(this).bind(realType, dummyMouseHandler);\n\n                // For now, if event capture is not supported, we rely on mouse handlers.\n                if (eventCaptureSupported) {\n                    // If this is the first virtual mouse binding for the document,\n                    // register our touchstart handler on the document.\n\n                    activeDocHandlers[\"touchstart\"] =\n                        (activeDocHandlers[\"touchstart\"] || 0) + 1;\n\n                    if (activeDocHandlers[\"touchstart\"] === 1) {\n                        $document\n                            .bind(\"touchstart\", handleTouchStart)\n                            .bind(\"touchend\", handleTouchEnd)\n\n                            // On touch platforms, touching the screen and then dragging your finger\n                            // causes the window content to scroll after some distance threshold is\n                            // exceeded. On these platforms, a scroll prevents a click event from being\n                            // dispatched, and on some platforms, even the touchend is suppressed. To\n                            // mimic the suppression of the click event, we need to watch for a scroll\n                            // event. Unfortunately, some platforms like iOS don't dispatch scroll\n                            // events until *AFTER* the user lifts their finger (touchend). This means\n                            // we need to watch both scroll and touchmove events to figure out whether\n                            // or not a scroll happenens before the touchend event is fired.\n\n                            .bind(\"touchmove\", handleTouchMove)\n                            .bind(\"scroll\", handleScroll);\n                    }\n                }\n            },\n\n            teardown: function (data, namespace) {\n                // If this is the last virtual binding for this eventType,\n                // remove its global handler from the document.\n\n                --activeDocHandlers[eventType];\n\n                if (!activeDocHandlers[eventType]) {\n                    $document.unbind(realType, mouseEventCallback);\n                }\n\n                if (eventCaptureSupported) {\n                    // If this is the last virtual mouse binding in existence,\n                    // remove our document touchstart listener.\n\n                    --activeDocHandlers[\"touchstart\"];\n\n                    if (!activeDocHandlers[\"touchstart\"]) {\n                        $document\n                            .unbind(\"touchstart\", handleTouchStart)\n                            .unbind(\"touchmove\", handleTouchMove)\n                            .unbind(\"touchend\", handleTouchEnd)\n                            .unbind(\"scroll\", handleScroll);\n                    }\n                }\n\n                var $this = $(this),\n                    bindings = $.data(this, dataPropertyName);\n\n                // teardown may be called when an element was\n                // removed from the DOM. If this is the case,\n                // jQuery core may have already stripped the element\n                // of any data bindings so we need to check it before\n                // using it.\n                if (bindings) {\n                    bindings[eventType] = false;\n                }\n\n                // Unregister the dummy event handler.\n\n                $this.unbind(realType, dummyMouseHandler);\n\n                // If this is the last virtual mouse binding on the\n                // element, remove the binding data from the element.\n\n                if (!hasVirtualBindings(this)) {\n                    $this.removeData(dataPropertyName);\n                }\n            },\n        };\n    }\n\n    // Expose our custom events to the jQuery bind/unbind mechanism.\n\n    for (var i = 0; i < virtualEventNames.length; i++) {\n        $.event.special[virtualEventNames[i]] = getSpecialEventObject(\n            virtualEventNames[i],\n        );\n    }\n\n    // Add a capture click handler to block clicks.\n    // Note that we require event capture support for this so if the device\n    // doesn't support it, we punt for now and rely solely on mouse events.\n    if (eventCaptureSupported) {\n        document.addEventListener(\n            \"click\",\n            function (e) {\n                var cnt = clickBlockList.length,\n                    target = e.target,\n                    x,\n                    y,\n                    ele,\n                    i,\n                    o,\n                    touchID;\n\n                if (cnt) {\n                    x = e.clientX;\n                    y = e.clientY;\n                    threshold = $.vmouse.clickDistanceThreshold;\n\n                    // The idea here is to run through the clickBlockList to see if\n                    // the current click event is in the proximity of one of our\n                    // vclick events that had preventDefault() called on it. If we find\n                    // one, then we block the click.\n                    //\n                    // Why do we have to rely on proximity?\n                    //\n                    // Because the target of the touch event that triggered the vclick\n                    // can be different from the target of the click event synthesized\n                    // by the browser. The target of a mouse/click event that is syntehsized\n                    // from a touch event seems to be implementation specific. For example,\n                    // some browsers will fire mouse/click events for a link that is near\n                    // a touch event, even though the target of the touchstart/touchend event\n                    // says the user touched outside the link. Also, it seems that with most\n                    // browsers, the target of the mouse/click event is not calculated until the\n                    // time it is dispatched, so if you replace an element that you touched\n                    // with another element, the target of the mouse/click will be the new\n                    // element underneath that point.\n                    //\n                    // Aside from proximity, we also check to see if the target and any\n                    // of its ancestors were the ones that blocked a click. This is necessary\n                    // because of the strange mouse/click target calculation done in the\n                    // Android 2.1 browser, where if you click on an element, and there is a\n                    // mouse/click handler on one of its ancestors, the target will be the\n                    // innermost child of the touched element, even if that child is no where\n                    // near the point of touch.\n\n                    ele = target;\n\n                    while (ele) {\n                        for (i = 0; i < cnt; i++) {\n                            o = clickBlockList[i];\n                            touchID = 0;\n\n                            if (\n                                (ele === target &&\n                                    Math.abs(o.x - x) < threshold &&\n                                    Math.abs(o.y - y) < threshold) ||\n                                $.data(ele, touchTargetPropertyName) ===\n                                    o.touchID\n                            ) {\n                                // XXX: We may want to consider removing matches from the block list\n                                //      instead of waiting for the reset timer to fire.\n                                e.preventDefault();\n                                e.stopPropagation();\n                                return;\n                            }\n                        }\n                        ele = ele.parentNode;\n                    }\n                }\n            },\n            true,\n        );\n    }\n})($, window, document);\n","/**\n * A work-in-progress of _ methods for objects.\n * That is, they take an object as a parameter,\n * and return an object instead of an array.\n *\n * TODO(aria): Move this out of interactive2\n */\n\nimport _ from \"underscore\";\n\n/**\n * Does a pluck on keys inside objects in an object\n *\n * Ex:\n * tools = {\n *     translation: {\n *         enabled: true\n *     },\n *     rotation: {\n *         enabled: false\n *     }\n * };\n * pluckObject(tools, \"enabled\") returns {\n *     translation: true\n *     rotation: false\n * }\n */\nconst pluck = function (table: any, subKey: string): any {\n    return _.object(\n        _.map(table, function (value, key) {\n            return [key, value[subKey]];\n        }),\n    );\n};\n\n/**\n * Maps an object to an object\n *\n * > mapObject({a: '1', b: '2'}, (value, key) => {\n *       return value + 1;\n *   });\n * {a: 2, b: 3}\n */\nconst mapObject = function <K extends string, V, U>(\n    obj: Partial<Record<K, V>>,\n    lambda: (arg1: V, arg2: K) => U,\n): Partial<Record<K, U>> {\n    const result: Record<string, any> = {};\n    _.each(_.keys(obj), function (key) {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string' is not assignable to parameter of type 'K'.\n        result[key] = lambda(obj[key], key);\n    });\n    return result;\n};\n\n/**\n * Maps an array to an object\n *\n * > mapObjectFromArray(['a', 'b'], function(elem) {\n *       return elem + elem;\n *   });\n * {a: 'aa', b: 'bb'}\n */\nconst mapObjectFromArray = function <K extends string, V>(\n    arr: ReadonlyArray<K>,\n    lambda: (arg1: K) => V,\n): Partial<Record<K, V>> {\n    const result: Record<string, any> = {};\n    _.each(arr, function (elem) {\n        result[elem] = lambda(elem);\n    });\n    return result;\n};\n\nexport default {\n    pluck: pluck,\n    mapObject: mapObject,\n    mapObjectFromArray: mapObjectFromArray,\n};\n","/* eslint-disable @babel/no-invalid-this */\n/**\n * Default methods for a wrapped movable.\n */\n\nimport {vector as kvector} from \"@khanacademy/kmath\";\nimport $ from \"jquery\";\nimport _ from \"underscore\";\n\nimport InteractiveUtil from \"./interactive-util\";\nimport objective_ from \"./objective_\";\n\n/*\n * These functions, when called on the wrapped object, simply pass the\n * arguments to the underlying Raphael object.\n */\nconst PASS_TO_RAPHAEL = [\"attr\", \"animate\"];\n\nconst WrappedDefaults: any = _.extend(\n    {\n        transform: function (transformation) {\n            const prefixedTransform = InteractiveUtil.getPrefixedTransform();\n            // @ts-expect-error [FEI-5003] - TS2538 - Type 'null' cannot be used as an index type. | TS2538 - Type 'undefined' cannot be used as an index type.\n            this.wrapper.style[prefixedTransform] = transformation;\n        },\n\n        toFront: function () {\n            const parentNode = this.wrapper.parentNode;\n            // TODO(emily): Sometimes, we call `.remove()` but then hold a\n            // reference to this object, and sometimes call `.toFront` on it.\n            // Notably, this happens in the reflection transformation in the\n            // Transformer widget. This is a hacky fix. Make this less bad.\n            if (parentNode) {\n                parentNode.appendChild(this.wrapper);\n            }\n        },\n\n        toBack: function () {\n            const parentNode = this.wrapper.parentNode;\n            if (parentNode.firstChild !== this.wrapper) {\n                parentNode.insertBefore(this.wrapper, parentNode.firstChild);\n            }\n        },\n\n        remove: function () {\n            this.visibleShape.remove();\n            $(this.wrapper).remove();\n        },\n\n        getMouseTarget: function () {\n            return this.visibleShape[0];\n        },\n\n        moveTo: function (point) {\n            const delta = kvector.subtract(\n                this.graphie.scalePoint(point),\n                this.graphie.scalePoint(this.initialPoint),\n            );\n            const do3dTransform = InteractiveUtil.getCanUse3dTransform();\n            const transformation =\n                \"translateX(\" +\n                delta[0] +\n                \"px) \" +\n                \"translateY(\" +\n                delta[1] +\n                \"px)\" +\n                (do3dTransform ? \" translateZ(0)\" : \"\");\n            this.transform(transformation);\n        },\n\n        hide: function () {\n            this.visibleShape.hide();\n        },\n\n        show: function () {\n            this.visibleShape.show();\n        },\n    },\n    objective_.mapObjectFromArray(PASS_TO_RAPHAEL, function (attribute) {\n        return function (...args) {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.visibleShape[attribute](...args);\n        };\n    }),\n);\n\nexport default WrappedDefaults;\n","import {vector as kvector} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport InteractiveUtil from \"./interactive-util\";\nimport WrappedDefaults from \"./wrapped-defaults\";\n\nimport type {Coord} from \"./types\";\n\nconst DEFAULT_OPTIONS = {\n    maxScale: 1,\n    mouselayer: false,\n    shadow: false,\n    disableMouseEventsOnWrapper: false,\n} as const;\n\nconst WrappedEllipse = function (\n    graphie: any,\n    center: Coord,\n    radii: [number, number],\n    options: any,\n) {\n    options = _.extend({}, DEFAULT_OPTIONS, options);\n\n    // Add `wrapper`, `visibleShape`, and remaining properties.\n    const fixedEllipse = graphie.fixedEllipse(\n        center,\n        radii,\n        options.maxScale,\n        options.padding,\n    );\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, fixedEllipse, {\n        graphie: graphie,\n        initialPoint: center,\n    });\n\n    if (options.interactiveKindForTesting) {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.wrapper.setAttribute(\n            \"data-interactive-kind-for-testing\",\n            options.interactiveKindForTesting,\n        );\n    }\n\n    // Add to appropriate graphie layer\n    if (options.mouselayer) {\n        // Disable browser handling of all panning and zooming gestures on the\n        // movable wrapper so that when moved the browser does not scroll page\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.wrapper.style.touchAction = \"none\";\n\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.graphie.addToMouseLayerWrapper(this.wrapper);\n    } else {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.graphie.addToVisibleLayerWrapper(this.wrapper);\n    }\n\n    if (options.shadow) {\n        const filter = \"drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))\";\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        const wrapper = this.wrapper;\n        wrapper.style.filter = filter;\n\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.moveTo = function (point: any) {\n            const delta = kvector.subtract(\n                this.graphie.scalePoint(point),\n                this.graphie.scalePoint(this.initialPoint),\n            );\n            const do3dTransform = InteractiveUtil.getCanUse3dTransform();\n            const transform =\n                \"translateX(\" +\n                Math.round(delta[0]) +\n                \"px) \" +\n                \"translateY(\" +\n                Math.round(delta[1]) +\n                \"px)\" +\n                (do3dTransform ? \" translateZ(0)\" : \"\");\n            this.transform(transform);\n        };\n    }\n\n    if (options.disableMouseEventsOnWrapper) {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.wrapper.style.pointerEvents = \"none\";\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.visibleShape.node.style.pointerEvents = \"auto\";\n    }\n};\n\n_.extend(WrappedEllipse.prototype, WrappedDefaults);\n\nexport default WrappedEllipse;\n","import {point as kpoint, vector as kvector} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport KhanMath from \"../util/math\";\n\nimport InteractiveUtil from \"./interactive-util\";\nimport WrappedDefaults from \"./wrapped-defaults\";\n\nimport type {Coord} from \"./types\";\n\nconst DEFAULT_OPTIONS = {\n    thickness: 2,\n    mouselayer: false,\n} as const;\n\nconst WrappedLine = function (\n    graphie: any,\n    start: Coord,\n    end: Coord,\n    options: any,\n) {\n    options = _.extend({}, DEFAULT_OPTIONS, options);\n\n    // Always make the line as large as possible and horizontal; this\n    // simplifies a lot of the transforms, e.g., we can rotate by exactly the\n    // angle of the argument points in `moveTo`.\n    const initialStart = [graphie.range[0][0], 0];\n    const initialEnd = [graphie.range[0][1], 0];\n\n    // Add `wrapper` and `visibleShape`\n    _.extend(\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this,\n        graphie.fixedLine(initialStart, initialEnd, options.thickness),\n    );\n\n    if (options.interactiveKindForTesting) {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.wrapper.setAttribute(\n            \"data-interactive-kind-for-testing\",\n            options.interactiveKindForTesting,\n        );\n    }\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.visibleShape.attr(options.normalStyle);\n\n    // Save properties for computing transformations\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, {\n        graphie: graphie,\n        initialPoint: graphie.scalePoint(initialStart),\n        initialLength: kpoint.distanceToPoint(\n            graphie.scalePoint(initialStart),\n            graphie.scalePoint(initialEnd),\n        ),\n    });\n\n    // Add to appropriate graphie layer\n    if (options.mouselayer) {\n        // Disable browser handling of all panning and zooming gestures on the\n        // movable wrapper so that when moved the browser does not scroll page\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.wrapper.style.touchAction = \"none\";\n\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.graphie.addToMouseLayerWrapper(this.wrapper);\n    } else {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.graphie.addToVisibleLayerWrapper(this.wrapper);\n    }\n\n    // Move to argument points\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.moveTo(start, end);\n};\n\n_.extend(WrappedLine.prototype, WrappedDefaults, {\n    getMouseTarget: function () {\n        return this.wrapper;\n    },\n\n    moveTo: function (start, end) {\n        const scaledStart = this.graphie.scalePoint(start);\n        const scaledEnd = this.graphie.scalePoint(end);\n\n        // Compute transformation parameters\n        const polarDiff = kvector.polarDegFromCart(\n            kvector.subtract(scaledEnd, scaledStart),\n        );\n        const lineLength = polarDiff[0];\n        const angle = KhanMath.bound(polarDiff[1]);\n        const delta = kvector.subtract(scaledStart, this.initialPoint);\n        const scale = KhanMath.bound(lineLength / this.initialLength);\n\n        // Construct and apply transformation string\n        const do3dTransform = InteractiveUtil.getCanUse3dTransform();\n        const transformation =\n            \"translateX(\" +\n            delta[0] +\n            \"px) \" +\n            \"translateY(\" +\n            delta[1] +\n            \"px) \" +\n            (do3dTransform ? \" translateZ(0)\" : \"\") +\n            \"rotate(\" +\n            angle +\n            \"deg) \" +\n            \"scaleX(\" +\n            scale +\n            \") scaleY(1)\";\n        this.transform(transformation);\n    },\n});\n\nexport default WrappedLine;\n","import _ from \"underscore\";\n\nimport WrappedDefaults from \"./wrapped-defaults\";\n\nimport type {Coord} from \"./types\";\n\nconst DEFAULT_OPTIONS = {\n    center: null, // gets ignored in `graphie.fixedPath` if `null`\n    createPath: null, // gets defaulted in `graphie.fixedPath` if `null`\n    mouselayer: false,\n} as const;\n\nconst WrappedPath = function (\n    graphie: any,\n    points: ReadonlyArray<Coord>,\n    options: any,\n) {\n    options = _.extend({}, DEFAULT_OPTIONS, options);\n\n    // Add `wrapper` and `visibleShape`\n    _.extend(\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this,\n        graphie.fixedPath(points, options.center, options.createPath),\n    );\n\n    // Add remaining properties\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, {\n        graphie: graphie,\n        initialPoint: graphie.scalePoint(_.head(points)),\n    });\n\n    // Add to appropriate graphie layer\n    if (options.mouselayer) {\n        // Disable browser handling of all panning and zooming gestures on the\n        // movable wrapper so that when moved the browser does not scroll page\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.wrapper.style.touchAction = \"none\";\n\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.graphie.addToMouseLayerWrapper(this.wrapper);\n    } else {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.graphie.addToVisibleLayerWrapper(this.wrapper);\n    }\n};\n\n_.extend(WrappedPath.prototype, WrappedDefaults);\n\nexport default WrappedPath;\n","/* eslint-disable @babel/no-invalid-this */\n/**\n * Interactive graphie utilities.\n *\n * This file exposes a couple functions, but mostly it adds functions to the\n * `Graphie` prototype for dealing with interactive graphie elements.\n */\n\n// TODO(emily): This file breaks our line length limits like nobody's business.\n// Figure out how to fix that.\nimport {\n    vector as kvector,\n    point as kpoint,\n    line as kline,\n} from \"@khanacademy/kmath\";\nimport $ from \"jquery\";\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport Raphael from \"raphael\";\nimport _ from \"underscore\";\n\n// NOTE(jeresig): We include a special copy of jQuery vmouse so\n// that Perseus will continue to work in mobile native devices\n// (this should have no impact in the browser)\n// eslint-disable-next-line import/no-unassigned-import\nimport \"../jquery.mobile.vmouse\";\nimport InteractiveUtil from \"../interactive2/interactive-util\";\nimport WrappedEllipse from \"../interactive2/wrapped-ellipse\";\nimport WrappedLine from \"../interactive2/wrapped-line\";\nimport WrappedPath from \"../interactive2/wrapped-path\";\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport KhanColors from \"./colors\";\nimport GraphUtils from \"./graphie\";\nimport KhanMath from \"./math\";\n\nimport type {Coord} from \"../interactive2/types\";\n\nexport type MouseHandler = (position: Coord) => void;\n\nconst {getCanUse3dTransform} = InteractiveUtil;\n\nfunction sum(array: any) {\n    return _.reduce(\n        array,\n        function (memo, arg) {\n            return memo + arg;\n        },\n        0,\n    );\n}\n\nfunction clockwise(points: any) {\n    const segments = _.zip(points, points.slice(1).concat(points.slice(0, 1)));\n    const areas = _.map(segments, function (segment) {\n        const p1 = segment[0];\n        const p2 = segment[1];\n        return (p2[0] - p1[0]) * (p2[1] + p1[1]);\n    });\n    return sum(areas) > 0;\n}\n\n/* vector-add multiple [x, y] coords/vectors */\nfunction addPoints(...points) {\n    const zipped = _.zip(...points);\n    return _.map(zipped, sum);\n}\n\nfunction reverseVector(vector: Array<number>) {\n    return _.map(vector, function (coord) {\n        return coord * -1;\n    });\n}\n\nfunction scaledDistanceFromAngle(angle: number) {\n    const a = 3.51470560176242 * 20;\n    const b = 0.5687298702748785 * 20;\n    const c = -0.037587715462826674;\n    return (a - b) * Math.exp(c * angle) + b;\n}\n\nfunction scaledPolarRad(radius: number, radians: number) {\n    return [\n        radius * Math.cos(radians),\n        radius * Math.sin(radians) * -1, // SVG flips y axis\n    ];\n}\n\nfunction scaledPolarDeg(radius: number, degrees) {\n    const radians = (degrees * Math.PI) / 180;\n    return scaledPolarRad(radius, radians);\n}\n\n// Global dragging state\nlet dragging = false;\n\nconst InteractiveUtils: any = {\n    // Useful for shapes that are only sometimes drawn. If a shape isn't\n    // needed, it can be replaced with bogusShape which just has stub methods\n    // that successfully do nothing.\n    // The alternative would be 'if..typeof' checks all over the place.\n    bogusShape: {\n        animate: function () {},\n        attr: function () {},\n        remove: function () {},\n    },\n};\n\n_.extend(GraphUtils.Graphie.prototype, {\n    // graphie puts text spans on top of the SVG, which looks good, but gets\n    // in the way of mouse events. This adds another SVG element on top\n    // of everything else where we can add invisible shapes with mouse\n    // handlers wherever we want.\n    addMouseLayer: function (options: {\n        onClick?: MouseHandler;\n        onMouseMove?: MouseHandler;\n        onMouseDown?: MouseHandler;\n        onMouseOver?: MouseHandler;\n        onMouseOut?: MouseHandler;\n        allowScratchpad?: boolean;\n        setDrawingAreaAvailable?: (available: boolean) => void;\n    }) {\n        const graph = this;\n        options = _.extend(\n            {\n                allowScratchpad: false,\n                setDrawingAreaAvailable: function () {},\n            },\n            options,\n        );\n\n        const mouselayerZIndex = 2;\n        graph.mouselayer = Raphael(\n            graph.raphael.canvas.parentNode,\n            graph.xpixels,\n            graph.ypixels,\n        );\n        $(graph.mouselayer.canvas).css(\"z-index\", mouselayerZIndex);\n        if (\n            options.onClick ||\n            options.onMouseDown ||\n            options.onMouseMove ||\n            options.onMouseOver ||\n            options.onMouseOut\n        ) {\n            const canvasClickTarget = graph.mouselayer\n                .rect(0, 0, graph.xpixels, graph.ypixels)\n                .attr({\n                    fill: \"#000\",\n                    opacity: 0,\n                });\n            let isClickingCanvas = false;\n\n            $(graph.mouselayer.canvas).on(\"vmousedown\", function (e) {\n                if (e.target === canvasClickTarget[0]) {\n                    if (options.onMouseDown) {\n                        options.onMouseDown(graph.getMouseCoord(e));\n                    }\n                    isClickingCanvas = true;\n\n                    if (options.onMouseMove) {\n                        const handler = options.onMouseMove;\n                        $(document).bind(\"vmousemove.mouseLayer\", function (e) {\n                            if (isClickingCanvas) {\n                                e.preventDefault();\n                                handler(graph.getMouseCoord(e));\n                            }\n                        });\n                    }\n\n                    $(document).bind(\"vmouseup.mouseLayer\", function (e) {\n                        $(document).unbind(\".mouseLayer\");\n\n                        // Only register clicks that started on the canvas,\n                        // and not on another mouseLayer target\n                        if (isClickingCanvas && options.onClick) {\n                            options.onClick(graph.getMouseCoord(e));\n                        }\n                        isClickingCanvas = false;\n                    });\n                }\n            });\n            if (options.onMouseOver) {\n                const handler = options.onMouseOver;\n                $(graph.mouselayer.canvas).on(\"vmouseover\", function (e) {\n                    handler(graph.getMouseCoord(e));\n                });\n            }\n            if (options.onMouseOut) {\n                const handler = options.onMouseOut;\n                $(graph.mouselayer.canvas).on(\"vmouseout\", function (e) {\n                    handler(graph.getMouseCoord(e));\n                });\n            }\n        }\n        if (!options.allowScratchpad) {\n            options.setDrawingAreaAvailable?.(false);\n        }\n\n        // Add mouse and visible wrapper layers for DOM-node-wrapped movables\n        graph._mouselayerWrapper = document.createElement(\"div\");\n        $(graph._mouselayerWrapper).css({\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            zIndex: mouselayerZIndex,\n        });\n\n        graph._visiblelayerWrapper = document.createElement(\"div\");\n        $(graph._visiblelayerWrapper).css({\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n        });\n\n        const el = graph.raphael.canvas.parentNode;\n        el.appendChild(graph._visiblelayerWrapper);\n        el.appendChild(graph._mouselayerWrapper);\n\n        // Add functions for adding to wrappers\n        graph.addToMouseLayerWrapper = function (el: any) {\n            this._mouselayerWrapper.appendChild(el);\n        };\n        graph.addToVisibleLayerWrapper = function (el: any) {\n            this._visiblelayerWrapper.appendChild(el);\n        };\n    },\n\n    /**\n     * Get mouse coordinates in pixels\n     */\n    getMousePx: function (event) {\n        const graphie = this;\n\n        const mouseX =\n            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n            event.pageX - $(graphie.raphael.canvas.parentNode).offset().left;\n        const mouseY =\n            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n            event.pageY - $(graphie.raphael.canvas.parentNode).offset().top;\n\n        return [mouseX, mouseY];\n    },\n\n    /**\n     * Get mouse coordinates in graph coordinates\n     */\n    getMouseCoord: function (event) {\n        return this.unscalePoint(this.getMousePx(event));\n    },\n\n    /**\n     * Unlike all other Graphie-related code, the following three functions use\n     * a lot of scaled coordinates (so that labels appear the same size\n     * regardless of current shape/figure scale). These are prefixed with 's'.\n     */\n    labelAngle: function (options) {\n        const graphie = this;\n\n        _.defaults(options, {\n            point1: [0, 0],\n            vertex: [0, 0],\n            point3: [0, 0],\n            label: null,\n            numArcs: 1,\n            showRightAngleMarker: true,\n            pushOut: 0,\n            clockwise: false,\n            style: {},\n        });\n\n        let text = options.text === undefined ? \"\" : options.text;\n        const vertex = options.vertex;\n        const sVertex = graphie.scalePoint(vertex);\n        let p1;\n        let p3;\n        if (options.clockwise) {\n            p1 = options.point1;\n            p3 = options.point3;\n        } else {\n            p1 = options.point3;\n            p3 = options.point1;\n        }\n\n        const startAngle = GraphUtils.findAngle(p1, vertex);\n        const endAngle = GraphUtils.findAngle(p3, vertex);\n        const angle = (endAngle + 360 - startAngle) % 360;\n        const halfAngle = (startAngle + angle / 2) % 360;\n        const sPadding = 5 * options.pushOut;\n        let sRadius = sPadding + scaledDistanceFromAngle(angle);\n        const temp: Array<never> = [];\n\n        if (Math.abs(angle - 90) < 1e-9 && options.showRightAngleMarker) {\n            const v1 = addPoints(sVertex, scaledPolarDeg(sRadius, startAngle));\n            const v2 = addPoints(sVertex, scaledPolarDeg(sRadius, endAngle));\n\n            sRadius *= Math.SQRT2;\n            const v3 = addPoints(sVertex, scaledPolarDeg(sRadius, halfAngle));\n\n            _.each([v1, v2], function (v) {\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                temp.push(graphie.scaledPath([v, v3], options.style));\n            });\n        } else {\n            // Draw arcs\n            _.times(options.numArcs, function (i) {\n                temp.push(\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                    graphie.arc(\n                        vertex,\n                        graphie.unscaleVector(sRadius),\n                        startAngle,\n                        endAngle,\n                        options.style,\n                    ),\n                );\n                sRadius += 3;\n            });\n        }\n\n        if (text) {\n            const match = text.match(/\\$deg(\\d)?/);\n            if (match) {\n                const precision = match[1] || 1;\n                text = text.replace(\n                    match[0],\n                    KhanMath.toFixedApprox(angle, precision) + \"^{\\\\circ}\",\n                );\n            }\n\n            const sOffset = scaledPolarDeg(sRadius + 15, halfAngle);\n            const sPosition = addPoints(sVertex, sOffset);\n            const position = graphie.unscalePoint(sPosition);\n\n            // Reuse label if possible\n            if (options.label) {\n                options.label.setPosition(position);\n                options.label.processMath(text, /* force */ true);\n            } else {\n                graphie.label(position, text, \"center\", options.style);\n            }\n        }\n\n        return temp;\n    },\n\n    labelSide: function (options) {\n        const graphie = this;\n\n        _.defaults(options, {\n            point1: [0, 0],\n            point2: [0, 0],\n            label: null,\n            text: \"\",\n            numTicks: 0,\n            numArrows: 0,\n            clockwise: false,\n            style: {},\n        });\n\n        let p1;\n        let p2;\n        if (options.clockwise) {\n            p1 = options.point1;\n            p2 = options.point2;\n        } else {\n            p1 = options.point2;\n            p2 = options.point1;\n        }\n\n        const midpoint = [(p1[0] + p2[0]) / 2, (p1[1] + p2[1]) / 2];\n        const sMidpoint = graphie.scalePoint(midpoint);\n        const parallelAngle = Math.atan2(p2[1] - p1[1], p2[0] - p1[0]);\n        const perpendicularAngle = parallelAngle + Math.PI / 2;\n        const temp: Array<never> = [];\n        let sCumulativeOffset = 0;\n\n        if (options.numTicks) {\n            const n = options.numTicks;\n\n            const sSpacing = 5;\n            const sHeight = 5;\n\n            const style = _.extend({}, options.style, {\n                strokeWidth: 2,\n            });\n\n            _.times(n, function (i) {\n                const sOffset = sSpacing * (i - (n - 1) / 2);\n\n                const sOffsetVector = scaledPolarRad(sOffset, parallelAngle);\n                const sHeightVector = scaledPolarRad(\n                    sHeight,\n                    perpendicularAngle,\n                );\n\n                const sPath = [\n                    addPoints(sMidpoint, sOffsetVector, sHeightVector),\n                    addPoints(\n                        sMidpoint,\n                        sOffsetVector,\n                        reverseVector(sHeightVector),\n                    ),\n                ];\n\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                temp.push(graphie.scaledPath(sPath, style));\n            });\n\n            sCumulativeOffset += sSpacing * (n - 1) + 15;\n        }\n\n        if (options.numArrows) {\n            const n = options.numArrows;\n\n            const start = [p1, p2].sort(function (a, b) {\n                if (a[1] === b[1]) {\n                    return a[0] - b[0];\n                }\n                return a[1] - b[1];\n            })[0];\n            const sStart = graphie.scalePoint(start);\n\n            const style = _.extend({}, options.style, {\n                arrows: \"->\",\n                strokeWidth: 2,\n            });\n\n            const sSpacing = 5;\n\n            _.times(n, function (i) {\n                const sOffset = sCumulativeOffset + sSpacing * i;\n                let sOffsetVector = scaledPolarRad(sOffset, parallelAngle);\n\n                if (start !== p1) {\n                    sOffsetVector = reverseVector(sOffsetVector);\n                }\n\n                const sEnd = addPoints(sMidpoint, sOffsetVector);\n\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any' is not assignable to parameter of type 'never'.\n                temp.push(graphie.scaledPath([sStart, sEnd], style));\n            });\n        }\n\n        let text = options.text;\n        if (text) {\n            const match = text.match(/\\$len(\\d)?/);\n            if (match) {\n                const distance = GraphUtils.getDistance(p1, p2);\n                const precision = match[1] || 1;\n                text = text.replace(\n                    match[0],\n                    KhanMath.toFixedApprox(distance, precision),\n                );\n            }\n\n            const sOffset = 20;\n            const sOffsetVector = scaledPolarRad(sOffset, perpendicularAngle);\n            const sPosition = addPoints(sMidpoint, sOffsetVector);\n            const position = graphie.unscalePoint(sPosition);\n\n            // Reuse label if possible\n            if (options.label) {\n                options.label.setPosition(position);\n                options.label.processMath(text, /* force */ true);\n            } else {\n                graphie.label(position, text, \"center\", options.style);\n            }\n        }\n\n        return temp;\n    },\n\n    /* Can also be used to label points that aren't vertices */\n    labelVertex: function (options) {\n        const graphie = this;\n\n        _.defaults(options, {\n            point1: null,\n            vertex: [0, 0],\n            point3: null,\n            label: null,\n            text: \"\",\n            clockwise: false,\n            style: {},\n        });\n\n        if (!options.text) {\n            return;\n        }\n\n        const vertex = options.vertex;\n        const sVertex = graphie.scalePoint(vertex);\n        let p1;\n        let p3;\n        if (options.clockwise) {\n            p1 = options.point1;\n            p3 = options.point3;\n        } else {\n            p1 = options.point3;\n            p3 = options.point1;\n        }\n\n        let angle = 135;\n        let halfAngle;\n        if (p1 && p3) {\n            const startAngle = GraphUtils.findAngle(p1, vertex);\n            const endAngle = GraphUtils.findAngle(p3, vertex);\n            angle = (endAngle + 360 - startAngle) % 360;\n            halfAngle = (startAngle + angle / 2 + 180) % 360;\n        } else if (p1) {\n            const parallelAngle = GraphUtils.findAngle(vertex, p1);\n            halfAngle = parallelAngle + 90;\n        } else if (p3) {\n            const parallelAngle = GraphUtils.findAngle(p3, vertex);\n            halfAngle = parallelAngle + 90;\n        } else {\n            // Standalone point\n            halfAngle = 135;\n        }\n\n        const sRadius = 10 + scaledDistanceFromAngle(360 - angle);\n        const sOffsetVector = scaledPolarDeg(sRadius, halfAngle);\n        const sPosition = addPoints(sVertex, sOffsetVector);\n        const position = graphie.unscalePoint(sPosition);\n\n        // Reuse label if possible\n        if (options.label) {\n            options.label.setPosition(position);\n            options.label.processMath(options.text, /* force */ true);\n        } else {\n            graphie.label(position, options.text, \"center\", options.style);\n        }\n    },\n\n    // Add a point to the graph that can be dragged around.\n    // It allows automatic constraints on its movement as well as automatically\n    // managing line segments that terminate at the point.\n    //\n    // Options can be set to control how the point behaves:\n    //   coord[]:\n    //     The initial position of the point\n    //   snapX, snapY:\n    //     The minimum increment the point can be moved\n    //\n    // The return value is an object that can be used to manipulate the point:\n    //   The coordX and coordY properties tell you the current position\n    //\n    //   By adding an onMove() method to the returned object, you can install an\n    //   event handler that gets called every time the user moves the point.\n    //\n    //   The returned object also provides a moveTo(x,y) method that will move\n    //   the point to a specific coordinate\n    //\n    // Constraints can be set on the on the returned object:\n    //\n    //  - Set point to be immovable:\n    //        movablePoint.constraints.fixed = true\n    //\n    //  - Constrain point to a fixed distance from another point. The resulting\n    //    point will move in a circle:\n    //        movablePoint.fixedDistance = {\n    //           dist: 2,\n    //           point: point1\n    //        }\n    //\n    //  - Constrain point to a line defined by a fixed angle between it and\n    //    two other points:\n    //        movablePoint.fixedAngle = {\n    //           angle: 45,\n    //           vertex: point1,\n    //           ref: point2\n    //        }\n    //\n    //  - Confined the point to traveling in a vertical or horizontal line,\n    //    respectively\n    //        movablePoint.constrainX = true;\n    //        movablePoint.constrainY = true;\n    //\n    //  - Connect a movableLineSegment to a movablePoint. The point is attached\n    //    to a specific end of the line segment by adding the segment either to\n    //    the list of lines that start at the point or the list of lines that\n    //    end at the point (movableLineSegment can do this for you):\n    //        movablePoint.lineStarts.push(movableLineSegment);\n    //          - or -\n    //        movablePoint.lineEnds.push(movableLineSegment);\n    //\n    //  - Connect a movablePolygon to a movablePoint in exacty the same way:\n    //        movablePoint.polygonVertices.push(movablePolygon);\n    //\n    addMovablePoint: function (options) {\n        const movablePoint = $.extend(\n            true,\n            {\n                graph: this,\n                coord: [0, 0],\n                snapX: 0,\n                snapY: 0,\n                pointSize: 4,\n                highlight: false,\n                dragging: false,\n                visible: true,\n                bounded: true,\n                constraints: {\n                    fixed: false,\n                    constrainX: false,\n                    constrainY: false,\n                    fixedAngle: {},\n                    fixedDistance: {},\n                },\n                lineStarts: [],\n                lineEnds: [],\n                polygonVertices: [],\n                normalStyle: {},\n                highlightStyle: {\n                    fill: KhanColors.INTERACTING,\n                    stroke: KhanColors.INTERACTING,\n                },\n                labelStyle: {\n                    color: KhanColors.INTERACTIVE,\n                },\n                vertexLabel: \"\",\n                mouseTarget: null,\n            },\n            options,\n        );\n\n        const normalColor = movablePoint.constraints.fixed\n            ? KhanColors.DYNAMIC\n            : KhanColors.INTERACTIVE;\n        movablePoint.normalStyle = _.extend(\n            {},\n            {\n                fill: normalColor,\n                stroke: normalColor,\n            },\n            options.normalStyle,\n        );\n\n        // deprecated: don't use coordX/coordY; use coord[]\n        if (options.coordX !== undefined) {\n            movablePoint.coord[0] = options.coordX;\n        }\n        if (options.coordY !== undefined) {\n            movablePoint.coord[1] = options.coordY;\n        }\n\n        const graph = movablePoint.graph;\n\n        const applySnapAndConstraints = function (coord: any) {\n            // coord should be the scaled coordinate\n\n            // move point away from edge of graph unless it's invisible or fixed\n            if (\n                movablePoint.visible &&\n                movablePoint.bounded &&\n                !movablePoint.constraints.fixed\n            ) {\n                // can't go beyond 10 pixels from the edge\n                coord = graph.constrainToBounds(coord, 10);\n            }\n\n            let coordX = coord[0];\n            let coordY = coord[1];\n\n            // snap coordinates to grid\n            if (movablePoint.snapX !== 0) {\n                coordX =\n                    Math.round(coordX / movablePoint.snapX) *\n                    movablePoint.snapX;\n            }\n            if (movablePoint.snapY !== 0) {\n                coordY =\n                    Math.round(coordY / movablePoint.snapY) *\n                    movablePoint.snapY;\n            }\n\n            // snap to points around circle\n            if (movablePoint.constraints.fixedDistance.snapPoints) {\n                const mouse = graph.scalePoint(coord);\n                let mouseX = mouse[0];\n                let mouseY = mouse[1];\n\n                const snapRadians =\n                    (2 * Math.PI) /\n                    movablePoint.constraints.fixedDistance.snapPoints;\n                const radius = movablePoint.constraints.fixedDistance.dist;\n\n                const centerCoord =\n                    movablePoint.constraints.fixedDistance.point;\n                const centerX =\n                    (centerCoord[0] - graph.range[0][0]) * graph.scale[0];\n                const centerY =\n                    (-centerCoord[1] + graph.range[1][1]) * graph.scale[1];\n\n                let mouseXrel = mouseX - centerX;\n                let mouseYrel = -mouseY + centerY;\n                let radians = Math.atan(mouseYrel / mouseXrel);\n                const outsideArcTanRange = mouseXrel < 0;\n\n                // adjust so that angles increase from 0 to 2 pi as you go\n                // around the circle\n                if (outsideArcTanRange) {\n                    radians += Math.PI;\n                }\n\n                // perform the snap\n                radians = Math.round(radians / snapRadians) * snapRadians;\n\n                // convert from radians back to pixels\n                mouseXrel = radius * Math.cos(radians);\n                mouseYrel = radius * Math.sin(radians);\n                // convert back to coordinates relative to graphie canvas\n                mouseX = mouseXrel + centerX;\n                mouseY = -mouseYrel + centerY;\n                coordX = KhanMath.roundTo(\n                    5,\n                    mouseX / graph.scale[0] + graph.range[0][0],\n                );\n                coordY = KhanMath.roundTo(\n                    5,\n                    graph.range[1][1] - mouseY / graph.scale[1],\n                );\n            }\n\n            const result = movablePoint.applyConstraint([coordX, coordY]);\n            return result;\n        };\n\n        // Using the passed coordinates, apply any constraints and return\n        // the closest coordinates that match the constraints.\n        movablePoint.applyConstraint = function (\n            coord: any,\n            extraConstraints: any,\n            override: any,\n        ) {\n            let newCoord = coord.slice();\n            const constraints: Record<string, any> = {};\n            if (override) {\n                $.extend(\n                    constraints,\n                    {\n                        fixed: false,\n                        constrainX: false,\n                        constrainY: false,\n                        fixedAngle: {},\n                        fixedDistance: {},\n                    },\n                    extraConstraints,\n                );\n            } else {\n                $.extend(constraints, this.constraints, extraConstraints);\n            }\n\n            // constrain to vertical movement\n            if (constraints.constrainX) {\n                newCoord = [this.coord[0], coord[1]];\n\n                // constrain to horizontal movement\n            } else if (constraints.constrainY) {\n                newCoord = [coord[0], this.coord[1]];\n\n                // both distance and angle are constrained\n            } else if (\n                typeof constraints.fixedAngle.angle === \"number\" &&\n                typeof constraints.fixedDistance.dist === \"number\"\n            ) {\n                const vertex =\n                    constraints.fixedAngle.vertex.coord ||\n                    constraints.fixedAngle.vertex;\n                const ref =\n                    constraints.fixedAngle.ref.coord ||\n                    constraints.fixedAngle.ref;\n                const distPoint =\n                    constraints.fixedDistance.point.coord ||\n                    constraints.fixedDistance.point;\n\n                const constrainedAngle =\n                    ((constraints.fixedAngle.angle +\n                        GraphUtils.findAngle(ref, vertex)) *\n                        Math.PI) /\n                    180;\n                const length = constraints.fixedDistance.dist;\n                newCoord[0] =\n                    length * Math.cos(constrainedAngle) + distPoint[0];\n                newCoord[1] =\n                    length * Math.sin(constrainedAngle) + distPoint[1];\n\n                // angle is constrained\n            } else if (typeof constraints.fixedAngle.angle === \"number\") {\n                const vertex =\n                    constraints.fixedAngle.vertex.coord ||\n                    constraints.fixedAngle.vertex;\n                const ref =\n                    constraints.fixedAngle.ref.coord ||\n                    constraints.fixedAngle.ref;\n\n                const constrainedAngle =\n                    ((constraints.fixedAngle.angle +\n                        GraphUtils.findAngle(ref, vertex)) *\n                        Math.PI) /\n                    180;\n                const angle =\n                    (GraphUtils.findAngle(coord, vertex) * Math.PI) / 180;\n                const distance = GraphUtils.getDistance(coord, vertex);\n                let length = distance * Math.cos(constrainedAngle - angle);\n                length = length < 1.0 ? 1.0 : length;\n                newCoord[0] = length * Math.cos(constrainedAngle) + vertex[0];\n                newCoord[1] = length * Math.sin(constrainedAngle) + vertex[1];\n\n                // distance is constrained\n            } else if (typeof constraints.fixedDistance.dist === \"number\") {\n                const distPoint =\n                    constraints.fixedDistance.point.coord ||\n                    constraints.fixedDistance.point;\n\n                let angle = GraphUtils.findAngle(coord, distPoint);\n                const length = constraints.fixedDistance.dist;\n                angle = (angle * Math.PI) / 180;\n                newCoord[0] = length * Math.cos(angle) + distPoint[0];\n                newCoord[1] = length * Math.sin(angle) + distPoint[1];\n\n                // point is fixed\n            } else if (constraints.fixed) {\n                newCoord = movablePoint.coord;\n            }\n            return newCoord;\n        };\n\n        movablePoint.coord = applySnapAndConstraints(movablePoint.coord);\n\n        const highlightScale = 2;\n\n        if (movablePoint.visible) {\n            graph.style(movablePoint.normalStyle, function () {\n                const radii = [\n                    movablePoint.pointSize / graph.scale[0],\n                    movablePoint.pointSize / graph.scale[1],\n                ];\n                const options = {\n                    maxScale: highlightScale,\n                    // Add in 2px of padding to avoid clipping at the edges.\n                    padding: 2,\n                } as const;\n                movablePoint.visibleShape = new WrappedEllipse(\n                    graph,\n                    movablePoint.coord,\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type '[number, number]'.\n                    radii,\n                    options,\n                );\n                movablePoint.visibleShape.attr(\n                    _.omit(movablePoint.normalStyle, \"scale\"),\n                );\n                movablePoint.visibleShape.toFront();\n            });\n        }\n        movablePoint.normalStyle.scale = 1;\n        movablePoint.highlightStyle.scale = highlightScale;\n\n        if (movablePoint.vertexLabel) {\n            movablePoint.labeledVertex = this.label(\n                [0, 0],\n                \"\",\n                \"center\",\n                movablePoint.labelStyle,\n            );\n        }\n\n        movablePoint.drawLabel = function () {\n            if (movablePoint.vertexLabel) {\n                movablePoint.graph.labelVertex({\n                    vertex: movablePoint.coord,\n                    label: movablePoint.labeledVertex,\n                    text: movablePoint.vertexLabel,\n                    style: movablePoint.labelStyle,\n                });\n            }\n        };\n\n        movablePoint.drawLabel();\n\n        movablePoint.grab = function (offset) {\n            // The offset for the gesture. When provided, the movable point will\n            // track the mouse's position, plus this offset. This is typically\n            // used to lock the distance between a user's finger and the movable\n            // point, when dragging.\n            offset = offset || [0, 0];\n\n            $(document).bind(\n                \"vmousemove.point vmouseup.point\",\n                function (event) {\n                    event.preventDefault();\n                    movablePoint.dragging = true;\n                    dragging = true;\n\n                    // Adjust the target coordinate by accounting for the gesture's\n                    // offset.\n                    let coord = kvector.add(graph.getMouseCoord(event), offset);\n\n                    coord = applySnapAndConstraints(coord);\n                    let coordX = coord[0];\n                    let coordY = coord[1];\n                    let mouseX;\n                    let mouseY;\n\n                    if (event.type === \"vmousemove\") {\n                        let doMove = true;\n                        // The caller has the option of adding an onMove() method\n                        // to the movablePoint object we return as a sort of event\n                        // handler. By returning false from onMove(), the move\n                        // can be vetoed, providing custom constraints on where\n                        // the point can be moved. By returning array [x, y], the\n                        // move can be overridden\n                        if (_.isFunction(movablePoint.onMove)) {\n                            const result = movablePoint.onMove(coordX, coordY);\n                            if (result === false) {\n                                doMove = false;\n                            }\n                            if (_.isArray(result)) {\n                                coordX = result[0];\n                                coordY = result[1];\n                            }\n                        }\n                        // coord{X|Y} may have been modified by constraints or\n                        // onMove handler; adjust mouse{X|Y} to match\n                        mouseX = (coordX - graph.range[0][0]) * graph.scale[0];\n                        mouseY = (-coordY + graph.range[1][1]) * graph.scale[1];\n\n                        if (doMove) {\n                            const point = graph.unscalePoint([mouseX, mouseY]);\n                            movablePoint.visibleShape.moveTo(point);\n                            movablePoint.mouseTarget.moveTo(point);\n                            movablePoint.coord = [coordX, coordY];\n                            movablePoint.updateLineEnds();\n                            $(movablePoint).trigger(\"move\");\n                        }\n\n                        movablePoint.drawLabel();\n                    } else if (event.type === \"vmouseup\") {\n                        $(document).unbind(\".point\");\n                        movablePoint.dragging = false;\n                        dragging = false;\n                        if (_.isFunction(movablePoint.onMoveEnd)) {\n                            const result = movablePoint.onMoveEnd(\n                                coordX,\n                                coordY,\n                            );\n                            if (_.isArray(result)) {\n                                coordX = result[0];\n                                coordY = result[1];\n                                mouseX =\n                                    (coordX - graph.range[0][0]) *\n                                    graph.scale[0];\n                                mouseY =\n                                    (-coordY + graph.range[1][1]) *\n                                    graph.scale[1];\n                                const point = graph.unscalePoint([\n                                    mouseX,\n                                    mouseY,\n                                ]);\n                                movablePoint.visibleShape.moveTo(point);\n                                movablePoint.mouseTarget.moveTo(point);\n                                movablePoint.coord = [coordX, coordY];\n                            }\n                        }\n                        if (!movablePoint.highlight) {\n                            movablePoint.visibleShape.animate(\n                                movablePoint.normalStyle,\n                                50,\n                            );\n                            if (movablePoint.onUnhighlight) {\n                                movablePoint.onUnhighlight();\n                            }\n                        }\n                    }\n                },\n            );\n        };\n\n        if (movablePoint.visible && !movablePoint.constraints.fixed) {\n            // the invisible shape in front of the point that gets mouse events\n            if (!movablePoint.mouseTarget) {\n                const radii = graph.unscaleVector(16);\n                const options = {\n                    mouselayer: true,\n                    padding: 0,\n                    disableMouseEventsOnWrapper: true,\n                    interactiveKindForTesting: \"movable-point\",\n                } as const;\n                movablePoint.mouseTarget = new WrappedEllipse(\n                    graph,\n                    movablePoint.coord,\n                    radii,\n                    options,\n                );\n                movablePoint.mouseTarget.attr({fill: \"#000\", opacity: 0.0});\n            }\n\n            const $mouseTarget = $(movablePoint.mouseTarget.getMouseTarget());\n            $mouseTarget.css(\"cursor\", \"move\");\n            $mouseTarget.bind(\n                \"vmousedown vmouseover vmouseout\",\n                function (event) {\n                    if (event.type === \"vmouseover\") {\n                        movablePoint.highlight = true;\n                        if (!dragging) {\n                            movablePoint.visibleShape.animate(\n                                movablePoint.highlightStyle,\n                                50,\n                            );\n                            if (movablePoint.onHighlight) {\n                                movablePoint.onHighlight();\n                            }\n                        }\n                    } else if (event.type === \"vmouseout\") {\n                        movablePoint.highlight = false;\n                        if (!movablePoint.dragging && !dragging) {\n                            movablePoint.visibleShape.animate(\n                                movablePoint.normalStyle,\n                                50,\n                            );\n                            if (movablePoint.onUnhighlight) {\n                                movablePoint.onUnhighlight();\n                            }\n                        }\n                    } else if (\n                        event.type === \"vmousedown\" &&\n                        (event.which === 1 || event.which === 0)\n                    ) {\n                        event.preventDefault();\n\n                        // The offset between the cursor or finger and the initial\n                        // coordinates of the point. This is tracked so as to avoid\n                        // locking the moving point to the user's finger on touch\n                        // devices, which would obscure it, no matter how large we\n                        // made the touch target. Instead, we respect the offset at\n                        // which the point was grabbed for the entirety of the\n                        // gesture, if it's a touch-based interaction.\n                        const startCoord = movablePoint.coord;\n                        const startMouseCoord = graph.getMouseCoord(event);\n                        const isMouse = !(\"ontouchstart\" in window);\n                        const touchOffset = isMouse\n                            ? [0, 0]\n                            : kvector.subtract(startCoord, startMouseCoord);\n\n                        movablePoint.grab(touchOffset);\n                    }\n                },\n            );\n        }\n\n        // Method to let the caller animate the point to a new position.\n        // Useful as part of a hint to show the user the correct place\n        // to put the point.\n        movablePoint.moveTo = function (\n            coordX: any,\n            coordY: any,\n            updateLines: any,\n        ) {\n            const distance = GraphUtils.getDistance(\n                this.graph.scalePoint([coordX, coordY]),\n                this.graph.scalePoint(this.coord),\n            );\n\n            const time = distance * 5;\n\n            const cb =\n                updateLines &&\n                function (coord: any) {\n                    movablePoint.coord = coord;\n                    movablePoint.updateLineEnds();\n                };\n            this.visibleShape.animateTo([coordX, coordY], time, cb);\n            this.mouseTarget.animateTo([coordX, coordY], time, cb);\n            this.coord = [coordX, coordY];\n            if (_.isFunction(this.onMove)) {\n                this.onMove(coordX, coordY);\n            }\n        };\n\n        // After moving the point, call this to update all line segments\n        // terminating at the point\n        movablePoint.updateLineEnds = function () {\n            $(this.lineStarts).each(function () {\n                this.coordA = movablePoint.coord;\n                this.transform();\n            });\n            $(this.lineEnds).each(function () {\n                this.coordZ = movablePoint.coord;\n                this.transform();\n            });\n            $(this.polygonVertices).each(function () {\n                this.transform();\n            });\n        };\n\n        // Put the point at a new position without any checks, animation,\n        // or callbacks\n        movablePoint.setCoord = function (coord: any) {\n            if (this.visible) {\n                this.visibleShape.moveTo(coord);\n                if (this.mouseTarget != null) {\n                    this.mouseTarget.moveTo(coord);\n                }\n            }\n            this.coord = coord.slice();\n        };\n\n        // Put the point at the new position, checking that it is\n        // within the graph's bounds\n        movablePoint.setCoordConstrained = function (coord: any) {\n            this.setCoord(applySnapAndConstraints(coord));\n        };\n\n        // Change z-order to back\n        movablePoint.toBack = function () {\n            if (this.visible) {\n                if (this.mouseTarget != null) {\n                    this.mouseTarget.toBack();\n                }\n                this.visibleShape.toBack();\n            }\n        };\n\n        // Change z-order to front\n        movablePoint.toFront = function () {\n            if (this.visible) {\n                if (this.mouseTarget != null) {\n                    this.mouseTarget.toFront();\n                }\n                this.visibleShape.toFront();\n            }\n        };\n\n        movablePoint.remove = function () {\n            if (this.visibleShape) {\n                this.visibleShape.remove();\n            }\n            if (this.mouseTarget) {\n                this.mouseTarget.remove();\n            }\n            if (this.labeledVertex) {\n                this.labeledVertex.remove();\n            }\n        };\n\n        return movablePoint;\n    },\n\n    // MovableLineSegment is a line segment that can be dragged around the\n    // screen. By attaching a smartPoint to each (or one) end, the ends can be\n    // manipulated individually.\n    //\n    // To use with smartPoints, add the smartPoints first, then:\n    //   addMovableLineSegment({ pointA: smartPoint1, pointZ: smartPoint2 });\n    // Or just one end:\n    //   addMovableLineSegment({ pointA: smartPoint, coordZ: [0, 0] });\n    //\n    // Include \"fixed: true\" in the options if you don't want the entire line\n    // to be draggable (you can still use points to make the endpoints\n    // draggable)\n    //\n    // The returned object includes the following properties/methods:\n    //\n    //   - lineSegment.coordA / lineSegment.coordZ\n    //         The coordinates of each end of the line segment\n    //\n    //   - lineSegment.transform(syncToPoints)\n    //         Repositions the line segment. Call after changing coordA\n    //         and/or coordZ, or pass syncToPoints = true to use the current\n    //         position of the corresponding smartPoints, if the segment was\n    //         defined using smartPoints\n    //\n    addMovableLineSegment: function (options: any) {\n        const lineSegment = $.extend(\n            {\n                graph: this,\n                coordA: [0, 0],\n                coordZ: [1, 1],\n                snapX: 0,\n                snapY: 0,\n                fixed: false,\n                ticks: 0,\n                normalStyle: {},\n                highlightStyle: {\n                    stroke: KhanColors.INTERACTING,\n                    \"stroke-width\": 6,\n                },\n                labelStyle: {\n                    stroke: KhanColors.INTERACTIVE,\n                    color: KhanColors.INTERACTIVE,\n                },\n                highlight: false,\n                dragging: false,\n                tick: [],\n                extendLine: false,\n                extendRay: false,\n                constraints: {\n                    fixed: false,\n                    constrainX: false,\n                    constrainY: false,\n                },\n                sideLabel: \"\",\n                vertexLabels: [],\n                numArrows: 0,\n                numTicks: 0,\n                movePointsWithLine: false,\n            },\n            options,\n        );\n\n        const normalColor = lineSegment.fixed\n            ? KhanColors.DYNAMIC\n            : KhanColors.INTERACTIVE;\n        lineSegment.normalStyle = _.extend(\n            {},\n            {\n                \"stroke-width\": 2,\n                stroke: normalColor,\n            },\n            options.normalStyle,\n        );\n        // arrowStyle should be kept in sync with styling of the line\n        lineSegment.arrowStyle = _.extend({}, lineSegment.normalStyle, {\n            color: lineSegment.normalStyle.stroke,\n        });\n\n        // If the line segment is defined by movablePoints, coordA/coordZ are\n        // owned by the points, otherwise they're owned by us\n        if (options.pointA !== undefined) {\n            lineSegment.coordA = options.pointA.coord;\n            lineSegment.pointA.lineStarts.push(lineSegment);\n        } else if (options.coordA !== undefined) {\n            lineSegment.coordA = options.coordA.slice();\n        }\n\n        if (options.pointZ !== undefined) {\n            lineSegment.coordZ = options.pointZ.coord;\n            lineSegment.pointZ.lineEnds.push(lineSegment);\n        } else if (options.coordA !== undefined) {\n            lineSegment.coordA = lineSegment.coordA.slice();\n        }\n\n        const graph = lineSegment.graph;\n\n        graph.style(lineSegment.normalStyle);\n        for (let i = 0; i < lineSegment.ticks; ++i) {\n            lineSegment.tick[i] = InteractiveUtils.bogusShape;\n        }\n        let path = GraphUtils.unscaledSvgPath([\n            [0, 0],\n            [1, 0],\n        ]);\n        for (let i = 0; i < lineSegment.ticks; ++i) {\n            const tickoffset =\n                0.5 - (lineSegment.ticks - 1 + i * 2) / graph.scale[0];\n            // TODO(kevinb) figure out why path isn't being used\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            path += GraphUtils.unscaledSvgPath([\n                [tickoffset, -7],\n                [tickoffset, 7],\n            ]);\n        }\n\n        options = {\n            thickness: Math.max(\n                lineSegment.normalStyle[\"stroke-width\"],\n                lineSegment.highlightStyle[\"stroke-width\"],\n            ),\n        };\n        lineSegment.visibleLine = new WrappedLine(\n            graph,\n            [0, 0],\n            [1, 0],\n            options,\n        );\n        lineSegment.visibleLine.attr(lineSegment.normalStyle);\n\n        // Add mouse target\n        if (!lineSegment.fixed) {\n            const options = {\n                thickness: 30,\n                mouselayer: true,\n                interactiveKindForTesting: \"movable-line\",\n            } as const;\n            lineSegment.mouseTarget = new WrappedLine(\n                graph,\n                [0, 0],\n                [1, 0],\n                options,\n            );\n            lineSegment.mouseTarget.attr({fill: \"#000\", opacity: 0.0});\n        }\n\n        // Reposition the line segment. Call after changing coordA and/or\n        // coordZ, or pass syncToPoints = true to use the current position of\n        // the corresponding movablePoints, if the segment was defined using\n        // movablePoints\n        lineSegment.transform = function (syncToPoints) {\n            if (syncToPoints) {\n                if (typeof this.pointA === \"object\") {\n                    this.coordA = this.pointA.coord;\n                }\n                if (typeof this.pointZ === \"object\") {\n                    this.coordZ = this.pointZ.coord;\n                }\n            }\n\n            const getScaledAngle = function (line) {\n                const scaledA = line.graph.scalePoint(line.coordA);\n                const scaledZ = line.graph.scalePoint(line.coordZ);\n                return kvector.polarDegFromCart(\n                    kvector.subtract(scaledZ, scaledA),\n                )[1];\n            };\n\n            const getClipPoint = function (graph: any, coord, angle: number) {\n                graph = lineSegment.graph;\n                const xExtent = graph.range[0][1] - graph.range[0][0];\n                const yExtent = graph.range[1][1] - graph.range[1][0];\n\n                const distance = xExtent + yExtent;\n                const angleVec = graph.unscaleVector(\n                    kvector.cartFromPolarDeg(1, angle),\n                );\n                const distVec = kvector.scale(\n                    kvector.normalize(angleVec),\n                    distance,\n                );\n                const farCoord = kvector.add(coord, distVec);\n                const scaledAngle = kvector.polarDegFromCart(angleVec)[1];\n                const clipPoint = graph.constrainToBoundsOnAngle(\n                    farCoord,\n                    4,\n                    (scaledAngle * Math.PI) / 180,\n                );\n                return clipPoint;\n            };\n\n            const angle = getScaledAngle(this);\n            let start = this.coordA;\n            let end = this.coordZ;\n\n            // Extend start, end if necessary (i.e., if not a line segment)\n            if (this.extendLine) {\n                start = getClipPoint(graph, start, 360 - angle);\n                end = getClipPoint(graph, end, (540 - angle) % 360);\n            } else if (this.extendRay) {\n                end = getClipPoint(graph, start, 360 - angle);\n            }\n\n            const elements = [this.visibleLine];\n            if (!this.fixed) {\n                elements.push(this.mouseTarget);\n            }\n            _.each(elements, function (element) {\n                element.moveTo(start, end);\n            });\n\n            const createArrow = function (graph: any, style) {\n                const center = [0.75, 0];\n                let points = [\n                    [-3, 4],\n                    [-2.75, 2.5],\n                    [0, 0.25],\n                    center,\n                    [0, -0.25],\n                    [-2.75, -2.5],\n                    [-3, -4],\n                ];\n\n                const scale = 1.4;\n                points = _.map(points, function (point) {\n                    const pv = kvector.subtract(point, center);\n                    const pvScaled = kvector.scale(pv, scale);\n                    return kvector.add(center, pvScaled);\n                });\n\n                const createCubicPath = function (points: any) {\n                    let path = \"M\" + points[0][0] + \" \" + points[0][1];\n                    for (let i = 1; i < points.length; i += 3) {\n                        path +=\n                            \"C\" +\n                            points[i][0] +\n                            \" \" +\n                            points[i][1] +\n                            \" \" +\n                            points[i + 1][0] +\n                            \" \" +\n                            points[i + 1][1] +\n                            \" \" +\n                            points[i + 2][0] +\n                            \" \" +\n                            points[i + 2][1];\n                    }\n                    return path;\n                };\n\n                const unscaledPoints = _.map(points, graph.unscalePoint);\n                const options = {\n                    center: graph.unscalePoint(center),\n                    createPath: createCubicPath,\n                } as const;\n                const arrowHead = new WrappedPath(\n                    graph,\n                    unscaledPoints,\n                    options,\n                );\n                arrowHead.attr(\n                    _.extend(\n                        {\n                            \"stroke-linejoin\": \"round\",\n                            \"stroke-linecap\": \"round\",\n                            \"stroke-dasharray\": \"\",\n                        },\n                        style,\n                    ),\n                );\n\n                // Add custom function for transforming arrowheads that\n                // accounts for center, scaling, etc.\n                arrowHead.toCoordAtAngle = function (\n                    coord: Coord,\n                    angle: number,\n                ): void {\n                    const clipPoint = graph.scalePoint(\n                        getClipPoint(graph, coord, angle),\n                    );\n                    const do3dTransform = getCanUse3dTransform();\n                    arrowHead.transform(\n                        \"translateX(\" +\n                            (clipPoint[0] + scale * center[0]) +\n                            \"px) \" +\n                            \"translateY(\" +\n                            (clipPoint[1] + scale * center[1]) +\n                            \"px) \" +\n                            (do3dTransform ? \"translateZ(0) \" : \"\") +\n                            \"rotate(\" +\n                            (360 - KhanMath.bound(angle)) +\n                            \"deg)\",\n                    );\n                };\n\n                return arrowHead;\n            };\n\n            // Add arrows\n            if (this._arrows == null) {\n                this._arrows = [];\n\n                if (this.extendLine) {\n                    this._arrows.push(createArrow(graph, this.normalStyle));\n                    this._arrows.push(createArrow(graph, this.normalStyle));\n                } else if (this.extendRay) {\n                    this._arrows.push(createArrow(graph, this.normalStyle));\n                }\n            }\n\n            const coordForArrow = [this.coordA, this.coordZ];\n            const angleForArrow = [360 - angle, (540 - angle) % 360];\n            _.each(this._arrows, function (arrow, i) {\n                arrow.toCoordAtAngle(coordForArrow[i], angleForArrow[i]);\n            });\n\n            // Temporary objects: array of SVG nodes that get recreated on drag\n            _.invoke(this.temp, \"remove\");\n            this.temp = [];\n\n            const isClockwise =\n                this.coordA[0] < this.coordZ[0] ||\n                (this.coordA[0] === this.coordZ[0] &&\n                    this.coordA[1] > this.coordZ[1]);\n\n            // Update side label\n            if (this.sideLabel) {\n                this.temp.push(\n                    this.graph.labelSide({\n                        point1: this.coordA,\n                        point2: this.coordZ,\n                        label: this.labeledSide,\n                        text: this.sideLabel,\n                        numArrows: this.numArrows,\n                        numTicks: this.numTicks,\n                        clockwise: isClockwise,\n                        style: this.labelStyle,\n                    }),\n                );\n            }\n\n            // Update vertex labels\n            if (this.vertexLabels.length) {\n                this.graph.labelVertex({\n                    vertex: this.coordA,\n                    point3: this.coordZ,\n                    label: this.labeledVertices[0],\n                    text: this.vertexLabels[0],\n                    clockwise: isClockwise,\n                    style: this.labelStyle,\n                });\n\n                this.graph.labelVertex({\n                    point1: this.coordA,\n                    vertex: this.coordZ,\n                    label: this.labeledVertices[1],\n                    text: this.vertexLabels[1],\n                    clockwise: isClockwise,\n                    style: this.labelStyle,\n                });\n            }\n\n            this.temp = _.flatten(this.temp);\n        };\n\n        // Change z-order to back;\n        lineSegment.toBack = function () {\n            if (!lineSegment.fixed) {\n                lineSegment.mouseTarget.toBack();\n            }\n            lineSegment.visibleLine.toBack();\n        };\n\n        // Change z-order to front\n        lineSegment.toFront = function () {\n            if (!lineSegment.fixed) {\n                lineSegment.mouseTarget.toFront();\n            }\n            lineSegment.visibleLine.toFront();\n        };\n\n        lineSegment.remove = function () {\n            if (!lineSegment.fixed) {\n                lineSegment.mouseTarget.remove();\n            }\n            lineSegment.visibleLine.remove();\n            if (lineSegment.labeledSide) {\n                lineSegment.labeledSide.remove();\n            }\n            if (lineSegment.labeledVertices) {\n                _.invoke(lineSegment.labeledVertices, \"remove\");\n            }\n            if (lineSegment._arrows) {\n                _.invoke(lineSegment._arrows, \"remove\");\n            }\n            if (lineSegment.temp.length) {\n                _.invoke(lineSegment.temp, \"remove\");\n            }\n        };\n\n        lineSegment.hide = function () {\n            lineSegment.visibleLine.hide();\n            if (lineSegment.temp.length) {\n                _.invoke(lineSegment.temp, \"hide\");\n            }\n            if (lineSegment._arrows) {\n                _.invoke(lineSegment._arrows, \"hide\");\n            }\n        };\n\n        lineSegment.show = function () {\n            lineSegment.visibleLine.show();\n            if (lineSegment.temp.length) {\n                _.invoke(lineSegment.temp, \"show\");\n            }\n            if (lineSegment._arrows) {\n                _.invoke(lineSegment._arrows, \"show\");\n            }\n        };\n\n        if (lineSegment.sideLabel) {\n            lineSegment.labeledSide = this.label(\n                [0, 0],\n                \"\",\n                \"center\",\n                lineSegment.labelStyle,\n            );\n        }\n\n        if (lineSegment.vertexLabels.length) {\n            lineSegment.labeledVertices = _.map(\n                lineSegment.vertexLabels,\n                function (label) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    return this.label(\n                        [0, 0],\n                        \"\",\n                        \"center\",\n                        lineSegment.labelStyle,\n                    );\n                },\n                this,\n            );\n        }\n\n        if (!lineSegment.fixed && !lineSegment.constraints.fixed) {\n            const $mouseTarget = $(lineSegment.mouseTarget.getMouseTarget());\n            $mouseTarget.css(\"cursor\", \"move\");\n            $mouseTarget.bind(\n                \"vmousedown vmouseover vmouseout\",\n                function (event) {\n                    if (event.type === \"vmouseover\") {\n                        if (!dragging) {\n                            lineSegment.highlight = true;\n                            lineSegment.visibleLine.animate(\n                                lineSegment.highlightStyle,\n                                50,\n                            );\n                            lineSegment.arrowStyle = _.extend(\n                                {},\n                                lineSegment.arrowStyle,\n                                {\n                                    color: lineSegment.highlightStyle.stroke,\n                                    stroke: lineSegment.highlightStyle.stroke,\n                                },\n                            );\n                            lineSegment.transform();\n                        }\n                    } else if (event.type === \"vmouseout\") {\n                        lineSegment.highlight = false;\n                        if (!lineSegment.dragging) {\n                            lineSegment.visibleLine.animate(\n                                lineSegment.normalStyle,\n                                50,\n                            );\n                            lineSegment.arrowStyle = _.extend(\n                                {},\n                                lineSegment.arrowStyle,\n                                {\n                                    color: lineSegment.normalStyle.stroke,\n                                    stroke: lineSegment.normalStyle.stroke,\n                                },\n                            );\n                            lineSegment.transform();\n                        }\n                    } else if (\n                        event.type === \"vmousedown\" &&\n                        (event.which === 1 || event.which === 0)\n                    ) {\n                        event.preventDefault();\n                        let coordX =\n                            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                            (event.pageX -\n                                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                $(graph.raphael.canvas.parentNode).offset()\n                                    .left) /\n                                graph.scale[0] +\n                            graph.range[0][0];\n                        let coordY =\n                            graph.range[1][1] -\n                            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                            (event.pageY -\n                                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                $(graph.raphael.canvas.parentNode).offset()\n                                    .top) /\n                                graph.scale[1];\n                        if (lineSegment.snapX > 0) {\n                            coordX =\n                                Math.round(coordX / lineSegment.snapX) *\n                                lineSegment.snapX;\n                        }\n                        if (lineSegment.snapY > 0) {\n                            coordY =\n                                Math.round(coordY / lineSegment.snapY) *\n                                lineSegment.snapY;\n                        }\n                        const mouseOffsetA = [\n                            lineSegment.coordA[0] - coordX,\n                            lineSegment.coordA[1] - coordY,\n                        ];\n                        const mouseOffsetZ = [\n                            lineSegment.coordZ[0] - coordX,\n                            lineSegment.coordZ[1] - coordY,\n                        ];\n\n                        const offsetLeft = -Math.min(\n                            graph.scaleVector(mouseOffsetA)[0],\n                            graph.scaleVector(mouseOffsetZ)[0],\n                        );\n                        const offsetRight = Math.max(\n                            graph.scaleVector(mouseOffsetA)[0],\n                            graph.scaleVector(mouseOffsetZ)[0],\n                        );\n                        const offsetTop = Math.max(\n                            graph.scaleVector(mouseOffsetA)[1],\n                            graph.scaleVector(mouseOffsetZ)[1],\n                        );\n                        const offsetBottom = -Math.min(\n                            graph.scaleVector(mouseOffsetA)[1],\n                            graph.scaleVector(mouseOffsetZ)[1],\n                        );\n\n                        $(document).bind(\n                            \"vmousemove.lineSegment vmouseup.lineSegment\",\n                            function (event) {\n                                event.preventDefault();\n                                lineSegment.dragging = true;\n                                dragging = true;\n\n                                let mouseX =\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    event.pageX -\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    $(graph.raphael.canvas.parentNode).offset()\n                                        .left;\n                                let mouseY =\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    event.pageY -\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    $(graph.raphael.canvas.parentNode).offset()\n                                        .top;\n                                // no part of the line segment can go beyond 10\n                                // pixels from the edge\n                                mouseX = Math.max(\n                                    offsetLeft + 10,\n                                    Math.min(\n                                        graph.xpixels - 10 - offsetRight,\n                                        mouseX,\n                                    ),\n                                );\n                                mouseY = Math.max(\n                                    offsetTop + 10,\n                                    Math.min(\n                                        graph.ypixels - 10 - offsetBottom,\n                                        mouseY,\n                                    ),\n                                );\n\n                                let coordX =\n                                    mouseX / graph.scale[0] + graph.range[0][0];\n                                let coordY =\n                                    graph.range[1][1] - mouseY / graph.scale[1];\n                                if (lineSegment.snapX > 0) {\n                                    coordX =\n                                        Math.round(coordX / lineSegment.snapX) *\n                                        lineSegment.snapX;\n                                }\n                                if (lineSegment.snapY > 0) {\n                                    coordY =\n                                        Math.round(coordY / lineSegment.snapY) *\n                                        lineSegment.snapY;\n                                }\n\n                                if (event.type === \"vmousemove\") {\n                                    if (lineSegment.constraints.constrainX) {\n                                        coordX =\n                                            lineSegment.coordA[0] -\n                                            mouseOffsetA[0];\n                                    }\n                                    if (lineSegment.constraints.constrainY) {\n                                        coordY =\n                                            lineSegment.coordA[1] -\n                                            mouseOffsetA[1];\n                                    }\n                                    const dX =\n                                        coordX +\n                                        mouseOffsetA[0] -\n                                        lineSegment.coordA[0];\n                                    const dY =\n                                        coordY +\n                                        mouseOffsetA[1] -\n                                        lineSegment.coordA[1];\n                                    lineSegment.coordA = [\n                                        coordX + mouseOffsetA[0],\n                                        coordY + mouseOffsetA[1],\n                                    ];\n                                    lineSegment.coordZ = [\n                                        coordX + mouseOffsetZ[0],\n                                        coordY + mouseOffsetZ[1],\n                                    ];\n                                    lineSegment.transform();\n\n                                    if (lineSegment.movePointsWithLine) {\n                                        // If the points are movablePoints, adjust\n                                        // their coordinates when the line itself is\n                                        // dragged\n                                        if (\n                                            typeof lineSegment.pointA ===\n                                            \"object\"\n                                        ) {\n                                            lineSegment.pointA.setCoord([\n                                                lineSegment.pointA.coord[0] +\n                                                    dX,\n                                                lineSegment.pointA.coord[1] +\n                                                    dY,\n                                            ]);\n                                        }\n                                        if (\n                                            typeof lineSegment.pointZ ===\n                                            \"object\"\n                                        ) {\n                                            lineSegment.pointZ.setCoord([\n                                                lineSegment.pointZ.coord[0] +\n                                                    dX,\n                                                lineSegment.pointZ.coord[1] +\n                                                    dY,\n                                            ]);\n                                        }\n                                    }\n\n                                    if (_.isFunction(lineSegment.onMove)) {\n                                        lineSegment.onMove(dX, dY);\n                                    }\n                                } else if (event.type === \"vmouseup\") {\n                                    $(document).unbind(\".lineSegment\");\n                                    lineSegment.dragging = false;\n                                    dragging = false;\n                                    if (!lineSegment.highlight) {\n                                        lineSegment.visibleLine.animate(\n                                            lineSegment.normalStyle,\n                                            50,\n                                        );\n                                        lineSegment.arrowStyle = _.extend(\n                                            {},\n                                            lineSegment.arrowStyle,\n                                            {\n                                                color: lineSegment.normalStyle\n                                                    .stroke,\n                                                stroke: lineSegment.normalStyle\n                                                    .stroke,\n                                            },\n                                        );\n                                        lineSegment.transform();\n                                    }\n                                    if (_.isFunction(lineSegment.onMoveEnd)) {\n                                        lineSegment.onMoveEnd();\n                                    }\n                                }\n\n                                $(lineSegment).trigger(\"move\");\n                            },\n                        );\n                    }\n                },\n            );\n        }\n\n        if (lineSegment.pointA !== undefined) {\n            lineSegment.pointA.toFront();\n        }\n        if (lineSegment.pointZ !== undefined) {\n            lineSegment.pointZ.toFront();\n        }\n        lineSegment.transform();\n        return lineSegment;\n    },\n\n    // MovablePolygon is a polygon that can be dragged around the screen.\n    // By attaching a smartPoint to each vertex, the points can be\n    // manipulated individually.\n    //\n    // To use with smartPoints, add the smartPoints first, then:\n    //   addMovablePolygon({points: [...]});\n    //\n    // Include \"fixed: true\" in the options if you don't want the entire\n    // polygon to be draggable (you can still use points to make the\n    // vertices draggable)\n    //\n    // The returned object includes the following properties/methods:\n    //\n    //   - polygon.points\n    //         The polygon's dynamic smartPoints and static coordinates, mixed.\n    //\n    //   - polygon.coords\n    //         The polygon's current coordinates (generated, don't edit).\n    //\n    //   - polygon.transform()\n    //         Repositions the polygon. Call after changing any points.\n    //\n    addMovablePolygon: function (options) {\n        const graphie = this;\n\n        const polygon = $.extend(\n            {\n                snapX: 0,\n                snapY: 0,\n                fixed: false,\n                constrainToGraph: true,\n                normalStyle: {},\n                highlightStyle: {\n                    stroke: KhanColors.INTERACTING,\n                    \"stroke-width\": 2,\n                    fill: KhanColors.INTERACTING,\n                    \"fill-opacity\": 0.05,\n                },\n                pointHighlightStyle: {\n                    fill: KhanColors.INTERACTING,\n                    stroke: KhanColors.INTERACTING,\n                },\n                labelStyle: {\n                    stroke: KhanColors.DYNAMIC,\n                    \"stroke-width\": 1,\n                    color: KhanColors.DYNAMIC,\n                },\n                angleLabels: [],\n                showRightAngleMarkers: [],\n                sideLabels: [],\n                vertexLabels: [],\n                numArcs: [],\n                numArrows: [],\n                numTicks: [],\n                updateOnPointMove: true,\n                closed: true,\n            },\n            _.omit(options, \"points\"),\n        );\n\n        const normalColor = polygon.fixed\n            ? KhanColors.DYNAMIC\n            : KhanColors.INTERACTIVE;\n        polygon.normalStyle = _.extend(\n            {\n                \"stroke-width\": 2,\n                \"fill-opacity\": 0,\n                fill: normalColor,\n                stroke: normalColor,\n            },\n            options.normalStyle,\n        );\n\n        // don't deep copy the points array with $.extend;\n        // we may want to append to it later for click-to-add-points\n        polygon.points = options.points;\n\n        const isPoint = function (coordOrPoint: any) {\n            return !_.isArray(coordOrPoint);\n        };\n\n        polygon.update = function () {\n            const n = polygon.points.length;\n\n            // Update coords\n            polygon.coords = _.map(polygon.points, function (coordOrPoint, i) {\n                if (isPoint(coordOrPoint)) {\n                    return coordOrPoint.coord;\n                }\n                return coordOrPoint;\n            });\n\n            // Calculate bounding box\n            polygon.left = _.min(_.pluck(polygon.coords, 0));\n            polygon.right = _.max(_.pluck(polygon.coords, 0));\n            polygon.top = _.max(_.pluck(polygon.coords, 1));\n            polygon.bottom = _.min(_.pluck(polygon.coords, 1));\n\n            let scaledCoords = _.map(polygon.coords, function (coord) {\n                return graphie.scalePoint(coord);\n            });\n\n            // Create path\n            if (polygon.closed) {\n                scaledCoords.push(true);\n            } else {\n                // For open polygons, concatenate a reverse of the path,\n                // to remove the inside area of the path, which would\n                // otherwise be clickable (even if the closing line segment\n                // wasn't drawn\n                scaledCoords = scaledCoords.concat(\n                    _.clone(scaledCoords).reverse(),\n                );\n            }\n            polygon.path = GraphUtils.unscaledSvgPath(scaledCoords);\n\n            // Temporary objects\n            _.invoke(polygon.temp, \"remove\");\n            polygon.temp = [];\n\n            const isClockwise = clockwise(polygon.coords);\n\n            // Update angle labels\n            if (\n                polygon.angleLabels.length ||\n                polygon.showRightAngleMarkers.length\n            ) {\n                _.each(polygon.labeledAngles, function (label, i) {\n                    polygon.temp.push(\n                        graphie.labelAngle({\n                            point1: polygon.coords[(i - 1 + n) % n],\n                            vertex: polygon.coords[i],\n                            point3: polygon.coords[(i + 1) % n],\n                            label: label,\n                            text: polygon.angleLabels[i],\n                            showRightAngleMarker:\n                                polygon.showRightAngleMarkers[i],\n                            numArcs: polygon.numArcs[i],\n                            clockwise: isClockwise,\n                            style: polygon.labelStyle,\n                        }),\n                    );\n                });\n            }\n\n            // Update side labels\n            if (polygon.sideLabels.length) {\n                _.each(polygon.labeledSides, function (label, i) {\n                    polygon.temp.push(\n                        graphie.labelSide({\n                            point1: polygon.coords[i],\n                            point2: polygon.coords[(i + 1) % n],\n                            label: label,\n                            text: polygon.sideLabels[i],\n                            numArrows: polygon.numArrows[i],\n                            numTicks: polygon.numTicks[i],\n                            clockwise: isClockwise,\n                            style: polygon.labelStyle,\n                        }),\n                    );\n                });\n            }\n\n            // Update vertex labels\n            if (polygon.vertexLabels.length) {\n                _.each(polygon.labeledVertices, function (label, i) {\n                    graphie.labelVertex({\n                        point1: polygon.coords[(i - 1 + n) % n],\n                        vertex: polygon.coords[i],\n                        point3: polygon.coords[(i + 1) % n],\n                        label: label,\n                        text: polygon.vertexLabels[i],\n                        clockwise: isClockwise,\n                        style: polygon.labelStyle,\n                    });\n                });\n            }\n\n            polygon.temp = _.flatten(polygon.temp);\n        };\n\n        polygon.transform = function () {\n            polygon.update();\n\n            polygon.visibleShape.attr({path: polygon.path});\n\n            if (!polygon.fixed) {\n                polygon.mouseTarget.attr({path: polygon.path});\n            }\n        };\n\n        polygon.remove = function () {\n            polygon.visibleShape.remove();\n\n            if (!polygon.fixed) {\n                polygon.mouseTarget.remove();\n            }\n\n            if (polygon.labeledAngles) {\n                _.invoke(polygon.labeledAngles, \"remove\");\n            }\n\n            if (polygon.labeledSides) {\n                _.invoke(polygon.labeledSides, \"remove\");\n            }\n\n            if (polygon.labeledVertices) {\n                _.invoke(polygon.labeledVertices, \"remove\");\n            }\n\n            if (polygon.temp.length) {\n                _.invoke(polygon.temp, \"remove\");\n            }\n        };\n\n        polygon.toBack = function () {\n            if (!polygon.fixed) {\n                polygon.mouseTarget.toBack();\n            }\n\n            polygon.visibleShape.toBack();\n        };\n\n        polygon.toFront = function () {\n            if (!polygon.fixed) {\n                polygon.mouseTarget.toFront();\n            }\n\n            polygon.visibleShape.toFront();\n        };\n\n        // Setup\n\n        if (polygon.updateOnPointMove) {\n            _.each(_.filter(polygon.points, isPoint), function (coordOrPoint) {\n                coordOrPoint.polygonVertices.push(polygon);\n            });\n        }\n\n        polygon.coords = new Array(polygon.points.length);\n\n        if (polygon.angleLabels.length) {\n            const numLabels = Math.max(\n                polygon.angleLabels.length,\n                polygon.showRightAngleMarkers.length,\n            );\n            polygon.labeledAngles = _.times(\n                numLabels,\n                function () {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    return this.label([0, 0], \"\", \"center\", polygon.labelStyle);\n                },\n                this,\n            );\n        }\n\n        if (polygon.sideLabels.length) {\n            polygon.labeledSides = _.map(\n                polygon.sideLabels,\n                function (label) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    return this.label([0, 0], \"\", \"center\", polygon.labelStyle);\n                },\n                this,\n            );\n        }\n\n        if (polygon.vertexLabels.length) {\n            polygon.labeledVertices = _.map(\n                polygon.vertexLabels,\n                function (label) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    return this.label([0, 0], \"\", \"center\", polygon.labelStyle);\n                },\n                this,\n            );\n        }\n\n        polygon.update();\n\n        polygon.visibleShape = graphie.raphael.path(polygon.path);\n        polygon.visibleShape.attr(polygon.normalStyle);\n\n        if (!polygon.fixed) {\n            polygon.mouseTarget = graphie.mouselayer.path(polygon.path);\n            polygon.mouseTarget.attr({\n                fill: \"#000\",\n                opacity: 0,\n                cursor: \"move\",\n            });\n\n            $(polygon.mouseTarget[0]).bind(\n                \"vmousedown vmouseover vmouseout\",\n                function (event) {\n                    if (event.type === \"vmouseover\") {\n                        if (!dragging || polygon.dragging) {\n                            polygon.highlight = true;\n                            polygon.visibleShape.animate(\n                                polygon.highlightStyle,\n                                50,\n                            );\n                            _.each(\n                                _.filter(polygon.points, isPoint),\n                                function (point) {\n                                    point.visibleShape.animate(\n                                        polygon.pointHighlightStyle,\n                                        50,\n                                    );\n                                },\n                            );\n                        }\n                    } else if (event.type === \"vmouseout\") {\n                        polygon.highlight = false;\n                        if (!polygon.dragging) {\n                            polygon.visibleShape.animate(\n                                polygon.normalStyle,\n                                50,\n                            );\n                            const points = _.filter(polygon.points, isPoint);\n                            if (!_.any(_.pluck(points, \"dragging\"))) {\n                                _.each(points, function (point) {\n                                    point.visibleShape.animate(\n                                        point.normalStyle,\n                                        50,\n                                    );\n                                });\n                            }\n                        }\n                    } else if (\n                        event.type === \"vmousedown\" &&\n                        (event.which === 1 || event.which === 0)\n                    ) {\n                        event.preventDefault();\n\n                        _.each(\n                            _.filter(polygon.points, isPoint),\n                            function (point) {\n                                point.dragging = true;\n                            },\n                        );\n\n                        let startX =\n                            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                            (event.pageX -\n                                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                $(graphie.raphael.canvas.parentNode).offset()\n                                    .left) /\n                                graphie.scale[0] +\n                            graphie.range[0][0];\n                        let startY =\n                            graphie.range[1][1] -\n                            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                            (event.pageY -\n                                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                $(graphie.raphael.canvas.parentNode).offset()\n                                    .top) /\n                                graphie.scale[1];\n                        if (polygon.snapX > 0) {\n                            startX =\n                                Math.round(startX / polygon.snapX) *\n                                polygon.snapX;\n                        }\n                        if (polygon.snapY > 0) {\n                            startY =\n                                Math.round(startY / polygon.snapY) *\n                                polygon.snapY;\n                        }\n                        let lastX = startX;\n                        let lastY = startY;\n\n                        const polygonCoords = polygon.coords.slice();\n\n                        const offsetLeft =\n                            (startX - polygon.left) * graphie.scale[0];\n                        const offsetRight =\n                            (polygon.right - startX) * graphie.scale[0];\n                        const offsetTop =\n                            (polygon.top - startY) * graphie.scale[1];\n                        const offsetBottom =\n                            (startY - polygon.bottom) * graphie.scale[1];\n\n                        $(document).bind(\n                            \"vmousemove.polygon vmouseup.polygon\",\n                            function (event) {\n                                event.preventDefault();\n\n                                polygon.dragging = true;\n                                dragging = true;\n\n                                let mouseX =\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    event.pageX -\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    $(\n                                        graphie.raphael.canvas.parentNode,\n                                    ).offset().left;\n                                let mouseY =\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    event.pageY -\n                                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                                    $(\n                                        graphie.raphael.canvas.parentNode,\n                                    ).offset().top;\n\n                                // no part of the polygon can go beyond 10 pixels from\n                                // the edge\n                                if (polygon.constrainToGraph) {\n                                    mouseX = Math.max(\n                                        offsetLeft + 10,\n                                        Math.min(\n                                            graphie.xpixels - 10 - offsetRight,\n                                            mouseX,\n                                        ),\n                                    );\n                                    mouseY = Math.max(\n                                        offsetTop + 10,\n                                        Math.min(\n                                            graphie.ypixels - 10 - offsetBottom,\n                                            mouseY,\n                                        ),\n                                    );\n                                }\n\n                                let currentX =\n                                    mouseX / graphie.scale[0] +\n                                    graphie.range[0][0];\n                                let currentY =\n                                    graphie.range[1][1] -\n                                    mouseY / graphie.scale[1];\n                                if (polygon.snapX > 0) {\n                                    currentX =\n                                        Math.round(currentX / polygon.snapX) *\n                                        polygon.snapX;\n                                }\n                                if (polygon.snapY > 0) {\n                                    currentY =\n                                        Math.round(currentY / polygon.snapY) *\n                                        polygon.snapY;\n                                }\n\n                                if (event.type === \"vmousemove\") {\n                                    let dX = currentX - startX;\n                                    let dY = currentY - startY;\n\n                                    let doMove = true;\n                                    if (_.isFunction(polygon.onMove)) {\n                                        const onMoveResult = polygon.onMove(\n                                            dX,\n                                            dY,\n                                        );\n                                        if (onMoveResult === false) {\n                                            doMove = false;\n                                        } else if (_.isArray(onMoveResult)) {\n                                            dX = onMoveResult[0];\n                                            dY = onMoveResult[1];\n                                            currentX = startX + dX;\n                                            currentY = startY + dY;\n                                        }\n                                    }\n\n                                    const increment = function (i: any) {\n                                        return [\n                                            polygonCoords[i][0] + dX,\n                                            polygonCoords[i][1] + dY,\n                                        ];\n                                    };\n\n                                    if (doMove) {\n                                        _.each(\n                                            polygon.points,\n                                            function (coordOrPoint, i) {\n                                                if (isPoint(coordOrPoint)) {\n                                                    coordOrPoint.setCoord(\n                                                        increment(i),\n                                                    );\n                                                } else {\n                                                    polygon.points[i] =\n                                                        increment(i);\n                                                }\n                                            },\n                                        );\n\n                                        polygon.transform();\n\n                                        $(polygon).trigger(\"move\");\n\n                                        lastX = currentX;\n                                        lastY = currentY;\n                                    }\n                                } else if (event.type === \"vmouseup\") {\n                                    $(document).unbind(\".polygon\");\n\n                                    const points = _.filter(\n                                        polygon.points,\n                                        isPoint,\n                                    );\n                                    _.each(points, function (point) {\n                                        point.dragging = false;\n                                    });\n\n                                    polygon.dragging = false;\n                                    dragging = false;\n                                    if (!polygon.highlight) {\n                                        polygon.visibleShape.animate(\n                                            polygon.normalStyle,\n                                            50,\n                                        );\n\n                                        _.each(points, function (point) {\n                                            point.visibleShape.animate(\n                                                point.normalStyle,\n                                                50,\n                                            );\n                                        });\n                                    }\n                                    if (_.isFunction(polygon.onMoveEnd)) {\n                                        polygon.onMoveEnd(\n                                            lastX - startX,\n                                            lastY - startY,\n                                        );\n                                    }\n                                }\n                            },\n                        );\n                    }\n                },\n            );\n        }\n\n        // Bring any movable points to the front\n        _.invoke(_.filter(polygon.points, isPoint), \"toFront\");\n\n        return polygon;\n    },\n\n    /**\n     * Constrain a point to be within the graph (including padding).\n     * If outside graph, point's x and y coordinates are clamped within\n     * the graph.\n     */\n    constrainToBounds: function (point, padding) {\n        const lower = this.unscalePoint([padding, this.ypixels - padding]);\n        const upper = this.unscalePoint([this.xpixels - padding, padding]);\n        const coordX = Math.max(lower[0], Math.min(upper[0], point[0]));\n        const coordY = Math.max(lower[1], Math.min(upper[1], point[1]));\n        return [coordX, coordY];\n    },\n\n    /**\n     * Constrain a point to be within the graph (including padding).\n     * If outside graph, point is moved along the ray specified by angle\n     * until inside graph.\n     */\n    constrainToBoundsOnAngle: function (point, padding, angle) {\n        const lower = this.unscalePoint([padding, this.ypixels - padding]);\n        const upper = this.unscalePoint([this.xpixels - padding, padding]);\n\n        let result = point.slice();\n\n        if (result[0] < lower[0]) {\n            result = [\n                lower[0],\n                result[1] + (lower[0] - result[0]) * Math.tan(angle),\n            ];\n        } else if (result[0] > upper[0]) {\n            result = [\n                upper[0],\n                result[1] - (result[0] - upper[0]) * Math.tan(angle),\n            ];\n        }\n\n        if (result[1] < lower[1]) {\n            result = [\n                result[0] + (lower[1] - result[1]) / Math.tan(angle),\n                lower[1],\n            ];\n        } else if (result[1] > upper[1]) {\n            result = [\n                result[0] - (result[1] - upper[1]) / Math.tan(angle),\n                upper[1],\n            ];\n        }\n\n        return result;\n    },\n\n    // MovableAngle is an angle that can be dragged around the screen.\n    // By attaching a smartPoint to the vertex and ray control points, the\n    // rays can be manipulated individually.\n    //\n    // Use only with smartPoints; add the smartPoints first, then:\n    //   addMovableAngle({points: [...]});\n    //\n    // The rays can be controlled to snap on degrees (more useful than snapping\n    // on coordinates) by setting snapDegrees to a positive integer.\n    //\n    // The returned object includes the following properties/methods:\n    //\n    //   - movableAngle.points\n    //         The movableAngle's dynamic smartPoints.\n    //\n    //   - movableAngle.coords\n    //         The movableAngle's current coordinates (generated, don't edit).\n    //\n    addMovableAngle: function (options) {\n        return new MovableAngle(this, options);\n    },\n\n    // center: movable point\n    // radius: int\n    // circ: graphie circle\n    // perim: invisible mouse target for dragging/changing radius\n    addCircleGraph: function (options) {\n        const graphie = this;\n        const circle = $.extend(\n            {\n                center: [0, 0],\n                radius: 2,\n                snapX: 0.5,\n                snapY: 0.5,\n                snapRadius: 0.5,\n                minRadius: 1,\n                centerConstraints: {},\n                centerNormalStyle: {},\n                centerHighlightStyle: {\n                    stroke: KhanColors.INTERACTING,\n                    fill: KhanColors.INTERACTING,\n                },\n                circleNormalStyle: {\n                    stroke: KhanColors.INTERACTIVE,\n                    \"fill-opacity\": 0,\n                },\n                circleHighlightStyle: {\n                    stroke: KhanColors.INTERACTING,\n                    fill: KhanColors.INTERACTING,\n                    \"fill-opacity\": 0.05,\n                },\n            },\n            options,\n        );\n\n        const normalColor = circle.centerConstraints.fixed\n            ? KhanColors.DYNAMIC\n            : KhanColors.INTERACTIVE;\n        const centerNormalStyle = options ? options.centerNormalStyle : null;\n        circle.centerNormalStyle = _.extend(\n            {},\n            {\n                fill: normalColor,\n                stroke: normalColor,\n            },\n            centerNormalStyle,\n        );\n\n        circle.centerPoint = graphie.addMovablePoint({\n            graph: graphie,\n            coord: circle.center,\n            normalStyle: circle.centerNormalStyle,\n            snapX: circle.snapX,\n            snapY: circle.snapY,\n            constraints: circle.centerConstraints,\n        });\n        circle.circ = graphie.circle(\n            circle.center,\n            circle.radius,\n            circle.circleNormalStyle,\n        );\n        circle.perim = graphie.mouselayer\n            .circle(\n                graphie.scalePoint(circle.center)[0],\n                graphie.scalePoint(circle.center)[1],\n                graphie.scaleVector(circle.radius)[0],\n            )\n            .attr({\n                \"stroke-width\": 20,\n                opacity: 0.002, // This is as close to 0 as MSIE will allow\n            });\n\n        // Highlight circle circumference on center point hover\n        if (!circle.centerConstraints.fixed) {\n            $(circle.centerPoint.mouseTarget.getMouseTarget()).on(\n                \"vmouseover vmouseout\",\n                function (event) {\n                    if (\n                        circle.centerPoint.highlight ||\n                        circle.centerPoint.dragging\n                    ) {\n                        circle.circ.animate(circle.circleHighlightStyle, 50);\n                    } else {\n                        circle.circ.animate(circle.circleNormalStyle, 50);\n                    }\n                },\n            );\n        }\n\n        circle.toFront = function () {\n            circle.circ.toFront();\n            circle.perim.toFront();\n            circle.centerPoint.visibleShape.toFront();\n            if (!circle.centerConstraints.fixed) {\n                circle.centerPoint.mouseTarget.toFront();\n            }\n        };\n\n        circle.centerPoint.onMove = function (x: any, y: any) {\n            circle.toFront();\n            circle.circ.attr({\n                cx: graphie.scalePoint(x)[0],\n                cy: graphie.scalePoint(y)[1],\n            });\n            circle.perim.attr({\n                cx: graphie.scalePoint(x)[0],\n                cy: graphie.scalePoint(y)[1],\n            });\n            if (circle.onMove) {\n                circle.onMove(x, y);\n            }\n        };\n\n        $(circle.centerPoint).on(\"move\", function () {\n            circle.center = this.coord;\n            $(circle).trigger(\"move\");\n        });\n\n        // circle.setCenter(x, y) moves the circle to the specified\n        // x, y coordinate as if the user had dragged it there.\n        circle.setCenter = function (x: any, y: any) {\n            circle.centerPoint.setCoord([x, y]);\n            circle.centerPoint.onMove(x, y);\n            circle.center = [x, y];\n        };\n\n        // circle.setRadius(r) sets the circle's radius to the specified\n        // value as if the user had dragged it there.\n        circle.setRadius = function (r: any) {\n            circle.radius = r;\n\n            circle.perim.attr({\n                r: graphie.scaleVector(r)[0],\n            });\n            circle.circ.attr({\n                rx: graphie.scaleVector(r)[0],\n                ry: graphie.scaleVector(r)[1],\n            });\n        };\n\n        circle.remove = function () {\n            circle.centerPoint.remove();\n            circle.circ.remove();\n            circle.perim.remove();\n        };\n\n        // Define a set of axes using polar coordinates to specify\n        // which resizing cursor we want to show based on where the\n        // mouse position lies in relation to the circle's center.\n        // The first two columns in cursorAxes refer to the minimum\n        // and maximum angle values bounding a circle sector, and\n        // the third column refers to the cursor name that will be\n        // applied if the mouse position falls inside the given sector.\n        const cursorAxes: Array<[number, number, string]> = [\n            [Math.PI * -1.0, Math.PI * -0.875, \"ew-resize\"],\n            [Math.PI * -0.875, Math.PI * -0.625, \"nesw-resize\"],\n            [Math.PI * -0.625, Math.PI * -0.375, \"ns-resize\"],\n            [Math.PI * -0.375, Math.PI * -0.125, \"nwse-resize\"],\n            [Math.PI * -0.125, Math.PI * 0.125, \"ew-resize\"],\n            [Math.PI * 0.125, Math.PI * 0.375, \"nesw-resize\"],\n            [Math.PI * 0.375, Math.PI * 0.625, \"ns-resize\"],\n            [Math.PI * 0.625, Math.PI * 0.875, \"nwse-resize\"],\n            [Math.PI * 0.875, Math.PI * 1.0, \"ew-resize\"],\n        ];\n\n        // When the mouse moves along the circle's perimeter, we\n        // dynamically set a CSS rule to show the correct\n        // bidirectional cursor so a student knows they can resize\n        // our circle. To do this, we convert the x and y coordinates\n        // of the mouse position into polar coordinates and use the\n        // defined cursorAxes above to set our rule.\n        $(circle.perim.node).on(\"vmousemove\", (event) => {\n            let [x, y] = this.getMouseCoord(event);\n\n            x -= circle.center[0];\n            y -= circle.center[1];\n\n            const theta = Math.atan2(y, x);\n\n            cursorAxes.forEach(function (axes) {\n                const [min, max, cursorName] = axes;\n                if (theta >= min && theta < max) {\n                    $(circle.perim.node).css(\"cursor\", cursorName);\n                }\n            });\n        });\n\n        // Set a default resizing-friendly cursor to be safe.\n        $(circle.perim.node).css(\"cursor\", \"nesw-resize\");\n\n        // Prevent the page from scrolling when we grab and drag the circle on\n        // a mobile device.\n        circle.perim.node.addEventListener(\n            \"touchstart\",\n            function (event) {\n                event.preventDefault();\n            },\n            {passive: false},\n        );\n\n        $(circle.perim.node).on(\n            \"vmouseover vmouseout vmousedown\",\n            function (event) {\n                if (event.type === \"vmouseover\") {\n                    circle.highlight = true;\n                    if (!dragging) {\n                        // TODO(jack): Figure out why this doesn't work\n                        // for circleHighlightStyle's that change\n                        // stroke-dasharray\n                        circle.circ.animate(circle.circleHighlightStyle, 50);\n                        circle.centerPoint.visibleShape.animate(\n                            circle.centerHighlightStyle,\n                            50,\n                        );\n                    }\n                } else if (event.type === \"vmouseout\") {\n                    circle.highlight = false;\n                    if (!circle.dragging && !circle.centerPoint.dragging) {\n                        circle.circ.animate(circle.circleNormalStyle, 50);\n                        circle.centerPoint.visibleShape.animate(\n                            circle.centerNormalStyle,\n                            50,\n                        );\n                    }\n                } else if (\n                    event.type === \"vmousedown\" &&\n                    (event.which === 1 || event.which === 0)\n                ) {\n                    event.preventDefault();\n                    circle.toFront();\n                    const startRadius = circle.radius;\n\n                    $(document).on(\"vmousemove vmouseup\", function (event) {\n                        event.preventDefault();\n                        circle.dragging = true;\n                        dragging = true;\n\n                        if (event.type === \"vmousemove\") {\n                            const coord = graphie.constrainToBounds(\n                                graphie.getMouseCoord(event),\n                                10,\n                            );\n\n                            let radius = GraphUtils.getDistance(\n                                circle.centerPoint.coord,\n                                coord,\n                            );\n                            radius = Math.max(\n                                circle.minRadius,\n                                Math.round(radius / circle.snapRadius) *\n                                    circle.snapRadius,\n                            );\n                            const oldRadius = circle.radius;\n                            let doResize = true;\n                            if (circle.onResize) {\n                                const onResizeResult = circle.onResize(\n                                    radius,\n                                    oldRadius,\n                                );\n                                if (_.isNumber(onResizeResult)) {\n                                    radius = onResizeResult;\n                                } else if (onResizeResult === false) {\n                                    doResize = false;\n                                }\n                            }\n                            if (doResize) {\n                                circle.setRadius(radius);\n                                $(circle).trigger(\"move\");\n                            }\n                        } else if (event.type === \"vmouseup\") {\n                            $(document).off(\"vmousemove vmouseup\");\n                            circle.dragging = false;\n                            dragging = false;\n                            if (circle.onResizeEnd) {\n                                circle.onResizeEnd(circle.radius, startRadius);\n                            }\n                        }\n                    });\n                }\n            },\n        );\n\n        return circle;\n    },\n\n    addRotateHandle: (function () {\n        const drawRotateHandle = function (\n            graphie,\n            center: any,\n            radius,\n            halfWidth,\n            lengthAngle,\n            angle,\n            interacting,\n        ) {\n            const getRotateHandlePoint = function (\n                offset: number,\n                distanceFromArrowMidline,\n            ) {\n                const distFromRotationCenter =\n                    radius + distanceFromArrowMidline;\n                const vec = kvector.cartFromPolarDeg(\n                    distFromRotationCenter,\n                    angle + offset,\n                );\n                const absolute = kvector.add(center, vec);\n                const pixels = graphie.scalePoint(absolute);\n                return pixels[0] + \",\" + pixels[1];\n            };\n\n            const innerR = graphie.scaleVector(radius - halfWidth);\n            const outerR = graphie.scaleVector(radius + halfWidth);\n\n            // Draw the double-headed arrow thing that shows users where to\n            // click and drag to rotate\n            return graphie.raphael\n                .path(\n                    // upper arrowhead\n                    \" M\" +\n                        getRotateHandlePoint(lengthAngle, -halfWidth) +\n                        \" L\" +\n                        getRotateHandlePoint(lengthAngle, -3 * halfWidth) +\n                        \" L\" +\n                        getRotateHandlePoint(2 * lengthAngle, 0) +\n                        \" L\" +\n                        getRotateHandlePoint(lengthAngle, 3 * halfWidth) +\n                        \" L\" +\n                        getRotateHandlePoint(lengthAngle, halfWidth) +\n                        // outer arc\n                        \" A\" +\n                        outerR[0] +\n                        \",\" +\n                        outerR[1] +\n                        \",0,0,1,\" +\n                        getRotateHandlePoint(-lengthAngle, halfWidth) +\n                        // lower arrowhead\n                        \" L\" +\n                        getRotateHandlePoint(-lengthAngle, 3 * halfWidth) +\n                        \" L\" +\n                        getRotateHandlePoint(-2 * lengthAngle, 0) +\n                        \" L\" +\n                        getRotateHandlePoint(-lengthAngle, -3 * halfWidth) +\n                        \" L\" +\n                        getRotateHandlePoint(-lengthAngle, -halfWidth) +\n                        // inner arc\n                        \" A\" +\n                        innerR[0] +\n                        \",\" +\n                        innerR[1] +\n                        \",0,0,0,\" +\n                        getRotateHandlePoint(lengthAngle, -halfWidth) +\n                        \" Z\",\n                )\n                .attr({\n                    stroke: null,\n                    fill: interacting\n                        ? KhanColors.INTERACTING\n                        : KhanColors.INTERACTIVE,\n                });\n        };\n\n        return function (options: any) {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            const graph = this;\n\n            let rotatePoint = options.center;\n            const radius = options.radius;\n            const lengthAngle = options.lengthAngle || 30;\n            const hideArrow = options.hideArrow || false;\n            const mouseTarget = options.mouseTarget;\n            const id = _.uniqueId(\"rotateHandle\");\n\n            // Normalize rotatePoint into something that always looks\n            // like a movablePoint\n            if (_.isArray(rotatePoint)) {\n                rotatePoint = {\n                    coord: rotatePoint,\n                };\n            }\n\n            const rotateHandle = graph.addMovablePoint({\n                coord: kpoint.addVector(\n                    rotatePoint.coord,\n                    kvector.cartFromPolarDeg(radius, options.angleDeg || 0),\n                ),\n                constraints: {\n                    fixedDistance: {\n                        dist: radius,\n                        point: rotatePoint,\n                    },\n                },\n                mouseTarget: mouseTarget,\n            });\n\n            // move the rotatePoint in front of the rotateHandle to avoid\n            // confusing clicking/scaling of the rotateHandle when the user\n            // intends to click on the rotatePoint\n            rotatePoint.toFront();\n\n            let rotatePointPrevCoord = rotatePoint.coord;\n            let rotateHandlePrevCoord = rotateHandle.coord;\n            let rotateHandleStartCoord = rotateHandlePrevCoord;\n            let isRotating = false;\n            let isHovering = false;\n            let drawnRotateHandle;\n\n            const redrawRotateHandle = function (\n                handleCoord: Array<never> | ReadonlyArray<number>,\n            ) {\n                if (hideArrow) {\n                    return; // Don't draw anything!\n                }\n\n                const handleVec = kvector.subtract(\n                    handleCoord,\n                    rotatePoint.coord,\n                );\n                const handlePolar = kvector.polarDegFromCart(handleVec);\n                const angle = handlePolar[1];\n\n                if (drawnRotateHandle) {\n                    drawnRotateHandle.remove();\n                }\n\n                drawnRotateHandle = drawRotateHandle(\n                    graph,\n                    rotatePoint.coord,\n                    options.radius,\n                    isRotating || isHovering\n                        ? options.hoverWidth / 2\n                        : options.width / 2,\n                    lengthAngle,\n                    angle,\n                    isRotating || isHovering,\n                );\n            };\n\n            // when the rotation center moves, we need to move\n            // the rotationHandle as well, or it will end up out\n            // of sync\n            $(rotatePoint).on(\"move.\" + id, function () {\n                const delta = kvector.subtract(\n                    rotatePoint.coord,\n                    rotatePointPrevCoord,\n                );\n\n                rotateHandle.setCoord(kvector.add(rotateHandle.coord, delta));\n\n                redrawRotateHandle(rotateHandle.coord);\n\n                rotatePointPrevCoord = rotatePoint.coord;\n                rotateHandle.constraints.fixedDistance.point = rotatePoint;\n                rotateHandlePrevCoord = rotateHandle.coord;\n            });\n\n            // Rotate polygon with rotateHandle\n            rotateHandle.onMove = function (x, y) {\n                if (!isRotating) {\n                    rotateHandleStartCoord = rotateHandlePrevCoord;\n                    isRotating = true;\n                }\n\n                let coord = [x, y];\n\n                if (options.onMove) {\n                    const oldPolar = kvector.polarDegFromCart(\n                        kvector.subtract(\n                            rotateHandlePrevCoord,\n                            rotatePoint.coord,\n                        ),\n                    );\n                    const newPolar = kvector.polarDegFromCart(\n                        kvector.subtract(coord, rotatePoint.coord),\n                    );\n\n                    const oldAngle = oldPolar[1];\n                    const newAngle = newPolar[1];\n                    let result = options.onMove(newAngle, oldAngle);\n                    if (result != null && result !== true) {\n                        if (result === false) {\n                            result = oldAngle;\n                        }\n                        coord = kvector.add(\n                            rotatePoint.coord,\n                            kvector.cartFromPolarDeg(oldPolar[0], result),\n                        );\n                    }\n                }\n\n                redrawRotateHandle(coord);\n\n                rotateHandlePrevCoord = coord;\n                return coord;\n            };\n\n            rotateHandle.onMoveEnd = function () {\n                isRotating = false;\n                redrawRotateHandle(rotateHandle.coord);\n                if (options.onMoveEnd) {\n                    const oldPolar = kvector.polarDegFromCart(\n                        kvector.subtract(\n                            rotateHandleStartCoord,\n                            rotatePoint.coord,\n                        ),\n                    );\n                    const newPolar = kvector.polarDegFromCart(\n                        kvector.subtract(rotateHandle.coord, rotatePoint.coord),\n                    );\n                    options.onMoveEnd(newPolar[1], oldPolar[1]);\n                }\n            };\n\n            // Remove the default dot added by the movablePoint since we have\n            // our double-arrow thing\n            rotateHandle.visibleShape.remove();\n\n            if (!mouseTarget) {\n                // Make the default mouse target bigger to encompass the whole\n                // area around the double-arrow thing\n                rotateHandle.mouseTarget.attr({scale: 2});\n            }\n\n            const $mouseTarget = $(rotateHandle.mouseTarget.getMouseTarget());\n            $mouseTarget.bind(\"vmouseover\", function (e) {\n                isHovering = true;\n                redrawRotateHandle(rotateHandle.coord);\n            });\n            $mouseTarget.bind(\"vmouseout\", function (e) {\n                isHovering = false;\n                redrawRotateHandle(rotateHandle.coord);\n            });\n\n            redrawRotateHandle(rotateHandle.coord);\n\n            const oldRemove = rotateHandle.remove;\n            rotateHandle.remove = function () {\n                oldRemove.call(rotateHandle);\n                if (drawnRotateHandle) {\n                    drawnRotateHandle.remove();\n                }\n                $(rotatePoint).off(\"move.\" + id);\n            };\n\n            rotateHandle.update = function () {\n                redrawRotateHandle(rotateHandle.coord);\n            };\n\n            return rotateHandle;\n        };\n    })(),\n\n    addReflectButton: (function () {\n        const drawButton = function (\n            graphie,\n            buttonCoord: kpoint.Point,\n            lineCoords: Array<any> | Array<never> | Array<any | Array<number>>,\n            size: number,\n            distanceFromCenter: number,\n            leftStyle: any,\n            rightStyle: any,\n        ) {\n            // Avoid invalid lines\n            if (kpoint.equal(lineCoords[0], lineCoords[1])) {\n                lineCoords = [\n                    lineCoords[0],\n                    kpoint.addVector(lineCoords[0], [1, 1]),\n                ];\n            }\n\n            const lineDirection = kvector.normalize(\n                kvector.subtract(lineCoords[1], lineCoords[0]),\n            );\n\n            const lineVec = kvector.scale(lineDirection, size / 2);\n\n            const centerVec = kvector.scale(lineDirection, distanceFromCenter);\n            const leftCenterVec = kvector.rotateDeg(centerVec, 90);\n            const rightCenterVec = kvector.rotateDeg(centerVec, -90);\n\n            const negLineVec = kvector.negate(lineVec);\n            const leftVec = kvector.rotateDeg(lineVec, 90);\n            const rightVec = kvector.rotateDeg(lineVec, -90);\n\n            const leftCenter = kpoint.addVectors(buttonCoord, leftCenterVec);\n            const rightCenter = kpoint.addVectors(buttonCoord, rightCenterVec);\n\n            const leftCoord1 = kpoint.addVectors(\n                buttonCoord,\n                leftCenterVec,\n                lineVec,\n                leftVec,\n            );\n            const leftCoord2 = kpoint.addVectors(\n                buttonCoord,\n                leftCenterVec,\n                negLineVec,\n                leftVec,\n            );\n            const rightCoord1 = kpoint.addVectors(\n                buttonCoord,\n                rightCenterVec,\n                lineVec,\n                rightVec,\n            );\n            const rightCoord2 = kpoint.addVectors(\n                buttonCoord,\n                rightCenterVec,\n                negLineVec,\n                rightVec,\n            );\n\n            const leftButton = graphie.path(\n                [leftCenter, leftCoord1, leftCoord2, true],\n                leftStyle,\n            );\n            const rightButton = graphie.path(\n                [rightCenter, rightCoord1, rightCoord2, true],\n                rightStyle,\n            );\n\n            return {\n                remove: function () {\n                    leftButton.remove();\n                    rightButton.remove();\n                },\n            };\n        };\n\n        return function (options: any) {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            const graphie = this;\n\n            const line = options.line;\n\n            const button = graphie.addMovablePoint({\n                constraints: options.constraints,\n                coord: kline.midpoint([line.pointA.coord, line.pointZ.coord]),\n                snapX: graphie.snap[0],\n                snapY: graphie.snap[1],\n                onMove: function (x, y) {\n                    // Don't allow the button to actually move. This is a hack\n                    // around the inability to both set a point as fixed AND\n                    // allow it to be clicked.\n                    return false;\n                },\n                onMoveEnd: function (x, y) {\n                    if (options.onMoveEnd) {\n                        options.onMoveEnd.call(this, x, y);\n                    }\n                },\n            });\n\n            let isHovering = false;\n            let isFlipped = false;\n            let currentlyDrawnButton;\n\n            const isHighlight = function () {\n                return isHovering;\n            };\n\n            const styles = _.map([0, 1], function (isHighlight) {\n                const baseStyle = isHighlight\n                    ? options.highlightStyle\n                    : options.normalStyle;\n\n                return _.map([0, 1], function (opacity) {\n                    return _.defaults(\n                        {\n                            \"fill-opacity\": opacity,\n                        },\n                        baseStyle,\n                    );\n                });\n            });\n\n            const getStyle = function (isRight: number | boolean) {\n                if (isFlipped) {\n                    isRight = !isRight;\n                }\n                return styles[+isHighlight()][+isRight];\n            };\n\n            const redraw = function (\n                coord: kpoint.Point,\n                lineCoords: Array<any> | Array<never>,\n            ) {\n                if (currentlyDrawnButton) {\n                    currentlyDrawnButton.remove();\n                }\n                currentlyDrawnButton = drawButton(\n                    graphie,\n                    coord,\n                    lineCoords,\n                    isHighlight() ? options.size * 1.5 : options.size,\n                    isHighlight() ? options.size * 0.125 : 0.25,\n                    getStyle(0),\n                    getStyle(1),\n                );\n            };\n\n            const update = function (coordA, coordZ) {\n                coordA = coordA || line.pointA.coord;\n                coordZ = coordZ || line.pointZ.coord;\n\n                const buttonCoord = kline.midpoint([coordA, coordZ]);\n                button.setCoord(buttonCoord);\n\n                redraw(buttonCoord, [coordA, coordZ]);\n            };\n\n            $(line).on(\"move\", _.bind(update, button, null, null));\n\n            const $mouseTarget = $(button.mouseTarget.getMouseTarget());\n            $mouseTarget.on(\"vclick\", function () {\n                const result = options.onClick();\n                if (result !== false) {\n                    isFlipped = !isFlipped;\n                    redraw(button.coord, [\n                        line.pointA.coord,\n                        line.pointZ.coord,\n                    ]);\n                }\n            });\n\n            // Bring the reflection line handles in front of the button, so\n            // that if we drag the reflectPoints really close together, we can\n            // still move the handles away from each other, rather than only\n            // being able to apply the reflection.\n            line.pointA.toFront();\n            line.pointZ.toFront();\n\n            // Replace the visual point with the double triangle thing\n            button.visibleShape.remove();\n            const pointScale = graphie.scaleVector(options.size)[0] / 20;\n            button.mouseTarget.attr({scale: 1.5 * pointScale});\n            $mouseTarget.css(\"cursor\", \"pointer\");\n\n            // Make the arrow-thing grow and shrink with mouseover/out\n            $mouseTarget.bind(\"vmouseover\", function (e) {\n                isHovering = true;\n                redraw(button.coord, [line.pointA.coord, line.pointZ.coord]);\n            });\n            $mouseTarget.bind(\"vmouseout\", function (e) {\n                isHovering = false;\n                redraw(button.coord, [line.pointA.coord, line.pointZ.coord]);\n            });\n\n            const oldButtonRemove = button.remove;\n            button.remove = function () {\n                currentlyDrawnButton.remove();\n                oldButtonRemove.call(button);\n            };\n\n            button.update = update;\n            button.isFlipped = function () {\n                return isFlipped;\n            };\n\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 0.\n            update();\n            return button;\n        };\n    })(),\n\n    protractor: function (center) {\n        // @ts-expect-error [FEI-5003] - TS2350 - Only a void function can be called with the 'new' keyword.\n        return new Protractor(this, center);\n    },\n\n    ruler: function (options) {\n        // @ts-expect-error [FEI-5003] - TS2350 - Only a void function can be called with the 'new' keyword.\n        return new Ruler(this, options || {});\n    },\n\n    addPoints: addPoints,\n});\n\nfunction Protractor(graph: any, center: any) {\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.set = graph.raphael.set();\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.cx = center[0];\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.cy = center[1];\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    const pro = this;\n\n    const r = graph.unscaleVector(180.5)[0];\n    const imgPos = graph.scalePoint([\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.cx - r,\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.cy + r - graph.unscaleVector(10.5)[1],\n    ]);\n    const image = graph.mouselayer.image(\n        \"https://ka-perseus-graphie.s3.amazonaws.com/e9d032f2ab8b95979f674fbfa67056442ba1ff6a.png\",\n        imgPos[0],\n        imgPos[1],\n        360,\n        180,\n    );\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.set.push(image);\n\n    // Prevent the page from scrolling when we grab and drag the image on a\n    // mobile device.\n    image.node.addEventListener(\n        \"touchstart\",\n        function (event) {\n            event.preventDefault();\n        },\n        {passive: false},\n    );\n\n    const arrowHelper = function (angle: number, pixelsFromEdge: number) {\n        const scaledRadius = graph.scaleVector(r);\n        scaledRadius[0] -= 16;\n        scaledRadius[1] -= 16;\n        const scaledCenter = graph.scalePoint(center);\n        const x =\n            Math.sin(((angle + 90) * Math.PI) / 180) *\n                (scaledRadius[0] + pixelsFromEdge) +\n            scaledCenter[0];\n        const y =\n            Math.cos(((angle + 90) * Math.PI) / 180) *\n                (scaledRadius[1] + pixelsFromEdge) +\n            scaledCenter[1];\n        return x + \",\" + y;\n    };\n\n    const arrow = graph.raphael\n        .path(\n            \" M\" +\n                arrowHelper(180, 6) +\n                \" L\" +\n                arrowHelper(180, 2) +\n                \" L\" +\n                arrowHelper(183, 10) +\n                \" L\" +\n                arrowHelper(180, 18) +\n                \" L\" +\n                arrowHelper(180, 14) +\n                \" A\" +\n                (graph.scaleVector(r)[0] + 10) +\n                \",\" +\n                (graph.scaleVector(r)[1] + 10) +\n                \",0,0,1,\" +\n                arrowHelper(170, 14) +\n                \" L\" +\n                arrowHelper(170, 18) +\n                \" L\" +\n                arrowHelper(167, 10) +\n                \" L\" +\n                arrowHelper(170, 2) +\n                \" L\" +\n                arrowHelper(170, 6) +\n                \" A\" +\n                (graph.scaleVector(r)[0] + 10) +\n                \",\" +\n                (graph.scaleVector(r)[1] + 10) +\n                \",0,0,0,\" +\n                arrowHelper(180, 6) +\n                \" Z\",\n        )\n        .attr({\n            stroke: null,\n            fill: KhanColors.INTERACTIVE,\n        });\n\n    // add it to the set so it translates with everything else\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.set.push(arrow);\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.centerPoint = graph.addMovablePoint({\n        coord: center,\n        visible: false,\n    });\n\n    // Use a movablePoint for rotation\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotateHandle = graph.addMovablePoint({\n        bounded: false,\n        coord: [\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            Math.sin((275 * Math.PI) / 180) * r + this.cx,\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            Math.cos((275 * Math.PI) / 180) * r + this.cy,\n        ],\n        onMove: function (x, y) {\n            const angle =\n                (Math.atan2(\n                    pro.centerPoint.coord[1] - y,\n                    pro.centerPoint.coord[0] - x,\n                ) *\n                    180) /\n                Math.PI;\n            pro.rotate(-angle - 5, true);\n        },\n    });\n\n    // Add a constraint so the point moves in a circle\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotateHandle.constraints.fixedDistance.dist = r;\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotateHandle.constraints.fixedDistance.point = this.centerPoint;\n\n    // Remove the default dot added by the movablePoint since we have our\n    // double-arrow thing\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotateHandle.visibleShape.remove();\n    // Make the mouse target bigger to encompass the whole area around the\n    // double-arrow thing\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotateHandle.mouseTarget.attr({scale: 2.0});\n\n    let isDragging = false;\n    let isHovering = false;\n    const isHighlight = function () {\n        return isHovering || isDragging;\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    const self = this;\n    const $mouseTarget = $(self.rotateHandle.mouseTarget.getMouseTarget());\n    $mouseTarget.bind(\"vmousedown\", function (event) {\n        isDragging = true;\n        $mouseTarget.css(\"cursor\", \"-webkit-grabbing\");\n        $mouseTarget.css(\"cursor\", \"grabbing\");\n        arrow.animate({scale: 1.5, fill: KhanColors.INTERACTING}, 50);\n\n        $(document).bind(\"vmouseup.rotateHandle\", function (event) {\n            isDragging = false;\n            $mouseTarget.css(\"cursor\", \"-webkit-grab\");\n            $mouseTarget.css(\"cursor\", \"grab\");\n\n            if (!isHighlight()) {\n                arrow.animate({scale: 1.0, fill: KhanColors.INTERACTIVE}, 50);\n            }\n\n            $(document).unbind(\"vmouseup.rotateHandle\");\n        });\n    });\n\n    $mouseTarget.bind(\"vmouseover\", function (event) {\n        isHovering = true;\n        arrow.animate({scale: 1.5, fill: KhanColors.INTERACTING}, 50);\n    });\n    $mouseTarget.bind(\"vmouseout\", function (event) {\n        isHovering = false;\n        if (!isHighlight()) {\n            arrow.animate({scale: 1.0, fill: KhanColors.INTERACTIVE}, 50);\n        }\n    });\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    const setNodes = $.map(this.set, function (el) {\n        return el.node;\n    });\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.makeTranslatable = function makeTranslatable() {\n        $(setNodes).css(\"cursor\", \"move\");\n        $mouseTarget.css(\"cursor\", \"-webkit-grab\");\n        $mouseTarget.css(\"cursor\", \"grab\");\n\n        $(setNodes).bind(\"vmousedown\", function (event) {\n            event.preventDefault();\n            let startx =\n                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                event.pageX - $(graph.raphael.canvas.parentNode).offset().left;\n            let starty =\n                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                event.pageY - $(graph.raphael.canvas.parentNode).offset().top;\n\n            $(document).bind(\"vmousemove.protractor\", function (event) {\n                let mouseX =\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                    event.pageX -\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                    $(graph.raphael.canvas.parentNode).offset().left;\n                let mouseY =\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                    event.pageY -\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                    $(graph.raphael.canvas.parentNode).offset().top;\n                // can't go beyond 10 pixels from the edge\n                mouseX = Math.max(10, Math.min(graph.xpixels - 10, mouseX));\n                mouseY = Math.max(10, Math.min(graph.ypixels - 10, mouseY));\n\n                const dx = mouseX - startx;\n                const dy = mouseY - starty;\n\n                $.each(pro.set.items, function () {\n                    this.translate(dx, dy);\n                });\n                pro.centerPoint.setCoord([\n                    pro.centerPoint.coord[0] + dx / graph.scale[0],\n                    pro.centerPoint.coord[1] - dy / graph.scale[1],\n                ]);\n                pro.rotateHandle.setCoord([\n                    pro.rotateHandle.coord[0] + dx / graph.scale[0],\n                    pro.rotateHandle.coord[1] - dy / graph.scale[1],\n                ]);\n                startx = mouseX;\n                starty = mouseY;\n            });\n\n            $(document).one(\"vmouseup\", function (event) {\n                $(document).unbind(\"vmousemove.protractor\");\n            });\n        });\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotation = 0;\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotate = function (offset: any, absolute: any) {\n        const center = graph.scalePoint(this.centerPoint.coord);\n\n        if (absolute) {\n            this.rotation = 0;\n        }\n\n        this.set.rotate(this.rotation + offset, center[0], center[1]);\n        this.rotation = this.rotation + offset;\n\n        return this;\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.moveTo = function moveTo(x: any, y: any) {\n        const start = graph.scalePoint(pro.centerPoint.coord);\n        const end = graph.scalePoint([x, y]);\n        const time = GraphUtils.getDistance(start, end) * 2;\n\n        $({x: start[0], y: start[1]}).animate(\n            {x: end[0], y: end[1]},\n            {\n                duration: time,\n                step: function (now, fx) {\n                    let dx = 0;\n                    let dy = 0;\n                    if (fx.prop === \"x\") {\n                        dx = now - graph.scalePoint(pro.centerPoint.coord)[0];\n                    } else if (fx.prop === \"y\") {\n                        dy = now - graph.scalePoint(pro.centerPoint.coord)[1];\n                    }\n                    $.each(pro.set.items, function () {\n                        this.translate(dx, dy);\n                    });\n                    pro.centerPoint.setCoord([\n                        pro.centerPoint.coord[0] + dx / graph.scale[0],\n                        pro.centerPoint.coord[1] - dy / graph.scale[1],\n                    ]);\n                    pro.rotateHandle.setCoord([\n                        pro.rotateHandle.coord[0] + dx / graph.scale[0],\n                        pro.rotateHandle.coord[1] - dy / graph.scale[1],\n                    ]);\n                },\n            },\n        );\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rotateTo = function rotateTo(angle: any) {\n        if (Math.abs(this.rotation - angle) > 180) {\n            this.rotation += 360;\n        }\n        const time = Math.abs(this.rotation - angle) * 5;\n        $({0: this.rotation}).animate(\n            {0: angle},\n            {\n                duration: time,\n                step: function (now, fx) {\n                    pro.rotate(now, true);\n                    pro.rotateHandle.setCoord([\n                        Math.sin(((now + 275) * Math.PI) / 180) * r +\n                            pro.centerPoint.coord[0],\n                        Math.cos(((now + 275) * Math.PI) / 180) * r +\n                            pro.centerPoint.coord[1],\n                    ]);\n                },\n            },\n        );\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.remove = function () {\n        this.set.remove();\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.makeTranslatable();\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    return this;\n}\n\nfunction Ruler(graphie: any, options: any) {\n    _.defaults(options, {\n        center: [0, 0],\n        pixelsPerUnit: 40,\n        ticksPerUnit: 10, // 10 or power of 2\n        units: 10, // the length the ruler can measure\n        label: \"\", // e.g \"cm\" (the shorter, the better)\n        style: {\n            fill: null,\n            stroke: KhanColors.GRAY,\n        },\n    });\n\n    const light = _.extend({}, options.style, {strokeWidth: 1});\n    const bold = _.extend({}, options.style, {strokeWidth: 2});\n\n    const width = options.units * options.pixelsPerUnit;\n    const height = 50;\n\n    const leftBottom = graphie.unscalePoint(\n        kvector.subtract(\n            graphie.scalePoint(options.center),\n            kvector.scale([width, -height], 0.5),\n        ),\n    );\n\n    const graphieUnitsPerUnit = options.pixelsPerUnit / graphie.scale[0];\n    const graphieUnitsHeight = height / graphie.scale[0];\n\n    const rightTop = kvector.add(leftBottom, [\n        options.units * graphieUnitsPerUnit,\n        graphieUnitsHeight,\n    ]);\n\n    const tickHeight = 1.0;\n    let tickHeightMap;\n\n    if (options.ticksPerUnit === 10) {\n        // decimal, as on a centimeter ruler\n        tickHeightMap = {\n            10: tickHeight,\n            5: tickHeight * 0.55,\n            1: tickHeight * 0.35,\n        };\n    } else {\n        const sizes = [1, 0.6, 0.45, 0.3];\n\n        tickHeightMap = {};\n        for (let i = options.ticksPerUnit; i >= 1; i /= 2) {\n            tickHeightMap[i] = tickHeight * (sizes.shift() || 0.2);\n        }\n    }\n\n    const tickFrequencies = _.keys(tickHeightMap).sort(function (a, b) {\n        // @ts-expect-error [FEI-5003] - TS2362 - The left-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type. | TS2363 - The right-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.\n        return b - a;\n    });\n\n    function getTickHeight(i: any): number {\n        for (let k = 0; k < tickFrequencies.length; k++) {\n            const key = tickFrequencies[k];\n            // @ts-expect-error [FEI-5003] - TS2363 - The right-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.\n            if (i % key === 0) {\n                return tickHeightMap[key];\n            }\n        }\n        return 0;\n    }\n\n    const left = leftBottom[0];\n    const bottom = leftBottom[1];\n    const right = rightTop[0];\n    const top = rightTop[1];\n\n    const numTicks = options.units * options.ticksPerUnit + 1;\n\n    const set = graphie.raphael.set();\n\n    const px = 1 / graphie.scale[0];\n    set.push(graphie.line([left - px, bottom], [right + px, bottom], bold));\n    set.push(graphie.line([left - px, top], [right + px, top], bold));\n\n    _.times(numTicks, function (i) {\n        const n = i / options.ticksPerUnit;\n        const x = left + n * graphieUnitsPerUnit;\n        const height = getTickHeight(i) * graphieUnitsHeight;\n\n        const style = i === 0 || i === numTicks - 1 ? bold : light;\n        set.push(graphie.line([x, bottom], [x, bottom + height], style));\n\n        if (n % 1 === 0) {\n            const coord = graphie.scalePoint([x, top]);\n            let text;\n            let offset;\n\n            if (n === 0) {\n                // Unit label\n                text = options.label;\n                offset =\n                    {\n                        mm: 13,\n                        cm: 11,\n                        m: 8,\n                        km: 11,\n                        in: 8,\n                        ft: 8,\n                        yd: 10,\n                        mi: 10,\n                    }[text] || 3 * text.toString().length;\n            } else {\n                // Tick label\n                text = n;\n                offset = -3 * (n.toString().length + 1);\n            }\n            const label = graphie.raphael.text(\n                coord[0] + offset,\n                coord[1] + 10,\n                text,\n            );\n            label.attr({\n                \"font-family\": \"KaTeX_Main\",\n                \"font-size\": \"12px\",\n                color: \"#444\",\n            });\n            set.push(label);\n        }\n    });\n\n    const mouseTarget = graphie.mouselayer.path(\n        GraphUtils.svgPath([\n            leftBottom,\n            [left, top],\n            rightTop,\n            [right, bottom],\n            /* closed */ true,\n        ]),\n    );\n    mouseTarget.attr({\n        fill: \"#000\",\n        opacity: 0,\n        stroke: \"#000\",\n        \"stroke-width\": 2,\n    });\n    set.push(mouseTarget);\n\n    // Prevent the page from scrolling when we grab and drag the ruler on a\n    // mobile device.\n    mouseTarget.node.addEventListener(\n        \"touchstart\",\n        function (event) {\n            event.preventDefault();\n        },\n        {passive: false},\n    );\n\n    const setNodes = $.map(set, function (el) {\n        return el.node;\n    });\n    $(setNodes).css(\"cursor\", \"move\");\n\n    $(setNodes).bind(\"vmousedown\", function (event) {\n        event.preventDefault();\n        let startx =\n            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n            event.pageX - $(graphie.raphael.canvas.parentNode).offset().left;\n        let starty =\n            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n            event.pageY - $(graphie.raphael.canvas.parentNode).offset().top;\n\n        $(document).bind(\"vmousemove.ruler\", function (event) {\n            let mouseX =\n                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                event.pageX -\n                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                $(graphie.raphael.canvas.parentNode).offset().left;\n            let mouseY =\n                // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                event.pageY - $(graphie.raphael.canvas.parentNode).offset().top;\n            // can't go beyond 10 pixels from the edge\n            mouseX = Math.max(10, Math.min(graphie.xpixels - 10, mouseX));\n            mouseY = Math.max(10, Math.min(graphie.ypixels - 10, mouseY));\n\n            const dx = mouseX - startx;\n            const dy = mouseY - starty;\n\n            set.translate(dx, dy);\n            leftBottomHandle.setCoord([\n                leftBottomHandle.coord[0] + dx / graphie.scale[0],\n                leftBottomHandle.coord[1] - dy / graphie.scale[1],\n            ]);\n            rightBottomHandle.setCoord([\n                rightBottomHandle.coord[0] + dx / graphie.scale[0],\n                rightBottomHandle.coord[1] - dy / graphie.scale[1],\n            ]);\n\n            startx = mouseX;\n            starty = mouseY;\n        });\n\n        $(document).one(\"vmouseup\", function (event) {\n            $(document).unbind(\"vmousemove.ruler\");\n        });\n    });\n\n    const leftBottomHandle = graphie.addMovablePoint({\n        coord: leftBottom,\n        normalStyle: {\n            fill: KhanColors.INTERACTIVE,\n            \"fill-opacity\": 0,\n            stroke: KhanColors.INTERACTIVE,\n        },\n        highlightStyle: {\n            fill: KhanColors.INTERACTING,\n            \"fill-opacity\": 0.1,\n            stroke: KhanColors.INTERACTING,\n        },\n        pointSize: 6, // or 8 maybe?\n        onMove: function (x, y) {\n            const dy = rightBottomHandle.coord[1] - y;\n            const dx = rightBottomHandle.coord[0] - x;\n            const angle = (Math.atan2(dy, dx) * 180) / Math.PI;\n            const center = kvector.scale(\n                kvector.add([x, y], rightBottomHandle.coord),\n                0.5,\n            );\n            const scaledCenter = graphie.scalePoint(center);\n            const oldCenter = kvector.scale(\n                kvector.add(leftBottomHandle.coord, rightBottomHandle.coord),\n                0.5,\n            );\n            const scaledOldCenter = graphie.scalePoint(oldCenter);\n            const diff = kvector.subtract(scaledCenter, scaledOldCenter);\n            set.rotate(-angle, scaledOldCenter[0], scaledOldCenter[1]);\n            set.translate(diff[0], diff[1]);\n        },\n    });\n    const rightBottomHandle = graphie.addMovablePoint({\n        coord: [right, bottom],\n        normalStyle: {\n            fill: KhanColors.INTERACTIVE,\n            \"fill-opacity\": 0,\n            stroke: KhanColors.INTERACTIVE,\n        },\n        highlightStyle: {\n            fill: KhanColors.INTERACTING,\n            \"fill-opacity\": 0.1,\n            stroke: KhanColors.INTERACTING,\n        },\n        pointSize: 6, // or 8 maybe?\n        onMove: function (x, y) {\n            const dy = y - leftBottomHandle.coord[1];\n            const dx = x - leftBottomHandle.coord[0];\n            const angle = (Math.atan2(dy, dx) * 180) / Math.PI;\n            const center = kvector.scale(\n                kvector.add([x, y], leftBottomHandle.coord),\n                0.5,\n            );\n            const scaledCenter = graphie.scalePoint(center);\n            const oldCenter = kvector.scale(\n                kvector.add(leftBottomHandle.coord, rightBottomHandle.coord),\n                0.5,\n            );\n            const scaledOldCenter = graphie.scalePoint(oldCenter);\n            const diff = kvector.subtract(scaledCenter, scaledOldCenter);\n            set.rotate(-angle, scaledOldCenter[0], scaledOldCenter[1]);\n            set.translate(diff[0], diff[1]);\n        },\n    });\n\n    // Make each handle rotate the ruler about the other one\n    leftBottomHandle.constraints.fixedDistance.dist = width / graphie.scale[0];\n    leftBottomHandle.constraints.fixedDistance.point = rightBottomHandle;\n    rightBottomHandle.constraints.fixedDistance.dist = width / graphie.scale[0];\n    rightBottomHandle.constraints.fixedDistance.point = leftBottomHandle;\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.remove = function () {\n        set.remove();\n        leftBottomHandle.remove();\n        rightBottomHandle.remove();\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    return this;\n}\n\nfunction MovableAngle(graphie: any, options: any) {\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.graphie = graphie;\n\n    // TODO(alex): Move standard colors from math.js to somewhere else\n    // so that they are available when this file is first parsed\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, options);\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.defaults(this, {\n        normalStyle: {\n            stroke: KhanColors.INTERACTIVE,\n            \"stroke-width\": 2,\n            fill: KhanColors.INTERACTIVE,\n        },\n        highlightStyle: {\n            stroke: KhanColors.INTERACTING,\n            \"stroke-width\": 2,\n            fill: KhanColors.INTERACTING,\n        },\n        labelStyle: {\n            stroke: KhanColors.DYNAMIC,\n            \"stroke-width\": 1,\n            color: KhanColors.DYNAMIC,\n        },\n        angleStyle: {\n            stroke: KhanColors.DYNAMIC,\n            \"stroke-width\": 1,\n            color: KhanColors.DYNAMIC,\n        },\n        allowReflex: true, // not on MovableAngle.prototype so that\n        // it is not overridden by undefined\n    });\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    if (!this.points || this.points.length !== 3) {\n        throw new PerseusError(\n            \"MovableAngle requires 3 points\",\n            Errors.InvalidInput,\n        );\n    }\n\n    // Handle coordinates that are not MovablePoints (i.e. [2, 4])\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.points = _.map(\n        options.points,\n        function (point) {\n            if (_.isArray(point)) {\n                return graphie.addMovablePoint({\n                    coord: point,\n                    visible: false,\n                    constraints: {\n                        fixed: true,\n                    },\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    normalStyle: this.normalStyle,\n                });\n            }\n            return point;\n        },\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this,\n    );\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.coords = _.pluck(this.points, \"coord\");\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    if (this.reflex == null) {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        if (this.allowReflex) {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.reflex = this._getClockwiseAngle(this.coords) > 180;\n        } else {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.reflex = false;\n        }\n    }\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.rays = _.map(\n        [0, 2],\n        function (i) {\n            return graphie.addMovableLineSegment({\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                pointA: this.points[1],\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                pointZ: this.points[i],\n                fixed: true,\n                extendRay: true,\n            });\n        },\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this,\n    );\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.temp = [];\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.labeledAngle = graphie.label([0, 0], \"\", \"center\", this.labelStyle);\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    if (!this.fixed) {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.addMoveHandlers();\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.addHighlightHandlers();\n    }\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.update();\n}\n\n_.extend(MovableAngle.prototype, {\n    points: [],\n    snapDegrees: 0,\n    snapOffsetDeg: 0,\n    angleLabel: \"\",\n    numArcs: 1,\n    pushOut: 0,\n    fixed: false,\n\n    addMoveHandlers: function () {\n        const graphie = this.graphie;\n\n        function tooClose(point1: Array<never>, point2: Array<never>) {\n            const safeDistance = 30;\n            const distance = GraphUtils.getDistance(\n                graphie.scalePoint(point1),\n                graphie.scalePoint(point2),\n            );\n            return distance < safeDistance;\n        }\n\n        const points = this.points;\n\n        // Drag the vertex to move the entire angle\n        points[1].onMove = function (x, y: any) {\n            const oldVertex = points[1].coord;\n            const newVertex = [x, y];\n            const delta = addPoints(newVertex, reverseVector(oldVertex));\n\n            let valid = true;\n            const newPoints: Record<string, any> = {};\n            _.each([0, 2], function (i) {\n                const oldPoint = points[i].coord;\n                let newPoint = addPoints(oldPoint, delta);\n\n                let angle = GraphUtils.findAngle(newVertex, newPoint);\n                angle *= Math.PI / 180;\n                newPoint = graphie.constrainToBoundsOnAngle(\n                    newPoint,\n                    10,\n                    angle,\n                );\n                newPoints[i] = newPoint;\n\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any[]' is not assignable to parameter of type 'never[]'.\n                if (tooClose(newVertex, newPoint)) {\n                    valid = false;\n                }\n            });\n\n            // Only move points if all new positions are valid\n            if (valid) {\n                _.each(newPoints, function (newPoint, i) {\n                    points[i].setCoord(newPoint);\n                });\n            }\n            return valid;\n        };\n\n        const snap = this.snapDegrees;\n        const snapOffset = this.snapOffsetDeg;\n\n        // Drag ray control points to move each ray individually\n        _.each([0, 2], function (i) {\n            points[i].onMove = function (x: any, y) {\n                const newPoint = [x, y];\n                const vertex = points[1].coord;\n\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any[]' is not assignable to parameter of type 'never[]'.\n                if (tooClose(vertex, newPoint)) {\n                    return false;\n                }\n                if (snap) {\n                    let angle = GraphUtils.findAngle(newPoint, vertex);\n                    angle =\n                        Math.round((angle - snapOffset) / snap) * snap +\n                        snapOffset;\n                    const distance = GraphUtils.getDistance(newPoint, vertex);\n                    return addPoints(vertex, graphie.polar(distance, angle));\n                }\n                return true;\n            };\n        });\n\n        // Expose only a single move event\n        $(points).on(\n            \"move\",\n            function () {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this.update();\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                $(this).trigger(\"move\");\n            }.bind(this),\n        );\n    },\n\n    addHighlightHandlers: function () {\n        const vertex = this.points[1];\n\n        vertex.onHighlight = function () {\n            _.each(\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this.points,\n                function (point) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    point.visibleShape.animate(this.highlightStyle, 50);\n                },\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this,\n            );\n            _.each(\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this.rays,\n                function (ray) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    ray.visibleLine.animate(this.highlightStyle, 50);\n                    ray.arrowStyle = _.extend({}, ray.arrowStyle, {\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        color: this.highlightStyle.stroke,\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        stroke: this.highlightStyle.stroke,\n                    });\n                },\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this,\n            );\n\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.angleStyle = _.extend({}, this.angleStyle, {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                color: this.highlightStyle.stroke,\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                stroke: this.highlightStyle.stroke,\n            });\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.update();\n        }.bind(this);\n\n        vertex.onUnhighlight = function () {\n            _.each(\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this.points,\n                function (point) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    point.visibleShape.animate(this.normalStyle, 50);\n                },\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this,\n            );\n            _.each(\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this.rays,\n                function (ray) {\n                    ray.visibleLine.animate(ray.normalStyle, 50);\n                    ray.arrowStyle = _.extend({}, ray.arrowStyle, {\n                        color: ray.normalStyle.stroke,\n                        stroke: ray.normalStyle.stroke,\n                    });\n                },\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this,\n            );\n\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.angleStyle = _.extend({}, this.angleStyle, {\n                color: KhanColors.DYNAMIC,\n                stroke: KhanColors.DYNAMIC,\n            });\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.update();\n        }.bind(this);\n    },\n\n    /**\n     * Returns the angle in [0, 360) degrees created by the\n     * coords when interpreted in a clockwise direction.\n     */\n    _getClockwiseAngle: function (coords) {\n        const rawAngle = GraphUtils.findAngle(\n            // The order of these is \"weird\" to match what a clockwise\n            // order is in graphie.labelAngle\n            coords[2], // from the second point\n            coords[0], // clockwise to the first point\n            coords[1], // the vertex parameter is last\n        );\n        const clockwiseAngle = rawAngle + (360 % 360);\n\n        return clockwiseAngle;\n    },\n\n    isReflex: function () {\n        return this.reflex;\n    },\n\n    isClockwise: function () {\n        const clockwiseReflexive = this._getClockwiseAngle(this.coords) > 180;\n        return clockwiseReflexive === this.reflex;\n    },\n\n    getClockwiseCoords: function () {\n        if (this.isClockwise()) {\n            return _.clone(this.coords);\n        }\n        return _.clone(this.coords).reverse();\n    },\n\n    update: function (shouldChangeReflexivity) {\n        const prevCoords = this.coords;\n        this.coords = _.pluck(this.points, \"coord\");\n\n        // Update lines\n        _.invoke(this.points, \"updateLineEnds\");\n\n        const prevAngle = this._getClockwiseAngle(prevCoords);\n        const angle = this._getClockwiseAngle(this.coords);\n        const prevClockwiseReflexive = prevAngle > 180;\n        const clockwiseReflexive = angle > 180;\n\n        if (this.allowReflex) {\n            if (shouldChangeReflexivity == null) {\n                shouldChangeReflexivity =\n                    prevClockwiseReflexive !== clockwiseReflexive &&\n                    Math.abs(angle - prevAngle) < 180;\n            }\n\n            if (shouldChangeReflexivity) {\n                this.reflex = !this.reflex;\n            }\n        }\n\n        _.invoke(this.temp, \"remove\");\n        this.temp = this.graphie.labelAngle({\n            point1: this.coords[0],\n            vertex: this.coords[1],\n            point3: this.coords[2],\n            label: this.labeledAngle,\n            text: this.angleLabel,\n            numArcs: this.numArcs,\n            pushOut: this.pushOut,\n            clockwise: this.reflex === clockwiseReflexive,\n            style: this.angleStyle,\n        });\n    },\n\n    remove: function () {\n        _.invoke(this.rays, \"remove\");\n        _.invoke(this.temp, \"remove\");\n        this.labeledAngle.remove();\n    },\n});\n\nexport default InteractiveUtils;\n","/* eslint-disable @babel/no-invalid-this */\nimport _ from \"underscore\";\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\nimport Util from \"../util\";\n\nconst nestedMap = Util.nestedMap;\nconst deepEq = Util.deepEq;\n\n/**\n * A base class for all Graphie Movables\n *\n * Used for checking that all Graphie children are, in fact,\n * GraphieMovables\n */\nfunction GraphieMovable(descriptor: any) {\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, descriptor);\n}\n\nconst abstractMethod = function () {\n    throw new PerseusError(\n        \"Abstract method! Must be implemented by Graphie Movable\" +\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.constructor.displayName,\n        Errors.NotAllowed,\n    );\n};\n\n_.extend(GraphieMovable.prototype, {\n    movableProps: [],\n    add: abstractMethod,\n    modify: abstractMethod,\n    remove: abstractMethod,\n    toFront: function () {\n        /* no op */\n    },\n    componentDidMount: function () {\n        /* no op */\n        // Note: this method is here to trick react-hot-loader into thinking\n        // components built from extending GraphieMovable are recognized as\n        // class base React components so that they get wrapped correctly.\n        // See https://github.com/gaearon/react-hot-loader/blob/master/src/internal/reactUtils.js#L14-L26\n        // for details of how react-hot-loader determines whether something is\n        // a React class (component).\n    },\n});\n\n/**\n * returns cloned props modified with `children: childrenArray`\n */\nconst rewriteProps = function (props: any, childrenArray: any) {\n    // Clone the props and add `children:`\n    // childrenArray is always an array here because this is only called\n    // from createClass, which initializes childrenArray as _.rest(arguments)\n    return _.extend({}, props, {\n        children: _.filter(_.flatten(childrenArray), _.identity),\n    });\n};\n\n/**\n * Create a custom GraphieMovable class\n */\nconst createClass = function (spec: any): any {\n    const GraphieClass = function (props: any) {\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        if (!(this instanceof GraphieClass)) {\n            throw new PerseusError(\n                \"Use createElement or JSX with graphie movables\",\n                Errors.NotAllowed,\n            );\n        }\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        this.props = rewriteProps(props, props.children || []);\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        return this;\n    };\n\n    spec.displayName = spec.displayName || _.uniqueId(\"GraphieClass\");\n\n    // Add the displayName to the constructor for compatibility with\n    // React's myDescriptor.constructor.displayName\n    GraphieClass.displayName = spec.displayName;\n\n    GraphieClass.prototype = new GraphieMovable(spec);\n    GraphieClass.prototype.constructor = GraphieClass;\n\n    return GraphieClass;\n};\n\n/**\n * Create a GraphieMovable class from a function that describes\n * how to add said class to a graphie, and returns an array of\n * `.remove()`able elements to be used when a remove() or\n * modify() is called.\n *\n * This convenience method creates an inefficient class, although\n * it does check for a difference in this.props and prevProps before\n * removing and re-adding itself.\n *\n * The primary benefit of this is being able to very easily create\n * a wrapper for old graphie code to make it interface with <Graphie>\n *\n * Commonly used elements should use the fully-fledged createClass\n * and implement an efficient modify() operation.\n */\nconst createSimpleClass = function (addFunction: any): any {\n    return createClass({\n        displayName: addFunction.name || _.uniqueId(\"GraphieSimpleClass\"),\n        movableProps: [\"children\"],\n\n        add: function (graphie) {\n            this._elements = addFunction(graphie, this.props);\n            this._prevProps = this.props;\n        },\n\n        modify: function (graphie) {\n            if (!deepEq(this.props, this._prevProps)) {\n                this.remove();\n                this.add(graphie);\n                this._prevProps = this.props;\n                return \"reordered\";\n            }\n        },\n\n        remove: function () {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 3 arguments, but got 2.\n            nestedMap(this._elements, (elem) => {\n                if (elem) {\n                    elem.remove();\n                }\n            });\n            this._elements = null;\n            this._prevProps = null;\n        },\n\n        toFront: function () {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 3 arguments, but got 2.\n            nestedMap(this._elements, (elem) => {\n                if (_.isFunction(elem.toFront)) {\n                    elem.toFront();\n                }\n            });\n        },\n    });\n};\n\nexport default {\n    GraphieMovable: GraphieMovable,\n    createClass: createClass,\n    createSimpleClass: createSimpleClass,\n};\n","/**\n * Movable\n *\n * A Movable Something, that sends onMove events based on the\n * mouse coordinate (graphie unscaled, non-pixel-value) of the\n * move.\n *\n * Other MovableThings should generally have a Movable field, and\n * let this class handle all of the virtual mouse events, and then\n * take appropriate action in onMoveStart, onMove, onMoveEnd\n */\nimport {point as kpoint} from \"@khanacademy/kmath\";\nimport $ from \"jquery\";\nimport _ from \"underscore\";\n\nimport InteractiveUtil from \"./interactive-util\";\n\nconst normalizeOptions = InteractiveUtil.normalizeOptions;\n\nconst assert = InteractiveUtil.assert;\n\n// state parameters that should be converted into an array of\n// functions\nconst FUNCTION_ARRAY_OPTIONS = [\n    \"add\",\n    \"modify\",\n    \"draw\",\n    \"remove\",\n    \"onMoveStart\",\n    \"onMove\",\n    \"onMoveEnd\",\n    \"onClick\",\n];\n\n// Default \"props\" and \"state\". Both are added to this.state and\n// receive magic getter methods (this.isHovering() etc).\n// However, properties in DEFAULT_PROPS are updated on `modify()`,\n// while those in DEFAULT_STATE persist and are not updated.\n// Things that the user might want to change should be on \"props\",\n// while things used to render the movable should be on \"state\".\nconst DEFAULT_PROPS = {\n    cursor: null,\n} as const;\nconst DEFAULT_STATE = {\n    added: false,\n    isHovering: false,\n    isMouseOver: false,\n    isDragging: false,\n    mouseTarget: null,\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2355 - A function whose declared type is neither 'void' nor 'any' must return a value.\nconst Movable = function (graphie: any, options: any): undefined {\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, {\n        graphie: graphie,\n        state: {\n            // Set here because this must be unique for each instance\n            id: _.uniqueId(\"movable\"),\n        },\n    });\n\n    // We only set DEFAULT_STATE once, here\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.modify(_.extend({}, DEFAULT_STATE, options));\n};\n\nInteractiveUtil.createGettersFor(\n    Movable,\n    _.extend({}, DEFAULT_PROPS, DEFAULT_STATE),\n);\nInteractiveUtil.addMovableHelperMethodsTo(Movable);\n\n_.extend(Movable.prototype, {\n    cloneState: function () {\n        return _.clone(this.state);\n    },\n\n    _createDefaultState: function () {\n        return _.extend(\n            {\n                id: this.state.id,\n                add: [],\n                modify: [],\n                draw: [],\n                remove: [],\n                onMoveStart: [],\n                onMove: [],\n                onMoveEnd: [],\n                onClick: [],\n\n                // We only update props here, because we want things on state to\n                // be persistent, and updated appropriately in modify()\n            },\n            DEFAULT_PROPS,\n        );\n    },\n\n    /**\n     * Resets the object to its state as if it were constructed with\n     * `options` originally. The only state maintained is `state.id`\n     *\n     * Analogous to React.js's replaceProps\n     */\n    modify: function (options) {\n        this.update(_.extend({}, this._createDefaultState(), options));\n    },\n\n    /**\n     * Simulates a mouse grab event on the movable object.\n     */\n    grab: function (coord) {\n        assert(kpoint.is(coord));\n        const self = this;\n        const graphie = self.graphie;\n        const state = self.state;\n\n        state.isHovering = true;\n        state.isDragging = true;\n        graphie.isDragging = true;\n\n        const startMouseCoord = coord;\n        let prevMouseCoord = startMouseCoord;\n        self._fireEvent(state.onMoveStart, startMouseCoord, startMouseCoord);\n\n        const moveHandler = function (e: any) {\n            e.preventDefault();\n\n            const mouseCoord = graphie.getMouseCoord(e);\n            self._fireEvent(state.onMove, mouseCoord, prevMouseCoord);\n            self.draw();\n            prevMouseCoord = mouseCoord;\n        };\n\n        const upHandler = function (e: any) {\n            $(document).unbind(\"vmousemove\", moveHandler);\n            $(document).unbind(\"vmouseup\", upHandler);\n            if (state.isHovering) {\n                self._fireEvent(state.onClick, prevMouseCoord, startMouseCoord);\n            }\n            state.isHovering = self.state.isMouseOver;\n            state.isDragging = false;\n            graphie.isDragging = false;\n            self._fireEvent(state.onMoveEnd, prevMouseCoord, startMouseCoord);\n            self.draw();\n        };\n\n        $(document).bind(\"vmousemove\", moveHandler);\n        $(document).bind(\"vmouseup\", upHandler);\n    },\n\n    /**\n     * Adjusts constructor parameters without changing previous settings\n     * for any option not specified\n     *\n     * Analogous to React.js's setProps\n     */\n    update: function (options) {\n        const self = this;\n        const graphie = self.graphie;\n\n        const prevState = self.cloneState();\n        const state = _.extend(\n            self.state,\n            normalizeOptions(FUNCTION_ARRAY_OPTIONS, options),\n        );\n\n        // the invisible shape in front of the point that gets mouse events\n        if (state.mouseTarget && !prevState.mouseTarget) {\n            let $mouseTarget;\n            if (state.mouseTarget.getMouseTarget) {\n                $mouseTarget = $(state.mouseTarget.getMouseTarget());\n            } else {\n                $mouseTarget = $(state.mouseTarget[0]);\n            }\n\n            const isMouse = !(\"ontouchstart\" in window);\n\n            if (isMouse) {\n                $mouseTarget.on(\"vmouseover\", function () {\n                    state.isMouseOver = true;\n                    if (!graphie.isDragging) {\n                        state.isHovering = true;\n                    }\n                    if (self.state.added) {\n                        // Avoid drawing if the point has been removed\n                        self.draw();\n                    }\n                });\n\n                $mouseTarget.on(\"vmouseout\", function () {\n                    state.isMouseOver = false;\n                    if (!state.isDragging) {\n                        state.isHovering = false;\n                    }\n                    if (self.state.added) {\n                        // Avoid drawing if the point has been removed\n                        self.draw();\n                    }\n                });\n            }\n\n            // Prevent the page from scrolling when we grab and drag the\n            // movable object on a mobile device.\n            $mouseTarget[0].addEventListener(\n                \"touchstart\",\n                function (event) {\n                    event.preventDefault();\n                },\n                {passive: false},\n            );\n\n            $mouseTarget.on(\"vmousedown\", function (e) {\n                if (e.which !== 0 && e.which !== 1) {\n                    return;\n                }\n                e.preventDefault();\n\n                const mouseCoord = graphie.getMouseCoord(e);\n                self.grab(mouseCoord);\n            });\n        }\n\n        if (state.mouseTarget && state.cursor !== undefined) {\n            let $mouseTarget;\n            if (state.mouseTarget.getMouseTarget) {\n                $mouseTarget = $(state.mouseTarget.getMouseTarget());\n            } else {\n                $mouseTarget = $(state.mouseTarget[0]);\n            }\n\n            // \"\" removes the css cursor if state.cursor is null\n            $mouseTarget.css(\"cursor\", state.cursor || \"\");\n        }\n\n        // Trigger an add event if this hasn't been added before\n        if (!state.added) {\n            self._fireEvent(state.modify, self.cloneState(), {});\n            state.added = true;\n\n            // Update the state for `added` and in case the add event\n            // changed it\n            self.prevState = self.cloneState();\n        }\n\n        // Trigger a modify event\n        self._fireEvent(state.modify, self.cloneState(), self.prevState);\n    },\n\n    remove: function () {\n        this.state.added = false;\n        this._fireEvent(this.state.remove);\n        if (this.state.mouseTarget) {\n            $(this.state.mouseTarget).off();\n            this.state.mouseTarget.remove();\n            this.state.mouseTarget = null;\n        }\n    },\n\n    // Change z-order to back\n    toBack: function () {\n        if (this.state.mouseTarget) {\n            this.state.mouseTarget.toBack();\n        }\n    },\n\n    // Change z-order to front\n    toFront: function () {\n        if (this.state.mouseTarget) {\n            this.state.mouseTarget.toFront();\n        }\n    },\n});\n\nexport default Movable;\n","/* eslint-disable @babel/no-invalid-this */\n/**\n * A library of options to pass to add/draw/remove/constraints\n */\nimport {vector as kvector, point as kpoint} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport KhanMath from \"../util/math\";\n\nimport WrappedLine from \"./wrapped-line\";\nimport WrappedPath from \"./wrapped-path\";\n\nimport type {Coord} from \"./types\";\n\n/**\n * Helper functions\n */\nconst getScaledAngle = function (line: any) {\n    const scaledA = line.graphie.scalePoint(line.coord(0));\n    const scaledZ = line.graphie.scalePoint(line.coord(1));\n    return kvector.polarDegFromCart(kvector.subtract(scaledZ, scaledA))[1];\n};\n\n// Given `coord` and `angle`, find the point where a line extended\n// from `coord` in the direction of `angle` would be clipped by the\n// edge of the graphie canvas. Then draw an arrowhead at that point\n// pointing in the direction of `angle`.\nconst getClipPoint = function (graph, coord: Coord, angle: number) {\n    // Actually put the arrowheads 4px from the edge so they have\n    // a bit of room\n    const xExtent = graph.range[0][1] - graph.range[0][0];\n    const yExtent = graph.range[1][1] - graph.range[1][0];\n\n    // shoot a point off into the distance ...\n    const distance = xExtent + yExtent;\n    // we need to scale the point according to the scale of the axes\n    const angleVec = graph.unscaleVector(kvector.cartFromPolarDeg(1, angle));\n    const distVec = kvector.scale(kvector.normalize(angleVec), distance);\n    const farCoord = kvector.add(coord, distVec);\n    const scaledAngle = kvector.polarDegFromCart(angleVec)[1];\n    // ... and then bring it back\n    const clipPoint = graph.constrainToBoundsOnAngle(\n        farCoord,\n        4,\n        (scaledAngle * Math.PI) / 180,\n    );\n    return clipPoint;\n};\n\n// Given `coord` and `angle`, find the point where a line extended\n// from `coord` in the direction of `angle` would be clipped by the\n// edge of the graphie canvas. Then draw an arrowhead at that point\n// pointing in the direction of `angle`.\nconst createArrow = function (graph, style: any) {\n    // Points that define the arrowhead\n    const center = [0.75, 0];\n    let points = [\n        [-3, 4],\n        [-2.75, 2.5],\n        [0, 0.25],\n        center,\n        [0, -0.25],\n        [-2.75, -2.5],\n        [-3, -4],\n    ];\n\n    // Scale points by 1.4 around (0.75, 0)\n    const scale = 1.4;\n    points = _.map(points, function (point) {\n        const pv = kvector.subtract(point, center);\n        const pvScaled = kvector.scale(pv, scale);\n        return kvector.add(center, pvScaled);\n    });\n\n    // We can't just pass in a path to `graph.fixedPath` as we need to modify\n    // the points in some way, so instead we provide a function for creating\n    // the path once the points have been transformed\n    const createCubicPath = function (points) {\n        let path = \"M\" + points[0][0] + \" \" + points[0][1];\n        for (let i = 1; i < points.length; i += 3) {\n            path +=\n                \"C\" +\n                points[i][0] +\n                \" \" +\n                points[i][1] +\n                \" \" +\n                points[i + 1][0] +\n                \" \" +\n                points[i + 1][1] +\n                \" \" +\n                points[i + 2][0] +\n                \" \" +\n                points[i + 2][1];\n        }\n        return path;\n    };\n\n    // Create arrowhead\n    const unscaledPoints = _.map(points, graph.unscalePoint);\n    const options = {\n        center: graph.unscalePoint(center),\n        createPath: createCubicPath,\n    } as const;\n    const arrowHead = new WrappedPath(graph, unscaledPoints, options);\n    arrowHead.attr(\n        _.extend(\n            {\n                \"stroke-linejoin\": \"round\",\n                \"stroke-linecap\": \"round\",\n                \"stroke-dasharray\": \"\",\n            },\n            style,\n        ),\n    );\n\n    // Add custom function for transforming arrowheads that accounts for\n    // center, scaling, etc.\n    arrowHead.toCoordAtAngle = function (coord: Coord, angle: number) {\n        const clipPoint = graph.scalePoint(getClipPoint(graph, coord, angle));\n        arrowHead.transform(\n            \"translateX(\" +\n                (clipPoint[0] + scale * center[0]) +\n                \"px) \" +\n                \"translateY(\" +\n                (clipPoint[1] + scale * center[1]) +\n                \"px) \" +\n                \"translateZ(0) \" +\n                \"rotate(\" +\n                (360 - KhanMath.bound(angle)) +\n                \"deg)\",\n        );\n    };\n\n    return arrowHead;\n};\n\n/**\n * MovableLine option functions\n */\nconst add = {\n    // We do this in add as well as in standard so that we can call\n    // pointsToFront after the first draw (which adds `this.visibleShape`)\n    draw: function () {\n        this.draw();\n    },\n\n    pointsToFront: function (state: any) {\n        _.invoke(state.points, \"toFront\");\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly draw: () => void; readonly pointsToFront: (state: any) => void; }'.\nadd.standard = [add.draw, add.pointsToFront];\n\nconst modify = {\n    draw: function () {\n        this.draw();\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly draw: () => void; }'.\nmodify.standard = [modify.draw];\n\nconst draw = {\n    basic: function (state: any) {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        const graphie = this.graphie;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'coord' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        let start = this.coord(0);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'coord' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        let end = this.coord(1);\n\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        if (!this.state.visibleShape) {\n            const options = {\n                thickness: 10,\n            } as const;\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape = new WrappedLine(\n                graphie,\n                start,\n                end,\n                options,\n            );\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape.attr(this.normalStyle());\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape.toFront();\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            if (this.mouseTarget()) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                this.mouseTarget().toFront();\n            }\n        }\n\n        // Compute angle\n        const angle = getScaledAngle(this);\n\n        // Extend start, end if necessary (i.e., if not a line segment)\n        if (state.extendLine) {\n            start = getClipPoint(graphie, start, 360 - angle);\n            end = getClipPoint(graphie, end, (540 - angle) % 360);\n        } else if (state.extendRay) {\n            end = getClipPoint(graphie, end, 360 - angle);\n        }\n\n        // Move elements\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        const elements = [this.state.visibleShape];\n\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        if (this.mouseTarget()) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            elements.push(this.mouseTarget());\n        }\n        _.each(elements, function (element) {\n            element.moveTo(start, end);\n        });\n    },\n\n    arrows: function (state: any) {\n        // Create arrows, if not yet created\n        // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. Did you mean 'arrows'?\n        if (this._arrows == null) {\n            // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. Did you mean 'arrows'?\n            this._arrows = [];\n            if (state.extendLine) {\n                // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. Did you mean 'arrows'?\n                this._arrows.push(\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                    createArrow(this.graphie, this.normalStyle()),\n                );\n                // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. Did you mean 'arrows'?\n                this._arrows.push(\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                    createArrow(this.graphie, this.normalStyle()),\n                );\n            } else if (state.extendRay) {\n                // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. Did you mean 'arrows'?\n                this._arrows.push(\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                    createArrow(this.graphie, this.normalStyle()),\n                );\n            }\n        }\n\n        // Transform arrows\n        const angle = getScaledAngle(this);\n        const angleForArrow = [360 - angle, (540 - angle) % 360];\n        _.each(\n            // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. Did you mean 'arrows'?\n            this._arrows,\n            function (arrow, i) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                arrow.toCoordAtAngle(this.coord(i), angleForArrow[i]);\n            },\n            this,\n        );\n    },\n\n    highlight: function (state: any, prevState: any) {\n        // TODO(jack): Figure out a way to highlight the points attached to\n        // the line. Maybe this means an additional isHovering: []\n        // function to state of movable/movablepoint to define [additional?]\n        // times it should be highlighted\n        if (state.isHovering && !prevState.isHovering) {\n            state.visibleShape.animate(state.highlightStyle, 50);\n        } else if (!state.isHovering && prevState.isHovering) {\n            state.visibleShape.animate(state.normalStyle, 50);\n        }\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly basic: (state: any) => void; readonly arrows: (state: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\ndraw.standard = [draw.basic, draw.arrows, draw.highlight];\n\nconst remove = {\n    basic: function () {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly arrows: () => void; }'.\n        if (this.state.visibleShape) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly arrows: () => void; }'.\n            this.state.visibleShape.remove();\n        }\n    },\n\n    arrows: function () {\n        // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: () => void; readonly arrows: () => void; }'. Did you mean 'arrows'?\n        if (this._arrows != null) {\n            // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: () => void; readonly arrows: () => void; }'. Did you mean 'arrows'?\n            _.invoke(this._arrows, \"remove\");\n        }\n        // @ts-expect-error [FEI-5003] - TS2551 - Property '_arrows' does not exist on type '{ readonly basic: () => void; readonly arrows: () => void; }'. Did you mean 'arrows'?\n        this._arrows = null;\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly basic: () => void; readonly arrows: () => void; }'.\nremove.standard = [remove.basic, remove.arrows];\n\nconst constraints = {\n    fixed: function (): () => boolean {\n        return function () {\n            return false;\n        };\n    },\n\n    snap: function (snap: any): (arg1: Coord, arg2: Coord) => any {\n        return function (coord: Coord, prevCoord: Coord) {\n            if (snap === null) {\n                return true;\n            }\n            let delta = kvector.subtract(coord, prevCoord);\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            snap = snap || this.graphie.snap;\n            delta = kpoint.roundTo(delta, snap);\n            return kvector.add(prevCoord, delta);\n        };\n    },\n\n    bound: function (\n        range: any,\n        snap: any,\n        paddingPx: number,\n    ): (arg1: any, arg2: any) => any {\n        if (paddingPx === undefined) {\n            if (range === undefined) {\n                paddingPx = 10;\n            } else {\n                paddingPx = 0;\n            }\n        }\n        return function (coord: Coord, prevCoord: Coord) {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            const graphie = this.graphie;\n            const delta = kvector.subtract(coord, prevCoord);\n            range = range || graphie.range;\n            // A null snap means no snap; an undefined snap means\n            // default to graphie's\n            if (snap === undefined) {\n                snap = graphie.snap;\n            }\n\n            // Calculate the bounds for both points\n            let absoluteLower = graphie.unscalePoint([\n                paddingPx,\n                graphie.ypixels - paddingPx,\n            ]);\n            let absoluteUpper = graphie.unscalePoint([\n                graphie.xpixels - paddingPx,\n                paddingPx,\n            ]);\n            if (snap) {\n                absoluteLower = kpoint.ceilTo(absoluteLower, snap);\n                absoluteUpper = kpoint.floorTo(absoluteUpper, snap);\n            }\n\n            // Calculate the bounds for the delta.\n            const deltaBounds = _.map(\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                this.coords(),\n                function (coord: Coord, i: number) {\n                    const max = kvector.subtract(absoluteUpper, coord);\n                    const min = kvector.subtract(absoluteLower, coord);\n                    return [min, max];\n                },\n            );\n\n            // bound the delta by the calculated bounds\n            const boundedDelta = _.reduce(\n                deltaBounds,\n                function (delta, bound) {\n                    const lower = bound[0];\n                    const upper = bound[1];\n                    const deltaX = Math.max(\n                        lower[0],\n                        Math.min(upper[0], delta[0]),\n                    );\n                    const deltaY = Math.max(\n                        lower[1],\n                        Math.min(upper[1], delta[1]),\n                    );\n                    return [deltaX, deltaY];\n                },\n                delta,\n            );\n\n            return kvector.add(prevCoord, boundedDelta);\n        };\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly fixed: () => () => boolean; readonly snap: (snap: any) => (arg1: Coord, arg2: Coord) => any; readonly bound: (range: any, snap: any, paddingPx: number) => (arg1: any, arg2: any) => any; }'.\nconstraints.standard = null;\n\nconst onMove = {\n    updatePoints: function (coord: Coord, prevCoord: Coord) {\n        const actualDelta = kvector.subtract(coord, prevCoord);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly updatePoints: (coord: Coord, prevCoord: Coord) => void; }'.\n        _.each(this.state.points, function (point) {\n            point.setCoord(kvector.add(point.coord(), actualDelta));\n        });\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly updatePoints: (coord: Coord, prevCoord: Coord) => void; }'.\nonMove.standard = null;\n\nexport default {\n    add: add,\n    modify: modify,\n    draw: draw,\n    remove: remove,\n\n    onMoveStart: {standard: null},\n    constraints: constraints,\n    onMove: onMove,\n    onMoveEnd: {standard: null},\n};\n","/**\n * MovableLine\n */\nimport {vector as kvector} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport KhanColors from \"../util/colors\";\n\nimport InteractiveUtil from \"./interactive-util\";\nimport MovableLineOptions from \"./movable-line-options\";\nimport objective_ from \"./objective_\";\nimport WrappedLine from \"./wrapped-line\";\n\nconst assert = InteractiveUtil.assert;\nconst normalizeOptions = InteractiveUtil.normalizeOptions;\n\nconst FUNCTION_ARRAY_OPTIONS = [\n    \"add\",\n    \"draw\",\n    \"remove\",\n    \"onMoveStart\",\n    \"constraints\",\n    \"onMove\",\n    \"onMoveEnd\",\n];\n\n// Default \"props\" and \"state\". Both are added to this.state and\n// receive magic getter methods (this.cursor() etc).\n// However, properties in DEFAULT_PROPS are updated on `modify()`,\n// while those in DEFAULT_STATE persist and are not updated.\n// Things that the user might want to change should be on \"props\",\n// while things used to render the point should be on \"state\".\nconst DEFAULT_PROPS = {\n    points: null,\n    static: false,\n    cursor: \"move\",\n    normalStyle: null, // turned into an object in this.modify\n    highlightStyle: null, // likewise\n    extendLine: false,\n    extendRay: false,\n} as const;\nconst DEFAULT_STATE = {\n    visibleShape: null,\n    mouseTarget: null,\n} as const;\n\nconst MovableLine = function (graphie: any, movable: any, options: any) {\n    assert(graphie != null);\n    assert(options != null);\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, {\n        graphie: graphie,\n        movable: movable,\n        state: {\n            // Set here because this must be unique for each instance\n            id: _.uniqueId(\"movableLine\"),\n        },\n    });\n\n    // We only set DEFAULT_STATE once, here\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.modify(_.extend({}, DEFAULT_STATE, options));\n};\n\n_.extend(MovableLine, MovableLineOptions);\nInteractiveUtil.createGettersFor(\n    MovableLine,\n    _.extend({}, DEFAULT_PROPS, DEFAULT_STATE),\n);\nInteractiveUtil.addMovableHelperMethodsTo(MovableLine);\n\n_.extend(MovableLine.prototype, {\n    cloneState: function () {\n        return _.extend(\n            this.movable.cloneState(),\n            {\n                coords: this.coords(),\n            },\n            this.state,\n        );\n    },\n\n    _createDefaultState: function () {\n        return _.extend(\n            {\n                id: this.state.id,\n            },\n            normalizeOptions(\n                FUNCTION_ARRAY_OPTIONS,\n                // Defaults are copied from MovableLineOptions.*.standard\n                // These defaults are set here instead of DEFAULT_PROPS/STATE\n                // because they:\n                //    - are objects, not primitives (and need a deeper copy)\n                //    - they don't need getters created for them\n                // TODO(jack): Consider \"default\" once we es3ify perseus\n                objective_.pluck(MovableLineOptions, \"standard\"),\n            ),\n            DEFAULT_PROPS,\n        );\n    },\n\n    /**\n     * Resets the object to its state as if it were constructed with\n     * `options` originally. state not on DEFAULT_PROPS is maintained.\n     *\n     * Analogous to React.js's replaceProps\n     */\n    modify: function (options) {\n        this.update(_.extend(this._createDefaultState(), options));\n    },\n\n    /**\n     * Adjusts constructor parameters without changing previous settings\n     * for any option not specified\n     *\n     * Analogous to React.js's setProps\n     */\n    update: function (options) {\n        const self = this;\n        const graphie = this.graphie;\n        const state = (self.state = _.extend(\n            self.state,\n            normalizeOptions(FUNCTION_ARRAY_OPTIONS, options),\n        ));\n\n        // Default things inside the state.normalStyle object, because\n        // _.extend is not deep.\n        // We use _.extend instead of _.defaults because we don't want\n        // to modify the passed-in copy (especially if it's from\n        // DEFAULT_PROPERTIES!)\n        const normalColor = state.static\n            ? KhanColors.DYNAMIC\n            : KhanColors.INTERACTIVE;\n        state.normalStyle = _.extend(\n            {\n                stroke: normalColor,\n                \"stroke-width\": 2,\n            },\n            state.normalStyle,\n        );\n\n        state.highlightStyle = _.extend(\n            {\n                stroke: KhanColors.INTERACTING,\n                \"stroke-width\": 3,\n            },\n            state.highlightStyle,\n        );\n\n        if (!state.static) {\n            // the invisible shape in front of the line that gets mouse events\n            if (!state.mouseTarget) {\n                const options = {\n                    thickness: 30,\n                    mouselayer: true,\n                    interactiveKindForTesting: \"movable-line\",\n                } as const;\n                state.mouseTarget = new WrappedLine(\n                    graphie,\n                    this.coord(0),\n                    this.coord(1),\n                    options,\n                );\n                state.mouseTarget.attr({fill: \"#000\", opacity: 0.0});\n            }\n        }\n\n        if (state.static && state.mouseTarget) {\n            // state.static was specified, remove any previously\n            // existing mousetarget (from a previous modify)\n            state.mouseTarget.remove();\n            state.mouseTarget = null;\n        }\n\n        // The movable that handles mouse events for us\n        self.movable.modify(\n            _.extend({}, state, {\n                mouseTarget: state.mouseTarget,\n\n                // We null out the add/modify/remove to avoid propagating our\n                // state.add... to the movable, so that we can fire those\n                // events ourselves, rather than letting the movable handle\n                // them\n                add: null,\n                modify: null,\n                draw: self.draw.bind(self),\n                remove: null,\n\n                onMoveStart: function () {\n                    self._initialRefCoord = self.coord(0);\n                    self._prevRefCoord = self._initialRefCoord;\n                    self._totalDelta = [0, 0];\n\n                    self._fireEvent(\n                        self.state.onMoveStart,\n                        self.coord(0),\n                        self.coord(0),\n                    );\n                },\n\n                onMove: function (mouseCoord, prevMouseCoord) {\n                    const delta = kvector.subtract(mouseCoord, prevMouseCoord);\n                    self._totalDelta = kvector.add(self._totalDelta, delta);\n                    let refCoord = kvector.add(\n                        self._initialRefCoord,\n                        self._totalDelta,\n                    );\n\n                    refCoord = self._applyConstraints(\n                        refCoord,\n                        self._prevRefCoord,\n                    );\n                    if (refCoord === false) {\n                        return;\n                    }\n\n                    self._fireEvent(\n                        self.state.onMove,\n                        refCoord,\n                        self._prevRefCoord,\n                    );\n                    self._prevRefCoord = refCoord;\n                },\n\n                onMoveEnd: function () {\n                    self._fireEvent(\n                        self.state.onMoveEnd,\n                        self._prevRefCoord,\n                        self._initialRefCoord,\n                    );\n                },\n            }),\n        );\n\n        // Trigger an add event if this hasn't been added before\n        if (!state.added) {\n            self.prevState = {};\n            self._fireEvent(state.add, self.cloneState(), self.prevState);\n            state.added = true;\n\n            // Update the line with the points' movement\n            _.invoke(\n                state.points,\n                \"listen\",\n                \"onMove\",\n                state.id,\n                self.draw.bind(self),\n            );\n\n            // Update the state for `added` and in case the add event\n            // changed it\n            self.prevState = self.cloneState();\n        }\n\n        // Trigger a modify event\n        self._fireEvent(state.modify, self.cloneState(), self.prevState);\n    },\n\n    coords: function () {\n        return _.invoke(this.state.points, \"coord\");\n    },\n\n    point: function (index) {\n        return this.state.points[index];\n    },\n\n    coord: function (index) {\n        return this.point(index).coord();\n    },\n\n    remove: function () {\n        this.state.added = false;\n        this._fireEvent(this.state.remove);\n        if (this.points) {\n            _.invoke(this.points, \"unlisten\", \"onMove\", this.state.id);\n        }\n\n        if (this.movable) {\n            // We need this to be guarded because it is called on the initial\n            // constructor/modify call, before this.movable is created\n            this.movable.remove();\n        }\n    },\n\n    // Change z-order to back\n    toBack: function () {\n        this.movable.toBack();\n        if (this.state.visibleShape) {\n            this.state.visibleShape.toBack();\n        }\n    },\n\n    // Change z-order to front\n    toFront: function () {\n        if (this.state.visibleShape) {\n            this.state.visibleShape.toFront();\n        }\n        this.movable.toFront();\n    },\n\n    /**\n     * Forwarding methods to this.movable:\n     */\n    isHovering: function () {\n        return this.movable.isHovering();\n    },\n\n    isDragging: function () {\n        return this.movable.isDragging();\n    },\n\n    mouseTarget: function () {\n        return this.movable.mouseTarget();\n    },\n});\n\nexport default MovableLine;\n","/* eslint-disable @babel/no-invalid-this */\n/**\n * A library of options to pass to add/draw/remove/constraints\n */\nimport {point as kpoint} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport WrappedEllipse from \"./wrapped-ellipse\";\n\nimport type {Coord} from \"./types\";\n\nconst add = {\n    constrain: function () {\n        this.constrain();\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly constrain: () => void; }'.\nadd.standard = [add.constrain];\n\nconst modify = {\n    draw: function () {\n        this.draw();\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly draw: () => void; }'.\nmodify.standard = [modify.draw];\n\nconst draw = {\n    basic: function (state: any, prevState: any) {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        const graphie = this.graphie;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        if (!this.state.visibleShape) {\n            const radii = [\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'pointSize' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                this.pointSize() / graphie.scale[0],\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'pointSize' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                this.pointSize() / graphie.scale[1],\n            ];\n            const options = {\n                maxScale: Math.max(\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'highlightStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                    this.highlightStyle().scale,\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                    this.normalStyle().scale,\n                ),\n                // Add in 10px of padding to avoid clipping at the edges.\n                padding: 10,\n                shadow: state.shadow,\n            } as const;\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape = new WrappedEllipse(\n                graphie,\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'coord' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                this.coord(),\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type '[number, number]'.\n                radii,\n                options,\n            );\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape.attr(_.omit(this.normalStyle(), \"scale\"));\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape.toFront();\n\n            // Keep mouseTarget in front of visible shape\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            if (this.mouseTarget()) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                this.mouseTarget().toFront();\n            }\n        }\n        if (\n            state.normalStyle !== prevState.normalStyle &&\n            !_.isEqual(state.normalStyle, prevState.normalStyle)\n        ) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape.attr(this.normalStyle());\n        }\n\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'coord' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        this.state.visibleShape.moveTo(this.coord());\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        if (this.mouseTarget()) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'coord' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.mouseTarget().moveTo(this.coord());\n        }\n    },\n\n    highlight: function (state: any, prevState: any) {\n        if (state.isHovering && !prevState.isHovering) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'highlightStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            state.visibleShape.animate(this.highlightStyle(), 50);\n        } else if (!state.isHovering && prevState.isHovering) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            state.visibleShape.animate(this.normalStyle(), 50);\n        }\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\ndraw.standard = [draw.basic, draw.highlight];\n\nconst remove = {\n    basic: function () {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; }'.\n        if (this.state.visibleShape) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; }'.\n            this.state.visibleShape.remove();\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; }'.\n            this.state.visibleShape = null;\n        }\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly basic: () => void; }'.\nremove.standard = remove.basic;\n\nconst constraints = {\n    fixed: function (): () => boolean {\n        return function () {\n            return false;\n        };\n    },\n\n    snap: function (snap: any): (arg1: Coord) => unknown {\n        return function (coord: Coord): unknown {\n            if (snap === null) {\n                // NOTE(kevinb): this should probably return the original point\n                return true;\n            }\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            snap = snap || this.graphie.snap;\n            return kpoint.roundTo(coord, snap);\n        };\n    },\n\n    bound: function (\n        range: any,\n        snap: any,\n        paddingPx: number,\n    ): (arg1: Coord, arg2: Coord, arg3: any) => Coord {\n        if (paddingPx === undefined) {\n            if (range === undefined) {\n                paddingPx = 10;\n            } else {\n                paddingPx = 0;\n            }\n        }\n        return function (coord: Coord, prev, options: any) {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            const graphie = this.graphie;\n            range = range || graphie.range;\n\n            if (snap === undefined) {\n                snap = graphie.snap;\n            }\n\n            let lower = graphie.unscalePoint([\n                paddingPx,\n                graphie.ypixels - paddingPx,\n            ]);\n\n            let upper = graphie.unscalePoint([\n                graphie.xpixels - paddingPx,\n                paddingPx,\n            ]);\n\n            if (snap) {\n                lower = kpoint.ceilTo(lower, snap);\n                upper = kpoint.floorTo(upper, snap);\n            }\n\n            if (!!options && !!options.onOutOfBounds) {\n                if (\n                    coord[0] > upper[0] ||\n                    coord[0] < lower[0] ||\n                    coord[1] > upper[1] ||\n                    coord[1] < lower[1]\n                ) {\n                    options.onSkipRemaining();\n                    options.onOutOfBounds();\n                }\n\n                return coord;\n            }\n\n            const coordX = Math.max(lower[0], Math.min(upper[0], coord[0]));\n            const coordY = Math.max(lower[1], Math.min(upper[1], coord[1]));\n\n            return [coordX, coordY];\n        };\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly fixed: () => () => boolean; readonly snap: (snap: any) => (arg1: Coord) => unknown; readonly bound: (range: any, snap: any, paddingPx: number) => (arg1: Coord, arg2: Coord, arg3: any) => Coord; }'.\nconstraints.standard = null;\n\nexport default {\n    add: add,\n    modify: modify,\n    draw: draw,\n    remove: remove,\n\n    onMoveStart: {standard: null},\n    constraints: constraints,\n    onMove: {standard: null},\n    onMoveEnd: {standard: null},\n    onClick: {standard: null},\n};\n","/**\n * Creates and adds a point to the graph that can be dragged around.\n * It allows constraints on its movement and draws when moves happen.\n *\n * Options can be passed to the constructor to control how the point behaves:\n *   coord: [x, y]\n *     The initial position of the point\n *   pointSize:\n *     changes the size of the point. defaults to 4\n *   static: boolean\n *     draw the point, but don't let it be interactable\n *   cursor: \"move\", \"pointer\"\n *     css cursor for this point\n *   add: [function(state)]\n *     called immediately when this movablePoint is added\n *     default: apply any constraints and draw\n *   draw: [function(prevState, currentState)]\n *     drawing functions. default to [basic, highlight]\n *   remove: [function(state)]\n *     called when this movablePoint is removed\n *   onMoveStart: [function(coord)]\n *     called when this point is clicked on\n *   constraints: [function(coord)]\n *     called when this point is dragged\n *     return true or nothing to accept the move\n *     return false to cancel the move\n *     return an [x, y] coordinate to override the move\n *   onMove: [function(coord)]\n *     called after all constraints functions pass and the point\n *     is moved to a new location\n *   onMoveEnd: [function(coord)]\n *     called when the mouse is released from a click or move\n *   onClick: [function(coord)]\n *     called when someone mouses down, doesn't move the point,\n *     and mouses up.\n *   normalStyle:\n *     the raphael/graphie style of the point when not hovering\n *   highlightStyle:\n *     the raphael/graphie style of the point when hovering, if\n *     MovablePoint.draw.highlight is used\n *\n * This creates a MovablePoint object with the following methods:\n *   setCoord: [x, y]\n *     changes the point's coordinate\n *   draw:\n *     redraws the coord\n *   modify: {options}\n *     modifies the original options passed to the point\n *   remove:\n *     removes the point from graphie\n */\nimport {point as kpoint, vector as kvector} from \"@khanacademy/kmath\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport InlineIcon from \"../components/inline-icon\";\nimport {iconTrash} from \"../icon-paths\";\nimport KhanColors from \"../util/colors\";\nimport reactRender from \"../util/react-render\";\nimport Tex from \"../util/tex\";\n\nimport InteractiveUtil from \"./interactive-util\";\nimport MovablePointOptions from \"./movable-point-options\";\nimport objective_ from \"./objective_\";\nimport WrappedEllipse from \"./wrapped-ellipse\";\n\nconst assert = InteractiveUtil.assert;\nconst normalizeOptions = InteractiveUtil.normalizeOptions;\n\nconst {processMath} = Tex;\n\n// State parameters that should be converted into an array of\n// functions\nconst FUNCTION_ARRAY_OPTIONS = _.keys(MovablePointOptions);\n\n// Default \"props\" and \"state\". Both are added to this.state and\n// receive magic getter methods (this.coord() etc).\n// However, properties in DEFAULT_PROPS are updated on `modify()`,\n// while those in DEFAULT_STATE persist and are not updated.\n// Things that the user might want to change should be on \"props\",\n// while things used to render the point should be on \"state\".\nconst DEFAULT_PROPS = {\n    coord: [0, 0],\n    pointSize: 4,\n    static: false,\n    cursor: \"move\",\n    normalStyle: null, // turned into an object in this.modify\n    highlightStyle: null, // likewise\n    shadow: false,\n    tooltip: false,\n} as const;\nconst DEFAULT_STATE = {\n    added: false,\n    hasMoved: false,\n    visibleShape: null,\n    outOfBounds: false,\n    mouseTarget: null,\n    touchOffset: null,\n} as const;\n\nconst tooltipResetFunctions: Array<() => void> = [];\n\nconst MovablePoint = function (graphie: any, movable: any, options: any) {\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, {\n        graphie,\n        movable,\n        state: {\n            // Set here because this must be unique for each instance\n            id: _.uniqueId(\"movablePoint\"),\n        },\n    });\n\n    // We only set DEFAULT_STATE once, here\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.modify(_.extend({}, DEFAULT_STATE, options));\n};\n\n_.extend(MovablePoint, MovablePointOptions);\nInteractiveUtil.createGettersFor(\n    MovablePoint,\n    _.extend({}, DEFAULT_PROPS, DEFAULT_STATE),\n);\nInteractiveUtil.addMovableHelperMethodsTo(MovablePoint);\n\n_.extend(MovablePoint.prototype, {\n    cloneState: function () {\n        return _.extend(this.movable.cloneState(), this.state);\n    },\n\n    _createDefaultState: function () {\n        return _.extend(\n            {\n                id: this.state.id,\n            },\n            normalizeOptions(\n                FUNCTION_ARRAY_OPTIONS,\n                // Defaults are copied from MovablePointOptions.*.standard\n                // These defaults are set here instead of DEFAULT_PROPS/STATE\n                // because they:\n                //    - are objects, not primitives (and need a deeper copy)\n                //    - they don't need getters created for them\n                // TODO(jack): Consider \"default\" once we es3ify perseus\n                objective_.pluck(MovablePointOptions, \"standard\"),\n\n                // We only update props here, because we want things on state to\n                // be persistent, and updated appropriately in modify()\n            ),\n            DEFAULT_PROPS,\n        );\n    },\n\n    /**\n     * Resets the object to its state as if it were constructed with\n     * `options` originally. state not on DEFAULT_PROPS is maintained.\n     *\n     * Analogous to React.js's replaceProps\n     */\n    modify: function (options) {\n        this.update(_.extend(this._createDefaultState(), options));\n    },\n\n    /**\n     * Displays a tooltip above the point, replacing any previous contents. If\n     * there is no tooltip initialized, adds the tooltip.\n     *\n     * If the type of contents is string, the contents will be rendered with\n     * KaTeX. Otherwise, the content will be assumed to be a DOM node and will\n     * be appended inside the tooltip.\n     */\n    _showTooltip: function (contents) {\n        if (!this._tooltip) {\n            this._tooltip = document.createElement(\"div\");\n            this._tooltip.className = \"tooltip-content\";\n            this.state.visibleShape.wrapper.className = \"tooltip\";\n            this.state.visibleShape.wrapper.appendChild(this._tooltip);\n\n            // Only one tooltip should be displayed at a time, so store a list\n            // of all the tooltips initialized.\n            tooltipResetFunctions.push(() => {\n                if (this.state.added) {\n                    this._hideTooltip();\n                }\n            });\n        }\n\n        if (this._tooltip.firstChild) {\n            this._tooltip.removeChild(this._tooltip.firstChild);\n        }\n\n        this.state.visibleShape.wrapper.className = \"tooltip visible\";\n        this._tooltip.appendChild(document.createElement(\"span\"));\n\n        if (typeof contents === \"string\") {\n            processMath(this._tooltip.firstChild, contents, false);\n        } else if (typeof contents === \"function\") {\n            contents(this._tooltip.firstChild);\n        } else {\n            this._tooltip.firstChild.appendChild(contents);\n        }\n    },\n\n    _hideTooltip: function () {\n        if (this._tooltip) {\n            // Without the visible class, tooltips have display: none set\n            this.state.visibleShape.wrapper.className = \"tooltip\";\n        }\n    },\n\n    /**\n     * Adjusts constructor parameters without changing previous settings\n     * for any option not specified\n     *\n     * Analogous to React.js's setProps\n     */\n    update: function (options) {\n        const self = this;\n        const graphie = self.graphie;\n        const state = _.extend(\n            self.state,\n            normalizeOptions(FUNCTION_ARRAY_OPTIONS, options),\n        );\n\n        assert(kpoint.is(state.coord));\n\n        // Default things inside the state.normalStyle object, because\n        // _.extend is not deep.\n        // We use _.extend instead of _.defaults because we don't want\n        // to modify the passed-in copy (especially if it's from\n        // DEFAULT_PROPS/STATE!)\n        const normalColor = state.static\n            ? KhanColors.DYNAMIC\n            : KhanColors.INTERACTIVE;\n        state.normalStyle = _.extend(\n            {\n                fill: normalColor,\n                stroke: normalColor,\n                scale: 1,\n            },\n            state.normalStyle,\n        );\n\n        state.highlightStyle = _.extend(\n            {\n                fill: KhanColors.INTERACTING,\n                stroke: KhanColors.INTERACTING,\n                scale: 2,\n            },\n            state.highlightStyle,\n        );\n\n        if (!state.static) {\n            // the invisible shape in front of the point that gets mouse events\n            if (!state.mouseTarget) {\n                const center = self.state.coord;\n                const radii = graphie.unscaleVector(24);\n                const options = {\n                    mouselayer: true,\n                    padding: 0,\n                    interactiveKindForTesting: \"movable-point\",\n                } as const;\n                state.mouseTarget = new WrappedEllipse(\n                    graphie,\n                    center,\n                    radii,\n                    options,\n                );\n                state.mouseTarget.attr({fill: \"#000\", opacity: 0.0});\n            }\n        }\n\n        const showTrashTooltip = () => {\n            this._showTooltip((container) => {\n                reactRender(\n                    <span style={{fontSize: \"2em\"}}>\n                        <InlineIcon\n                            {...iconTrash}\n                            style={{\n                                position: \"static\",\n                                color: KhanColors.INTERACTIVE,\n                                marginLeft: 9,\n                                marginRight: 9,\n                            }}\n                        />\n                    </span>,\n                    container,\n                );\n            });\n        };\n\n        // The starting coord of any move, sent to onMoveEnd as the previous\n        // value\n        let startCoord = state.coord;\n\n        // The Movable representing this movablePoint's representation\n        // This handles mouse events for us, which we propagate in\n        // onMove\n        self.movable.modify(\n            _.extend({}, state, {\n                add: null,\n                modify: null,\n                draw: self.draw.bind(self),\n                remove: null,\n                onMoveStart: (startMouseCoord) => {\n                    state.hasMoved = false;\n                    startCoord = state.coord;\n\n                    // Save the offset between the cursor and the initial coordinate\n                    // of the point. This is tracked so as to avoid locking the\n                    // moving point to the user's finger on touch devices, which\n                    // would obscure it, no matter how large we made the touch\n                    // target. Instead, we respect the offset at which the point was\n                    // grabbed for the entirety of the gesture, if it's a\n                    // touch-based interaction.\n                    if (state.touchOffset == null) {\n                        const isMouse = !(\"ontouchstart\" in window);\n                        state.touchOffset = isMouse\n                            ? [0, 0]\n                            : kvector.subtract(startCoord, startMouseCoord);\n                    }\n\n                    const svgElem = state.visibleShape.wrapper;\n                    if (state.shadow) {\n                        const filter = \"none\";\n                        svgElem.style.filter = filter;\n                    }\n\n                    if (state.showHairlines) {\n                        state.showHairlines(state.coord);\n                    }\n\n                    tooltipResetFunctions.forEach((f) => f());\n                    if (state.tooltip) {\n                        if (state.xOnlyTooltip) {\n                            this._showTooltip(`${state.coord[0]}`);\n                        } else {\n                            this._showTooltip(\n                                `(${state.coord[0]}, ${state.coord[1]})`,\n                            );\n                        }\n\n                        if (state.shadow) {\n                            const content =\n                                svgElem.getElementsByClassName(\n                                    \"tooltip-content\",\n                                )[0];\n                            const filter =\n                                \"drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))\";\n\n                            content.style.filter = filter;\n                        }\n                    }\n\n                    self._fireEvent(state.onMoveStart, startCoord, startCoord);\n                    self.draw();\n                },\n                onMove: (mouseCoord, prevMouseCoord) => {\n                    const transformedCoord = kvector.add(\n                        mouseCoord,\n                        state.touchOffset,\n                    );\n\n                    self.moveTo(transformedCoord);\n\n                    if (state.showHairlines) {\n                        if (!this.state.outOfBounds) {\n                            state.showHairlines(state.coord);\n                        } else {\n                            state.hideHairlines();\n                        }\n                    }\n\n                    if (state.tooltip) {\n                        if (!this.state.outOfBounds) {\n                            if (state.xOnlyTooltip) {\n                                this._showTooltip(`${state.coord[0]}`);\n                            } else {\n                                this._showTooltip(\n                                    `(${state.coord[0]}, ${state.coord[1]})`,\n                                );\n                            }\n                        }\n                    }\n\n                    if (state.onRemove && this.state.outOfBounds) {\n                        showTrashTooltip();\n                    }\n                },\n                onMoveEnd: () => {\n                    if (self.isHovering() && !state.hasMoved) {\n                        self._fireEvent(state.onClick, state.coord, startCoord);\n                    }\n\n                    const svgElem = state.visibleShape.wrapper;\n\n                    if (state.shadow) {\n                        const filter =\n                            \"drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))\";\n                        svgElem.style.filter = filter;\n                    }\n\n                    if (state.hideHairlines) {\n                        state.hideHairlines();\n                    }\n\n                    if (state.hasMoved) {\n                        this._hideTooltip();\n                    } else if (state.onRemove) {\n                        // If we haven't moved and we should be displaying trash\n                        // tooltips.\n                        showTrashTooltip();\n\n                        const content =\n                            svgElem.getElementsByClassName(\n                                \"tooltip-content\",\n                            )[0];\n\n                        content.style.filter = \"none\";\n\n                        this._tooltip.firstChild.addEventListener(\n                            \"touchstart\",\n                            (e) => {\n                                // Prevent creation of a new point when the event is\n                                // propagated up the DOM.\n                                e.stopPropagation();\n                            },\n                            true,\n                        );\n\n                        this._tooltip.firstChild.addEventListener(\n                            \"touchend\",\n                            (e) => {\n                                // Remove the point and prevent creation of a\n                                // new point.\n                                state.onRemove();\n                                e.stopPropagation();\n                            },\n                            true,\n                        );\n                    } else if (state.tooltip) {\n                        this._hideTooltip();\n                    }\n\n                    if (state.outOfBounds) {\n                        state.onRemove();\n                    }\n\n                    self._fireEvent(state.onMoveEnd, state.coord, startCoord);\n                    state.hasMoved = false;\n                    state.touchOffset = null;\n                    self.draw();\n                },\n            }),\n        );\n\n        // Trigger an add event if this hasn't been added before\n        if (!state.added) {\n            self.prevState = {};\n            self._fireEvent(state.add, self.cloneState(), self.prevState);\n            state.added = true;\n\n            // Update the state for `added` and in case the add event\n            // changed it\n            self.prevState = self.cloneState();\n        }\n\n        // Trigger a modify event\n        self._fireEvent(state.modify, self.cloneState(), self.prevState);\n    },\n\n    remove: function () {\n        this.state.added = false;\n        this._fireEvent(this.state.remove);\n        if (this.movable) {\n            this.movable.remove();\n        }\n        // TODO(jack): This should really be moved off of\n        // movablePoint.state and only kept on movable.state\n        this.state.mouseTarget = null;\n    },\n\n    constrain: function () {\n        const result = this._applyConstraints(this.coord(), this.coord());\n        if (kpoint.is(result)) {\n            this.setCoord(result);\n        }\n        return result !== false;\n    },\n\n    setCoord: function (coord) {\n        assert(kpoint.is(coord, 2));\n        this.state.coord = _.clone(coord);\n        this.draw();\n    },\n\n    setCoordConstrained: function (coord) {\n        assert(kpoint.is(coord, 2));\n        const result = this._applyConstraints(coord, this.coord());\n        if (result !== false) {\n            this.state.coord = _.clone(result);\n            this.draw();\n        }\n    },\n\n    moveTo: function (coord) {\n        // The caller has the option of adding an onMove() method to the\n        // movablePoint object we return as a sort of event handler\n        // By returning false from onMove(), the move can be vetoed,\n        // providing custom constraints on where the point can be moved.\n        // By returning array [x, y], the move can be overridden\n\n        const state = this.state;\n\n        this.state.outOfBounds = false;\n        const result = this._applyConstraints(\n            coord,\n            state.coord,\n            state.onRemove\n                ? {\n                      onOutOfBounds: () => {\n                          this.state.outOfBounds = true;\n                      },\n                  }\n                : {},\n        );\n\n        if (result === false) {\n            return;\n        }\n        if (kpoint.is(result)) {\n            coord = result;\n        }\n        if (!kpoint.equal(coord, state.coord)) {\n            const prevCoord = state.coord;\n            state.coord = coord;\n            state.hasMoved = true;\n            this._fireEvent(state.onMove, state.coord, prevCoord);\n            this.draw();\n        }\n    },\n\n    // Clone these for use with raphael, which modifies the input\n    // style parameters\n    normalStyle: function () {\n        return _.clone(this.state.normalStyle);\n    },\n\n    highlightStyle: function () {\n        return _.clone(this.state.highlightStyle);\n    },\n\n    // Change z-order to back\n    toBack: function () {\n        this.movable.toBack();\n        if (this.state.visibleShape) {\n            this.state.visibleShape.toBack();\n        }\n    },\n\n    // Change z-order to front\n    toFront: function () {\n        if (this.state.visibleShape) {\n            this.state.visibleShape.toFront();\n        }\n        this.movable.toFront();\n    },\n\n    /**\n     * Forwarding methods to this.movable:\n     */\n    isHovering: function () {\n        return this.movable.isHovering();\n    },\n\n    isDragging: function () {\n        return this.movable.isDragging();\n    },\n\n    mouseTarget: function () {\n        return this.movable.mouseTarget();\n    },\n\n    grab: function (coord) {\n        // Provide an explicit touchOffset override, so that we track the user's\n        // finger when a point has been grabbed.\n        this.state.touchOffset = [0, 0];\n\n        this.movable.grab(coord);\n        this.moveTo(coord);\n    },\n});\n\nexport default MovablePoint;\n","/* eslint-disable @babel/no-invalid-this */\n/**\n * A library of options to pass to add/draw/remove/constraints\n */\n\nimport {point as kpoint, vector as kvector} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport type {Coord} from \"./types\";\n\nfunction sum(array: any) {\n    return _.reduce(\n        array,\n        function (memo, arg) {\n            return memo + arg;\n        },\n        0,\n    );\n}\n\nfunction clockwise(points: any) {\n    const segments = _.zip(points, points.slice(1).concat(points.slice(0, 1)));\n    const areas = _.map(segments, function (segment) {\n        const p1 = segment[0];\n        const p2 = segment[1];\n        return (p2[0] - p1[0]) * (p2[1] + p1[1]);\n    });\n    return sum(areas) > 0;\n}\n\nconst add = {\n    constrain: function () {\n        this.constrain();\n    },\n\n    pointsToFront: function (state: any) {\n        _.invoke(state.points, \"toFront\");\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly constrain: () => void; readonly pointsToFront: (state: any) => void; }'.\nadd.standard = [add.constrain, add.pointsToFront];\n\nconst modify = {\n    draw: function () {\n        this.draw();\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly draw: () => void; }'.\nmodify.standard = [modify.draw];\n\nconst draw = {\n    basic: function (state: any, prevState: any) {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        const graphie = this.graphie;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'path' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        const path = this.path(state);\n\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        if (!this.state.visibleShape) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape = graphie.raphael.path(path);\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape.attr(this.normalStyle());\n        }\n        if (\n            state.normalStyle !== prevState.normalStyle &&\n            !_.isEqual(state.normalStyle, prevState.normalStyle)\n        ) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.state.visibleShape.attr(this.normalStyle());\n        }\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        this.state.visibleShape.attr({path: path});\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        if (this.mouseTarget()) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'mouseTarget' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            this.mouseTarget().attr({path: path});\n        }\n    },\n\n    /* Labels are handled primarily by label objects, but sometimes require\n     * extra movables, e.g., for the arcs drawn at labeled angles. These extra\n     * movables are stored in the label cache. */\n    labels: function (state: any, prevState: any) {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        const graphie = this.graphie;\n        const self = this;\n\n        const coords = _.invoke(state.points, \"coord\");\n        const isClockwise = clockwise(coords);\n        const n = coords.length;\n\n        // graphie.labelAngle and similar methods attempt to re-use the label\n        // provided, which will have been stored on state._labeledAngles.\n        // If they cannot re-use the label, they make a new one, which will\n        // get stored on state._labelCache. These will all be cleared out when\n        // we remove the polygon.\n        // (This logic is borrowed from graphie:addMovablePolygon.)\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        if (self.state._labelCache != null) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            _.invoke(self.state._labelCache, \"remove\");\n        }\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        self.state._labelCache = [];\n\n        // Update angle labels\n        if (state.angleLabels.length || state.showRightAngleMarkers.length) {\n            // Generate labels\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            if (self.state._labeledAngles == null) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                self.state._labeledAngles = _.times(\n                    Math.max(\n                        state.angleLabels.length,\n                        state.showRightAngleMarkers.length,\n                    ),\n                    function () {\n                        return graphie.label(\n                            [0, 0],\n                            \"\",\n                            \"center\",\n                            state.labelStyle,\n                        );\n                    },\n                );\n            }\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            _.each(self.state._labeledAngles, function (label, i) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                self.state._labelCache.push(\n                    graphie.labelAngle({\n                        point1: coords[(i - 1 + n) % n],\n                        vertex: coords[i],\n                        point3: coords[(i + 1) % n],\n                        label: label,\n                        text: state.angleLabels[i],\n                        showRightAngleMarker: state.showRightAngleMarkers[i],\n                        numArcs: state.numArcs[i],\n                        clockwise: isClockwise,\n                        style: state.labelStyle,\n                    }),\n                );\n            });\n        }\n\n        // Update side labels\n        if (state.sideLabels.length) {\n            // Generate labels\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            if (self.state._labeledSides == null) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                self.state._labeledSides = _.map(\n                    state.sideLabels,\n                    function (label) {\n                        return graphie.label(\n                            [0, 0],\n                            \"\",\n                            \"center\",\n                            state.labelStyle,\n                        );\n                    },\n                );\n            }\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            _.each(self.state._labeledSides, function (label, i) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                self.state._labelCache.push(\n                    graphie.labelSide({\n                        point1: coords[i],\n                        point2: coords[(i + 1) % n],\n                        label: label,\n                        text: state.sideLabels[i],\n                        numArrows: state.numArrows[i],\n                        numTicks: state.numTicks[i],\n                        clockwise: isClockwise,\n                        style: state.labelStyle,\n                    }),\n                );\n            });\n        }\n\n        // Update vertex labels\n        if (state.vertexLabels.length) {\n            // Generate labels\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            if (self.state._labeledVertices == null) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                self.state._labeledVertices = _.map(\n                    state.vertexLabels,\n                    function (label) {\n                        return graphie.label(\n                            [0, 0],\n                            \"\",\n                            \"center\",\n                            state.labelStyle,\n                        );\n                    },\n                );\n            }\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            _.each(self.state._labeledVertices, function (label, i) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n                self.state._labelCache.push(\n                    graphie.labelVertex({\n                        point1: coords[(i - 1 + n) % n],\n                        vertex: coords[i],\n                        point3: coords[(i + 1) % n],\n                        label: label,\n                        text: state.vertexLabels[i],\n                        clockwise: isClockwise,\n                        style: state.labelStyle,\n                    }),\n                );\n            });\n        }\n\n        // graphie.labelVertex and its peer methods return an array of movables\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'. | TS2339 - Property 'state' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n        self.state._labelCache = _.flatten(self.state._labelCache);\n    },\n\n    highlight: function (state: any, prevState: any) {\n        if (state.isHovering && !prevState.isHovering) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'highlightStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            state.visibleShape.animate(this.highlightStyle(), 50);\n        } else if (!state.isHovering && prevState.isHovering) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'normalStyle' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\n            state.visibleShape.animate(this.normalStyle(), 50);\n        }\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly basic: (state: any, prevState: any) => void; readonly labels: (state: any, prevState: any) => void; readonly highlight: (state: any, prevState: any) => void; }'.\ndraw.standard = [draw.basic, draw.labels, draw.highlight];\n\nconst remove = {\n    basic: function () {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly labels: () => void; }'.\n        if (this.state.visibleShape) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly labels: () => void; }'.\n            this.state.visibleShape.remove();\n        }\n    },\n    labels: function () {\n        const labels = [\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly labels: () => void; }'.\n            this.state._labeledSides,\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly labels: () => void; }'.\n            this.state._labeledVertices,\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly labels: () => void; }'.\n            this.state._labeledAngles,\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly basic: () => void; readonly labels: () => void; }'.\n            this.state._labelCache,\n        ];\n\n        _.each(labels, function (labelType) {\n            if (labelType != null && labelType.length) {\n                _.invoke(labelType, \"remove\");\n            }\n        });\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly basic: () => void; readonly labels: () => void; }'.\nremove.standard = [remove.basic, remove.labels];\n\nconst constraints = {\n    fixed: function (): () => boolean {\n        return function () {\n            return false;\n        };\n    },\n\n    snap: function (snap: any): (arg1: Coord) => unknown {\n        return function (coord: Coord): unknown {\n            if (snap === null) {\n                // NOTE(kevin): this should probably return the original point\n                return true;\n            }\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            snap = snap || this.graphie.snap;\n            return kpoint.roundTo(coord, snap);\n        };\n    },\n\n    bound: function (\n        range: any,\n        snap: any,\n        paddingPx: number,\n    ): (arg1: Coord, arg2: Coord) => Coord {\n        if (paddingPx === undefined) {\n            if (range === undefined) {\n                paddingPx = 10;\n            } else {\n                paddingPx = 0;\n            }\n        }\n        return function (coord: Coord, prevCoord: Coord): Coord {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            const graphie = this.graphie;\n            const delta = kvector.subtract(coord, prevCoord);\n            range = range || graphie.range;\n            // A null snap means no snap; an undefined snap means\n            // default to graphie's\n            if (snap === undefined) {\n                snap = graphie.snap;\n            }\n\n            // Calculate the bounds for both points\n            let absoluteLower = graphie.unscalePoint([\n                paddingPx,\n                graphie.ypixels - paddingPx,\n            ]);\n            let absoluteUpper = graphie.unscalePoint([\n                graphie.xpixels - paddingPx,\n                paddingPx,\n            ]);\n            if (snap) {\n                absoluteLower = kpoint.ceilTo(absoluteLower, snap);\n                absoluteUpper = kpoint.floorTo(absoluteUpper, snap);\n            }\n\n            // Calculate the bounds for the delta.\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            const deltaBounds = _.map(this.coords(), function (coord, i) {\n                const max = kvector.subtract(absoluteUpper, coord);\n                const min = kvector.subtract(absoluteLower, coord);\n                return [min, max];\n            });\n\n            // bound the delta by the calculated bounds\n            const boundedDelta = _.reduce(\n                deltaBounds,\n                function (delta, bound) {\n                    const lower = bound[0];\n                    const upper = bound[1];\n                    const deltaX = Math.max(\n                        lower[0],\n                        Math.min(upper[0], delta[0]),\n                    );\n                    const deltaY = Math.max(\n                        lower[1],\n                        Math.min(upper[1], delta[1]),\n                    );\n                    return [deltaX, deltaY];\n                },\n                delta,\n            );\n\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'number[]' is not assignable to type 'Coord'.\n            return kvector.add(prevCoord, boundedDelta);\n        };\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly fixed: () => () => boolean; readonly snap: (snap: any) => (arg1: Coord) => unknown; readonly bound: (range: any, snap: any, paddingPx: number) => (arg1: Coord, arg2: Coord) => Coord; }'.\nconstraints.standard = null;\n\nconst onMove = {\n    // @ts-expect-error [FEI-5003] - TS2355 - A function whose declared type is neither 'void' nor 'any' must return a value.\n    updatePoints: function (coord: Coord, prevCoord: Coord): undefined {\n        const actualDelta = kvector.subtract(coord, prevCoord);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly updatePoints: (coord: Coord, prevCoord: Coord) => undefined; }'.\n        _.each(this.state.points, function (point) {\n            point.setCoord(kvector.add(point.coord(), actualDelta));\n        });\n    },\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'standard' does not exist on type '{ readonly updatePoints: (coord: Coord, prevCoord: Coord) => undefined; }'.\nonMove.standard = null;\n\nexport default {\n    add: add,\n    modify: modify,\n    draw: draw,\n    remove: remove,\n\n    onMoveStart: {standard: null},\n    constraints: constraints,\n    onMove: onMove,\n    onMoveEnd: {standard: null},\n    onClick: {standard: null},\n};\n","/**\n * Creates and adds a polygon to the graph that can be dragged around.\n * It allows constraints on its movement and draws when moves happen.\n */\nimport {vector as kvector} from \"@khanacademy/kmath\";\nimport _ from \"underscore\";\n\nimport KhanColors from \"../util/colors\";\nimport GraphUtils from \"../util/graph-utils\";\n\nimport InteractiveUtil from \"./interactive-util\";\nimport MovablePolygonOptions from \"./movable-polygon-options\";\nimport objective_ from \"./objective_\";\n\nconst assert = InteractiveUtil.assert;\nconst normalizeOptions = InteractiveUtil.normalizeOptions;\n\n// State parameters that should be converted into an array of\n// functions\nconst FUNCTION_ARRAY_OPTIONS = _.keys(MovablePolygonOptions);\n\n// Default \"props\" and \"state\". Both are added to this.state and\n// receive magic getter methods (this.points() etc).\n// However, properties in DEFAULT_PROPS are updated on `modify()`,\n// while those in DEFAULT_STATE persist and are not updated.\n// Things that the user might want to change should be on \"props\",\n// while things used to render the point should be on \"state\".\nconst DEFAULT_PROPS = {\n    points: null,\n    angleLabels: [],\n    showRightAngleMarkers: [],\n    sideLabels: [],\n    vertexLabels: [],\n    numArcs: [],\n    numArrows: [],\n    numTicks: [],\n    closed: true,\n    static: false,\n    cursor: \"move\",\n    normalStyle: null, // turned into an object in this.modify\n    highlightStyle: null, // likewise\n    labelStyle: null, // likewise\n} as const;\nconst DEFAULT_STATE = {\n    added: false,\n    hasMoved: false,\n    visibleShape: null,\n    mouseTarget: null,\n} as const;\n\nconst MovablePolygon = function (\n    graphie: any,\n    movable: any,\n    options: any,\n): void {\n    assert(graphie != null);\n    assert(options != null);\n\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    _.extend(this, {\n        graphie: graphie,\n        movable: movable,\n        state: {\n            // Set here because this must be unique for each instance\n            id: _.uniqueId(\"movablePolygon\"),\n        },\n    });\n\n    // We only set DEFAULT_STATE once, here\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.modify(_.extend({}, DEFAULT_STATE, options));\n};\n\n_.extend(MovablePolygon, MovablePolygonOptions);\nInteractiveUtil.createGettersFor(\n    MovablePolygon,\n    _.extend({}, DEFAULT_PROPS, DEFAULT_STATE),\n);\nInteractiveUtil.addMovableHelperMethodsTo(MovablePolygon);\n\n_.extend(MovablePolygon.prototype, {\n    cloneState: function () {\n        return _.extend(this.movable.cloneState(), this.state);\n    },\n\n    _createDefaultState: function () {\n        return _.extend(\n            {\n                id: this.state.id,\n            },\n            normalizeOptions(\n                FUNCTION_ARRAY_OPTIONS,\n                // Defaults are copied from MovablePolygonOptions.*.standard\n                // These defaults are set here instead of DEFAULT_PROPS/STATE\n                // because they:\n                //    - are objects, not primitives (and need a deeper copy)\n                //    - they don't need getters created for them\n                // TODO(jack): Consider \"default\" once we es3ify perseus\n                objective_.pluck(MovablePolygonOptions, \"standard\"),\n\n                // We only update props here, because we want things on state to\n                // be persistent, and updated appropriately in modify()\n            ),\n            DEFAULT_PROPS,\n        );\n    },\n\n    /**\n     * Resets the object to its state as if it were constructed with\n     * `options` originally. state not on DEFAULT_PROPS is maintained.\n     *\n     * Analogous to React.js's replaceProps\n     */\n    modify: function (options) {\n        this.update(_.extend(this._createDefaultState(), options));\n    },\n\n    /**\n     * Adjusts constructor parameters without changing previous settings\n     * for any option not specified\n     *\n     * Analogous to React.js's setProps\n     */\n    update: function (options) {\n        const self = this;\n        const graphie = self.graphie;\n        const state = _.extend(\n            self.state,\n            normalizeOptions(FUNCTION_ARRAY_OPTIONS, options),\n        );\n\n        // Default things inside the state.normalStyle object, because\n        // _.extend is not deep.\n        // We use _.extend instead of _.defaults because we don't want\n        // to modify the passed-in copy (especially if it's from\n        // DEFAULT_PROPS/STATE!)\n        const normalColor = state.static\n            ? KhanColors.DYNAMIC\n            : KhanColors.INTERACTIVE;\n        state.normalStyle = _.extend(\n            {},\n            state.normalStyle,\n            {\n                \"stroke-width\": 2,\n                \"fill-opacity\": 0,\n                fill: normalColor,\n                stroke: normalColor,\n            },\n            options.normalStyle,\n        );\n\n        state.highlightStyle = _.extend(\n            {},\n            {\n                stroke: KhanColors.INTERACTING,\n                \"stroke-width\": 2,\n                fill: KhanColors.INTERACTING,\n                \"fill-opacity\": 0.05,\n            },\n            state.highlightStyle,\n        );\n\n        state.labelStyle = _.extend(\n            {},\n            {\n                stroke: KhanColors.DYNAMIC,\n                \"stroke-width\": 1,\n                color: KhanColors.DYNAMIC,\n            },\n            state.labelStyle,\n        );\n\n        if (!state.static) {\n            // the invisible shape in front of the point that gets mouse events\n            if (!state.mouseTarget) {\n                state.mouseTarget = graphie.mouselayer.path(this.path());\n                state.mouseTarget.attr({\n                    fill: \"#000\",\n                    opacity: 0,\n                    cursor: \"move\",\n                });\n            }\n        }\n\n        // The Movable representing this MovablePolygon's representation\n        // This handles mouse events for us, which we propagate in\n        // onMove. The onMoveStart-onMove-onMoveEnd logic is borrowed from\n        // movable-line.js.\n        self.movable.modify(\n            _.extend({}, state, {\n                modify: null,\n                draw: self.draw.bind(self),\n                remove: null,\n                onMoveStart: function () {\n                    self._initialRefCoord = self.coord(0);\n                    self._prevRefCoord = self._initialRefCoord;\n                    self._totalDelta = [0, 0];\n\n                    self._fireEvent(\n                        self.state.onMoveStart,\n                        self.coord(0),\n                        self.coord(0),\n                    );\n                },\n                onMove: function (mouseCoord, prevMouseCoord) {\n                    const delta = kvector.subtract(mouseCoord, prevMouseCoord);\n                    self._totalDelta = kvector.add(self._totalDelta, delta);\n                    let refCoord = kvector.add(\n                        self._initialRefCoord,\n                        self._totalDelta,\n                    );\n\n                    refCoord = self._applyConstraints(\n                        refCoord,\n                        self._prevRefCoord,\n                    );\n                    if (refCoord === false) {\n                        return;\n                    }\n\n                    self._fireEvent(\n                        self.state.onMove,\n                        refCoord,\n                        self._prevRefCoord,\n                    );\n                    self._prevRefCoord = refCoord;\n                },\n                onMoveEnd: function () {\n                    self._fireEvent(\n                        self.state.onMoveEnd,\n                        self._prevRefCoord,\n                        self._initialRefCoord,\n                    );\n                },\n            }),\n        );\n\n        // Update the polygon with the points' movement\n        _.invoke(\n            state.points,\n            \"listen\",\n            \"onMove\",\n            state.id,\n            self.draw.bind(self),\n        );\n\n        // Trigger an add event if this hasn't been added before\n        if (!state.added) {\n            self.prevState = {};\n            self._fireEvent(state.add, self.cloneState(), self.prevState);\n            state.added = true;\n\n            // Update the state for `added` and in case the add event\n            // changed it\n            self.prevState = self.cloneState();\n        }\n\n        // Trigger a modify event\n        self._fireEvent(state.modify, self.cloneState(), self.prevState);\n    },\n\n    path: function (state) {\n        const graphie = this.graphie;\n        state = state || this.state;\n\n        let coords = _.map(state.points, function (point) {\n            return graphie.scalePoint(point.coord());\n        });\n\n        // Create path\n        if (state.closed) {\n            coords.push(true);\n        } else {\n            // For open polygons, concatenate a reverse of the path,\n            // to remove the inside area of the path, which would\n            // otherwise be clickable (even if the closing line segment\n            // wasn't drawn\n            coords = coords.concat(_.clone(coords).reverse());\n        }\n\n        return GraphUtils.unscaledSvgPath(coords);\n    },\n\n    coords: function () {\n        return _.invoke(this.state.points, \"coord\");\n    },\n\n    point: function (index) {\n        return this.state.points[index];\n    },\n\n    coord: function (index) {\n        return this.point(index).coord();\n    },\n\n    remove: function () {\n        this.state.added = false;\n        this._fireEvent(this.state.remove);\n        if (this.state.points) {\n            _.invoke(this.state.points, \"unlisten\", \"onMove\", this.state.id);\n        }\n\n        if (this.movable) {\n            // We need this to be guarded because it is called on the initial\n            // constructor/modify call, before this.movable is created\n            this.movable.remove();\n        }\n\n        // TODO(jack): This should really be moved off of\n        // movablePolygon.state and only kept on movable.state\n        this.state.mouseTarget = null;\n    },\n\n    constrain: function () {\n        if (this.points == null || this.points.length === 0) {\n            return;\n        }\n\n        const prevRefCoord = this.coord(0);\n        const refCoord = this._applyConstraints(prevRefCoord, prevRefCoord);\n        if (refCoord !== false) {\n            this._fireEvent(this.state.onMove, refCoord, prevRefCoord);\n        }\n    },\n\n    // Clone these for use with raphael, which modifies the input\n    // style parameters\n    normalStyle: function () {\n        return _.clone(this.state.normalStyle);\n    },\n\n    highlightStyle: function () {\n        return _.clone(this.state.highlightStyle);\n    },\n\n    // Change z-order to back\n    toBack: function () {\n        this.movable.toBack();\n        if (this.state.visibleShape) {\n            this.state.visibleShape.toBack();\n        }\n    },\n\n    // Change z-order to front\n    toFront: function () {\n        if (this.state.visibleShape) {\n            this.state.visibleShape.toFront();\n        }\n        this.movable.toFront();\n    },\n\n    /**\n     * Forwarding methods to this.movable:\n     */\n    isHovering: function () {\n        return this.movable.isHovering();\n    },\n\n    isDragging: function () {\n        return this.movable.isDragging();\n    },\n\n    mouseTarget: function () {\n        return this.movable.mouseTarget();\n    },\n});\n\nexport default MovablePolygon;\n","import Movable from \"./interactive2/movable\";\nimport MovableLine from \"./interactive2/movable-line\";\nimport MovablePoint from \"./interactive2/movable-point\";\nimport MovablePolygon from \"./interactive2/movable-polygon\";\nimport KhanColors from \"./util/colors\";\n\nconst Interactive2 = {\n    MovablePoint: MovablePoint,\n    addMovablePoint: function (graphie: any, options: any): any {\n        // @ts-expect-error [FEI-5003] - TS2350 - Only a void function can be called with the 'new' keyword.\n        const movable = new Movable(graphie, {});\n        return new MovablePoint(graphie, movable, options);\n    },\n    MovableLine: MovableLine,\n    addMovableLine: function (graphie: any, options: any): any {\n        // @ts-expect-error [FEI-5003] - TS2350 - Only a void function can be called with the 'new' keyword.\n        const movable = new Movable(graphie, {});\n        return new MovableLine(graphie, movable, options);\n    },\n    MovablePolygon: MovablePolygon,\n    addMovablePolygon: function (graphie: any, options: any): any {\n        // @ts-expect-error [FEI-5003] - TS2350 - Only a void function can be called with the 'new' keyword.\n        const movable = new Movable(graphie, {});\n        return new MovablePolygon(graphie, movable, options);\n    },\n\n    addMaybeMobileMovablePoint: function (widget: any, extraProps: any): any {\n        const isMobile = widget.props.apiOptions.isMobile;\n\n        const commonStyle = isMobile\n            ? {\n                  stroke: \"#ffffff\",\n                  \"stroke-width\": 3,\n                  fill: KhanColors.INTERACTIVE,\n              }\n            : {\n                  stroke: KhanColors.INTERACTIVE,\n                  fill: KhanColors.INTERACTIVE,\n              };\n\n        const normalStyle = Object.assign(commonStyle, extraProps.normalStyle);\n\n        const highlightStyle = Object.assign(\n            isMobile\n                ? {\n                      ...commonStyle,\n                      \"stroke-width\": 0,\n                      scale: 0.75,\n                  }\n                : {},\n            extraProps.highlightStyle,\n        );\n\n        const props = Object.assign(\n            {\n                normalStyle: normalStyle,\n                highlightStyle: highlightStyle,\n                shadow: isMobile,\n                tooltip: isMobile && widget.props.showTooltips,\n                showHairlines: widget.showHairlines,\n                hideHairlines: widget.hideHairlines,\n            },\n            isMobile ? {pointSize: 7} : {},\n        );\n\n        return Interactive2.addMovablePoint(\n            widget.graphie,\n            Object.assign(extraProps, props),\n        );\n    },\n} as const;\n\nexport default Interactive2;\n","import _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\nimport Interactive2 from \"../interactive2\";\nimport KhanColors from \"../util/colors\";\n\nimport GraphieClasses from \"./graphie-classes\";\n\nconst MovablePoint: any = GraphieClasses.createClass({\n    displayName: \"MovablePoint\",\n\n    movableProps: [\"children\"],\n\n    _getProps: function () {\n        if (this.props.isMobile) {\n            const isMobile = this.props.isMobile;\n\n            // TODO(kevinb) precompute commonStyle and commonMobileStyle\n            const commonStyle = isMobile\n                ? {\n                      stroke: \"#ffffff\",\n                      \"stroke-width\": 3,\n                      fill: KhanColors.INTERACTIVE,\n                  }\n                : {\n                      stroke: KhanColors.INTERACTIVE,\n                      fill: KhanColors.INTERACTIVE,\n                  };\n\n            // TODO(kevinb) precompute normalStyle and normalMobileStyle\n            const normalStyle = isMobile\n                ? Object.assign(\n                      commonStyle,\n                      this.props.mobileStyleOverride || {},\n                  )\n                : Object.assign(commonStyle, this.props.normalStyle);\n\n            // TODO(kevinb) precompute highlightStyle and highlightMobileStyle\n            const highlightStyle = isMobile\n                ? {\n                      ...commonStyle,\n                      \"stroke-width\": 0,\n                      scale: 0.75,\n                  }\n                : this.props.highlightStyle;\n            /* eslint-enable indent */\n\n            const addedProps = Object.assign(\n                {\n                    normalStyle: normalStyle,\n                    highlightStyle: highlightStyle,\n                    shadow: isMobile,\n                    tooltip: isMobile && this.props.showTooltips,\n                },\n                isMobile ? {pointSize: 7} : {},\n            );\n\n            return Object.assign(this.props, addedProps);\n        }\n        return this.props;\n    },\n\n    add: function (graphie) {\n        this.point = Interactive2.addMovablePoint(graphie, this._getProps());\n    },\n\n    modify: function () {\n        this.point.modify(this._getProps());\n    },\n\n    remove: function () {\n        this.point.remove();\n    },\n\n    toFront: function () {\n        this.point.toFront();\n    },\n\n    grab: function (coord) {\n        this.point.grab(coord);\n    },\n});\n\n// Include helper methods, such as MovablePoint.constrain.snap()\n_.extend(MovablePoint, Interactive2.MovablePoint);\n\nconst MovableLine: any = GraphieClasses.createClass({\n    displayName: \"MovableLine\",\n\n    movableProps: [\"children\"],\n\n    add: function (graphie) {\n        // Add MovablePoint children\n        const points = _.pluck(this.props.children, \"point\");\n        const props = _.extend({}, this.props, {\n            points: points,\n        });\n        this.line = Interactive2.addMovableLine(graphie, props);\n    },\n\n    modify: function () {\n        // Add MovablePoint children\n        const points = _.pluck(this.props.children, \"point\");\n        const props = _.extend({}, this.props, {\n            points: points,\n        });\n        this.line.modify(props);\n    },\n\n    remove: function () {\n        this.line.remove();\n    },\n\n    toFront: function () {\n        this.line.toFront();\n    },\n});\n\n// Include helper methods, such as MovableLine.constrain.snap()\n_.extend(MovableLine, Interactive2.MovableLine);\n\nconst Label: any = GraphieClasses.createSimpleClass((graphie, props) => {\n    let coord = props.coord;\n    if (props.unscaled) {\n        coord = graphie.unscalePoint(coord);\n    }\n    let elem = null;\n    // If the label is rendered for a locale other than \"en\", push the label\n    // element to an array. This array is used to lookup the label element\n    // and processed with jipt('just in place translation', crowdin specific\n    // program) to replace the passed in crowdin string with the translated\n    // string. For \"en\" locale, the jipt processing is skipped.\n    if (getDependencies().JIPT.useJIPT) {\n        elem = graphie.label(\n            coord,\n            props.text,\n            props.direction,\n            false,\n            props.style,\n        );\n\n        getDependencies().graphieMovablesJiptLabels.addLabel(elem, props.tex);\n    } else {\n        elem = graphie.label(\n            coord,\n            props.text,\n            props.direction,\n            props.tex,\n            props.style,\n        );\n    }\n    return elem;\n});\n\nconst Line: any = GraphieClasses.createClass({\n    displayName: \"Line\",\n\n    movableProps: [\"children\"],\n\n    add: function (graphie) {\n        const props = this.props;\n        this.graphie = graphie;\n        this.line = this.graphie.line(props.start, props.end, props.style);\n    },\n\n    modify: function () {\n        const props = this.props;\n        const path = this.graphie.svgPath([props.start, props.end]);\n        this.line.attr(_.extend({}, props.style, {path: path}));\n    },\n\n    remove: function () {\n        this.line.remove();\n    },\n\n    toFront: function () {\n        this.line.toFront();\n    },\n});\n\nconst Parabola: any = GraphieClasses.createClass({\n    displayName: \"Parabola\",\n\n    movableProps: [\"children\"],\n\n    add: function (graphie) {\n        const props = this.props;\n        this.graphie = graphie;\n        this.parabola = this.graphie.parabola(\n            props.a,\n            props.b,\n            props.c,\n            props.style,\n        );\n    },\n\n    modify: function () {\n        const props = this.props;\n        const path = this.graphie.svgParabolaPath(props.a, props.b, props.c);\n        this.parabola.attr(_.extend({}, props.style, {path: path}));\n    },\n\n    remove: function () {\n        this.parabola.remove();\n    },\n\n    toFront: function () {\n        this.parabola.toFront();\n    },\n});\n\nconst Sinusoid: any = GraphieClasses.createClass({\n    displayName: \"Sinusoid\",\n\n    movableProps: [\"children\"],\n\n    add: function (graphie) {\n        const props = this.props;\n        this.graphie = graphie;\n        this.sinusoid = this.graphie.sinusoid(\n            props.a,\n            props.b,\n            props.c,\n            props.d,\n            props.style,\n        );\n    },\n\n    modify: function () {\n        const props = this.props;\n        const path = this.graphie.svgSinusoidPath(\n            props.a,\n            props.b,\n            props.c,\n            props.d,\n        );\n        this.sinusoid.attr(_.extend({}, props.style, {path: path}));\n    },\n\n    remove: function () {\n        this.sinusoid.remove();\n    },\n\n    toFront: function () {\n        this.sinusoid.toFront();\n    },\n});\n\nconst Plot: any = GraphieClasses.createSimpleClass((graphie, props) => {\n    return graphie.plot(props.fn, props.range, props.style);\n});\n\nconst PlotParametric: any = GraphieClasses.createSimpleClass(\n    (graphie, props) => {\n        return graphie.plotParametric(props.fn, props.range, props.style);\n    },\n);\n\nconst Point: any = GraphieClasses.createSimpleClass((graphie, props) => {\n    return graphie.ellipse(props.coord, graphie.unscaleVector([4, 4]), {\n        fill: props.color || KhanColors.BLACK,\n        stroke: props.color || KhanColors.BLACK,\n    });\n});\n\nconst Path: any = GraphieClasses.createClass({\n    displayName: \"Path\",\n\n    movableProps: [\"children\"],\n\n    add: function (graphie) {\n        const props = this.props;\n        this.graphie = graphie;\n        this.path = this.graphie.path(props.coords, props.style);\n    },\n\n    modify: function () {\n        const props = this.props;\n        const path = this.graphie.svgPath(props.coords);\n        this.path.attr({path: path});\n    },\n\n    remove: function () {\n        this.path.remove();\n    },\n\n    toFront: function () {\n        this.path.toFront();\n    },\n});\n\nconst Arc: any = GraphieClasses.createSimpleClass((graphie, props) => {\n    let center = props.center;\n    let radius = props.radius;\n    if (props.unscaled) {\n        center = graphie.unscalePoint(center);\n        radius = graphie.unscaleVector(radius);\n    }\n\n    return graphie.arc(\n        center,\n        radius,\n        props.startAngle,\n        props.endAngle,\n        props.sector,\n        props.style,\n    );\n});\n\nconst Circle: any = GraphieClasses.createSimpleClass((graphie, props) => {\n    return graphie.circle(props.center, props.radius, props.style);\n});\n\nconst Rect: any = GraphieClasses.createSimpleClass((graphie, props) => {\n    return graphie.rect(\n        props.x,\n        props.y,\n        props.width,\n        props.height,\n        props.style,\n    );\n});\n\nexport default {\n    Arc: Arc,\n    Circle: Circle,\n    Label: Label,\n    Line: Line,\n    MovableLine: MovableLine,\n    MovablePoint: MovablePoint,\n    Parabola: Parabola,\n    Path: Path,\n    Plot: Plot,\n    PlotParametric: PlotParametric,\n    Point: Point,\n    Sinusoid: Sinusoid,\n    Rect: Rect,\n};\n","import $ from \"jquery\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport InteractiveUtil from \"../interactive2/interactive-util\";\nimport {Errors, Log} from \"../logging/log\";\nimport Util from \"../util\";\nimport GraphUtils from \"../util/graph-utils\";\n\nimport GraphieClasses from \"./graphie-classes\";\nimport Movables from \"./graphie-movables\";\n\nimport type {Coord} from \"../interactive2/types\";\nimport type {Range, Size} from \"../perseus-types\";\n\nconst GraphieMovable = GraphieClasses.GraphieMovable;\n\nconst createGraphie = GraphUtils.createGraphie;\nconst {deepEq, nestedMap} = Util;\nconst {assert} = InteractiveUtil;\n\ntype Props = {\n    addMouseLayer?: boolean;\n    box: Size;\n    range: [Coord, Coord];\n    ranges?: [Range, Range];\n    gridStep?: [number, number];\n    step?: [number, number];\n    scale?: [number, number];\n\n    isMobile?: boolean;\n    responsive?: boolean;\n\n    children?: React.ReactNode;\n\n    // TODO(LC-772) - type this prop!\n    options: any;\n\n    setDrawingAreaAvailable?: (boolean) => void;\n    setup: (\n        graphie: any,\n        options: {\n            range: [Coord, Coord];\n            scale: [number, number];\n        },\n    ) => void;\n\n    onClick?: (at: Coord) => void;\n    onMouseDown?: (at: Coord) => void;\n    onMouseMove?: (at: Coord) => void;\n    onMouseUp?: (at: Coord) => void;\n};\n\ntype DefaultProps = {\n    range: Props[\"range\"];\n    options: Props[\"options\"];\n    responsive: Props[\"responsive\"];\n    addMouseLayer: Props[\"addMouseLayer\"];\n};\n\nclass Graphie extends React.Component<Props> {\n    graphieDivRef = React.createRef<HTMLDivElement>();\n\n    static defaultProps: DefaultProps = {\n        range: [\n            [-10, 10],\n            [-10, 10],\n        ],\n        options: {},\n        responsive: false,\n        addMouseLayer: true,\n    };\n\n    componentDidMount() {\n        this._setupGraphie();\n        this._updateMovables();\n    }\n\n    shouldComponentUpdate(nextProps: Props): boolean {\n        // NOTE(jeresig): Prior to the React 16 upgrade this was using deepEq\n        // However it started to throw errors. I switched to use Underscore's\n        // isEqual method instead, hopefully having a similar effect.\n        return !_.isEqual(this.props, nextProps);\n    }\n\n    componentDidUpdate(prevProps: Props) {\n        // If someone changes the setup function passed in, we should\n        // technically setup graphie again. But that's definitely an\n        // anti-pattern, since it is most-likely caused by passing in an\n        // anonymous function rather than a \"real\" change, and re-rendering\n        // in that case would cause us to constantly re-setup graphie, which\n        // would have horrible performance implications. In order to avoid\n        // those, we just warn here.\n        if (this.props.setup !== prevProps.setup) {\n            Log.error(\n                \"<Graphie> was given a new setup function. \" +\n                    \"This is a bad idea; please refactor your code to give \" +\n                    \"the same setup function reference to <Graphie> on \" +\n                    \"every render.\",\n                Errors.Internal,\n            );\n        }\n        if (\n            !deepEq(this.props.options, prevProps.options) ||\n            !deepEq(this.props.box, prevProps.box) ||\n            !deepEq(this.props.range, prevProps.range)\n        ) {\n            this._setupGraphie();\n        }\n        this._updateMovables();\n    }\n\n    /**\n     * Allow parents of the <Graphie> component to grab a reference to the\n     * underlying graphie object using\n     * `this.refs.graphieComponent.getGraphie()`\n     *\n     * This shouldn't be necessary for 90% of cases, but the power is there.\n     * Use it for good and not evil.\n     */\n    getGraphie: () => any = () => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_graphie' does not exist on type 'Graphie'.\n        return this._graphie;\n    };\n\n    // bounds-checked range\n    _range: () => [Coord, Coord] = () => {\n        const boundsCheckRange = (range: Coord): Coord => {\n            if (range[0] >= range[1]) {\n                return [-10, 10];\n            }\n            return range;\n        };\n        return [\n            boundsCheckRange(this.props.range[0]),\n            boundsCheckRange(this.props.range[1]),\n        ];\n    };\n\n    _box: () => Size = () => {\n        const ensureMinSize = (pixelDim: number): number => {\n            // 340 = default size in the editor. exact value\n            // is arbitrary; this is just a safety check.\n            return pixelDim > 0 ? pixelDim : 340;\n        };\n\n        return [\n            ensureMinSize(this.props.box[0]),\n            ensureMinSize(this.props.box[1]),\n        ];\n    };\n\n    _scale: () => ReadonlyArray<number> = () => {\n        const box = this._box();\n        const range = this._range();\n        return _.map(box, (pixelDim, i) => {\n            const unitDim = range[i][1] - range[i][0];\n            return pixelDim / unitDim;\n        });\n    };\n\n    _setupGraphie: () => void = () => {\n        this._removeMovables();\n\n        const graphieDiv = ReactDOM.findDOMNode(this.graphieDivRef.current);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'empty' does not exist on type 'JQueryStatic'.\n        $(graphieDiv).empty();\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_graphie' does not exist on type 'Graphie'.\n        const graphie = (this._graphie = createGraphie(graphieDiv));\n\n        // This has to be called before addMouseLayer. You can re-init\n        // with graphInit later if you prefer\n        graphie.init({\n            range: this._range(),\n            scale: this._scale(),\n            isMobile: this.props.isMobile,\n        });\n        // Only add the mouselayer if we actually want one.\n        if (this.props.addMouseLayer) {\n            graphie.addMouseLayer({\n                onClick: this.props.onClick,\n                onMouseDown: this.props.onMouseDown,\n                onMouseUp: this.props.onMouseUp,\n                onMouseMove: this.props.onMouseMove,\n                setDrawingAreaAvailable: this.props.setDrawingAreaAvailable,\n            });\n        }\n\n        graphie.snap = this.props.options.snapStep || [1, 1];\n\n        if (this.props.responsive) {\n            // Overwrite fixed styles set in init()\n            // TODO(alex): Either make this component always responsive by\n            // itself, or always wrap it in other components so that it is.\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2554 - Expected 2 arguments, but got 1.\n            $(graphieDiv).css({width: \"100%\", height: \"100%\"});\n            graphie.raphael.setSize(\"100%\", \"100%\");\n        }\n\n        this.props.setup(\n            graphie,\n            _.extend(\n                {\n                    range: this._range(),\n                    scale: this._scale(),\n                },\n                this.props.options,\n            ),\n        );\n    };\n\n    _removeMovables: () => void = () => {\n        // _.invoke works even when this._movables is undefined\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_movables' does not exist on type 'Graphie'.\n        _.invoke(this._movables, \"remove\");\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_movables' does not exist on type 'Graphie'.\n        this._movables = {};\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(children: readonly any[], options: any) => ReactElement<any, string | JSXElementConstructor<any>> | readonly ReactElement<any, string | JSXElementConstructor<any>>[]' is not assignable to type '(children: readonly any[], arg2: any) => ReactElement<any, string | JSXElementConstructor<any>>'.\n    _renderMovables: (\n        children: ReadonlyArray<any>,\n        arg2: any,\n    ) => React.ReactElement = (children, options) => {\n        // Each leaf of `children` is a movable descriptor created by a call to\n        // some `GraphieMovable`, such as `MovablePoint`.\n        //\n        // This function takes these descriptors and renders them into\n        // on-screen movables, or updates on-screen movables for\n        // descriptors when possible.\n        //\n        // If there is no movable with that key already, this descriptor is\n        // stored in this._movables and promoted to an on-screen movable by\n        // calling `child.add(graphie)`.\n        //\n        // If a movable of the same type with the same key exists already,\n        // we take `child.props` and give them to the already-existing\n        // on-screen movable, and call `movable.modify()`\n\n        const graphie = options.graphie;\n        const oldMovables = options.oldMovables;\n        const newMovables = options.newMovables; /* output parameter */\n\n        const renderChildren = (elem: any) => {\n            _.each(elem.movableProps, (prop) => {\n                // Render the children, and save the results of that\n                // render to the appropriate props\n                elem.props[prop] = this._renderMovables(\n                    elem.props[prop],\n                    options,\n                );\n            });\n        };\n\n        // Add/modify movables\n\n        // We want to keep track of whether we have added a new svg element,\n        // because if we have, then we need to call .toFront() on any svg\n        // elements occurring afterwards. If this happens, we set\n        // `areMovablesOutOfOrder` to true:\n        let areMovablesOutOfOrder = false;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 3 arguments, but got 2.\n        return nestedMap(children, (childDescriptor) => {\n            if (!childDescriptor) {\n                // Still increment the key to avoid cascading key changes\n                // on hiding/unhiding children, i.e. by using\n                // {someBoolean && <MovablePoint />}\n                options.nextKey++;\n                // preserve the null/undefined in the resulting array\n                return childDescriptor;\n            }\n\n            // Instantiate the descriptor to turn it into a real Movable\n            const child = new childDescriptor.type(childDescriptor.props);\n            assert(\n                child instanceof GraphieMovable,\n                \"All children of a Graphie component must be Graphie \" +\n                    \"movables\",\n            );\n\n            // Give each child a key\n            const keyProp = childDescriptor.key;\n            const key = keyProp == null ? \"_no_id_\" + options.nextKey : keyProp;\n            options.nextKey++;\n            const ref = childDescriptor.ref;\n\n            // We render our children first. This allows us to replace any\n            // `movableProps` on our child with the on-screen movables\n            // corresponding with those descriptors.\n            renderChildren(child);\n\n            const prevMovable = oldMovables[key];\n            if (!prevMovable) {\n                // We're creating a new child\n                child.add(graphie);\n                areMovablesOutOfOrder = true;\n\n                newMovables[key] = child;\n            } else if (child.constructor === prevMovable.constructor) {\n                // We're updating an old child\n                prevMovable.props = child.props;\n                const modifyResult = prevMovable.modify(graphie);\n                if (modifyResult === \"reordered\") {\n                    areMovablesOutOfOrder = true;\n                }\n\n                newMovables[key] = prevMovable;\n            } else {\n                // We're destroying an old child and replacing it\n                // with a new child of a different type\n\n                // This generally is a bad idea, so warn about it if this\n                // is being caused by implicit keys\n                if (keyProp == null) {\n                    Log.error(\n                        \"Replacing a <Graphie> child with a \" +\n                            \"child of a different type. Please add keys \" +\n                            \"to your <Graphie> children\",\n                        Errors.Internal,\n                    );\n                }\n\n                prevMovable.remove();\n                child.add(graphie);\n                areMovablesOutOfOrder = true;\n\n                newMovables[key] = child;\n            }\n\n            if (areMovablesOutOfOrder) {\n                newMovables[key].toFront();\n            }\n\n            if (ref) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'movables' does not exist on type 'Graphie'.\n                this.movables[ref] = newMovables[key];\n            }\n\n            return newMovables[key];\n        });\n    };\n\n    // Sort of like react diffing, but for movables\n    _updateMovables: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_graphie' does not exist on type 'Graphie'.\n        const graphie = this._graphie;\n\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_movables' does not exist on type 'Graphie'.\n        const oldMovables = this._movables;\n        const newMovables: Record<string, any> = {};\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_movables' does not exist on type 'Graphie'.\n        this._movables = newMovables;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'movables' does not exist on type 'Graphie'.\n        this.movables = {};\n\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'ReactNode' is not assignable to parameter of type 'readonly any[]'.\n        this._renderMovables(this.props.children, {\n            nextKey: 1,\n            graphie: graphie,\n            oldMovables: oldMovables,\n            newMovables: newMovables,\n        });\n\n        // Remove any movables that no longer exist in the child array\n        _.each(oldMovables, (oldMovable, key) => {\n            if (!newMovables[key]) {\n                oldMovable.remove();\n            }\n        });\n    };\n\n    render(): React.ReactNode {\n        return (\n            <div className=\"graphie-container\">\n                <div className=\"graphie\" ref={this.graphieDivRef} />\n            </div>\n        );\n    }\n}\n\n// Attach Graphie.createClass and Graphie.createSimpleClass\n_.extend(Graphie, GraphieClasses);\n// Attach the Movable react components for easy reference\n_.extend(Graphie, Movables);\n\nexport default Graphie;\n","/* eslint-disable jsx-a11y/alt-text, react/no-unsafe */\n// TODO(scottgrant): Enable the alt-text eslint rule above.\n/**\n * Component to display an image (or other React components) while the desired\n * image is loading.\n *\n * Derived from\n * https://github.com/hzdg/react-imageloader/blob/master/src/index.js\n * to better suit our environment/build tools. Additionally, this one does\n * not introduce a wrapper element, which makes styling easier.\n */\n\nimport * as React from \"react\";\n\nimport {getDependencies} from \"../dependencies\";\n\nimport type {Dimensions} from \"../types\";\n\nconst Status = {\n    PENDING: \"pending\",\n    LOADING: \"loading\",\n    LOADED: \"loaded\",\n    FAILED: \"failed\",\n} as const;\n\nexport type ImageProps = {\n    alt: string;\n    title?: string;\n    [\"aria-hidden\"]?: boolean;\n    tabIndex?: string;\n    onClick?: (e: React.SyntheticEvent) => void;\n    style?: Dimensions;\n};\n\ntype Props = {\n    children?: React.ReactNode;\n    imgProps: ImageProps;\n    onError?: (event: Event) => void;\n    onLoad?: (event: Event) => void;\n    // When the DOM updates to replace the preloader with the image, or\n    // vice-versa, we trigger this callback.\n    onUpdate: (status: typeof Status[keyof typeof Status]) => void;\n    preloader: () => React.ReactElement | null | undefined;\n    src: string;\n};\n\ntype State = {\n    status: typeof Status[keyof typeof Status];\n};\n\nclass ImageLoader extends React.Component<Props, State> {\n    img: HTMLImageElement | null | undefined;\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {status: props.src ? Status.LOADING : Status.PENDING};\n    }\n\n    componentDidMount() {\n        if (this.state.status === Status.LOADING) {\n            this.createLoader();\n        }\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        if (this.props.src !== nextProps.src) {\n            this.setState({\n                status: nextProps.src ? Status.LOADING : Status.PENDING,\n            });\n        }\n    }\n\n    componentDidUpdate(prevProps: Props, prevState: State) {\n        if (this.state.status === Status.LOADING && !this.img) {\n            this.createLoader();\n        }\n\n        if (prevState.status !== this.state.status) {\n            this.props.onUpdate(this.state.status);\n        }\n    }\n\n    componentWillUnmount() {\n        this.destroyLoader();\n    }\n\n    createLoader: () => void = () => {\n        this.destroyLoader(); // We can only have one loader at a time.\n\n        this.img = new Image();\n        this.img.onload = this.handleLoad;\n        this.img.onerror = this.handleError;\n        this.img.src = this.props.src;\n    };\n\n    destroyLoader: () => void = () => {\n        if (this.img) {\n            this.img.onload = null;\n            this.img.onerror = null;\n            this.img = null;\n        }\n    };\n\n    handleLoad: (event: Event) => void = (event: Event) => {\n        this.destroyLoader();\n        this.setState({status: Status.LOADED});\n\n        if (this.props.onLoad) {\n            this.props.onLoad(event);\n        }\n    };\n\n    handleError: (error: Event) => void = (error: Event) => {\n        this.destroyLoader();\n        this.setState({status: Status.FAILED});\n\n        if (this.props.onError) {\n            this.props.onError(error);\n        }\n    };\n\n    renderImg: () => React.ReactElement<React.ComponentProps<\"img\">> = () => {\n        const {src, imgProps} = this.props;\n        let onKeyUp = null;\n        let onKeyDown = null;\n        if (imgProps.onClick != null) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type '(e: React.KeyboardEvent) => void' is not assignable to type 'null'.\n            onKeyUp = (e: React.KeyboardEvent) => {\n                // 13 is enter key, 32 is space key\n                if (e.keyCode === 13 || e.keyCode === 32) {\n                    imgProps.onClick && imgProps.onClick(e);\n                }\n            };\n            // @ts-expect-error [FEI-5003] - TS2322 - Type '(e: React.KeyboardEvent) => void' is not assignable to type 'null'.\n            onKeyDown = (e: React.KeyboardEvent) => {\n                // 32 is space key\n                if (e.keyCode === 32) {\n                    // don't scroll on space when the image is focused\n                    e.preventDefault();\n                }\n            };\n        }\n        const staticUrl = getDependencies().staticUrl;\n\n        return (\n            <img\n                src={staticUrl(src)}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'KeyboardEventHandler<HTMLImageElement> | undefined'.\n                onKeyUp={onKeyUp}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'KeyboardEventHandler<HTMLImageElement> | undefined'.\n                onKeyDown={onKeyDown}\n                {...imgProps}\n            />\n        );\n    };\n\n    render(): React.ReactNode {\n        switch (this.state.status) {\n            case Status.LOADED:\n                return this.renderImg();\n\n            case Status.FAILED:\n                if (this.props.children) {\n                    return this.props.children;\n                }\n                break;\n            default:\n                if (this.props.preloader) {\n                    return this.props.preloader();\n                }\n        }\n        return null;\n    }\n}\n\nexport default ImageLoader;\n","/* eslint-disable no-useless-escape, react/no-unsafe */\nimport {CircularSpinner} from \"@khanacademy/wonder-blocks-progress-spinner\";\nimport classNames from \"classnames\";\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\nimport {Coord} from \"../interactive2/types\";\nimport {Errors, Log} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\nimport Util from \"../util\";\nimport * as Zoom from \"../zoom\";\n\nimport FixedToResponsive from \"./fixed-to-responsive\";\nimport Graphie from \"./graphie\";\nimport ImageLoader from \"./image-loader\";\n\nimport type {Size} from \"../perseus-types\";\nimport type {Alignment, Dimensions} from \"../types\";\nimport type {ImageProps} from \"./image-loader\";\n\n// Minimum image width to make an image appear as zoomable.\nconst ZOOMABLE_THRESHOLD = 700;\n\n// The global cache of label data. Its format is:\n// {\n//   hash (e.g. \"c21435944d2cf0c8f39d9059cb35836aa701d04a\"): {\n//     loaded: a boolean of whether the data has been loaded or not\n//     dataCallbacks: a list of callbacks to call with the data when the data\n//                    is loaded\n//     data: the other data for this hash\n//   },\n//   ...\n// }\nconst labelDataCache: Record<string, any> = {};\n\n// Write our own JSONP handler because all the other ones don't do things we\n// need.\nconst doJSONP = function (url: string, options) {\n    options = {\n        callbackName: \"callback\",\n        success: $.noop,\n        error: $.noop,\n        ...options,\n    };\n\n    // Create the script\n    const script = document.createElement(\"script\");\n    script.setAttribute(\"async\", \"\");\n    script.setAttribute(\"src\", url);\n\n    // A cleanup function to run when we're done.\n    function cleanup() {\n        document.head && document.head.removeChild(script);\n        delete window[options.callbackName];\n    }\n\n    // Add the global callback.\n    // @ts-expect-error [FEI-5003] - TS2740 - Type '() => void' is missing the following properties from type 'Window': clientInformation, closed, customElements, devicePixelRatio, and 206 more.\n    window[options.callbackName] = function (...args) {\n        cleanup();\n        options.success.apply(null, args);\n    };\n\n    // Add the error handler.\n    script.addEventListener(\"error\", function (...args) {\n        cleanup();\n        options.error.apply(null, args);\n    });\n\n    // Insert the script to start the download.\n    document.head && document.head.appendChild(script);\n};\n\n// For offline exercises in the mobile app, we download the graphie data\n// (svgs and localized data files) and serve them from the local file\n// system (with file://). We replace urls that start with `web+graphie`\n// in the perseus json with this `file+graphie` prefix to indicate that\n// they should have the `file://` protocol instead of `https://`.\nconst svgLocalLabelsRegex = /^file\\+graphie\\:/;\nconst hashRegex = /\\/([^/]+)$/;\n\nfunction isImageProbablyPhotograph(imageUrl) {\n    // TODO(david): Do an inventory to refine this heuristic. For example, what\n    //     % of .png images are illustrations?\n    return /\\.(jpg|jpeg)$/i.test(imageUrl);\n}\n\nfunction getLocale() {\n    const {JIPT, kaLocale} = getDependencies();\n    return JIPT.useJIPT ? \"en-pt\" : kaLocale;\n}\n\nfunction shouldUseLocalizedData() {\n    return getLocale() !== \"en\";\n}\n\n// A regex to split at the last / of a URL, separating the base part from the\n// hash. This is used to create the localized label data URLs.\nconst splitHashRegex = /\\/(?=[^/]+$)/;\n\nfunction getLocalizedDataUrl(url: string) {\n    // For local (cached) graphie images, they are already localized.\n    if (svgLocalLabelsRegex.test(url)) {\n        return Util.getDataUrl(url);\n    }\n    const [base, hash] = Util.getBaseUrl(url).split(splitHashRegex);\n    return `${base}/${getLocale()}/${hash}-data.json`;\n}\n\n// Get the hash from the url, which is just the filename\nfunction getUrlHash(url: string) {\n    const match = url.match(hashRegex);\n    if (match == null) {\n        throw new PerseusError(\"not a valid URL\", Errors.InvalidInput);\n    }\n    return match && match[1];\n}\n\nfunction defaultPreloader(dimensions: Dimensions) {\n    return (\n        <span\n            style={{\n                top: 0,\n                left: 0,\n                width: \"100%\",\n                height: \"100%\",\n                position: \"absolute\",\n                minWidth: \"20px\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignContent: \"center\",\n            }}\n        >\n            <CircularSpinner size=\"medium\" />\n        </span>\n    );\n}\n\ntype Props = {\n    allowFullBleed?: boolean;\n    alt: string;\n    constrainHeight?: boolean;\n    extraGraphie?: {\n        box: Size;\n        range: [Coord, Coord];\n        labels: ReadonlyArray<any>;\n    };\n    height?: number;\n    // When the DOM updates to replace the preloader with the image, or\n    // vice-versa, we trigger this callback.\n    onUpdate: () => void;\n    // If alt is provided, DO NOT set aria-hidden=true unless this override flag\n    // is set.\n    overrideAriaHidden?: boolean;\n    preloader?: (dimensions: Dimensions) => React.ReactNode;\n    // By default, this component attempts to be responsive whenever\n    // possible (specifically, when width and height are passed in).\n    // You can expliclty force unresponsive behavior by *either*\n    // not passing in width/height *or* setting this prop to false.\n    // The difference is that forcing via this prop will result in\n    // explicit width and height styles being set on the rendered\n    // component.\n    responsive: boolean;\n    scale: number;\n    src: string;\n    title?: string;\n    trackInteraction?: () => void;\n    width?: number;\n    // Whether clicking this image will allow it to be fully zoomed in to\n    // its original size on click, and allow the user to scroll in that\n    // state. This also does some hacky viewport meta tag changing to\n    // ensure this works on mobile devices, so I (david@) don't recommend\n    // enabling this on desktop yet.\n    zoomToFullSizeOnMobile?: boolean;\n    // If provided, use AssetContext.Consumer, see renderer.jsx.\n    // If not, it defaults to a no-op.\n    setAssetStatus: (assetKey: string, loaded: boolean) => void;\n};\n\ntype Label = {\n    coordinates: ReadonlyArray<any>;\n    content: string;\n    alignment: Alignment;\n    typesetAsMath: boolean;\n};\n\ntype LabelsRenderedMap = {\n    [label: string]: boolean;\n};\n\ntype State = {\n    // For labeled SVGs, when both dataLoaded and imageLoaded are true,\n    // indicates that loading has completed.\n    dataLoaded: boolean;\n    imageDimensions: [number, number] | null | undefined;\n    // Used to indicate when a non-labeled SVG image is finished loading\n    // and for labeled SVGs, indicates that it's safe to set up the graphie\n    // containing the labels.\n    imageLoaded: boolean;\n    // Some graphies have labels which are rendered after the main image is\n    // loaded.  This object keeps track of whether those labels have been\n    // rendered.\n    labelsRendered: LabelsRenderedMap;\n    labelDataIsLocalized: boolean;\n    labels: ReadonlyArray<Label>;\n    range: [Coord, Coord];\n};\n\nclass SvgImage extends React.Component<Props, State> {\n    _isMounted: boolean;\n\n    static defaultProps: {\n        constrainHeight: boolean;\n        onUpdate: () => void;\n        responsive: boolean;\n        scale: number;\n        setAssetStatus: (src: string, status: boolean) => void;\n        src: string;\n        zoomToFullSizeOnMobile: boolean;\n    } = {\n        constrainHeight: false,\n        onUpdate: () => {},\n        responsive: true,\n        src: \"\",\n        scale: 1,\n        zoomToFullSizeOnMobile: false,\n        setAssetStatus: (src: string, status: boolean) => {},\n    };\n\n    constructor(props: Props) {\n        super(props);\n        props.setAssetStatus(props.src, false);\n\n        this._isMounted = false;\n\n        this.state = {\n            imageLoaded: false,\n            imageDimensions: null,\n            dataLoaded: false,\n            labelDataIsLocalized: false,\n            labels: [],\n            labelsRendered: {},\n            range: [[0, 0], [0, 0] as Coord],\n        };\n    }\n\n    componentDidMount() {\n        // TODO(scottgrant): This is a hack to remove the deprecated call to\n        // this.isMounted() but is still considered an anti-pattern.\n        this._isMounted = true;\n\n        if (Util.isLabeledSVG(this.props.src)) {\n            this.loadResources();\n        }\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        if (this.props.src !== nextProps.src) {\n            this.setState({\n                imageLoaded: false,\n                dataLoaded: false,\n            });\n        }\n    }\n\n    shouldComponentUpdate(nextProps: Props, nextState: State): boolean {\n        // If the props changed, we definitely need to update\n        if (!_.isEqual(this.props, nextProps)) {\n            return true;\n        }\n\n        const wasLoaded = this.isLoadedInState(this.state);\n        const nextLoaded = this.isLoadedInState(nextState);\n\n        return wasLoaded !== nextLoaded;\n    }\n\n    componentDidUpdate(prevProps: Props, prevState: State) {\n        const wasLoaded = this.isLoadedInState(prevState);\n        const isLoaded = this.isLoadedInState(this.state);\n\n        if (Util.isLabeledSVG(this.props.src) && !isLoaded) {\n            this.loadResources();\n        }\n\n        if (!wasLoaded && isLoaded) {\n            this.props.setAssetStatus(this.props.src, true);\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    // Check if all of the resources are loaded in a given state\n    isLoadedInState(state: State): boolean {\n        return Util.isLabeledSVG(this.props.src)\n            ? state.imageLoaded && state.dataLoaded\n            : state.imageLoaded;\n    }\n\n    loadResources() {\n        const hash = getUrlHash(this.props.src);\n\n        // We can't make multiple jsonp calls to the same file because their\n        // callbacks will collide with each other. Instead, we cache the data\n        // and only make the jsonp calls once.\n        if (labelDataCache[hash]) {\n            if (labelDataCache[hash].loaded) {\n                const {data, localized} = labelDataCache[hash];\n                this.onDataLoaded(data, localized);\n            } else {\n                labelDataCache[hash].dataCallbacks.push(this.onDataLoaded);\n            }\n        } else {\n            const cacheData = {\n                loaded: false,\n                dataCallbacks: [this.onDataLoaded],\n                data: null,\n                localized: shouldUseLocalizedData(),\n            } as const;\n\n            labelDataCache[hash] = cacheData;\n\n            const retrieveData = (\n                url: string,\n                errorCallback: (x?: any, status?: any, error?: any) => void,\n            ) => {\n                doJSONP(url, {\n                    callbackName: \"svgData\" + hash,\n                    success: (data) => {\n                        // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'data' because it is a read-only property.\n                        cacheData.data = data;\n                        // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'loaded' because it is a read-only property.\n                        cacheData.loaded = true;\n\n                        _.each(cacheData.dataCallbacks, (callback) => {\n                            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'null' is not assignable to parameter of type '{ labels: readonly any[]; range: readonly any[]; }'.\n                            callback(cacheData.data, cacheData.localized);\n                        });\n                    },\n                    error: errorCallback,\n                });\n            };\n\n            if (shouldUseLocalizedData()) {\n                retrieveData(\n                    getLocalizedDataUrl(this.props.src),\n                    (x, status, error) => {\n                        // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'localized' because it is a read-only property.\n                        cacheData.localized = false;\n\n                        // If there is isn't any localized data, fall back to\n                        // the original, unlocalized data\n                        retrieveData(\n                            Util.getDataUrl(this.props.src),\n                            (x, status, error) => {\n                                Log.error(\n                                    \"Data load failed for svg-image\",\n                                    Errors.Service,\n                                    {\n                                        cause: error,\n                                        loggedMetadata: {\n                                            dataUrl: Util.getDataUrl(\n                                                this.props.src,\n                                            ),\n                                            status,\n                                        },\n                                    },\n                                );\n                            },\n                        );\n                    },\n                );\n            } else {\n                retrieveData(\n                    Util.getDataUrl(this.props.src),\n                    (x, status, error) => {\n                        Log.error(\n                            \"Data load failed for svg-image\",\n                            Errors.Service,\n                            {\n                                cause: error,\n                                loggedMetadata: {\n                                    dataUrl: Util.getDataUrl(this.props.src),\n                                    status,\n                                },\n                            },\n                        );\n                    },\n                );\n            }\n        }\n    }\n\n    onDataLoaded: (\n        data: {\n            labels: ReadonlyArray<any>;\n            range: ReadonlyArray<any>;\n        },\n        localized: boolean,\n    ) => void = (\n        data: {\n            labels: ReadonlyArray<any>;\n            range: [Coord, Coord];\n        },\n        localized: boolean,\n    ) => {\n        if (this._isMounted && data.labels && data.range) {\n            const labelsRendered: LabelsRenderedMap = data.labels.reduce<\n                Record<string, any>\n            >(\n                (dict: LabelsRenderedMap, label) => ({\n                    ...dict,\n                    [label.content]: false,\n                }),\n                {},\n            );\n\n            this.setState({\n                dataLoaded: true,\n                labelDataIsLocalized: localized,\n                labelsRendered,\n                labels: data.labels,\n                range: data.range,\n            });\n        }\n    };\n\n    sizeProvided(): boolean {\n        return this.props.width != null && this.props.height != null;\n    }\n\n    onImageLoad: () => void = () => {\n        // Only need to do this if rendering a Graphie\n        if (this.sizeProvided()) {\n            // If width and height are provided, we don't need to calculate the\n            // size ourselves\n            this.setState({\n                imageLoaded: true,\n            });\n        } else {\n            Util.getImageSize(this.props.src, (width, height) => {\n                if (this._isMounted) {\n                    this.setState({\n                        imageLoaded: true,\n                        imageDimensions: [width, height],\n                    });\n                }\n            });\n        }\n    };\n\n    setupGraphie: (graphie?: any, options?: any) => void = (\n        graphie: any,\n        options: any,\n    ) => {\n        _.map(options.labels, (labelData) => {\n            const {JIPT} = getDependencies();\n            if (JIPT.useJIPT && this.state.labelDataIsLocalized) {\n                // If we're using JIPT translation and we got proper JIPT tags,\n                // render the labels as plain text (so JIPT can find them) and\n                // add some extra properties to the element so we can properly\n                // re-render the label once it is replaced with translated\n                // text.\n                const elem = graphie.label(\n                    labelData.coordinates,\n                    labelData.content,\n                    labelData.alignment,\n                    false,\n                );\n\n                getDependencies().svgImageJiptLabels.addLabel(\n                    elem,\n                    labelData.typesetAsMath,\n                );\n            } else if (labelData.coordinates) {\n                // Create labels from the data\n                // TODO(charlie): Some erroneous labels are being sent down\n                // without coordinates. They don't seem to have any content, so\n                // it seems fine to just ignore them (rather than error), but\n                // we should figure out why this is happening.\n                const label = graphie.label(\n                    labelData.coordinates,\n                    labelData.content,\n                    labelData.alignment,\n                    labelData.typesetAsMath,\n                    {\"font-size\": 100 * this.props.scale + \"%\"},\n                );\n\n                // Convert absolute positioning css from pixels to percentages\n                // TODO(alex): Dynamically resize font-size as well. This\n                // almost certainly means listening to throttled window resize\n                // events.\n                const labelStyle = label[0].style;\n                let labelTop = this._tryGetPixels(labelStyle.top);\n                let labelLeft = this._tryGetPixels(labelStyle.left);\n                if (labelTop === null || labelLeft === null) {\n                    // Graphie labels are supposed to have an explicit position,\n                    // but to be on the safe side, let's fall back to using\n                    // jQuery's position(). The reason we're not always using\n                    // this is that in the presence of CSS transforms, it will\n                    // give the rendered position, which may be scaled and\n                    // not equal to the explicitly specified one.\n                    const labelPosition = label.position();\n                    labelTop = labelPosition.top;\n                    labelLeft = labelPosition.left;\n                }\n                const svgHeight = (this.props.height || 0) * this.props.scale;\n                const svgWidth = (this.props.width || 0) * this.props.scale;\n                label.css({\n                    // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                    top: (labelTop / svgHeight) * 100 + \"%\",\n                    // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                    left: (labelLeft / svgWidth) * 100 + \"%\",\n                });\n\n                // Add back the styles to each of the labels\n                _.each(labelData.style, (styleValue, styleName) => {\n                    label.css(styleName, styleValue);\n                });\n            }\n            this.setState({\n                labelsRendered: {\n                    ...this.state.labelsRendered,\n                    [labelData.content]: true,\n                },\n            });\n        });\n    };\n\n    // Try to parse a CSS value as pixels. Returns null if the parameter string\n    // does not contain a number followed by \"px\".\n    _tryGetPixels(value: string): null | number {\n        value = value || \"\";\n        // While this doesn't check that there are no other alphabetical\n        // characters prior to \"px\", that should be taken care of by the DOM,\n        // which won't accept invalid units.\n        if (!value.endsWith(\"px\")) {\n            return null;\n        }\n        // parseFloat() ignores trailing non-numerical characters.\n        return parseFloat(value) || null;\n    }\n\n    _handleZoomClick: (e: React.SyntheticEvent) => void = (\n        e: React.SyntheticEvent,\n    ) => {\n        const $image = $(e.target);\n\n        // It's possible that the image is already displayed at its\n        // full size, but we don't really know that until we get a chance\n        // to measure it (just now, after the user clicks). We only zoom\n        // if there's more image to be shown.\n        //\n        // TODO(kevindangoor) If the window is narrow and the image is\n        // already displayed as wide as possible, we may want to do\n        // nothing in that case as well. Figuring this out correctly\n        // likely required accounting for the image alignment and margins.\n        if (\n            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n            $image.width() < this.props.width ||\n            this.props.zoomToFullSizeOnMobile\n        ) {\n            Zoom.ZoomService.handleZoomClick(\n                e,\n                this.props.zoomToFullSizeOnMobile,\n            );\n        }\n        this.props.trackInteraction && this.props.trackInteraction();\n    };\n\n    handleUpdate: (status: string) => void = (status: string) => {\n        this.props.onUpdate();\n        // NOTE: Labeled SVG images use this.onImageLoad to set imageLoaded\n        // to true and we only use the imageLoaded state when isLabeledSVG\n        // is true setting imageLoaded true here shouldn't cause issues.\n        if (!Util.isLabeledSVG(this.props.src) && status === \"loaded\") {\n            this.setState({imageLoaded: true});\n        }\n    };\n\n    render():\n        | React.ReactElement<React.ComponentProps<\"div\">>\n        | React.ReactNode {\n        const imageSrc = this.props.src;\n\n        // Props to send to all images\n        const imageProps: ImageProps = {\n            alt: this.props.alt,\n            title: this.props.title,\n            tabIndex: \"0\",\n        };\n        // If alt text is present, AND overrideAriaHidden is true,\n        // include aria-hidden to avoid screen reader from crawling texts\n        // both from the div meant for screen readers (see svg-image.jsx)\n        // and alt attribute.\n        if (this.props.alt && this.props.overrideAriaHidden) {\n            imageProps[\"aria-hidden\"] = true;\n        }\n\n        const width = this.props.width && this.props.width * this.props.scale;\n        const height =\n            this.props.height && this.props.height * this.props.scale;\n        const dimensions = {width, height} as const;\n\n        // To make an image responsive, we need to know what its width and\n        // height are in advance (before inserting it into the DOM) so that we\n        // can ensure it doesn't grow past those limits. We don't always have\n        // this information, especially in places where <Renderer /> is used\n        // to render inline Markdown images within a widget. See Radio, Sorter,\n        // Matcher, etc.\n        // TODO(alex): Make all of those image rendering locations aware of\n        // width+height so that they too can render responsively.\n        const responsive = this.props.responsive && !!(width && height);\n\n        // An additional <Graphie /> may be inserted after the image/graphie\n        // pair. Only used by the image widget, for its legacy labels support.\n        // Note that since the image widget always provides width and height\n        // data, extraGraphie can be ignored for unresponsive images.\n        // TODO(alex): Convert all existing uses of that to web+graphie. This\n        // is tricky because web+graphie doesn't support labels on non-graphie\n        // images.\n        let extraGraphie;\n        if (this.props.extraGraphie && this.props.extraGraphie.labels.length) {\n            extraGraphie = (\n                <Graphie\n                    box={this.props.extraGraphie.box}\n                    range={this.props.extraGraphie.range}\n                    options={{labels: this.props.extraGraphie.labels}}\n                    responsive={true}\n                    addMouseLayer={false}\n                    setup={this.setupGraphie}\n                />\n            );\n        }\n\n        // If preloader is undefined, we use the default. If it's\n        // null, there will be no preloader in use.\n        const preloaderBaseFunc =\n            this.props.preloader === undefined\n                ? defaultPreloader\n                : this.props.preloader;\n\n        const preloader = preloaderBaseFunc\n            ? () => preloaderBaseFunc(dimensions)\n            : null;\n\n        // Just use a normal image if a normal image is provided\n        if (!Util.isLabeledSVG(imageSrc)) {\n            if (responsive) {\n                const wrapperClasses = classNames({\n                    zoomable: (width || 0) > ZOOMABLE_THRESHOLD,\n                    \"svg-image\": true,\n                });\n\n                imageProps.onClick = this._handleZoomClick;\n\n                return (\n                    <FixedToResponsive\n                        className={wrapperClasses}\n                        width={width}\n                        height={height}\n                        constrainHeight={this.props.constrainHeight}\n                        allowFullBleed={\n                            this.props.allowFullBleed &&\n                            isImageProbablyPhotograph(imageSrc)\n                        }\n                    >\n                        <ImageLoader\n                            src={imageSrc}\n                            imgProps={imageProps}\n                            // @ts-expect-error [FEI-5003] - TS2322 - Type '(() => Element) | null' is not assignable to type '() => ReactElement<any, string | JSXElementConstructor<any>> | null | undefined'.\n                            preloader={preloader}\n                            onUpdate={this.handleUpdate}\n                        />\n                        {extraGraphie}\n                    </FixedToResponsive>\n                );\n            }\n            imageProps.style = dimensions;\n            return (\n                <ImageLoader\n                    src={imageSrc}\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type '(() => Element) | null' is not assignable to type '() => ReactElement<any, string | JSXElementConstructor<any>> | null | undefined'.\n                    preloader={preloader}\n                    imgProps={imageProps}\n                    onUpdate={this.handleUpdate}\n                />\n            );\n        }\n\n        const imageUrl = Util.getSvgUrl(imageSrc);\n\n        let graphie;\n        // Since we only want to do the graphie setup once, we only render the\n        // graphie once everything is loaded\n        if (this.isLoadedInState(this.state)) {\n            // Use the provided width and height to size the graphie if\n            // possible, otherwise use our own calculated size\n            let box;\n            if (this.sizeProvided()) {\n                box = [width, height];\n            } else if (this.state.imageDimensions) {\n                box = [\n                    this.state.imageDimensions[0] * this.props.scale,\n                    this.state.imageDimensions[1] * this.props.scale,\n                ];\n            } else {\n                throw new PerseusError(\n                    \"svg-image has no dimensions\",\n                    Errors.InvalidInput,\n                    {\n                        metadata: {src: this.props.src},\n                    },\n                );\n            }\n\n            // TODO: the \"40\" scale factor was introduced in D14974 but is not\n            // documented where it came from.\n            graphie = (\n                <Graphie\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"graphie\"\n                    box={box}\n                    scale={[40 * this.props.scale, 40 * this.props.scale]}\n                    range={this.state.range}\n                    options={_.pick(this.state, \"labels\")}\n                    responsive={responsive}\n                    addMouseLayer={false}\n                    setup={this.setupGraphie}\n                />\n            );\n        }\n\n        if (responsive) {\n            return (\n                <FixedToResponsive\n                    className=\"svg-image\"\n                    width={width}\n                    height={height}\n                    constrainHeight={this.props.constrainHeight}\n                >\n                    <ImageLoader\n                        src={imageUrl}\n                        onLoad={this.onImageLoad}\n                        onUpdate={this.handleUpdate}\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type '(() => Element) | null' is not assignable to type '() => ReactElement<any, string | JSXElementConstructor<any>> | null | undefined'.\n                        preloader={preloader}\n                        imgProps={imageProps}\n                    />\n                    {graphie}\n                    {extraGraphie}\n                </FixedToResponsive>\n            );\n        }\n        imageProps.style = dimensions;\n        return (\n            <div className=\"unresponsive-svg-image\" style={dimensions}>\n                <ImageLoader\n                    src={imageUrl}\n                    onLoad={this.onImageLoad}\n                    onUpdate={this.handleUpdate}\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type '(() => Element) | null' is not assignable to type '() => ReactElement<any, string | JSXElementConstructor<any>> | null | undefined'.\n                    preloader={preloader}\n                    imgProps={imageProps}\n                />\n                {graphie}\n            </div>\n        );\n    }\n}\n\nexport default SvgImage;\n","/**\n * Wrapper around the TeX component from react-components-package\n * which adds logic to track whether all pieces of math in an exercise\n * have been loaded.  This tracking is facilitated by the AssetContext.\n */\nimport * as React from \"react\";\n\nimport {getDependencies} from \"../dependencies\";\n\ntype Props = {\n    children: string;\n    // Pass through prop to TeX from react-components-package.\n    onRender: () => void;\n    // If provided, use AssetContext.Consumer, see renderer.jsx.\n    // If not, it defaults to a no-op.\n    setAssetStatus: (assetKey: string, loaded: boolean) => void;\n};\n\ntype State = {\n    rendered: boolean;\n};\n\nexport default class Tex extends React.Component<Props, State> {\n    _hasRendered: boolean;\n\n    static defaultProps: {\n        onRender: () => void;\n        setAssetStatus: (src: string, status: boolean) => void;\n    } = {\n        onRender: () => {},\n        setAssetStatus: (src: string, status: boolean) => {},\n    };\n\n    constructor(props: Props) {\n        super(props);\n        this.props.setAssetStatus(this.props.children, false);\n        this.state = {\n            rendered: false,\n        };\n        this._hasRendered = false;\n    }\n\n    handleRender: () => void = () => {\n        this.props.onRender();\n        this.setState({rendered: true});\n\n        this.props.onRender();\n\n        // We can't use BaseTeX's onRender callback directly b/c it\n        // can fire from BaseTeX's componentDidMount() method and we\n        // need to wait for all of the constructors in the perseus\n        // render tree to first first.\n        if (!this._hasRendered) {\n            this._hasRendered = true;\n            this.props.setAssetStatus(this.props.children, true);\n        }\n    };\n\n    render(): React.ReactNode {\n        const {TeX: BaseTeX} = getDependencies();\n        return (\n            <BaseTeX onRender={this.handleRender}>\n                {this.props.children}\n            </BaseTeX>\n        );\n    }\n}\n","/**\n * Zooms child to fit with tap-to-zoom behavior.\n */\n\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\ntype Bounds = {\n    width: number;\n    height: number;\n};\n\ntype Props = {\n    children: React.ReactNode;\n    animateHeight: boolean;\n    /**\n     * Optional function that allows customizations in zooming.\n     *\n     * Defaults to just using the bounding client rect of the first DOM\n     * element of this component.\n     */\n    computeChildBounds: (\n        parentNode: HTMLElement,\n        parentBounds: Bounds,\n    ) => Bounds;\n    /**\n     * Optional boolean specifying whether the component is ready to measure\n     * or not.  Defaults to true for synchronous components like tables.\n     */\n    readyToMeasure: boolean;\n};\n\ntype DefaultProps = {\n    animateHeight: Props[\"animateHeight\"];\n    computeChildBounds: Props[\"computeChildBounds\"];\n    readyToMeasure: Props[\"readyToMeasure\"];\n};\n\ntype State = {\n    visible: boolean;\n    marginBottomPx: number;\n    compactHeight?: number | null | undefined;\n    expandedHeight?: number | null | undefined;\n    scale?: number | null | undefined;\n    zoomed: boolean;\n};\n\nclass Zoomable extends React.Component<Props, State> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_isMounted' has no initializer and is not definitely assigned in the constructor.\n    _isMounted: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_observer' has no initializer and is not definitely assigned in the constructor.\n    _observer: MutationObserver;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_measuringInitialized' has no initializer and is not definitely assigned in the constructor.\n    _measuringInitialized: boolean;\n    _originalWidth: number | null | undefined;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_node' has no initializer and is not definitely assigned in the constructor.\n    _node: HTMLElement;\n\n    static defaultProps: DefaultProps = {\n        animateHeight: false,\n        readyToMeasure: true,\n        computeChildBounds: (parentNode) => {\n            const firstChild = parentNode.firstElementChild;\n\n            return {\n                // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'offsetWidth' does not exist on type 'Element'.\n                width: firstChild.offsetWidth,\n                // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'offsetHeight' does not exist on type 'Element'.\n                height: firstChild.offsetHeight,\n            };\n        },\n    };\n\n    state: State = {\n        visible: false,\n        marginBottomPx: 0,\n        zoomed: true,\n    };\n\n    componentDidMount() {\n        this._isMounted = true;\n        this.maybeInitializeMeasuring();\n    }\n\n    componentDidUpdate() {\n        this.maybeInitializeMeasuring();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.reset);\n        if (this._observer) {\n            this._observer.disconnect();\n        }\n\n        this._isMounted = false;\n    }\n\n    reset: () => void = (): void => {\n        if (!this._isMounted) {\n            return;\n        }\n        if (!this.state.visible) {\n            return;\n        }\n        this._originalWidth = null;\n        this.setState(\n            {\n                visible: false,\n                compactHeight: null,\n                expandedHeight: null,\n                zoomed: true,\n            },\n            () => {\n                this.measureAndScaleChildToFit(false);\n            },\n        );\n    };\n\n    /**\n     * Calls measureAndScaleChildToFit and sets up a MutationObserver\n     * to call measureAndScaleChildToFit if Zoomable's children change.\n     *\n     * If the readyToMeasure prop isn't true or if measuring has already\n     * been initialized this method does nothing.\n     */\n    maybeInitializeMeasuring() {\n        const shouldInitialize =\n            this.props.readyToMeasure && !this._measuringInitialized;\n\n        if (this._isMounted && shouldInitialize) {\n            this._measuringInitialized = true;\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'Element | Text | null' is not assignable to type 'HTMLElement'.\n            this._node = ReactDOM.findDOMNode(this);\n\n            // We call measureAndScaleChildToFit asynchronously so that the browser\n            // can apply CSS styles so that we get an accurate measurement.\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(() => this.measureAndScaleChildToFit(false), 0);\n\n            if (window.MutationObserver) {\n                this._observer = new MutationObserver(\n                    (mutations: Array<MutationRecord>) => {\n                        if (this._isMounted) {\n                            for (const mutation of mutations) {\n                                if (mutation.target !== this._node) {\n                                    // Only act on mutations of children\n                                    this.measureAndScaleChildToFit(\n                                        this.state.zoomed,\n                                    );\n                                    break;\n                                }\n                            }\n                        }\n                    },\n                );\n\n                this._observer.observe(this._node, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true,\n                });\n            }\n            window.addEventListener(\"resize\", this.reset);\n        }\n    }\n\n    stopPropagationIfZoomed: (e: React.TouchEvent) => void = (\n        e: React.TouchEvent,\n    ) => {\n        if (!this.state.zoomed) {\n            // We only allow touch events (which trigger interactive elements)\n            // to be propagated to children if we are already zoomed.\n            e.stopPropagation();\n        }\n    };\n\n    // TODO(benkomalo): call this on viewport width changes?\n    // https://github.com/Khan/math-input/blob/master/src/components/math-keypad.js#L43\n    measureAndScaleChildToFit(zoomed: boolean) {\n        if (!this._isMounted) {\n            return;\n        }\n        const parentBounds = {\n            width: this._node.offsetWidth,\n            height: this._node.offsetHeight,\n        } as const;\n        const childBounds = this.props.computeChildBounds(\n            this._node,\n            parentBounds,\n        );\n\n        // The +1 is a fudge factor to make sure any border on the\n        // content isn't clipped by the the container it's in.\n        const childWidth = childBounds.width + 1;\n        const childHeight = childBounds.height + 1;\n\n        if (childWidth > parentBounds.width) {\n            const scale = parentBounds.width / childWidth;\n\n            this.setState({\n                scale,\n                zoomed,\n\n                compactHeight: Math.ceil(scale * childHeight),\n                expandedHeight: childHeight,\n            });\n\n            // TODO(charlie): Do this as a callback to `setState`. Something is\n            // going wrong with that approach in initial testing.\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(() => {\n                // Only show it after the next paint, to allow for CSS\n                // transitions to fade it in.\n                if (this._isMounted) {\n                    this.setState({\n                        visible: true,\n                    });\n                }\n            });\n        } else {\n            this.setState({\n                visible: true,\n            });\n        }\n    }\n\n    handleClickIfZoomed: (e: React.MouseEvent) => void = (\n        e: React.MouseEvent,\n    ) => {\n        if (!this.state.zoomed) {\n            e.stopPropagation();\n            this.handleClick();\n        }\n    };\n\n    handleClick: () => void = () => {\n        this.setState({\n            zoomed: !this.state.zoomed,\n        });\n    };\n\n    render(): React.ReactNode {\n        const {visible, scale, compactHeight, expandedHeight, zoomed} =\n            this.state;\n        const {animateHeight} = this.props;\n\n        const property = animateHeight\n            ? \"opacity transform height\"\n            : \"opacity transform\";\n\n        // Since we're not using aphrodite, we have to prefix ourselves.\n        const transitionStyle = visible\n            ? {\n                  transitionProperty: property,\n                  transitionDuration: \"0.3s\",\n                  transitionTimingFunction: \"ease-out\",\n              }\n            : {};\n\n        // Do a fancy little slide as we fade the contents in the first time.\n        const translateOffset = visible ? \"\" : \" translate(0, 8px)\";\n        const scaleString = (scale ?? 1).toString();\n        const transform = zoomed\n            ? `scale(1, 1) ${translateOffset}`\n            : `scale(${scaleString}, ${scaleString}) ${translateOffset}`;\n\n        const style = {\n            display: \"block\",\n            width: \"100%\",\n            height: zoomed ? expandedHeight : compactHeight,\n            transform: transform,\n            transformOrigin: \"0 0\",\n            opacity: visible ? 1 : 0,\n            WebkitTapHighlightColor: \"transparent\",\n            ...transitionStyle,\n        } as const;\n\n        return (\n            <span\n                onClick={this.handleClick}\n                onClickCapture={this.handleClickIfZoomed}\n                onTouchCancelCapture={this.stopPropagationIfZoomed}\n                onTouchEndCapture={this.stopPropagationIfZoomed}\n                onTouchStartCapture={this.stopPropagationIfZoomed}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type '{ readonly transitionProperty: string; readonly transitionDuration: string; readonly transitionTimingFunction: string; readonly display: \"block\"; readonly width: \"100%\"; readonly height: number | ... 1 more ... | undefined; readonly transform: string; readonly transformOrigin: \"0 0\"; readonly opacity: 0 | 1; readonl...' is not assignable to type 'CSSProperties | undefined'.\n                style={style}\n            >\n                {this.props.children}\n            </span>\n        );\n    }\n}\n\nexport default Zoomable;\n","/**\n * ZoomableTeX is a wrapper around TeX to be used on mobile.  Without wrapping\n * TeX we run into issues of measuring at the incorrect time resulting in bad\n * measurements.\n */\n\nimport * as React from \"react\";\n\nimport AssetContext from \"../asset-context\";\n\nimport TeX from \"./tex\";\nimport Zoomable from \"./zoomable\";\n\ntype Props = {\n    children: string;\n};\ntype State = {\n    isRendered: boolean;\n};\n\nconst computeMathBounds = (\n    parentNode: HTMLElement,\n    parentBounds: {width: number; height: number},\n) => {\n    const textElement =\n        parentNode.querySelector(\".katex-html\") ||\n        parentNode.querySelector(\".MathJax\");\n    const textBounds = {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'offsetWidth' does not exist on type 'Element'.\n        width: textElement.offsetWidth,\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'offsetHeight' does not exist on type 'Element'.\n        height: textElement.offsetHeight,\n    } as const;\n\n    // HACK(benkomalo): when measuring math content, note that\n    // sometimes it actually peeks outside of the\n    // container in some cases. Just be conservative and use\n    // the maximum value of the text and the parent. :(\n    return {\n        width: Math.max(parentBounds.width, textBounds.width),\n        height: Math.max(parentBounds.height, textBounds.height),\n    };\n};\n\nexport default class ZoomableTeX extends React.Component<Props, State> {\n    constructor() {\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1-2 arguments, but got 0.\n        super();\n\n        this.state = {isRendered: false};\n    }\n\n    handleRender: () => void = () => {\n        this.setState({isRendered: true});\n    };\n\n    render(): React.ReactNode {\n        return (\n            <Zoomable\n                readyToMeasure={this.state.isRendered}\n                computeChildBounds={computeMathBounds}\n            >\n                <AssetContext.Consumer>\n                    {({setAssetStatus}) => (\n                        <TeX\n                            onRender={this.handleRender}\n                            setAssetStatus={setAssetStatus}\n                        >\n                            {this.props.children}\n                        </TeX>\n                    )}\n                </AssetContext.Consumer>\n            </Zoomable>\n        );\n    }\n}\n","/**\n * A React context for ensuring there is one and only one definition showing at a time\n */\n\nimport * as React from \"react\";\n\ntype DefintionContext = {\n    activeDefinitionId: string | null | undefined;\n    setActiveDefinitionId: (arg1?: string | null | undefined) => void;\n};\n\nconst defaultContext: DefintionContext = {\n    activeDefinitionId: null,\n    setActiveDefinitionId: () => {},\n};\n\nconst DefinitionContext: React.Context<DefintionContext> =\n    React.createContext(defaultContext);\n\ntype ProviderState = {\n    activeDefinitionId: string | null | undefined;\n};\n\nexport type ProviderProps = {\n    children: any;\n};\nexport class DefinitionProvider extends React.Component<\n    ProviderProps,\n    ProviderState\n> {\n    // Context state\n    state: ProviderState = {\n        activeDefinitionId: null,\n    };\n\n    // Method to update state\n    setActiveDefinitionId = (activeDefinitionId?: string | null): void => {\n        this.setState((prevState: ProviderState) => ({activeDefinitionId}));\n    };\n\n    render(): React.ReactNode {\n        const {children} = this.props;\n        const {activeDefinitionId} = this.state;\n        const {setActiveDefinitionId} = this;\n\n        return (\n            <DefinitionContext.Provider\n                value={{\n                    activeDefinitionId,\n                    setActiveDefinitionId,\n                }}\n            >\n                {children}\n            </DefinitionContext.Provider>\n        );\n    }\n}\n\nexport const DefinitionConsumer = DefinitionContext.Consumer;\n","import * as React from \"react\";\n\nimport {Errors, Log} from \"./logging/log\";\n\ntype Props = {\n    children: React.ReactNode;\n};\ntype State = {\n    error: string;\n};\n\nclass ErrorBoundary extends React.Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {error: \"\"};\n    }\n\n    componentDidCatch(error: Error, info: any) {\n        this.setState({error: error.toString()});\n        Log.error(\"Perseus error boundary caught error\", Errors.Internal, {\n            cause: error,\n            loggedMetadata: {info: info.toString()},\n        });\n    }\n\n    render(): React.ReactNode {\n        if (this.state.error) {\n            // TODO(djf): perhaps we should have one error boundary for\n            // inline elements and one for block elements. This one uses\n            // a <span> and effectively converts block elements with\n            // errors into inline elements.\n            // TODO(michaelpolyak): Link error icon to \"Report a problem\".\n            return (\n                <svg height=\"16\" width=\"16\" viewBox=\"0 0 16 16\">\n                    <path\n                        d=\"m8 16c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-3c0.55 0 1-0.45 1-1s-0.45-1-1-1-1 0.45-1 1 0.45 1 1 1zm0-9c-0.55 0-1 0.45-1 1v4c0 0.55.45 1 1 1s1-0.45 1-1v-4c0-0.55-0.45-1-1-1z\"\n                        fill=\"#d92916\"\n                        fillRule=\"evenodd\"\n                    />\n                </svg>\n            );\n        }\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;\n","/**\n * This alternate version of `.track` does nothing as an optimization.\n */\nfunction _noop() {}\n\n/**\n * Wrapper for the trackInteraction apiOption.\n */\nclass InteractionTracker {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_tracked' has no initializer and is not definitely assigned in the constructor.\n    _tracked: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'setting' has no initializer and is not definitely assigned in the constructor.\n    setting: string;\n    track: (extraData?: any) => void;\n    trackApi: any;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'widgetID' has no initializer and is not definitely assigned in the constructor.\n    widgetID: string;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'widgetType' has no initializer and is not definitely assigned in the constructor.\n    widgetType: string;\n\n    constructor(\n        trackApi: any, // original apiOptions.trackInteraction\n        widgetType: string,\n        widgetID: string,\n        setting: \"\" | \"all\", // \"\" means track once\n    ) {\n        if (!trackApi) {\n            this.track = _noop;\n        } else {\n            this._tracked = false;\n            this.trackApi = trackApi;\n            this.widgetType = widgetType;\n            this.widgetID = widgetID;\n            this.setting = setting;\n            this.track = this._track;\n        }\n    }\n\n    /**\n     * Function that actually calls the API to mark the interaction. This is\n     * private. The public version is just `.track` and is bound to this object\n     * for easy use in other context.\n     *\n     * @param extraData Any extra data to track about the event.\n     * @private\n     */\n    _track: (extraData: unknown) => void = (extraData: unknown) => {\n        if (this._tracked && !this.setting) {\n            return;\n        }\n        this._tracked = true;\n        this.trackApi({\n            type: this.widgetType,\n            id: this.widgetID,\n            // @ts-expect-error [FEI-5003] - TS2698 - Spread types may only be created from object types.\n            ...extraData,\n        });\n    };\n}\n\nexport default InteractionTracker;\n","/**\n * Paragraph parsing/splitting for article jipt i18n\n */\n\nimport SimpleMarkdown from \"@khanacademy/simple-markdown\";\n\nimport type {ParserRules} from \"@khanacademy/simple-markdown\";\n\nconst arrayRules: ParserRules = {\n    fence: {\n        match: SimpleMarkdown.defaultRules.fence.match,\n        order: 1,\n        parse: (capture, state, parse) => ({\n            type: \"codeBlock\",\n            lang: capture[2] || undefined,\n            content: capture[3],\n        }),\n    },\n    paragraph: {\n        match: SimpleMarkdown.defaultRules.paragraph.match,\n        order: 2,\n        parse: (capture, state, parse) => ({\n            content: capture[1],\n        }),\n    },\n};\n\nconst builtArrayParser: ReturnType<typeof SimpleMarkdown.parserFor> =\n    SimpleMarkdown.parserFor(arrayRules);\n\n// This should just return an array of strings! magick!\nconst parseToArray = (source: string): Array<string> => {\n    // Remove any leading newlines to avoid splitting weirdness\n    // (simple-markdown has the `newline` rule for this, and i have\n    // no idea how this will handle leading newlines without that rule),\n    // and add \\n\\n to let it parse at a block/paragraph level\n    const paragraphedSource = source.replace(/^\\n\\s*\\n/, \"\") + \"\\n\\n\";\n    return builtArrayParser(paragraphedSource, {inline: false}).map((c) => {\n        return c[\"content\"];\n    });\n};\n\nconst joinFromArray = (paragraphs: ReadonlyArray<string>): string =>\n    paragraphs.join(\"\\n\\n\");\n\nexport default {\n    parseToArray: parseToArray,\n    joinFromArray: joinFromArray,\n};\n","import {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport * as constants from \"../styles/constants\";\n\nimport InlineIcon from \"./inline-icon\";\n\nconst exclamationIcon = {\n    path: \"M6 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-9a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1z\",\n    height: 12,\n    width: 12,\n} as const;\n\nenum Severity {\n    Error = 1,\n    Warning = 2,\n    Recommendation = 3,\n    OfflineReportingOnly = 4,\n}\n\ntype Props = {\n    // The children are the linty content we're highlighting\n    children: React.ReactNode;\n    // Inline lint is highlighted differently than block lint.\n    inline?: boolean;\n    // This is the text that appears in the tooltip\n    message: string;\n    // This is used as the fragment id (hash) in the URL of the link\n    ruleName: string;\n    // Lint warnings inside tables are handled specially\n    insideTable: boolean;\n    // Should lint highlighting be rendered as a block to the left of\n    // the lint instead of on the right gutter?\n    blockHighlight?: boolean;\n    // How important this lint message is for the editor. Severity goes\n    // from 1 (indicating an error) to 4 (offline reporting only)\n    severity?: Severity;\n};\n\ntype State = {\n    tooltipAbove: boolean;\n};\n\n/**\n * This component renders \"lint\" nodes in a markdown parse tree. Lint nodes\n * are inserted into the tree by the Perseus linter (see\n * perseus-linter/src/index).\n *\n * This component serves multiple purposes\n *\n * 1) It renders a small circle in the right margin to indicate that there\n * is lint on (or near) that line.\n *\n * 2) The area around the circle is hoverable: when the mouse moves over it\n * the linty content is highlighted and a tooltip is displayed that explains\n * what the problem is.\n *\n * 3) The hoverable area is also an HTML <a> tag. Clicking on it opens\n * a new tab and links to additional details about the specific lint rule.\n *\n * The CSS required to position the circles in the right margin is tricky\n * and it does not always work perfectly. When lint occurs on a block element\n * that has a right margin (like anything blockquoted) the circle will appear\n * to the left of where it belongs.  And if there is more\n **/\nclass Lint extends React.Component<Props, State> {\n    _positionTimeout: number | undefined;\n\n    state: State = {\n        tooltipAbove: true,\n    };\n\n    componentDidMount() {\n        // TODO(somewhatabstract): Use WB timing\n        // eslint-disable-next-line no-restricted-syntax\n        this._positionTimeout = window.setTimeout(this.getPosition);\n    }\n\n    componentWillUnmount() {\n        // TODO(somewhatabstract): Use WB timing\n        // eslint-disable-next-line no-restricted-syntax\n        window.clearTimeout(this._positionTimeout);\n    }\n\n    // We can't call setState in componentDidMount without risking a render\n    // thrash, and we can't call getBoundingClientRect in render, so we\n    // borrow a timeout approach from learnstorm-dashboard.jsx and set our\n    // state once the component has mounted and we can get what we need.\n    getPosition: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'getBoundingClientRect' does not exist on type 'Element | Text'.\n        const rect = ReactDOM.findDOMNode(this).getBoundingClientRect();\n        // TODO(scottgrant): This is a magic number! We don't know the size\n        // of the tooltip at this point, so we're arbitrarily choosing a\n        // point at which to flip the tooltip's position.\n        this.setState({tooltipAbove: rect.top > 100});\n    };\n\n    // Render the <a> element that holds the indicator icon and the tooltip\n    // We pass different styles for the inline and block cases\n    renderLink: (arg1: any) => React.ReactElement = (style) => {\n        const tooltipAbove = this.state.tooltipAbove;\n\n        let severityStyle;\n        let warningText;\n        let warningTextStyle;\n        if (this.props.severity === Severity.Error) {\n            severityStyle = styles.indicatorError;\n            warningText = \"Error\";\n            warningTextStyle = styles.publishBlockingError;\n        } else if (this.props.severity === Severity.Warning) {\n            severityStyle = styles.indicatorWarning;\n            warningText = \"Warning\";\n            warningTextStyle = styles.warning;\n        } else {\n            severityStyle = styles.indicatorGuideline;\n            warningText = \"Recommendation\";\n            warningTextStyle = styles.warning;\n        }\n\n        return (\n            <a\n                href={`https://khanacademy.org/r/linter-rules#${this.props.ruleName}`}\n                target=\"lint-help-window\"\n                className={css(style)}\n            >\n                <span className={css(styles.indicator, severityStyle)}>\n                    {this.props.severity === 1 && (\n                        <InlineIcon {...exclamationIcon} />\n                    )}\n                </span>\n                <div\n                    className={css(\n                        styles.tooltip,\n                        tooltipAbove && styles.tooltipAbove,\n                    )}\n                >\n                    {this.props.message.split(\"\\n\\n\").map((m, i) => (\n                        <p key={i} className={css(styles.tooltipParagraph)}>\n                            <span className={css(warningTextStyle)}>\n                                {warningText}:{\" \"}\n                            </span>\n                            {m}\n                        </p>\n                    ))}\n                    <div\n                        className={css(\n                            styles.tail,\n                            tooltipAbove && styles.tailAbove,\n                        )}\n                    />\n                </div>\n            </a>\n        );\n    };\n\n    // The main render method surrounds linty content with a block or\n    // inline container and the link element that displays the indicator\n    // and holds the tooltip.\n    render(): React.ReactNode {\n        const {children, inline, blockHighlight, insideTable} = this.props;\n\n        if (insideTable) {\n            // If we're inside a table, then linty nodes just get\n            // a simple wrapper that allows them to be highlighted\n            if (inline) {\n                return <span data-lint-inside-table=\"true\">{children}</span>;\n            }\n            return <div data-lint-inside-table=\"true\">{children}</div>;\n        }\n        if (blockHighlight) {\n            return (\n                <span\n                    className={css(\n                        styles.lintContainer,\n                        styles.lintContainerBlock,\n                    )}\n                >\n                    {this.renderLink(styles.radioWidgetHoverTarget)}\n                    <span>{children}</span>\n                </span>\n            );\n        }\n        if (inline) {\n            return (\n                <span className={css(styles.lintContainer)}>\n                    {this.renderLink(styles.inlineHoverTarget)}\n                    <span>{children}</span>\n                </span>\n            );\n        }\n        return (\n            <div className={css(styles.lintContainer)}>\n                {this.renderLink(styles.hoverTarget)}\n                <div>{children}</div>\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    // This is the class of the outermost element.\n    // We use relative positioning so that the lint indicator can be\n    // positioned absolutely relative to the position of the linty container.\n    lintContainer: {\n        position: \"relative\",\n    },\n\n    // Some elements that might be inline with bad parent styling are treated\n    // as block elements so they render and are visible.\n    lintContainerBlock: {\n        display: \"block\",\n    },\n\n    // This is the main class for block lint. It is applied to the link element\n    // that is also the hover target.\n    hoverTarget: {\n        // Absolute positioning relative to the lintContainer element\n        position: \"absolute\",\n        // Top of the hover target is aligned with the top of the linty block\n        top: 0,\n\n        // We want the hover target in the right margin. It is 24px wide, but\n        // we have to offset it another 16px because of margins in the\n        // Perseus content. I'm not sure where the 16px margin is set\n        // so if that changes, this number will also have to be changed.\n        // This is the part of the CSS that doesn't work right when\n        // applied to things like blockquotes that have different right\n        // margins.\n        right: -40,\n\n        // The hover target is a 24x24 block element.\n        display: \"block\",\n        width: 24,\n        height: 24,\n\n        // The indicator is in a span inside the hover target.\n        // This style changes its color on hover\n        \":hover > span\": {\n            backgroundColor: constants.warningColorHover,\n        },\n\n        // The tooltip is in a div element inside the hover target.\n        // This style displays it on hover\n        \":hover div\": {\n            display: \"block\",\n        },\n\n        // The linty content is in a <div> sibling that follows the\n        // hover target. This style highlights it on hover. We do an outline\n        // rather than a border so we don't affect the layout. We could also\n        // set the background color, but we don't because we can't reliably\n        // set the text color of this block element. We could use\n        // filter: invert(100%) if we want more visual change on hover here.\n        \":hover ~ div\": {\n            outline: \"1px solid \" + constants.warningColor,\n        },\n\n        // If the div sibling is a table, then we may be displaying\n        // lint warnings about errors inside that table. In that case\n        // we want to highlight any linty descendants of the table\n        \":hover ~ div div[data-lint-inside-table]\": {\n            outline: \"1px solid \" + constants.warningColor,\n        },\n\n        \":hover ~ div span[data-lint-inside-table]\": {\n            backgroundColor: constants.warningColor,\n            color: constants.white,\n        },\n    },\n\n    // This is how we position the hover target for inline lint.\n    inlineHoverTarget: {\n        // For inline lint we position the hover target with a float:right\n        // We can't use absolute positioning as we do in the block case\n        // because the horizontal position is not predictable in the\n        // inline case.\n        float: \"right\",\n\n        // We still have to make the hover target relative so that the\n        // tooltip can be positioned relative to it.\n        position: \"relative\",\n\n        // See the comment above about the extra 16px of offset needed here.\n        marginRight: -40,\n\n        // The hover target is a 24x24 block. Same as the block case\n        display: \"block\",\n        width: 24,\n        height: 24,\n\n        // The indicator is in a span inside the hover target.\n        // This style changes its color on hover.\n        // This is the same as the block case.\n        \":hover > span\": {\n            backgroundColor: constants.warningColorHover,\n        },\n\n        // The tooltip is in a div element inside the hover target.\n        // This style displays it on hover. This is the same as the block case.\n        \":hover div\": {\n            display: \"block\",\n        },\n\n        // The linty content is in a <span> sibling that follows the\n        // hover target. This style highlights it on hover. In this case\n        // we can just set the foreground and background color to really\n        // draw attention to the linty content.\n        \":hover ~ span\": {\n            backgroundColor: constants.warningColor,\n            color: constants.white,\n        },\n    },\n\n    radioWidgetHoverTarget: {\n        // These lint targets appear in radio checkboxes, and are not able to\n        // position a lint icon in the right-most gutter thanks to a parent\n        // overflow rule. We position these icons to the left of the block\n        // where there is some room.\n        position: \"absolute\",\n        left: -40,\n\n        // The hover target is a 24x24 block. Same as the block case\n        display: \"block\",\n        width: 24,\n        height: 24,\n\n        // By specifying a fixed minimum width, the tooltip will hover in a\n        // readable position above and to the right.\n        minWidth: 264,\n\n        // The indicator is in a span inside the hover target.\n        // This style changes its color on hover.\n        // This is the same as the block case.\n        \":hover > span\": {\n            backgroundColor: constants.warningColorHover,\n        },\n\n        // The tooltip is in a div element inside the hover target.\n        // This style displays it on hover. This is the same as the block case.\n        // We specify a fixed-width because of some parent styling.\n        \":hover > div\": {\n            display: \"block\",\n            padding: 8,\n            width: 280,\n        },\n\n        // Move the tooltip tail to an appropriate position relative to the\n        // tooltip.\n        \":hover > div > div\": {\n            left: 8,\n        },\n\n        // The linty content is in a <span> sibling that follows the\n        // hover target. This style highlights it on hover. In this case\n        // we can just set the foreground and background color to really\n        // draw attention to the linty content.\n        \":hover ~ span\": {\n            backgroundColor: constants.warningColor,\n            color: constants.white,\n        },\n    },\n\n    // This is the class for the lint indicator in the margin.\n    indicator: {\n        alignItems: \"center\",\n        borderRadius: 4,\n        color: \"white\",\n        display: \"flex\",\n        fontSize: 12,\n        height: 8,\n        justifyContent: \"center\",\n        margin: 8,\n        width: 8,\n    },\n    indicatorError: {\n        backgroundColor: \"#be2612\",\n        borderRadius: 8,\n        height: 16,\n        width: 16,\n    },\n    indicatorWarning: {\n        backgroundColor: \"#f86700\",\n    },\n    indicatorGuideline: {\n        backgroundColor: \"#ffbe26\",\n    },\n\n    // These are the styles for the tooltip\n    tooltip: {\n        // Absolute positioning relative to the lint indicator circle.\n        position: \"absolute\",\n        right: -12,\n\n        // The tooltip is hidden by default; only displayed on hover\n        display: \"none\",\n\n        // When it is displayed, it goes on top!\n        zIndex: 1000,\n\n        // These styles control what the tooltip looks like\n        color: constants.white,\n        backgroundColor: constants.gray17,\n        opacity: 0.9,\n        fontFamily: constants.baseFontFamily,\n        fontSize: \"12px\",\n        lineHeight: \"15px\",\n        width: \"320px\",\n        borderRadius: \"4px\",\n    },\n    // If we're going to render the tooltip above the warning circle, we use\n    // the previous rules in tooltip, but change the position slightly.\n    tooltipAbove: {\n        bottom: 32,\n    },\n\n    // We give the tooltip a little triangular \"tail\" that points down at\n    // the lint indicator circle. This is inside the tooltip and positioned\n    // relative to it. It also shares the opacity of the tooltip. We're using\n    // the standard CSS trick for drawing triangles with a thick border.\n    tail: {\n        position: \"absolute\",\n        top: -12,\n        right: 16,\n        width: 0,\n        height: 0,\n\n        // This is the CSS triangle trick\n        borderLeft: \"8px solid transparent\",\n        borderRight: \"8px solid transparent\",\n        borderBottom: \"12px solid \" + constants.gray17,\n    },\n    tailAbove: {\n        bottom: -12,\n        borderBottom: \"none\",\n        borderTop: \"12px solid \" + constants.gray17,\n        top: \"auto\",\n    },\n\n    // Each warning in the tooltip is its own <p>. They are 12 pixels from\n    // the edges of the tooltip and 12 pixels from each other.\n    tooltipParagraph: {\n        margin: 12,\n    },\n\n    // The text \"Warning\" inside the tooltip is highlighted like this\n    warning: {\n        color: constants.warningColor,\n        fontFamily: constants.boldFontFamily,\n    },\n\n    // The text \"Publish-blocking error\" instide the tooltip is highlighted\n    // like this\n    publishBlockingError: {\n        color: constants.publishBlockingErrorColor,\n    },\n});\n\nexport default Lint;\n","/* eslint-disable no-useless-escape, no-prototype-builtins */\nimport {pureMarkdownRules} from \"@khanacademy/pure-markdown\";\nimport SimpleMarkdown from \"@khanacademy/simple-markdown\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport Lint from \"./components/lint\";\nimport {getDependencies} from \"./dependencies\";\n\nconst rules = {\n    ...pureMarkdownRules,\n\n    // NOTE: basically ignored by JIPT. wraps everything at the outer layer\n    columns: {\n        ...pureMarkdownRules.columns,\n        react: (node, output, state) => {\n            return (\n                <div className=\"perseus-two-columns\" key={state.key}>\n                    <div className=\"perseus-column\">\n                        <div className=\"perseus-column-content\">\n                            {output(node.col1, state)}\n                        </div>\n                    </div>\n                    <div className=\"perseus-column\">\n                        <div className=\"perseus-column-content\">\n                            {output(node.col2, state)}\n                        </div>\n                    </div>\n                </div>\n            );\n        },\n    },\n    // Match paragraphs consisting solely of crowdin IDs\n    // (they look roughly like crwdns9238932:0), which means that\n    // crowdin is going to take the DOM node that ID is rendered into\n    // and count it as the top-level translation node. They mutate this\n    // node, so we need to make sure it is an outer node, not an inner\n    // span. So here we parse this separately and just output the\n    // raw string, which becomes the body of the <QuestionParagraph>\n    // created by the Renderer.\n    // This currently (2015-09-01) affects only articles, since\n    // for exercises the renderer just renders the crowdin id to the\n    // renderer div.\n    crowdinId: {\n        ...pureMarkdownRules.crowdinId,\n        react: (node, output, state) => node.id,\n    },\n    // Ensure that the table is focusable in sequential keyboard navigation\n    // when rendered on mobile in a modal. Specifically this is needed for\n    // Android Talkback, to enable reading/navigating tables with the swipe\n    // left/right gesture. Note, setting `tabindex` doesn't appear required for\n    // iOS 14.4, in order for VoiceOver to work.\n    table: {\n        ...pureMarkdownRules.table,\n        react: function (node, output, state) {\n            const table = SimpleMarkdown.defaultRules.table.react(\n                node,\n                output,\n                state,\n            );\n\n            if (!state.isMobile) {\n                return table;\n            }\n\n            return React.cloneElement(table, {tabIndex: 0});\n        },\n    },\n    // This is pretty much horrible, but we have a regex here to capture an\n    // entire table + a title. capture[1] is the title. capture[2] of the\n    // regex is a copy of the simple-markdown nptable regex. Then we turn\n    // our capture[2] into tableCapture[0], and any further captures in\n    // our table regex into tableCapture[1..], and we pass tableCapture to\n    // our nptable regex\n    titledTable: {\n        ...pureMarkdownRules.titledTable,\n        react: (node, output, state) => {\n            let contents;\n            if (!node.table) {\n                contents = \"//invalid table//\";\n            } else if (node.table.type === \"lint\") {\n                // The `table` in this node is actually a `lint` node,\n                // not the expected `table` node. This is due to the linter\n                // implementation \"reparenting\" the `table` node, see\n                // perseus-linter/src/index.js\n                if (node.table.content?.type === \"table\") {\n                    // And the `content` of this lint node is the `table` node\n                    // which we actually want to render. Thus, we perform\n                    // surgery on the node to form the desired shape, so that\n                    // we can render a `lint` node which will then recursively\n                    // render the correctly shaped `titledTable` node.\n                    contents = rules.lint.react(\n                        {\n                            ...node.table,\n                            content: {\n                                ...node,\n                                table: node.table.content,\n                            },\n                        },\n                        output,\n                        {\n                            ...state,\n                            // Recursively render the `titledTable` node without\n                            // the wrapper div, as we'll be wrapping `contents`\n                            // ourselves below.\n                            unwrapTitledTableContents: true,\n                        },\n                    );\n                } else {\n                    // We know `node.table` is actually a `lint` node, but we\n                    // don't know how to handle its `content`. Let the lint\n                    // node renderer figure it out.\n                    contents = rules.lint.react(node.table, output, state);\n                }\n            } else {\n                const tableOutput = SimpleMarkdown.defaultRules.table.react(\n                    node.table,\n                    output,\n                    state,\n                );\n\n                const caption = (\n                    <caption key=\"caption\" className=\"perseus-table-title\">\n                        {output(node.title, state)}\n                    </caption>\n                );\n\n                // Splice the caption into the table's children with the\n                // caption as the first child.\n                // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                contents = React.cloneElement(tableOutput, null, [\n                    caption,\n                    ...tableOutput.props.children,\n                ]);\n            }\n\n            if (state.unwrapTitledTableContents) {\n                return contents;\n            }\n\n            // Note: if the DOM structure changes, edit the Zoomable wrapper\n            // in src/renderer.jsx.\n            return (\n                <div className=\"perseus-titled-table\" key={state.key}>\n                    {contents}\n                </div>\n            );\n        },\n    },\n    widget: {\n        ...pureMarkdownRules.widget,\n        react: (node, output, state) => {\n            // The actual output is handled in the renderer, where\n            // we know the current widget props/state. This is\n            // just a stub for testing.\n            return (\n                <em key={state.key}>\n                    {/* @ts-expect-error [FEI-5003] - TS2554 - Expected 1-2 arguments, but got 3. */}\n                    {i18n.doNotTranslate(\"[Widget: \", node.id, \"]\")}\n                </em>\n            );\n        },\n    },\n    blockMath: {\n        ...pureMarkdownRules.blockMath,\n        react: (node, output, state) => {\n            const {TeX} = getDependencies();\n            // The actual output is handled in the renderer, because\n            // it needs to pass in an `onRender` callback prop. This\n            // is just a stub for testing.\n            return <TeX key={state.key}>{node.content}</TeX>;\n        },\n    },\n    math: {\n        ...pureMarkdownRules.math,\n        react: (node, output, state) => {\n            const {TeX} = getDependencies();\n            // The actual output is handled in the renderer, because\n            // it needs to pass in an `onRender` callback prop. This\n            // is just a stub for testing.\n            return <TeX key={state.key}>{node.content}</TeX>;\n        },\n    },\n    unescapedDollar: {\n        ...pureMarkdownRules.unescapedDollar,\n        react: (node, output, state) => {\n            // Unescaped dollar signs render correctly, but result in\n            // untranslatable text after the i18n python linter flags it\n            return \"$\";\n        },\n    },\n    // Extend the SimpleMarkdown link parser to make the link open in a new\n    // window and handle reverse tabnapping phishing attacks\n    link: {\n        ...pureMarkdownRules.link,\n        react: function (node, output, state) {\n            const link = SimpleMarkdown.defaultRules.link.react(\n                node,\n                output,\n                state,\n            );\n\n            const href = link.props.href;\n            let rel = null;\n            // The href prop should always be here, but just in case somehow the article's\n            // link was not put together properly, let's make sure it's there so we\n            // don't break the entire page.\n            const isKAUrl = href\n                ? href.match(/https?:\\/\\/[^\\/]*khanacademy.org|^\\//)\n                : false;\n            if (!isKAUrl) {\n                // Prevents \"reverse tabnabbing\" phishing attacks\n                // @ts-expect-error [FEI-5003] - TS2322 - Type '\"noopener noreferrer\"' is not assignable to type 'null'.\n                rel = \"noopener noreferrer\";\n            }\n\n            const newProps = {\n                ...link.props,\n                target: \"_blank\",\n                href,\n                rel,\n            } as const;\n\n            if (state.baseElements && state.baseElements.Link) {\n                return state.baseElements.Link(newProps);\n            }\n            return React.cloneElement(link, newProps);\n        },\n    },\n    codeBlock: {\n        ...pureMarkdownRules.codeBlock,\n        react: (node, output, state) => {\n            // ideally this should be a different rule, with only an\n            // output function, but right now that breaks the parser.\n            if (node.lang === \"alt\") {\n                return (\n                    <div\n                        key={state.key}\n                        className=\"perseus-markdown-alt perseus-sr-only\"\n                    >\n                        {output(node.content, state)}\n                    </div>\n                );\n            }\n            return SimpleMarkdown.defaultRules.codeBlock.react(\n                node,\n                output,\n                state,\n            );\n        },\n    },\n    // The lint rule never actually matches anything.\n    // We check for lint after parsing, and, if we find any, we\n    // transform the tree to add lint nodes. This rule is here\n    // just for the react() function\n    lint: {\n        ...pureMarkdownRules.lint,\n        react: (node, output, state) => {\n            return (\n                <Lint\n                    message={node.message}\n                    ruleName={node.ruleName}\n                    inline={isInline(node.content)}\n                    blockHighlight={node.blockHighlight}\n                    insideTable={node.insideTable}\n                    severity={node.severity}\n                >\n                    {output(node.content, state)}\n                </Lint>\n            );\n        },\n    },\n} as const;\n\n// Return true if the specified parse tree node represents inline content\n// and false otherwise. We need this so that lint nodes can figure out whether\n// they should behave as an inline wrapper or a block wrapper\nfunction isInline(node: any) {\n    // eslint-disable-next-line no-prototype-builtins\n    return !!(node && node.type && inlineNodeTypes.hasOwnProperty(node.type));\n}\nconst inlineNodeTypes = {\n    text: true,\n    math: true,\n    unescapedDollar: true,\n    link: true,\n    img: true,\n    strong: true,\n    u: true,\n    em: true,\n    del: true,\n    code: true,\n} as const;\n\n// @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ readonly columns: { readonly react: (node: any, output: any, state: any) => Element; readonly order: -2; readonly match: any; readonly parse: (capture: any, parse: any, state: any) => any; }; ... 35 more ...; readonly text: TextInOutRule; }' is not assignable to parameter of type 'ParserRules'.\nconst builtParser = SimpleMarkdown.parserFor(rules);\nconst parse = (source: string, state: any): any => {\n    const paragraphedSource = source + \"\\n\\n\";\n\n    return builtParser(paragraphedSource, {\n        ...state,\n        inline: false,\n    });\n};\nconst inlineParser = (source: string, state: any): any => {\n    return builtParser(source, {\n        ...state,\n        inline: true,\n    });\n};\n\n/**\n * Traverse all of the nodes in the Perseus Markdown AST. The callback is\n * called for each node in the AST.\n */\nconst traverseContent = (ast: any, cb: (arg1: any) => unknown) => {\n    if (_.isArray(ast)) {\n        _.each(ast, (node) => traverseContent(node, cb));\n    } else if (_.isObject(ast)) {\n        cb(ast);\n        if (ast.type === \"table\") {\n            traverseContent(ast.header, cb);\n            traverseContent(ast.cells, cb);\n        } else if (ast.type === \"list\") {\n            traverseContent(ast.items, cb);\n        } else if (ast.type === \"titledTable\") {\n            traverseContent(ast.table, cb);\n        } else if (ast.type === \"columns\") {\n            traverseContent(ast.col1, cb);\n            traverseContent(ast.col2, cb);\n        } else if (_.isArray(ast.content)) {\n            traverseContent(ast.content, cb);\n        }\n    }\n};\n\n/**\n * Pull out text content from a Perseus Markdown AST.\n * Returns an array of strings.\n */\nconst getContent = (ast: any) => {\n    // Simplify logic by dealing with a single AST node at a time\n    if (_.isArray(ast)) {\n        return _.flatten(_.map(ast, getContent));\n    }\n\n    // Base case: This is where we actually extract text content\n    if (ast.content && _.isString(ast.content)) {\n        // Collapse whitespace within content unless it is code\n        if (ast.type.toLowerCase().indexOf(\"code\") !== -1) {\n            // In case this is the sole child of a paragraph,\n            // prevent whitespace from being trimmed later\n            return [\"\", ast.content, \"\"];\n        }\n        return [ast.content.replace(/\\s+/g, \" \")];\n    }\n\n    // Recurse through child AST nodes\n    // Assumptions made:\n    // 1) Child AST nodes are either direct properties or inside\n    //    arbitrarily nested lists that are direct properties.\n    // 2) Only AST nodes have a 'type' property.\n    const children = _.chain(ast)\n        .values()\n        .flatten()\n        .filter((object) => object != null && _.has(object, \"type\"))\n        .value();\n\n    if (!children.length) {\n        return [];\n    }\n    const nestedContent = getContent(children);\n    if (ast.type === \"paragraph\" && nestedContent.length) {\n        // Trim whitespace before or after a paragraph\n        nestedContent[0] = nestedContent[0].replace(/^\\s+/, \"\");\n        const last = nestedContent.length - 1;\n        nestedContent[last] = nestedContent[last].replace(/\\s+$/, \"\");\n    }\n    return nestedContent;\n};\n\n/**\n * Count the number of characters in Perseus Markdown source.\n * Markdown markup and widget references are ignored.\n */\nconst characterCount = (source: string): number => {\n    // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n    const ast = parse(source);\n    const content = getContent(ast).join(\"\");\n    return content.length;\n};\n\nexport default {\n    characterCount: characterCount,\n    traverseContent: traverseContent,\n    parse: parse,\n    parseInline: inlineParser,\n    reactFor: SimpleMarkdown.reactFor,\n    ruleOutput: SimpleMarkdown.ruleOutput(rules, \"react\") as any,\n    basicOutput: SimpleMarkdown.reactFor(\n        SimpleMarkdown.ruleOutput(rules, \"react\"),\n    ) as any,\n    sanitizeUrl: SimpleMarkdown.sanitizeUrl,\n};\n","import * as React from \"react\";\n\ntype Props = {\n    className?: string | null | undefined;\n    translationIndex: number;\n    paragraphIndex?: number;\n    children?: React.ReactNode;\n};\n\nclass QuestionParagraph extends React.Component<Props> {\n    render(): React.ReactNode {\n        const className = this.props.className\n            ? \"paragraph \" + this.props.className\n            : \"paragraph\";\n        // For perseus-article just-in-place-translation (jipt), we need\n        // to attach some metadata to top-level QuestionParagraphs:\n        return (\n            <div\n                className={className}\n                data-perseus-component-index={this.props.translationIndex}\n                data-perseus-paragraph-index={this.props.paragraphIndex}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default QuestionParagraph;\n","import {Rule} from \"@khanacademy/perseus-linter\";\nimport {debounce} from \"underscore\";\n\n/**\n * TranslationLinter asynchronously calls Khan Academy's poentry linter.\n *\n * The poentry linter checks for issues that prevent content from being\n * translated. This linter is KA-specific and so TranslationLinter does not do\n * anything in non-KA environments.\n */\n\ndeclare const KA: any;\n\n// A LintCB is called once the linter has been run.\ntype LintCB = (errors: ReadonlyArray<string>) => void;\n\n// msec to wait before we actually call the linter after receiving the\n// last call. The timer is reset if the lint is called during the wait.\nconst DEBOUNCE_TIMEOUT = 1000;\n\nexport default class TranslationLinter {\n    // To avoid linting when nothing has changed.\n    previousContent: string | null | undefined = null;\n\n    /**\n     * Runs the poentry linter on the given perseus string asynchronously.\n     *\n     * It doesn't do anything unless we're in a KA environment.\n     *\n     * onLintErrorsGenerated is called even if there are no errors. It is not\n     * called if perseusStr is unchanged from the last call.\n     *\n     * Linting is relatively expensive -- so we debounce linting each instance\n     * for some amount of time.\n     */\n    runLinter: any = debounce(\n        (perseusStr: string, onLintErrorsGenerated: LintCB) => {\n            // TODO(FEI-5003): Do we still need to check for 'KA'?\n            if (typeof KA === \"undefined\") {\n                return;\n            }\n\n            if (perseusStr === this.previousContent) {\n                return;\n            }\n\n            this.previousContent = perseusStr;\n\n            if (perseusStr === \"\") {\n                onLintErrorsGenerated([]);\n                return;\n            }\n\n            fetch(\"/api/internal/translations/lint_poentry?preview=1&lang=en\", {\n                headers: {\"Content-Type\": \"application/json\"},\n                body: JSON.stringify({\n                    // The poentry linter verifies that the translation from\n                    // the original text to the translated text is sane. We\n                    // want to ensure that the translation from English to\n                    // English is sane, so msgid === mstr.\n                    msgid: perseusStr, // msgid is the original text\n                    msgstr: perseusStr, // msgstr is the translated text\n                    format: \"perseus_text\",\n                    filename: \"\",\n                }),\n                method: \"POST\",\n            })\n                .then(\n                    (response) => {\n                        if (response.status >= 400) {\n                            return {\n                                status: \"error\",\n                                message: \"Could not run i18n linter.\",\n                            };\n                        }\n                        return response.json();\n                    },\n                    (rejection) => {\n                        return {\n                            status: \"error\",\n                            message: \"Could not run i18n linter.\",\n                        };\n                    },\n                )\n                .then((json) => {\n                    if (json.status === \"error\") {\n                        onLintErrorsGenerated([\n                            \"Some part of this text makes it untranslatable. \" +\n                                \"The specific message from the i18n linter was: \" +\n                                json.message.replace(/\\n/g, \" \"),\n                        ]);\n                    } else {\n                        onLintErrorsGenerated([]);\n                    }\n                });\n        },\n        DEBOUNCE_TIMEOUT,\n    );\n\n    /**\n     * Applies an array of errors generated by linters without position\n     * information (TranslationLinter and the legacy getSaveWarnings()) to the\n     * top of a Perseus tree.\n     */\n    applyLintErrors(\n        parsedMarkdown: any,\n        translationLintErrors: ReadonlyArray<string>,\n    ) {\n        // These lint errors do not have position data associated with\n        // them, so we just plop them at the top.\n        if (translationLintErrors.length) {\n            const errorText = translationLintErrors.join(\"\\n\\n\");\n            parsedMarkdown.unshift({\n                content: {\n                    type: \"text\",\n                    content: \"\",\n                },\n                insideTable: false,\n                message: errorText,\n                ruleName: \"legacy-error\",\n                severity: Rule.Severity.ERROR,\n                type: \"lint\",\n            });\n        }\n    }\n}\n","/**\n * Preprocess TeX code to convert things that KaTeX doesn't know how to handle\n * to things is does.\n */\n\nexport default (texCode: string): string =>\n    texCode\n        // Replace uses of \\begin{align}...\\end{align} which KaTeX doesn't\n        // support (yet) with \\begin{aligned}...\\end{aligned} which renders\n        // the same is supported by KaTeX.  It does the same for align*.\n        // TODO(kevinb) update content to use aligned instead of align.\n        .replace(/\\{align[*]?\\}/g, \"{aligned}\")\n        // Replace non-breaking spaces with regular spaces.\n        .replace(/[\\u00a0]/g, \" \");\n","import * as constants from \"../styles/constants\";\n\nconst {interactiveSizes} = constants;\n\n// Note: these size cutoffs represent content-width cutoffs as specified in\n// http://zpl.io/1mVmvU (broken link - we no longer use Zeplin)\n// TODO(benkomalo): these values aren't used in JS outside of this file, but\n// are coupled to the values in styles/articles.less - DRY it up at some point\nconst smMax = constants.articleMaxWidthTableInPx;\nconst mdMax = constants.articleMaxWidthInPx;\n\nexport const containerSizeClass = {\n    SMALL: \"small\" as const,\n    MEDIUM: \"medium\" as const,\n    LARGE: \"large\" as const,\n    XLARGE: \"xlarge\" as const,\n} as const;\n\nexport type SizeClass =\n    typeof containerSizeClass[keyof typeof containerSizeClass];\n\nexport const getClassFromWidth = (width: number): SizeClass => {\n    if (!width) {\n        return containerSizeClass.MEDIUM;\n    }\n\n    if (width <= smMax) {\n        return containerSizeClass.SMALL;\n    }\n    if (width <= mdMax) {\n        return containerSizeClass.MEDIUM;\n    }\n    return containerSizeClass.LARGE;\n};\n\nexport const getInteractiveBoxFromSizeClass = (\n    sizeClass: SizeClass,\n): [number, number] => {\n    if (sizeClass === containerSizeClass.SMALL) {\n        return [\n            interactiveSizes.defaultBoxSizeSmall,\n            interactiveSizes.defaultBoxSizeSmall,\n        ];\n    }\n    return [interactiveSizes.defaultBoxSize, interactiveSizes.defaultBoxSize];\n};\n","import * as React from \"react\";\nimport _ from \"underscore\";\n\nimport {Errors, Log} from \"./logging/log\";\nimport {PerseusError} from \"./perseus-error\";\n\nimport type {\n    Alignment,\n    Tracking,\n    Version,\n    WidgetExports,\n    WidgetInfo,\n    WidgetTransform,\n} from \"./types\";\n\nconst DEFAULT_ALIGNMENT = \"block\";\n// NOTE(kevinb): \"default\" is not one in `validAlignments`.\nconst DEFAULT_SUPPORTED_ALIGNMENTS = [\"default\"];\nconst DEFAULT_STATIC = false;\nconst DEFAULT_TRACKING = \"\";\nconst DEFAULT_LINTABLE = false;\n\ntype Editor = any;\n\nconst widgets: {\n    [key: string]: WidgetExports;\n} = {};\nconst editors: Record<string, any> = {};\n\n// Widgets must be registered to avoid circular dependencies with the\n// core Editor and Renderer components.\n// TODO(jeremy): The widget name is already embedded in the WidgetExports type\n// so could we drop the `name` parameter here?\nexport const registerWidget = (name: string, widget: WidgetExports) => {\n    widgets[name] = widget;\n};\n\nexport const registerWidgets = (widgets: ReadonlyArray<WidgetExports>) => {\n    widgets.forEach((widget) => {\n        registerWidget(widget.name, widget);\n    });\n\n    validateAlignments();\n};\n\nexport const registerEditors = (editorsToRegister: ReadonlyArray<Editor>) => {\n    editorsToRegister.forEach((editor) => {\n        if (!editor.widgetName) {\n            throw new PerseusError(\n                `Editor ${editor.displayName} doesn't have a widgetName property`,\n                Errors.Internal,\n            );\n        }\n        editors[editor.widgetName] = editor;\n    });\n};\n\nexport const getWidget = (\n    name: string,\n): React.ComponentType<any> | null | undefined => {\n    // TODO(alex): Consider referring to these as renderers to avoid\n    // overloading \"widget\"\n    if (!_.has(widgets, name)) {\n        return null;\n    }\n\n    // Allow widgets to specify a widget directly or via a function\n    if (widgets[name].getWidget) {\n        // @ts-expect-error [FEI-5003] - TS2722 - Cannot invoke an object which is possibly 'undefined'.\n        return widgets[name].getWidget();\n    }\n    return widgets[name].widget;\n};\n\nexport const getEditor = (name: string): Editor | null | undefined => {\n    return _.has(editors, name) ? editors[name] : null;\n};\n\nexport const getTransform = (\n    name: string,\n): WidgetTransform | null | undefined => {\n    return _.has(widgets, name) ? widgets[name].transform || _.identity : null;\n};\n\nexport const getVersion = (name: string): Version | null | undefined => {\n    const widgetInfo = widgets[name];\n    if (widgetInfo) {\n        return widgets[name].version || {major: 0, minor: 0};\n    }\n    return null;\n};\n\nexport const getVersionVector = (): {\n    [key: string]: Version;\n} => {\n    const version: Record<string, any> = {};\n    _.each(_.keys(widgets), function (name) {\n        version[name] = getVersion(name);\n    });\n    return version;\n};\n\nexport const getPublicWidgets = (): ReadonlyArray<WidgetExports> => {\n    // TODO(alex): Update underscore.js so that _.pick can take a function.\n    // @ts-expect-error [FEI-5003] - TS2740 - Type 'Pick<{ [key: string]: Readonly<{ name: string; displayName: string; getWidget?: (() => ComponentType<any>) | undefined; accessible?: boolean | ((props: any) => boolean) | undefined; hidden?: boolean | undefined; ... 10 more ...; widget: ComponentType<...>; }>; }, string>' is missing the following properties from type 'readonly Readonly<{ name: string; displayName: string; getWidget?: (() => ComponentType<any>) | undefined; accessible?: boolean | ((props: any) => boolean) | undefined; hidden?: boolean | undefined; ... 10 more ...; widget: ComponentType<...>; }>[]': length, concat, join, slice, and 18 more.\n    return _.pick(\n        widgets,\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(name: string) => boolean | undefined' is not assignable to parameter of type 'Iteratee<string[], boolean, string>'.\n        _.reject(_.keys(widgets), function (name) {\n            return widgets[name].hidden;\n        }),\n    );\n};\n\nexport const isAccessible = (widgetInfo: WidgetInfo): boolean => {\n    const accessible = widgets[widgetInfo.type].accessible;\n    if (typeof accessible === \"function\") {\n        return accessible(widgetInfo.options);\n    }\n    return !!accessible;\n};\n\nexport const getAllWidgetTypes = (): ReadonlyArray<string> => {\n    return _.keys(widgets);\n};\n\nexport const upgradeWidgetInfoToLatestVersion = (\n    oldWidgetInfo: WidgetInfo,\n): WidgetInfo => {\n    const type = oldWidgetInfo.type;\n    // TODO(LP-10707): Remove unnecessary type checking (`type` is a string)\n    if (!_.isString(type)) {\n        throw new PerseusError(\n            \"widget type must be a string, but was: \" + type,\n            Errors.Internal,\n        );\n    }\n    const widgetExports = widgets[type];\n\n    if (widgetExports == null) {\n        // If we have a widget that isn't registered, we can't upgrade it\n        // TODO(aria): Figure out what the best thing to do here would be\n        return oldWidgetInfo;\n    }\n\n    // Unversioned widgets (pre-July 2014) are all implicitly 0.0\n    const initialVersion = oldWidgetInfo.version || {major: 0, minor: 0};\n    const latestVersion = widgetExports.version || {major: 0, minor: 0};\n\n    // If the widget version is later than what we understand (major\n    // version is higher than latest, or major versions are equal and minor\n    // version is higher than latest), don't perform any upgrades.\n    if (\n        initialVersion.major > latestVersion.major ||\n        (initialVersion.major === latestVersion.major &&\n            initialVersion.minor > latestVersion.minor)\n    ) {\n        return oldWidgetInfo;\n    }\n\n    // We do a clone here so that it's safe to mutate the input parameter\n    // in propUpgrades functions (which I will probably accidentally do at\n    // some point, and we would like to not break when that happens).\n    let newEditorProps = _.clone(oldWidgetInfo.options) || {};\n\n    const upgradePropsMap = widgetExports.propUpgrades || {};\n\n    // Empty props usually mean a newly created widget by the editor,\n    // and are always considerered up-to-date.\n    // Mostly, we'd rather not run upgrade functions on props that are\n    // not complete.\n    if (_.keys(newEditorProps).length !== 0) {\n        // We loop through all the versions after the current version of\n        // the loaded widget, up to and including the latest version of the\n        // loaded widget, and run the upgrade function to bring our loaded\n        // widget's props up to that version.\n        // There is a little subtlety here in that we call\n        // upgradePropsMap[1] to upgrade *to* version 1,\n        // (not from version 1).\n        for (\n            let nextVersion = initialVersion.major + 1;\n            nextVersion <= latestVersion.major;\n            nextVersion++\n        ) {\n            if (upgradePropsMap[String(nextVersion)]) {\n                newEditorProps =\n                    upgradePropsMap[String(nextVersion)](newEditorProps);\n            } else {\n                // This is a Log.error because it is unlikely to be hit in\n                // local testing, and a Log.error is slightly less scary in\n                // prod than a `throw new Error`\n                Log.error(\n                    \"No upgrade found for widget. Cannot render.\",\n                    Errors.Internal,\n                    {\n                        loggedMetadata: {\n                            type,\n                            fromMajorVersion: nextVersion - 1,\n                            toMajorVersion: nextVersion,\n                        },\n                    },\n                );\n                // But try to keep going anyways (yolo!)\n                // (Throwing an error here would just break the page\n                // silently anyways, so that doesn't seem much better\n                // than a halfhearted attempt to continue, however\n                // shallow...)\n            }\n        }\n    }\n\n    // Minor version upgrades (eg. new optional props) don't have\n    // transform functions. Instead, we fill in the new props with their\n    // defaults.\n    const defaultProps = type in editors ? editors[type].defaultProps : {};\n    newEditorProps = {\n        ...defaultProps,\n        ...newEditorProps,\n    };\n\n    let alignment = oldWidgetInfo.alignment;\n\n    // Widgets that support multiple alignments will \"lock in\" the\n    // alignment to the alignment that would be listed first in the\n    // select box. If the widget only supports one alignment, the\n    // alignment value will likely just end up as \"default\".\n    if (alignment == null || alignment === \"default\") {\n        alignment = getSupportedAlignments(type)[0];\n    }\n\n    let widgetStatic = oldWidgetInfo.static;\n\n    if (widgetStatic == null) {\n        widgetStatic = DEFAULT_STATIC;\n    }\n\n    return _.extend({}, oldWidgetInfo, {\n        // maintain other info, like type\n        // After upgrading we guarantee that the version is up-to-date\n        version: latestVersion,\n        // Default graded to true (so null/undefined becomes true):\n        graded: oldWidgetInfo.graded != null ? oldWidgetInfo.graded : true,\n        alignment: alignment,\n        static: widgetStatic,\n        options: newEditorProps,\n    });\n};\n\nexport const getRendererPropsForWidgetInfo = (\n    widgetInfo: WidgetInfo,\n    problemNum?: number,\n): any => {\n    const type = widgetInfo.type;\n    const widgetExports = widgets[type];\n    if (widgetExports == null) {\n        // The widget is not a registered widget\n        // It shouldn't matter what we return here, but for consistency\n        // we return the untransformed options, as if the widget did\n        // not have a transform defined.\n        return widgetInfo.options;\n    }\n    let transform;\n    if (widgetInfo.static) {\n        // There aren't a lot of real places where we'll have to default to\n        // _.identity, but it's theoretically possible if someone changes\n        // the JSON manually / we have to back out static support for a\n        // widget.\n        transform = getStaticTransform(type) || _.identity;\n    } else {\n        transform = widgetExports.transform || _.identity;\n    }\n    // widgetInfo.options are the widgetEditor's props:\n    return transform(widgetInfo.options, problemNum);\n};\n\nexport const traverseChildWidgets = (\n    widgetInfo: WidgetInfo,\n    traverseRenderer: any,\n): WidgetInfo => {\n    if (!traverseRenderer) {\n        throw new PerseusError(\n            \"traverseRenderer must be provided, but was not\",\n            Errors.Internal,\n        );\n    }\n\n    if (!widgetInfo || !widgetInfo.type || !widgets[widgetInfo.type]) {\n        return widgetInfo;\n    }\n\n    const widgetExports = widgets[widgetInfo.type];\n    const props = widgetInfo.options;\n\n    if (widgetExports.traverseChildWidgets && props) {\n        const newProps = widgetExports.traverseChildWidgets(\n            props,\n            traverseRenderer,\n        );\n        return _.extend({}, widgetInfo, {options: newProps});\n    }\n    return widgetInfo;\n};\n\n/**\n * Handling for the optional alignments for widgets\n * See widget-container.jsx for details on how alignments are implemented.\n */\n\n/**\n * Returns the list of supported alignments for the given (string) widget\n * type. This is used primarily at editing time to display the choices\n * for the user.\n *\n * Supported alignments are given as an array of strings in the exports of\n * a widget's module.\n */\nexport const getSupportedAlignments = (\n    type: string,\n): ReadonlyArray<Alignment> => {\n    const widgetExport = widgets[type];\n    // @ts-expect-error [FEI-5003] - TS2322 - Type 'string[] | readonly Alignment[]' is not assignable to type 'readonly Alignment[]'.\n    return (\n        (widgetExport && widgetExport.supportedAlignments) ||\n        DEFAULT_SUPPORTED_ALIGNMENTS\n    );\n};\n\n/**\n * For the given (string) widget type, determine the default alignment for\n * the widget. This is used at rendering time to go from \"default\" alignment\n * to the actual alignment displayed on the screen.\n *\n * The default alignment is given either as a string (called\n * `defaultAlignment`) or a function (called `getDefaultAlignment`) on\n * the exports of a widget's module.\n */\nexport const getDefaultAlignment = (type: string): Alignment => {\n    const widgetExports = widgets[type];\n    let alignment;\n    if (!widgetExports) {\n        return DEFAULT_ALIGNMENT;\n    }\n\n    if (widgetExports.getDefaultAlignment) {\n        alignment = widgetExports.getDefaultAlignment();\n    } else {\n        alignment = widgetExports.defaultAlignment;\n    }\n    return alignment || DEFAULT_ALIGNMENT;\n};\n\nconst validAlignments: ReadonlyArray<Alignment> = [\n    \"block\",\n    \"inline-block\",\n    \"inline\",\n    \"float-left\",\n    \"float-right\",\n    \"full-width\",\n];\n\n/**\n * Used at startup to fail fast if an alignment given by a widget is\n * invalid.\n */\n// TODO(alex): Change this to run as a testcase (vs. being run at runtime)\n// TODO(LP-10707): I think this can be completely removed because our TypeScript types\n// enforce this!\nexport const validateAlignments = () => {\n    _.each(widgets, function (widgetInfo) {\n        if (\n            widgetInfo.defaultAlignment &&\n            !_.contains(validAlignments, widgetInfo.defaultAlignment)\n        ) {\n            throw new PerseusError(\n                \"Widget '\" +\n                    widgetInfo.displayName +\n                    \"' has an invalid defaultAlignment value: \" +\n                    widgetInfo.defaultAlignment,\n                Errors.InvalidInput,\n            );\n        }\n\n        if (widgetInfo.supportedAlignments) {\n            const unknownAlignments = _.difference(\n                widgetInfo.supportedAlignments,\n                validAlignments,\n            );\n\n            if (unknownAlignments.length) {\n                throw new PerseusError(\n                    \"Widget '\" +\n                        widgetInfo.displayName +\n                        \"' has an invalid value for supportedAlignments: \" +\n                        unknownAlignments.join(\" \"),\n                    Errors.InvalidInput,\n                );\n            }\n        }\n    });\n};\n\n/**\n * Handling for static mode for widgets that support it.\n */\n\n/**\n * Returns true iff the widget supports static mode.\n * A widget implicitly supports static mode if it exports a\n * staticTransform function.\n */\nexport const supportsStaticMode = (type: string): boolean => {\n    const widgetInfo = widgets[type];\n    return widgetInfo && widgetInfo.staticTransform != null;\n};\n\n/**\n * Return the staticTransform function used to convert the editorProps to\n * the rendered widget state.\n */\nexport const getStaticTransform = (\n    type: string,\n): WidgetTransform | null | undefined => {\n    const widgetInfo = widgets[type];\n    return widgetInfo && widgetInfo.staticTransform;\n};\n\n/**\n * Returns the tracking option for the widget. The default is \"\",\n * which means simply to track interactions once. The other available\n * option is \"all\" which means to track all interactions.\n */\nexport const getTracking = (type: string): Tracking => {\n    const widgetExport = widgets[type];\n    return (widgetExport && widgetExport.tracking) || DEFAULT_TRACKING;\n};\n\n/**\n * Returns true if this widget can include lintable markdown text\n * and supports a highlightLint prop, or false otherwise.\n */\nexport const isLintable = (type: string): boolean => {\n    const widgetExports = widgets[type];\n    return (widgetExports && widgetExports.isLintable) || DEFAULT_LINTABLE;\n};\n","/* eslint-disable react/no-unsafe, react/sort-comp */\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport {zIndexInteractiveComponent} from \"./styles/constants\";\nimport {containerSizeClass, getClassFromWidth} from \"./util/sizing-utils\";\nimport * as Widgets from \"./widgets\";\n\nimport type {PerseusWidgetOptions} from \"./perseus-types\";\nimport type {LinterContextProps, WidgetProps} from \"./types\";\n\ntype Props = {\n    shouldHighlight: boolean;\n    type: string; // widget type/name,\n    initialProps: WidgetProps<any, PerseusWidgetOptions>;\n    linterContext: LinterContextProps;\n};\n\ntype DefaultProps = {\n    linterContext: LinterContextProps;\n};\n\ntype State = {\n    sizeClass: \"small\" | \"medium\" | \"large\" | \"xlarge\";\n    widgetProps: WidgetProps<any, PerseusWidgetOptions>;\n};\n\nclass WidgetContainer extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        linterContext: linterContextDefault,\n    };\n\n    state: any = {\n        // TODO(benkomalo): before we're mounted, we don't know how big\n        // we're going to be, so just default to MEDIUM for now. :/ In the\n        // future we can sniff with user-agents or something to get a\n        // better approximation, to avoid flickers\n        sizeClass: containerSizeClass.MEDIUM,\n        widgetProps: this.props.initialProps,\n    };\n\n    componentDidMount() {\n        // Only relay size class changes for mobile right now.  We may want to\n        // this for desktop as well at some point in the future.\n        if (this.state.widgetProps.apiOptions.isMobile) {\n            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'offsetWidth' does not exist on type 'Element | Text'.\n            const containerWidth = ReactDOM.findDOMNode(this).offsetWidth;\n\n            // NOTE(benkomalo): in the common case, this won't change anything.\n            // Unfortunately, it will cause a flash and re-layout on mobile,\n            // but until we have better SSR or a more drastic way change to our\n            // APIs that hints at the available size, we do have to measure DOM\n            // unfortunately.\n            /* eslint-disable react/no-did-mount-set-state */\n            this.setState({\n                sizeClass: getClassFromWidth(containerWidth),\n            });\n            /* eslint-enable react/no-did-mount-set-state */\n        }\n    }\n\n    render(): React.ReactNode {\n        let className = classNames({\n            \"perseus-widget-container\": true,\n            \"widget-highlight\": this.props.shouldHighlight,\n            \"widget-nohighlight\": !this.props.shouldHighlight,\n            // HACK(matthewc): perseus-widget-container is setting a font-size\n            // but we want the definition prompt to match the surrounding font\n            // I'm sorry, but there's a time crunch\n            \"perseus-widget__definition\": this.props.type === \"definition\",\n        });\n\n        const type = this.props.type;\n        const WidgetType = Widgets.getWidget(type);\n        if (WidgetType == null) {\n            // This is for the good of all people!!\n            // eslint-disable-next-line no-console\n            console.warn(`Widget type '${type}' not found!`);\n            // Just give up on invalid widget types\n            return <div className={className} />;\n        }\n\n        let alignment = this.state.widgetProps.alignment;\n        if (alignment === \"default\") {\n            alignment = Widgets.getDefaultAlignment(type);\n        }\n\n        className += \" widget-\" + alignment;\n\n        const apiOptions = this.state.widgetProps.apiOptions;\n\n        // Hack to prevent interaction with static widgets: we overlay a big\n        // div on top of the widget and overflow: hidden the container.\n        // Ideally widgets themselves should know how to prevent interaction.\n        const isStatic = this.state.widgetProps.static || apiOptions.readOnly;\n        const staticContainerStyles = {\n            position: \"relative\",\n            overflow: \"visible\",\n        } as const;\n        const staticOverlayStyles = {\n            width: \"100%\",\n            height: \"100%\",\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            zIndex: zIndexInteractiveComponent,\n        } as const;\n\n        // Some widgets may include strings of markdown that we may\n        // want to run the linter on. So if the widget is lintable,\n        // and we've been asked to highlight lint, pass that property\n        // on to the widget, and if the content is not lintable, make sure\n        // to default to false.\n        // The linter context might be a constant object (and it isn't owned\n        // by us anyway), so we copy it if we have to modify it.\n        const linterContext = Widgets.isLintable(type)\n            ? this.props.linterContext\n            : {...this.props.linterContext, highlightLint: false};\n\n        // Note: if you add more props here, please consider whether or not\n        // it should be auto-serialized (e.g. used in scoreInput()). See\n        // widget-jsonify-deprecated.jsx and widget-prop-denylist.jsx\n\n        // We default to an empty object for style instead of null\n        // because of a strange bug where the static styles aren't applied\n        // after toggling static mode.\n        return (\n            <div\n                className={className}\n                style={isStatic ? staticContainerStyles : {}}\n            >\n                <WidgetType\n                    {...this.state.widgetProps}\n                    linterContext={linterContext}\n                    containerSizeClass={this.state.sizeClass}\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"widget\"\n                />\n                {isStatic && <div style={staticOverlayStyles} />}\n            </div>\n        );\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        if (this.props.type !== nextProps.type) {\n            throw new Error(\n                \"WidgetContainer can't change widget type; set a different \" +\n                    \"key instead to recreate the container.\",\n            );\n        }\n    }\n\n    shouldComponentUpdate(nextProps: Props, nextState: State): boolean {\n        return (\n            this.props.shouldHighlight !== nextProps.shouldHighlight ||\n            this.props.type !== nextProps.type ||\n            this.state.widgetProps !== nextState.widgetProps ||\n            this.state.sizeClass !== nextState.sizeClass\n        );\n    }\n\n    getWidget: () => any = () => {\n        // eslint-disable-next-line react/no-string-refs\n        return this.refs.widget;\n    };\n\n    replaceWidgetProps: (arg1: WidgetProps<any, PerseusWidgetOptions>) => void =\n        (newWidgetProps) => {\n            this.setState({widgetProps: newWidgetProps});\n        };\n}\n\nexport default WidgetContainer;\n","/* eslint-disable react/no-unsafe */\nimport * as PerseusLinter from \"@khanacademy/perseus-linter\";\nimport classNames from \"classnames\";\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport AssetContext from \"./asset-context\";\nimport SvgImage from \"./components/svg-image\";\nimport TeX from \"./components/tex\";\nimport Zoomable from \"./components/zoomable\";\nimport ZoomableTeX from \"./components/zoomable-tex\";\nimport {DefinitionProvider} from \"./definition-context\";\nimport {getDependencies} from \"./dependencies\";\nimport ErrorBoundary from \"./error-boundary\";\nimport InteractionTracker from \"./interaction-tracker\";\nimport Objective from \"./interactive2/objective_\";\nimport JiptParagraphs from \"./jipt-paragraphs\";\nimport {Errors, Log} from \"./logging/log\";\nimport {ClassNames as ApiClassNames, ApiOptions} from \"./perseus-api\";\nimport {PerseusError} from \"./perseus-error\";\nimport PerseusMarkdown from \"./perseus-markdown\";\nimport QuestionParagraph from \"./question-paragraph\";\nimport TranslationLinter from \"./translation-linter\";\nimport Util from \"./util\";\nimport preprocessTex from \"./util/katex-preprocess\";\nimport WidgetContainer from \"./widget-container\";\nimport * as Widgets from \"./widgets\";\n\nimport type {PerseusRenderer, PerseusWidgetOptions} from \"./perseus-types\";\nimport type {\n    APIOptions,\n    APIOptionsWithDefaults,\n    FilterCriterion,\n    FocusPath,\n    LinterContextProps,\n    PerseusScore,\n    WidgetInfo,\n    WidgetProps,\n} from \"./types\";\n\nimport \"./styles/perseus-renderer.less\";\n\nconst {mapObject, mapObjectFromArray} = Objective;\n\nconst rContainsNonWhitespace = /\\S/;\nconst rImageURL = /(web\\+graphie|https):\\/\\/[^\\s]*/;\n\nconst noopOnRender = () => {};\n\nconst SHOULD_CLEAR_WIDGETS_PROP_LIST = [\"content\", \"problemNum\", \"widgets\"];\n\n// Check if one focus path / id path is a prefix of another\n// The focus path null will never be a prefix of any non-null\n// path, since it represents no focus.\n// Otherwise, prefix is calculated by whether every array\n// element in the prefix is present in the same position in the\n// wholeArray path.\nconst isIdPathPrefix = function (\n    prefixArray: FocusPath,\n    wholeArray: FocusPath,\n) {\n    if (prefixArray === null || wholeArray === null) {\n        return prefixArray === wholeArray;\n    }\n\n    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly string[] | undefined' is not assignable to parameter of type 'Collection<any>'.\n    return _.every(prefixArray, (elem: string, i: number) => {\n        if (wholeArray != null) {\n            return _.isEqual(elem, wholeArray[i]);\n        }\n    });\n};\n\ntype WidgetState = {\n    isMobile?: boolean;\n    inTable?: boolean;\n    key?: number;\n    paragraphIndex?: number;\n    foundFullWidth?: boolean;\n    baseElements?: any;\n};\n\ntype SetWidgetPropsFn = (\n    id: string,\n    newProps: any,\n    cb: () => boolean,\n    // Widgets can call `onChange` with `silent` set to `true` to prevent\n    // interaction events from being triggered in listeners.\n    silent?: boolean,\n) => void;\n\n// The return type for getUserInput. Widgets have full control of what is\n// returned so it's not easily typed (some widgets return a scalar (string),\n// some return a custom-built object, some delegate to\n// `WidgetJsonifyDeprecated` which returns an object containing widget props\n// (filtered by deprecated keys)).\ntype WidgetUserInput = any;\n\ntype SerializedState = {\n    [id: string]: any;\n};\n\nexport type Widget = {\n    focus: () =>\n        | {\n              id: string;\n              path: FocusPath;\n          }\n        | boolean;\n    getDOMNodeForPath: (path: FocusPath) => Element | Text | null;\n    deselectIncorrectSelectedChoices?: () => void;\n    restoreSerializedState: (props: any, callback: () => void) => any;\n    // TODO(jeremy): I think this return value is wrong. The widget\n    // getSerializedState should just return _its_ serialized state, not a\n    // key/value list of all widget states (i think!)\n    // Returns widget state that can be passed back to `restoreSerializedState`\n    // to put the widget back into exactly the same state. If the widget does\n    // not implement this function, the renderer simply returns all of the\n    // widget's props.\n    getSerializedState?: () => SerializedState; // SUSPECT,\n    getGrammarTypeForPath: (path: FocusPath) => string;\n    blurInputPath?: (path: FocusPath) => null;\n    focusInputPath?: (path: FocusPath) => null;\n    getInputPaths?: () => ReadonlyArray<FocusPath>;\n    setInputValue?: (\n        path: FocusPath,\n        newValue: string,\n        // TODO(jeremy): I think this is actually a callback\n        focus: () => unknown,\n    ) => void;\n    getUserInput?: () => WidgetUserInput | null | undefined;\n    simpleValidate?: (\n        options?: any,\n        onOutputError?: (\n            widgetId: any,\n            value: string,\n            message?: string | null | undefined,\n        ) => unknown | null | undefined,\n    ) => PerseusScore;\n    showRationalesForCurrentlySelectedChoices?: (options?: any) => void;\n    examples?: () => ReadonlyArray<string>;\n};\n\ntype Props = {\n    apiOptions?: APIOptions;\n    alwaysUpdate?: boolean;\n    findExternalWidgets: any;\n    highlightedWidgets?: ReadonlyArray<any>;\n    images: PerseusRenderer[\"images\"];\n    keypadElement?: any; // TODO(kevinb): add proper types,\n    onInteractWithWidget: (id: string) => void;\n    onRender: (node?: any) => void;\n    problemNum?: number;\n    questionCompleted?: boolean;\n    reviewMode?: boolean | null | undefined;\n    content: PerseusRenderer[\"content\"];\n    serializedState?: any;\n    // Callback which is called when serialized state changes with the new\n    // serialized state.\n    onSerializedStateUpdated: (serializedState: {\n        [key: string]: any;\n    }) => unknown;\n    // If linterContext.highlightLint is true, then content will be passed\n    // to the linter and any warnings will be highlighted in the rendered\n    // output.\n    linterContext: LinterContextProps;\n    legacyPerseusLint?: ReadonlyArray<string>;\n    widgets: PerseusRenderer[\"widgets\"];\n};\n\ntype State = {\n    translationLintErrors: ReadonlyArray<string>;\n    widgetInfo: Readonly<{\n        [id: string]: WidgetInfo | null | undefined;\n    }>;\n    widgetProps: Readonly<{\n        [id: string]: any | null | undefined;\n    }>;\n    jiptContent: any;\n    lastUsedWidgetId: string | null | undefined;\n};\n\ntype Context = LinterContextProps & {\n    content: string;\n    widgets: {\n        [id: string]: any;\n    };\n    // This is inexact because LinterContextProps is inexact\n};\n\ntype DefaultProps = {\n    alwaysUpdate: Props[\"alwaysUpdate\"];\n    content: Props[\"content\"];\n    findExternalWidgets: Props[\"findExternalWidgets\"];\n    highlightedWidgets: Props[\"highlightedWidgets\"];\n    images: Props[\"images\"];\n    linterContext: Props[\"linterContext\"];\n    onInteractWithWidget: Props[\"onInteractWithWidget\"];\n    onRender: Props[\"onRender\"];\n    onSerializedStateUpdated: Props[\"onSerializedStateUpdated\"];\n    questionCompleted: Props[\"questionCompleted\"];\n    reviewMode: Props[\"reviewMode\"];\n    serializedState: Props[\"serializedState\"];\n    widgets: Props[\"widgets\"];\n};\n\nclass Renderer extends React.Component<Props, State> {\n    _currentFocus: FocusPath | null | undefined;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_foundTextNodes' has no initializer and is not definitely assigned in the constructor.\n    _foundTextNodes: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_interactionTrackers' has no initializer and is not definitely assigned in the constructor.\n    _interactionTrackers: {\n        [id: string]: InteractionTracker;\n    };\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_isMounted' has no initializer and is not definitely assigned in the constructor.\n    _isMounted: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_isTwoColumn' has no initializer and is not definitely assigned in the constructor.\n    _isTwoColumn: boolean;\n\n    // The i18n linter.\n    _translationLinter: TranslationLinter;\n\n    lastRenderedMarkdown: React.ReactNode;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'reuseMarkdown' has no initializer and is not definitely assigned in the constructor.\n    reuseMarkdown: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'translationIndex' has no initializer and is not definitely assigned in the constructor.\n    translationIndex: number;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'widgetIds' has no initializer and is not definitely assigned in the constructor.\n    widgetIds: Array<string>;\n\n    static defaultProps: DefaultProps = {\n        content: \"\",\n        widgets: {},\n        images: {},\n        highlightedWidgets: [],\n        questionCompleted: false,\n        // onRender may be called multiple times per render, for example\n        // if there are multiple images or TeX pieces within `content`.\n        // It is a good idea to debounce any functions passed here.\n        onRender: noopOnRender,\n        onInteractWithWidget: function () {},\n        findExternalWidgets: () => [],\n        alwaysUpdate: false,\n        reviewMode: false,\n        serializedState: null,\n        onSerializedStateUpdated: () => {},\n        linterContext: PerseusLinter.linterContextDefault,\n    };\n\n    constructor(props: Props, context: Context) {\n        super(props, context);\n        this._translationLinter = new TranslationLinter();\n\n        this.state = {\n            jiptContent: null,\n\n            // TranslationLinter is async and currently does not contain a\n            // location. This is a list of error strings TranslationLinter\n            // detected on its last run.\n            translationLintErrors: [],\n\n            // The ID of the last widget the user interacted with. We'll\n            // use this to set the `isLastUsedWidget` flag on the\n            // corresponding widget.\n            lastUsedWidgetId: null,\n\n            ...this._getInitialWidgetState(props),\n        };\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        // figure out why we're passing an empty object\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{}' is not assignable to parameter of type 'Props'.\n        this.handleRender({});\n        this._currentFocus = null;\n\n        // TODO(emily): actually make the serializedState prop work like a\n        // controlled prop, instead of manually calling .restoreSerializedState\n        // at the right times.\n        if (this.props.serializedState) {\n            this.restoreSerializedState(this.props.serializedState);\n        }\n\n        if (this.props.linterContext.highlightLint) {\n            // Get i18n lint errors asynchronously. If there are lint errors,\n            // this component will be rerendered.\n            this._translationLinter.runLinter(\n                this.props.content,\n                this.handletranslationLintErrors,\n            );\n        }\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        if (\n            !_.isEqual(\n                _.pick(this.props, SHOULD_CLEAR_WIDGETS_PROP_LIST),\n                _.pick(nextProps, SHOULD_CLEAR_WIDGETS_PROP_LIST),\n            )\n        ) {\n            this.setState(this._getInitialWidgetState(nextProps));\n        }\n    }\n\n    shouldComponentUpdate(nextProps: Props, nextState: State): any | boolean {\n        // QUESTION(jeremy): Shouldn't we look at `nextProps` here? Otherwise\n        // we're always looking \"one render behind\".\n        if (this.props.alwaysUpdate) {\n            // TOTAL hacks so that findWidgets doesn't break\n            // when one widget updates without the other.\n            // See passage-refs inside radios, which was why\n            // this was introduced.\n            // I'm sorry!\n            // TODO(aria): cry\n            //\n            // HACK(djf): I've also set this alwaysUpdate property from\n            // async-renderer.jsx in the manticore-package. I'm doing this\n            // to work around an infinite loop of some sort that started\n            // happening in manticore after the React 16 update. After\n            // clicking around in the manticore exercise editor (for example)\n            // the UI would freeze up, and the debugger would show that\n            // we were always deep in a recursion on the propsChanged line\n            // below. There is some kind of timing issue causing some kind\n            // of infinite loop, but by avoiding the time-consuming deep\n            // equal comparisons on our props (which are often huge) I can\n            // no longer reproduce the bug.\n            // TODO(djf): Remove this comment\n            // https://khanacademy.atlassian.net/browse/CP-834 is resolved.\n            return true;\n        }\n        const stateChanged = !_.isEqual(this.state, nextState);\n        const propsChanged = !_.isEqual(this.props, nextProps);\n        return propsChanged || stateChanged;\n    }\n\n    UNSAFE_componentWillUpdate(nextProps: Props, nextState: State) {\n        const oldJipt = this.shouldRenderJiptPlaceholder(\n            this.props,\n            this.state,\n        );\n        const newJipt = this.shouldRenderJiptPlaceholder(nextProps, nextState);\n        const oldContent = this.getContent(this.props, this.state);\n        const newContent = this.getContent(nextProps, nextState);\n        const oldHighlightedWidgets = this.props.highlightedWidgets;\n        const newHighlightedWidgets = nextProps.highlightedWidgets;\n\n        // TODO(jared): This seems to be a perfect overlap with\n        // \"shouldComponentUpdate\" -- can we just remove this\n        // componentWillUpdate and the reuseMarkdown attr?\n        this.reuseMarkdown =\n            !oldJipt &&\n            !newJipt &&\n            oldContent === newContent &&\n            _.isEqual(\n                this.state.translationLintErrors,\n                nextState.translationLintErrors,\n            ) &&\n            // If we are running the linter then we need to know when\n            // widgets have changed because we need for force the linter to\n            // run when that happens. Note: don't do identity comparison here:\n            // it can cause frequent re-renders that break MathJax somehow\n            (!this.props.linterContext.highlightLint ||\n                _.isEqual(this.props.widgets, nextProps.widgets)) &&\n            // If the linter is turned on or off, we have to rerender\n            this.props.linterContext.highlightLint ===\n                nextProps.linterContext.highlightLint &&\n            // yes, this is identity array comparison, but these are passed\n            // in from state in the item-renderer, so they should be\n            // identity equal unless something changed, and it's expensive\n            // to loop through them to look for differences.\n            // Technically, we could reuse the markdown when this changes,\n            // but to do that we'd have to do more expensive checking of\n            // whether a widget should be highlighted in the common case\n            // where this array hasn't changed, so we just redo the whole\n            // render if this changed\n            oldHighlightedWidgets === newHighlightedWidgets;\n    }\n\n    componentDidUpdate(prevProps: Props, prevState: State) {\n        this.handleRender(prevProps);\n        // We even do this if we did reuse the markdown because\n        // we might need to update the widget props on this render,\n        // even though we have the same widgets.\n        // WidgetContainers don't update their widgets' props when\n        // they are re-rendered, so even if they've been\n        // re-rendered we need to call these methods on them.\n        _.each(this.widgetIds, (id) => {\n            // eslint-disable-next-line react/no-string-refs\n            const container = this.refs[\"container:\" + id];\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'replaceWidgetProps' does not exist on type 'ReactInstance'.\n            container && container.replaceWidgetProps(this.getWidgetProps(id));\n        });\n\n        if (\n            this.props.serializedState &&\n            !_.isEqual(this.props.serializedState, this.getSerializedState())\n        ) {\n            this.restoreSerializedState(this.props.serializedState);\n        }\n\n        if (this.props.linterContext.highlightLint) {\n            // Get i18n lint errors asynchronously. If lint errors have changed\n            // since the last run, this component will be rerendered.\n            this._translationLinter.runLinter(\n                this.props.content,\n                this.handletranslationLintErrors,\n            );\n        }\n    }\n\n    componentWillUnmount() {\n        // Clean out the list of widgetIds when unmounting, as this list is\n        // meant to be consistent with the refs controlled by the renderer, and\n        // refs are also cleared out during unmounting.\n        // (This may not be totally necessary, but mobile clients have been\n        // seeing JS errors due to an inconsistency between the list of\n        // widgetIds and the child refs of the renderer.\n        // See: https://phabricator.khanacademy.org/D32420.)\n        this.widgetIds = [];\n\n        if (this.translationIndex != null) {\n            // NOTE(jeremy): Since the translationIndex is simply the array\n            // index of each renderer, we can't remove Renderers from this\n            // list, rather, we simply null out the entry (which means that\n            // this array's growth is unbounded until a page reload).\n            getDependencies().rendererTranslationComponents.removeComponentAtIndex(\n                this.translationIndex,\n            );\n        }\n\n        this._isMounted = false;\n    }\n\n    getApiOptions: () => APIOptionsWithDefaults = () => {\n        return {\n            ...ApiOptions.defaults,\n            ...this.props.apiOptions,\n        };\n    };\n\n    _getInitialWidgetState: (props: Props) => {\n        widgetInfo: State[\"widgetInfo\"];\n        widgetProps: State[\"widgetProps\"];\n    } = (props: Props) => {\n        const allWidgetInfo = this._getAllWidgetsInfo(props);\n        return {\n            widgetInfo: allWidgetInfo,\n            widgetProps: this._getAllWidgetsStartProps(allWidgetInfo, props),\n        };\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(props: Props) => Partial<Record<string, CategorizerWidget | CSProgramWidget | DefinitionWidget | DropdownWidget | ... 35 more ... | VideoWidget>>' is not assignable to type '(props: Props) => { [key: string]: PerseusWidget; }'.\n    _getAllWidgetsInfo: (props: Props) => {\n        [key: string]: WidgetInfo;\n    } = (props: Props) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ [key: string]: PerseusWidget; }' is not assignable to parameter of type 'Partial<Record<string, CategorizerWidget>>'.\n        return mapObject(props.widgets, (widgetInfo, widgetId) => {\n            if (!widgetInfo.type || !widgetInfo.alignment) {\n                const newValues: Record<string, any> = {};\n\n                if (!widgetInfo.type) {\n                    newValues.type = widgetId.split(\" \")[0];\n                }\n                if (!widgetInfo.alignment) {\n                    newValues.alignment = \"default\";\n                }\n\n                widgetInfo = _.extend({}, widgetInfo, newValues);\n            }\n            return Widgets.upgradeWidgetInfoToLatestVersion(widgetInfo);\n        });\n    };\n\n    _getAllWidgetsStartProps: (\n        allWidgetInfo: {\n            [key: string]: WidgetInfo;\n        },\n        props: Props,\n    ) => any = (allWidgetInfo, props) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ [key: string]: PerseusWidget; }' is not assignable to parameter of type 'Partial<Record<string, CategorizerWidget>>'.\n        return mapObject(allWidgetInfo, (widgetInfo) => {\n            return Widgets.getRendererPropsForWidgetInfo(\n                widgetInfo,\n                props.problemNum,\n            );\n        });\n    };\n\n    // This is only used in _getWidgetInfo as a fallback if widgetId\n    // doesn't exist in this.state.widgetInfo.  It doesn't get run as\n    // part of the happy path.\n    // TODO(LP-10713): Refactor how we handle widgetIds that don't exist\n    // in this.state.widgetInfo.\n    _getDefaultWidgetInfo: (widgetId: string) => any = (widgetId: string) => {\n        const widgetIdParts = Util.rTypeFromWidgetId.exec(widgetId);\n        if (widgetIdParts == null) {\n            // We should probably return null here since there's no\n            // widget with the given id.\n            // NOTE(jeremy): Further, the widgetId we were given does not even\n            // look like a widget ID (ie. `widget-type \\d+`). I can't figure\n            // out how to trigger this line of code though.\n            /* c8 ignore next line */\n            return {};\n        }\n        return {\n            type: widgetIdParts[1],\n            graded: true,\n            options: {},\n        };\n    };\n\n    _getWidgetInfo: (widgetId: string) => WidgetInfo = (\n        widgetId: string,\n    ): WidgetInfo => {\n        return (\n            this.state.widgetInfo[widgetId] ||\n            this._getDefaultWidgetInfo(widgetId)\n        );\n    };\n\n    renderWidget: (\n        impliedType: string,\n        id: string,\n        state: WidgetState,\n    ) => null | React.ReactNode = (\n        impliedType: string,\n        id: string,\n        state: WidgetState,\n    ) => {\n        const widgetInfo = this.state.widgetInfo[id];\n\n        if (widgetInfo && widgetInfo.alignment === \"full-width\") {\n            state.foundFullWidth = true;\n        }\n\n        if (widgetInfo) {\n            const type = (widgetInfo && widgetInfo.type) || impliedType;\n            const shouldHighlight = _.contains(\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly any[] | undefined' is not assignable to parameter of type 'Collection<any>'.\n                this.props.highlightedWidgets,\n                id,\n            );\n\n            // By this point we should have no duplicates, which are\n            // filtered out in this.render(), so we shouldn't have to\n            // worry about using this widget key and ref:\n            return (\n                <ErrorBoundary key={\"container:\" + id}>\n                    <WidgetContainer\n                        ref={\"container:\" + id}\n                        type={type}\n                        initialProps={this.getWidgetProps(id)}\n                        shouldHighlight={shouldHighlight}\n                        linterContext={PerseusLinter.pushContextStack(\n                            this.props.linterContext,\n                            \"widget\",\n                        )}\n                    />\n                </ErrorBoundary>\n            );\n        }\n        return null;\n    };\n\n    getWidgetProps: (id: string) => WidgetProps<any, PerseusWidgetOptions> = (\n        id,\n    ) => {\n        const apiOptions = this.getApiOptions();\n        const widgetProps = this.state.widgetProps[id] || {};\n\n        // The widget needs access to its \"rubric\" at all times when in review\n        // mode (which is really just part of its widget info).\n        let reviewModeRubric = null;\n        const widgetInfo = this.state.widgetInfo[id];\n        if (this.props.reviewMode && widgetInfo) {\n            reviewModeRubric = widgetInfo.options;\n        }\n\n        if (!this._interactionTrackers) {\n            this._interactionTrackers = {};\n        }\n\n        let interactionTracker = this._interactionTrackers[id];\n        if (!interactionTracker) {\n            interactionTracker = this._interactionTrackers[id] =\n                new InteractionTracker(\n                    apiOptions.trackInteraction,\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string | null | undefined' is not assignable to parameter of type 'string'.\n                    widgetInfo && widgetInfo.type,\n                    id,\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string | null | undefined' is not assignable to parameter of type 'string'.\n                    Widgets.getTracking(widgetInfo && widgetInfo.type),\n                );\n        }\n\n        return {\n            ...widgetProps,\n            ref: id,\n            widgetId: id,\n            alignment: widgetInfo && widgetInfo.alignment,\n            // When determining if a widget is static, we verify that the widget is not an\n            // exercise question by verifying that it has no problem number.\n            static: widgetInfo && widgetInfo.static && !this.props.problemNum,\n            problemNum: this.props.problemNum,\n            apiOptions: this.getApiOptions(),\n            keypadElement: this.props.keypadElement,\n            questionCompleted: this.props.questionCompleted,\n            onFocus: _.partial(this._onWidgetFocus, id),\n            onBlur: _.partial(this._onWidgetBlur, id),\n            findWidgets: this.findWidgets,\n            reviewModeRubric: reviewModeRubric,\n            onChange: (newProps, cb, silent = false) => {\n                this._setWidgetProps(id, newProps, cb, silent);\n            },\n            trackInteraction: interactionTracker.track,\n            isLastUsedWidget: id === this.state.lastUsedWidgetId,\n        };\n    };\n\n    /**\n     * Serializes the questions state so it can be recovered.\n     *\n     * The return value of this function can be sent to the\n     * `restoreSerializedState` method to restore this state.\n     *\n     * If an instance of widgetProps is passed in, it generates the serialized\n     * state from that instead of the current widget props.\n     */\n    getSerializedState: (widgetProps?: any) => {\n        [id: string]: any;\n    } = (\n        widgetProps: any,\n    ): {\n        [id: string]: any;\n    } => {\n        return mapObject(\n            widgetProps || this.state.widgetProps,\n            (props, widgetId) => {\n                const widget = this.getWidgetInstance(widgetId);\n                if (widget && widget.getSerializedState) {\n                    return widget.getSerializedState();\n                }\n                return props;\n            },\n        );\n    };\n\n    restoreSerializedState: (\n        serializedState: SerializedState,\n        callback?: () => void,\n    ) => void = (serializedState: SerializedState, callback?: () => void) => {\n        // Do some basic validation on the serialized state (just make sure the\n        // widget IDs are what we expect).\n        const serializedWidgetIds = _.keys(serializedState);\n        const widgetPropIds = _.keys(this.state.widgetProps);\n\n        // If the two lists of IDs match (ignoring order)\n        if (\n            serializedWidgetIds.length !== widgetPropIds.length ||\n            _.intersection(serializedWidgetIds, widgetPropIds).length !==\n                serializedWidgetIds.length\n        ) {\n            Log.error(\n                \"Refusing to restore bad serialized state:\",\n                Errors.Internal,\n                {\n                    loggedMetadata: {\n                        serializedState: JSON.stringify(serializedState),\n                        currentProps: JSON.stringify(this.state.widgetProps),\n                    },\n                },\n            );\n            return;\n        }\n\n        // We want to wait until any children widgets who have a\n        // restoreSerializedState function also call their own callbacks before\n        // we declare that the operation is finished.\n        let numCallbacks = 1;\n        const fireCallback = () => {\n            --numCallbacks;\n            if (callback && numCallbacks === 0) {\n                callback();\n            }\n        };\n\n        this.setState(\n            {\n                widgetProps: mapObject(serializedState, (props, widgetId) => {\n                    const widget = this.getWidgetInstance(widgetId);\n                    if (widget && widget.restoreSerializedState) {\n                        // Note that we probably can't call\n                        // `this.change()/this.props.onChange()` in this\n                        // function, so we take the return value and use\n                        // that as props if necessary so that\n                        // `restoreSerializedState` in a widget can\n                        // change the props as well as state.\n                        // If a widget has no props to change, it can\n                        // safely return null.\n                        ++numCallbacks;\n                        const restoreResult = widget.restoreSerializedState(\n                            props,\n                            fireCallback,\n                        );\n                        return _.extend(\n                            {},\n                            this.state.widgetProps[widgetId],\n                            restoreResult,\n                        );\n                    }\n                    return props;\n                }),\n            },\n            () => {\n                // Wait until all components have rendered. In React 16 setState\n                // callback fires immediately after this componentDidUpdate, and\n                // there is no guarantee that parent/siblings components have\n                // finished rendering.\n                // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n                // eslint-disable-next-line no-restricted-syntax\n                setTimeout(fireCallback, 0);\n            },\n        );\n    };\n\n    /**\n     * Tell each of the radio widgets to show rationales for each of the\n     * currently selected choices inside of them. If the widget is correct, it\n     * shows rationales for all of the choices. This also disables interaction\n     * with the choices that we show rationales for.\n     */\n    showRationalesForCurrentlySelectedChoices: () => void = () => {\n        Object.keys(this.props.widgets).forEach((widgetId) => {\n            const widget = this.getWidgetInstance(widgetId);\n            if (widget && widget.showRationalesForCurrentlySelectedChoices) {\n                widget.showRationalesForCurrentlySelectedChoices(\n                    this._getWidgetInfo(widgetId).options,\n                );\n            }\n        });\n    };\n\n    /**\n     * Tells each of the radio widgets to deselect any of the incorrect choices\n     * that are currently selected (leaving correct choices still selected).\n     */\n    deselectIncorrectSelectedChoices: () => void = () => {\n        // TODO(emily): this has the exact same structure as\n        // showRationalesForCurrentlySelectedChoices above. Maybe DRY this up.\n        Object.keys(this.props.widgets).forEach((widgetId) => {\n            const widget = this.getWidgetInstance(widgetId);\n            if (widget && widget.deselectIncorrectSelectedChoices) {\n                widget.deselectIncorrectSelectedChoices();\n            }\n        });\n    };\n\n    /**\n     * Allows inter-widget communication.\n     *\n     * This function yields this Renderer's own internal widgets, and it's used\n     * in two places.\n     *\n     * First, we expose our own internal widgets to each other by giving them\n     * a `findWidgets` function that, in turn, calls this function.\n     *\n     * Second, we expose our own internal widgets to this Renderer's parent,\n     * by allowing it to call this function directly. That way, it can hook us\n     * up to other Renderers on the page, by writing a `findExternalWidgets`\n     * prop that calls each other Renderer's `findInternalWidgets` function.\n     *\n     * Takes a `filterCriterion` on which widgets to return.\n     * `filterCriterion` can be one of:\n     *  * A string widget id\n     *  * A string widget type\n     *  * a function from (id, widgetInfo, widgetComponent) to true or false\n     *\n     * Returns an array of the matching widget components.\n     *\n     * If you need to do logic with more than the components, it is possible\n     * to do such logic inside the filter, rather than on the result array.\n     *\n     * See the passage-ref widget for an example.\n     *\n     * \"Remember: abilities are not inherently good or evil, it's how you use\n     * them.\" ~ Kyle Katarn\n     * Please use this one with caution.\n     */\n    findInternalWidgets: (\n        filterCriterion: FilterCriterion,\n    ) => ReadonlyArray<Widget | null | undefined> = (\n        filterCriterion: FilterCriterion,\n    ) => {\n        let filterFunc;\n        // Convenience filters:\n        // \"interactive-graph 3\" will give you [[interactive-graph 3]]\n        // \"interactive-graph\" will give you all interactive-graphs\n        if (typeof filterCriterion === \"string\") {\n            if (filterCriterion.indexOf(\" \") !== -1) {\n                const widgetId = filterCriterion;\n                filterFunc = (\n                    id: string,\n                    widgetInfo: WidgetInfo,\n                    widget?: Widget | null,\n                ) => id === widgetId;\n            } else {\n                const widgetType = filterCriterion;\n                filterFunc = (\n                    id: string,\n                    widgetInfo: WidgetInfo,\n                    widget?: Widget | null,\n                ) => {\n                    return widgetInfo.type === widgetType;\n                };\n            }\n        } else {\n            filterFunc = filterCriterion;\n        }\n\n        const results: ReadonlyArray<Widget | null | undefined> = this.widgetIds\n            .filter((id: string) => {\n                const widgetInfo = this._getWidgetInfo(id);\n                const widget = this.getWidgetInstance(id);\n                return filterFunc(id, widgetInfo, widget);\n            })\n            .map(this.getWidgetInstance);\n\n        return results;\n    };\n\n    /**\n     * Allows inter-widget communication.\n     *\n     * Includes both widgets internal to this Renderer, and external widgets\n     * exposed by the `findExternalWidgets` prop.\n     *\n     * See `findInteralWidgets` for more information.\n     */\n    findWidgets: (filterCriterion: FilterCriterion) => any = (\n        filterCriterion: FilterCriterion,\n    ) => {\n        return [\n            ...this.findInternalWidgets(filterCriterion),\n            ...this.props.findExternalWidgets(filterCriterion),\n        ];\n    };\n\n    getWidgetInstance: (id: string) => Widget | null | undefined = (\n        id: string,\n    ): Widget | null | undefined => {\n        // eslint-disable-next-line react/no-string-refs\n        const ref = this.refs[\"container:\" + id];\n        if (!ref) {\n            return null;\n        }\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getWidget' does not exist on type 'ReactInstance'.\n        return ref.getWidget();\n    };\n\n    _onWidgetFocus: (id: string, focusPath?: ReadonlyArray<string>) => void = (\n        id: string,\n        focusPath: ReadonlyArray<string> = [],\n    ) => {\n        if (!_.isArray(focusPath)) {\n            throw new PerseusError(\n                \"widget props.onFocus focusPath must be an Array, \" +\n                    \"but was\" +\n                    JSON.stringify(focusPath),\n                Errors.Internal,\n            );\n        }\n        this._setCurrentFocus([id].concat(focusPath));\n    };\n\n    _onWidgetBlur: (id: string, blurPath: FocusPath) => void = (\n        id: string,\n        blurPath: FocusPath,\n    ) => {\n        const blurringFocusPath = this._currentFocus;\n\n        // Failsafe: abort if ID is different, because focus probably happened\n        // before blur\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const fullPath = [id].concat(blurPath);\n        if (!_.isEqual(fullPath, blurringFocusPath)) {\n            return;\n        }\n\n        // Wait until after any new focus events fire this tick before\n        // declaring that nothing is focused.\n        // If a different widget was focused, we'll see an onBlur event\n        // now, but then an onFocus event on a different element before\n        // this callback is executed\n        _.defer(() => {\n            if (_.isEqual(this._currentFocus, blurringFocusPath)) {\n                this._setCurrentFocus(null);\n            }\n        });\n    };\n\n    getContent: (props: Props, state: State) => any = (\n        props: Props,\n        state: State,\n    ) => {\n        return state.jiptContent || props.content;\n    };\n\n    shouldRenderJiptPlaceholder: (props: Props, state: State) => boolean = (\n        props: Props,\n        state: State,\n    ): boolean => {\n        // TODO(aria): Pass this in via webapp as an apiOption\n        return (\n            getDependencies().JIPT.useJIPT &&\n            state.jiptContent == null &&\n            props.content.indexOf(\"crwdns\") !== -1\n        );\n    };\n\n    replaceJiptContent: (content: string, paragraphIndex: number) => void = (\n        content: string,\n        paragraphIndex: number,\n    ) => {\n        if (paragraphIndex == null) {\n            // we're not translating paragraph-wise; replace the whole content\n            // (we could also theoretically check for apiOptions.isArticle\n            // here, which is what causes paragraphIndex to not be null)\n            this.setState({\n                jiptContent: content,\n            });\n        } else {\n            // This is the same regex we use in perseus/translate.py to find\n            // code blocks. We use it to count entire code blocks as\n            // paragraphs.\n            const codeFenceRegex =\n                /^\\s*(`{3,}|~{3,})\\s*(\\S+)?\\s*\\n([\\s\\S]+?)\\s*\\1\\s*$/;\n\n            if (codeFenceRegex.test(content)) {\n                // If a paragraph is a code block, we're going to treat it as a\n                // single paragraph even if it has double-newlines in it, so\n                // skip the next two checks.\n            } else if (/\\S\\n\\s*\\n\\S/.test(content)) {\n                // Our \"render the exact same QuestionParagraphs each time\"\n                // strategy will fail if we allow translating a paragraph\n                // to more than one paragraph. This hack renders as a single\n                // paragraph and lets the translator know to not use \\n\\n,\n                // hopefully. We can't wait for linting because we can't\n                // safely render the node.\n                // TODO(aria): Check for the max number of backticks or tildes\n                // in the content, and just render a red code block of the\n                // content here instead?\n                content =\n                    \"$\\\\large{\\\\red{\\\\text{Please translate each \" +\n                    \"paragraph to a single paragraph.}}}$\";\n            } else if (/^\\s*$/.test(content)) {\n                // We similarly can't have an all-whitespace paragraph, or\n                // we will parse it as the closing of the previous paragraph\n                content =\n                    \"$\\\\large{\\\\red{\\\\text{Translated paragraph is \" +\n                    \"currently empty}}}$\";\n            }\n            // Split the paragraphs; we have to use getContent() in case\n            // nothing has been translated yet (in which case we just have\n            // this.props.content)\n            const allContent = this.getContent(this.props, this.state);\n            const paragraphs = JiptParagraphs.parseToArray(allContent);\n            paragraphs[paragraphIndex] = content;\n            this.setState({\n                jiptContent: JiptParagraphs.joinFromArray(paragraphs),\n            });\n        }\n    };\n\n    // wrap top-level elements in a QuestionParagraph, mostly\n    // for appropriate spacing and other css\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(ast: any, state: WidgetState) => never[] | JSX.Element' is not assignable to type '(ast: any, state: WidgetState) => ReactElement<any, string | JSXElementConstructor<any>>'.\n    outputMarkdown: (ast: any, state: WidgetState) => React.ReactElement = (\n        ast: any,\n        state: WidgetState,\n    ) => {\n        if (_.isArray(ast)) {\n            // This is duplicated from simple-markdown\n            // TODO(aria): Don't duplicate this logic\n            const oldKey = state.key;\n            const result = [];\n\n            // map nestedOutput over the ast, except group any text\n            // nodes together into a single string output.\n            // NOTE(aria): These are never strings--always QuestionParagraphs\n            // TODO(aria): We probably don't need this string logic here.\n            let lastWasString = false;\n            for (let i = 0; i < ast.length; i++) {\n                state.key = i;\n                state.paragraphIndex = i;\n                const nodeOut = this.outputMarkdown(ast[i], state);\n                const isString = typeof nodeOut === \"string\";\n                // NOTE(jeremy): As far as I can tell, this if is _never_\n                // reached. As noted above, these are always QuestionParagraphs\n                // now.\n                /* c8 ignore if */\n                if (typeof nodeOut === \"string\" && lastWasString) {\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'never'.\n                    result[result.length - 1] += nodeOut;\n                } else {\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'ReactElement<any, string | JSXElementConstructor<any>>' is not assignable to parameter of type 'never'.\n                    result.push(nodeOut);\n                }\n                lastWasString = isString;\n            }\n\n            state.key = oldKey;\n            return result;\n        }\n        // !!! WARNING: Mutative hacks! mutates `this._foundTextNodes`:\n        // because I wrote a bad interface to simple-markdown.js' `output`\n        this._foundTextNodes = false;\n        state.foundFullWidth = false;\n        const output = this.outputNested(ast, state);\n\n        // In Jipt-land, we need to render the exact same outer\n        // QuestionParagraph nodes always. This means the number of\n        // paragraphs needs to stay the same, and we can't modify\n        // the classnames on the QuestionParagraphs or we'll destroy\n        // the crowdin classnames. So we just only use the\n        // 'paragraph' classname from the QuestionParagraph.\n        // If this becomes a problem it would be easy to fix by wrapping\n        // the nodes in an extra layer (hopefully only for jipt) that\n        // handles the jipt classnames, and let this layer handle the\n        // dynamic classnames.\n        // We can't render the classes the first time and leave them\n        // the same because we don't know at the time of the first\n        // render whether they are full-bleed or centered, since they\n        // only contain crowdin IDs like `crwdns:972384209:0...`\n        let className;\n        if (this.translationIndex != null) {\n            className = null;\n        } else {\n            className = classNames({\n                \"perseus-paragraph-centered\": !this._foundTextNodes,\n                // There is only one node being rendered,\n                // and it's a full-width widget.\n                \"perseus-paragraph-full-width\":\n                    state.foundFullWidth && ast.content.length === 1,\n            });\n        }\n\n        return (\n            <QuestionParagraph\n                key={state.key}\n                className={className}\n                translationIndex={this.translationIndex}\n                paragraphIndex={state.paragraphIndex}\n            >\n                <ErrorBoundary>{output}</ErrorBoundary>\n            </QuestionParagraph>\n        );\n    };\n\n    // output non-top-level nodes or arrays\n    outputNested: (ast: any, state: WidgetState) => React.ReactElement = (\n        ast: any,\n        state: WidgetState,\n    ) => {\n        if (_.isArray(ast)) {\n            // This is duplicated from simple-markdown\n            // TODO(aria): Don't duplicate this logic\n            const oldKey = state.key;\n            const result: Array<string | React.ReactNode> = [];\n\n            // map nestedOutput over the ast, except group any text\n            // nodes together into a single string output.\n            let lastWasString = false;\n            for (let i = 0; i < ast.length; i++) {\n                state.key = i;\n                const nodeOut = this.outputNested(ast[i], state);\n                const isString = typeof nodeOut === \"string\";\n                if (typeof nodeOut === \"string\" && lastWasString) {\n                    /**\n                     * We know that last was string, but TypeScript can't see this\n                     * refinement.\n                     */\n                    result[result.length - 1] += nodeOut;\n                } else {\n                    result.push(nodeOut);\n                }\n                lastWasString = isString;\n            }\n\n            state.key = oldKey;\n            return result;\n        }\n        return this.outputNode(ast, this.outputNested, state);\n    };\n\n    // output individual AST nodes [not arrays]\n    outputNode: (\n        node: any,\n        nestedOutput: any,\n        state: WidgetState,\n    ) =>\n        | any\n        | null\n        | React.ReactElement<React.ComponentProps<\"div\">>\n        | React.ReactElement<React.ComponentProps<\"span\">>\n        | React.ReactNode = (\n        node: any,\n        nestedOutput: any,\n        state: WidgetState,\n    ) => {\n        const apiOptions = this.getApiOptions();\n        const imagePlaceholder = apiOptions.imagePlaceholder;\n\n        if (node.type === \"widget\") {\n            const widgetPlaceholder = apiOptions.widgetPlaceholder;\n\n            if (widgetPlaceholder) {\n                return widgetPlaceholder;\n            }\n            // Widgets can contain text nodes, so we don't center them with\n            // markdown magic here.\n            // Instead, we center them with css magic in articles.less\n            // /cry(aria)\n            this._foundTextNodes = true;\n\n            if (_.contains(this.widgetIds, node.id)) {\n                // We don't want to render a duplicate widget key/ref,\n                // as this causes problems with react (for obvious\n                // reasons). Instead we just notify the\n                // hopefully-content-creator that they need to change the\n                // widget id.\n                return (\n                    <span key={state.key} className=\"renderer-widget-error\">\n                        {[\n                            \"Widget [[\",\n                            \"☃\",\n                            \" \",\n                            node.id,\n                            \"]] already exists.\",\n                        ].join(\"\")}\n                    </span>\n                );\n            }\n            this.widgetIds.push(node.id);\n            return this.renderWidget(node.widgetType, node.id, state);\n        }\n        if (node.type === \"blockMath\") {\n            // We render math here instead of in perseus-markdown.jsx\n            // because we need to pass it our onRender callback.\n            const content = preprocessTex(node.content);\n\n            const innerStyle = {\n                // HACK(benkomalo): we only want horizontal scrolling, but\n                // overflowX: 'auto' causes a vertical scrolling scrollbar\n                // as well, despite the parent and child elements having\n                // the exact same height. Force it to not scroll by\n                // applying overflowY: 'hidden'\n                overflowX: \"auto\",\n                overflowY: \"hidden\",\n\n                // HACK(kevinb): overflowY: 'hidden' inadvertently clips the\n                // top and bottom of some fractions.  We add padding to the\n                // top and bottom to avoid the clipping and then correct for\n                // the padding by adding equal but opposite margins.\n                paddingTop: 10,\n                paddingBottom: 10,\n                marginTop: -10,\n                marginBottom: -10,\n            } as const;\n\n            if (apiOptions.isMobile) {\n                // The style for the body of articles and exercises on mobile is\n                // to have a 16px margin.  When a user taps to zoom math we'd\n                // like the math to extend all the way to the edge of the page/\n                // To achieve this affect we nest the Zoomable component in two\n                // nested divs. The outer div has a negative margin to\n                // counteract the margin on main perseus container.  The inner\n                // div adds the margin back as padding so that when the math is\n                // scaled out it's inset from the edge of the page.  When the\n                // TeX component is full size it will extend to the edge of the\n                // page if it's larger than the page.\n                //\n                // TODO(kevinb) automatically determine the margin size\n                const margin = 16;\n                const outerStyle = {\n                    marginLeft: -margin,\n                    marginRight: -margin,\n                } as const;\n                const horizontalPadding = {\n                    paddingLeft: margin,\n                    paddingRight: margin,\n                } as const;\n\n                const mobileInnerStyle = {\n                    ...innerStyle,\n                    ...styles.mobileZoomableParentFix,\n                } as const;\n\n                return (\n                    <div\n                        key={state.key}\n                        className=\"perseus-block-math\"\n                        style={outerStyle}\n                    >\n                        <ErrorBoundary>\n                            <div\n                                className=\"perseus-block-math-inner\"\n                                style={{\n                                    ...mobileInnerStyle,\n                                    ...horizontalPadding,\n                                }}\n                            >\n                                <ZoomableTeX>{content}</ZoomableTeX>\n                            </div>\n                        </ErrorBoundary>\n                    </div>\n                );\n            }\n            return (\n                <div key={state.key} className=\"perseus-block-math\">\n                    <ErrorBoundary>\n                        <div\n                            className=\"perseus-block-math-inner\"\n                            style={innerStyle}\n                        >\n                            <AssetContext.Consumer>\n                                {({setAssetStatus}) => (\n                                    <TeX setAssetStatus={setAssetStatus}>\n                                        {content}\n                                    </TeX>\n                                )}\n                            </AssetContext.Consumer>\n                        </div>\n                    </ErrorBoundary>\n                </div>\n            );\n        }\n        if (node.type === \"math\") {\n            // Replace uses of \\begin{align}...\\end{align} which KaTeX doesn't\n            // support (yet) with \\begin{aligned}...\\end{aligned} which renders\n            // the same is supported by KaTeX.  It does the same for align*.\n            // TODO(kevinb) update content to use aligned instead of align.\n            const tex = node.content.replace(/\\{align[*]?\\}/g, \"{aligned}\");\n\n            // We render math here instead of in perseus-markdown.jsx\n            // because we need to pass it our onRender callback.\n            return (\n                <span\n                    key={state.key}\n                    style={{\n                        // If math is directly next to text, don't let it\n                        // wrap to the next line\n                        whiteSpace: \"nowrap\",\n                    }}\n                >\n                    <ErrorBoundary>\n                        {/* We add extra empty spans around the math to make it not\n                        wrap (I don't know why this works, but it does) */}\n                        <span />\n                        <AssetContext.Consumer>\n                            {({setAssetStatus}) => (\n                                <TeX\n                                    onRender={this.props.onRender}\n                                    setAssetStatus={setAssetStatus}\n                                >\n                                    {tex}\n                                </TeX>\n                            )}\n                        </AssetContext.Consumer>\n                        <span />\n                    </ErrorBoundary>\n                </span>\n            );\n        }\n        if (node.type === \"image\") {\n            if (imagePlaceholder) {\n                return imagePlaceholder;\n            }\n\n            // We need to add width and height to images from our\n            // props.images mapping.\n\n            // We do a _.has check here to avoid weird things like\n            // 'toString' or '__proto__' as a url.\n            const extraAttrs = _.has(this.props.images, node.target)\n                ? this.props.images[node.target]\n                : null;\n\n            // The width of a table column is determined by the widest table\n            // cell within that column, but responsive images constrain\n            // themselves to the width of their parent containers. Thus,\n            // responsive images don't do very well within tables. To avoid\n            // haphazard sizing, simply make images within tables unresponsive.\n            // TODO(alex): Make tables themselves responsive.\n            const responsive = !state.inTable;\n            return (\n                <ErrorBoundary key={state.key}>\n                    <AssetContext.Consumer>\n                        {({setAssetStatus}) => (\n                            <SvgImage\n                                setAssetStatus={setAssetStatus}\n                                // @ts-expect-error [FEI-5003] - TS2322 - Type 'string | null | undefined' is not assignable to type 'string | undefined'.\n                                src={PerseusMarkdown.sanitizeUrl(node.target)}\n                                alt={node.alt}\n                                title={node.title}\n                                responsive={responsive}\n                                onUpdate={this.props.onRender}\n                                zoomToFullSizeOnMobile={\n                                    apiOptions.isMobile && apiOptions.isArticle\n                                }\n                                {...extraAttrs}\n                            />\n                        )}\n                    </AssetContext.Consumer>\n                </ErrorBoundary>\n            );\n        }\n        if (node.type === \"columns\") {\n            // Note that we have two columns. This is so we can put\n            // a className on the outer renderer content for SAT.\n            // TODO(aria): See if there is a better way we can do\n            // things like this\n            this._isTwoColumn = true;\n            // but then render normally:\n            return (\n                <ErrorBoundary key={state.key}>\n                    {PerseusMarkdown.ruleOutput(node, nestedOutput, state)}\n                </ErrorBoundary>\n            );\n        }\n        if (node.type === \"text\") {\n            if (rContainsNonWhitespace.test(node.content)) {\n                this._foundTextNodes = true;\n            }\n\n            // Used by the translator portal to replace image URLs with\n            // placeholders, see preprocessWidgets in manticore-utils.js\n            // for more details.\n            if (imagePlaceholder && rImageURL.test(node.content)) {\n                return imagePlaceholder;\n            }\n            return node.content;\n        }\n        if (node.type === \"table\" || node.type === \"titledTable\") {\n            const output = PerseusMarkdown.ruleOutput(node, nestedOutput, {\n                ...state,\n                isMobile: apiOptions.isMobile,\n                inTable: true,\n            });\n\n            if (!apiOptions.isMobile) {\n                return output;\n            }\n\n            const margin = 16;\n            const outerStyle = {\n                marginLeft: -margin,\n                marginRight: -margin,\n            } as const;\n            const innerStyle = {\n                paddingLeft: 0,\n                paddingRight: 0,\n            } as const;\n            const mobileInnerStyle = {\n                ...innerStyle,\n                ...styles.mobileZoomableParentFix,\n            } as const;\n\n            const wrappedOutput = (\n                <div style={{...mobileInnerStyle, overflowX: \"auto\"}}>\n                    <ErrorBoundary>\n                        <Zoomable animateHeight={true}>{output}</Zoomable>\n                    </ErrorBoundary>\n                </div>\n            );\n\n            // TODO(benkomalo): how should we deal with tappable items inside\n            // of tables?\n            return <div style={outerStyle}>{wrappedOutput}</div>;\n        }\n        // If it's a \"normal\" or \"simple\" markdown node, just\n        // output it using its output rule.\n        return (\n            <ErrorBoundary key={state.key}>\n                {PerseusMarkdown.ruleOutput(node, nestedOutput, state)}\n            </ErrorBoundary>\n        );\n    };\n\n    handleRender: (prevProps: Props) => void = (prevProps: Props) => {\n        const onRender = this.props.onRender;\n        const oldOnRender = prevProps.onRender;\n\n        // In the common case of no callback specified, avoid this work.\n        if (onRender !== noopOnRender || oldOnRender !== noopOnRender) {\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'find' does not exist on type 'JQueryStatic'.\n            const $images = $(ReactDOM.findDOMNode(this)).find(\"img\");\n\n            // Fire callback on image load...\n            if (oldOnRender !== noopOnRender) {\n                $images.off(\"load\", oldOnRender);\n            }\n\n            if (onRender !== noopOnRender) {\n                $images.on(\"load\", onRender);\n            }\n        }\n\n        // ...as well as right now (non-image, non-TeX or image from cache)\n        onRender();\n    };\n\n    // Sets the current focus path\n    // If the new focus path is not a prefix of the old focus path,\n    // we send an onChangeFocus event back to our parent.\n    _setCurrentFocus: (path: FocusPath) => void = (path: FocusPath) => {\n        const apiOptions = this.getApiOptions();\n\n        // We don't do this when the new path is a prefix because\n        // that prefix is already focused (we're just in a more specific\n        // area of it). This makes it safe to call _setCurrentFocus\n        // whenever a widget is interacted with--we won't wipe out\n        // our focus state if we are already focused on a subpart\n        // of that widget (i.e. a transformation NumberInput inside\n        // of a transformer widget).\n        if (!isIdPathPrefix(path, this._currentFocus)) {\n            const prevFocus = this._currentFocus;\n\n            if (prevFocus) {\n                this.blurPath(prevFocus);\n            }\n\n            this._currentFocus = path;\n            apiOptions.onFocusChange(this._currentFocus, prevFocus);\n        }\n    };\n\n    focus: () => boolean | null | undefined = () => {\n        let id;\n        let focusResult;\n        for (let i = 0; i < this.widgetIds.length; i++) {\n            const widgetId = this.widgetIds[i];\n            const widget = this.getWidgetInstance(widgetId);\n            const widgetFocusResult = widget && widget.focus && widget.focus();\n            if (widgetFocusResult) {\n                id = widgetId;\n                focusResult = widgetFocusResult;\n                break;\n            }\n        }\n\n        if (id) {\n            // reconstruct a {path, element} focus object\n            let path;\n            if (typeof focusResult === \"object\") {\n                // TODO(jeremy): I am 99% sure this path is no longer possible.\n                // In D10274, focus management sometimes returned an object\n                // with a `path` and `element` key. But later in D11387 and\n                // D13664 things have been changed and seemingly removed the\n                // object return value.\n                // The result of focus was a {path, id} object itself\n                path = [id].concat(focusResult.path || []);\n                Log.error(\n                    \"Renderer received a focus result of type 'object' \" +\n                        \"instead of the expected type 'boolean'\",\n                    Errors.Internal,\n                    {\n                        loggedMetadata: {\n                            focusResult: JSON.stringify(focusResult),\n                            currentProps: JSON.stringify(\n                                this.state.widgetProps,\n                            ),\n                        },\n                    },\n                );\n            } else {\n                // The result of focus was true or the like; just\n                // construct a root focus object\n                path = [id];\n            }\n\n            this._setCurrentFocus(path);\n            return true;\n        }\n    };\n\n    getDOMNodeForPath: (path: FocusPath) => Element | Text | null | undefined =\n        (path: FocusPath) => {\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n            const widgetId = _.first(path);\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n            const interWidgetPath = _.rest(path);\n\n            // Widget handles parsing of the interWidgetPath. If the path is empty\n            // beyond the widgetID, as a special case we just return the widget's\n            // DOM node.\n            const widget = this.getWidgetInstance(widgetId);\n            const getNode = widget && widget.getDOMNodeForPath;\n            if (getNode) {\n                return getNode(interWidgetPath);\n            }\n            if (interWidgetPath.length === 0) {\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Widget | null | undefined' is not assignable to parameter of type 'ReactInstance | null | undefined'.\n                return ReactDOM.findDOMNode(widget);\n            }\n        };\n\n    getGrammarTypeForPath: (path: FocusPath) => string | null | undefined = (\n        path: FocusPath,\n    ) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const widgetId = _.first(path);\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const interWidgetPath = _.rest(path);\n\n        const widget = this.getWidgetInstance(widgetId);\n        if (widget && widget.getGrammarTypeForPath) {\n            return widget.getGrammarTypeForPath(interWidgetPath);\n        }\n    };\n\n    getInputPaths: () => ReadonlyArray<FocusPath> = () => {\n        const inputPaths: Array<FocusPath> = [];\n        _.each(this.widgetIds, (widgetId: string) => {\n            const widget = this.getWidgetInstance(widgetId);\n            if (widget && widget.getInputPaths) {\n                // Grab all input paths and add widgetID to the front\n                const widgetInputPaths = widget.getInputPaths();\n                // Prefix paths with their widgetID and add to collective\n                // list of paths.\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(inputPath: string) => void' is not assignable to parameter of type 'CollectionIterator<FocusPath, void, readonly FocusPath[]>'.\n                _.each(widgetInputPaths, (inputPath: string) => {\n                    const relativeInputPath = [widgetId].concat(inputPath);\n                    inputPaths.push(relativeInputPath);\n                });\n            }\n        });\n\n        return inputPaths;\n    };\n\n    focusPath: (path: FocusPath) => void = (path: FocusPath) => {\n        // No need to focus if it's already focused\n        if (_.isEqual(this._currentFocus, path)) {\n            return;\n        }\n        if (this._currentFocus) {\n            // Unfocus old path, if exists\n            this.blurPath(this._currentFocus);\n        }\n\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const widgetId = _.first(path);\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const interWidgetPath = _.rest(path);\n\n        // Widget handles parsing of the interWidgetPath\n        const focusWidget = this.getWidgetInstance(widgetId);\n        if (focusWidget && focusWidget.focusInputPath) {\n            focusWidget.focusInputPath(interWidgetPath);\n        }\n    };\n\n    blurPath: (path: FocusPath) => void = (path: FocusPath) => {\n        // No need to blur if it's not focused\n        if (!_.isEqual(this._currentFocus, path)) {\n            return;\n        }\n\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const widgetId = _.first(path);\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const interWidgetPath = _.rest(path);\n        const widget = this.getWidgetInstance(widgetId);\n        // We might be in the editor and blurring a widget that no\n        // longer exists, so only blur if we actually found the widget\n        if (widget) {\n            const blurWidget = this.getWidgetInstance(widgetId);\n            if (blurWidget && blurWidget.blurInputPath) {\n                // Widget handles parsing of the interWidgetPath\n                blurWidget.blurInputPath(interWidgetPath);\n            }\n        }\n    };\n\n    blur: () => void = () => {\n        if (this._currentFocus) {\n            this.blurPath(this._currentFocus);\n        }\n    };\n\n    // Serializes widget state. Seems to be used only by editors though.\n    serialize: () => Record<any, any> = () => {\n        const state: Record<string, any> = {};\n        _.each(\n            this.state.widgetInfo,\n            function (info, id) {\n                // eslint-disable-next-line @babel/no-invalid-this\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                // eslint-disable-next-line @babel/no-invalid-this\n                const widget = this.getWidgetInstance(id);\n                const s = widget.serialize();\n                if (!_.isEmpty(s)) {\n                    state[id] = s;\n                }\n            },\n            this,\n        );\n        return state;\n    };\n\n    emptyWidgets: () => any = () => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(id: string) => boolean | undefined' is not assignable to parameter of type 'Iteratee<string[], boolean, string>'.\n        return _.filter(this.widgetIds, (id) => {\n            const widgetInfo = this._getWidgetInfo(id);\n            if (widgetInfo.static) {\n                // Static widgets shouldn't count as empty\n                return false;\n            }\n            const widget = this.getWidgetInstance(id);\n            if (widget && widget.simpleValidate) {\n                const score: PerseusScore = widget.simpleValidate(\n                    widgetInfo.options,\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'null' is not assignable to parameter of type '((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined'.\n                    null,\n                );\n                return Util.scoreIsEmpty(score);\n            }\n        });\n    };\n\n    _setWidgetProps: SetWidgetPropsFn = (id, newProps, cb, silent) => {\n        this.setState(\n            (prevState) => {\n                const widgetProps = {\n                    ...prevState.widgetProps,\n                    [id]: {\n                        ...prevState.widgetProps[id],\n                        ...newProps,\n                    },\n                } as const;\n\n                // Update the `lastUsedWidgetId` to this widget - unless we're\n                // in silent mode. We only want to track the last widget that\n                // was actually _used_, and silent updates generally don't come\n                // from _usage_.\n                const lastUsedWidgetId = silent\n                    ? prevState.lastUsedWidgetId\n                    : id;\n\n                if (!silent) {\n                    this.props.onSerializedStateUpdated(\n                        this.getSerializedState(widgetProps),\n                    );\n                }\n\n                return {\n                    lastUsedWidgetId,\n                    widgetProps,\n                };\n            },\n            () => {\n                // Wait until all components have rendered. In React 16 setState\n                // callback fires immediately after this componentDidUpdate, and\n                // there is no guarantee that parent/siblings components have\n                // finished rendering.\n                // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n                // eslint-disable-next-line no-restricted-syntax\n                setTimeout(() => {\n                    const cbResult = cb && cb();\n                    if (!silent) {\n                        this.props.onInteractWithWidget(id);\n                    }\n                    if (cbResult !== false) {\n                        // TODO(jack): For some reason, some widgets don't always\n                        // end up in refs here, which is repro-able if you make an\n                        // [[ orderer 1 ]] and copy-paste this, then change it to\n                        // be an [[ orderer 2 ]]. The resulting Renderer ends up\n                        // with an \"orderer 2\" ref but not an \"orderer 1\" ref.\n                        // @_@??\n                        // TODO(jack): Figure out why this is happening and fix it\n                        // As far as I can tell, this is only an issue in the\n                        // editor-page, so doing this shouldn't break clients\n                        // hopefully\n                        this._setCurrentFocus([id]);\n                    }\n                }, 0);\n            },\n        );\n    };\n\n    setInputValue: (\n        path: FocusPath,\n        newValue: string,\n        focus: () => unknown,\n    ) => void = (path, newValue, focus) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const widgetId = _.first(path);\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'FocusPath' is not assignable to parameter of type 'List<any>'.\n        const interWidgetPath = _.rest(path);\n        const widget = this.getWidgetInstance(widgetId);\n\n        // Widget handles parsing of the interWidgetPath.\n        widget?.setInputValue?.(interWidgetPath, newValue, focus);\n    };\n\n    /**\n     * Returns an array of the widget `.getUserInput()` results\n     */\n    getUserInput: () => ReadonlyArray<WidgetUserInput | null | undefined> =\n        () => {\n            return this.widgetIds.map((id: string) => {\n                const widget = this.getWidgetInstance(id);\n                if (widget && widget.getUserInput) {\n                    // TODO(Jeremy): Add the widget ID in here so we can more\n                    // easily correlate it to the widget state.\n                    return widget.getUserInput();\n                }\n            });\n        };\n\n    /**\n     * Returns an array of all widget IDs in the order they occur in\n     * the content.\n     */\n    getWidgetIds: () => ReadonlyArray<string> = () => {\n        return this.widgetIds;\n    };\n\n    /**\n     * Returns the result of `.getUserInput()` for each widget, in\n     * a map from widgetId to userInput.\n     * NOTE(jeremy): This function is hauntingly similar to `getUserInput` with\n     * the major difference being that this function returns a map of\n     * `widgetID` => UserInput and `getUserInput` simply returns an array. It\n     * would be trivial to map between the results of each of these functions,\n     * so we should aim to remove one of these functions.\n     */\n    getUserInputForWidgets: () => {\n        [widgetId: string]: WidgetUserInput | null | undefined;\n    } = () => {\n        return mapObjectFromArray(this.widgetIds, (id) => {\n            const widget = this.getWidgetInstance(id);\n            if (widget && widget.getUserInput) {\n                return widget.getUserInput();\n            }\n        });\n    };\n\n    /**\n     * Returns an object mapping from widget ID to perseus-style score.\n     * The keys of this object are the values of the array returned\n     * from `getWidgetIds`.\n     */\n    scoreWidgets: () => {\n        [widgetId: string]: PerseusScore;\n    } = () => {\n        const widgetProps = this.state.widgetInfo;\n        const onInputError = this.getApiOptions().onInputError;\n\n        const gradedWidgetIds = _.filter(this.widgetIds, (id) => {\n            const props = widgetProps[id];\n            const widgetIsGraded: boolean =\n                props?.graded == null || props.graded;\n            const widgetIsStatic = !!props?.static;\n            // Ungraded widgets or widgets set to static shouldn't be graded.\n            return widgetIsGraded && !widgetIsStatic;\n        });\n\n        const widgetScores: Record<string, any> = {};\n        _.each(gradedWidgetIds, (id) => {\n            const props = widgetProps[id];\n            const widget = this.getWidgetInstance(id);\n            // widget can be undefined if it hasn't yet been rendered\n            if (widget && widget.simpleValidate) {\n                widgetScores[id] = widget.simpleValidate(\n                    props?.options,\n                    onInputError,\n                );\n            }\n        });\n\n        return widgetScores;\n    };\n\n    /**\n     * Grades the content.\n     */\n    score: () => PerseusScore = () => {\n        return _.reduce(this.scoreWidgets(), Util.combineScores, Util.noScore);\n    };\n\n    guessAndScore: () => [any, PerseusScore] = () => {\n        const totalGuess = this.getUserInput();\n        const totalScore = this.score();\n\n        return [totalGuess, totalScore];\n    };\n\n    examples: () => ReadonlyArray<string> | null | undefined = () => {\n        const widgetIds = this.widgetIds;\n        const examples = _.compact(\n            _.map(widgetIds, (widgetId) => {\n                const widget = this.getWidgetInstance(widgetId);\n                return widget != null && widget.examples\n                    ? widget.examples()\n                    : null;\n            }),\n        );\n\n        // no widgets with examples\n        if (!examples.length) {\n            return null;\n        }\n\n        const allEqual = _.all(examples, function (example) {\n            return _.isEqual(examples[0], example);\n        });\n\n        // some widgets have different examples\n        // TODO(alex): handle this better\n        if (!allEqual) {\n            return null;\n        }\n\n        return examples[0];\n    };\n\n    // TranslationLinter callback\n    handletranslationLintErrors: (lintErrors: ReadonlyArray<string>) => void = (\n        lintErrors: ReadonlyArray<string>,\n    ) => {\n        if (!this._isMounted) {\n            return;\n        }\n\n        this.setState({\n            translationLintErrors: lintErrors,\n        });\n    };\n\n    render(): React.ReactNode {\n        const apiOptions = this.getApiOptions();\n\n        if (this.reuseMarkdown) {\n            return this.lastRenderedMarkdown;\n        }\n\n        const content = this.getContent(this.props, this.state);\n        // `this.widgetIds` is appended to in `this.outputMarkdown`:\n        this.widgetIds = [];\n\n        if (this.shouldRenderJiptPlaceholder(this.props, this.state)) {\n            // Crowdin's JIPT (Just in place translation) uses a fake language\n            // with language tag \"en-pt\" where the value of the translations\n            // look like: {crwdns2657085:0}{crwdne2657085:0} where it keeps the\n            // {crowdinId:ngettext variant}. We detect whether the current\n            // content matches this, so we can take over rendering of\n            // the perseus content as the translators interact with jipt.\n            // We search for only part of the tag that crowdin uses to guard\n            // against them changing the format on us. The full tag it looks\n            // for can be found in https://cdn.crowdin.net/jipt/jipt.js\n            // globalPhrase var.\n\n            // If we haven't already added this component to the registry do so\n            // now. showHints() may cause this component to be rerendered\n            // before jipt has a chance to replace its contents, so this check\n            // will keep us from adding the component to the registry a second\n            // time.\n            if (!this.translationIndex) {\n                this.translationIndex =\n                    getDependencies().rendererTranslationComponents.addComponent(\n                        this,\n                    );\n            }\n\n            // For articles, we add jipt data to individual paragraphs. For\n            // exercises, we add it to the renderer and let translators\n            // translate the entire thing. For the article equivalent of\n            // this if block, search this file for where we render a\n            // QuestionParagraph, and see the `isJipt:` parameter sent to\n            // PerseusMarkdown.parse()\n            if (!apiOptions.isArticle) {\n                // We now need to output this tag, as jipt looks for it to be\n                // able to replace it with a translation that it runs an ajax\n                // call to get.  We add a data attribute with the index to the\n                // Persues.TranslationComponent registry so that when jipt\n                // calls its before_dom_insert we can lookup this component by\n                // this attribute and render the text with markdown.\n                return (\n                    <DefinitionProvider>\n                        <div\n                            data-perseus-component-index={this.translationIndex}\n                        >\n                            {content}\n                        </div>\n                    </DefinitionProvider>\n                );\n            }\n        }\n\n        // Hacks:\n        // We use mutable state here to figure out whether the output\n        // had two columns.\n        // It is updated to true by `this.outputMarkdown` if a\n        // column break is found\n        // TODO(aria): We now have a state variable threaded through\n        // simple-markdown output. We should mutate it instead of\n        // state on this component to do this in a less hacky way.\n        this._isTwoColumn = false;\n\n        // Parse the string of markdown to a parse tree\n        const parsedMarkdown = PerseusMarkdown.parse(content, {\n            // Recognize crowdin IDs while translating articles\n            // (This should never be hit by exercises, though if you\n            // decide you want to add a check that this is an article,\n            // go for it.)\n            isJipt: this.translationIndex != null,\n        });\n\n        // Optionally apply the linter to the parse tree\n        if (this.props.linterContext.highlightLint) {\n            // If highlightLint is true and lint is detected, this call\n            // will modify the parse tree by adding lint nodes that will\n            // serve to highlight the lint when rendered\n            const context: Context = {\n                content: this.props.content,\n                widgets: this.props.widgets,\n                ...this.props.linterContext,\n            };\n\n            PerseusLinter.runLinter(parsedMarkdown, context, true);\n\n            // Apply the lint errors from the last TranslationLinter run.\n            // TODO(joshuan): Support overlapping dots.\n            this._translationLinter.applyLintErrors(parsedMarkdown, [\n                ...this.state.translationLintErrors,\n                ...(this.props.legacyPerseusLint || []),\n            ]);\n        }\n\n        // Render the linted markdown parse tree with React components\n        const markdownContents = this.outputMarkdown(parsedMarkdown, {\n            baseElements: apiOptions.baseElements,\n        });\n\n        const className = classNames({\n            [ApiClassNames.RENDERER]: true,\n            [ApiClassNames.RESPONSIVE_RENDERER]: true,\n            [ApiClassNames.TWO_COLUMN_RENDERER]: this._isTwoColumn,\n        });\n\n        this.lastRenderedMarkdown = (\n            <DefinitionProvider>\n                <div className={className}>{markdownContents}</div>\n            </DefinitionProvider>\n        );\n        return this.lastRenderedMarkdown;\n    }\n}\n\nconst styles = {\n    mobileZoomableParentFix: {\n        // NOTE(abdul): There is an issue where transform animations will\n        // cause the Zoomable component to disappear when running on the\n        // native app on iPad (iOS 13). I found some answers online that recommend\n        // transforming the parent in 3D space. Doing this forces hardware\n        // acceleration, which causes the process to run on the GPU. It's not\n        // clear to me why this fixes the issue, but it's suggested online\n        // to people dealing with similar disappearance and flickering issues.\n        transform: \"translate3d(0,0,0)\",\n    },\n} as const;\n\nexport default Renderer;\n","/*\n * In this file, an `expression` is some portion of valid TeX enclosed in\n * curly brackets.\n */\n\n/*\n * Find the index at which an expression ends, i.e., has an unmatched\n * closing curly bracket. This method assumes that we start with a non-open\n * bracket character and end when we've seen more left than right brackets\n * (rather than assuming that we start with a bracket character and wait for\n * bracket equality).\n */\nfunction findEndpoint(tex, currentIndex: number) {\n    let bracketDepth = 0;\n\n    for (let i = currentIndex, len = tex.length; i < len; i++) {\n        const c = tex[i];\n\n        if (c === \"{\") {\n            bracketDepth++;\n        } else if (c === \"}\") {\n            bracketDepth--;\n        }\n\n        if (bracketDepth < 0) {\n            return i;\n        }\n    }\n    // If we never see unbalanced curly brackets, default to the\n    // entire string\n    return tex.length;\n}\n\n/*\n * Parses an individual set of curly brackets into TeX.\n */\nfunction parseNextExpression(\n    tex: string,\n    currentIndex: number,\n    handler: (exp1: string, exp2: string) => string,\n) {\n    // Find the first '{' and grab subsequent TeX\n    // Ex) tex: '{3}{7}', and we want the '3'\n    const openBracketIndex = tex.indexOf(\"{\", currentIndex);\n    const nextExpIndex = openBracketIndex + 1;\n\n    // Truncate to only contain remaining TeX\n    const endpoint = findEndpoint(tex, nextExpIndex);\n    const expressionTeX = tex.substring(nextExpIndex, endpoint);\n    const parsedExp = walkTex(expressionTeX, handler);\n\n    return {\n        endpoint: endpoint,\n        expression: parsedExp,\n    };\n}\n\nfunction getNextFracIndex(tex: string, currentIndex: number) {\n    const dfrac = \"\\\\dfrac\";\n    const frac = \"\\\\frac\";\n\n    const nextFrac = tex.indexOf(frac, currentIndex);\n    const nextDFrac = tex.indexOf(dfrac, currentIndex);\n\n    if (nextFrac > -1 && nextDFrac > -1) {\n        return Math.min(nextFrac, nextDFrac);\n    }\n    if (nextFrac > -1) {\n        return nextFrac;\n    }\n    if (nextDFrac > -1) {\n        return nextDFrac;\n    }\n    return -1;\n}\n\nfunction walkTex(\n    tex: string,\n    handler: (exp1: string, exp2: string) => string,\n): string {\n    if (!tex) {\n        return \"\";\n    }\n\n    // Ex) tex: '2 \\dfrac {3}{7}'\n    let parsedString = \"\";\n    let currentIndex = 0;\n    let nextFrac = getNextFracIndex(tex, currentIndex);\n\n    // For each \\dfrac, find the two expressions (wrapped in {}) and recur\n    while (nextFrac > -1) {\n        // Gather first fragment, preceding \\dfrac\n        // Ex) parsedString: '2 '\n        parsedString += tex.substring(currentIndex, nextFrac);\n\n        // Remove everything preceding \\dfrac, which has been parsed\n        currentIndex = nextFrac;\n\n        // Parse first expression and move index past it\n        // Ex) firstParsedExpression.expression: '3'\n        const firstParsedExpression = parseNextExpression(\n            tex,\n            currentIndex,\n            handler,\n        );\n        currentIndex = firstParsedExpression.endpoint + 1;\n\n        // Parse second expression\n        // Ex) secondParsedExpression.expression: '7'\n        const secondParsedExpression = parseNextExpression(\n            tex,\n            currentIndex,\n            handler,\n        );\n        currentIndex = secondParsedExpression.endpoint + 1;\n\n        // Add expressions to running total of parsed expressions\n        if (parsedString.length) {\n            parsedString += \" \";\n        }\n\n        // Apply a custom handler based on the parsed subexpressions\n        parsedString += handler(\n            firstParsedExpression.expression,\n            secondParsedExpression.expression,\n        );\n\n        // Find next DFrac, relative to currentIndex\n        nextFrac = getNextFracIndex(tex, currentIndex);\n    }\n\n    // Add remaining TeX, which is \\dfrac-free\n    parsedString += tex.slice(currentIndex);\n\n    return parsedString;\n}\n\n/*\n * Modify a TeX expression, returning another TeX expression. The resulting\n * expression will have its innermost fractions stubbed out with \\fracs\n * (as opposed to \\dfracs). All other content will remain untouched.\n */\nfunction modifyTex(tex: string): string {\n    function isNestedFraction(tex: string) {\n        return tex.indexOf(\"\\\\frac\") > -1 || tex.indexOf(\"\\\\dfrac\") > -1;\n    }\n    const handler = function (exp1: string, exp2: string) {\n        let prefix;\n        if (isNestedFraction(exp1) || isNestedFraction(exp2)) {\n            prefix = \"\\\\dfrac\";\n        } else {\n            prefix = \"\\\\frac\";\n        }\n        return prefix + \" {\" + exp1 + \"}{\" + exp2 + \"}\";\n    };\n    return walkTex(tex, handler);\n}\n\n/*\n * Parse a TeX expression into something interpretable by input-number.\n * The process is concerned with: (1) parsing fractions, i.e., \\dfracs; and\n * (2) removing backslash-escaping from certain characters (right now, only\n * percent signs).\n *\n * The basic algorithm for handling \\dfracs splits on \\dfracs and then recurs\n * on the subsequent \"expressions\", i.e., the {} pairs that follow \\dfrac. The\n * recursion is to allow for nested \\dfrac elements.\n *\n * Backslash-escapes are removed with a simple search-and-replace.\n */\nfunction parseTex(tex: string): string {\n    const handler = function (exp1: string, exp2: string) {\n        return exp1 + \"/\" + exp2;\n    };\n    const texWithoutFracs = walkTex(tex, handler);\n    return texWithoutFracs.replace(\"\\\\%\", \"%\");\n}\n\nexport default {\n    parseTex,\n    modifyTex,\n};\n","/* eslint-disable react/sort-comp */\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\nimport {ClassNames as ApiClassNames} from \"../perseus-api\";\nimport TexWrangler from \"../tex-wrangler\";\n\nconst ModifyTex = TexWrangler.modifyTex;\n\ntype Props = {\n    value: string | number;\n    className?: string;\n    labelText?: string;\n    onFocus: () => void;\n    onBlur: () => void;\n};\n\ntype DefaultProps = Pick<Props, \"value\" | \"onFocus\" | \"onBlur\">;\n\ntype State = {\n    focused: boolean;\n    selectorNamespace: string;\n};\n\nclass MathOutput extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        value: \"\",\n        onFocus: function () {},\n        onBlur: function () {},\n    };\n\n    state: State = {\n        focused: false,\n        selectorNamespace: _.uniqueId(\"math-output\"),\n    };\n\n    _getInputClassName: () => string = () => {\n        let className =\n            \"math-output \" +\n            ApiClassNames.INPUT +\n            \" \" +\n            ApiClassNames.INTERACTIVE;\n        if (this.state.focused) {\n            className += \" \" + ApiClassNames.FOCUSED;\n        }\n        if (this.props.className) {\n            className += \" \" + this.props.className;\n        }\n        return className;\n    };\n\n    _getDisplayValue: (arg1: string | number) => string = (value) => {\n        // Cast from (potentially a) number to string\n        let displayText;\n        if (value != null) {\n            displayText = \"\" + value;\n        } else {\n            displayText = \"\";\n        }\n        return ModifyTex(displayText);\n    };\n\n    render(): React.ReactNode {\n        const divStyle = {\n            textAlign: \"center\",\n        } as const;\n        const {TeX} = getDependencies();\n\n        return (\n            <span\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"input\"\n                className={this._getInputClassName()}\n                aria-label={this.props.labelText}\n                onMouseDown={this.focus}\n                onTouchStart={this.focus}\n            >\n                <div style={divStyle}>\n                    <TeX>{this._getDisplayValue(this.props.value)}</TeX>\n                </div>\n            </span>\n        );\n    }\n\n    getValue: () => string | number = () => {\n        return this.props.value;\n    };\n\n    focus: () => void = () => {\n        if (!this.state.focused) {\n            this.props.onFocus();\n            this._bindBlurHandler();\n            this.setState({\n                focused: true,\n            });\n        }\n    };\n\n    blur: () => void = () => {\n        if (this.state.focused) {\n            this.props.onBlur();\n            this._unbindBlurHandler();\n            this.setState({\n                focused: false,\n            });\n        }\n    };\n\n    _bindBlurHandler: () => void = () => {\n        $(document).bind(\"vclick.\" + this.state.selectorNamespace, (e) => {\n            // Detect whether the target has our React DOM node as a parent\n            const $closestWidget = $(e.target).closest(\n                // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                ReactDOM.findDOMNode(this),\n            );\n            if (!$closestWidget.length) {\n                this.blur();\n            }\n        });\n    };\n\n    _unbindBlurHandler: () => void = () => {\n        $(document).unbind(\".\" + this.state.selectorNamespace);\n    };\n\n    componentWillUnmount() {\n        this._unbindBlurHandler();\n    }\n}\n\nexport default MathOutput;\n","/* eslint-disable react/sort-comp */\nimport {TextField} from \"@khanacademy/wonder-blocks-form\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\ntype Props = {\n    value: string | number | null;\n    onChange: (arg1?: any) => void;\n    className?: string;\n    labelText?: string;\n    onFocus?: () => void;\n    onBlur?: () => void;\n    disabled?: boolean;\n    id?: string;\n    placeholder?: string;\n    onKeyDown?: () => void;\n    style?: StyleType;\n};\n\ntype DefaultProps = {\n    value: Props[\"value\"];\n    disabled: Props[\"disabled\"];\n};\n\nlet lastId = 0;\nfunction uniqueIdForInput(prefix = \"input-\") {\n    lastId++;\n    return `${prefix}${lastId}`;\n}\n\nclass TextInput extends React.Component<Props> {\n    static defaultProps: DefaultProps = {\n        value: \"\",\n        disabled: false,\n    };\n\n    id: string;\n\n    constructor(props: Props) {\n        super(props);\n        if (props.id) {\n            this.id = props.id;\n        } else {\n            this.id = uniqueIdForInput();\n        }\n    }\n\n    render(): React.ReactNode {\n        const {\n            labelText,\n            value,\n            onFocus,\n            onBlur,\n            disabled,\n            placeholder,\n            onKeyDown,\n            style,\n        } = this.props;\n\n        const formattedValue = value === null ? \"\" : value.toString();\n\n        return (\n            // $FlowIgnore\n            <TextField\n                style={style}\n                disabled={disabled}\n                id={this.id}\n                value={formattedValue}\n                type=\"text\"\n                aria-label={labelText}\n                onChange={(value) => this.props.onChange(value)}\n                placeholder={placeholder}\n                onFocus={onFocus}\n                onBlur={onBlur}\n                onKeyDown={onKeyDown}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type '{ style: StyleType; disabled: boolean | undefined; id: string; value: string; type: \"text\"; \"aria-label\": string | undefined; onChange: (value: string) => void; placeholder: string | undefined; ... 5 more ...; autoComplete: string; }' is not assignable to type 'IntrinsicAttributes & ExportProps & RefAttributes<HTMLInputElement>'.\n                autoCorrect=\"off\"\n                autoCapitalize=\"off\"\n                autoComplete=\"off\"\n            />\n        );\n    }\n\n    focus: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this).focus();\n    };\n\n    blur: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'blur' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this).blur();\n    };\n\n    getValue: () => string | null | undefined = () => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'value' does not exist on type 'Element | Text'.\n        return ReactDOM.findDOMNode(this)?.value;\n    };\n\n    getStringValue: () => string | null | undefined = () => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'value' does not exist on type 'Element | Text'.\n        return ReactDOM.findDOMNode(this)?.value.toString();\n    };\n\n    setSelectionRange: (arg1: number, arg2: number) => void = (\n        selectionStart,\n        selectionEnd,\n    ) => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'setSelectionRange' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this).setSelectionRange(\n            selectionStart,\n            selectionEnd,\n        );\n    };\n\n    getSelectionStart: () => number = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'selectionStart' does not exist on type 'Element | Text'.\n        return ReactDOM.findDOMNode(this).selectionStart;\n    };\n\n    getSelectionEnd: () => number = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'selectionEnd' does not exist on type 'Element | Text'.\n        return ReactDOM.findDOMNode(this).selectionEnd;\n    };\n}\n\nexport default TextInput;\n","/* eslint-disable react/sort-comp */\nimport * as PerseusLinter from \"@khanacademy/perseus-linter\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport {ClassNames as ApiClassNames} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport Util from \"../util\";\n\nimport MathInput from \"./math-input\";\nimport MathOutput from \"./math-output\";\nimport TextInput from \"./text-input\";\nimport Tooltip, {HorizontalDirection, VerticalDirection} from \"./tooltip\";\n\nimport type {LinterContextProps} from \"../types\";\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\nconst {captureScratchpadTouchStart} = Util;\n\ntype Props = {\n    type: \"math\" | \"text\" | \"tex\";\n    value: string;\n    onChange: any;\n    className: string;\n    examples: ReadonlyArray<string>;\n    shouldShowExamples: boolean;\n    convertDotToTimes?: boolean;\n    buttonSet?: string;\n    buttonsVisible?: \"always\" | \"never\" | \"focused\";\n    labelText?: string;\n    onFocus: () => void;\n    onBlur: () => void;\n    disabled: boolean;\n    style?: StyleType;\n    id: string;\n    linterContext: LinterContextProps;\n};\n\ntype DefaultProps = {\n    type: Props[\"type\"];\n    shouldShowExamples: Props[\"shouldShowExamples\"];\n    onFocus: Props[\"onFocus\"];\n    onBlur: Props[\"onBlur\"];\n    disabled: Props[\"disabled\"];\n    linterContext: Props[\"linterContext\"];\n    className: Props[\"className\"];\n};\n\ntype State = {\n    focused: boolean;\n    showExamples: boolean;\n};\n\nclass InputWithExamples extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        type: \"text\",\n        shouldShowExamples: true,\n        onFocus: function () {},\n        onBlur: function () {},\n        disabled: false,\n        linterContext: PerseusLinter.linterContextDefault,\n        className: \"\",\n    };\n\n    state: State = {\n        focused: false,\n        showExamples: false,\n    };\n\n    _getUniqueId: () => string = () => {\n        return `input-with-examples-${btoa(this.props.id).replace(/=/g, \"\")}`;\n    };\n\n    _getInputClassName: () => string = () => {\n        // <MathOutput> is a special component that manages its own class and\n        // state, as it's a <span> that wants to act like an <input>.\n        if (this.props.type === \"tex\") {\n            return this.props.className;\n        }\n\n        // Otherwise, we need to add these INPUT and FOCUSED tags here.\n        let className = ApiClassNames.INPUT + \" \" + ApiClassNames.INTERACTIVE;\n        if (this.state.focused) {\n            className += \" \" + ApiClassNames.FOCUSED;\n        }\n        if (this.props.className) {\n            className += \" \" + this.props.className;\n        }\n        return className;\n    };\n\n    _getPropsForInputType: () => any = () => {\n        // Minimal set of props, used by each input type\n        const id = this._getUniqueId();\n        const inputProps = {\n            id: id,\n            \"aria-describedby\": id,\n            ref: \"input\",\n            className: this._getInputClassName(),\n            labelText: this.props.labelText,\n            value: this.props.value,\n            onFocus: this._handleFocus,\n            onBlur: this._handleBlur,\n            disabled: this.props.disabled,\n            style: this.props.style,\n        } as const;\n\n        if (this.props.type === \"tex\") {\n            return inputProps;\n        }\n\n        // Add useful props required for MATH and TEXT modes\n        _.extend(inputProps, {\n            onChange: this.props.onChange,\n            onTouchStart: captureScratchpadTouchStart,\n        });\n\n        // And add final props that are MATH- and TEXT-specific\n        if (this.props.type === \"math\") {\n            return _.extend(\n                {\n                    buttonSet: this.props.buttonSet,\n                    buttonsVisible: this.props.buttonsVisible,\n                    convertDotToTimes: this.props.convertDotToTimes,\n                },\n                inputProps,\n            );\n        }\n        if (this.props.type === \"text\") {\n            return _.extend(\n                {\n                    autoCapitalize: \"off\",\n                    autoComplete: \"off\",\n                    autoCorrect: \"off\",\n                    spellCheck: \"false\",\n                },\n                inputProps,\n            );\n        }\n    };\n\n    _getComponentForInputType: () => any = () => {\n        switch (this.props.type) {\n            case \"tex\":\n                return MathOutput;\n\n            case \"math\":\n                return MathInput;\n\n            case \"text\":\n                return TextInput;\n\n            default:\n                this.props.type as never;\n                return null;\n        }\n    };\n\n    _renderInput: () => any = () => {\n        const inputProps = this._getPropsForInputType();\n        const InputComponent = this._getComponentForInputType();\n        return <InputComponent {...inputProps} />;\n    };\n\n    render(): React.ReactNode {\n        const input = this._renderInput();\n\n        // Static rendering, which doesn't include the 'tooltip' logic that the\n        // other types require, and is hence handled separately.\n        if (this.props.type === \"tex\") {\n            return input;\n        }\n\n        // Else, we need to be able to show examples\n        const examplesContent = _.map(this.props.examples, (example) => {\n            return \"- \" + example;\n        }).join(\"\\n\");\n\n        const showExamples =\n            this.props.shouldShowExamples && this.state.showExamples;\n\n        return (\n            <Tooltip\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"tooltip\"\n                className=\"perseus-formats-tooltip preview-measure\"\n                horizontalPosition={HorizontalDirection.Left}\n                horizontalAlign={HorizontalDirection.Left}\n                verticalPosition={VerticalDirection.Bottom}\n                arrowSize={10}\n                borderColor=\"#ccc\"\n                show={showExamples}\n            >\n                {input}\n                <div id={this._getUniqueId()}>\n                    <Renderer\n                        content={examplesContent}\n                        linterContext={PerseusLinter.pushContextStack(\n                            this.props.linterContext,\n                            \"input-with-examples\",\n                        )}\n                    />\n                </div>\n            </Tooltip>\n        );\n    }\n\n    _handleFocus: () => void = () => {\n        this.props.onFocus();\n        this.setState({\n            focused: true,\n            showExamples: true,\n        });\n    };\n\n    show: () => void = () => {\n        this.setState({showExamples: true});\n    };\n\n    hide: () => void = () => {\n        this.setState({showExamples: false});\n    };\n\n    _handleBlur: () => void = () => {\n        this.props.onBlur();\n        this.setState({\n            focused: false,\n            showExamples: false,\n        });\n    };\n\n    focus: () => void = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        this.refs.input.focus();\n    };\n\n    blur: () => void = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n        this.refs.input.blur();\n    };\n\n    handleChange: (arg1: any) => void = (e) => {\n        this.props.onChange(e.target.value);\n    };\n}\n\nexport default InputWithExamples;\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","/**\n * A version of the `math-input` subrepo's KeypadInput component that adheres to\n * the same API as Perseus's  MathOuput and NumberInput, allowing it to be\n * dropped in as a replacement for those components without any modifications.\n *\n * TODO(charlie): Once the keypad API has stabilized, move this into the\n * `math-input` subrepo and use it everywhere as a simpler, keypad-coupled\n * interface to `math-input`'s MathInput component.\n */\n\nimport {\n    KeypadInput,\n    KeypadType,\n    keypadElementPropType,\n} from \"@khanacademy/math-input\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nexport default class SimpleKeypadInput extends React.Component<any> {\n    _isMounted = false;\n\n    componentDidMount() {\n        // TODO(scottgrant): This is a hack to remove the deprecated call to\n        // this.isMounted() but is still considered an anti-pattern.\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    focus() {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        this.refs.input.focus(); // eslint-disable-line react/no-string-refs\n    }\n\n    blur() {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n        this.refs.input.blur(); // eslint-disable-line react/no-string-refs\n    }\n\n    getValue(): string | number {\n        return this.props.value;\n    }\n\n    render(): React.ReactNode {\n        const _this = this;\n        // Intercept the `onFocus` prop, as we need to configure the keypad\n        // before continuing with the default focus logic for Perseus inputs.\n        // Intercept the `value` prop so as to map `null` to the empty string,\n        // as the `KeypadInput` does not support `null` values.\n        const {keypadElement, onFocus, value, ...rest} = _this.props;\n\n        return (\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            <KeypadInput\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"input\"\n                keypadElement={keypadElement}\n                onFocus={() => {\n                    if (keypadElement) {\n                        keypadElement.configure(\n                            {\n                                keypadType: KeypadType.FRACTION,\n                            },\n                            () => {\n                                if (_this._isMounted) {\n                                    onFocus && onFocus();\n                                }\n                            },\n                        );\n                    } else {\n                        onFocus && onFocus();\n                    }\n                }}\n                value={value == null ? \"\" : \"\" + value}\n                {...rest}\n            />\n        );\n    }\n}\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'propTypes' does not exist on type 'typeof SimpleKeypadInput'.\nSimpleKeypadInput.propTypes = {\n    keypadElement: keypadElementPropType,\n    onFocus: PropTypes.func,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n};\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/sort-comp */\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport Spacing from \"@khanacademy/wonder-blocks-spacing\";\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport InputWithExamples from \"../components/input-with-examples\";\nimport SimpleKeypadInput from \"../components/simple-keypad-input\";\nimport {ApiOptions} from \"../perseus-api\";\nimport TexWrangler from \"../tex-wrangler\";\nimport KhanAnswerTypes from \"../util/answer-types\";\n\nimport type {PerseusInputNumberWidgetOptions} from \"../perseus-types\";\nimport type {\n    APIOptions,\n    Path,\n    PerseusScore,\n    WidgetExports,\n    WidgetProps,\n} from \"../types\";\n\nconst ParseTex = TexWrangler.parseTex;\n\nconst answerTypes = {\n    number: {\n        name: \"Numbers\",\n        forms: \"integer, decimal, proper, improper, mixed\",\n    },\n    decimal: {\n        name: \"Decimals\",\n        forms: \"decimal\",\n    },\n    integer: {\n        name: \"Integers\",\n        forms: \"integer\",\n    },\n    rational: {\n        name: \"Fractions and mixed numbers\",\n        forms: \"integer, proper, improper, mixed\",\n    },\n    improper: {\n        name: \"Improper numbers (no mixed)\",\n        forms: \"integer, proper, improper\",\n    },\n    mixed: {\n        name: \"Mixed numbers (no improper)\",\n        forms: \"integer, proper, mixed\",\n    },\n    percent: {\n        name: \"Numbers or percents\",\n        forms: \"integer, decimal, proper, improper, mixed, percent\",\n    },\n    pi: {\n        name: \"Numbers with pi\",\n        forms: \"pi\",\n    },\n} as const;\n\nconst formExamples = {\n    integer: function (options) {\n        return i18n._(\"an integer, like $6$\");\n    },\n    proper: function (options) {\n        if (options.simplify === \"optional\") {\n            return i18n._(\"a *proper* fraction, like $1/2$ or $6/10$\");\n        }\n        return i18n._(\"a *simplified proper* fraction, like $3/5$\");\n    },\n    improper: function (options) {\n        if (options.simplify === \"optional\") {\n            return i18n._(\"an *improper* fraction, like $10/7$ or $14/8$\");\n        }\n        return i18n._(\"a *simplified improper* fraction, like $7/4$\");\n    },\n    mixed: function (options) {\n        return i18n._(\"a mixed number, like $1\\\\ 3/4$\");\n    },\n    decimal: function (options) {\n        return i18n._(\"an *exact* decimal, like $0.75$\");\n    },\n    percent: function (options) {\n        return i18n._(\"a percent, like $12.34\\\\%$\");\n    },\n    pi: function (options) {\n        return i18n._(\n            \"a multiple of pi, like $12\\\\ \\\\text{pi}$ or \" +\n                \"$2/3\\\\ \\\\text{pi}$\",\n        );\n    },\n} as const;\n\ntype UserInput = {\n    currentValue: string;\n};\ntype RenderProps = {\n    simplify: PerseusInputNumberWidgetOptions[\"simplify\"];\n    size: PerseusInputNumberWidgetOptions[\"size\"];\n    answerType: PerseusInputNumberWidgetOptions[\"answerType\"];\n    rightAlign: PerseusInputNumberWidgetOptions[\"rightAlign\"];\n};\ntype Rubric = PerseusInputNumberWidgetOptions;\ntype ExternalProps = WidgetProps<RenderProps, Rubric>;\ntype Props = ExternalProps & {\n    apiOptions: NonNullable<ExternalProps[\"apiOptions\"]>;\n    linterContext: NonNullable<ExternalProps[\"linterContext\"]>;\n    rightAlign: NonNullable<ExternalProps[\"rightAlign\"]>;\n    size: NonNullable<ExternalProps[\"size\"]>;\n    currentValue: string;\n    // NOTE(kevinb): This was the only default prop that is listed as\n    // not-required in PerseusInputNumberWidgetOptions.\n    answerType: NonNullable<Rubric[\"answerType\"]>;\n};\n\ntype DefaultProps = {\n    answerType: Props[\"answerType\"];\n    apiOptions: Props[\"apiOptions\"];\n    currentValue: Props[\"currentValue\"];\n    linterContext: Props[\"linterContext\"];\n    rightAlign: Props[\"rightAlign\"];\n    size: Props[\"size\"];\n};\n\nclass InputNumber extends React.Component<Props> {\n    static defaultProps: DefaultProps = {\n        currentValue: \"\",\n        size: \"normal\",\n        answerType: \"number\",\n        rightAlign: false,\n        // NOTE(kevinb): renderer.jsx should be provide this so we probably don't\n        // need to include it in defaultProps.\n        apiOptions: ApiOptions.defaults,\n        linterContext: linterContextDefault,\n    };\n\n    shouldShowExamples: () => boolean = () => {\n        return this.props.answerType !== \"number\";\n    };\n\n    render(): React.ReactNode {\n        if (this.props.apiOptions.customKeypad) {\n            // TODO(charlie): Support \"Review Mode\".\n            const input = (\n                <SimpleKeypadInput\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"input\"\n                    value={this.props.currentValue}\n                    keypadElement={this.props.keypadElement}\n                    onChange={this.handleChange}\n                    onFocus={this._handleFocus}\n                    onBlur={this._handleBlur}\n                />\n            );\n\n            if (this.props.rightAlign) {\n                return <div className=\"perseus-input-right-align\">{input}</div>;\n            }\n\n            return input;\n        }\n        // HACK(johnsullivan): Create a function with shared logic between\n        // this and NumericInput.\n        // TODO(jeremy): Deprecate this widget and prefer numeric-input.\n        const rubric = this.props.reviewModeRubric;\n\n        // Note: This is _very_ similar to what `numeric-input.jsx` does. If\n        // you modify this, double-check if you also need to modify that\n        // component.\n        const inputStyles = [\n            styles.default,\n            this.props.size === \"small\" ? styles.small : null,\n            this.props.rightAlign ? styles.rightAlign : styles.leftAlign,\n        ];\n        // Unanswered\n        if (rubric && !this.props.currentValue) {\n            inputStyles.push(styles.answerStateUnanswered);\n        }\n\n        return (\n            <InputWithExamples\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"input\"\n                value={this.props.currentValue}\n                onChange={this.handleChange}\n                style={inputStyles}\n                type=\"text\"\n                examples={this.examples()}\n                shouldShowExamples={this.shouldShowExamples()}\n                onFocus={this._handleFocus}\n                onBlur={this._handleBlur}\n                id={this.props.widgetId}\n                disabled={this.props.apiOptions.readOnly}\n                linterContext={this.props.linterContext}\n            />\n        );\n    }\n\n    handleChange: (arg1: string, arg2: () => void) => void = (newValue, cb) => {\n        this.props.onChange({currentValue: newValue}, cb);\n    };\n\n    _handleFocus: () => void = () => {\n        this.props.onFocus([]);\n        // HACK(kevinb): We want to dismiss the feedback popover that webapp\n        // displays as soon as a user clicks in in the input field so we call\n        // interactionCallback directly.\n        const {interactionCallback} = this.props.apiOptions;\n        if (interactionCallback) {\n            interactionCallback();\n        }\n    };\n\n    _handleBlur: () => void = () => {\n        this.props.onBlur([]);\n    };\n\n    focus: () => boolean = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        this.refs.input.focus();\n        return true;\n    };\n\n    focusInputPath: (arg1: Path) => void = (inputPath) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        this.refs.input.focus();\n    };\n\n    blurInputPath: (arg1: Path) => void = (inputPath) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n        this.refs.input.blur();\n    };\n\n    getInputPaths: () => ReadonlyArray<Path> = () => {\n        // The widget itself is an input, so we return a single empty list to\n        // indicate this.\n        /* c8 ignore next */\n        return [[]];\n    };\n\n    // Note: We believe that this isn't used anywhere but are leaving it during\n    // the initial refactor\n    getGrammarTypeForPath: (arg1: Path) => string = (path) => {\n        /* c8 ignore next */\n        return \"number\";\n    };\n\n    setInputValue: (arg1: Path, arg2: string, arg3: () => void) => void = (\n        path,\n        newValue,\n        cb,\n    ) => {\n        this.props.onChange(\n            {\n                currentValue: newValue,\n            },\n            cb,\n        );\n    };\n\n    getUserInput: () => UserInput = () => {\n        return InputNumber.getUserInputFromProps(this.props);\n    };\n\n    simpleValidate: (\n        rubric: Rubric,\n        onInputError?: APIOptions[\"onInputError\"],\n    ) => PerseusScore = (rubric, onInputError) => {\n        onInputError = onInputError || function () {};\n        return InputNumber.validate(this.getUserInput(), rubric, onInputError);\n    };\n\n    examples: () => ReadonlyArray<string> = () => {\n        const type = this.props.answerType;\n        const forms = answerTypes[type].forms.split(/\\s*,\\s*/);\n\n        const examples = _.map(\n            forms,\n            function (form) {\n                // eslint-disable-next-line @babel/no-invalid-this\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                // eslint-disable-next-line @babel/no-invalid-this\n                return formExamples[form](this.props);\n            },\n            this,\n        );\n\n        return [i18n._(\"**Your answer should be** \")].concat(examples);\n    };\n\n    static validate(\n        state: {\n            currentValue: string;\n        },\n        rubric: Rubric,\n        onInputError: APIOptions[\"onInputError\"] = () => {},\n    ): PerseusScore {\n        if (rubric.answerType == null) {\n            rubric.answerType = \"number\";\n        }\n\n        // note(matthewc): this will get immediately parsed again by\n        // `KhanAnswerTypes.number.convertToPredicate`, but a string is\n        // expected here\n        const stringValue = `${rubric.value}`;\n        const val = KhanAnswerTypes.number.createValidatorFunctional(\n            stringValue,\n            {\n                simplify: rubric.simplify,\n                inexact: rubric.inexact || undefined,\n                maxError: rubric.maxError,\n                forms: answerTypes[rubric.answerType].forms,\n            },\n        );\n\n        // We may have received TeX; try to parse it before grading.\n        // If `currentValue` is not TeX, this should be a no-op.\n        const currentValue = ParseTex(state.currentValue);\n\n        const result = val(currentValue);\n\n        // TODO(eater): Seems silly to translate result to this invalid/points\n        // thing and immediately translate it back in ItemRenderer.scoreInput()\n        if (result.empty) {\n            // TODO(FEI-3867): remove null-check once we have APIOptionsInternal\n            const apiResult = onInputError?.(\n                null, // reserved for some widget identifier\n                state.currentValue,\n                result.message,\n            );\n            return {\n                type: \"invalid\",\n                message: apiResult === false ? null : result.message,\n            };\n        }\n        return {\n            type: \"points\",\n            earned: result.correct ? 1 : 0,\n            total: 1,\n            message: result.message,\n        };\n    }\n\n    static getUserInputFromProps(props: Props): {\n        currentValue: string;\n    } {\n        return {\n            currentValue: props.currentValue,\n        };\n    }\n\n    static getOneCorrectAnswerFromRubric(\n        rubric: any,\n    ): string | null | undefined {\n        if (rubric.value == null) {\n            return;\n        }\n        let answerString = String(rubric.value);\n        if (rubric.inexact && rubric.maxError) {\n            answerString += \" \\u00B1 \" + rubric.maxError;\n        }\n        return answerString;\n    }\n}\n\nconst styles = StyleSheet.create({\n    default: {\n        width: 80,\n        height: \"auto\",\n    },\n    small: {\n        width: 40,\n    },\n    leftAlign: {\n        paddingLeft: Spacing.xxxSmall_4,\n        paddingRight: 0,\n    },\n    rightAlign: {\n        textAlign: \"right\",\n        paddingLeft: 0,\n        paddingRight: Spacing.xxxSmall_4,\n    },\n    answerStateUnanswered: {\n        backgroundColor: \"#eee\",\n        border: \"solid 1px #999\",\n    },\n});\n\nconst propTransform = (\n    widgetOptions: PerseusInputNumberWidgetOptions,\n): RenderProps => {\n    const {simplify, size, answerType, rightAlign} = widgetOptions;\n    return {\n        simplify,\n        size,\n        answerType,\n        rightAlign,\n    };\n};\n\nexport default {\n    name: \"input-number\",\n    displayName: \"Number text box (old)\",\n    defaultAlignment: \"inline-block\",\n    hidden: true,\n    widget: InputNumber,\n    transform: propTransform,\n    isLintable: true,\n} as WidgetExports<typeof InputNumber>;\n","/* eslint-disable react/prop-types */\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport InputWithExamples from \"../components/input-with-examples\";\nimport SimpleKeypadInput from \"../components/simple-keypad-input\";\nimport {ApiOptions} from \"../perseus-api\";\nimport TexWrangler from \"../tex-wrangler\";\nimport KhanAnswerTypes from \"../util/answer-types\";\nimport KhanMath from \"../util/math\";\n\nimport type {\n    PerseusNumericInputAnswer,\n    PerseusNumericInputWidgetOptions,\n    PerseusNumericInputAnswerForm,\n} from \"../perseus-types\";\nimport type {\n    FocusPath,\n    PerseusScore,\n    WidgetExports,\n    WidgetProps,\n} from \"../types\";\n\nconst ParseTex = TexWrangler.parseTex;\n\nconst answerFormButtons = [\n    {title: \"Integers\", value: \"integer\", content: \"6\"},\n    {title: \"Decimals\", value: \"decimal\", content: \"0.75\"},\n    {title: \"Proper fractions\", value: \"proper\", content: \"\\u2157\"},\n    {\n        title: \"Improper fractions\",\n        value: \"improper\",\n        content: \"\\u2077\\u2044\\u2084\",\n    },\n    {title: \"Mixed numbers\", value: \"mixed\", content: \"1\\u00BE\"},\n    {title: \"Numbers with \\u03C0\", value: \"pi\", content: \"\\u03C0\"},\n];\n\nconst formExamples: {\n    [key: string]: (arg1: PerseusNumericInputAnswerForm) => string;\n} = {\n    integer: () => i18n._(\"an integer, like $6$\"),\n    proper: (form) =>\n        form.simplify === \"optional\"\n            ? i18n._(\"a *proper* fraction, like $1/2$ or $6/10$\")\n            : i18n._(\"a *simplified proper* fraction, like $3/5$\"),\n    improper: (form) =>\n        form.simplify === \"optional\"\n            ? i18n._(\"an *improper* fraction, like $10/7$ or $14/8$\")\n            : i18n._(\"a *simplified improper* fraction, like $7/4$\"),\n    mixed: () => i18n._(\"a mixed number, like $1\\\\ 3/4$\"),\n    decimal: () => i18n._(\"an *exact* decimal, like $0.75$\"),\n    pi: () =>\n        i18n._(\n            \"a multiple of pi, like $12\\\\ \\\\text{pi}$ or \" +\n                \"$2/3\\\\ \\\\text{pi}$\",\n        ),\n};\n\ntype UserInput = {\n    currentValue: string;\n};\n\nexport type Rubric = PerseusNumericInputWidgetOptions;\n\ntype ExternalProps = WidgetProps<PerseusNumericInputWidgetOptions, Rubric>;\n\ntype Props = ExternalProps & {\n    size: NonNullable<ExternalProps[\"size\"]>;\n    rightAlign: NonNullable<ExternalProps[\"rightAlign\"]>;\n    apiOptions: NonNullable<ExternalProps[\"apiOptions\"]>;\n    coefficient: NonNullable<ExternalProps[\"coefficient\"]>;\n    answerForms: NonNullable<ExternalProps[\"answerForms\"]>;\n    labelText: NonNullable<ExternalProps[\"labelText\"]>;\n    linterContext: NonNullable<ExternalProps[\"linterContext\"]>;\n    currentValue: string;\n};\n\ntype DefaultProps = {\n    currentValue: Props[\"currentValue\"];\n    size: Props[\"size\"];\n    rightAlign: Props[\"rightAlign\"];\n    apiOptions: Props[\"apiOptions\"];\n    coefficient: Props[\"coefficient\"];\n    answerForms: Props[\"answerForms\"];\n    labelText: Props[\"labelText\"];\n    linterContext: Props[\"linterContext\"];\n};\n\ntype State = {\n    // keeps track of the other set of values when switching\n    // between 0 and finite solutions\n    previousValues: ReadonlyArray<string>;\n};\n\nexport class NumericInput extends React.Component<Props, State> {\n    inputRef: SimpleKeypadInput | InputWithExamples | null | undefined;\n\n    static defaultProps: DefaultProps = {\n        currentValue: \"\",\n        size: \"normal\",\n        rightAlign: false,\n        apiOptions: ApiOptions.defaults,\n        coefficient: false,\n        answerForms: [],\n        labelText: \"\",\n        linterContext: linterContextDefault,\n    };\n\n    static getUserInputFromProps(props: Props): UserInput {\n        return {\n            currentValue: props.currentValue,\n        };\n    }\n\n    static getOneCorrectAnswerFromRubric(\n        rubric: Rubric,\n    ): string | null | undefined {\n        const correctAnswers = rubric.answers.filter(\n            (answer) => answer.status === \"correct\",\n        );\n        const answerStrings = correctAnswers.map((answer) => {\n            // Figure out how this answer is supposed to be\n            // displayed\n            let format = \"decimal\";\n            if (answer.answerForms && answer.answerForms[0]) {\n                // NOTE(johnsullivan): This isn't exactly ideal, but\n                // it does behave well for all the currently known\n                // problems. See D14742 for some discussion on\n                // alternate strategies.\n                format = answer.answerForms[0];\n            }\n\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string' is not assignable to parameter of type 'MathFormat | undefined'.\n            let answerString = KhanMath.toNumericString(answer.value, format);\n            if (answer.maxError) {\n                answerString +=\n                    \" \\u00B1 \" +\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string' is not assignable to parameter of type 'MathFormat | undefined'.\n                    KhanMath.toNumericString(answer.maxError, format);\n            }\n            return answerString;\n        });\n        if (answerStrings.length === 0) {\n            return;\n        }\n        return answerStrings[0];\n    }\n\n    static validate(useInput: UserInput, rubric: Rubric): PerseusScore {\n        const allAnswerForms = answerFormButtons.map((e) => e[\"value\"]);\n\n        const createValidator = (answer: PerseusNumericInputAnswer) => {\n            const stringAnswer = `${answer.value}`;\n            return KhanAnswerTypes.number.createValidatorFunctional(\n                stringAnswer,\n                {\n                    message: answer.message,\n                    simplify:\n                        answer.status === \"correct\"\n                            ? answer.simplify\n                            : \"optional\",\n                    inexact: true, // TODO(merlob) backfill / delete\n                    maxError: answer.maxError,\n                    forms:\n                        answer.strict &&\n                        answer.answerForms &&\n                        answer.answerForms.length !== 0\n                            ? answer.answerForms\n                            : allAnswerForms,\n                },\n            );\n        };\n\n        // We may have received TeX; try to parse it before grading.\n        // If `currentValue` is not TeX, this should be a no-op.\n        const currentValue = ParseTex(useInput.currentValue);\n        const correctAnswers = rubric.answers.filter(\n            (answer) => answer.status === \"correct\",\n        );\n\n        const normalizedAnswerExpected = correctAnswers.every(\n            (answer) => Math.abs(answer.value) <= 1,\n        );\n\n        // Look through all correct answers for one that matches either\n        // precisely or approximately and return the appropriate message:\n        // - if precise, return the message that the answer came with\n        // - if it needs to be simplified, etc., show that message\n        let result = correctAnswers\n            .map((answer) => {\n                // The coefficient is an attribute of the widget\n                let localValue = currentValue;\n                if (rubric.coefficient) {\n                    if (!localValue) {\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'string'.\n                        localValue = 1;\n                    } else if (localValue === \"-\") {\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'string'.\n                        localValue = -1;\n                    }\n                }\n                const validate = createValidator(answer);\n                return validate(\n                    maybeParsePercentInput(\n                        localValue,\n                        normalizedAnswerExpected,\n                    ),\n                );\n            })\n            .find((match) => match.correct || match.empty);\n\n        if (!result) {\n            // Otherwise, if the guess is not correct\n            const otherAnswers = [].concat(\n                // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                rubric.answers.filter((answer) => answer.status === \"ungraded\"),\n                rubric.answers.filter((answer) => answer.status === \"wrong\"),\n            );\n\n            // Look through all other answers and if one matches either\n            // precisely or approximately return the answer's message\n            const match = otherAnswers.find((answer) => {\n                const validate = createValidator(answer);\n                return validate(\n                    maybeParsePercentInput(\n                        currentValue,\n                        normalizedAnswerExpected,\n                    ),\n                ).correct;\n            });\n            result = {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'status' does not exist on type 'never'.\n                empty: match ? match.status === \"ungraded\" : false,\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'status' does not exist on type 'never'.\n                correct: match ? match.status === \"correct\" : false,\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'message' does not exist on type 'never'.\n                message: match ? match.message : null,\n                guess: currentValue,\n            };\n        }\n\n        // TODO(eater): Seems silly to translate result to this\n        // invalid/points thing and immediately translate it\n        // back in ItemRenderer.scoreInput()\n        if (result.empty) {\n            return {\n                type: \"invalid\",\n                message: result.message,\n            };\n        }\n        return {\n            type: \"points\",\n            earned: result.correct ? 1 : 0,\n            total: 1,\n            message: result.message,\n        };\n    }\n\n    state: State = {\n        // keeps track of the other set of values when switching\n        // between 0 and finite solutions\n        previousValues: [\"\"],\n    };\n\n    // TODO(Nicole, Jeremy): This is maybe never used and should be removed\n    examples: () => ReadonlyArray<string> = () => {\n        // if the set of specified forms are empty, allow all forms\n        const forms =\n            this.props.answerForms?.length !== 0\n                ? this.props.answerForms\n                : Object.keys(formExamples).map((name) => {\n                      return {\n                          name: name,\n                          simplify: \"required\",\n                      };\n                  });\n\n        let examples = _.map(forms, (form) => {\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'PerseusNumericInputAnswerForm | { name: string; simplify: string; }' is not assignable to parameter of type 'PerseusNumericInputAnswerForm'.\n            return formExamples[form.name](form);\n        });\n        // Ensure no duplicate tooltip text from simplified and unsimplified\n        // versions of the same format\n        examples = _.uniq(examples);\n\n        return [i18n._(\"**Your answer should be** \")].concat(examples);\n    };\n\n    shouldShowExamples: () => boolean = () => {\n        const noFormsAccepted = this.props.answerForms?.length === 0;\n        // To check if all answer forms are accepted, we must first\n        // find the *names* of all accepted forms, and see if they are\n        // all present, ignoring duplicates\n        const answerFormNames: ReadonlyArray<string> = _.uniq(\n            this.props.answerForms?.map((form) => form.name),\n        );\n        const allFormsAccepted =\n            answerFormNames.length >= Object.keys(formExamples).length;\n        return !noFormsAccepted && !allFormsAccepted;\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return NumericInput.validate(this.getUserInput(), rubric);\n    };\n\n    focus: () => boolean = () => {\n        this.inputRef?.focus();\n        return true;\n    };\n\n    focusInputPath: () => void = () => {\n        this.inputRef?.focus();\n    };\n\n    blurInputPath: () => void = () => {\n        this.inputRef?.blur();\n    };\n\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        // The widget itself is an input, so we return a single empty list to\n        // indicate this.\n        /* c8 ignore next */\n        return [[]];\n    };\n\n    getGrammarTypeForPath: (arg1: FocusPath) => string = (inputPath) => {\n        /* c8 ignore next */\n        return \"number\";\n    };\n\n    setInputValue: (\n        arg1: FocusPath,\n        arg2: string,\n        arg3?: () => unknown | null | undefined,\n    ) => void = (path, newValue, cb) => {\n        /* c8 ignore next */\n        this.props.onChange(\n            {\n                currentValue: newValue,\n            },\n            cb,\n        );\n    };\n\n    getUserInput: () => UserInput = () => {\n        return NumericInput.getUserInputFromProps(this.props);\n    };\n\n    handleChange: (\n        arg1: string,\n        arg2?: () => unknown | null | undefined,\n    ) => void = (newValue, cb) => {\n        this.props.onChange({currentValue: newValue}, cb);\n        this.props.trackInteraction();\n    };\n\n    _handleFocus: () => void = () => {\n        this.props.onFocus([]);\n        // HACK(kevinb): We want to dismiss the feedback popover that webapp\n        // displays as soon as a user clicks in in the input field so we call\n        // interactionCallback directly.\n        const {interactionCallback} = this.props.apiOptions;\n        if (interactionCallback) {\n            interactionCallback();\n        }\n    };\n\n    _handleBlur: () => void = () => {\n        this.props.onBlur([]);\n    };\n\n    render(): React.ReactNode {\n        let labelText = this.props.labelText;\n        if (labelText == null || labelText === \"\") {\n            labelText = i18n._(\"Your answer:\");\n        }\n\n        // To right align a custom keypad we need to wrap it.\n        const maybeRightAlignKeypadInput = (\n            keypadInput: React.ReactElement<\n                React.ComponentProps<typeof SimpleKeypadInput>\n            >,\n        ) => {\n            return this.props.rightAlign ? (\n                <div className=\"perseus-input-right-align\">{keypadInput}</div>\n            ) : (\n                keypadInput\n            );\n        };\n\n        if (this.props.apiOptions.customKeypad) {\n            // TODO(charlie): Support \"Review Mode\".\n            return maybeRightAlignKeypadInput(\n                <SimpleKeypadInput\n                    ref={(ref) => (this.inputRef = ref)}\n                    value={this.props.currentValue}\n                    keypadElement={this.props.keypadElement}\n                    onChange={this.handleChange}\n                    onFocus={this._handleFocus}\n                    onBlur={this._handleBlur}\n                />,\n            );\n        }\n\n        // Note: This is _very_ similar to what `input-number.jsx` does. If\n        // you modify this, double-check if you also need to modify that\n        // component.\n        const styles = StyleSheet.create({\n            input: {\n                textAlign: this.props.rightAlign ? \"right\" : \"left\",\n                width: this.props.size === \"small\" ? 40 : 80,\n                padding: 0,\n                height: \"auto\",\n            },\n        });\n\n        return (\n            <div>\n                <InputWithExamples\n                    ref={(ref) => (this.inputRef = ref)}\n                    value={this.props.currentValue}\n                    onChange={this.handleChange}\n                    labelText={labelText}\n                    type=\"text\"\n                    examples={this.examples()}\n                    shouldShowExamples={this.shouldShowExamples()}\n                    onFocus={this._handleFocus}\n                    onBlur={this._handleBlur}\n                    id={this.props.widgetId}\n                    disabled={this.props.apiOptions.readOnly}\n                    style={styles.input}\n                />\n            </div>\n        );\n    }\n}\n\n// TODO(thomas): Currently we receive a list of lists of acceptable answer types\n// and union them down into a single set. It's worth considering whether it\n// wouldn't make more sense to have a single set of acceptable answer types for\n// a given *problem* rather than for each possible [correct/wrong] *answer*.\n// When should two answers to a problem take different answer types?\n// See D27790 for more discussion.\nexport const unionAnswerForms: (\n    arg1: ReadonlyArray<ReadonlyArray<PerseusNumericInputAnswerForm>>,\n) => ReadonlyArray<PerseusNumericInputAnswerForm> = function (answerFormsList) {\n    // Takes a list of lists of answer forms, and returns a list of the forms\n    // in each of these lists in the same order that they're listed in the\n    // `formExamples` forms from above.\n\n    // uniqueBy takes a list of elements and a function which compares whether\n    // two elements are equal, and returns a list of unique elements. This is\n    // just a helper function here, but works generally.\n    const uniqueBy = function (list, iteratee: any) {\n        // @ts-expect-error [FEI-5003] - TS2347 - Untyped function calls may not accept type arguments.\n        return list.reduce<Array<any>>((uniqueList, element) => {\n            // For each element, decide whether it's already in the list of\n            // unique items.\n            const inList = _.find(uniqueList, iteratee.bind(null, element));\n            if (inList) {\n                return uniqueList;\n            }\n            return uniqueList.concat([element]);\n        }, []);\n    };\n\n    // Pull out all of the forms from the different lists.\n    const allForms = answerFormsList.flat();\n    // Pull out the unique forms using uniqueBy.\n    const uniqueForms = uniqueBy(allForms, _.isEqual);\n    // Sort them by the order they appear in the `formExamples` list.\n    const formExampleKeys = Object.keys(formExamples);\n    return _.sortBy(uniqueForms, (form) => {\n        return formExampleKeys.indexOf(form.name);\n    });\n};\n\ntype RenderProps = {\n    answerForms: ReadonlyArray<{\n        simplify: \"required\" | \"correct\" | \"enforced\" | null | undefined;\n        name: \"integer\" | \"decimal\" | \"proper\" | \"improper\" | \"mixed\" | \"pi\";\n    }>;\n    labelText: string;\n    size: \"normal\" | \"small\";\n    coefficient: boolean;\n    rightAlign?: boolean;\n    static: boolean;\n};\n\n// This function checks if the user inputted a percent value, parsing\n// it as a number (and maybe scaling) so that it can be graded.\n// NOTE(michaelpolyak): Unlike `KhanAnswerTypes.number.percent()` which\n// can accept several input forms with or without \"%\", the decision\n// to parse based on the presence of \"%\" in the input, is so that we\n// don't accidently scale the user typed value before grading, CP-930.\nexport function maybeParsePercentInput(\n    inputValue: string | number,\n    normalizedAnswerExpected: boolean,\n): string | number {\n    // If the input value is not a string ending with \"%\", then there's\n    // nothing more to do. The value will be graded as inputted by user.\n    if (!(typeof inputValue === \"string\" && inputValue.endsWith(\"%\"))) {\n        return inputValue;\n    }\n\n    const value = parseFloat(inputValue.slice(0, -1));\n    // If the input value stripped of the \"%\" cannot be parsed as a\n    // number (the slice is not really necessary for parseFloat to work\n    // if the string starts with a number) then return the original\n    // input for grading.\n    if (isNaN(value)) {\n        return inputValue;\n    }\n\n    // Next, if all correct answers are in the range of |0,1| then we\n    // scale the user typed value. We assume this is the correct thing\n    // to do since the input value ends with \"%\".\n    if (normalizedAnswerExpected) {\n        return value / 100;\n    }\n\n    // Otherwise, we return input valuåe (number) stripped of the \"%\".\n    return value;\n}\n\nconst propsTransform = function (\n    widgetOptions: PerseusNumericInputWidgetOptions,\n): RenderProps {\n    const rendererProps = _.extend(_.omit(widgetOptions, \"answers\"), {\n        answerForms: unionAnswerForms(\n            // Pull out the name of each form and whether that form has\n            // required simplification.\n            widgetOptions.answers.map((answer) => {\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly MathFormat[] | undefined' is not assignable to parameter of type 'Collection<any>'.\n                return _.map(answer.answerForms, (form) => {\n                    return {\n                        simplify: answer.simplify,\n                        name: form,\n                    };\n                });\n            }),\n        ),\n    });\n\n    return rendererProps;\n};\n\nexport default {\n    name: \"numeric-input\",\n    displayName: \"Number text box\",\n    defaultAlignment: \"inline-block\",\n    accessible: true,\n    widget: NumericInput,\n    transform: propsTransform,\n    isLintable: true,\n} as WidgetExports<typeof NumericInput>;\n","/* eslint-disable react/sort-comp */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport * as Changeable from \"../mixins/changeable\";\nimport {removeDenylistProps} from \"../mixins/widget-prop-denylist\";\nimport PerseusMarkdown from \"../perseus-markdown\";\n\nimport {Passage} from \"./passage\";\n\nimport type {PerseusPassageRefWidgetOptions} from \"../perseus-types\";\nimport type {\n    ChangeFn,\n    PerseusScore,\n    WidgetExports,\n    WidgetProps,\n    LinterContextProps,\n} from \"../types\";\nimport type {Reference} from \"./passage\";\n\nconst EN_DASH = \"\\u2013\";\n\ntype UserInput = RenderProps & {\n    static: boolean | null | undefined;\n    reviewModeRubric: Rubric;\n    linterContext: LinterContextProps;\n    isLastUsedWidget: boolean;\n    alignment: string | null | undefined;\n};\n\ntype RenderProps = {\n    passageNumber: PerseusPassageRefWidgetOptions[\"passageNumber\"];\n    referenceNumber: PerseusPassageRefWidgetOptions[\"referenceNumber\"];\n    summaryText: PerseusPassageRefWidgetOptions[\"summaryText\"];\n};\n\ntype Rubric = PerseusPassageRefWidgetOptions;\n\ntype Props = WidgetProps<RenderProps, Rubric>;\n\ntype DefaultProps = {\n    passageNumber: Props[\"passageNumber\"];\n    referenceNumber: Props[\"referenceNumber\"];\n    summaryText: Props[\"summaryText\"];\n};\n\ntype State = {\n    lineRange: [number, number] | null | undefined;\n    content: string | null | undefined;\n};\n\nclass PassageRef extends React.Component<Props, State> {\n    displayName = \"PassageRef\";\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_isMounted' has no initializer and is not definitely assigned in the constructor.\n    _isMounted: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_throttledUpdateRange' has no initializer and is not definitely assigned in the constructor.\n    _throttledUpdateRange: () => void;\n\n    static defaultProps: DefaultProps = {\n        passageNumber: 1,\n        referenceNumber: 1,\n        summaryText: \"\",\n    };\n\n    state: State = {\n        lineRange: null,\n        content: null,\n    };\n\n    shouldComponentUpdate(nextProps: Props, nextState: State): boolean {\n        return (\n            !_.isEqual(this.props, nextProps) ||\n            !_.isEqual(this.state, nextState)\n        );\n    }\n\n    // TODO(tamarab): getUserInput needs to be updated to only return\n    // props input by the user. Currently returns all the widget's props.\n    getUserInput: () => UserInput = () => {\n        return removeDenylistProps(this.props);\n    };\n\n    render(): React.ReactNode {\n        const lineRange = this.state.lineRange;\n        let lineRangeOutput;\n        if (!lineRange) {\n            lineRangeOutput = i18n.$_(\"lines %(lineRange)s\", {\n                lineRange: `?${EN_DASH}?`,\n            });\n        } else if (lineRange[0] === lineRange[1]) {\n            lineRangeOutput = i18n.$_(\"line %(lineNumber)s\", {\n                lineNumber: lineRange[0],\n            });\n        } else {\n            lineRangeOutput = i18n.$_(\"lines %(lineRange)s\", {\n                lineRange: lineRange[0] + EN_DASH + lineRange[1],\n            });\n        }\n\n        let summaryOutput;\n        if (this.props.summaryText) {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n            const summaryTree = PerseusMarkdown.parseInline(\n                this.props.summaryText,\n            );\n            summaryOutput = (\n                <span aria-hidden={true}>\n                    {\" \"}\n                    {/* curly quotes */}\n                    (&ldquo;\n                    {PerseusMarkdown.basicOutput(summaryTree)}\n                    &rdquo;)\n                </span>\n            );\n        } else {\n            summaryOutput = null;\n        }\n\n        return (\n            <span>\n                {lineRangeOutput}\n                {summaryOutput}\n                {lineRange && (\n                    <div className=\"perseus-sr-only\">{this.state.content}</div>\n                )}\n            </span>\n        );\n    }\n\n    change: ChangeFn = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    componentDidMount() {\n        // TODO(scottgrant): This is a hack to remove the deprecated call to\n        // this.isMounted() but is still considered an anti-pattern.\n        this._isMounted = true;\n\n        this._deferredUpdateRange();\n\n        this._throttledUpdateRange = _.throttle(this._deferredUpdateRange, 500);\n        window.addEventListener(\"resize\", this._throttledUpdateRange);\n    }\n\n    componentDidUpdate() {\n        this._deferredUpdateRange();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this._throttledUpdateRange);\n\n        this._isMounted = false;\n    }\n\n    _deferredUpdateRange: () => void = () => {\n        _.defer(this._updateRange);\n    };\n\n    _updateRange: () => void = () => {\n        // Note(TB): findWidgets runs findInternal and findExternal;\n        // findExternal runs findInternal for the renderers involved;\n        // findInternal returns type $ReadOnlyArray<?Widget>\n        const passage: Passage | null | undefined = this.props.findWidgets(\n            \"passage \" + this.props.passageNumber,\n        )[0];\n\n        let refInfo: Reference | null | undefined = null;\n        if (passage) {\n            refInfo = passage.getReference(this.props.referenceNumber);\n        }\n\n        if (this._isMounted) {\n            if (refInfo) {\n                this.setState({\n                    lineRange: [refInfo.startLine, refInfo.endLine],\n                    content: refInfo.content,\n                });\n            } else {\n                this.setState({\n                    lineRange: null,\n                    content: null,\n                });\n            }\n        }\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return PassageRef.validate(this.getUserInput(), rubric);\n    };\n\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n}\n\nexport default {\n    name: \"passage-ref\",\n    displayName: \"PassageRef (SAT only)\",\n    defaultAlignment: \"inline\",\n    widget: PassageRef,\n    transform: (\n        widgetOptions: PerseusPassageRefWidgetOptions,\n    ): RenderProps => ({\n        passageNumber: widgetOptions.passageNumber,\n        referenceNumber: widgetOptions.referenceNumber,\n        summaryText: widgetOptions.summaryText,\n    }),\n    version: {major: 0, minor: 1},\n} as WidgetExports<typeof PassageRef>;\n","/**\n * A default set of media queries to use for different screen sizes. Based on\n * the breakpoints from purecss.\n *\n * Use like:\n *   StyleSheet.create({\n *       blah: {\n *           [mediaQueries.xs]: {\n *\n *           },\n *       },\n *   });\n */\n\nimport * as constants from \"./constants\";\n\nconst {\n    pureXsMax,\n    pureSmMin,\n    pureSmMax,\n    pureMdMin,\n    pureMdMax,\n    pureLgMin,\n    pureLgMax,\n    pureXlMin,\n} = constants;\n\nexport default {\n    xs: `@media screen and (max-width: ${pureXsMax})`,\n    sm: (`@media screen and (min-width: ${pureSmMin}) and ` +\n        `(max-width: ${pureSmMax})`) as string,\n    md: (`@media screen and (min-width: ${pureMdMin}) and ` +\n        `(max-width: ${pureMdMax})`) as string,\n    lg: (`@media screen and (min-width: ${pureLgMin}) and ` +\n        `(max-width: ${pureLgMax})`) as string,\n    xl: `@media screen and (min-width: ${pureXlMin})`,\n\n    xsOrSmaller: `@media screen and (max-width: ${pureXsMax})`,\n    smOrSmaller: `@media screen and (max-width: ${pureSmMax})`,\n    mdOrSmaller: `@media screen and (max-width: ${pureMdMax})`,\n    lgOrSmaller: `@media screen and (max-width: ${pureLgMax})`,\n\n    smOrLarger: `@media screen and (min-width: ${pureSmMin})`,\n    mdOrLarger: `@media screen and (min-width: ${pureMdMin})`,\n    lgOrLarger: `@media screen and (min-width: ${pureLgMin})`,\n    xlOrLarger: `@media screen and (min-width: ${pureXlMin})`,\n};\n","import {StyleSheet} from \"aphrodite\";\n\nimport * as constants from \"./constants\";\nimport mediaQueries from \"./media-queries\";\n\nimport type {StyleDeclaration} from \"aphrodite\";\n\nconst {\n    zIndexAboveScratchpad,\n    zIndexInteractiveComponent,\n    radioBorderColor,\n    checkedColor,\n    circleSize,\n    radioMarginWidth,\n} = constants;\n\nexport default StyleSheet.create({\n    perseusInteractive: {\n        zIndex: zIndexInteractiveComponent,\n        position: \"relative\",\n    },\n\n    aboveScratchpad: {\n        position: \"relative\",\n        zIndex: zIndexAboveScratchpad,\n    },\n\n    blankBackground: {\n        // TODO(emily): Use KhanUtil._BACKGROUND?\n        backgroundColor: \"#FDFDFD\",\n    },\n\n    perseusSrOnly: {\n        border: 0,\n        clip: \"rect(0,0,0,0)\",\n        height: 1,\n        margin: -1,\n        overflow: \"hidden\",\n        padding: 0,\n        position: \"absolute\",\n        width: 1,\n    },\n\n    responsiveLabel: {\n        // NOTE(charlie): The values used here should be kept in sync with the\n        // caption text sizing in Perseus' articles.less.\n        // TODO(charlie): Migrate the captions over to using this style.\n        [mediaQueries.smOrSmaller]: {\n            fontSize: 14,\n            lineHeight: 1.3,\n        },\n        [mediaQueries.md]: {\n            fontSize: 17,\n            lineHeight: 1.4,\n        },\n        [mediaQueries.lgOrLarger]: {\n            fontSize: 20,\n            lineHeight: 1.4,\n        },\n    },\n\n    responsiveInput: {\n        display: \"inline-block\",\n        WebkitAppearance: \"none\",\n        appearance: \"none\",\n\n        \"::-ms-check\": {\n            display: \"none\",\n        },\n\n        backgroundColor: \"#fff\",\n        border: \"2px solid #fff\",\n        boxShadow: `0 0px 0px 1px ${radioBorderColor}`,\n        outline: \"none\",\n\n        boxSizing: \"border-box\",\n        flexShrink: 0,\n        marginBottom: 1,\n        marginLeft: 1,\n        marginRight: 1,\n        marginTop: 1,\n\n        height: circleSize - 2,\n        width: circleSize - 2,\n    },\n\n    responsiveRadioInput: {\n        borderRadius: \"50%\",\n\n        \":checked\": {\n            backgroundColor: checkedColor,\n            border: \"none\",\n            borderRadius: \"50%\",\n            boxShadow:\n                `inset 0px 0px 0px 2px white, ` +\n                `0 0px 0px 2px ${checkedColor}`,\n\n            marginTop: radioMarginWidth,\n            marginBottom: radioMarginWidth,\n            marginLeft: radioMarginWidth,\n            marginRight: radioMarginWidth,\n\n            height: circleSize - 2 * radioMarginWidth,\n            width: circleSize - 2 * radioMarginWidth,\n        },\n    },\n\n    responsiveRadioInputActive: {\n        backgroundColor: \"#fff\",\n        border: \"2px solid #fff\",\n        borderRadius: \"50%\",\n        boxShadow: `0 0px 0px 2px ${checkedColor}`,\n\n        marginTop: radioMarginWidth,\n        marginBottom: radioMarginWidth,\n        marginLeft: radioMarginWidth,\n        marginRight: radioMarginWidth,\n\n        height: circleSize - 2 * radioMarginWidth,\n        width: circleSize - 2 * radioMarginWidth,\n\n        \":checked\": {\n            backgroundColor: \"#fff\",\n        },\n    },\n\n    disableTextSelection: {\n        userSelect: \"none\",\n    },\n}) as StyleDeclaration;\n","/**\n * A small collection of useful scrolling utility functions.\n */\n\n// Polyfill scrollTo if it doesn't exist\nif (typeof HTMLElement !== \"undefined\" && !HTMLElement.prototype.scrollTo) {\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(left: number, top: any) => void' is not assignable to type '{ (options?: ScrollToOptions | undefined): void; (x: number, y: number): void; }'.\n    HTMLElement.prototype.scrollTo = function (left, top: any) {\n        this.scrollLeft = left;\n        this.scrollTop = top;\n    };\n}\n\n/**\n * Handles applying a given scroll object to either the window object,\n * or an HTML element.\n * NOTE: SIDE EFFECTS. This method touches the DOM.\n */\nconst applyUniversalScrollOffset = (\n    elementOrWindow: HTMLElement | WindowProxy,\n    amount: number,\n) => {\n    // Window objects need to be scrolled by using the `.scrollTo()` function.\n    // Elements in MODERN browsers also have this method, but a safer x-browser\n    // solution is to use the `.scrollTop` property setter.\n    if (typeof elementOrWindow.scrollTo === \"function\") {\n        elementOrWindow.scrollTo(0, amount);\n    } else if (\"scrollTop\" in elementOrWindow) {\n        elementOrWindow.scrollTop = amount;\n    }\n};\n\n/**\n * Smoothly scroll the given element to the given offset.\n *\n * This assumes that element.scrollHeight > element.clientHeight.\n */\nconst scrollElementToOffset = (\n    elementOrWindow: HTMLElement | WindowProxy,\n    offset: number,\n    duration = 0,\n    callback?: any,\n) => {\n    const startPosition =\n        elementOrWindow === window\n            ? window.pageYOffset\n            : // @ts-expect-error [FEI-5003] - TS2551 - Property 'scrollTop' does not exist on type 'HTMLElement | Window'. Did you mean 'scrollTo'?\n              elementOrWindow.scrollTop;\n    const endPosition = offset;\n    const scrollDistance = endPosition - startPosition;\n\n    // Aim for ~60 FPS\n    const tickLength = 17;\n    const numberOfSteps = duration / tickLength;\n    let step = 0;\n\n    // TODO (josh): Rewrite this using window.requestAnimationFrame\n    // TODO(jeff, WEB-1378): Use Wonder Blocks Timing API\n    // eslint-disable-next-line no-restricted-syntax\n    const scrollInterval = setInterval(function () {\n        if (step < numberOfSteps) {\n            const x = step / numberOfSteps; // Domain: [0, 1]\n            const y = (-Math.cos(Math.PI * x) + 1) / 2; // Range: [0, 1]\n\n            const newPosition = startPosition + scrollDistance * y;\n            applyUniversalScrollOffset(elementOrWindow, newPosition);\n\n            step += 1;\n        } else {\n            // Account for non-integer numberOfSteps\n            applyUniversalScrollOffset(elementOrWindow, endPosition);\n\n            // TODO(jeff, WEB-1378): Use Wonder Blocks Timing API\n            // eslint-disable-next-line no-restricted-syntax\n            clearInterval(scrollInterval);\n            callback && callback();\n        }\n    }, tickLength);\n};\n\n/**\n * Returns the closest ancestor that is scrollable.\n *\n * If the container is document.body we return window b/c scrollTo() doesn't\n * work on document.body in some browsers.\n */\nconst getScrollContainer = (element?: Element | null): any | Element => {\n    if (element === document.body) {\n        return window;\n    }\n    if (element == null) {\n        return window;\n    }\n    if (element.scrollHeight > element.clientHeight) {\n        return element;\n    }\n    return getScrollContainer(element.parentElement);\n};\n\nconst SCROLL_ANIMATION_DURATION = 750; // ms\n\n/**\n * Scroll the given element into view.\n *\n * This works with elements inside scroll containers, but may fail in scenarios\n * involving multiple nested scroll containers.\n */\nexport const scrollElementIntoView = (element: Element, callback?: any) => {\n    // Often times we scroll an element into with in reaction to some change in\n    // the DOM.  Since we need to measure things, we wait a tick for the DOM to\n    // settle before computing the distance to scroll and beginning the scroll\n    // animation.\n    // TODO(jeff, WEB-1378): Use Wonder Blocks Timing API\n    // eslint-disable-next-line no-restricted-syntax\n    setTimeout(() => {\n        const scrollContainer = getScrollContainer(element);\n\n        const childBounds = element.getBoundingClientRect();\n        const containerBounds =\n            scrollContainer === window\n                ? {\n                      top: 0,\n                      bottom: window.innerHeight,\n                  }\n                : scrollContainer.getBoundingClientRect();\n\n        let offset = 0;\n        const currentScrollTop =\n            scrollContainer === window\n                ? window.scrollY\n                : scrollContainer.scrollTop;\n\n        if (childBounds.bottom > containerBounds.bottom) {\n            let distanceToScroll = childBounds.bottom - containerBounds.bottom;\n\n            // Ensure that we see the top of the component we're scrolling.\n            if (childBounds.top + distanceToScroll < containerBounds.top) {\n                distanceToScroll = childBounds.top - containerBounds.top;\n            }\n\n            offset = currentScrollTop + distanceToScroll;\n        } else if (childBounds.top < containerBounds.top) {\n            const distanceToScroll = childBounds.top - containerBounds.top;\n\n            offset = currentScrollTop + distanceToScroll;\n        }\n\n        scrollElementToOffset(\n            scrollContainer,\n            offset,\n            SCROLL_ANIMATION_DURATION,\n            callback,\n        );\n    }, 0);\n};\n","/**\n * SVG Icon React Component\n *\n * This component is designed to take in SVG paths and render icons based upon\n * them. If you are looking for an icon that we've used before you should look\n * in `icon-paths.js` which is a reference file for all the SVG paths that\n * we've used. You'll need to copy the object from that file into whichever\n * file you're using the icon and explicitly pass it in to the <Icon/> React\n * component.\n *\n * Sample usage:\n *\n *   const dropdownIcon = `M5,6L0,0L10,0`;\n *   <Icon icon={dropdownIcon} />\n *\n * Or:\n *\n *   const dropdownIcon = {\n *       path: `M5,6L0,0L10,0`,\n *       height: 10,\n *       width: 10,\n *   };\n *   <Icon icon={dropdownIcon} size={20} />\n *\n * A full list of all the existing icons can be seen here:\n * http://localhost:8080/react-sandbox/shared-styles-package/icon.jsx.fixture.js\n *\n * If you want to add an entirely new icon please read the note inside\n * the `icon-paths.js` file.\n */\n\nimport * as React from \"react\";\n\nimport type {CSSProperties} from \"aphrodite\";\n\n// WARNING: This determines the *viewport* width and height, so a change here\n//          requires scaling the values of every SVG path passed in as a string\n//          without corresponding `width` and `height` values.\nconst BASE_ICON_SIZE = 10;\n\n// If you pass in an object you need to specify an SVG path to\n// render along with the width and height of the path (to ensure\n// that it gets scaled correctly).\nexport type IconType = {\n    height: number;\n    path: string;\n    width: number;\n};\n\ntype Props = {\n    // The className used for the SVG object (see the pathClassName prop as\n    // well).\n    className?: string;\n    // If you don't want to use Aphrodite, you can pass a style to the\n    // icon.\n    style?: CSSProperties;\n    // Accessible description for this icon. If omitted, icon will be\n    // aria-hidden.\n    title?: string;\n    // The color of the icon. Defaults to \"currentColor\".\n    color: string;\n    // Whether the SVG can be focused on when tab-bing around in IE.\n    focusable?: boolean;\n    // The SVG icon\n    icon: // If you pass in a string then it's assumed to be just an SVG\n    // path with a default size of 10 pixels wide and tall.\n    IconType | string;\n    // To be used for custom styling of the component. If using with\n    // Aphrodite you'll want to pre-compute the class string by calling\n    // css(). Additionally you need to remember that many of the SVG\n    // properties are similar, but different. If you want to change the\n    // color of the path you'll need to set the `fill` property.\n    pathClassName?: string;\n    // The height of the icon. Defaults to 1em.\n    size?: number;\n    // Alt text set on SVG icon\n    alt?: string;\n};\n\nclass Icon extends React.Component<Props> {\n    static defaultProps: {\n        color: string;\n    } = {\n        color: \"currentColor\",\n    };\n\n    render(): React.ReactNode {\n        const {color, pathClassName, className, title, style, alt} = this.props;\n        let {icon, size} = this.props;\n        let units = \"\";\n\n        // If the raw path was passed in, wrap it in the format that we expect.\n        if (typeof icon === \"string\") {\n            icon = {\n                path: icon,\n                width: BASE_ICON_SIZE,\n                height: BASE_ICON_SIZE,\n            };\n        }\n\n        // `size` defaults to 1em to mirror the behavior of Font Awesome.\n        if (typeof size !== \"number\") {\n            size = 1;\n            units = \"em\";\n        }\n\n        const height = size;\n        const width = (height / icon.height) * icon.width;\n\n        // NOTE: We assume that the viewBox is cropped and aligned to (0, 0),\n        //       but icons can be defined differently. At some point we might\n        //       want to add these attributes to icon-paths.js, but for now\n        //       this is a fairly safe assumption.\n        const xMin = 0;\n        const yMin = 0;\n\n        const focusable = !!this.props.focusable;\n\n        return (\n            <svg\n                role=\"img\"\n                alt={alt}\n                aria-label={title}\n                aria-hidden={title ? null : true}\n                className={className}\n                style={style}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type '\"auto\" | Booleanish | undefined'.\n                focusable={focusable.toString()}\n                width={width + units}\n                height={height + units}\n                viewBox={`${xMin} ${yMin} ${icon.width} ${icon.height}`}\n            >\n                {!!title && <title>{title}</title>}\n                <path className={pathClassName} fill={color} d={icon.path} />\n            </svg>\n        );\n    }\n}\n\nexport default Icon;\n","import * as i18n from \"@khanacademy/wonder-blocks-i18n\";\n\nfunction getA11yText(\n    letter: string,\n    checked: boolean,\n    correct: boolean,\n    crossedOut: boolean,\n    showCorrectness: boolean,\n): string {\n    // There are two pieces of metadata we want to add to each a11yText:\n    // whether the answer was checked/crossed-out/neither, and whether the\n    // answer is correct/incorrect/not-yet-revealed.\n    //\n    // Translation is tricky for cross-product situations like this, so\n    // we've just enumerated all 9 possibilities as separate strings.\n    if (showCorrectness && correct) {\n        if (checked) {\n            return i18n._(\"(Choice %(letter)s, Checked, Correct)\", {\n                letter,\n            });\n        }\n        if (crossedOut) {\n            return i18n._(\"(Choice %(letter)s, Crossed out, Correct)\", {\n                letter,\n            });\n        }\n        return i18n._(\"(Choice %(letter)s, Correct)\", {\n            letter,\n        });\n    }\n    if (showCorrectness && !correct) {\n        if (checked) {\n            return i18n._(\"(Choice %(letter)s, Checked, Incorrect)\", {\n                letter,\n            });\n        }\n        if (crossedOut) {\n            return i18n._(\"(Choice %(letter)s, Crossed out, Incorrect)\", {\n                letter,\n            });\n        }\n        return i18n._(\"(Choice %(letter)s, Incorrect)\", {\n            letter,\n        });\n    }\n    if (checked) {\n        return i18n._(\"(Choice %(letter)s, Checked)\", {\n            letter,\n        });\n    }\n    if (crossedOut) {\n        return i18n._(\"(Choice %(letter)s, Crossed out)\", {\n            letter,\n        });\n    }\n    return i18n._(\"(Choice %(letter)s)\", {\n        letter,\n    });\n}\n\nexport default getA11yText;\n","/**\n * Renders a circular selection ring around the child.\n */\n\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport * as styleConstants from \"../../styles/constants\";\n\ntype Props = {\n    children?: React.ReactNode;\n    // Whether the focus ring is visible. Allows for positioning\n    // the child identically regardless of whether the ring is visible.\n    visible: boolean;\n    // Color of the focus ring\n    color: string;\n    // Whether a user can select multiple options or not\n    multipleSelect: boolean;\n};\n\nconst FocusRing = function (props: Props): React.ReactElement {\n    const {visible, color, children, multipleSelect} = props;\n\n    const borderColor = visible ? color : \"transparent\";\n    const borderRadius = multipleSelect ? 5 : \"50%\";\n    const style = {\n        borderColor,\n        borderRadius,\n    } as const;\n    return (\n        <span\n            data-test-id=\"focus-ring\"\n            className={css(styles.ring)}\n            style={style}\n        >\n            {children}\n        </span>\n    );\n};\n\nFocusRing.defaultProps = {\n    visible: true,\n    color: styleConstants.kaGreen,\n    multipleSelect: false,\n};\n\nconst styles = StyleSheet.create({\n    ring: {\n        margin: \"auto\",\n        display: \"inline-block\",\n        borderWidth: 2,\n        padding: 2,\n        borderStyle: \"solid\",\n    },\n});\n\nexport default FocusRing;\n","import * as i18n from \"@khanacademy/wonder-blocks-i18n\";\n\n/**\n * Given a choice's position in the radio widget, return the corresponding\n * \"choice letter\". (For example, in English, `getChoiceLetter(0)` is \"A\",\n * `getChoiceLetter(1)` is \"B\", etc.)\n */\nexport function getChoiceLetter(pos: number): string {\n    /* I18N: This is a list of single-character labels that will appear in\n     * front of multiple-choice options. For instance, a multiple-choice\n     * question with three options would display\n     *  (A) first option\n     *  (B) second option\n     *  (C) third option\n     * There must be spaces between each of the different characters. The\n     * characters will show up next to options in the order that they are\n     * listed here. Most multiple choice questions have 5 or fewer options.\n     */\n    const lettersString = i18n._(\n        \"A B C D E F G H I J K L M N O P Q R S T U V W X Y Z\",\n    );\n\n    const letters = lettersString.split(\" \");\n\n    if (pos < letters.length) {\n        // If the position we need is listed in the localized string, use that.\n        return letters[pos];\n    }\n    // If we're out of letters, give up and return a space.\n    return \" \";\n}\n","import {StyleSheet} from \"aphrodite\";\n\nimport type {StyleDeclaration} from \"aphrodite\";\n\nconst CHOICE_ICON_SIZE = 24;\n\nconst styles: StyleDeclaration = StyleSheet.create({\n    iconWrapper: {\n        display: \"inline-block\",\n        position: \"relative\",\n    },\n});\n\nexport {CHOICE_ICON_SIZE};\nexport default styles;\n","/* Component for rendering a letter icon in radio choice */\n\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {CHOICE_ICON_SIZE} from \"./shared-styles\";\n\n// The \"cross-out line\" SVG is a bit bigger than the choice icon, to provide\n// extra space for the cute rounded line cap.\nconst CROSS_OUT_LINE_PADDING = 2;\nconst CROSS_OUT_LINE_SIZE = CHOICE_ICON_SIZE + CROSS_OUT_LINE_PADDING * 2;\n\n/**\n * The \"cross-out line\" that appears over the icon when the choice has been\n * `crossedOut`.\n */\nconst CrossOutLine = function (props: {color: string}): React.ReactElement {\n    return (\n        <svg\n            width={CROSS_OUT_LINE_SIZE}\n            height={CROSS_OUT_LINE_SIZE}\n            viewBox={`0 0 ${CROSS_OUT_LINE_SIZE} ${CROSS_OUT_LINE_SIZE}`}\n            className={css(styles.crossOutLine)}\n            data-test-id=\"choice-icon__cross-out-line\"\n        >\n            <line\n                // The line stretches from the bottom-left to top-right.\n                // We don't quite go to the _very_ corner, because the cute\n                // rounded line cap needs to bleed into our padding.\n                x1={CROSS_OUT_LINE_PADDING}\n                x2={CROSS_OUT_LINE_SIZE - CROSS_OUT_LINE_PADDING}\n                y1={CROSS_OUT_LINE_SIZE - CROSS_OUT_LINE_PADDING}\n                y2={CROSS_OUT_LINE_PADDING}\n                stroke={props.color}\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n            />\n        </svg>\n    );\n};\n\nconst styles = StyleSheet.create({\n    crossOutLine: {\n        // Center the icon within the container.\n        position: \"absolute\",\n        top: `0px`,\n        left: `0px`,\n    },\n});\n\nexport default CrossOutLine;\n","/* Component for rendering a letter icon in a library radio choice */\n\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport InlineIcon from \"../../../components/inline-icon\";\nimport {iconCheck, iconMinus} from \"../../../icon-paths\";\nimport * as styleConstants from \"../../../styles/constants\";\nimport FocusRing from \"../focus-ring\";\nimport {getChoiceLetter} from \"../util\";\n\nimport CrossOutLine from \"./cross-out-line\";\nimport sharedStyles, {CHOICE_ICON_SIZE} from \"./shared-styles\";\n\ntype ChoiceIconProps = {\n    pos: number;\n    checked: boolean;\n    crossedOut: boolean;\n    focused: boolean;\n    hovered: boolean;\n    pressed: boolean;\n    correct: boolean;\n    showCorrectness: boolean;\n    multipleSelect: boolean;\n    reviewMode: boolean;\n    previouslyAnswered: boolean;\n};\n\ntype ChoiceInnerProps = {\n    pos: number;\n    showCorrectness: boolean;\n    correct: boolean | null | undefined;\n};\n\nfunction ChoiceInner(props: ChoiceInnerProps) {\n    const {pos, showCorrectness, correct} = props;\n    const letter = getChoiceLetter(pos);\n\n    if (!showCorrectness) {\n        return letter;\n    }\n    if (correct) {\n        return (\n            <InlineIcon\n                {...iconCheck}\n                style={{\n                    position: \"relative\",\n                    top: -1,\n                }}\n            />\n        );\n    }\n    return <InlineIcon {...iconMinus} />;\n}\n\n// Handle dynamic styling of the multiple choice icon. Most\n// MC icon styles are constant, but we do allow the caller\n// to specify the selected color, and thus must control styles\n// related to the selected state dynamically.\nfunction getDynamicStyles(\n    checked: boolean,\n    showCorrectness: boolean,\n    pressed: boolean,\n    multipleSelect: boolean,\n    correct?: boolean | null,\n): {\n    backgroundColor: string | null | undefined;\n    borderColor: string;\n    color: string;\n    borderRadius: number;\n} {\n    let backgroundColor;\n    let borderColor;\n    let color;\n    if (!showCorrectness && pressed) {\n        borderColor = Color.blue;\n        color = Color.blue;\n        backgroundColor = \"transparent\";\n    } else if (checked) {\n        const bg = showCorrectness && correct ? Color.green : Color.blue;\n        color = styleConstants.white;\n        backgroundColor = bg;\n        borderColor = bg;\n    } else {\n        borderColor = Color.offBlack64;\n        color = Color.offBlack64;\n    }\n\n    // define shape\n    let borderRadius;\n    if (multipleSelect) {\n        borderRadius = 3;\n    } else {\n        borderRadius = CHOICE_ICON_SIZE;\n    }\n\n    return {backgroundColor, borderColor, color, borderRadius};\n}\n\nconst ChoiceIcon = function (props: ChoiceIconProps): React.ReactElement {\n    const {\n        checked,\n        crossedOut,\n        showCorrectness,\n        correct,\n        focused,\n        hovered,\n        multipleSelect,\n        pos,\n        previouslyAnswered,\n        pressed,\n    } = props;\n\n    const dynamicStyles = getDynamicStyles(\n        checked,\n        showCorrectness,\n        pressed,\n        multipleSelect,\n        correct,\n    );\n\n    return (\n        <div className={css(sharedStyles.iconWrapper)}>\n            <FocusRing\n                color={Color.blue}\n                visible={focused || hovered}\n                multipleSelect={multipleSelect}\n            >\n                <div\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type '{ backgroundColor: string | null | undefined; borderColor: string; color: string; borderRadius: number; }' is not assignable to type 'Properties<string | number, string & {}>'.\n                    style={dynamicStyles}\n                    data-test-id=\"choice-icon__library-choice-icon\"\n                    className={css(\n                        styles.circle,\n                        showCorrectness && correct && styles.circleCorrect,\n                        showCorrectness && !correct && styles.circleIncorrect,\n                        showCorrectness &&\n                            !correct &&\n                            (checked || previouslyAnswered) &&\n                            styles.circleIncorrectAnswered,\n                    )}\n                    // used in BaseRadio editMode to check\n                    // if we actually clicked on the radio icon\n                    data-is-radio-icon={true}\n                >\n                    <div className={css(styles.innerWrapper)}>\n                        {/* @ts-expect-error [FEI-5003] - TS2786 - 'ChoiceInner' cannot be used as a JSX component. */}\n                        <ChoiceInner\n                            pos={pos}\n                            showCorrectness={showCorrectness}\n                            correct={correct}\n                        />\n                    </div>\n                </div>\n            </FocusRing>\n            {crossedOut && <CrossOutLine color={dynamicStyles.borderColor} />}\n        </div>\n    );\n};\n\nconst styles = StyleSheet.create({\n    innerWrapper: {\n        width: CHOICE_ICON_SIZE,\n        height: CHOICE_ICON_SIZE,\n\n        // Center the contents of the icon.\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    },\n    circle: {\n        // Make the circle\n        width: CHOICE_ICON_SIZE,\n        height: CHOICE_ICON_SIZE,\n        boxSizing: \"border-box\",\n        borderStyle: \"solid\",\n        borderWidth: 2,\n\n        // The default icons have letters in them. Style those letters.\n        fontFamily: styleConstants.baseFontFamily,\n        // NOTE(emily): We explicitly set the font weight instead of using the\n        // \"bold font family\" so that characters which fall back to the default\n        // font get bolded too.\n        fontWeight: \"bold\",\n        fontSize: 12,\n\n        // Center the icon wrapper.\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        // HACK(emily): I don't know why adding this line height makes the text\n        // appear centered better than any other value, but it does. In\n        // particular, at large zoom levels this line height does almost\n        // nothing, but at the default size this shifts the letter down one\n        // pixel so it is much better centered.\n        lineHeight: \"1px\",\n    },\n\n    circleCorrect: {\n        fontSize: CHOICE_ICON_SIZE,\n    },\n\n    circleIncorrect: {\n        fontSize: CHOICE_ICON_SIZE,\n        borderColor: styleConstants.gray68,\n        color: styleConstants.gray68,\n    },\n\n    circleIncorrectAnswered: {\n        backgroundColor: Color.red,\n        borderColor: Color.red,\n        color: Color.white,\n    },\n});\n\nexport default ChoiceIcon;\n","/**\n * Renders text indicating whether the choice was correct or\n * not and whether the choice was selected or not.\n * This information is redundant with that provided in the\n * ChoiceIcon visualizations but is meant to make the distinctions\n * between the states more immediately clear to users.\n */\n\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\ntype Props = {\n    // Was this option the correct answer?\n    correct: boolean;\n    // Did the user select this option as the answer?\n    checked: boolean;\n    // Did the user cross out this option?\n    crossedOut: boolean;\n    // Did the user select this option as the answer earlier?\n    previouslyAnswered: boolean;\n    reviewMode: boolean;\n};\n\nfunction renderText(\n    checked: boolean,\n    correct: boolean,\n    crossedOut: boolean,\n): string {\n    if (correct) {\n        // For correct answers, we surface checked _or_ crossedOut state,\n        // because any interaction with the correct answer is noteworthy!\n        if (checked) {\n            return i18n._(\"Correct (selected)\");\n        }\n        if (crossedOut) {\n            return i18n._(\"Correct (but you crossed it out)\");\n        }\n        return i18n._(\"Correct\");\n    }\n    // But, for incorrect answers, we only surface checked state,\n    // because crossing out an incorrect answer is not noteworthy.\n    if (checked) {\n        return i18n._(\"Incorrect (selected)\");\n    }\n    return i18n._(\"Incorrect\");\n}\n\nconst OptionStatus = function (props: Props): React.ReactElement {\n    const {checked, correct, crossedOut, previouslyAnswered, reviewMode} =\n        props;\n\n    // Option status is shown only in review mode, or for incorrectly\n    // answered items.\n    if (!reviewMode && !previouslyAnswered) {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'ReactElement<any, string | JSXElementConstructor<any>>'.\n        return null;\n    }\n\n    let textStyle;\n    if (correct) {\n        textStyle = styles.correct;\n    } else {\n        if (checked || previouslyAnswered) {\n            textStyle = styles.incorrectAnswered;\n        } else {\n            textStyle = styles.incorrect;\n        }\n    }\n\n    return (\n        <div className={css(styles.text, textStyle)}>\n            {renderText(checked, correct, crossedOut)}\n        </div>\n    );\n};\n\nconst styles = StyleSheet.create({\n    text: {\n        alignItems: \"center\",\n        display: \"flex\",\n        fontSize: 12,\n        height: 32,\n        textTransform: \"uppercase\",\n    },\n    correct: {\n        color: Color.green,\n    },\n    incorrectAnswered: {\n        color: Color.red,\n    },\n    incorrect: {\n        color: Color.offBlack64,\n    },\n});\n\nexport default OptionStatus;\n","/* eslint-disable react/no-unsafe */\nimport Button from \"@khanacademy/wonder-blocks-button\";\nimport Clickable from \"@khanacademy/wonder-blocks-clickable\";\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport {View} from \"@khanacademy/wonder-blocks-core\";\nimport {Strut} from \"@khanacademy/wonder-blocks-layout\";\nimport {Popover, PopoverContent} from \"@khanacademy/wonder-blocks-popover\";\nimport Spacing from \"@khanacademy/wonder-blocks-spacing\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport {useState, useEffect} from \"react\";\nimport _ from \"underscore\";\n\nimport Icon from \"../../components/icon\";\nimport {ApiOptions, ClassNames} from \"../../perseus-api\";\nimport mediaQueries from \"../../styles/media-queries\";\n\nimport getA11yText from \"./choice-a11y-text\";\nimport ChoiceIcon from \"./choice-icon/choice-icon\";\nimport OptionStatus from \"./option-status\";\nimport {getChoiceLetter} from \"./util\";\n\nimport type {APIOptions} from \"../../types\";\n\nconst intermediateCheckboxPadding = `16px 16px`;\nconst intermediateCheckboxPaddingPhone = `12px 16px`;\n\nconst ellipsisHorizontalIcon = {\n    path: \"M27.218 6.82l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836z\",\n    width: 100,\n    height: 27.284,\n} as const;\n\nexport type ChoiceProps = {\n    apiOptions?: APIOptions;\n    checked?: boolean;\n    rationale: React.ReactNode;\n    content: React.ReactNode;\n    correct?: boolean;\n    disabled?: boolean;\n    // This indicates the position of the choice relative to others\n    // (so that we can display a nice little (A), (B), etc. next to it)\n    // Also used to generate an id for each input.\n    pos: number;\n    reviewMode: boolean;\n    showRationale: boolean;\n    showCorrectness: boolean;\n    multipleSelect: boolean;\n    // Indicates whether the user has \"crossed out\" this choice, meaning\n    // that they don't think it's correct. This value does not affect\n    // scoring or other behavior; it's just a note for the user's\n    // reference.\n    crossedOut: boolean;\n    // Indicates that the user has previously selected this answer. These\n    // answers may be rendered orange in review, rather than grey if\n    // incorrect.\n    previouslyAnswered?: boolean;\n    // A callback indicating that this choice has changed. Its argument is\n    // an object with two keys: `checked` and `crossedOut`. Each contains a\n    // boolean value specifying the new checked and crossed-out value of\n    // this choice.\n    onChange?: (newValues: {checked: boolean; crossedOut: boolean}) => void;\n};\n\ntype WithForwardRef = {\n    forwardedRef: React.ForwardedRef<HTMLButtonElement>;\n};\n\ntype ChoicePropsWithForwardRef = ChoiceProps & WithForwardRef;\n\n// Note(TB): Received errors when using useUniqueIdWithMock\n// so created this workaround function. Will update when\n// useUniqueIdWithMock is available.\n// https://khanacademy.atlassian.net/browse/FEI-4861?atlOrigin=eyJpIjoiNDJlZWMwNjM1NWJhNDBkMWFjY2FmN2I0ZjcxZmQxOGUiLCJwIjoiaiJ9\nlet id = 0;\nfunction uniqueId() {\n    return `choice-${id++}`;\n}\n\nconst Choice = function (props: ChoicePropsWithForwardRef): React.ReactElement {\n    const {\n        disabled = false,\n        checked = false,\n        content,\n        crossedOut,\n        showCorrectness,\n        multipleSelect,\n        onChange = (newValues: {\n            checked: boolean;\n            crossedOut: boolean;\n        }): void => {},\n        reviewMode,\n        correct = false,\n        apiOptions = ApiOptions.defaults,\n        previouslyAnswered = false,\n        pos = 0,\n        showRationale = false,\n        rationale,\n        forwardedRef,\n    } = props;\n    const [isInputFocused, setIsInputFocused] = useState(false);\n\n    useEffect(() => {\n        if (isInputFocused && disabled) {\n            setIsInputFocused(false);\n        }\n    }, [disabled, isInputFocused, setIsInputFocused]);\n\n    // Call `this.props.onChange` with the given values. Any keys that are not\n    // specified will be filled in with the current value. (For example, if\n    // `checked` is specified but `crossedOut` is not, then `crossedOut` will\n    // be filled in with `this.props.crossedOut`.)\n    //\n    // This enables us to use shorthand inside this component, while\n    // maintaining a consistent API for the parent.\n    function sendChange(newValues: {checked?: boolean; crossedOut?: boolean}) {\n        const updatedChecked = newValues.checked ?? checked;\n        const updatedCrossedOut = newValues.crossedOut ?? crossedOut;\n        onChange({checked: updatedChecked, crossedOut: updatedCrossedOut});\n    }\n\n    const descriptionClassName = classNames(\n        \"description\",\n        css(styles.description),\n    );\n\n    const rationaleClassName = classNames(\n        \"perseus-radio-rationale-content\",\n        css(styles.rationale),\n    );\n\n    // We want to show the choices as dimmed out when the choices are disabled.\n    // However, we don't want to do this when we're in review mode in the\n    // content library.\n    const showDimmed = (!reviewMode && apiOptions.readOnly) || crossedOut;\n\n    const letter = getChoiceLetter(pos);\n    const a11yText = getA11yText(\n        letter,\n        checked,\n        correct,\n        crossedOut,\n        showCorrectness,\n    );\n    const choiceId = uniqueId();\n\n    return (\n        <div\n            style={{\n                // @ts-expect-error [FEI-5003] - TS2322 - Type '{ dispay: string; flexDirection: \"column\"; color: string; }' is not assignable to type 'Properties<string | number, string & {}>'.\n                dispay: \"flex\",\n                flexDirection: \"column\",\n                color: Color.offBlack,\n            }}\n            className={descriptionClassName}\n        >\n            <div\n                style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    opacity: showDimmed ? 0.5 : 1.0,\n                }}\n            >\n                <div className=\"perseus-sr-only\">\n                    <input\n                        type={multipleSelect ? \"checkbox\" : \"radio\"}\n                        id={choiceId}\n                        checked={checked}\n                        onClick={() => {\n                            // If we're checking a crossed-out option, let's\n                            // also uncross it.\n                            sendChange({\n                                checked: !checked,\n                                crossedOut: false,\n                            });\n                        }}\n                        onChange={() => {}}\n                        disabled={disabled || apiOptions.readOnly}\n                        tabIndex={-1}\n                        className={ClassNames.RADIO.OPTION_CONTENT}\n                    />\n                    <label htmlFor={choiceId}>\n                        {a11yText} &nbsp; {content}\n                    </label>\n                </div>\n                <Clickable\n                    onClick={() => {\n                        // If we're checking a crossed-out option, let's\n                        // also uncross it.\n                        sendChange({\n                            checked: !checked,\n                            crossedOut: false,\n                        });\n                    }}\n                    disabled={disabled || apiOptions.readOnly}\n                    style={{flex: 1, color: Color.offBlack, userSelect: \"text\"}}\n                    ref={forwardedRef as any}\n                    aria-hidden=\"true\"\n                >\n                    {({hovered, focused, pressed}) => (\n                        <div\n                            style={{\n                                display: \"flex\",\n                                flexDirection: \"row\",\n                                justifyContent: \"center\",\n                                alignContent: \"center\",\n                                paddingTop: Spacing.xSmall_8,\n                                paddingBottom: Spacing.xSmall_8,\n                                paddingLeft: Spacing.xSmall_8,\n                            }}\n                        >\n                            <ChoiceIcon\n                                pos={pos}\n                                correct={correct}\n                                crossedOut={crossedOut}\n                                pressed={pressed}\n                                focused={focused}\n                                checked={checked}\n                                hovered={hovered}\n                                showCorrectness={showCorrectness}\n                                multipleSelect={multipleSelect}\n                                reviewMode={reviewMode}\n                                previouslyAnswered={previouslyAnswered}\n                            />\n                            <span\n                                style={{\n                                    paddingLeft: Spacing.small_12,\n                                    textAlign: \"left\",\n                                    flex: 1,\n                                    paddingTop: 4,\n                                }}\n                            >\n                                <div>\n                                    <OptionStatus\n                                        checked={checked}\n                                        correct={correct}\n                                        crossedOut={crossedOut}\n                                        previouslyAnswered={previouslyAnswered}\n                                        reviewMode={reviewMode}\n                                    />\n                                </div>\n                                <div>{content}</div>\n                            </span>\n                        </div>\n                    )}\n                </Clickable>\n\n                {apiOptions.crossOutEnabled && !reviewMode && (\n                    <Popover\n                        dismissEnabled\n                        content={({close}) => (\n                            <PopoverContent\n                                title=\"Cross out\"\n                                content=\"Cross out option\"\n                                closeButtonVisible\n                                actions={\n                                    <View>\n                                        <Strut size={Spacing.medium_16} />\n                                        <Button\n                                            kind=\"primary\"\n                                            aria-label={`Cross out Choice ${getChoiceLetter(\n                                                pos,\n                                            )}`}\n                                            disabled={\n                                                apiOptions.readOnly ||\n                                                reviewMode\n                                            }\n                                            onClick={() => {\n                                                if (!crossedOut) {\n                                                    // If we're crossing\n                                                    // out a checked\n                                                    // option, let's also\n                                                    // uncheck it.\n                                                    sendChange({\n                                                        checked: false,\n                                                        crossedOut: true,\n                                                    });\n                                                } else {\n                                                    sendChange({\n                                                        crossedOut: false,\n                                                    });\n                                                }\n                                                close();\n                                            }}\n                                        >\n                                            {crossedOut\n                                                ? \"Bring back\"\n                                                : \"Cross out\"}\n                                        </Button>\n                                    </View>\n                                }\n                            />\n                        )}\n                    >\n                        {({open}) => (\n                            <Clickable\n                                onClick={open}\n                                aria-label={`Open menu for Choice ${getChoiceLetter(\n                                    pos,\n                                )}`}\n                                style={{\n                                    alignSelf: \"center\",\n                                    padding: \"5px\",\n                                    display: \"flex\",\n                                    justifyContent: \"center\",\n                                    alignItems: \"center\",\n                                    marginLeft: \"10px\",\n                                }}\n                            >\n                                {({hovered, focused, pressed}) => (\n                                    <Icon\n                                        icon={ellipsisHorizontalIcon}\n                                        size={3}\n                                        color={Color.offBlack64}\n                                    />\n                                )}\n                            </Clickable>\n                        )}\n                    </Popover>\n                )}\n            </div>\n\n            {showRationale && (\n                <div\n                    className={rationaleClassName}\n                    data-test-id={`perseus-radio-rationale-content-${pos}`}\n                >\n                    {rationale}\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst styles = StyleSheet.create({\n    description: {\n        display: \"inline-block\",\n        width: \"100%\",\n    },\n\n    rationale: {\n        display: \"block\",\n        padding: intermediateCheckboxPadding,\n        paddingTop: 0,\n        marginLeft: 54,\n        [mediaQueries.smOrSmaller]: {\n            padding: intermediateCheckboxPaddingPhone,\n            paddingTop: 0,\n        },\n    },\n});\n\nexport default React.forwardRef<HTMLButtonElement, ChoiceProps>(\n    (props, ref) => <Choice {...props} forwardedRef={ref} />,\n);\n","import * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\n\nimport Renderer from \"../../renderer\";\n\nimport Choice from \"./choice\";\n\nimport type {ChoiceProps} from \"./choice\";\n\ntype Props = ChoiceProps & {\n    showContent?: boolean;\n};\n\ntype WithForwardRef = {\n    forwardedRef: React.ForwardedRef<HTMLButtonElement>;\n};\n\ntype PropsWithForwardRef = Props & WithForwardRef;\n\nconst ChoiceNoneAbove = function (\n    props: PropsWithForwardRef,\n): React.ReactElement {\n    const {showContent, content, forwardedRef, ...rest} = props;\n\n    const choiceProps = {\n        ...rest,\n        content: showContent ? (\n            content\n        ) : (\n            // We use a Renderer here because that is how\n            // `this.props.content` is wrapped otherwise.\n            // We pass in a key here so that we avoid a semi-spurious\n            // react warning when we render this in the same place\n            // as the previous choice content renderer.\n            // Note this destroys state, but since all we're doing\n            // is outputting \"None of the above\", that is okay.\n            //\n            // todo(matthewc): this seems like way overkill\n            // just to render a string\n            <Renderer\n                key=\"noneOfTheAboveRenderer\"\n                content={i18n._(\"None of the above\")}\n            />\n        ),\n    } as const;\n\n    return <Choice {...choiceProps} ref={forwardedRef} />;\n};\n\nChoiceNoneAbove.defaultProps = {\n    showContent: true,\n};\n\nexport default React.forwardRef<HTMLButtonElement, Props>((props, ref) => (\n    <ChoiceNoneAbove {...props} forwardedRef={ref} />\n));\n","import * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport {useRef, useEffect} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport {ClassNames as ApiClassNames} from \"../../perseus-api\";\nimport * as styleConstants from \"../../styles/constants\";\nimport mediaQueries from \"../../styles/media-queries\";\nimport sharedStyles from \"../../styles/shared\";\nimport Util from \"../../util\";\nimport {scrollElementIntoView} from \"../../util/scroll-utils\";\n\nimport Choice from \"./choice\";\nimport ChoiceNoneAbove from \"./choice-none-above\";\n\nimport type {PerseusRadioWidgetOptions} from \"../../perseus-types\";\nimport type {APIOptions} from \"../../types\";\nimport type {StyleDeclaration} from \"aphrodite\";\n\nconst {captureScratchpadTouchStart} = Util;\n\n// exported for tests\nexport type ChoiceType = {\n    checked: boolean;\n    crossedOut: boolean;\n    content: React.ReactNode;\n    rationale: React.ReactNode;\n    hasRationale: boolean;\n    showRationale: boolean;\n    showCorrectness: boolean;\n    correct: boolean;\n    isNoneOfTheAbove: boolean;\n    highlighted: boolean;\n    previouslyAnswered: boolean;\n    revealNoneOfTheAbove: boolean;\n    disabled: boolean;\n};\n\nexport type FocusFunction = (\n    choiceIndex?: number | null | undefined,\n) => boolean;\n\ntype Props = {\n    apiOptions: APIOptions;\n    choices: ReadonlyArray<ChoiceType>;\n    deselectEnabled?: boolean;\n    editMode: boolean;\n    labelWrap: boolean;\n    countChoices: boolean | null | undefined;\n    numCorrect: number;\n    multipleSelect: boolean;\n    // the logic checks whether this exists,\n    // so it must be optional\n    reviewModeRubric?: PerseusRadioWidgetOptions;\n    // A callback indicating that this choice has changed. Its argument is\n    // an object with two keys: `checked` and `crossedOut`. Each contains\n    // an array of boolean values, specifying the new checked and\n    // crossed-out value of each choice.\n    onChange: (newValues: {\n        checked: ReadonlyArray<boolean>;\n        crossedOut: ReadonlyArray<boolean>;\n    }) => void;\n    registerFocusFunction?: (arg1: FocusFunction) => void;\n    // Whether this widget was the most recently used widget in this\n    // Renderer. Determines whether we'll auto-scroll the page upon\n    // entering review mode.\n    isLastUsedWidget?: boolean;\n};\n\nfunction getInstructionsText(\n    multipleSelect: boolean,\n    countChoices: boolean | null | undefined,\n    numCorrect: number,\n): string {\n    if (multipleSelect) {\n        if (countChoices) {\n            return i18n._(\"Choose %(numCorrect)s answers:\", {\n                numCorrect: numCorrect,\n            });\n        }\n        return i18n._(\"Choose all answers that apply:\");\n    }\n    return i18n._(\"Choose 1 answer:\");\n}\n\nconst BaseRadio = function (props: Props): React.ReactElement {\n    const {\n        apiOptions,\n        reviewModeRubric,\n        choices,\n        editMode,\n        multipleSelect,\n        labelWrap,\n        countChoices,\n        numCorrect,\n        isLastUsedWidget,\n        registerFocusFunction,\n    } = props;\n\n    // useEffect doesn't have previous props\n    const prevReviewModeRubric = useRef();\n    const choiceRefs = useRef([]);\n\n    useEffect(() => {\n        // Switching into review mode can sometimes cause the selected answer\n        // to scroll out of view - for example, when we reveal all those tall\n        // rationales. This can be disorienting for the user.\n        //\n        // So, if this widget just switched into review mode, ensure that the\n        // checked choice (or first checked choice, if there are multiple) is\n        // scrolled into view.\n        //\n        // This only happens if the `canScrollPage` API option is set (so that\n        // call sites aren't surprised by scrolling), and if this widget was\n        // the most recently used widget (because, if the user has since\n        // touched something else, they're probably not trying to keep their\n        // eye on this widget anymore).\n        if (\n            apiOptions.canScrollPage &&\n            isLastUsedWidget &&\n            reviewModeRubric &&\n            !prevReviewModeRubric.current\n        ) {\n            const checkedIndex = choices.findIndex((c) => c.checked);\n            if (checkedIndex >= 0) {\n                const ref = choiceRefs.current[checkedIndex];\n                // note(matthew): we know this is only getting passed\n                // to a WB Clickable button, so we force it to be of\n                // type HTMLButtonElement\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'current' does not exist on type 'never'.\n                const anyNode = ReactDOM.findDOMNode(ref.current) as any;\n                const buttonNode = anyNode as\n                    | HTMLButtonElement\n                    | null\n                    | undefined;\n                if (buttonNode) {\n                    scrollElementIntoView(buttonNode);\n                }\n            }\n        }\n\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'PerseusRadioWidgetOptions | undefined' is not assignable to type 'undefined'.\n        prevReviewModeRubric.current = reviewModeRubric;\n    }, [apiOptions, choices, isLastUsedWidget, reviewModeRubric]);\n\n    // When a particular choice's `onChange` handler is called, indicating a\n    // change in a single choice's values, we need to call our `onChange`\n    // handler in order to notify our parent. However, our API with our parent\n    // is that we always provide *all* values for *all* choices, even if just\n    // one choice's values changed. (This is because sometimes an interaction\n    // with one choice can affect many choices, like how checking a new answer\n    // will usually cause the old answer to become unchecked.)\n    //\n    // So, given the new values for a particular choice, compute the new values\n    // for all choices, and pass them to `onChange`.\n    //\n    // `newValues` is an object with two keys: `checked` and `crossedOut`. Each\n    // contains a boolean value specifying the new checked and crossed-out\n    // value of this choice.\n    function updateChoice(\n        choiceIndex: number,\n        newValues: Readonly<{\n            checked: boolean;\n            crossedOut: boolean;\n        }>,\n    ): void {\n        const {multipleSelect, choices, onChange} = props;\n\n        // Get the baseline `checked` values. If we're checking a new answer\n        // and multiple-select is not on, we should clear all choices to be\n        // unchecked. Otherwise, we should copy the old checked values.\n        let newCheckedList;\n        if (newValues.checked && !multipleSelect) {\n            newCheckedList = choices.map((_) => false);\n        } else {\n            newCheckedList = choices.map((c) => c.checked);\n        }\n\n        // Get the baseline `crossedOut` values.\n        const newCrossedOutList = choices.map((c) => c.crossedOut);\n\n        // Update this choice's `checked` and `crossedOut` values.\n        newCheckedList[choiceIndex] = newValues.checked;\n        newCrossedOutList[choiceIndex] = newValues.crossedOut;\n\n        onChange({\n            checked: newCheckedList,\n            crossedOut: newCrossedOutList,\n        });\n    }\n\n    // register a callback with the parent that allows\n    // the parent to focus an individual choice\n    registerFocusFunction?.((choiceIndex: number | null | undefined) => {\n        const ref = choiceRefs.current[choiceIndex || 0];\n        // note(matthew): we know this is only getting passed\n        // to a WB Clickable button, so we force it to be of\n        // type HTMLButtonElement\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'current' does not exist on type 'never'.\n        const anyNode = ReactDOM.findDOMNode(ref.current) as any;\n        const buttonNode = anyNode as HTMLButtonElement | null | undefined;\n\n        if (buttonNode) {\n            buttonNode.focus();\n        } else {\n            return false;\n        }\n        return true;\n    });\n\n    // some commonly used shorthands\n    const reviewMode = !!reviewModeRubric;\n    const isMobile = apiOptions.isMobile;\n\n    const firstChoiceHighlighted = choices[0].highlighted;\n    const lastChoiceHighlighted = choices[choices.length - 1].highlighted;\n\n    const className: ReadonlyArray<string> = classNames(\n        \"perseus-widget-radio\",\n        !editMode && \"perseus-rendered-radio\",\n        css(\n            styles.radio,\n            styles.responsiveRadioContainer,\n            firstChoiceHighlighted &&\n                isMobile &&\n                styles.radioContainerFirstHighlighted,\n            lastChoiceHighlighted &&\n                isMobile &&\n                styles.radioContainerLastHighlighted,\n        ),\n    );\n\n    const instructionsClassName: ReadonlyArray<string> = classNames(\n        \"instructions\",\n        css(styles.instructions, isMobile && styles.instructionsMobile),\n    );\n    const instructions = getInstructionsText(\n        multipleSelect,\n        countChoices,\n        numCorrect,\n    );\n\n    const responsiveClassName = css(styles.responsiveFieldset);\n    const fieldset = (\n        <fieldset\n            className={`perseus-widget-radio-fieldset ${responsiveClassName}`}\n        >\n            <legend className=\"perseus-sr-only\">{instructions}</legend>\n            {/* @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly string[]' is not assignable to type 'string'. */}\n            <div className={instructionsClassName} aria-hidden=\"true\">\n                {instructions}\n            </div>\n            {/* @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly string[]' is not assignable to type 'string'. */}\n            <ul className={className} style={{listStyle: \"none\"}}>\n                {choices.map((choice, i) => {\n                    let Element = Choice;\n                    const ref = React.createRef<any>();\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'RefObject<unknown>' is not assignable to type 'never'.\n                    choiceRefs.current[i] = ref;\n                    const elementProps = {\n                        apiOptions: apiOptions,\n                        multipleSelect: multipleSelect,\n                        checked: choice.checked,\n                        crossedOut: choice.crossedOut,\n                        previouslyAnswered: choice.previouslyAnswered,\n                        reviewMode,\n                        correct: choice.correct,\n                        rationale: choice.rationale,\n                        content: choice.content,\n                        disabled: apiOptions.readOnly || choice.disabled,\n                        showCorrectness: reviewMode || !!choice.showCorrectness,\n                        showRationale:\n                            choice.hasRationale &&\n                            (reviewMode || choice.showRationale),\n                        pos: i,\n                        onChange: (newValues) => {\n                            // editMode selection is handled in clickHandler\n                            if (editMode) {\n                                return;\n                            }\n\n                            updateChoice(i, newValues);\n                        },\n                    } as const;\n\n                    if (choice.isNoneOfTheAbove) {\n                        Element = ChoiceNoneAbove;\n                        _.extend(elementProps, {\n                            showContent: choice.revealNoneOfTheAbove,\n                        });\n                    }\n\n                    const nextChoice = choices[i + 1];\n                    const nextChoiceHighlighted =\n                        !!nextChoice && nextChoice.highlighted;\n\n                    const aphroditeClassName = (checked: boolean) => {\n                        // Whether or not to show correctness borders\n                        // for this choice and the next choice.\n                        return css(\n                            sharedStyles.aboveScratchpad,\n                            styles.item,\n                            styles.responsiveItem,\n                            checked && styles.selectedItem,\n                            checked &&\n                                choice.highlighted &&\n                                styles.aboveBackdrop,\n                            checked &&\n                                choice.highlighted &&\n                                apiOptions.isMobile &&\n                                styles.aboveBackdropMobile,\n                            nextChoiceHighlighted &&\n                                apiOptions.isMobile &&\n                                styles.nextHighlighted,\n                        );\n                    };\n\n                    // HACK(abdulrahman): Preloads the selection-state\n                    // css because of a bug that causes iOS to lag\n                    // when selecting the button for the first time.\n                    aphroditeClassName(true);\n\n                    let correctnessClass;\n                    // reviewMode is only true if there's a rubric\n                    // but TypeScript doesn't understand that\n                    if (reviewMode && reviewModeRubric) {\n                        correctnessClass = reviewModeRubric.choices[i].correct\n                            ? ApiClassNames.CORRECT\n                            : ApiClassNames.INCORRECT;\n                    }\n                    const className: ReadonlyArray<string> = classNames(\n                        aphroditeClassName(choice.checked),\n                        // TODO(aria): Make test case for these API\n                        // classNames\n                        ApiClassNames.RADIO.OPTION,\n                        choice.checked && ApiClassNames.RADIO.SELECTED,\n                        correctnessClass,\n                    );\n\n                    // In edit mode, the Choice renders a Div in order to\n                    // allow for the contentEditable area to be selected\n                    // (label forces any clicks inside to select the input\n                    // element) We have to add some extra behavior to make\n                    // sure that we can still check the choice.\n                    let listElem = null;\n                    let clickHandler = null;\n                    if (editMode) {\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type '(e: any) => void' is not assignable to type 'null'.\n                        clickHandler = (e: any) => {\n                            // Traverse the parent nodes of the clicked\n                            // element.\n                            let elem = e.target;\n                            while (elem && elem !== listElem) {\n                                // If the clicked element is inside of the\n                                // radio icon, then we want to trigger the\n                                // check by flipping the choice of the icon.\n                                if (elem.getAttribute(\"data-is-radio-icon\")) {\n                                    updateChoice(i, {\n                                        checked: !choice.checked,\n                                        crossedOut: choice.crossedOut,\n                                    });\n                                    return;\n                                }\n                                elem = elem.parentNode;\n                            }\n                        };\n                    }\n\n                    // TODO(mattdr): Index isn't a *good* choice of key\n                    // here; is there a better one? Can we use choice\n                    // content somehow? Would changing our choice of key\n                    // somehow break something happening inside a choice's\n                    // child Renderers, by changing when we mount/unmount?\n                    return (\n                        <li\n                            key={i}\n                            // @ts-expect-error [FEI-5003] - TS2322 - Type 'HTMLLIElement | null' is not assignable to type 'null'.\n                            ref={(e) => (listElem = e)}\n                            // @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly string[]' is not assignable to type 'string'.\n                            className={className}\n                            // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'MouseEventHandler<HTMLLIElement> | undefined'.\n                            onClick={clickHandler}\n                            // @ts-expect-error [FEI-5003] - TS2322 - Type '((e: TouchEvent) => void) | null' is not assignable to type 'TouchEventHandler<HTMLLIElement> | undefined'.\n                            onTouchStart={\n                                !labelWrap ? null : captureScratchpadTouchStart\n                            }\n                        >\n                            <Element {...elementProps} ref={ref} />\n                        </li>\n                    );\n                })}\n            </ul>\n        </fieldset>\n    );\n\n    // Allow for horizontal scrolling if content is too wide, which may be\n    // an issue especially on phones.\n    return <div className={css(styles.responsiveContainer)}>{fieldset}</div>;\n};\n\nBaseRadio.defaultProps = {\n    editMode: false,\n    multipleSelect: false,\n};\n\nconst styles: StyleDeclaration = StyleSheet.create({\n    instructions: {\n        display: \"block\",\n        color: styleConstants.gray17,\n        fontSize: 14,\n        lineHeight: 1.25,\n        fontStyle: \"normal\",\n        fontWeight: \"bold\",\n        marginBottom: 16,\n    },\n\n    instructionsMobile: {\n        fontSize: 18,\n        [mediaQueries.smOrSmaller]: {\n            fontSize: 16,\n        },\n        // TODO(emily): We want this to match choice text, which turns\n        // to 20px at min-width 1200px, but this media query is\n        // min-width 1280px because our media queries don't exactly\n        // match pure. Make those match up.\n        [mediaQueries.xl]: {\n            fontSize: 20,\n        },\n    },\n\n    radio: {\n        padding: 0,\n    },\n\n    responsiveRadioContainer: {\n        borderBottom: `1px solid ${styleConstants.radioBorderColor}`,\n        borderTop: `1px solid ${styleConstants.radioBorderColor}`,\n        width: \"auto\",\n        [mediaQueries.smOrSmaller]: {\n            marginLeft: styleConstants.negativePhoneMargin,\n            marginRight: styleConstants.negativePhoneMargin,\n        },\n    },\n\n    radioContainerFirstHighlighted: {\n        borderTop: `1px solid rgba(0, 0, 0, 0)`,\n    },\n\n    radioContainerLastHighlighted: {\n        borderBottom: `1px solid rgba(0, 0, 0, 0)`,\n    },\n\n    item: {\n        marginLeft: 20,\n    },\n\n    responsiveItem: {\n        marginLeft: 0,\n        padding: 0,\n\n        \":not(:last-child)\": {\n            borderBottom: `1px solid ${styleConstants.radioBorderColor}`,\n        },\n    },\n    selectedItem: {\n        background: \"white\",\n    },\n\n    aboveBackdrop: {\n        position: \"relative\",\n        // HACK(emily): We want selected choices to show up above our\n        // exercise backdrop, but below the exercise footer and\n        // \"feedback popover\" that shows up. This z-index is carefully\n        // coordinated between here and webapp. :(\n        zIndex: 1062,\n    },\n\n    aboveBackdropMobile: {\n        boxShadow:\n            \"0 0 4px 0 rgba(0, 0, 0, 0.2),\" + \"0 0 2px 0 rgba(0, 0, 0, 0.1)\",\n\n        \":not(:last-child)\": {\n            borderBottom: `1px solid rgba(0, 0, 0, 0)`,\n        },\n    },\n\n    nextHighlighted: {\n        \":not(:last-child)\": {\n            borderBottom: `1px solid rgba(0, 0, 0, 0)`,\n        },\n    },\n\n    responsiveContainer: {\n        overflow: \"auto\",\n        marginLeft: styleConstants.negativePhoneMargin,\n        marginRight: styleConstants.negativePhoneMargin,\n        paddingLeft: styleConstants.phoneMargin,\n        // paddingRight is handled by responsiveFieldset\n    },\n\n    responsiveFieldset: {\n        paddingRight: styleConstants.phoneMargin,\n    },\n});\n\nexport default BaseRadio;\n","import {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\n\nimport Renderer from \"../../renderer\";\nimport Util from \"../../util\";\nimport PassageRef from \"../passage-ref\";\n\nimport BaseRadio from \"./base-radio\";\n\nimport type {\n    PerseusRadioChoice,\n    PerseusRadioWidgetOptions,\n} from \"../../perseus-types\";\nimport type {PerseusScore, WidgetProps, ChoiceState} from \"../../types\";\nimport type {FocusFunction, ChoiceType} from \"./base-radio\";\n\n// RenderProps is the return type for radio.jsx#transform\nexport type RenderProps = {\n    numCorrect: number;\n    hasNoneOfTheAbove?: boolean;\n    multipleSelect?: boolean;\n    countChoices?: boolean;\n    deselectEnabled?: boolean;\n    choices: ReadonlyArray<RadioChoiceWithMetadata>;\n    selectedChoices: ReadonlyArray<PerseusRadioChoice[\"correct\"]>;\n    choiceStates?: ReadonlyArray<ChoiceState>;\n    // Depreciated; support for legacy way of handling changes\n    // Adds proptype for prop that is used but was lacking type\n    values?: ReadonlyArray<boolean>;\n};\n\ntype UserInput = {\n    countChoices?: boolean;\n    choicesSelected: ReadonlyArray<boolean>;\n    numCorrect?: number;\n    noneOfTheAboveIndex?: number | null | undefined;\n    noneOfTheAboveSelected?: boolean;\n};\ntype Rubric = PerseusRadioWidgetOptions;\ntype Props = WidgetProps<RenderProps, Rubric>;\n\ntype DefaultProps = {\n    choices: Props[\"choices\"];\n    multipleSelect: Props[\"multipleSelect\"];\n    countChoices: Props[\"countChoices\"];\n    deselectEnabled: Props[\"deselectEnabled\"];\n    linterContext: Props[\"linterContext\"];\n};\n\nexport type RadioChoiceWithMetadata = PerseusRadioChoice & {\n    originalIndex: number;\n    correct: boolean;\n};\n\nclass Radio extends React.Component<Props> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'focusFunction' has no initializer and is not definitely assigned in the constructor.\n    focusFunction: FocusFunction;\n\n    static defaultProps: DefaultProps = {\n        choices: [],\n        multipleSelect: false,\n        countChoices: false,\n        deselectEnabled: false,\n        linterContext: linterContextDefault,\n    };\n\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        const numSelected = userInput.choicesSelected.reduce(\n            (sum, selected) => {\n                return sum + (selected ? 1 : 0);\n            },\n            0,\n        );\n\n        if (numSelected === 0) {\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n\n        if (\n            userInput.numCorrect &&\n            userInput.numCorrect > 1 &&\n            numSelected !== userInput.numCorrect\n        ) {\n            return {\n                type: \"invalid\",\n                message: i18n._(\"Please choose the correct number of answers.\"),\n            };\n            // If NOTA and some other answer are checked, ...\n        }\n        if (userInput.noneOfTheAboveSelected && numSelected > 1) {\n            return {\n                type: \"invalid\",\n                message: i18n._(\n                    \"'None of the above' may not be selected \" +\n                        \"when other answers are selected.\",\n                ),\n            };\n        }\n\n        const correct = userInput.choicesSelected.every((selected, i) => {\n            let isCorrect;\n            if (userInput.noneOfTheAboveIndex === i) {\n                isCorrect = rubric.choices.every((choice, j) => {\n                    return i === j || !choice.correct;\n                });\n            } else {\n                isCorrect = !!rubric.choices[i].correct;\n            }\n            return isCorrect === selected;\n        });\n\n        return {\n            type: \"points\",\n            earned: correct ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    }\n\n    static getUserInputFromProps(props: Props): UserInput {\n        // Return checked inputs in the form {choicesSelected: [bool]}. (Dear\n        // future timeline implementers: this used to be {value: i} before\n        // multiple select was added)\n        if (props.choiceStates) {\n            let noneOfTheAboveIndex = null;\n            let noneOfTheAboveSelected = false;\n\n            const choiceStates = props.choiceStates;\n            const choicesSelected = choiceStates.map(() => false);\n            const countChoices = props.countChoices;\n            const numCorrect = props.numCorrect;\n\n            for (let i = 0; i < choicesSelected.length; i++) {\n                const index = props.choices[i].originalIndex;\n\n                choicesSelected[index] = choiceStates[i].selected;\n\n                if (props.choices[i].isNoneOfTheAbove) {\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n                    noneOfTheAboveIndex = index;\n\n                    if (choicesSelected[i]) {\n                        noneOfTheAboveSelected = true;\n                    }\n                }\n            }\n\n            return {\n                countChoices,\n                choicesSelected,\n                numCorrect,\n                noneOfTheAboveIndex,\n                noneOfTheAboveSelected,\n            };\n            // Support legacy choiceState implementation\n        }\n        /* c8 ignore if - props.values is deprecated */\n        const {values} = props;\n        if (values) {\n            let noneOfTheAboveIndex = null;\n            let noneOfTheAboveSelected = false;\n\n            const choicesSelected = [...values];\n            const countChoices = props.countChoices;\n            const numCorrect = props.numCorrect;\n            const valuesLength = values.length;\n\n            for (let i = 0; i < valuesLength; i++) {\n                const index = props.choices[i].originalIndex;\n                choicesSelected[index] = values[i];\n\n                if (props.choices[i].isNoneOfTheAbove) {\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n                    noneOfTheAboveIndex = index;\n                    if (choicesSelected[i]) {\n                        noneOfTheAboveSelected = true;\n                    }\n                }\n            }\n            return {\n                choicesSelected,\n                noneOfTheAboveIndex,\n                noneOfTheAboveSelected,\n                countChoices,\n                numCorrect,\n            };\n        }\n        // Nothing checked\n        return {\n            choicesSelected: props.choices.map(() => false),\n        };\n    }\n\n    _renderRenderer: (content?: string) => React.ReactElement = (\n        content = \"\",\n    ) => {\n        let nextPassageRefId = 1;\n        const widgets: Record<string, any> = {};\n\n        const modContent = content.replace(\n            /\\{\\{passage-ref (\\d+) (\\d+)(?: \"([^\"]*)\")?\\}\\}/g,\n            (\n                match: string,\n                passageNum: string,\n                refNum: string,\n                summaryText: string,\n            ) => {\n                const widgetId = \"passage-ref \" + nextPassageRefId;\n                nextPassageRefId++;\n\n                widgets[widgetId] = {\n                    type: \"passage-ref\",\n                    graded: false,\n                    options: {\n                        passageNumber: parseInt(passageNum),\n                        referenceNumber: parseInt(refNum),\n                        summaryText: summaryText,\n                    },\n                    version: PassageRef.version,\n                };\n\n                return \"[[\" + Util.snowman + \" \" + widgetId + \"]]\";\n            },\n        );\n\n        // alwaysUpdate={true} so that passage-refs findWidgets\n        // get called when the outer passage updates the renderer\n        // TODO(aria): This is really hacky\n        // We pass in a key here so that we avoid a semi-spurious\n        // react warning when the ChoiceNoneAbove renders a\n        // different renderer in the same place. Note this destroys\n        // state, but since all we're doing is outputting\n        // \"None of the above\", that is okay.\n        // TODO(mdr): Widgets inside this Renderer are not discoverable through\n        //     the parent Renderer's `findWidgets` function.\n        return (\n            <Renderer\n                key=\"choiceContentRenderer\"\n                content={modContent}\n                widgets={widgets}\n                findExternalWidgets={this.props.findWidgets}\n                alwaysUpdate={true}\n                linterContext={{\n                    ...this.props.linterContext,\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type '{ blockHighlight: true; contentType: string; highlightLint: boolean; paths: readonly string[]; stack: readonly string[]; }' is not assignable to type 'LinterContextProps'.\n                    blockHighlight: true,\n                }}\n            />\n        );\n    };\n\n    // TODO(LP-10672): I think this might be unused right now. I can't find anywhere\n    // that we pass a value to `.focus()` and it seems to have been used for\n    // adding hints when editing.\n    // See: https://github.com/Khan/perseus/blame/e18582b4b69959270b90e237ef1813899711ddfa/src/widgets/radio.js#L169\n    focus(choiceIndex?: number | null): boolean {\n        if (this.focusFunction) {\n            return this.focusFunction(choiceIndex);\n        }\n\n        return false;\n    }\n\n    // lets BaseRadio regiser a focus callback so widget\n    // can focus an individual choice\n    registerFocusFunction(fun: FocusFunction): void {\n        this.focusFunction = fun;\n    }\n\n    // When `BaseRadio`'s `onChange` handler is called, indicating a change in\n    // our choices' state, we need to call our `onChange` handler in order to\n    // persist those changes in the item's Perseus state.\n    //\n    // So, given the new values for each choice, construct the new\n    // `choiceStates` objects, and pass them to `this.props.onChange`.\n    //\n    // `newValueLists` is an object with two keys: `checked` and `crossedOut`.\n    // Each contains an array of boolean values, specifying the new checked and\n    // crossed-out value of each choice.\n    //\n    // NOTE(mdr): This method expects to be auto-bound. If this component is\n    //     converted to an ES6 class, take care to auto-bind this method!\n    updateChoices: (\n        newValueLists: Readonly<{\n            checked: ReadonlyArray<boolean>;\n            crossedOut: ReadonlyArray<boolean>;\n        }>,\n    ) => void = (newValueLists) => {\n        const {choiceStates, choices} = this.props;\n\n        // Construct the baseline `choiceStates` objects. If this is the user's\n        // first interaction with the widget, we'll need to initialize them to\n        // new objects with all fields set to the default values. Otherwise, we\n        // should clone the old `choiceStates` objects, in preparation to\n        // mutate them.\n        const newChoiceStates = choiceStates\n            ? choiceStates.map((state: ChoiceState) => ({...state}))\n            : choices.map(() => ({\n                  selected: false,\n                  crossedOut: false,\n                  highlighted: false,\n                  rationaleShown: false,\n                  correctnessShown: false,\n                  previouslyAnswered: false,\n                  readOnly: false,\n              }));\n\n        // Mutate the new `choiceState` objects, according to the new `checked`\n        // and `crossedOut` values provided in `newValueLists`.\n        newChoiceStates.forEach((choiceState: ChoiceState, i) => {\n            choiceState.selected = newValueLists.checked[i];\n            choiceState.crossedOut = newValueLists.crossedOut[i];\n        });\n\n        this.props.onChange({choiceStates: newChoiceStates});\n        this.props.trackInteraction();\n    };\n\n    getUserInput: () => UserInput = () => {\n        return Radio.getUserInputFromProps(this.props);\n    };\n\n    simpleValidate: (arg1: PerseusRadioWidgetOptions) => PerseusScore = (\n        rubric,\n    ) => {\n        return Radio.validate(this.getUserInput(), rubric);\n    };\n\n    /**\n     * Turn on rationale display for the currently selected choices. Note that\n     * this leaves rationales on for choices that are already showing\n     * rationales.\n     */\n    showRationalesForCurrentlySelectedChoices: (\n        arg1: PerseusRadioWidgetOptions,\n    ) => void = (rubric) => {\n        const {choiceStates} = this.props;\n        if (choiceStates) {\n            const score = this.simpleValidate(rubric);\n            const widgetCorrect =\n                score.type === \"points\" && score.total === score.earned;\n\n            const newStates: ReadonlyArray<ChoiceState> = choiceStates.map(\n                (state: ChoiceState): ChoiceState => ({\n                    ...state,\n                    highlighted: state.selected,\n                    // If the choice is selected, show the rationale now\n                    rationaleShown:\n                        state.selected ||\n                        // If the choice already had a rationale, keep it shown\n                        state.rationaleShown ||\n                        // If the widget is correctly answered, show the rationale\n                        // for all the choices\n                        widgetCorrect,\n                    // We use the same behavior for the readOnly flag as for\n                    // rationaleShown, but we keep it separate in case other\n                    // behaviors want to disable choices without showing rationales.\n                    readOnly: state.selected || state.readOnly || widgetCorrect,\n                    correctnessShown: state.selected || state.correctnessShown,\n                    previouslyAnswered:\n                        state.previouslyAnswered || state.selected,\n                }),\n            );\n\n            this.props.onChange(\n                {\n                    choiceStates: newStates,\n                },\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'null' is not assignable to parameter of type '(() => unknown) | undefined'.\n                null, // cb\n                true, // silent\n            );\n        }\n    };\n\n    /**\n     * Deselects any currently-selected choices that are not correct choices.\n     */\n    deselectIncorrectSelectedChoices: () => void = () => {\n        if (this.props.choiceStates) {\n            const newStates: ReadonlyArray<ChoiceState> =\n                this.props.choiceStates.map(\n                    (state: ChoiceState, i): ChoiceState => ({\n                        ...state,\n                        selected:\n                            state.selected && !!this.props.choices[i].correct,\n                        highlighted: false,\n                    }),\n                );\n\n            this.props.onChange(\n                {\n                    choiceStates: newStates,\n                },\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'null' is not assignable to parameter of type '(() => unknown) | undefined'.\n                null, // cb\n                false, // silent\n            );\n        }\n    };\n\n    render(): React.ReactNode {\n        const {choices} = this.props;\n        let choiceStates: ReadonlyArray<ChoiceState>;\n        if (this.props.static) {\n            choiceStates = choices.map((choice) => ({\n                selected: !!choice.correct,\n                crossedOut: false,\n                readOnly: true,\n                highlighted: false,\n                rationaleShown: true,\n                correctnessShown: true,\n                previouslyAnswered: false,\n            }));\n        } else if (this.props.choiceStates) {\n            choiceStates = this.props.choiceStates;\n        } else if (this.props.values) {\n            // Support legacy choiceStates implementation\n            /* c8 ignore next - props.values is deprecated */\n            choiceStates = this.props.values.map((val) => ({\n                selected: val,\n                crossedOut: false,\n                readOnly: false,\n                highlighted: false,\n                rationaleShown: false,\n                correctnessShown: false,\n                previouslyAnswered: false,\n            }));\n        } else {\n            choiceStates = choices.map(() => ({\n                selected: false,\n                crossedOut: false,\n                readOnly: false,\n                highlighted: false,\n                rationaleShown: false,\n                correctnessShown: false,\n                previouslyAnswered: false,\n            }));\n        }\n\n        const choicesProp: ReadonlyArray<ChoiceType> = choices.map(\n            (choice, i) => {\n                const content =\n                    choice.isNoneOfTheAbove && !choice.content\n                        ? // we use i18n._ instead of $_ here because the content\n                          // sent to a renderer needs to be a string, not a react\n                          // node (/renderable/fragment).\n                          i18n._(\"None of the above\")\n                        : choice.content;\n\n                const {\n                    selected,\n                    crossedOut,\n                    rationaleShown,\n                    correctnessShown,\n                    readOnly,\n                    highlighted,\n                    previouslyAnswered,\n                } = choiceStates[i];\n\n                const reviewChoice =\n                    this.props.reviewModeRubric &&\n                    this.props.reviewModeRubric.choices[i];\n\n                return {\n                    content: this._renderRenderer(content),\n                    checked: selected,\n                    // Current versions of the radio widget always pass in the\n                    // \"correct\" value through the choices. Old serialized state\n                    // for radio widgets doesn't have this though, so we have to\n                    // pull the correctness out of the review mode rubric. This\n                    // only works because all of the places we use\n                    // `restoreSerializedState()` also turn on reviewMode, but is\n                    // fine for now.\n                    // TODO(emily): Come up with a more comprehensive way to solve\n                    // this sort of \"serialized state breaks when internal\n                    // structure changes\" problem.\n                    correct:\n                        choice.correct === undefined\n                            ? !!reviewChoice && !!reviewChoice.correct\n                            : choice.correct,\n                    disabled: readOnly,\n                    hasRationale: !!choice.clue,\n                    rationale: this._renderRenderer(choice.clue),\n                    showRationale: rationaleShown,\n                    showCorrectness: correctnessShown,\n                    isNoneOfTheAbove: !!choice.isNoneOfTheAbove,\n                    revealNoneOfTheAbove: !!(\n                        this.props.questionCompleted && selected\n                    ),\n                    crossedOut,\n                    highlighted,\n                    previouslyAnswered: previouslyAnswered,\n                };\n            },\n        );\n\n        return (\n            <BaseRadio\n                labelWrap={true}\n                multipleSelect={this.props.multipleSelect}\n                countChoices={this.props.countChoices}\n                numCorrect={this.props.numCorrect}\n                choices={choicesProp}\n                onChange={this.updateChoices}\n                reviewModeRubric={this.props.reviewModeRubric}\n                deselectEnabled={this.props.deselectEnabled}\n                apiOptions={this.props.apiOptions}\n                isLastUsedWidget={this.props.isLastUsedWidget}\n                registerFocusFunction={(i) => this.registerFocusFunction(i)}\n            />\n        );\n    }\n}\n\nexport default Radio;\n","import * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport _ from \"underscore\";\n\nimport Util from \"../util\";\n\nimport Radio from \"./radio/widget\";\n\nimport type {PerseusRadioWidgetOptions} from \"../perseus-types\";\nimport type {WidgetExports} from \"../types\";\nimport type {RenderProps, RadioChoiceWithMetadata} from \"./radio/widget\";\n\nconst {shuffle, random} = Util;\n\n// Represents choices that we automatically re-order if encountered.\n// Note: these are in the reversed (incorrect) order that we will swap, if\n// found.\n// Note 2: these are internationalized when compared later on.\nconst ReversedChoices: ReadonlyArray<[string, string]> = [\n    [i18n._(\"False\"), i18n._(\"True\")],\n    [i18n._(\"No\"), i18n._(\"Yes\")],\n];\n\n// Transforms the choices for display.\nconst _choiceTransform = (\n    widgetOptions: PerseusRadioWidgetOptions,\n    problemNum?: number | null,\n) => {\n    const _maybeRandomize = function (\n        array: ReadonlyArray<RadioChoiceWithMetadata>,\n    ) {\n        const randomSeed = problemNum === undefined ? random : problemNum;\n        // NOTE: `problemNum` will only be set when the radio widget is\n        // rendered at the root of an exercise question. It will be `undefined`\n        // if it's rendered embedded in another widget, such as `graded-group`,\n        // or if rendered within an article. This results in a predictable\n        // shuffle order. To avoid this we use a random seed when `problemNum`\n        // is `undefined`.\n        return widgetOptions.randomize\n            ? shuffle(array, randomSeed ?? 0)\n            : array;\n    };\n\n    const _addNoneOfAbove = function (\n        choices: ReadonlyArray<RadioChoiceWithMetadata>,\n    ) {\n        let noneOfTheAbove = null;\n\n        const newChoices = choices.filter((choice, index) => {\n            if (choice.isNoneOfTheAbove) {\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'RadioChoiceWithMetadata' is not assignable to type 'null'.\n                noneOfTheAbove = choice;\n                return false;\n            }\n            return true;\n        });\n\n        // Place the \"None of the above\" options last\n        if (noneOfTheAbove) {\n            newChoices.push(noneOfTheAbove);\n        }\n\n        return newChoices;\n    };\n\n    const enforceOrdering = (\n        choices: ReadonlyArray<RadioChoiceWithMetadata>,\n    ) => {\n        const content = choices.map((c) => c.content);\n        if (ReversedChoices.some((reversed) => _.isEqual(content, reversed))) {\n            return [choices[1], choices[0]];\n        }\n        return choices;\n    };\n\n    // Add meta-information to choices\n    const choices: ReadonlyArray<RadioChoiceWithMetadata> =\n        widgetOptions.choices.map((choice, i): RadioChoiceWithMetadata => {\n            return {\n                ...choice,\n                originalIndex: i,\n                correct: Boolean(choice.correct),\n            };\n        });\n\n    // Apply all the transforms. Note that the order we call these is\n    // important!\n    // 3) finally add \"None of the above\" to the bottom\n    return _addNoneOfAbove(\n        // 2) then (potentially) enforce ordering (eg. False, True becomes\n        //    True, False)\n        enforceOrdering(\n            // 1) we randomize the order first\n            _maybeRandomize(choices),\n        ),\n    );\n};\n\nconst transform = (\n    widgetOptions: PerseusRadioWidgetOptions,\n    problemNum?: number | null,\n): RenderProps => {\n    const choices = _choiceTransform(widgetOptions, problemNum);\n\n    const numCorrect: number = _.reduce(\n        widgetOptions.choices,\n        function (memo, choice) {\n            return choice.correct ? memo + 1 : memo;\n        },\n        0,\n    );\n\n    const {hasNoneOfTheAbove, multipleSelect, countChoices, deselectEnabled} =\n        widgetOptions;\n\n    return {\n        numCorrect,\n        hasNoneOfTheAbove,\n        multipleSelect,\n        countChoices,\n        deselectEnabled,\n        choices,\n        selectedChoices: _.pluck(choices, \"correct\"),\n    };\n};\n\nconst propUpgrades = {\n    \"1\": (v0props: any): any => {\n        let choices;\n        let hasNoneOfTheAbove;\n\n        if (!v0props.noneOfTheAbove) {\n            choices = v0props.choices;\n            hasNoneOfTheAbove = false;\n        } else {\n            throw new Error(\n                \"radio widget v0 no longer supports auto noneOfTheAbove\",\n            );\n        }\n\n        return _.extend(_.omit(v0props, \"noneOfTheAbove\"), {\n            choices: choices,\n            hasNoneOfTheAbove: hasNoneOfTheAbove,\n        });\n    },\n} as const;\n\nexport default {\n    name: \"radio\",\n    displayName: \"Multiple choice\",\n    accessible: true,\n    widget: Radio,\n    transform: transform,\n    staticTransform: transform,\n    version: {major: 1, minor: 0},\n    propUpgrades: propUpgrades,\n    isLintable: true,\n} as WidgetExports<typeof Radio>;\n","/* eslint-disable import/no-named-as-default */\n// As new widgets get added here, please also make sure they get added in\n// content_internal/perseus_traversal.py so they can be properly translated.\nimport Expression from \"./widgets/expression\";\nimport InputNumber from \"./widgets/input-number\";\nimport NumericInput from \"./widgets/numeric-input\";\nimport Radio from \"./widgets/radio\";\n\nimport type {WidgetExports} from \"./types\";\n\nexport default [\n    Radio,\n    InputNumber,\n    NumericInput,\n    Expression,\n] as ReadonlyArray<WidgetExports>;\n","/* Free implementation of getUserInput. This should be used sparingly, since it\n * just returns all the widget's props rather than picking out those which were\n * input by the user.\n */\nimport _ from \"underscore\";\n\nimport WIDGET_PROP_DENYLIST from \"./widget-prop-denylist\";\n\nconst WidgetJsonifyDeprecated = {\n    getUserInput: function (): any {\n        // Omit props that get passed to all widgets\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly getUserInput: () => any; readonly getUserInputFromProps: (props: any) => any; }'.\n        return _.omit(this.props, WIDGET_PROP_DENYLIST);\n    },\n\n    // Static version of `WidgetJsonifyDeprecated.getUserInput`\n    getUserInputFromProps: function (props: any): any {\n        // Omit props that get passed to all widgets\n        return _.omit(props, WIDGET_PROP_DENYLIST);\n    },\n} as const;\n\nexport default WidgetJsonifyDeprecated;\n","/* eslint-disable react/sort-comp */\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport InlineIcon from \"../components/inline-icon\";\nimport {iconCircle, iconCircleThin} from \"../icon-paths\";\nimport * as Changeable from \"../mixins/changeable\";\nimport WidgetJsonifyDeprecated from \"../mixins/widget-jsonify-deprecated\";\nimport {ClassNames as ApiClassNames} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport mediaQueries from \"../styles/media-queries\";\nimport sharedStyles from \"../styles/shared\";\nimport Util from \"../util\";\n\nimport type {PerseusCategorizerWidgetOptions} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\ntype UserInput = any;\n\nexport type Rubric = PerseusCategorizerWidgetOptions;\n\ntype Props = WidgetProps<RenderProps, Rubric> & {\n    values: ReadonlyArray<string>;\n};\n\ntype DefaultProps = {\n    items: Props[\"items\"];\n    categories: Props[\"categories\"];\n    values: Props[\"values\"];\n    linterContext: Props[\"linterContext\"];\n};\n\ntype State = {\n    uniqueId: string;\n};\n\nexport class Categorizer extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        items: [],\n        categories: [],\n        values: [],\n        linterContext: linterContextDefault,\n    };\n\n    state: State = {\n        uniqueId: _.uniqueId(\"perseus_radio_\"),\n    };\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    getUserInput: () => UserInput = () => {\n        return Categorizer.getUserInputFromProps(this.props);\n    };\n\n    render(): React.ReactNode {\n        const self = this;\n\n        // In this context, isMobile is used to differentiate mobile from\n        // desktop.\n        const isMobile = this.props.apiOptions.isMobile;\n        let indexedItems = this.props.items.map((item, n) => [item, n]);\n        if (this.props.randomizeItems) {\n            // @ts-expect-error [FEI-5003] - TS4104 - The type 'readonly (string | number)[][]' is 'readonly' and cannot be assigned to the mutable type '(string | number)[][]'. | TS2345 - Argument of type 'number | null | undefined' is not assignable to parameter of type 'number | RNG'.\n            indexedItems = Util.shuffle(indexedItems, this.props.problemNum);\n        }\n\n        const table = (\n            <table className={\"categorizer-table \" + css(styles.mobileTable)}>\n                <thead>\n                    <tr>\n                        <td className={css(styles.emptyHeaderCell)} />\n                        {this.props.categories.map((category, i) => {\n                            // Array index is the correct key here, as that's\n                            // how category grading actually works -- no way\n                            // to add or remove categories or items in the\n                            // middle. (If we later add that, this should be\n                            // fixed.)\n                            return (\n                                <th className={css(styles.header)} key={i}>\n                                    <Renderer\n                                        content={category}\n                                        linterContext={this.props.linterContext}\n                                    />\n                                </th>\n                            );\n                        })}\n                    </tr>\n                </thead>\n                <tbody>\n                    {indexedItems.map((indexedItem) => {\n                        const item = indexedItem[0];\n                        const itemNum = indexedItem[1];\n                        const uniqueId = self.state.uniqueId + \"_\" + itemNum;\n                        return (\n                            <tr key={itemNum}>\n                                <td>\n                                    <Renderer\n                                        // @ts-expect-error [FEI-5003] - TS2322 - Type 'string | number' is not assignable to type 'string | undefined'.\n                                        content={item}\n                                        linterContext={this.props.linterContext}\n                                    />\n                                </td>\n                                {self.props.categories.map(\n                                    (catName, catNum) => {\n                                        const selected =\n                                            self.props.values[itemNum] ===\n                                            catNum;\n                                        return (\n                                            <td\n                                                className={\n                                                    \"category \" +\n                                                    css(styles.cell)\n                                                }\n                                                key={catNum}\n                                            >\n                                                {/* a pseudo-label: toggle the\n                                value of the checkbox when this div or the\n                                checkbox is clicked */}\n                                                <div\n                                                    className={\n                                                        ApiClassNames.INTERACTIVE\n                                                    }\n                                                    role=\"button\"\n                                                    aria-label={catName}\n                                                    // eslint-disable-next-line react/jsx-no-bind\n                                                    onClick={this.onChange.bind(\n                                                        this,\n                                                        itemNum,\n                                                        catNum,\n                                                    )}\n                                                >\n                                                    {isMobile && (\n                                                        <input\n                                                            type=\"radio\"\n                                                            name={uniqueId}\n                                                            className={css(\n                                                                sharedStyles.responsiveInput,\n                                                                sharedStyles.responsiveRadioInput,\n                                                            )}\n                                                            checked={selected}\n                                                            // eslint-disable-next-line react/jsx-no-bind\n                                                            onChange={this.onChange.bind(\n                                                                this,\n                                                                itemNum,\n                                                                catNum,\n                                                            )}\n                                                            onClick={(e) =>\n                                                                e.stopPropagation()\n                                                            }\n                                                        />\n                                                    )}\n                                                    {!isMobile && (\n                                                        <span\n                                                            className={css(\n                                                                styles.radioSpan,\n                                                                selected &&\n                                                                    styles.checkedRadioSpan,\n                                                                this.props\n                                                                    .static &&\n                                                                    selected &&\n                                                                    styles.staticCheckedRadioSpan,\n                                                            )}\n                                                        >\n                                                            {selected ? (\n                                                                <InlineIcon\n                                                                    {...iconCircle}\n                                                                />\n                                                            ) : (\n                                                                <InlineIcon\n                                                                    {...iconCircleThin}\n                                                                />\n                                                            )}\n                                                        </span>\n                                                    )}\n                                                </div>\n                                            </td>\n                                        );\n                                    },\n                                )}\n                            </tr>\n                        );\n                        /* eslint-enable max-len */\n                    })}\n                </tbody>\n            </table>\n        );\n\n        // TODO(benkomalo): kill CSS-based styling and move everything to\n        // aphrodite.\n        const extraClassNames = classNames({\n            \"categorizer-container\": true,\n            \"static-mode\": this.props.static,\n        });\n        const inlineStyles = this.props.apiOptions.isMobile\n            ? [styles.fullBleedContainer]\n            : [];\n\n        return (\n            <div className={extraClassNames + \" \" + css(...inlineStyles)}>\n                {table}\n            </div>\n        );\n    }\n\n    onChange: (arg1: number, arg2: number) => void = (itemNum, catNum) => {\n        const values = [...this.props.values];\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'never'.\n        values[itemNum] = catNum;\n        this.change(\"values\", values);\n        this.props.trackInteraction();\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return Categorizer.validate(this.getUserInput(), rubric);\n    };\n\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        let completed = true;\n        let allCorrect = true;\n        _.each(rubric.values, function (value, i) {\n            if (userInput.values[i] == null) {\n                completed = false;\n            }\n            if (userInput.values[i] !== value) {\n                allCorrect = false;\n            }\n        });\n        if (!completed) {\n            return {\n                type: \"invalid\",\n                message: i18n._(\n                    \"Make sure you select something for every row.\",\n                ),\n            };\n        }\n        return {\n            type: \"points\",\n            earned: allCorrect ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    }\n\n    static getUserInputFromProps(props: Props): UserInput {\n        return WidgetJsonifyDeprecated.getUserInputFromProps(props);\n    }\n}\n\n// TODO(benkomalo): inject page-margin into Perseus instead of hardcoding.\nconst pageMargin = 16;\n\n// Stylesheets aren't directly testable\n/* c8 ignore next */\nconst styles = StyleSheet.create({\n    mobileTable: {\n        [mediaQueries.smOrSmaller]: {\n            minWidth: \"auto\",\n        },\n    },\n\n    fullBleedContainer: {\n        [mediaQueries.mdOrSmaller]: {\n            marginLeft: -pageMargin,\n            marginRight: -pageMargin,\n            overflowX: \"auto\",\n        },\n    },\n\n    header: {\n        textAlign: \"center\",\n        verticalAlign: \"bottom\",\n    },\n\n    cell: {\n        textAlign: \"center\",\n        padding: 0,\n        color: \"#ccc\",\n        verticalAlign: \"middle\",\n    },\n\n    emptyHeaderCell: {\n        backgroundColor: \"inherit\",\n        borderBottom: \"2px solid #ccc\",\n    },\n\n    radioSpan: {\n        fontSize: 30,\n        paddingRight: 3,\n\n        \":hover\": {\n            color: \"#999\",\n        },\n    },\n\n    checkedRadioSpan: {\n        color: \"#333\",\n    },\n\n    // .static-mode is applied by the Categorizer when the rendered\n    // widget is static; in this case we gray out the choices to show\n    // the user that the widget can't be interacted with.\n    staticCheckedRadioSpan: {\n        color: \"#888\",\n    },\n});\n\ntype RenderProps = {\n    items: PerseusCategorizerWidgetOptions[\"items\"];\n    categories: PerseusCategorizerWidgetOptions[\"categories\"];\n    randomizeItems: PerseusCategorizerWidgetOptions[\"randomizeItems\"];\n    // Depends on whether the widget is in static mode\n    values?: PerseusCategorizerWidgetOptions[\"values\"];\n};\n\nexport default {\n    name: \"categorizer\",\n    displayName: \"Categorizer\",\n    widget: Categorizer,\n    transform: (\n        widgetOptions: PerseusCategorizerWidgetOptions,\n    ): RenderProps => {\n        return _.pick(widgetOptions, \"items\", \"categories\", \"randomizeItems\");\n    },\n    staticTransform: (\n        editorProps: PerseusCategorizerWidgetOptions,\n    ): RenderProps => {\n        return _.pick(\n            editorProps,\n            \"items\",\n            \"categories\",\n            \"values\",\n            \"randomizeItems\",\n        );\n    },\n    isLintable: true,\n} as WidgetExports<typeof Categorizer>;\n","/**\n * Helps us detect that we are running in a mobile native environment for\n * any js that is bundled in the mobile app (e.g. Perseus).\n *\n * @param {*} protocol protocol portion of a URL. Generally: window.location.protocol\n */\nexport const isFileProtocol = (protocol?: string | null): boolean => {\n    if (protocol && protocol.toLowerCase() === \"file:\") {\n        return true;\n    }\n    return false;\n};\n","// We cache the client location as we want to only ever return the initial\n// location that was used to render the page.\nlet _cachedClientLocation: Location;\n\n/**\n * Get the location.\n */\nconst location = (): Location => {\n    /**\n     * We cache the result to ensure that on subsequent requests we always get\n     * the first URL that was used to initially render the page.\n     */\n    if (!_cachedClientLocation) {\n        // eslint-disable-next-line no-restricted-syntax\n        _cachedClientLocation = window.location;\n    }\n\n    return _cachedClientLocation;\n};\n\n/**\n * Parses a URL using the browser's built-in new URL(). Is also able to handle\n * relative URLs.\n *\n * @param {string} url The URL to parse.\n */\nconst parseUrl = (url: string): URL => new URL(url, location().origin);\n\n/**\n * Turns a URL into an absolute URL.\n *\n * @param {string} url The URL to turn into an absolute URL.\n */\nexport const toAbsoluteUrl = (url: string): string => parseUrl(url).href;\n","/**\n * This widget is for embedding Khan Academy CS programs.\n */\n\nimport {StyleSheet, css} from \"aphrodite\";\nimport $ from \"jquery\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {articleMaxWidthInPx} from \"../styles/constants\";\nimport Util from \"../util\";\nimport {isFileProtocol} from \"../util/mobile-native-utils\";\nimport {toAbsoluteUrl} from \"../util/url-utils\";\n\nimport type {WidgetExports} from \"../types\";\n\nconst {updateQueryString} = Util;\n\nfunction getUrlFromProgramID(programID: any) {\n    const {InitialRequestUrl} = getDependencies();\n\n    const path =\n        \"/computer-programming/program/\" +\n        `${programID}/embedded?embed=yes&author=no`;\n    // When loading scratchpads in our native apps, the current URL will exist\n    // as a `file://` URL. In this case, we want to reference `ka.org` instead\n    // of defaulting to what we get from `toAbsoluteUrl`.\n    if (isFileProtocol(InitialRequestUrl.protocol)) {\n        return `https://khanacademy.org${path}`;\n    }\n\n    return toAbsoluteUrl(path);\n}\n\n/* This renders the scratchpad in an iframe and handles validation via\n * window.postMessage */\nclass CSProgram extends React.Component<any> {\n    static propTypes = {\n        ...Changeable.propTypes,\n        programID: PropTypes.string,\n        programType: PropTypes.oneOf([\"pjs\", \"sql\", \"webpage\"]),\n        width: PropTypes.number,\n        height: PropTypes.number,\n        // eslint-disable-next-line react/forbid-prop-types\n        settings: PropTypes.array,\n        showEditor: PropTypes.bool,\n        showButtons: PropTypes.bool,\n        status: PropTypes.oneOf([\"incomplete\", \"incorrect\", \"correct\"]),\n        message: PropTypes.string,\n    };\n\n    // The widget's grading function\n    static validate(state: any, rubric: any): any {\n        // The iframe can tell us whether it's correct or incorrect,\n        //  and pass an optional message\n        if (state.status === \"correct\") {\n            return {\n                type: \"points\",\n                earned: 1,\n                total: 1,\n                message: state.message || null,\n            };\n        }\n        if (state.status === \"incorrect\") {\n            return {\n                type: \"points\",\n                earned: 0,\n                total: 1,\n                message: state.message || null,\n            };\n        }\n        return {\n            type: \"invalid\",\n            message: \"Keep going, you're not there yet!\",\n        };\n    }\n\n    static defaultProps: any = {\n        showEditor: false,\n        showButtons: false,\n        status: \"incomplete\",\n        // optional message\n        message: null,\n    };\n\n    componentDidMount() {\n        $(window).on(\"message\", this.handleMessageEvent);\n    }\n\n    componentWillUnmount() {\n        $(window).off(\"message\", this.handleMessageEvent);\n    }\n\n    handleMessageEvent: (arg1: any) => void = (e) => {\n        // We receive data from the iframe that contains {passed: true/false}\n        //  and use that to set the status\n        // It could also contain an optional message\n        let data: Record<string, any> = {};\n        try {\n            data = JSON.parse(e.originalEvent.data);\n        } catch (err: any) {\n            return;\n        }\n\n        if (_.isUndefined(data.testsPassed)) {\n            return;\n        }\n\n        const status = data.testsPassed ? \"correct\" : \"incorrect\";\n        this.change({\n            status: status,\n            message: data.message,\n        });\n    };\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        return CSProgram.validate(\n            {\n                status: this.props.status,\n                message: this.props.message,\n            },\n            rubric,\n        );\n    };\n\n    render(): React.ReactNode {\n        if (!this.props.programID) {\n            return <div />;\n        }\n\n        let styleContainer = false;\n        let url = getUrlFromProgramID(this.props.programID);\n        let className;\n        const style = {\n            height: this.props.height,\n            width: \"100%\",\n        } as const;\n\n        if (this.props.showEditor) {\n            url += \"&editor=yes\";\n            className = \"perseus-scratchpad-editor\";\n        } else {\n            url += `&editor=no&width=${articleMaxWidthInPx}`;\n            className = \"perseus-scratchpad\";\n            if (this.props.programType !== \"webpage\") {\n                styleContainer = true;\n            }\n        }\n\n        if (this.props.showButtons) {\n            url += \"&buttons=yes\";\n            // Matches templates/scratchpads/embed_script.js\n            // Toolbar height is 66, border height is 1 pixel\n            // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'height' because it is a read-only property.\n            style.height += 67;\n        } else {\n            url += \"&buttons=no\";\n        }\n\n        // Turn array of [{name: \"\", value: \"\"}] into object\n        if (this.props.settings) {\n            const settings: Record<string, any> = {};\n            _.each(this.props.settings, function (setting) {\n                if (setting.name && setting.value) {\n                    settings[setting.name] = setting.value;\n                }\n            });\n            // This becomes available to programs as Program.settings()\n            url = updateQueryString(url, \"settings\", JSON.stringify(settings));\n        }\n\n        const sandboxOptions = [\n            \"allow-popups\",\n            \"allow-same-origin\",\n            \"allow-scripts\",\n            \"allow-top-navigation\",\n        ].join(\" \");\n\n        // We sandbox the iframe so that we allowlist only the functionality\n        //  that we need. This makes it a bit safer in case some content\n        //  creator \"went wild\".\n        // http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/\n        return (\n            <div\n                className={css(\n                    styles.widthOverride,\n                    styleContainer && styles.container,\n                )}\n            >\n                <iframe\n                    sandbox={sandboxOptions}\n                    src={url}\n                    style={style}\n                    className={className}\n                    allowFullScreen={true}\n                />\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    // Override the inherited width from the perseus paragraph class\n    // 820 is minimum width for 420px editor and 400px canvas\n    widthOverride: {\n        width: 820,\n    },\n    container: {\n        margin: \"auto\",\n    },\n});\n\nexport default {\n    name: \"cs-program\",\n    displayName: \"CS Program\",\n    supportedAlignments: [\"block\", \"full-width\"],\n    widget: CSProgram,\n    hidden: true,\n} as WidgetExports<typeof CSProgram>;\n","import Clickable from \"@khanacademy/wonder-blocks-clickable\";\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport {Popover, PopoverContentCore} from \"@khanacademy/wonder-blocks-popover\";\nimport * as React from \"react\";\n\nimport {DefinitionConsumer} from \"../definition-context\";\nimport Renderer from \"../renderer\";\n\nimport type {\n    PerseusRenderer,\n    PerseusDefinitionWidgetOptions,\n} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\n// TODO(FEI-5054): Figure out how to get global .d.ts files working with monorepos\ntype Empty = Record<string, never>;\n\ntype RenderProps = PerseusDefinitionWidgetOptions;\n\ntype Rubric = PerseusDefinitionWidgetOptions;\n\ntype UserInput = Empty;\n\ntype DefinitionProps = WidgetProps<RenderProps, Rubric> & {\n    widgets: PerseusRenderer[\"widgets\"];\n};\n\ntype DefaultProps = {\n    togglePrompt: string;\n    definition: string;\n};\n\nclass Definition extends React.Component<DefinitionProps> {\n    static defaultProps: DefaultProps = {\n        togglePrompt: \"define me\",\n        definition: \"definition goes here\",\n    };\n\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n\n    getUserInput: () => UserInput = () => {\n        return {};\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return Definition.validate(this.getUserInput(), rubric);\n    };\n\n    render(): React.ReactNode {\n        return (\n            <DefinitionConsumer>\n                {({activeDefinitionId, setActiveDefinitionId}) => (\n                    <Popover\n                        content={\n                            <PopoverContentCore\n                                color=\"white\"\n                                style={styles.tooltipBody}\n                                closeButtonVisible={true}\n                            >\n                                <Renderer\n                                    apiOptions={this.props.apiOptions}\n                                    content={this.props.definition}\n                                    widgets={this.props.widgets}\n                                />\n                            </PopoverContentCore>\n                        }\n                        opened={activeDefinitionId === this.props.widgetId}\n                        onClose={() => setActiveDefinitionId(null)}\n                        placement=\"top\"\n                    >\n                        <Clickable\n                            onClick={() => {\n                                this.props.trackInteraction();\n                                setActiveDefinitionId(this.props.widgetId);\n                            }}\n                        >\n                            {({hovered, focused, pressed}) => (\n                                <span\n                                    style={{\n                                        color: Color.blue,\n                                        borderBottom:\n                                            hovered || focused || pressed\n                                                ? `2px solid ${Color.blue}`\n                                                : \"none\",\n                                    }}\n                                >\n                                    {this.props.togglePrompt}\n                                </span>\n                            )}\n                        </Clickable>\n                    </Popover>\n                )}\n            </DefinitionConsumer>\n        );\n    }\n}\n\nconst styles = {\n    tooltipBody: {\n        color: Color.offBlack,\n        fontSize: 20,\n        fontWeight: 500,\n        lineHeight: \"30px\",\n    },\n} as const;\n\nexport default {\n    name: \"definition\",\n    displayName: \"Definition\",\n    accessible: true,\n    defaultAlignment: \"inline\",\n    widget: Definition,\n    transform: (x: any) => x,\n} as WidgetExports<typeof Definition>;\n","import {SingleSelect, OptionItem} from \"@khanacademy/wonder-blocks-dropdown\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport {ApiOptions} from \"../perseus-api\";\n\nimport type {PerseusDropdownWidgetOptions} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\ntype Rubric = PerseusDropdownWidgetOptions;\n\ntype UserInput = {\n    value: number;\n};\n\ntype Props = WidgetProps<RenderProps, Rubric> & {\n    selected: number;\n};\n\ntype DefaultProps = {\n    choices: Props[\"choices\"];\n    selected: Props[\"selected\"];\n    placeholder: Props[\"placeholder\"];\n    apiOptions: Props[\"apiOptions\"];\n};\n\nclass Dropdown extends React.Component<Props> {\n    static defaultProps: DefaultProps = {\n        choices: [],\n        selected: 0,\n        placeholder: \"\",\n        apiOptions: ApiOptions.defaults,\n    };\n\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        const selected = userInput.value;\n        if (selected === 0) {\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n        const correct = rubric.choices[selected - 1].correct;\n        return {\n            type: \"points\",\n            earned: correct ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    }\n\n    focus: () => boolean = () => {\n        // TODO(LP-10797): This focus() call doesn't do anything because our\n        // root element is a <div> and that cannot be focused without a\n        // tabIndex.\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this).focus();\n        return true;\n    };\n\n    _handleChangeEvent: (arg1: React.ChangeEvent<HTMLInputElement>) => void = (\n        e,\n    ) => {\n        this._handleChange(parseInt(e.target.value));\n    };\n\n    _handleChange: (arg1: number) => void = (selected) => {\n        this.props.trackInteraction();\n        this.props.onChange({selected: selected});\n    };\n\n    getUserInput: () => UserInput = () => {\n        return {value: this.props.selected};\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return Dropdown.validate(this.getUserInput(), rubric);\n    };\n\n    render(): React.ReactNode {\n        const children = [\n            <OptionItem\n                key=\"placeholder\"\n                value=\"0\"\n                disabled\n                label={this.props.placeholder}\n            />,\n            ...this.props.choices.map((choice, i) => (\n                <OptionItem\n                    key={String(i + 1)}\n                    value={String(i + 1)}\n                    label={choice}\n                />\n            )),\n        ];\n\n        return (\n            <div\n                // NOTE(jared): These are required to prevent weird behavior\n                // When there's a dropdown in a zoomable table.\n                onClick={(e) => {\n                    e.stopPropagation();\n                }}\n                onTouchStart={(e) => {\n                    e.stopPropagation();\n                }}\n            >\n                <SingleSelect\n                    placeholder=\"\"\n                    onChange={(value) => this._handleChange(parseInt(value))}\n                    selectedValue={String(this.props.selected)}\n                    disabled={this.props.apiOptions.readOnly}\n                >\n                    {children}\n                </SingleSelect>\n            </div>\n        );\n    }\n}\n\ntype RenderProps = {\n    placeholder: string;\n    choices: ReadonlyArray<string>;\n};\n\nconst optionsTransform: (arg1: PerseusDropdownWidgetOptions) => RenderProps = (\n    widgetOptions,\n) => {\n    return {\n        placeholder: widgetOptions.placeholder,\n        choices: widgetOptions.choices.map((choice) => choice.content),\n    };\n};\n\nexport default {\n    name: \"dropdown\",\n    displayName: \"Drop down\",\n    defaultAlignment: \"inline-block\",\n    accessible: true,\n    widget: Dropdown,\n    transform: optionsTransform,\n} as WidgetExports<typeof Dropdown>;\n","/* eslint-disable react/sort-comp */\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport * as Changeable from \"../mixins/changeable\";\nimport Renderer from \"../renderer\";\nimport * as styleConstants from \"../styles/constants\";\nimport mediaQueries from \"../styles/media-queries\";\n\nimport type {PerseusExplanationWidgetOptions} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\n// TODO(FEI-5054): Figure out how to get global .d.ts files working with monorepos\ntype Empty = Record<string, never>;\n\ntype RenderProps = PerseusExplanationWidgetOptions; // transform = _.identity\n\ntype Rubric = PerseusExplanationWidgetOptions;\n\ntype UserInput = Empty;\n\ntype Props = WidgetProps<RenderProps, PerseusExplanationWidgetOptions>;\n\ntype DefaultProps = {\n    showPrompt: Props[\"showPrompt\"];\n    hidePrompt: Props[\"hidePrompt\"];\n    explanation: Props[\"explanation\"];\n    widgets: Props[\"widgets\"];\n    linterContext: Props[\"linterContext\"];\n};\n\ntype State = {\n    expanded: boolean;\n};\n\nclass Explanation extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        showPrompt: \"Explain\",\n        hidePrompt: \"Hide explanation\",\n        explanation: \"explanation goes here\\n\\nmore explanation\",\n        widgets: {},\n        linterContext: linterContextDefault,\n    };\n\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n\n    state: State = {\n        expanded: false,\n    };\n\n    change: (arg1: any, arg2: any, arg3: any) => any = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    _onClick: () => void = () => {\n        this.setState({\n            expanded: !this.state.expanded,\n        });\n        this.props.trackInteraction();\n    };\n\n    render(): React.ReactNode {\n        const {Link} = this.props.apiOptions.baseElements;\n        const {isArticle, isMobile} = this.props.apiOptions;\n\n        const linkAnchor = this.state.expanded\n            ? this.props.hidePrompt\n            : this.props.showPrompt;\n\n        let linkContainer;\n\n        // TODO(diedra): This isn't a valid href;\n        // change this to a button that looks like a link.\n        const href = \"javascript:void(0)\";\n        const onClick = this._onClick;\n\n        if (isMobile) {\n            linkContainer = (\n                <div className={css(styles.linkContainer)}>\n                    <a\n                        className={css(styles.mobileExplanationLink)}\n                        href={href}\n                        onClick={onClick}\n                        role=\"button\"\n                        aria-expanded={this.state.expanded}\n                    >\n                        {linkAnchor}\n                    </a>\n                    {this.state.expanded && (\n                        <svg className={css(styles.disclosureArrow)}>\n                            <polygon\n                                style={{fill: backgroundColor}}\n                                points={\n                                    `0,${arrowHeight} ` +\n                                    `${arrowWidth},${arrowHeight} ` +\n                                    `${arrowWidth / 2},0`\n                                }\n                            />\n                        </svg>\n                    )}\n                </div>\n            );\n        } else {\n            if (isArticle) {\n                // NOTE: For articles, the baseElements `Link` may is either be\n                // an anchor tag (if rendered in a modal) or a Wonder Blocks\n                // link component in lesson page, see: `article-page.jsx`.\n                linkContainer = (\n                    <div\n                        className={css(\n                            styles.linkContainer,\n                            styles.articleLink,\n                        )}\n                    >\n                        <Link\n                            className={css(styles.explanationLink)}\n                            // HACK(michaelpolyak): WB Link doesn't passthrough\n                            // class name.\n                            style={styles.explanationLink}\n                            href={href}\n                            onClick={onClick}\n                            role=\"button\"\n                            aria-expanded={this.state.expanded}\n                        >\n                            {`[${linkAnchor}]`}\n                        </Link>\n                    </div>\n                );\n            } else {\n                // NOTE: For exercises, the baseElements `Link` is an\n                // anchor tag, see: `perseus-api.jsx`.\n                linkContainer = (\n                    <div\n                        className={css(\n                            styles.linkContainer,\n                            styles.exerciseLink,\n                        )}\n                    >\n                        <Link\n                            className={css(styles.explanationLink)}\n                            href={href}\n                            onClick={onClick}\n                            role=\"button\"\n                            aria-expanded={this.state.expanded}\n                        >\n                            {`[${linkAnchor}]`}\n                        </Link>\n                    </div>\n                );\n            }\n        }\n\n        const expandedStyle = isMobile\n            ? styles.contentExpandedMobile\n            : styles.contentExpanded;\n\n        return (\n            <div className={css(styles.container)}>\n                {linkContainer}\n                {this.state.expanded && (\n                    <div\n                        className={css(\n                            styles.content,\n                            isMobile && styles.contentMobile,\n                            this.state.expanded && expandedStyle,\n                        )}\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"content\"\n                    >\n                        <Renderer\n                            apiOptions={this.props.apiOptions}\n                            content={this.props.explanation}\n                            widgets={this.props.widgets}\n                            linterContext={this.props.linterContext}\n                        />\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    getUserInput: () => Empty = () => {\n        return {};\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return Explanation.validate(this.getUserInput(), rubric);\n    };\n}\n\nconst leftBorderSpacing = 23;\nconst verticalContentPadding = 10;\n\nconst arrowWidth = 30;\nconst arrowHeight = 14;\nconst backgroundColor = styleConstants.gray95;\n\nconst styles = StyleSheet.create({\n    container: {\n        display: \"inline\",\n        position: \"relative\",\n    },\n\n    linkContainer: {\n        display: \"inline-block\",\n    },\n\n    explanationLink: {\n        fontStyle: \"italic\",\n        color: \"#007d96\",\n    },\n\n    articleLink: {\n        // Copied from .body-text in articles.less\n        fontSize: 20,\n        lineHeight: \"30px\",\n    },\n\n    exerciseLink: {\n        // Copied from .legacy-typography in util.less\n        fontSize: 14,\n        lineHeight: \"19.6px\",\n    },\n\n    mobileExplanationLink: {\n        color: styleConstants.kaGreen,\n        borderBottom: `dashed 1px ${styleConstants.kaGreen}`,\n        textDecoration: \"none\",\n\n        // TODO(benkomalo): these should be pulled in from common typography\n        // shared files so we have a single place where the type hierarchy is\n        // defined; one off font sizes for individual components should be\n        // avoided.\n        [mediaQueries.xl]: {\n            fontSize: 22,\n            lineHeight: 1.4,\n        },\n        [mediaQueries.lgOrSmaller]: {\n            fontSize: 20,\n            lineHeight: 1.5,\n        },\n        [mediaQueries.smOrSmaller]: {\n            fontSize: 18,\n            lineHeight: 1.2,\n        },\n    },\n\n    content: {\n        position: \"relative\",\n        transition: \"margin-top 0.1s\",\n    },\n\n    contentExpanded: {\n        borderLeft: \"5px solid #ccc\",\n        marginLeft: -leftBorderSpacing,\n        paddingLeft: leftBorderSpacing,\n\n        paddingBottom: verticalContentPadding,\n\n        // Note: we still use arrow height as the vertical margin, even on\n        // desktop when there is no arrow, but it's good enough.\n        marginBottom: arrowHeight,\n        marginTop: arrowHeight,\n    },\n\n    contentExpandedMobile: {\n        boxSizing: \"content-box\",\n        paddingTop: 32,\n        paddingBottom: 32,\n        marginTop: arrowHeight,\n    },\n\n    contentMobile: {\n        background: backgroundColor,\n\n        // TODO(benkomalo): this is to \"full bleed\" the background.\n        // The actual content padding differs depending on the host\n        // container, so this needs to be fixed eventually.\n        marginLeft: styleConstants.negativePhoneMargin,\n        marginRight: styleConstants.negativePhoneMargin,\n        paddingLeft: styleConstants.phoneMargin,\n        paddingRight: styleConstants.phoneMargin,\n    },\n\n    disclosureArrow: {\n        // HACK - positioning at \"bottom: 0\", doesn't actually position it to\n        // the real bottom, because the container is `inline-block`, and it\n        // seems to position it to the baseline? We put in a generous\n        // fudge factor to position it down to be flush with the content box\n        // below it.\n        bottom: -(arrowHeight + 5),\n        height: arrowHeight,\n        left: \"50%\",\n        marginLeft: -(arrowWidth / 2),\n        position: \"absolute\",\n        width: arrowWidth,\n    },\n});\n\nexport default {\n    name: \"explanation\",\n    displayName: \"Explanation\",\n    accessible: true,\n    defaultAlignment: \"inline\",\n    widget: Explanation,\n    transform: _.identity,\n    isLintable: true,\n} as WidgetExports<typeof Explanation>;\n","/*\n * A11y (Accessibility) style rules\n * These are used to mark up areas on the site that should only be readable\n * when using a screen reader.\n */\nimport {StyleSheet} from \"aphrodite\";\n\nimport type {StyleDeclaration} from \"aphrodite\";\n\nexport default StyleSheet.create({\n    // Make content only visible to screen readers.\n    // Both collegeboard.org and Bootstrap 3 use this exact implementation.\n    srOnly: {\n        border: 0,\n        clip: \"rect(0,0,0,0)\",\n        height: 1,\n        margin: -1,\n        overflow: \"hidden\",\n        padding: 0,\n        position: \"absolute\",\n        width: 1,\n    },\n}) as StyleDeclaration;\n","/**\n * Renders answer bar for mobile graded groups. [STATELESS]\n */\nimport Button from \"@khanacademy/wonder-blocks-button\";\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\n\nimport InlineIcon from \"../components/inline-icon\";\nimport {iconStar, iconTryAgain} from \"../icon-paths\";\nimport {phoneMargin, negativePhoneMargin} from \"../styles/constants\";\n\nimport type {APIOptions} from \"../types\";\n\nexport type ANSWER_BAR_STATES = // Initial state before the question is answerable.  The user must complete\n    // each of the widgets before the answer bar becomes visible.\n    // The 'Check' button is active whenever the question is answerable or any\n    // of the input widgets have been modified after getting the answer wrong.\n    | \"HIDDEN\" // The 'Check' button is disabled and there is no message.  This occurs when\n    // some of the widgets haven't been filled in after the has already become\n    // visible.\n    | \"ACTIVE\" // This happens immediately after clicking 'Check' with a wrong answer.\n    // The 'Check' button is disabled and the 'Try Again' message is displayed.\n    | \"INACTIVE\" // Final state.  This occurs after the user submits the correct answer.\n    // The widgets in this grade-group are disabled.\n    | \"INCORRECT\"\n    | \"CORRECT\";\n\ntype Props = {\n    answerBarState: ANSWER_BAR_STATES;\n    apiOptions: APIOptions;\n    onCheckAnswer: () => unknown;\n    // The function to call when clicking \"Next question\" after correctly\n    // answering one graded group out of a set. If this is null, the\n    // \"Next question\" button will not appear.\n    onNextQuestion?: () => unknown;\n};\n\nclass GradedGroupAnswerBar extends React.Component<Props> {\n    render(): React.ReactNode {\n        const {apiOptions, answerBarState, onCheckAnswer, onNextQuestion} =\n            this.props;\n\n        const answerBarStyle = {\n            ...styles.answerBar,\n            backgroundColor:\n                answerBarState === \"CORRECT\" ? Color.offWhite : \"white\",\n            // Center the \"Correct!\" message only when there's no next question\n            justifyContent:\n                answerBarState === \"CORRECT\" && !onNextQuestion\n                    ? \"center\"\n                    : \"space-between\",\n        } as const;\n\n        const message =\n            answerBarState === \"INCORRECT\" ? (\n                <span style={styles.text}>\n                    <span style={styles.tryAgainIcon}>\n                        <InlineIcon {...iconTryAgain} />\n                    </span>\n                    <span style={{marginLeft: 8}}>{i18n._(\"Keep trying\")}</span>\n                </span>\n            ) : (\n                <span />\n            ); // empty span keeps the button on the right side\n\n        if (answerBarState !== \"CORRECT\") {\n            const buttonLabel =\n                answerBarState === \"INCORRECT\"\n                    ? i18n._(\"Try again\")\n                    : i18n._(\"Check\");\n\n            return (\n                <div style={answerBarStyle}>\n                    {message}\n                    <Button\n                        disabled={\n                            apiOptions.readOnly || answerBarState !== \"ACTIVE\"\n                        }\n                        onClick={onCheckAnswer}\n                    >\n                        {buttonLabel}\n                    </Button>\n                </div>\n            );\n        }\n        return (\n            <div style={answerBarStyle}>\n                <span style={styles.text}>\n                    <span style={{fontSize: 28, color: Color.green}}>\n                        <InlineIcon {...iconStar} style={{marginBottom: 5}} />\n                    </span>\n                    <span\n                        role=\"alert\"\n                        aria-label={i18n._(\"Correct!\")}\n                        style={{marginLeft: 8}}\n                    >\n                        {i18n._(\"Correct!\")}\n                    </span>\n                </span>\n                {onNextQuestion && (\n                    <Button onClick={onNextQuestion}>\n                        {i18n._(\"Next question\")}\n                    </Button>\n                )}\n            </div>\n        );\n    }\n}\n\nconst fontSize = 17;\n\nconst styles = {\n    answerBar: {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: 68, // so that we don't have calculate the vertical padding\n        marginLeft: negativePhoneMargin,\n        marginRight: negativePhoneMargin,\n        marginBottom: negativePhoneMargin,\n        marginTop: phoneMargin,\n        paddingLeft: phoneMargin,\n        paddingRight: 10,\n        borderTop: `1px solid ${Color.offBlack50}`,\n    },\n\n    tryAgainIcon: {\n        fontSize: 28,\n        color: \"#63D9EA\",\n        transform: \"scale(-1,1) rotate(-268deg)\",\n    },\n\n    text: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n        fontSize: fontSize,\n    },\n} as const;\n\nexport default GradedGroupAnswerBar;\n","import {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport Button from \"@khanacademy/wonder-blocks-button\";\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport InlineIcon from \"../components/inline-icon\";\nimport {iconOk, iconRemove} from \"../icon-paths\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport {\n    gray68,\n    gray76,\n    phoneMargin,\n    negativePhoneMargin,\n    tableBackgroundAccent,\n} from \"../styles/constants\";\nimport a11y from \"../util/a11y\";\n\nimport GradedGroupAnswerBar, {\n    ANSWER_BAR_STATES,\n} from \"./graded-group-answer-bar\";\n\nimport type {PerseusGradedGroupWidgetOptions} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\nconst GRADING_STATUSES = {\n    ungraded: \"ungraded\" as const,\n    correct: \"correct\" as const,\n    incorrect: \"incorrect\" as const,\n    invalid: \"invalid\" as const,\n} as const;\n\n// Update answer bar state based on current state and whether the question is\n// answerable (all parts have been filled out) or not.\nconst getNextState = (\n    currentState: ANSWER_BAR_STATES,\n    answerable,\n): ANSWER_BAR_STATES => {\n    switch (currentState) {\n        case \"HIDDEN\":\n            return answerable ? \"ACTIVE\" : currentState;\n        case \"ACTIVE\":\n            return !answerable ? \"INACTIVE\" : currentState;\n        case \"INACTIVE\":\n            return answerable ? \"ACTIVE\" : currentState;\n        case \"INCORRECT\":\n            return answerable ? \"ACTIVE\" : \"INACTIVE\";\n        default:\n            return currentState;\n    }\n};\n\n// Prepended to all invalid messages to make the widget messages a bit clearer\nconst INVALID_MESSAGE_PREFIX = i18n._(\"We couldn't grade your answer.\");\nconst DEFAULT_INVALID_MESSAGE =\n    i18n._(\"It looks like you left something blank or \") +\n    i18n._(\"entered in an invalid answer.\");\n\ntype Rubric = PerseusGradedGroupWidgetOptions;\ntype RenderProps = PerseusGradedGroupWidgetOptions; // exports has no 'transform'\n\ntype Props = WidgetProps<RenderProps, Rubric> & {\n    inGradedGroupSet?: boolean; // Set by graded-group-set.jsx,\n    onNextQuestion?: () => unknown; // Set by graded-group-set.jsx\n};\n\ntype DefaultProps = {\n    title: Props[\"title\"];\n    content: Props[\"content\"];\n    widgets: Props[\"widgets\"];\n    images: Props[\"images\"];\n    hint: Props[\"hint\"];\n    hasHint: Props[\"hasHint\"];\n    linterContext: Props[\"linterContext\"];\n};\n\ntype State = {\n    status: typeof GRADING_STATUSES[keyof typeof GRADING_STATUSES];\n    showHint: boolean;\n    message: string;\n    answerBarState: ANSWER_BAR_STATES;\n};\n\n// A Graded Group is more or less a Group widget that displays a check\n// answer button below the rendered content. When clicked, the widget grades\n// the stuff inside and displays feedback about whether the inputted answer was\n// correct or not.\nexport class GradedGroup extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        title: \"\",\n        content: \"\",\n        widgets: {},\n        images: {},\n        hint: null,\n        hasHint: false,\n        linterContext: linterContextDefault,\n    };\n\n    state: State = {\n        status: GRADING_STATUSES.ungraded,\n        showHint: false,\n        message: \"\",\n        answerBarState: \"HIDDEN\",\n    };\n\n    shouldComponentUpdate(nextProps: Props, nextState: State): boolean {\n        return nextProps !== this.props || nextState !== this.state;\n    }\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    // This is a little strange because the id of the widget that actually\n    // changed is going to be lost in favor of the group widget's id. The\n    // widgets prop also wasn't actually changed, and this only serves to\n    // alert our renderer (our parent) of the fact that some interaction\n    // has occurred.\n    _onInteractWithWidget: (arg1: string) => void = (id) => {\n        // Reset grading display when user changes answer\n        this.setState({\n            status: GRADING_STATUSES.ungraded,\n            message: \"\",\n        });\n\n        // eslint-disable-next-line react/no-string-refs\n        if (this.refs.renderer) {\n            this.change(\"widgets\", this.props.widgets);\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'emptyWidgets' does not exist on type 'ReactInstance'.\n            const emptyWidgets = this.refs.renderer.emptyWidgets();\n            const answerable = emptyWidgets.length === 0;\n            const answerBarState = this.state.answerBarState;\n            this.setState({\n                answerBarState: getNextState(answerBarState, answerable),\n            });\n        }\n    };\n\n    _checkAnswer: () => void = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'showRationalesForCurrentlySelectedChoices' does not exist on type 'ReactInstance'.\n        this.refs.renderer.showRationalesForCurrentlySelectedChoices();\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'score' does not exist on type 'ReactInstance'.\n        const score: PerseusScore = this.refs.renderer.score();\n\n        const status =\n            score.type === \"points\"\n                ? score.total === score.earned\n                    ? GRADING_STATUSES.correct\n                    : GRADING_STATUSES.incorrect\n                : GRADING_STATUSES.invalid;\n        const message =\n            score.type === \"points\"\n                ? score.message || \"\"\n                : score.message\n                ? `${INVALID_MESSAGE_PREFIX} ${score.message}`\n                : `${INVALID_MESSAGE_PREFIX} ${DEFAULT_INVALID_MESSAGE}`;\n\n        this.setState({\n            status: status,\n            message: message,\n            // TODO(kevinb) handle 'invalid' status\n            answerBarState: status === \"correct\" ? \"CORRECT\" : \"INCORRECT\",\n        });\n\n        this.props.trackInteraction({\n            status: status,\n        });\n    };\n\n    // Mobile API\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getInputPaths' does not exist on type 'ReactInstance'.\n        return this.refs.renderer.getInputPaths();\n    };\n\n    setInputValue: (arg1: any, arg2: any, arg3: any) => any = (\n        path,\n        newValue,\n        cb,\n    ) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'setInputValue' does not exist on type 'ReactInstance'.\n        return this.refs.renderer.setInputValue(path, newValue, cb);\n    };\n\n    focus: () => boolean = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        return this.refs.renderer.focus();\n    };\n\n    focusInputPath: (arg1: any) => void = (path) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focusPath' does not exist on type 'ReactInstance'.\n        this.refs.renderer.focusPath(path);\n    };\n\n    blurInputPath: (arg1: any) => void = (path) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blurPath' does not exist on type 'ReactInstance'.\n        this.refs.renderer.blurPath(path);\n    };\n\n    render(): React.ReactNode {\n        const apiOptions = _.extend(\n            {},\n            ApiOptions.defaults,\n            this.props.apiOptions,\n            {\n                // Api Rewriting to support correct onFocus/onBlur\n                // events for the mobile API\n                onFocusChange: (newFocus, oldFocus) => {\n                    if (oldFocus) {\n                        this.props.onBlur(oldFocus);\n                    }\n                    if (newFocus) {\n                        this.props.onFocus(newFocus);\n                    }\n                },\n            },\n        );\n\n        let gradeStatus = null;\n        let icon = null;\n        // Colors are 10% darker than the colors in graded-group.less\n        if (this.state.status === GRADING_STATUSES.correct) {\n            // TODO(jeremy): update to a WB colour\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'Element' is not assignable to type 'null'.\n            icon = <InlineIcon {...iconOk} style={{color: \"#526f03\"}} />;\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n            gradeStatus = i18n._(\"Correct\");\n        } else if (this.state.status === GRADING_STATUSES.incorrect) {\n            // TODO(jeremy): update to a WB colour\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'Element' is not assignable to type 'null'.\n            icon = <InlineIcon {...iconRemove} style={{color: \"#ff5454\"}} />;\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n            gradeStatus = i18n._(\"Incorrect\");\n        }\n\n        const mobileClass = this.props.inGradedGroupSet\n            ? css(styles.gradedGroupInSet)\n            : css(styles.gradedGroup);\n\n        const classes = classNames({\n            [mobileClass]: apiOptions.isMobile,\n            \"perseus-graded-group\": true,\n            \"answer-correct\": apiOptions.isMobile\n                ? false\n                : this.state.status === GRADING_STATUSES.correct,\n            \"answer-incorrect\": apiOptions.isMobile\n                ? false\n                : this.state.status === GRADING_STATUSES.incorrect,\n        });\n\n        const {answerBarState} = this.state;\n\n        // Disabled widgets after the answer has been answered correctly to\n        // prevent a situation where the answer has been marked correct but\n        // looks incorrect because a user has modified it afterwards.\n        const isCorrect = answerBarState === \"CORRECT\";\n        const readOnly =\n            apiOptions.readOnly || (apiOptions.isMobile && isCorrect);\n\n        return (\n            <div className={classes}>\n                {!!this.props.title && (\n                    <div className={css(styles.title)}>{this.props.title}</div>\n                )}\n                {/**\n                 * We're passing a bunch of extra props to Renderer here that it\n                 * doesn't need.  We should replace {...this.props} with the individual\n                 * props that are needed.\n                 * TODO(FEI-4034): Only pass what the Renderer expects.\n                 */}\n                {/* @ts-expect-error [FEI-5003] - TS2322 - Type '{ ref: string; apiOptions: any; onInteractWithWidget: (arg1: string) => void; linterContext: LinterContextProps; title: string; hasHint?: boolean | null | undefined; ... 22 more ...; children?: ReactNode; }' is not assignable to type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"children\" | \"keypadElement\" | \"problemNum\" | \"apiOptions\" | \"legacyPerseusLint\">'. */}\n                <Renderer\n                    {...this.props}\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"renderer\"\n                    apiOptions={{...apiOptions, readOnly}}\n                    onInteractWithWidget={this._onInteractWithWidget}\n                    linterContext={this.props.linterContext}\n                />\n                {!apiOptions.isMobile && icon && (\n                    <div className=\"group-icon\">{icon}</div>\n                )}\n                {!apiOptions.isMobile && gradeStatus && (\n                    <div\n                        className={css(a11y.srOnly)}\n                        role=\"alert\"\n                        aria-label={gradeStatus}\n                    >\n                        {gradeStatus}\n                    </div>\n                )}\n                {!apiOptions.isMobile && (\n                    <p role=\"status\" aria-live=\"polite\">\n                        {this.state.message}\n                    </p>\n                )}\n                {!apiOptions.isMobile && (\n                    <Button\n                        kind=\"secondary\"\n                        disabled={this.props.apiOptions.readOnly}\n                        onClick={this._checkAnswer}\n                    >\n                        {i18n._(\"Check\")}\n                    </Button>\n                )}\n                {!apiOptions.isMobile &&\n                    isCorrect &&\n                    this.props.onNextQuestion && (\n                        <Button\n                            kind=\"secondary\"\n                            disabled={this.props.apiOptions.readOnly}\n                            onClick={this.props.onNextQuestion}\n                            style={{marginLeft: 5}}\n                        >\n                            {i18n._(\"Next question\")}\n                        </Button>\n                    )}\n\n                {this.props.hint &&\n                    this.props.hint.content &&\n                    (this.state.showHint ? (\n                        <div>\n                            {/* Not using Button here bc the styles won't work. */}\n                            <button\n                                // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'number | undefined'.\n                                tabIndex=\"0\"\n                                className={css(styles.explanationTitle)}\n                                onClick={() => this.setState({showHint: false})}\n                                onKeyPress={(e) => {\n                                    // preventDefault stops the screen from scrolling down on keypress\n                                    e.preventDefault();\n                                    this.setState({showHint: false});\n                                }}\n                            >\n                                {i18n._(\"Hide explanation\")}\n                            </button>\n                            {/**\n                             * We're passing a couple of props to Renderer that it doesn't\n                             * require as part of {...this.props.hint}.\n                             */}\n                            <Renderer\n                                {...this.props.hint}\n                                // eslint-disable-next-line react/no-string-refs\n                                ref=\"hints-renderer\"\n                                apiOptions={apiOptions}\n                                linterContext={this.props.linterContext}\n                            />\n                        </div>\n                    ) : (\n                        // Not using Button here bc the styles won't work.\n                        <button\n                            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'number | undefined'.\n                            tabIndex=\"0\"\n                            onClick={() => this.setState({showHint: true})}\n                            onKeyPress={(e) => {\n                                // preventDefault stops the screen from scrolling down on keypress\n                                e.preventDefault();\n                                this.setState({showHint: true});\n                            }}\n                            className={css(styles.showHintLink)}\n                        >\n                            {i18n._(\"Explain\")}\n                        </button>\n                    ))}\n                {apiOptions.isMobile && answerBarState !== \"HIDDEN\" && (\n                    <GradedGroupAnswerBar\n                        apiOptions={apiOptions}\n                        answerBarState={answerBarState}\n                        onCheckAnswer={this._checkAnswer}\n                        onNextQuestion={this.props.onNextQuestion}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nconst traverseChildWidgets: (arg1: any, arg2: any) => any = function (\n    props,\n    traverseRenderer,\n) {\n    return _.extend({}, props, traverseRenderer(props));\n};\n\nconst styles = StyleSheet.create({\n    gradedGroupInSet: {\n        // Reset a few desktop-only styles that come from graded-group.less\n        marginLeft: 0,\n        paddingLeft: 0,\n    },\n\n    gradedGroup: {\n        borderTop: `1px solid ${gray76}`,\n        borderBottom: `1px solid ${gray76}`,\n        backgroundColor: tableBackgroundAccent,\n        marginLeft: negativePhoneMargin,\n        marginRight: negativePhoneMargin,\n        paddingBottom: phoneMargin,\n        paddingLeft: phoneMargin,\n        paddingRight: phoneMargin,\n        paddingTop: 10,\n        width: \"auto\",\n    },\n\n    showHintLink: {\n        backgroundColor: \"unset\",\n        fontSize: 14,\n        padding: 0,\n        border: \"none\",\n        marginTop: 20,\n        color: Color.blue,\n        cursor: \"pointer\",\n        display: \"block\",\n        clear: \"both\",\n    },\n\n    explanationTitle: {\n        backgroundColor: \"unset\",\n        marginTop: 20,\n        color: Color.blue,\n        marginBottom: 10,\n        cursor: \"pointer\",\n        fontSize: 14,\n        padding: 0,\n        border: \"none\",\n        display: \"block\",\n        clear: \"both\",\n    },\n\n    title: {\n        fontSize: 12,\n        color: gray68,\n        textTransform: \"uppercase\",\n        marginBottom: 11,\n        letterSpacing: 0.8,\n    },\n});\n\nexport default {\n    name: \"graded-group\",\n    displayName: \"Graded group (articles only)\",\n    widget: GradedGroup,\n    traverseChildWidgets: traverseChildWidgets,\n    // TODO(aasmund): This widget should be available for articles only\n    hidden: false,\n    tracking: \"all\",\n    isLintable: true,\n} as WidgetExports<typeof GradedGroup>;\n","import {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {getDependencies} from \"../dependencies\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {\n    gray76,\n    tableBackgroundAccent,\n    phoneMargin,\n    negativePhoneMargin,\n} from \"../styles/constants\";\nimport a11y from \"../util/a11y\";\n\nimport {GradedGroup} from \"./graded-group\";\n\nimport type {\n    PerseusGradedGroupSetWidgetOptions,\n    PerseusGradedGroupWidgetOptions,\n} from \"../perseus-types\";\nimport type {FocusPath, WidgetExports, WidgetProps} from \"../types\";\n\ntype IndicatorsProps = {\n    currentGroup: number;\n    gradedGroups: ReadonlyArray<PerseusGradedGroupWidgetOptions>;\n    onChangeCurrentGroup: (groupNumber: number) => void;\n};\n\nclass Indicators extends React.Component<IndicatorsProps> {\n    handleKeyDown = (e: React.KeyboardEvent, i: number) => {\n        if (e.key === \"Enter\" || e.key === \" \") {\n            this.props.onChangeCurrentGroup(i);\n        }\n    };\n\n    render(): React.ReactNode {\n        return (\n            <ul className={css(styles.indicatorContainer)}>\n                {this.props.gradedGroups.map(({title}, i) => (\n                    <li\n                        role=\"button\"\n                        aria-label={i18n._(\"Skip to %(title)s\", {\n                            title,\n                        })}\n                        key={title}\n                        className={css(\n                            styles.indicator,\n                            i === this.props.currentGroup &&\n                                styles.selectedIndicator,\n                        )}\n                        tabIndex={0}\n                        onClick={() => this.props.onChangeCurrentGroup(i)}\n                        onKeyDown={(e) => this.handleKeyDown(e, i)}\n                    >\n                        {i === this.props.currentGroup && (\n                            <span className={css(a11y.srOnly)}>\n                                {i18n._(\"Current\")}\n                            </span>\n                        )}\n                    </li>\n                ))}\n            </ul>\n        );\n    }\n}\n\ntype RenderProps = PerseusGradedGroupSetWidgetOptions; // no transform\ntype Rubric = PerseusGradedGroupSetWidgetOptions;\n\ntype Props = Changeable.ChangeableProps &\n    WidgetProps<RenderProps, Rubric> & {\n        trackInteraction: () => void;\n    };\n\ntype DefaultProps = {\n    gradedGroups: Props[\"gradedGroups\"];\n    linterContext: Props[\"linterContext\"];\n};\n\ntype State = {\n    currentGroup: number;\n};\n\n// TODO(jared): find a better name for this :) and for GradedGroup; the names\n// are currently a little confusing.\nclass GradedGroupSet extends React.Component<Props, State> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_childGroup' has no initializer and is not definitely assigned in the constructor.\n    _childGroup: GradedGroup;\n\n    static defaultProps: DefaultProps = {\n        gradedGroups: [],\n        linterContext: linterContextDefault,\n    };\n\n    state: State = {\n        currentGroup: 0,\n    };\n\n    shouldComponentUpdate(nextProps: Props, nextState: State): boolean {\n        nextProps.gradedGroups as ReadonlyArray<PerseusGradedGroupWidgetOptions>;\n        return nextProps !== this.props || nextState !== this.state;\n    }\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    // Mobile API\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        return this._childGroup.getInputPaths();\n    };\n\n    setInputValue: (arg1: FocusPath, arg2: any, arg3: any) => any = (\n        path,\n        newValue,\n        cb,\n    ) => {\n        return this._childGroup.setInputValue(path, newValue, cb);\n    };\n\n    focus: () => boolean = () => {\n        return this._childGroup.focus();\n    };\n\n    focusInputPath: (arg1: FocusPath) => void = (path) => {\n        this._childGroup.focusInputPath(path);\n    };\n\n    blurInputPath: (arg1: FocusPath) => void = (path) => {\n        this._childGroup.blurInputPath(path);\n    };\n\n    handleNextQuestion: () => void = () => {\n        const {currentGroup} = this.state;\n        const numGroups = this.props.gradedGroups.length;\n\n        if (currentGroup < numGroups - 1) {\n            this.setState({currentGroup: currentGroup + 1});\n        }\n    };\n\n    render(): React.ReactNode {\n        // When used in the context of TranslationEditor, render the\n        // GradedGroup widget one below another instead of using an indicator\n        // to click and switch between different graded groups. Translators\n        // prefer to see all strings/labels on all GradedGroups readily visible\n        // together instead of clicking on indicators to switch between them.\n        const {JIPT} = getDependencies();\n        if (JIPT.useJIPT && this.props.gradedGroups.length > 1) {\n            return (\n                <div className={css(styles.container)}>\n                    {this.props.gradedGroups.map((gradedGroup, i) => {\n                        return (\n                            // TODO(jeremy): Don't spread this.props, instead\n                            // pass in all props GradedGroup needs explicilty\n                            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                            <GradedGroup\n                                key={i}\n                                {...this.props}\n                                {...gradedGroup}\n                                inGradedGroupSet={false}\n                                linterContext={this.props.linterContext}\n                            />\n                        );\n                    })}\n                </div>\n            );\n        }\n\n        const currentGroup = this.props.gradedGroups[this.state.currentGroup];\n\n        if (!currentGroup) {\n            return <span>{i18n.doNotTranslate(\"No current group...\")}</span>;\n        }\n\n        const numGroups = this.props.gradedGroups.length;\n        const handleNextQuestion =\n            this.state.currentGroup < numGroups - 1\n                ? this.handleNextQuestion\n                : null;\n\n        return (\n            <div className={css(styles.container)}>\n                <div className={css(styles.top)}>\n                    <div className={css(styles.title)}>\n                        {currentGroup.title}\n                    </div>\n                    <div className={css(styles.spacer)} />\n                    <Indicators\n                        currentGroup={this.state.currentGroup}\n                        gradedGroups={this.props.gradedGroups}\n                        onChangeCurrentGroup={(currentGroup) =>\n                            this.setState({currentGroup})\n                        }\n                    />\n                </div>\n                {/* TODO(jeremy): Don't spread this.props, instead\n                    pass in all props GradedGroup needs explicitly */}\n                {/* @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. */}\n                <GradedGroup\n                    key={this.state.currentGroup}\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'GradedGroup | null' is not assignable to type 'GradedGroup'.\n                    //  Type 'null' is not assignable to type 'GradedGroup'.\n                    ref={(comp) => (this._childGroup = comp)}\n                    // We should pass in the set of props explicitly\n                    {...this.props}\n                    {...currentGroup}\n                    inGradedGroupSet={true}\n                    title={null}\n                    onNextQuestion={handleNextQuestion}\n                    linterContext={this.props.linterContext}\n                />\n            </div>\n        );\n    }\n}\n\nconst traverseChildWidgets: (arg1: any, arg2: any) => any = function (\n    props,\n    traverseRenderer,\n) {\n    // NOTE(jared): I have no idea how this works\n    return {\n        groups: props.gradedGroups.map(traverseRenderer),\n    };\n};\n\nexport default {\n    name: \"graded-group-set\",\n    displayName: \"Graded group set (articles only)\",\n    widget: GradedGroupSet,\n    traverseChildWidgets: traverseChildWidgets,\n    // TODO(michaelpolyak): This widget should be available for articles only\n    hidden: false,\n    tracking: \"all\",\n    isLintable: true,\n} as WidgetExports<typeof GradedGroupSet>;\n\nconst styles = StyleSheet.create({\n    top: {\n        display: \"flex\",\n        flexDirection: \"row\",\n    },\n    spacer: {\n        flex: 1,\n    },\n\n    title: {\n        fontSize: 12,\n        color: Color.offBlack64,\n        textTransform: \"uppercase\",\n        marginBottom: 11,\n        letterSpacing: 0.8,\n    },\n\n    indicatorContainer: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        listStyle: \"none\",\n        margin: \"unset\",\n    },\n\n    indicator: {\n        width: 10,\n        height: 10,\n        borderRadius: \"100%\",\n        border: \"3px solid\",\n        borderColor: Color.blue,\n        marginLeft: 5,\n        cursor: \"pointer\",\n    },\n\n    selectedIndicator: {\n        backgroundColor: Color.blue,\n    },\n\n    container: {\n        borderTop: `1px solid ${gray76}`,\n        borderBottom: `1px solid ${gray76}`,\n        backgroundColor: tableBackgroundAccent,\n        marginLeft: negativePhoneMargin,\n        marginRight: negativePhoneMargin,\n        paddingBottom: phoneMargin,\n        paddingLeft: phoneMargin,\n        paddingRight: phoneMargin,\n        paddingTop: 10,\n        width: \"auto\",\n    },\n});\n","import {css, StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\ntype Props = {\n    // the initial value of the button selected, defaults to null\n    value: any;\n    buttons: ReadonlyArray<{\n        // the value returned when the button is selected\n        value: any;\n        // the content shown within the button, typically a string that gets\n        // rendered as the button's display text\n        content: React.ReactNode;\n        // the title-text shown on hover\n        title?: string;\n    }>;\n    // a function that is provided with the updated value (which it then is\n    // responsible for updating)\n    onChange: (value?: any) => unknown;\n    // if false, exactly one button _must_ be selected;\n    // defaults to true and _at most_ one button (0 or 1) may be selected.\n    allowEmpty: boolean;\n};\n\ntype DefaultProps = {\n    allowEmpty: Props[\"allowEmpty\"];\n    value: Props[\"value\"];\n};\n\n/**\n * ButtonGroup is an aesthetically pleasing group of buttons.\n */\nclass ButtonGroup extends React.Component<Props> {\n    container: HTMLDivElement | null | undefined;\n\n    static defaultProps: DefaultProps = {\n        value: null,\n        allowEmpty: true,\n    };\n\n    componentWillUnmount() {\n        this.container = null;\n    }\n\n    focus(): undefined | boolean {\n        if (this.container) {\n            this.container.focus();\n            return true;\n        }\n    }\n\n    toggleSelect(newValue: any) {\n        const value = this.props.value;\n\n        if (this.props.allowEmpty) {\n            // Select the new button or unselect if it's already selected\n            this.props.onChange(value !== newValue ? newValue : null);\n        } else {\n            this.props.onChange(newValue);\n        }\n    }\n\n    render(): React.ReactNode {\n        const value = this.props.value;\n        const buttons = this.props.buttons.map((button, i) => {\n            return (\n                <button\n                    title={button.title}\n                    type=\"button\"\n                    id={\"\" + i}\n                    ref={\"button\" + i}\n                    key={\"\" + i}\n                    className={css(\n                        styles.buttonStyle,\n                        button.value === value && styles.selectedStyle,\n                    )}\n                    onClick={() => this.toggleSelect(button.value)}\n                >\n                    {button.content || \"\" + button.value}\n                </button>\n            );\n        });\n\n        const outerStyle = {\n            display: \"inline-block\",\n        } as const;\n        return (\n            <div style={outerStyle} ref={(node) => (this.container = node)}>\n                {buttons}\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    buttonStyle: {\n        backgroundColor: \"white\",\n        border: \"1px solid #ccc\",\n        borderLeft: \"0\",\n        cursor: \"pointer\",\n        margin: \"0\",\n        padding: \"5px 10px\",\n        position: \"relative\", // for hover\n\n        \":first-child\": {\n            borderLeft: \"1px solid #ccc\",\n            borderTopLeftRadius: \"3px\",\n            borderBottomLeftRadius: \"3px\",\n        },\n\n        \":last-child\": {\n            borderRight: \"1px solid #ccc\",\n            borderTopRightRadius: \"3px\",\n            borderBottomRightRadius: \"3px\",\n        },\n\n        \":hover\": {\n            backgroundColor: \"#ccc\",\n        },\n\n        \":focus\": {\n            zIndex: 2,\n        },\n    },\n\n    selectedStyle: {\n        backgroundColor: \"#ddd\",\n    },\n});\n\nexport default ButtonGroup;\n","/* eslint-disable one-var */\nimport {point as kpoint} from \"@khanacademy/kmath\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport Graphie from \"../../components/graphie\";\nimport {getDependencies} from \"../../dependencies\";\nimport Util from \"../../util\";\n\nimport type {Coord} from \"../../interactive2/types\";\nimport type {PerseusScore} from \"../../types\";\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Plot' does not exist on type 'typeof Graphie'.\nconst Plot = Graphie.Plot;\n\nexport const DEFAULT_BACKGROUND_IMAGE = {\n    url: null,\n} as const;\n\n// TODO(charlie): These really need to go into a utility file as they're being\n// used by both interactive-graph and now grapher.\nfunction canonicalSineCoefficients(coeffs: any) {\n    // For a curve of the form f(x) = a * Sin(b * x - c) + d,\n    // this function ensures that a, b > 0, and c is its\n    // smallest possible positive value.\n    let amplitude = coeffs[0];\n    let angularFrequency = coeffs[1];\n    let phase = coeffs[2];\n    const verticalOffset = coeffs[3];\n\n    // Guarantee a > 0\n    if (amplitude < 0) {\n        amplitude *= -1;\n        angularFrequency *= -1;\n        phase *= -1;\n    }\n\n    const period = 2 * Math.PI;\n    // Guarantee b > 0\n    if (angularFrequency < 0) {\n        angularFrequency *= -1;\n        phase *= -1;\n        phase += period / 2;\n    }\n\n    // Guarantee c is smallest possible positive value\n    while (phase > 0) {\n        phase -= period;\n    }\n    while (phase < 0) {\n        phase += period;\n    }\n\n    return [amplitude, angularFrequency, phase, verticalOffset];\n}\n\nfunction canonicalTangentCoefficients(coeffs: any) {\n    // For a curve of the form f(x) = a * Tan(b * x - c) + d,\n    // this function ensures that a, b > 0, and c is its\n    // smallest possible positive value.\n    let amplitude = coeffs[0];\n    let angularFrequency = coeffs[1];\n    let phase = coeffs[2];\n    const verticalOffset = coeffs[3];\n\n    // Guarantee a > 0\n    if (amplitude < 0) {\n        amplitude *= -1;\n        angularFrequency *= -1;\n        phase *= -1;\n    }\n\n    const period = Math.PI;\n    // Guarantee b > 0\n    if (angularFrequency < 0) {\n        angularFrequency *= -1;\n        phase *= -1;\n        phase += period / 2;\n    }\n\n    // Guarantee c is smallest possible positive value\n    while (phase > 0) {\n        phase -= period;\n    }\n    while (phase < 0) {\n        phase += period;\n    }\n\n    return [amplitude, angularFrequency, phase, verticalOffset];\n}\n\nconst PlotDefaults = {\n    areEqual: function (coeffs1, coeffs2) {\n        return Util.deepEq(coeffs1, coeffs2);\n    },\n\n    Movable: Plot,\n\n    getPropsForCoeffs: function (coeffs) {\n        return {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getFunctionForCoeffs' does not exist on type '{ readonly areEqual: (coeffs1: any, coeffs2: any) => boolean; readonly Movable: any; readonly getPropsForCoeffs: (coeffs: any) => any; }'.\n            fn: _.partial(this.getFunctionForCoeffs, coeffs),\n        };\n    },\n} as const;\n\nconst Linear = _.extend({}, PlotDefaults, {\n    url: \"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png\",\n\n    defaultCoords: [\n        [0.25, 0.75],\n        [0.75, 0.75],\n    ],\n\n    getCoefficients: function (coords) {\n        const p1 = coords[0];\n        const p2 = coords[1];\n\n        const denom = p2[0] - p1[0];\n        const num = p2[1] - p1[1];\n\n        if (denom === 0) {\n            return;\n        }\n\n        const m = num / denom;\n        const b = p2[1] - m * p2[0];\n        return [m, b];\n    },\n\n    getFunctionForCoeffs: function (coeffs, x) {\n        const m = coeffs[0],\n            b = coeffs[1];\n        return m * x + b;\n    },\n\n    getEquationString: function (coords) {\n        const coeffs = this.getCoefficients(coords);\n        const m = coeffs[0],\n            b = coeffs[1];\n        return \"y = \" + m.toFixed(3) + \"x + \" + b.toFixed(3);\n    },\n});\n\nconst Quadratic = _.extend({}, PlotDefaults, {\n    url: \"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png\",\n\n    defaultCoords: [\n        [0.5, 0.5],\n        [0.75, 0.75],\n    ],\n    // @ts-expect-error [FEI-5003] - TS2339 - Property 'Parabola' does not exist on type 'typeof Graphie'.\n    Movable: Graphie.Parabola,\n\n    getCoefficients: function (coords) {\n        const p1 = coords[0];\n        const p2 = coords[1];\n\n        // Parabola with vertex (h, k) has form: y = a * (h - k)^2 + k\n        const h = p1[0];\n        const k = p1[1];\n\n        // Use these to calculate familiar a, b, c\n        const a = (p2[1] - k) / ((p2[0] - h) * (p2[0] - h));\n        const b = -2 * h * a;\n        const c = a * h * h + k;\n\n        return [a, b, c];\n    },\n\n    getFunctionForCoeffs: function (coeffs, x) {\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2];\n        return (a * x + b) * x + c;\n    },\n\n    getPropsForCoeffs: function (coeffs) {\n        return {\n            a: coeffs[0],\n            b: coeffs[1],\n            c: coeffs[2],\n        };\n    },\n\n    getEquationString: function (coords) {\n        const coeffs = this.getCoefficients(coords);\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2];\n        return (\n            \"y = \" +\n            a.toFixed(3) +\n            \"x^2 + \" +\n            b.toFixed(3) +\n            \"x + \" +\n            c.toFixed(3)\n        );\n    },\n});\n\nconst Sinusoid = _.extend({}, PlotDefaults, {\n    url: \"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png\",\n\n    defaultCoords: [\n        [0.5, 0.5],\n        [0.6, 0.6],\n    ],\n    // @ts-expect-error [FEI-5003] - TS2339 - Property 'Sinusoid' does not exist on type 'typeof Graphie'.\n    Movable: Graphie.Sinusoid,\n\n    getCoefficients: function (coords) {\n        const p1 = coords[0];\n        const p2 = coords[1];\n\n        const a = p2[1] - p1[1];\n        const b = Math.PI / (2 * (p2[0] - p1[0]));\n        const c = p1[0] * b;\n        const d = p1[1];\n\n        return [a, b, c, d];\n    },\n\n    getFunctionForCoeffs: function (coeffs, x) {\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2],\n            d = coeffs[3];\n        return a * Math.sin(b * x - c) + d;\n    },\n\n    getPropsForCoeffs: function (coeffs) {\n        return {\n            a: coeffs[0],\n            b: coeffs[1],\n            c: coeffs[2],\n            d: coeffs[3],\n        };\n    },\n\n    getEquationString: function (coords) {\n        const coeffs = this.getCoefficients(coords);\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2],\n            d = coeffs[3];\n        return (\n            \"y = \" +\n            a.toFixed(3) +\n            \" sin(\" +\n            b.toFixed(3) +\n            \"x - \" +\n            c.toFixed(3) +\n            \") + \" +\n            d.toFixed(3)\n        );\n    },\n\n    areEqual: function (coeffs1, coeffs2) {\n        return Util.deepEq(\n            canonicalSineCoefficients(coeffs1),\n            canonicalSineCoefficients(coeffs2),\n        );\n    },\n});\n\nconst Tangent = _.extend({}, PlotDefaults, {\n    url: \"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png\",\n\n    defaultCoords: [\n        [0.5, 0.5],\n        [0.75, 0.75],\n    ],\n\n    getCoefficients: function (coords) {\n        const p1 = coords[0];\n        const p2 = coords[1];\n\n        const a = p2[1] - p1[1];\n        const b = Math.PI / (4 * (p2[0] - p1[0]));\n        const c = p1[0] * b;\n        const d = p1[1];\n\n        return [a, b, c, d];\n    },\n\n    getFunctionForCoeffs: function (coeffs, x) {\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2],\n            d = coeffs[3];\n        return a * Math.tan(b * x - c) + d;\n    },\n\n    getEquationString: function (coords) {\n        const coeffs = this.getCoefficients(coords);\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2],\n            d = coeffs[3];\n        return (\n            \"y = \" +\n            a.toFixed(3) +\n            \" sin(\" +\n            b.toFixed(3) +\n            \"x - \" +\n            c.toFixed(3) +\n            \") + \" +\n            d.toFixed(3)\n        );\n    },\n\n    areEqual: function (coeffs1, coeffs2) {\n        return Util.deepEq(\n            canonicalTangentCoefficients(coeffs1),\n            canonicalTangentCoefficients(coeffs2),\n        );\n    },\n});\n\nconst Exponential = _.extend({}, PlotDefaults, {\n    url: \"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png\",\n\n    defaultCoords: [\n        [0.5, 0.55],\n        [0.75, 0.75],\n    ],\n\n    defaultAsymptote: [\n        [0, 0.5],\n        [1.0, 0.5],\n    ],\n\n    /**\n     * Add extra constraints for movement of the points or asymptote (below):\n     *   newCoord: [x, y]\n     *     The end position of the point or asymptote endpoint\n     *   oldCoord: [x, y]\n     *     The old position of the point or asymptote endpoint\n     *   coords:\n     *     An array of coordinates representing the proposed end configuration\n     *     of the plot coordinates.\n     *   asymptote:\n     *     An array of coordinates representing the proposed end configuration\n     *     of the asymptote.\n     *\n     * Return: either a coordinate (to be used as the resulting coordinate of\n     * the move) or a boolean, where `true` uses newCoord as the resulting\n     * coordinate, and `false` uses oldCoord as the resulting coordinate.\n     */\n    extraCoordConstraint: function (\n        newCoord,\n        oldCoord,\n        coords,\n        asymptote,\n        graph,\n    ) {\n        const y = _.head(asymptote)[1];\n        return _.all(coords, (coord) => coord[1] !== y);\n    },\n\n    extraAsymptoteConstraint: function (\n        newCoord,\n        oldCoord,\n        coords,\n        asymptote,\n        graph,\n    ) {\n        const y = newCoord[1];\n        const isValid =\n            _.all(coords, (coord) => coord[1] > y) ||\n            _.all(coords, (coord) => coord[1] < y);\n\n        if (isValid) {\n            return [oldCoord[0], y];\n        }\n        // Snap the asymptote as close as possible, i.e., if the user moves\n        // the mouse really quickly into an invalid region\n        const oldY = oldCoord[1];\n        const wasBelow = _.all(coords, (coord) => coord[1] > oldY);\n        if (wasBelow) {\n            const bottomMost = _.min(_.map(coords, (coord) => coord[1]));\n            return [oldCoord[0], bottomMost - graph.snapStep[1]];\n        }\n        const topMost = _.max(_.map(coords, (coord) => coord[1]));\n        return [oldCoord[0], topMost + graph.snapStep[1]];\n    },\n\n    allowReflectOverAsymptote: true,\n\n    getCoefficients: function (coords, asymptote) {\n        const p1 = coords[0];\n        const p2 = coords[1];\n\n        const c = _.head(asymptote)[1];\n        const b = Math.log((p1[1] - c) / (p2[1] - c)) / (p1[0] - p2[0]);\n        const a = (p1[1] - c) / Math.exp(b * p1[0]);\n        return [a, b, c];\n    },\n\n    getFunctionForCoeffs: function (coeffs, x) {\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2];\n        return a * Math.exp(b * x) + c;\n    },\n\n    getEquationString: function (coords, asymptote) {\n        if (!asymptote) {\n            return null;\n        }\n        const coeffs = this.getCoefficients(coords, asymptote);\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2];\n        return (\n            \"y = \" +\n            a.toFixed(3) +\n            \"e^(\" +\n            b.toFixed(3) +\n            \"x) + \" +\n            c.toFixed(3)\n        );\n    },\n});\n\nconst Logarithm = _.extend({}, PlotDefaults, {\n    url: \"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png\",\n\n    defaultCoords: [\n        [0.55, 0.5],\n        [0.75, 0.75],\n    ],\n\n    defaultAsymptote: [\n        [0.5, 0],\n        [0.5, 1.0],\n    ],\n\n    extraCoordConstraint: function (\n        newCoord,\n        oldCoord,\n        coords,\n        asymptote,\n        graph,\n    ) {\n        const x = _.head(asymptote)[0];\n        return (\n            _.all(coords, (coord) => coord[0] !== x) &&\n            coords[0][1] !== coords[1][1]\n        );\n    },\n\n    extraAsymptoteConstraint: function (\n        newCoord,\n        oldCoord,\n        coords,\n        asymptote,\n        graph,\n    ) {\n        const x = newCoord[0];\n        const isValid =\n            _.all(coords, (coord) => coord[0] > x) ||\n            _.all(coords, (coord) => coord[0] < x);\n\n        if (isValid) {\n            return [x, oldCoord[1]];\n        }\n        // Snap the asymptote as close as possible, i.e., if the user moves\n        // the mouse really quickly into an invalid region\n        const oldX = oldCoord[0];\n        const wasLeft = _.all(coords, (coord) => coord[0] > oldX);\n        if (wasLeft) {\n            const leftMost = _.min(_.map(coords, (coord) => coord[0]));\n            return [leftMost - graph.snapStep[0], oldCoord[1]];\n        }\n        const rightMost = _.max(_.map(coords, (coord) => coord[0]));\n        return [rightMost + graph.snapStep[0], oldCoord[1]];\n    },\n\n    allowReflectOverAsymptote: true,\n\n    getCoefficients: function (coords, asymptote) {\n        // It's easiest to calculate the logarithm's coefficients by thinking\n        // about it as the inverse of the exponential, so we flip x and y and\n        // perform some algebra on the coefficients. This also unifies the\n        // logic between the two 'models'.\n        const flip = (coord: any) => [coord[1], coord[0]];\n        const inverseCoeffs = Exponential.getCoefficients(\n            _.map(coords, flip),\n            _.map(asymptote, flip),\n        );\n        const c = -inverseCoeffs[2] / inverseCoeffs[0];\n        const b = 1 / inverseCoeffs[0];\n        const a = 1 / inverseCoeffs[1];\n        return [a, b, c];\n    },\n\n    getFunctionForCoeffs: function (coeffs, x, asymptote) {\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2];\n        return a * Math.log(b * x + c);\n    },\n\n    getEquationString: function (coords, asymptote) {\n        if (!asymptote) {\n            return null;\n        }\n        const coeffs = this.getCoefficients(coords, asymptote);\n        const a = coeffs[0],\n            b = coeffs[1],\n            c = coeffs[2];\n        return (\n            \"y = ln(\" +\n            a.toFixed(3) +\n            \"x + \" +\n            b.toFixed(3) +\n            \") + \" +\n            c.toFixed(3)\n        );\n    },\n});\n\nconst AbsoluteValue = _.extend({}, PlotDefaults, {\n    url: \"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png\",\n\n    defaultCoords: [\n        [0.5, 0.5],\n        [0.75, 0.75],\n    ],\n\n    getCoefficients: function (coords) {\n        const p1 = coords[0];\n        const p2 = coords[1];\n\n        const denom = p2[0] - p1[0];\n        const num = p2[1] - p1[1];\n\n        if (denom === 0) {\n            return;\n        }\n\n        let m = Math.abs(num / denom);\n        if (p2[1] < p1[1]) {\n            m *= -1;\n        }\n        const horizontalOffset = p1[0];\n        const verticalOffset = p1[1];\n\n        return [m, horizontalOffset, verticalOffset];\n    },\n\n    getFunctionForCoeffs: function (coeffs, x) {\n        const m = coeffs[0],\n            horizontalOffset = coeffs[1],\n            verticalOffset = coeffs[2];\n        return m * Math.abs(x - horizontalOffset) + verticalOffset;\n    },\n\n    getEquationString: function (coords) {\n        const coeffs = this.getCoefficients(coords);\n        const m = coeffs[0],\n            horizontalOffset = coeffs[1],\n            verticalOffset = coeffs[2];\n        return (\n            \"y = \" +\n            m.toFixed(3) +\n            \"| x - \" +\n            horizontalOffset.toFixed(3) +\n            \"| + \" +\n            verticalOffset.toFixed(3)\n        );\n    },\n});\n\n/* Utility functions for dealing with graphing interfaces. */\nconst functionTypeMapping = {\n    linear: Linear,\n    quadratic: Quadratic,\n    sinusoid: Sinusoid,\n    tangent: Tangent,\n    exponential: Exponential,\n    logarithm: Logarithm,\n    absolute_value: AbsoluteValue,\n} as const;\n\nexport const allTypes: any = _.keys(functionTypeMapping);\n\nexport function functionForType(\n    // TODO(jeremy): Actually `$Keys<typeof functionTypeMapping>` but that\n    // triggers TypeScript to require all of our Plot types to be fully typed which\n    // is a big amount of work/change.\n    type: string,\n): any {\n    return functionTypeMapping[type];\n}\n\nexport const validate = (state: any, rubric: any): PerseusScore => {\n    if (state.type !== rubric.correct.type) {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 1,\n            message: null,\n        };\n    }\n\n    // We haven't moved the coords\n    if (state.coords == null) {\n        return {\n            type: \"invalid\",\n            message: null,\n        };\n    }\n\n    // Get new function handler for grading\n    const grader = functionForType(state.type);\n    const guessCoeffs = grader.getCoefficients(state.coords, state.asymptote);\n    const correctCoeffs = grader.getCoefficients(\n        rubric.correct.coords,\n        rubric.correct.asymptote,\n    );\n\n    if (guessCoeffs == null || correctCoeffs == null) {\n        return {\n            type: \"invalid\",\n            message: null,\n        };\n    }\n    if (grader.areEqual(guessCoeffs, correctCoeffs)) {\n        return {\n            type: \"points\",\n            earned: 1,\n            total: 1,\n            message: null,\n        };\n    }\n    return {\n        type: \"points\",\n        earned: 0,\n        total: 1,\n        message: null,\n    };\n};\n\nexport const getEquationString = (props: any): string => {\n    const plot = props.plot;\n    if (plot.type && plot.coords) {\n        const handler = functionForType(plot.type);\n        const result = handler.getEquationString(plot.coords, plot.asymptote);\n        return result || \"\";\n    }\n    return \"\";\n};\n\nexport const pointsFromNormalized = (\n    coordsList: ReadonlyArray<Coord>,\n    range: [Coord, Coord],\n    step: [number, number],\n    snapStep: [number, number],\n): ReadonlyArray<Coord> => {\n    const numSteps = function (range: Coord, step: number) {\n        return Math.floor((range[1] - range[0]) / step);\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2322 - Type 'number[][]' is not assignable to type 'readonly Coord[]'.\n    return coordsList.map((coords) => {\n        const unsnappedPoint = coords.map((coord, i) => {\n            const currRange = range[i];\n            const currStep = step[i];\n            const nSteps = numSteps(currRange, currStep);\n            const tick = Math.round(coord * nSteps);\n            return currRange[0] + currStep * tick;\n        });\n        // In some graphing widgets, e.g. interactive-graph, you can rely\n        // on the Graphie to handle snapping. Here, we need the points\n        // returned to already be snapped so that the plot that goes\n        // through them is correct.\n        return kpoint.roundTo(unsnappedPoint, snapStep);\n    });\n};\n\nexport const maybePointsFromNormalized = (\n    coordsList: ReadonlyArray<Coord> | null | undefined,\n    range: [Coord, Coord],\n    step: [number, number],\n    snapStep: [number, number],\n): ReadonlyArray<Coord> | null | undefined => {\n    if (coordsList) {\n        return pointsFromNormalized(coordsList, range, step, snapStep);\n    }\n    return coordsList;\n};\n\n/* Given a plot type, return the appropriate default value for a grapher\n * widget's plot props: type, default coords, default asymptote. */\nexport const defaultPlotProps = (type: string, graph: any): any => {\n    // The coords are null by default, to indicate that the user has not\n    // moved them from the default position, and that this widget should\n    // therefore be considered empty and ineligible for grading. The user\n    // *can* move the coords from the default position and then back if\n    // they really want to submit the default coords as their answer, but\n    // we currently don't write questions that require this.\n    //\n    // We *do* write questions in which the asymptote should be left in\n    // the default position. For this reason, we fill in the default\n    // asymptote rather than leaving it null; if the user moves the coords\n    // but not the asymptote, the widget is non-empty and eligible for\n    // grading.\n    //\n    // TODO(mattdr): Consider an updated scoring function that marks the\n    // default coords as empty *unless* they're the correct coords. This\n    // would remove this default-coords-are-always-wrong constraints on\n    // the questions we write, while still maintaining our kind behavior\n    // when users forget to update a widget... but we'd also be revealing\n    // extra information. It would be valid to always submit the default\n    // widget before even reading the question; you can't lose, but you\n    // might get a free win.\n    const model = functionForType(type);\n    const gridStep = [1, 1];\n    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type '[number, number]'.\n    const snapStep = Util.snapStepFromGridStep(gridStep);\n    return {\n        type,\n        asymptote: maybePointsFromNormalized(\n            model.defaultAsymptote,\n            graph.range,\n            graph.step,\n            snapStep,\n        ),\n        coords: null,\n    };\n};\n\n/* Given a list of available types, choose which to use. */\nexport const chooseType: <T>(list: ReadonlyArray<T>) => T | undefined = _.first;\n\nexport const getGridAndSnapSteps = (\n    options: any,\n    boxSize: number,\n): {\n    gridStep: [number, number];\n    snapStep: [number, number];\n} => {\n    const gridStep =\n        options.gridStep ||\n        Util.getGridStep(options.range, options.step, boxSize);\n    const snapStep = options.snapStep || Util.snapStepFromGridStep(gridStep);\n    return {\n        gridStep: gridStep,\n        snapStep: snapStep,\n    };\n};\n\nconst defaultGraph: {\n    labels: ReadonlyArray<string>;\n    range: [Coord, Coord];\n    step: [number, number];\n    backgroundImage: any;\n    markings: string;\n    rulerLabel: string;\n    rulerTicks: number;\n    valid: boolean;\n    showTooltips: boolean;\n} = {\n    labels: [\"x\", \"y\"],\n    range: [\n        [-10, 10],\n        [-10, 10],\n    ],\n    step: [1, 1],\n    backgroundImage: DEFAULT_BACKGROUND_IMAGE,\n    markings: \"graph\",\n    rulerLabel: \"\",\n    rulerTicks: 10,\n    valid: true,\n    showTooltips: false,\n};\nconst defaultPlot = defaultPlotProps(\"linear\", defaultGraph);\n\nexport const DEFAULT_GRAPHER_PROPS: any = {\n    graph: defaultGraph,\n    plot: defaultPlot,\n    availableTypes: [defaultPlot.type],\n};\n\nexport const typeToButton = (type: string): any => {\n    const capitalized = type.charAt(0).toUpperCase() + type.substring(1);\n    const staticUrl = getDependencies().staticUrl;\n\n    return {\n        value: type,\n        title: capitalized,\n        content: (\n            <img src={staticUrl(functionForType(type).url)} alt={capitalized} />\n        ),\n    };\n};\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/sort-comp */\nimport {\n    number as knumber,\n    vector as kvector,\n    point as kpoint,\n} from \"@khanacademy/kmath\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport ButtonGroup from \"../components/button-group\";\nimport Graphie from \"../components/graphie\";\nimport SvgImage from \"../components/svg-image\";\nimport Interactive2 from \"../interactive2\";\nimport WrappedLine from \"../interactive2/wrapped-line\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {interactiveSizes} from \"../styles/constants\";\nimport Util from \"../util\";\nimport KhanColors from \"../util/colors\";\nimport {getInteractiveBoxFromSizeClass} from \"../util/sizing-utils\";\n\n/* Graphie and relevant components. */\n/* Mixins. */\nimport {\n    DEFAULT_GRAPHER_PROPS,\n    chooseType,\n    defaultPlotProps,\n    functionForType,\n    getGridAndSnapSteps,\n    maybePointsFromNormalized,\n    typeToButton,\n    validate as grapherValidate,\n} from \"./grapher/util\";\n\nimport type {Coord, Line} from \"../interactive2/types\";\nimport type {ChangeableProps} from \"../mixins/changeable\";\nimport type {PerseusGrapherWidgetOptions} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\nimport type {GridDimensions} from \"../util\";\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'MovablePoint' does not exist on type 'typeof Graphie'.\nconst MovablePoint = Graphie.MovablePoint;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'MovableLine' does not exist on type 'typeof Graphie'.\nconst MovableLine = Graphie.MovableLine;\n\nfunction isFlipped(newCoord: Coord, oldCoord: Coord, line: Line) {\n    const CCW = (a: Coord, b: Coord, c: Coord) => {\n        return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]);\n    };\n    return (\n        CCW(line[0], line[1], oldCoord) > 0 !==\n        CCW(line[0], line[1], newCoord) > 0\n    );\n}\n\n/* Styles */\nconst typeSelectorStyle = {\n    padding: \"5px 5px\",\n} as const;\n\ntype FunctionGrapherProps = ChangeableProps & {\n    graph: any;\n    coords: any;\n    asymptote: any;\n    hideHairlines: () => void;\n    isMobile: boolean;\n    model: any;\n    setDrawingAreaAvailable: () => void;\n    showHairlines: () => void;\n    showTooltips: boolean;\n    static: boolean;\n};\n\ntype DefaultFunctionGrapherProps = any;\n\n/* Graphing interface. */\nclass FunctionGrapher extends React.Component<FunctionGrapherProps> {\n    static defaultProps: DefaultFunctionGrapherProps = {\n        graph: {\n            range: [\n                [-10, 10],\n                [-10, 10],\n            ],\n            step: [1, 1],\n        },\n        coords: null,\n        asymptote: null,\n        isMobile: false,\n    };\n\n    _coords = () => {\n        const props = this.props;\n        const graph = props.graph;\n        const defaultModelCoords =\n            props.model &&\n            maybePointsFromNormalized(\n                props.model.defaultCoords,\n                graph.range,\n                graph.step,\n                graph.snapStep,\n            );\n        return props.coords || defaultModelCoords || null;\n    };\n\n    _asymptote = () => {\n        // Unlike coords, asymptotes are never null; see defaultPlotProps.\n        return this.props.asymptote;\n    };\n\n    change = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    render(): React.ReactNode {\n        const pointForCoord = (coord: any, i) => {\n            return (\n                <MovablePoint\n                    key={i}\n                    coord={coord}\n                    static={this.props.static}\n                    constraints={[\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                        Interactive2.MovablePoint.constraints.bound(),\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                        Interactive2.MovablePoint.constraints.snap(),\n                        (coord: any) => {\n                            // Always enforce that this is a function\n                            const isFunction = _.all(\n                                this._coords(),\n                                (otherCoord, j) => {\n                                    return (\n                                        i === j ||\n                                        !otherCoord ||\n                                        !knumber.equal(coord[0], otherCoord[0])\n                                    );\n                                },\n                            );\n\n                            // Evaluate this criteria before per-point\n                            // constraints\n                            if (!isFunction) {\n                                return false;\n                            }\n\n                            // Specific functions have extra per-point\n                            // constraints\n                            if (\n                                this.props.model &&\n                                this.props.model.extraCoordConstraint\n                            ) {\n                                const extraConstraint =\n                                    this.props.model.extraCoordConstraint;\n                                // Calculat resulting coords and verify that\n                                // they're valid for this graph\n                                const proposedCoords = _.clone(this._coords());\n                                const oldCoord = _.clone(proposedCoords[i]);\n                                proposedCoords[i] = coord;\n                                return extraConstraint(\n                                    coord,\n                                    oldCoord,\n                                    proposedCoords,\n                                    this._asymptote(),\n                                    this.props.graph,\n                                );\n                            }\n\n                            return isFunction;\n                        },\n                    ]}\n                    onMove={(newCoord, oldCoord) => {\n                        let coords;\n                        // Reflect over asymptote, if allowed\n                        const asymptote = this._asymptote();\n                        if (\n                            asymptote &&\n                            this.props.model.allowReflectOverAsymptote &&\n                            isFlipped(newCoord, oldCoord, asymptote)\n                        ) {\n                            coords = _.map(this._coords(), (coord) => {\n                                return kpoint.reflectOverLine(coord, asymptote);\n                            });\n                        } else {\n                            coords = _.clone(this._coords());\n                        }\n                        coords[i] = newCoord;\n                        this.props.onChange({\n                            coords: coords,\n                        });\n                    }}\n                    showHairlines={this.props.showHairlines}\n                    hideHairlines={this.props.hideHairlines}\n                    showTooltips={this.props.showTooltips}\n                    isMobile={this.props.isMobile}\n                />\n            );\n        };\n        const points = _.map(this._coords(), pointForCoord);\n        const box = this.props.graph.box;\n\n        const imageDescription = this.props.graph.backgroundImage;\n        let image = null;\n        if (imageDescription.url) {\n            const scale = box[0] / interactiveSizes.defaultBoxSize;\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'Element' is not assignable to type 'null'.\n            image = (\n                // @ts-expect-error [FEI-5003] - TS2741 - Property 'alt' is missing in type '{ src: any; width: any; height: any; scale: number; }' but required in type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"children\" | \"height\" | \"width\" | \"title\" | \"alt\" | \"trackInteraction\" | \"preloader\" | \"allowFullBleed\" | \"extraGraphie\" | \"overrideAriaHidden\">'.\n                <SvgImage\n                    src={imageDescription.url}\n                    width={imageDescription.width}\n                    height={imageDescription.height}\n                    scale={scale}\n                />\n            );\n        }\n\n        return (\n            <div\n                className={\"perseus-widget \" + \"perseus-widget-grapher\"}\n                style={{\n                    width: box[0],\n                    height: box[1],\n                    boxSizing: \"initial\",\n                }}\n            >\n                <div\n                    className=\"graphie-container above-scratchpad\"\n                    style={{\n                        width: box[0],\n                        height: box[1],\n                    }}\n                >\n                    {image}\n                    <Graphie\n                        {...this.props.graph}\n                        setDrawingAreaAvailable={\n                            this.props.setDrawingAreaAvailable\n                        }\n                    >\n                        {this.props.model && this.renderPlot()}\n                        {this.props.model && this.renderAsymptote()}\n                        {this.props.model && points}\n                    </Graphie>\n                </div>\n            </div>\n        );\n    }\n\n    renderPlot = () => {\n        const model = this.props.model;\n        const xRange = this.props.graph.range[0];\n        const style = {\n            stroke: this.props.isMobile\n                ? KhanColors.BLUE_C\n                : KhanColors.DYNAMIC,\n            ...(this.props.isMobile ? {\"stroke-width\": 3} : {}),\n        } as const;\n\n        const coeffs = model.getCoefficients(this._coords(), this._asymptote());\n        if (!coeffs) {\n            return;\n        }\n\n        const functionProps = model.getPropsForCoeffs(coeffs, xRange);\n        return (\n            <model.Movable\n                {...functionProps}\n                key={this.props.model.url}\n                range={xRange}\n                style={style}\n            />\n        );\n    };\n\n    renderAsymptote = () => {\n        const model = this.props.model;\n        const graph = this.props.graph;\n        const asymptote = this._asymptote();\n        const dashed = {\n            strokeDasharray: \"- \",\n        } as const;\n        return (\n            asymptote && (\n                <MovableLine\n                    onMove={(newCoord, oldCoord) => {\n                        // Calculate and apply displacement\n                        const delta = kvector.subtract(newCoord, oldCoord);\n                        const newAsymptote = _.map(this._asymptote(), (coord) =>\n                            kvector.add(coord, delta),\n                        );\n                        this.props.onChange({\n                            asymptote: newAsymptote,\n                        });\n                    }}\n                    constraints={[\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                        Interactive2.MovableLine.constraints.bound(),\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                        Interactive2.MovableLine.constraints.snap(),\n                        (newCoord, oldCoord: any) => {\n                            // Calculate and apply proposed displacement\n                            const delta = kvector.subtract(newCoord, oldCoord);\n                            const proposedAsymptote = _.map(\n                                this._asymptote(),\n                                (coord) => kvector.add(coord, delta),\n                            );\n                            // Verify that resulting asymptote is valid for graph\n                            if (model.extraAsymptoteConstraint) {\n                                return model.extraAsymptoteConstraint(\n                                    newCoord,\n                                    oldCoord,\n                                    this._coords(),\n                                    proposedAsymptote,\n                                    graph,\n                                );\n                            }\n                            return true;\n                        },\n                    ]}\n                    normalStyle={dashed}\n                    highlightStyle={dashed}\n                >\n                    {_.map(asymptote, (coord, i) => (\n                        <MovablePoint\n                            key={`asymptoteCoord-${i}`}\n                            coord={coord}\n                            static={true}\n                            draw={null}\n                            extendLine={true}\n                            showHairlines={this.props.showHairlines}\n                            hideHairlines={this.props.hideHairlines}\n                            showTooltips={this.props.showTooltips}\n                            isMobile={this.props.isMobile}\n                        />\n                    ))}\n                </MovableLine>\n            )\n        );\n    };\n}\n\ntype UserInput = any; // Really this is props.plot, I think\n\ntype RenderProps = {\n    availableTypes: PerseusGrapherWidgetOptions[\"availableTypes\"];\n    graph: PerseusGrapherWidgetOptions[\"graph\"];\n    plot?: any;\n};\n\ntype Rubric = PerseusGrapherWidgetOptions;\ntype ExternalProps = WidgetProps<RenderProps, Rubric>;\n\ntype Props = ExternalProps & {\n    // plot is always provided by default props\n    plot: NonNullable<RenderProps[\"plot\"]>;\n    // NOTE(jeremy): This prop exists in the `graph` prop value. Unsure what\n    // passes it down as a top-level prop (I suspect the editor?)\n    markings: \"graph\" | \"grid\" | \"none\";\n};\n\ntype DefaultProps = {\n    plot: RenderProps[\"plot\"];\n    // More?\n};\n\n/* Widget and editor. */\nclass Grapher extends React.Component<Props> {\n    horizHairline: any;\n    vertHairline: any;\n\n    static defaultProps: DefaultProps = DEFAULT_GRAPHER_PROPS;\n\n    render(): React.ReactNode {\n        const type = this.props.plot.type;\n        const coords = this.props.plot.coords;\n        const asymptote = this.props.plot.asymptote;\n\n        const typeSelector = (\n            <div style={typeSelectorStyle} className=\"above-scratchpad\">\n                <ButtonGroup\n                    value={type}\n                    allowEmpty={true}\n                    buttons={_.map(this.props.availableTypes, typeToButton)}\n                    onChange={this.handleActiveTypeChange}\n                />\n            </div>\n        );\n\n        const box = getInteractiveBoxFromSizeClass(\n            this.props.containerSizeClass,\n        );\n\n        // Calculate additional graph properties so that the same values are\n        // passed in to both FunctionGrapher and Graphie.\n        const options = {\n            ...this.props.graph,\n            ...getGridAndSnapSteps(this.props.graph, box[0]),\n            gridConfig: this._getGridConfig({\n                ...this.props.graph,\n                box: box,\n                ...getGridAndSnapSteps(this.props.graph, box[0]),\n            }),\n        } as const;\n\n        // The `graph` prop will eventually be passed to the <Graphie>\n        // component. In fact, if model is `null`, this is functionalliy\n        // identical to a <Graphie>. Otherwise, some points and a plot will be\n        // overlayed.\n        const grapherProps = {\n            graph: {\n                box: box,\n                range: options.range,\n                step: options.step,\n                snapStep: options.snapStep,\n                backgroundImage: options.backgroundImage,\n                options: options,\n                setup: this._setupGraphie,\n            },\n            onChange: this.handlePlotChanges,\n            model: type && functionForType(type),\n            coords: coords,\n            asymptote: asymptote,\n            static: this.props.static,\n            setDrawingAreaAvailable:\n                this.props.apiOptions.setDrawingAreaAvailable,\n            isMobile: this.props.apiOptions.isMobile,\n            showTooltips: this.props.graph.showTooltips,\n            showHairlines: this.showHairlines,\n            hideHairlines: this.hideHairlines,\n        } as const;\n\n        return (\n            <div>\n                {/* @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. */}\n                <FunctionGrapher {...grapherProps} />\n                {this.props.availableTypes.length > 1 && typeSelector}\n            </div>\n        );\n    }\n\n    handlePlotChanges: (arg1: any) => any = (newPlot) => {\n        const plot = _.extend({}, this.props.plot, newPlot);\n        this.props.onChange({\n            plot: plot,\n        });\n        this.props.trackInteraction();\n    };\n\n    handleActiveTypeChange: (arg1: any) => any = (newType) => {\n        const graph = this.props.graph;\n        const plot = _.extend(\n            {},\n            this.props.plot,\n            defaultPlotProps(newType, graph),\n        );\n        this.props.onChange({\n            plot: plot,\n        });\n    };\n\n    _getGridConfig(\n        options: Props[\"graph\"] & {\n            box: NonNullable<Props[\"graph\"][\"box\"]>;\n            gridStep: NonNullable<Props[\"graph\"][\"gridStep\"]>;\n        },\n    ): ReadonlyArray<GridDimensions> {\n        return options.step.map((step, i) => {\n            return Util.gridDimensionConfig(\n                step,\n                options.range[i],\n                options.box[i],\n                options.gridStep[i],\n            );\n        });\n    }\n\n    _calculateMobileTickStep(\n        gridStep: JSX.LibraryManagedAttributes<\n            typeof Graphie,\n            Required<React.ComponentProps<typeof Graphie>>\n        >[\"gridStep\"],\n        step: JSX.LibraryManagedAttributes<\n            typeof Graphie,\n            Required<React.ComponentProps<typeof Graphie>>\n        >[\"step\"],\n        ranges: JSX.LibraryManagedAttributes<\n            typeof Graphie,\n            Required<React.ComponentProps<typeof Graphie>>\n        >[\"ranges\"],\n    ): any {\n        const tickStep = Util.constrainedTickStepsFromTickSteps(step, ranges);\n\n        // According to the graphInit documentation in graphie.js, tickStep is\n        // relative to the grid units so we need to adjust all values by the\n        // grid step.\n        tickStep[0] = tickStep[0] / gridStep[0];\n        tickStep[1] = tickStep[1] / gridStep[1];\n\n        return tickStep;\n    }\n\n    _setupGraphie: (arg1: any, arg2: any) => void = (graphie, options) => {\n        const isMobile = this.props.apiOptions.isMobile;\n\n        if (options.markings === \"graph\") {\n            graphie.graphInit({\n                range: options.range,\n                scale: _.pluck(options.gridConfig, \"scale\"),\n                axisArrows: \"<->\",\n                labelFormat: function (s) {\n                    return \"\\\\small{\" + s + \"}\";\n                },\n                gridStep: options.gridStep,\n                snapStep: options.snapStep,\n                tickStep: isMobile\n                    ? this._calculateMobileTickStep(\n                          options.gridStep,\n                          options.step,\n                          options.range,\n                      )\n                    : _.pluck(options.gridConfig, \"tickStep\"),\n                labelStep: 1,\n                unityLabels: _.pluck(options.gridConfig, \"unityLabel\"),\n                isMobile: isMobile,\n            });\n            graphie.label(\n                [0, options.range[1][1]],\n                options.labels[1],\n                isMobile ? \"below right\" : \"above\",\n            );\n            graphie.label(\n                [options.range[0][1], 0],\n                options.labels[0],\n                isMobile ? \"above left\" : \"right\",\n            );\n        } else if (options.markings === \"grid\") {\n            graphie.graphInit({\n                range: options.range,\n                scale: _.pluck(options.gridConfig, \"scale\"),\n                gridStep: options.gridStep,\n                axes: false,\n                ticks: false,\n                labels: false,\n                isMobile: isMobile,\n            });\n        } else if (options.markings === \"none\") {\n            graphie.init({\n                range: options.range,\n                scale: _.pluck(options.gridConfig, \"scale\"),\n            });\n        }\n\n        if (this.props.apiOptions.isMobile) {\n            const hairlineStyle = {\n                normalStyle: {\n                    strokeWidth: 1,\n                },\n            } as const;\n\n            this.horizHairline = new WrappedLine(\n                graphie,\n                [0, 0],\n                [0, 0],\n                hairlineStyle,\n            );\n            this.horizHairline.attr({\n                stroke: KhanColors.INTERACTIVE,\n            });\n            this.horizHairline.hide();\n\n            this.vertHairline = new WrappedLine(\n                graphie,\n                [0, 0],\n                [0, 0],\n                hairlineStyle,\n            );\n            this.vertHairline.attr({\n                stroke: KhanColors.INTERACTIVE,\n            });\n            this.vertHairline.hide();\n        }\n    };\n\n    showHairlines: (arg1: Coord) => void = (point) => {\n        if (this.props.apiOptions.isMobile && this.props.markings !== \"none\") {\n            // Hairlines are already initialized when the graph is loaded, so\n            // here we just move them to the updated location and make them\n            // visible.\n            this.horizHairline.moveTo(\n                [this.props.graph.range[0][0], point[1]],\n                [this.props.graph.range[0][1], point[1]],\n            );\n\n            this.horizHairline.show();\n\n            this.vertHairline.moveTo(\n                [point[0], this.props.graph.range[1][0]],\n                [point[0], this.props.graph.range[1][1]],\n            );\n\n            this.vertHairline.show();\n        }\n    };\n\n    hideHairlines: () => void = () => {\n        if (this.props.apiOptions.isMobile) {\n            this.horizHairline.hide();\n            this.vertHairline.hide();\n        }\n    };\n\n    simpleValidate(rubric: Rubric): PerseusScore {\n        return grapherValidate(this.getUserInput(), rubric);\n    }\n\n    getUserInput(): UserInput {\n        return Grapher.getUserInputFromProps(this.props);\n    }\n\n    focus(): void {}\n\n    static validate(state: UserInput, rubric: Rubric): PerseusScore {\n        return grapherValidate(state, rubric);\n    }\n\n    static getUserInputFromProps(props: Props): UserInput {\n        return props.plot;\n    }\n}\n\nconst propTransform: (arg1: PerseusGrapherWidgetOptions) => RenderProps = (\n    editorProps,\n) => {\n    const widgetProps: RenderProps = {\n        availableTypes: editorProps.availableTypes,\n        graph: editorProps.graph,\n    };\n\n    // If there's only one type, the graph type is deterministic\n    if (widgetProps.availableTypes.length === 1) {\n        const graph = widgetProps.graph;\n        const type = chooseType(widgetProps.availableTypes);\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string | undefined' is not assignable to parameter of type 'string'.\n        widgetProps.plot = defaultPlotProps(type, graph);\n    }\n\n    return widgetProps;\n};\n\n// Note that in addition to the standard staticTransform, in static\n// mode we set static=true for the graph's handles in FunctionGrapher.\nconst staticTransform: (arg1: PerseusGrapherWidgetOptions) => RenderProps = (\n    editorProps,\n) => {\n    return {\n        ...propTransform(editorProps),\n        // Don't display graph type choices if we're in static mode\n        availableTypes: [editorProps.correct.type],\n        // Display the same graph marked as correct in the widget editor.\n        plot: editorProps.correct,\n    };\n};\n\nexport default {\n    name: \"grapher\",\n    displayName: \"Grapher\",\n    widget: Grapher,\n    transform: propTransform,\n    staticTransform: staticTransform,\n} as WidgetExports<typeof Grapher>;\n","import {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\n\nimport * as Changeable from \"../mixins/changeable\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\n\nimport type {PerseusGroupWidgetOptions} from \"../perseus-types\";\nimport type {Widget} from \"../renderer\";\nimport type {\n    APIOptions,\n    ChangeFn,\n    FocusPath,\n    PerseusScore,\n    WidgetExports,\n    WidgetProps,\n} from \"../types\";\n\ntype Rubric = PerseusGroupWidgetOptions;\ntype RenderProps = PerseusGroupWidgetOptions; // exports has no 'transform'\ntype Props = WidgetProps<RenderProps, Rubric>;\ntype DefaultProps = {\n    content: Props[\"content\"];\n    widgets: Props[\"widgets\"];\n    images: Props[\"images\"];\n    linterContext: Props[\"linterContext\"];\n};\n\nclass Group extends React.Component<Props> {\n    rendererRef: Renderer | null | undefined;\n\n    static defaultProps: DefaultProps = {\n        content: \"\",\n        widgets: {},\n        images: {},\n        linterContext: linterContextDefault,\n    };\n\n    componentDidMount() {\n        // TODO(marcia): See comment in render method about our cyclical\n        // numbering scheme. We force another render so that we can annotate\n        // the group with the correct number.\n        this.forceUpdate();\n    }\n\n    change: ChangeFn = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    getUserInput: () => any = () => {\n        return this.rendererRef?.getUserInput();\n    };\n\n    getSerializedState: () => any = () => {\n        return this.rendererRef?.getSerializedState();\n    };\n\n    restoreSerializedState: (arg1: any, arg2: any) => null = (\n        state,\n        callback,\n    ) => {\n        this.rendererRef?.restoreSerializedState(state, callback);\n        // Tell our renderer that we have no props to change\n        // (all our changes were in state):\n        return null;\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore | null | undefined = (\n        rubric,\n    ) => {\n        return this.rendererRef?.score();\n    };\n\n    // Mobile API:\n    getInputPaths: () => ReadonlyArray<FocusPath> | null | undefined = () => {\n        return this.rendererRef?.getInputPaths();\n    };\n\n    setInputValue: (\n        arg1: FocusPath,\n        arg2: string,\n        arg3: () => unknown,\n    ) => void = (path, newValue, callback) => {\n        return this.rendererRef?.setInputValue(path, newValue, callback);\n    };\n\n    focus: () => boolean | null | undefined = () => {\n        return this.rendererRef?.focus();\n    };\n\n    focusInputPath: (arg1: FocusPath) => void = (path) => {\n        this.rendererRef?.focusPath(path);\n    };\n\n    blurInputPath: (arg1: FocusPath) => void = (path) => {\n        this.rendererRef?.blurPath(path);\n    };\n\n    showRationalesForCurrentlySelectedChoices: () => void = () => {\n        this.rendererRef?.showRationalesForCurrentlySelectedChoices();\n    };\n\n    render(): React.ReactNode {\n        const apiOptions: APIOptions = {\n            ...ApiOptions.defaults,\n            ...this.props.apiOptions,\n            // Api Rewriting to support correct onFocus/onBlur\n            // events for the mobile API\n            onFocusChange: (newFocus, oldFocus) => {\n                if (oldFocus) {\n                    this.props.onBlur(oldFocus);\n                }\n                if (newFocus) {\n                    this.props.onFocus(newFocus);\n                }\n            },\n        };\n\n        // Allow a problem number annotation to be added.\n        // This is cyclical and should probably be reconsidered. In order to\n        // render the annotation (\"Question 3 of 10\"), we call findWidgets to\n        // figure out our index in the list of all fellow group widgets. On\n        // first render, though, we don't exist yet in this list, and so we\n        // give ourselves number -1. To combat this, we forceUpdate in\n        // componentDidMount so that we can number ourselves properly. But,\n        // really we should have a more unidirectional flow. TODO(marcia): fix.\n        const groupWidgets: ReadonlyArray<Widget> =\n            this.props.findWidgets(\"group\");\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'this' is not assignable to parameter of type 'Widget'.\n        const number: number = groupWidgets.indexOf(this);\n        const problemNumComponent = this.props.apiOptions.groupAnnotator(\n            number,\n            this.props.widgetId,\n        );\n\n        // This is a little strange because the id of the widget that actually\n        // changed is going to be lost in favor of the group widget's id. The\n        // widgets prop also wasn't actually changed, and this only serves to\n        // alert our renderer (our parent) of the fact that some interaction\n        // has occurred.\n        const onInteractWithWidget = (id) => {\n            if (this.rendererRef) {\n                this.change(\"widgets\", this.rendererRef.props.widgets);\n            }\n        };\n\n        const score = this.rendererRef?.score();\n        const isValid = score && score.type !== \"invalid\";\n        const isInvalid = score && score.type === \"invalid\";\n\n        // TODO(mdr): Widgets inside this Renderer are not discoverable through\n        //     the parent Renderer's `findWidgets` function.\n        return (\n            <div\n                className={classNames({\n                    \"perseus-group\": true,\n                    \"perseus-group-valid-answer\": isValid,\n                    \"perseus-group-invalid-answer\": isInvalid,\n                })}\n            >\n                {problemNumComponent}\n                <Renderer\n                    content={this.props.content}\n                    widgets={this.props.widgets}\n                    images={this.props.images}\n                    ref={(ref) => (this.rendererRef = ref)}\n                    apiOptions={apiOptions}\n                    findExternalWidgets={this.props.findWidgets}\n                    reviewMode={!!this.props.reviewModeRubric}\n                    onInteractWithWidget={onInteractWithWidget}\n                    linterContext={this.props.linterContext}\n                />\n                {/* @ts-expect-error [FEI-5003] - TS2339 - Property 'icon' does not exist on type 'Readonly<Props> & Readonly<{ children?: ReactNode; }>'. */}\n                {this.props.icon && (\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'icon' does not exist on type 'Readonly<Props> & Readonly<{ children?: ReactNode; }>'.\n                    <div className=\"group-icon\">{this.props.icon}</div>\n                )}\n            </div>\n        );\n    }\n}\n\nconst traverseChildWidgets = function (props: any, traverseRenderer: any): any {\n    return {...props, ...traverseRenderer(props)};\n};\n\nexport default {\n    name: \"group\",\n    displayName: \"Group (SAT only)\",\n    widget: Group,\n    traverseChildWidgets: traverseChildWidgets,\n    hidden: false,\n    isLintable: true,\n} as WidgetExports<typeof Group>;\n","/* eslint-disable react/forbid-prop-types, react/sort-comp */\n/**\n * This is an iframe widget. It is used for rendering an iframe that\n *  then communicates its state via window.postMessage\n * This is useful for embedding arbitrary visualizations/simulations with\n *  completed conditions, such as the mazes and games in Algorithms.\n * It's particularly well suited for embedding our ProcessingJS programs,\n *  but could also be used for embedding viz's hosted elsewhere.\n */\n\nimport $ from \"jquery\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\nimport * as Changeable from \"../mixins/changeable\";\nimport WidgetJsonifyDeprecated from \"../mixins/widget-jsonify-deprecated\";\nimport Util from \"../util\";\n\nimport type {WidgetExports} from \"../types\";\n\nconst {updateQueryString} = Util;\n\n/* This renders the iframe and handles validation via window.postMessage */\nclass Iframe extends React.Component<any> {\n    static propTypes = {\n        ...Changeable.propTypes,\n        width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        url: PropTypes.string,\n        settings: PropTypes.array,\n        status: PropTypes.oneOf([\"incomplete\", \"incorrect\", \"correct\"]),\n        message: PropTypes.string,\n        allowFullScreen: PropTypes.bool,\n        allowTopNavigation: PropTypes.bool,\n    };\n\n    static defaultProps: any = {\n        status: \"incomplete\",\n        // optional message\n        message: null,\n        allowFullScreen: false,\n        allowTopNavigation: false,\n    };\n\n    getUserInput: () => any = () => {\n        return WidgetJsonifyDeprecated.getUserInput.call(this);\n    };\n\n    handleMessageEvent: (arg1: any) => void = (e) => {\n        // We receive data from the iframe that contains {passed: true/false}\n        //  and use that to set the status\n        // It could also contain an optional message\n        let data: Record<string, any> = {};\n        try {\n            data = JSON.parse(e.originalEvent.data);\n        } catch (err: any) {\n            return;\n        }\n\n        if (_.isUndefined(data.testsPassed)) {\n            return;\n        }\n\n        const status = data.testsPassed ? \"correct\" : \"incorrect\";\n        this.change({\n            status: status,\n            message: data.message,\n        });\n    };\n\n    componentDidMount() {\n        $(window).on(\"message\", this.handleMessageEvent);\n    }\n\n    componentWillUnmount() {\n        $(window).off(\"message\", this.handleMessageEvent);\n    }\n\n    render(): React.ReactNode {\n        const style = {\n            width: String(this.props.width),\n            height: String(this.props.height),\n        } as const;\n\n        const {InitialRequestUrl} = getDependencies();\n\n        // Add \"px\" to unitless numbers\n        Object.entries(style).forEach(([key, value]: [any, any]) => {\n            if (!value.endsWith(\"%\") && !value.endsWith(\"px\")) {\n                style[key] = value + \"px\";\n            }\n        });\n\n        let url = this.props.url;\n\n        // If the URL doesnt start with http, it must be a program ID\n        if (url && url.length && url.indexOf(\"http\") !== 0) {\n            url =\n                \"https://www.khanacademy.org/computer-programming/program/\" +\n                url +\n                \"/embedded?buttons=no&embed=yes&editor=no&author=no\";\n            url = updateQueryString(url, \"width\", this.props.width);\n            url = updateQueryString(url, \"height\", this.props.height);\n            // Origin is used by output.js in deciding to send messages\n            url = updateQueryString(url, \"origin\", InitialRequestUrl.origin);\n        }\n\n        // Turn array of [{name: \"\", value: \"\"}] into object\n        if (this.props.settings) {\n            const settings: Record<string, any> = {};\n            _.each(this.props.settings, function (setting) {\n                if (setting.name && setting.value) {\n                    settings[setting.name] = setting.value;\n                }\n            });\n            // This becomes available to programs as Program.settings()\n            url = updateQueryString(url, \"settings\", JSON.stringify(settings));\n        }\n\n        let sandboxProperties = \"allow-same-origin allow-scripts\";\n        // TODO(scottgrant): This line is an intentional hack to retain the\n        // allow-top-navigation sandbox property. Once our LearnStorm articles\n        // have this value checked and published, this line should be removed\n        // and replaced with the conditional check below that is commented out.\n        // We don't want to break LearnStorm badges, so this will be a two-part\n        // deploy.\n        sandboxProperties += \" allow-top-navigation\";\n        // if (this.props.allowTopNavigation === true) {\n        //     sandboxProperties += \" allow-top-navigation\";\n        // }\n\n        // We sandbox the iframe so that we allowlist only the functionality\n        //  that we need. This makes it a bit safer in case some content\n        //  creator \"went wild\".\n        // http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/\n        return (\n            <iframe\n                sandbox={sandboxProperties}\n                style={style}\n                src={url}\n                allowFullScreen={this.props.allowFullScreen}\n            />\n        );\n    }\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof Iframe'.\n        return Iframe.validate(this.getUserInput(), rubric);\n    };\n}\n\n/**\n * This is the widget's grading function\n */\n_.extend(Iframe, {\n    validate: function (state, rubric) {\n        // The iframe can tell us whether it's correct or incorrect,\n        //  and pass an optional message\n        if (state.status === \"correct\") {\n            return {\n                type: \"points\",\n                earned: 1,\n                total: 1,\n                message: state.message || null,\n            };\n        }\n        if (state.status === \"incorrect\") {\n            return {\n                type: \"points\",\n                earned: 0,\n                total: 1,\n                message: state.message || null,\n            };\n        }\n        return {\n            type: \"invalid\",\n            message: \"Keep going, you're not there yet!\",\n        };\n    },\n});\n\nexport default {\n    name: \"iframe\",\n    displayName: \"Iframe\",\n    widget: Iframe,\n    // Let's not expose it to all content creators yet\n    hidden: true,\n} as WidgetExports<typeof Iframe>;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/sort-comp */\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport SvgImage from \"../components/svg-image\";\nimport * as Changeable from \"../mixins/changeable\";\nimport Renderer from \"../renderer\";\nimport {baseUnitPx} from \"../styles/constants\";\nimport mediaQueries from \"../styles/media-queries\";\n\nimport type {Range, PerseusImageWidgetOptions} from \"../perseus-types\";\nimport type {\n    ChangeFn,\n    PerseusScore,\n    WidgetExports,\n    WidgetProps,\n} from \"../types\";\n\nconst defaultBoxSize = 400;\nconst defaultRange: Range = [0, 10];\nconst defaultBackgroundImage = {\n    url: null,\n    width: 0,\n    height: 0,\n} as const;\n\nconst editorAlignments = [\"block\", \"full-width\"];\n\nconst DEFAULT_ALIGNMENT = \"block\";\n\ntype RenderProps = PerseusImageWidgetOptions; // there is no transform as part of exports\ntype Rubric = PerseusImageWidgetOptions;\ntype UserInput = null;\n\ntype ExternalProps = WidgetProps<RenderProps, Rubric>;\n\ntype Props = ExternalProps & {\n    alignment: NonNullable<ExternalProps[\"alignment\"]>;\n    title: NonNullable<ExternalProps[\"title\"]>;\n    range: NonNullable<ExternalProps[\"range\"]>;\n    box: NonNullable<ExternalProps[\"box\"]>;\n    backgroundImage: NonNullable<ExternalProps[\"backgroundImage\"]>;\n    labels: NonNullable<ExternalProps[\"labels\"]>;\n    alt: NonNullable<ExternalProps[\"alt\"]>;\n    caption: NonNullable<ExternalProps[\"caption\"]>;\n    linterContext: NonNullable<ExternalProps[\"linterContext\"]>;\n};\n\ntype DefaultProps = {\n    alignment: Props[\"alignment\"];\n    title: Props[\"title\"];\n    range: Props[\"range\"];\n    box: Props[\"box\"];\n    backgroundImage: Props[\"backgroundImage\"];\n    labels: Props[\"labels\"];\n    alt: Props[\"alt\"];\n    caption: Props[\"caption\"];\n    linterContext: Props[\"linterContext\"];\n};\n\nclass ImageWidget extends React.Component<Props> {\n    static defaultProps: DefaultProps = {\n        alignment: DEFAULT_ALIGNMENT,\n        title: \"\",\n        range: [defaultRange, defaultRange],\n        box: [defaultBoxSize, defaultBoxSize],\n        backgroundImage: defaultBackgroundImage,\n        labels: [],\n        alt: \"\",\n        caption: \"\",\n        linterContext: linterContextDefault,\n    };\n\n    change: ChangeFn = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    getUserInput: () => UserInput = () => {\n        return null;\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return ImageWidget.validate(this.getUserInput(), rubric);\n    };\n\n    focus: () => void = () => {}; // no-op\n\n    render(): React.ReactNode {\n        let image;\n        let alt;\n        const {apiOptions} = this.props;\n\n        const backgroundImage = this.props.backgroundImage;\n\n        if (backgroundImage.url) {\n            image = (\n                <SvgImage\n                    src={backgroundImage.url}\n                    alt={\n                        /* alt text is formatted in a sr-only\n                               div next to the image in addition to\n                               the alt attribute.\n                               If there is no alt text at all,\n                               we don't put an alt attribute on\n                               the image, so that screen readers\n                               know there's something they can't\n                               read there :(.\n                               NOTE: React <=0.13 (maybe later)\n                               has a bug where it won't ever\n                               remove an attribute, so if this\n                               alt node is ever defined it's\n                               not removed. This is sort of\n                               dangerous, but we usually re-key\n                               new renderers so that they're\n                               rendered from scratch anyways,\n                               so this shouldn't be a problem\n                               in practice right now, although\n                               it will exhibit weird behaviour\n                               while editing. */\n                        this.props.alt\n                    }\n                    overrideAriaHidden={true}\n                    width={backgroundImage.width}\n                    height={backgroundImage.height}\n                    preloader={apiOptions.imagePreloader}\n                    extraGraphie={{\n                        box: this.props.box,\n                        range: this.props.range,\n                        labels: this.props.labels,\n                    }}\n                    trackInteraction={this.props.trackInteraction}\n                    zoomToFullSizeOnMobile={apiOptions.isMobile}\n                    constrainHeight={apiOptions.isMobile}\n                    allowFullBleed={apiOptions.isMobile}\n                />\n            );\n        }\n\n        if (this.props.alt) {\n            alt = (\n                <span className=\"perseus-sr-only\">\n                    <Renderer\n                        content={this.props.alt}\n                        apiOptions={apiOptions}\n                        linterContext={this.props.linterContext}\n                    />\n                </span>\n            );\n        }\n\n        // For mobile we combine an image's title and caption.\n        if (apiOptions.isMobile) {\n            let titleAndCaption;\n\n            if (this.props.title || this.props.caption) {\n                let title = this.props.title;\n\n                // Bold the title, and make it the first sentence of the\n                // caption.\n                if (title) {\n                    // We add a period to separate the title from the caption\n                    // (if it exists), unless the title already ends with a\n                    // punctuation symbol (whitespace ignored). Copied from\n                    // webapp: https://github.com/Khan/webapp/blob/6e930637edb65696d0749ea0f7558214aee32b4e/javascript/tutorial-shared-package/components/content-description.jsx#L80\n                    // TODO(charlie): Internationalize this check, and the\n                    // delimiter that is being inserted.\n                    if (this.props.caption && !/[.?!\"']\\s*$/.test(title)) {\n                        title += \".\";\n                    }\n\n                    title = `**${title}** `;\n                }\n\n                const className = classNames({\n                    \"perseus-image-caption\": true,\n                    \"has-title\": !!title,\n                });\n\n                // Caption is left-aligned within a container that's centered\n                // below the image, with these width constraints:\n                //\n                // 1. Size caption to width of the image on-screen.\n                // 2. ... but constrain its width to a range based on the\n                //    device to optimize readability - e.g. [320px, 450px] for\n                //    phones.\n                // 3. ... unless the image is floated, in which case we don't\n                //    want the caption to overflow the image size.\n                //\n                // TODO(david): If caption is only 1 line long, center-align\n                //     the text.\n                const alignment = this.props.alignment;\n                const isImageFullWidth =\n                    alignment === \"block\" || alignment === \"full-width\";\n\n                // This minWidth takes precedence over minWidth applied via\n                // Aphrodite.\n                const minWidth = isImageFullWidth ? null : \"0 !important\";\n\n                titleAndCaption = (\n                    <div className={className}>\n                        <div\n                            className={css(styles.caption)}\n                            style={{\n                                // @ts-expect-error [FEI-5003] - TS2322 - Type 'string | null' is not assignable to type 'MinWidth<string | number> | undefined'.\n                                minWidth: minWidth,\n                            }}\n                        >\n                            <Renderer\n                                content={title + this.props.caption}\n                                apiOptions={apiOptions}\n                                linterContext={this.props.linterContext}\n                            />\n                        </div>\n                    </div>\n                );\n            }\n\n            return (\n                <div className=\"perseus-image-widget\">\n                    {image}\n                    {alt}\n                    {titleAndCaption}\n                </div>\n            );\n        }\n        let title;\n        let caption;\n\n        if (this.props.title) {\n            title = (\n                <div className=\"perseus-image-title\">\n                    <Renderer\n                        content={this.props.title}\n                        apiOptions={apiOptions}\n                        linterContext={this.props.linterContext}\n                    />\n                </div>\n            );\n        }\n\n        if (this.props.caption) {\n            caption = (\n                <div className=\"perseus-image-caption\">\n                    <Renderer\n                        content={this.props.caption}\n                        apiOptions={apiOptions}\n                        linterContext={this.props.linterContext}\n                    />\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"perseus-image-widget\">\n                {title}\n                {image}\n                {alt}\n                {caption}\n            </div>\n        );\n    }\n\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n}\n\nconst styles = StyleSheet.create({\n    caption: {\n        display: \"inline-block\",\n        marginTop: baseUnitPx,\n        maxWidth: 640,\n\n        [mediaQueries.lgOrSmaller]: {\n            // TODO(david): This maxWidth is not being used because\n            //     it's overriden by the 512px max-width we have on\n            //     paragraphs.\n            maxWidth: 540,\n        },\n\n        [mediaQueries.smOrSmaller]: {\n            maxWidth: 450,\n        },\n    },\n});\n\nexport default {\n    name: \"image\",\n    // This widget's accessibility depends on its contents: if the image has\n    // has a background but no alt text, it is not accessible\n    accessible: (widgetOptions: PerseusImageWidgetOptions): boolean => {\n        const bgImage = widgetOptions.backgroundImage;\n        return !(bgImage && bgImage.url && !widgetOptions.alt);\n    },\n    defaultAlignment: DEFAULT_ALIGNMENT,\n    supportedAlignments: editorAlignments,\n    displayName: \"Image\",\n    widget: ImageWidget,\n    isLintable: true,\n} as WidgetExports<typeof ImageWidget>;\n","/* eslint-disable @babel/no-invalid-this, react/no-unsafe, react/sort-comp */\nimport * as KAS from \"@khanacademy/kas\";\nimport {vector as kvector} from \"@khanacademy/kmath\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport Graphie from \"../components/graphie\";\nimport * as Changeable from \"../mixins/changeable\";\nimport Util from \"../util\";\n\nimport type {Coord} from \"../interactive2/types\";\nimport type {\n    PerseusInteractionElement,\n    PerseusInteractionWidgetOptions,\n} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Label' does not exist on type 'typeof Graphie'.\nconst Label = Graphie.Label;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Line' does not exist on type 'typeof Graphie'.\nconst Line = Graphie.Line;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'MovablePoint' does not exist on type 'typeof Graphie'.\nconst MovablePoint = Graphie.MovablePoint;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'MovableLine' does not exist on type 'typeof Graphie'.\nconst MovableLine = Graphie.MovableLine;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Plot' does not exist on type 'typeof Graphie'.\nconst Plot = Graphie.Plot;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'PlotParametric' does not exist on type 'typeof Graphie'.\nconst PlotParametric = Graphie.PlotParametric;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Point' does not exist on type 'typeof Graphie'.\nconst Point = Graphie.Point;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Rect' does not exist on type 'typeof Graphie'.\nconst Rect = Graphie.Rect;\nconst {unescapeMathMode} = Util;\n\n// Memoize KAS parsing\nconst KAShashFunc = (\n    expr: any,\n    options:\n        | undefined\n        | {\n              [\".decimal_separator\"]: never;\n              [\".functions\"]: never;\n          }\n        | {\n              functions: any;\n          },\n) => {\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '{ \".decimal_separator\": never; \".functions\": never; } | { functions: any; } | {}' is not assignable to type '{ \".decimal_separator\": never; \".functions\": never; } | { functions: any; } | undefined'.\n    options = options || {};\n    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2339 - Property 'decimal_separator' does not exist on type '{ \".decimal_separator\": never; \".functions\": never; } | { functions: any; }'.\n    let result = expr + \"||\" + options.decimal_separator + \"||\";\n    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2339 - Property 'functions' does not exist on type '{ \".decimal_separator\": never; \".functions\": never; } | { functions: any; }'.\n    const functions = options.functions;\n    const functionsLength = functions ? functions.length : 0;\n    for (let i = 0; i < functionsLength; i++) {\n        result += functions[i] + \"|\";\n    }\n    return result;\n};\n\nconst _parseCache = Object.create(null);\nconst KASparse = (expr, options) => {\n    const hash = KAShashFunc(expr, options);\n    let cached = _parseCache[hash];\n    if (cached) {\n        return cached;\n    }\n    cached = KAS.parse(expr, options);\n    _parseCache[hash] = cached;\n    return cached;\n};\n\nconst _compileCache = Object.create(null);\nconst KAScompile = (\n    expr: any,\n    options: {\n        functions: any;\n    },\n) => {\n    const hash = KAShashFunc(expr, options);\n    let cached = _compileCache[hash];\n    if (cached) {\n        return cached;\n    }\n    const parsed = KAS.parse(expr, options).expr;\n    cached = parsed\n        ? parsed.compile()\n        : function () {\n              return 0;\n          };\n    _compileCache[hash] = cached;\n    return cached;\n};\n\ntype RenderProps = PerseusInteractionWidgetOptions; // There's no transform function in exports\ntype Rubric = PerseusInteractionWidgetOptions;\ntype Props = WidgetProps<RenderProps, Rubric>;\n\ntype DefaultProps = {\n    graph: Props[\"graph\"];\n    elements: Props[\"elements\"];\n};\n\ntype State = {\n    variables: any;\n    functions: any;\n};\n\nclass Interaction extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        graph: {\n            box: [400, 400],\n            labels: [\"x\", \"y\"],\n            range: [\n                [-10, 10],\n                [-10, 10],\n            ],\n            tickStep: [1, 1],\n            gridStep: [1, 1],\n            markings: \"graph\",\n        },\n        elements: [],\n    };\n\n    state: State = {\n        variables: _getInitialVariables(this.props.elements),\n        functions: _getInitialFunctions(this.props.elements),\n    };\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        // HACK(michaelpolyak): This widget is not wired to use the Perseus\n        // `onChange` callback to save user changes. Perseus re-rendering of the\n        // widget results in the loss of user changes, such as reseting the\n        // positions of the movable points and lines to the initial positions\n        // defined in the widget editor. The workaround here is to only reset\n        // the state if there are changes to props. This workaround is only\n        // possible because the widget is not designed to be graded. The correct\n        // fix would be to transform `variables` to the shape of `elements` and\n        // call `this.props.onChange({elements})` to preserve user changes using\n        // the Perseus state saving mechanism.\n        if (!_.isEqual(this.props.elements, nextProps.elements)) {\n            this.setState({\n                variables: _getInitialVariables(nextProps.elements),\n                functions: _getInitialFunctions(nextProps.elements),\n            });\n        }\n    }\n\n    _setupGraphie: (arg1: any, arg2: any) => void = (graphie, options) => {\n        graphie.graphInit(\n            _.extend({}, options, {\n                grid: _.contains([\"graph\", \"grid\"], this.props.graph.markings),\n                axes: _.contains([\"graph\"], this.props.graph.markings),\n                ticks: _.contains([\"graph\"], this.props.graph.markings),\n                labels: _.contains([\"graph\"], this.props.graph.markings),\n                labelFormat: function (s) {\n                    return \"\\\\small{\" + s + \"}\";\n                },\n                axisArrows: \"<->\",\n                unityLabels: false,\n            }),\n        );\n    };\n\n    _updatePointLocation: (arg1: string, arg2: Coord) => void = (\n        subscript,\n        coord,\n    ) => {\n        const variables = _.clone(this.state.variables);\n        variables[\"x_\" + subscript] = coord[0];\n        variables[\"y_\" + subscript] = coord[1];\n        this.setState({variables: variables});\n        this.props.trackInteraction();\n    };\n\n    _updateLineLocation: (arg1: any, arg2: Coord) => void = (\n        options,\n        startCoord,\n    ) => {\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n        const xDiff = this._eval(\n            \"(\" + options.endX + \")-(\" + options.startX + \")\",\n        );\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n        const yDiff = this._eval(\n            \"(\" + options.endY + \")-(\" + options.startY + \")\",\n        );\n        const endCoord = kvector.add(startCoord, [xDiff, yDiff]);\n        const variables = _.clone(this.state.variables);\n        variables[\"x_\" + options.startSubscript] = startCoord[0];\n        variables[\"y_\" + options.startSubscript] = startCoord[1];\n        variables[\"x_\" + options.endSubscript] = endCoord[0];\n        variables[\"y_\" + options.endSubscript] = endCoord[1];\n        this.setState({variables: variables});\n        this.props.trackInteraction();\n    };\n\n    _eval: (arg1: any, arg2: any) => number = (expression, variables) => {\n        const func = KAScompile(expression, {functions: this.state.functions});\n        const compiledVars = _.extend({}, this.state.variables, variables);\n        _.each(_.keys(compiledVars), (name) => {\n            if (_.isString(compiledVars[name])) {\n                const func = KAScompile(compiledVars[name], {\n                    functions: this.state.functions,\n                });\n                compiledVars[name] = function (x: any) {\n                    return func(\n                        _.extend({}, compiledVars, {\n                            x: x,\n                        }),\n                    );\n                };\n            }\n        });\n        // Default to 0 if the expression couldn't be parsed\n        return func(compiledVars) || 0;\n    };\n\n    // Return an array of all the variables in an expression\n    _extractVars: (arg1: any) => ReadonlyArray<any> = (expr) => {\n        if (expr == null) {\n            return [];\n        }\n        let vars: Array<any> = [];\n        _.each(\n            expr.args(),\n            function (arg) {\n                if (arg && arg.constructor.name === \"Expr\") {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    vars = vars.concat(this._extractVars(arg));\n                }\n            },\n            this,\n        );\n\n        if (expr.name() === \"Var\") {\n            vars.push(expr.prettyPrint());\n        }\n        return vars;\n    };\n\n    change: (arg1: any, arg2: any, arg3: any) => any = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    render(): React.ReactNode {\n        const range = this.props.graph.range;\n        let labels = this.props.graph.labels;\n        if (this.props.graph.markings === \"graph\") {\n            // Content creators may need to explicitly add the dollar signs so\n            // the strings are picked up by our translation tools. However,\n            // these math annotations are redundant because we already render\n            // all graph labels in math mode. For example, a label value of\n            // `$\\text{Dollars}$` will be translatable, but we only want to\n            // pass the string `\\text{Dollars}` to the Graph widget.\n            labels = this.props.graph.labels.map((label) =>\n                label.startsWith(\"$\") && label.endsWith(\"$\")\n                    ? label.slice(1, -1)\n                    : label,\n            );\n        }\n        return (\n            <Graphie\n                box={this.props.graph.box}\n                range={this.props.graph.range}\n                options={this.props.graph}\n                setup={this._setupGraphie}\n                setDrawingAreaAvailable={\n                    this.props.apiOptions.setDrawingAreaAvailable\n                }\n            >\n                {this.props.graph.markings === \"graph\" && (\n                    <Label\n                        coord={[0, range[1][1]]}\n                        text={labels[1]}\n                        direction=\"above\"\n                    />\n                )}\n                {this.props.graph.markings === \"graph\" && (\n                    <Label\n                        coord={[range[0][1], 0]}\n                        text={labels[0]}\n                        direction=\"right\"\n                    />\n                )}\n                {_.map(\n                    this.props.elements,\n                    function (element, n) {\n                        if (element.type === \"point\") {\n                            return (\n                                <Point\n                                    key={element.key}\n                                    coord={[\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(element.options.coordX),\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(element.options.coordY),\n                                    ]}\n                                    color={element.options.color}\n                                />\n                            );\n                        }\n                        if (element.type === \"line\") {\n                            const start = [\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(element.options.startX),\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(element.options.startY),\n                            ];\n                            const end = [\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(element.options.endX),\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(element.options.endY),\n                            ];\n                            return (\n                                <Line\n                                    key={element.key}\n                                    start={start}\n                                    end={end}\n                                    style={{\n                                        stroke: element.options.color,\n                                        strokeWidth:\n                                            element.options.strokeWidth,\n                                        strokeDasharray:\n                                            element.options.strokeDasharray,\n                                        arrows: element.options.arrows,\n                                    }}\n                                />\n                            );\n                        }\n                        if (element.type === \"movable-point\") {\n                            // TODO(eater): Would be nice if the constraint\n                            // system were more flexible.\n                            const constraints = [\n                                (coord: any) => {\n                                    const coordX = Math.max(\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintXMin,\n                                        ),\n                                        Math.min(\n                                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                            this._eval(\n                                                element.options.constraintXMax,\n                                            ),\n                                            coord[0],\n                                        ),\n                                    );\n                                    const coordY = Math.max(\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintYMin,\n                                        ),\n                                        Math.min(\n                                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                            this._eval(\n                                                element.options.constraintYMax,\n                                            ),\n                                            coord[1],\n                                        ),\n                                    );\n                                    return [coordX, coordY];\n                                },\n                            ];\n                            if (element.options.constraint === \"snap\") {\n                                constraints.push(\n                                    MovablePoint.constraints.snap(\n                                        element.options.snap,\n                                    ),\n                                );\n                            } else if (element.options.constraint === \"x\") {\n                                constraints.push((coord) => {\n                                    return [\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintFn,\n                                            {y: coord[1]},\n                                        ),\n                                        coord[1],\n                                    ];\n                                });\n                            } else if (element.options.constraint === \"y\") {\n                                constraints.push((coord) => {\n                                    return [\n                                        coord[0],\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintFn,\n                                            {x: coord[0]},\n                                        ),\n                                    ];\n                                });\n                            }\n\n                            // TODO(eater): foo_[xyz] are hacky non-props to\n                            // get the component to update when constraints\n                            // change\n                            return (\n                                <MovablePoint\n                                    key={element.key}\n                                    coord={[\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this.state.variables[\n                                            \"x_\" + element.options.varSubscript\n                                        ],\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this.state.variables[\n                                            \"y_\" + element.options.varSubscript\n                                        ],\n                                    ]}\n                                    constraints={constraints}\n                                    foo_x={element.options.constraint}\n                                    foo_y={element.options.constraintFn}\n                                    foo_z={element.options.snap}\n                                    onMove={_.partial(\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._updatePointLocation,\n                                        element.options.varSubscript,\n                                    )}\n                                />\n                            );\n                        }\n                        if (element.type === \"movable-line\") {\n                            // TODO(eater): Would be nice if the constraint\n                            // system were more flexible.\n                            // TODO(eater): Don't duplicate this code from\n                            // movable-point above\n                            const constraints = [\n                                (coord: any) => {\n                                    const coordX = Math.max(\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintXMin,\n                                        ),\n                                        Math.min(\n                                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                            this._eval(\n                                                element.options.constraintXMax,\n                                            ),\n                                            coord[0],\n                                        ),\n                                    );\n                                    const coordY = Math.max(\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintYMin,\n                                        ),\n                                        Math.min(\n                                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                            this._eval(\n                                                element.options.constraintYMax,\n                                            ),\n                                            coord[1],\n                                        ),\n                                    );\n                                    return [coordX, coordY];\n                                },\n                            ];\n                            if (element.options.constraint === \"snap\") {\n                                constraints.push(\n                                    MovablePoint.constraints.snap(\n                                        element.options.snap,\n                                    ),\n                                );\n                            } else if (element.options.constraint === \"x\") {\n                                constraints.push((coord) => {\n                                    return [\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintFn,\n                                            {y: coord[1]},\n                                        ),\n                                        coord[1],\n                                    ];\n                                });\n                            } else if (element.options.constraint === \"y\") {\n                                constraints.push((coord) => {\n                                    return [\n                                        coord[0],\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(\n                                            element.options.constraintFn,\n                                            {x: coord[0]},\n                                        ),\n                                    ];\n                                });\n                            }\n                            const start = [\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.state.variables[\n                                    \"x_\" + element.options.startSubscript\n                                ],\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.state.variables[\n                                    \"y_\" + element.options.startSubscript\n                                ],\n                            ];\n                            const end = [\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.state.variables[\n                                    \"x_\" + element.options.endSubscript\n                                ],\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.state.variables[\n                                    \"y_\" + element.options.endSubscript\n                                ],\n                            ];\n                            return (\n                                <MovableLine\n                                    key={element.key}\n                                    constraints={constraints}\n                                    // eslint-disable-next-line react/jsx-no-bind\n                                    onMove={_.bind(\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._updateLineLocation,\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this,\n                                        element.options,\n                                    )}\n                                    foo_x={element.options.constraint}\n                                    foo_y={element.options.constraintFn}\n                                    foo_z={element.options.snap}\n                                >\n                                    <MovablePoint\n                                        coord={start}\n                                        static={true}\n                                        normalStyle={{\n                                            stroke: \"none\",\n                                            fill: \"none\",\n                                        }}\n                                    />\n                                    <MovablePoint\n                                        coord={end}\n                                        static={true}\n                                        normalStyle={{\n                                            stroke: \"none\",\n                                            fill: \"none\",\n                                        }}\n                                    />\n                                </MovableLine>\n                            );\n                        }\n                        if (element.type === \"function\") {\n                            const fn = (x: any) => {\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                return this._eval(element.options.value, {\n                                    x: x,\n                                });\n                            };\n                            // find all the variables referenced by this\n                            // function\n                            const vars = _.without(\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._extractVars(\n                                    // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n                                    KASparse(element.options.value).expr,\n                                ),\n                                \"x\",\n                            );\n                            // and find their values, so we redraw if any\n                            // change\n                            const varValues = _.object(\n                                vars,\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                _.map(vars, (v) => this.state.variables[v]),\n                            );\n\n                            const range = [\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(\n                                    element.options.rangeMin,\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    this.state.variables,\n                                ),\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(\n                                    element.options.rangeMax,\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    this.state.variables,\n                                ),\n                            ];\n\n                            return (\n                                <Plot\n                                    key={element.key}\n                                    fn={fn}\n                                    foo_fn={element.options.value}\n                                    foo_varvalues={varValues}\n                                    range={range}\n                                    style={{\n                                        stroke: element.options.color,\n                                        strokeWidth:\n                                            element.options.strokeWidth,\n                                        strokeDasharray:\n                                            element.options.strokeDasharray,\n                                        plotPoints: 100, // TODO(eater): why\n                                        // so slow?\n                                    }}\n                                />\n                            );\n                        }\n                        if (element.type === \"parametric\") {\n                            const fn = (t: any) => {\n                                return [\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    this._eval(element.options.x, {t: t}),\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    this._eval(element.options.y, {t: t}),\n                                ];\n                            };\n                            // find all the variables referenced by this\n                            // function\n                            const vars = _.without(\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._extractVars(\n                                    // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n                                    KASparse(element.options.x).expr,\n                                ).concat(\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    this._extractVars(\n                                        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n                                        KASparse(element.options.y).expr,\n                                    ),\n                                ),\n                                \"t\",\n                            );\n                            // and find their values, so we redraw if any change\n                            const varValues = _.object(\n                                vars,\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                _.map(vars, (v) => this.state.variables[v]),\n                            );\n\n                            const range = [\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(\n                                    element.options.rangeMin,\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    this.state.variables,\n                                ),\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(\n                                    element.options.rangeMax,\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    this.state.variables,\n                                ),\n                            ];\n\n                            return (\n                                <PlotParametric\n                                    key={element.key}\n                                    fn={fn}\n                                    foo_fnx={element.options.x}\n                                    foo_fny={element.options.y}\n                                    foo_varvalues={varValues}\n                                    range={range}\n                                    style={{\n                                        stroke: element.options.color,\n                                        strokeWidth:\n                                            element.options.strokeWidth,\n                                        strokeDasharray:\n                                            element.options.strokeDasharray,\n                                        plotPoints: 100, // TODO(eater): why\n                                        // so slow?\n                                    }}\n                                />\n                            );\n                        }\n                        if (element.type === \"label\") {\n                            const coord = [\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(element.options.coordX),\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this._eval(element.options.coordY),\n                            ];\n                            return (\n                                <Label\n                                    key={n + 1}\n                                    coord={coord}\n                                    text={unescapeMathMode(\n                                        element.options.label,\n                                    )}\n                                    style={{\n                                        color: element.options.color,\n                                    }}\n                                />\n                            );\n                        }\n                        if (element.type === \"rectangle\") {\n                            return (\n                                <Rect\n                                    key={n + 1}\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    x={this._eval(element.options.coordX)}\n                                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                    y={this._eval(element.options.coordY)}\n                                    width={_.max([\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(element.options.width),\n                                        0,\n                                    ])}\n                                    height={_.max([\n                                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                        this._eval(element.options.height),\n                                        0,\n                                    ])}\n                                    style={{\n                                        stroke: \"none\",\n                                        fill: element.options.color,\n                                    }}\n                                />\n                            );\n                        }\n                    },\n                    this,\n                )}\n            </Graphie>\n        );\n    }\n\n    getUserInput: () => any = () => {\n        // TODO(eater): Perhaps we want to be able to record the state of the\n        // user's interaction. Unfortunately sending all the props will\n        // probably make the attempt payload too large. So for now, don't send\n        // anything.\n        return {};\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        return Interaction.validate(this.getUserInput(), rubric);\n    };\n\n    static validate(state: any, rubric: any): PerseusScore {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n}\n\nconst _getInitialVariables: (\n    arg1: ReadonlyArray<PerseusInteractionElement>,\n) => any = (elements) => {\n    const variables: Record<string, any> = {};\n    // TODO(eater): look at all this copypasta! refactor this!\n    _.each(_.where(elements, {type: \"movable-point\"}), (element) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'varSubscript' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const subscript = element.options.varSubscript;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1. | TS2339 - Property 'startX' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const startXExpr = KASparse(element.options.startX || \"0\").expr;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1. | TS2339 - Property 'startY' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const startYExpr = KASparse(element.options.startY || \"0\").expr;\n        let startX = 0;\n        let startY = 0;\n        if (startXExpr) {\n            startX = startXExpr.eval({}) || 0;\n        }\n        if (startYExpr) {\n            startY = startYExpr.eval({}) || 0;\n        }\n        variables[\"x_\" + subscript] = startX;\n        variables[\"y_\" + subscript] = startY;\n    });\n    _.each(_.where(elements, {type: \"movable-line\"}), (element) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'startSubscript' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const startSubscript = element.options.startSubscript;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'endSubscript' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const endSubscript = element.options.endSubscript;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1. | TS2339 - Property 'startX' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const startXExpr = KASparse(element.options.startX || \"0\").expr;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1. | TS2339 - Property 'startY' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const startYExpr = KASparse(element.options.startY || \"0\").expr;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1. | TS2339 - Property 'endX' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const endXExpr = KASparse(element.options.endX || \"0\").expr;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1. | TS2339 - Property 'endY' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        const endYExpr = KASparse(element.options.endY || \"0\").expr;\n        let startX = 0;\n        let startY = 0;\n        let endX = 0;\n        let endY = 0;\n        if (startXExpr) {\n            startX = startXExpr.eval({}) || 0;\n        }\n        if (startYExpr) {\n            startY = startYExpr.eval({}) || 0;\n        }\n        if (endXExpr) {\n            endX = endXExpr.eval({}) || 0;\n        }\n        if (endYExpr) {\n            endY = endYExpr.eval({}) || 0;\n        }\n        variables[\"x_\" + startSubscript] = startX;\n        variables[\"y_\" + startSubscript] = startY;\n        variables[\"x_\" + endSubscript] = endX;\n        variables[\"y_\" + endSubscript] = endY;\n    });\n    _.each(_.where(elements, {type: \"function\"}), (element) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'funcName' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'. | TS2339 - Property 'value' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        variables[element.options.funcName] = element.options.value;\n    });\n    return variables;\n};\n\nconst _getInitialFunctions: (\n    arg1: ReadonlyArray<PerseusInteractionElement>,\n) => ReadonlyArray<string> = (elements) => {\n    return _.map(\n        _.where(elements, {type: \"function\"}),\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'funcName' does not exist on type 'PerseusInteractionFunctionElementOptions | PerseusInteractionLabelElementOptions | ... 5 more ... | PerseusInteractionRectangleElementOptions'.\n        (element) => element.options.funcName,\n    );\n};\n\nexport default {\n    name: \"interaction\",\n    displayName: \"Interaction\",\n    widget: Interaction,\n    transform: _.identity,\n    hidden: true,\n} as WidgetExports<typeof Interaction>;\n","/* eslint-disable react/no-unsafe */\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport {Coord} from \"../interactive2/types\";\nimport {PerseusImageBackground} from \"../perseus-types\";\nimport {interactiveSizes} from \"../styles/constants\";\nimport Util from \"../util\";\nimport GraphUtils from \"../util/graph-utils\";\n\nimport SvgImage from \"./svg-image\";\n\nconst defaultBackgroundImage = {\n    url: null,\n};\n\n/* Style objects */\nconst defaultInstructionsStyle = {\n    fontStyle: \"italic\",\n    fontWeight: \"bold\",\n    fontSize: \"32px\",\n    width: \"100%\",\n    height: \"100%\",\n    textAlign: \"center\",\n    backgroundColor: \"white\",\n    position: \"absolute\",\n    zIndex: 1,\n    transition: \"opacity .25s ease-in-out\",\n} as const;\n\nconst instructionsTextStyle = {\n    position: \"relative\",\n    top: \"25%\",\n} as const;\n\nfunction numSteps(range: any, step: any) {\n    return Math.floor((range[1] - range[0]) / step);\n}\n\ntype Props = {\n    box: Readonly<[number, number]>;\n    labels: ReadonlyArray<string>;\n    range: Readonly<[Coord, Coord]>;\n    step: Readonly<[number, number]>;\n    gridStep: Readonly<[number, number]>;\n    snapStep: Readonly<[number, number]>;\n    markings: string;\n    backgroundImage: PerseusImageBackground;\n    showProtractor: boolean;\n    showRuler: boolean;\n    rulerLabel: string;\n    rulerTicks: number;\n    instructions?: string;\n    isMobile: boolean;\n\n    onGraphieUpdated?: (graphie: any) => void;\n    onClick?: (Coord) => void;\n    onMouseDown?: (Coord) => void;\n    onMouseUp?: (Coord) => void;\n    onMouseMove?: (Coord) => void;\n    setDrawingAreaAvailable?: (boolean) => void;\n};\n\ntype DefaultProps = {\n    labels: Props[\"labels\"];\n    range: Props[\"range\"];\n    step: Props[\"step\"];\n    gridStep: Props[\"gridStep\"];\n    snapStep: Props[\"snapStep\"];\n    markings: Props[\"markings\"];\n    backgroundImage: Props[\"backgroundImage\"];\n    showProtractor: Props[\"showProtractor\"];\n    showRuler: Props[\"showRuler\"];\n    rulerLabel: Props[\"rulerLabel\"];\n    rulerTicks: Props[\"rulerTicks\"];\n    isMobile: Props[\"isMobile\"];\n};\n\nclass Graph extends React.Component<Props> {\n    protractor: any;\n    ruler: any;\n    _graphie: any;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_hasSetupGraphieThisUpdate' has no initializer and is not definitely assigned in the constructor.\n    _hasSetupGraphieThisUpdate: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_shouldSetupGraphie' has no initializer and is not definitely assigned in the constructor.\n    _shouldSetupGraphie: boolean;\n\n    static defaultProps: DefaultProps = {\n        labels: [\"x\", \"y\"],\n        range: [\n            [-10, 10],\n            [-10, 10],\n        ],\n        step: [1, 1],\n        gridStep: [1, 1],\n        snapStep: [0.5, 0.5],\n        markings: \"graph\",\n        backgroundImage: defaultBackgroundImage,\n        showProtractor: false,\n        showRuler: false,\n        rulerLabel: \"\",\n        rulerTicks: 10,\n        isMobile: false,\n    };\n\n    componentDidMount() {\n        this._setupGraphie(true);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: any) {\n        const potentialChanges = [\n            \"labels\",\n            \"range\",\n            \"step\",\n            \"markings\",\n            \"showProtractor\",\n            \"showRuler\",\n            \"rulerLabel\",\n            \"rulerTicks\",\n            \"gridStep\",\n            \"snapStep\",\n        ];\n        const self = this;\n        _.each(potentialChanges, function (prop) {\n            if (!_.isEqual(self.props[prop], nextProps[prop])) {\n                self._shouldSetupGraphie = true;\n            }\n        });\n    }\n\n    componentDidUpdate() {\n        // Only setupGraphie once per componentDidUpdate().\n        // See explanation in setupGraphie().\n        this._hasSetupGraphieThisUpdate = false;\n        if (this._shouldSetupGraphie) {\n            this._setupGraphie(false);\n            this._shouldSetupGraphie = false;\n        }\n    }\n\n    /* Reset the graphie canvas to its initial state\n     *\n     * Use when re-rendering the parent component and you need a blank\n     * graphie.\n     */\n    reset: () => void = () => {\n        this._setupGraphie(false);\n    };\n\n    graphie: () => any = () => {\n        return this._graphie;\n    };\n\n    pointsFromNormalized: (arg1: any, arg2: any) => any = (\n        coordsList,\n        noSnap,\n    ) => {\n        const self = this;\n        return _.map(coordsList, function (coords) {\n            return _.map(coords, function (coord, i) {\n                const range = self.props.range[i];\n                if (noSnap) {\n                    return range[0] + (range[1] - range[0]) * coord;\n                }\n                const step = self.props.step[i];\n                const nSteps = numSteps(range, step);\n                const tick = Math.round(coord * nSteps);\n                return range[0] + step * tick;\n            });\n        });\n    };\n\n    _setupGraphie: (arg1: any) => void = (initialMount) => {\n        // Only setupGraphie once per componentDidUpdate().\n        // This prevents this component from rendering graphie\n        // and then immediately re-render graphie because its\n        // parent component asked it to. This will happen when\n        // props on the parent and props on this component both\n        // require graphie to be re-rendered.\n        if (this._hasSetupGraphieThisUpdate) {\n            return;\n        }\n\n        // eslint-disable-next-line react/no-string-refs\n        const graphieDiv = ReactDOM.findDOMNode(this.refs.graphieDiv);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'empty' does not exist on type 'JQueryStatic'.\n        $(graphieDiv).empty();\n\n        // Content creators may need to explicitly add the dollar signs so the\n        // strings are picked up by our translation tools. However, these math\n        // annotations are redundant because we already render all graph labels\n        // in math mode. For example, a label value of `$\\text{Dollars}$` will\n        // be translatable, but we only want to pass the string\n        // `\\text{Dollars}` to the Graph widget.\n        const labels = this.props.labels.map((label) =>\n            Util.unescapeMathMode(label),\n        );\n        const range = this.props.range;\n        const graphie = (this._graphie = GraphUtils.createGraphie(graphieDiv));\n\n        const gridConfig = this._getGridConfig();\n        graphie.snap = this.props.snapStep;\n\n        if (this.props.markings === \"graph\") {\n            graphie.graphInit({\n                range: range,\n                scale: _.pluck(gridConfig, \"scale\"),\n                axisArrows: \"<->\",\n                labelFormat: function (s) {\n                    return \"\\\\small{\" + s + \"}\";\n                },\n                gridStep: this.props.gridStep,\n                tickStep: _.pluck(gridConfig, \"tickStep\"),\n                labelStep: 1,\n                unityLabels: _.pluck(gridConfig, \"unityLabel\"),\n                isMobile: this.props.isMobile,\n            });\n            graphie.label(\n                [0, range[1][1]],\n                labels[1],\n                this.props.isMobile ? \"below right\" : \"above\",\n            );\n            graphie.label(\n                [range[0][1], 0],\n                labels[0],\n                this.props.isMobile ? \"above left\" : \"right\",\n            );\n        } else if (this.props.markings === \"grid\") {\n            graphie.graphInit({\n                range: range,\n                scale: _.pluck(gridConfig, \"scale\"),\n                gridStep: this.props.gridStep,\n                axes: false,\n                ticks: false,\n                labels: false,\n                isMobile: this.props.isMobile,\n            });\n        } else if (this.props.markings === \"none\") {\n            graphie.init({\n                range: range,\n                scale: _.pluck(gridConfig, \"scale\"),\n                isMobile: this.props.isMobile,\n            });\n        }\n\n        // Add instructions just before mouse layer\n        const visible = 0.5;\n        const invisible = 0.0;\n        let $instructionsWrapper;\n        if (this.props.instructions) {\n            $instructionsWrapper = $(\"<div/>\");\n            _.each(defaultInstructionsStyle, function (value, key) {\n                $instructionsWrapper.css(key, value);\n            });\n            $instructionsWrapper.css(\"opacity\", visible);\n\n            const $instructions = $(\"<span/>\", {\n                text: this.props.instructions,\n            });\n            _.each(instructionsTextStyle, function (value, key) {\n                $instructions.css(key, value);\n            });\n\n            $instructionsWrapper.append($instructions);\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'append' does not exist on type 'JQueryStatic'.\n            $(graphieDiv).append($instructionsWrapper);\n        } else {\n            $instructionsWrapper = undefined;\n        }\n\n        // Add some handlers for instructions text (if necessary)\n        const onMouseDown =\n            $instructionsWrapper || this.props.onMouseDown\n                ? _.bind(function (coord) {\n                      if ($instructionsWrapper) {\n                          $instructionsWrapper.remove();\n                          $instructionsWrapper = null;\n                      }\n                      // eslint-disable-next-line @babel/no-invalid-this\n                      // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                      // eslint-disable-next-line @babel/no-invalid-this\n                      this.props.onMouseDown(coord);\n                  }, this)\n                : null;\n\n        const onMouseOver = $instructionsWrapper\n            ? function () {\n                  $instructionsWrapper &&\n                      $instructionsWrapper.css(\"opacity\", invisible);\n              }\n            : null;\n\n        const onMouseOut = $instructionsWrapper\n            ? function () {\n                  $instructionsWrapper &&\n                      $instructionsWrapper.css(\"opacity\", visible);\n              }\n            : null;\n        /* eslint-enable indent */\n\n        graphie.addMouseLayer({\n            onClick: this.props.onClick,\n            onMouseDown: onMouseDown,\n            onMouseOver: onMouseOver,\n            onMouseOut: onMouseOut,\n            onMouseUp: this.props.onMouseUp,\n            onMouseMove: this.props.onMouseMove,\n            allowScratchpad: true,\n            setDrawingAreaAvailable: this.props.setDrawingAreaAvailable,\n        });\n\n        this._updateProtractor();\n        this._updateRuler();\n\n        // We set this flag before jumping into our callback\n        // to avoid recursing if our callback calls reset() itself\n        this._hasSetupGraphieThisUpdate = true;\n        if (!initialMount && this.props.onGraphieUpdated) {\n            // Calling a parent callback in componentDidMount is bad and\n            // results in hard-to-reason-about lifecycle problems (esp. with\n            // refs), so we do it only on update and rely on the parent to\n            // query for the graphie object on initial mount\n            this.props.onGraphieUpdated(graphie);\n        }\n    };\n\n    _getGridConfig: () => any = () => {\n        const self = this;\n        return _.map(self.props.step, function (step, i) {\n            return Util.gridDimensionConfig(\n                step,\n                self.props.range[i],\n                self.props.box[i],\n                self.props.gridStep[i],\n            );\n        });\n    };\n\n    _updateProtractor: () => void = () => {\n        if (this.protractor) {\n            this.protractor.remove();\n        }\n\n        if (this.props.showProtractor) {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n            const coord = this.pointsFromNormalized([[0.5, 0.05]])[0];\n            this.protractor = this._graphie.protractor(coord);\n        }\n    };\n\n    _updateRuler: () => void = () => {\n        if (this.ruler) {\n            this.ruler.remove();\n        }\n\n        if (this.props.showRuler) {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n            const coord = this.pointsFromNormalized([[0.5, 0.25]])[0];\n            const extent =\n                this._graphie.range[0][1] - this._graphie.range[0][0];\n            this.ruler = this._graphie.ruler({\n                center: coord,\n                label: this.props.rulerLabel,\n                pixelsPerUnit: this._graphie.scale[0],\n                ticksPerUnit: this.props.rulerTicks,\n                units: Math.round(0.8 * extent),\n            });\n        }\n    };\n\n    toJSON: () => any = () => {\n        return _.pick(\n            this.props,\n            \"range\",\n            \"step\",\n            \"markings\",\n            \"labels\",\n            \"backgroundImage\",\n            \"showProtractor\",\n            \"showRuler\",\n            \"rulerLabel\",\n            \"rulerTicks\",\n            \"gridStep\",\n            \"snapStep\",\n        );\n    };\n\n    render(): React.ReactNode {\n        let image;\n        const imageData = this.props.backgroundImage;\n        if (imageData.url) {\n            const scale = this.props.box[0] / interactiveSizes.defaultBoxSize;\n            image = (\n                // @ts-expect-error [FEI-5003] - TS2741 - Property 'alt' is missing in type '{ src: any; width: any; height: any; scale: number; responsive: false; }' but required in type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"children\" | \"height\" | \"width\" | \"title\" | \"alt\" | \"trackInteraction\" | \"preloader\" | \"allowFullBleed\" | \"extraGraphie\" | \"overrideAriaHidden\">'.\n                <SvgImage\n                    src={imageData.url}\n                    width={imageData.width}\n                    height={imageData.height}\n                    scale={scale}\n                    responsive={false}\n                />\n            );\n        } else {\n            image = null;\n        }\n\n        return (\n            <div\n                className=\"graphie-container above-scratchpad\"\n                style={{\n                    width: this.props.box[0],\n                    height: this.props.box[1],\n                }}\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'onMouseOut' does not exist on type 'Graph'.\n                onMouseOut={this.onMouseOut}\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'onMouseOver' does not exist on type 'Graph'.\n                onMouseOver={this.onMouseOver}\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'onClick' does not exist on type 'Graph'.\n                onClick={this.onClick}\n            >\n                {image}\n                {/* eslint-disable-next-line react/no-string-refs */}\n                <div className=\"graphie\" ref=\"graphieDiv\" />\n            </div>\n        );\n    }\n}\n\nexport default Graph;\n","/* eslint-disable @babel/no-invalid-this, react/no-unsafe, react/sort-comp */\nimport {number as knumber, point as kpoint} from \"@khanacademy/kmath\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport $ from \"jquery\";\nimport debounce from \"lodash.debounce\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport Graph from \"../components/graph\";\nimport Interactive2 from \"../interactive2\";\nimport WrappedLine from \"../interactive2/wrapped-line\";\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\nimport Util from \"../util\";\nimport KhanColors from \"../util/colors\";\nimport GraphUtils from \"../util/graph-utils\";\nimport {getInteractiveBoxFromSizeClass} from \"../util/sizing-utils\";\n\nimport type {Coord, Line} from \"../interactive2/types\";\nimport type {\n    PerseusGraphType,\n    PerseusGraphTypeAngle,\n    PerseusGraphTypePoint,\n    PerseusGraphTypePolygon,\n    PerseusGraphTypeSegment,\n    PerseusInteractiveGraphWidgetOptions,\n} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\ntype Range = ReadonlyArray<number>; // This should really be a readonly tuple of [number, number]\ntype SineCoefficient = [\n    /* amplitude */ number,\n    /* angularFrequency */ number,\n    /* phase */ number,\n    /* verticalOffset */ number,\n];\ntype QuadraticCoefficient = [/* a */ number, /* b */ number, /* c */ number];\n\nconst {DeprecationMixin} = Util;\n\nconst TRASH_ICON_URI =\n    \"https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png\";\n\nconst defaultBackgroundImage = {\n    url: null,\n};\n\nconst eq = Util.eq;\nconst deepEq = Util.deepEq;\n\nconst UNLIMITED = \"unlimited\" as const;\n\n// Sample background image:\n// https://ka-perseus-graphie.s3.amazonaws.com/29c1b0fcd17fe63df0f148fe357044d5d5c7d0bb.png\n\nfunction ccw(a: Coord, b: Coord, c: Coord): number {\n    return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]);\n}\n\nfunction collinear(a: Coord, b: Coord, c: Coord): boolean {\n    return eq(ccw(a, b, c), 0);\n}\n\nfunction sign(val: number): 0 | 1 | -1 {\n    if (eq(val, 0)) {\n        return 0;\n    }\n    return val > 0 ? 1 : -1;\n}\n\n// default to defaultValue if actual is null or undefined\nfunction defaultVal<T>(actual: T | null | undefined, defaultValue: T): T {\n    return actual == null ? defaultValue : actual;\n}\n\n// Given rect bounding points A and B, whether point C is inside the rect\nfunction pointInRect(a: Coord, b: Coord, c: Coord): boolean {\n    return (\n        c[0] <= Math.max(a[0], b[0]) &&\n        c[0] >= Math.min(a[0], b[0]) &&\n        c[1] <= Math.max(a[1], b[1]) &&\n        c[1] >= Math.min(a[1], b[1])\n    );\n}\n\n// Whether line segment AB intersects line segment CD\n// http://www.geeksforgeeks.org/check-if-two-given-line-segments-intersect/\nfunction intersects(ab: Line, cd: Line): boolean {\n    const triplets = [\n        [ab[0], ab[1], cd[0]],\n        [ab[0], ab[1], cd[1]],\n        [cd[0], cd[1], ab[0]],\n        [cd[0], cd[1], ab[1]],\n    ];\n\n    const orientations = _.map(triplets, function (triplet) {\n        // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n        return sign(ccw(...triplet));\n    });\n\n    if (\n        orientations[0] !== orientations[1] &&\n        orientations[2] !== orientations[3]\n    ) {\n        return true;\n    }\n\n    for (let i = 0; i < 4; i++) {\n        // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n        if (orientations[i] === 0 && pointInRect(...triplets[i])) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction vector(a, b) {\n    return _.map(_.zip(a, b), function (pair) {\n        return pair[0] - pair[1];\n    });\n}\n\nfunction magnitude(v: ReadonlyArray<Coord>): number {\n    return Math.sqrt(\n        _.reduce(\n            v,\n            function (memo, el) {\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Coord' is not assignable to parameter of type 'number'.\n                return memo + Math.pow(el, 2);\n            },\n            0,\n        ),\n    );\n}\n\nfunction dotProduct(a: Coord, b: Coord): number {\n    return _.reduce(\n        _.zip(a, b),\n        function (memo, pair) {\n            return memo + pair[0] * pair[1];\n        },\n        0,\n    );\n}\n\nfunction sideLengths(coords: ReadonlyArray<Coord>): ReadonlyArray<number> {\n    const segments = _.zip(coords, rotate(coords));\n    return segments.map(function (segment) {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type 'readonly Coord[]'. | TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n        return magnitude(vector(...segment));\n    });\n}\n\n// Based on http://math.stackexchange.com/a/151149\nfunction angleMeasures(coords: ReadonlyArray<Coord>): ReadonlyArray<number> {\n    const triplets = _.zip(rotate(coords, -1), coords, rotate(coords, 1));\n\n    const offsets = _.map(triplets, function (triplet) {\n        const p = vector(triplet[1], triplet[0]);\n        const q = vector(triplet[2], triplet[1]);\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type 'Coord'. | TS2345 - Argument of type 'number[]' is not assignable to parameter of type 'readonly Coord[]'. | TS2345 - Argument of type 'number[]' is not assignable to parameter of type 'readonly Coord[]'.\n        const raw = Math.acos(dotProduct(p, q) / (magnitude(p) * magnitude(q)));\n        // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n        return sign(ccw(...triplet)) > 0 ? raw : -raw;\n    });\n\n    const sum = _.reduce(\n        offsets,\n        function (memo, arg) {\n            return memo + arg;\n        },\n        0,\n    );\n\n    return _.map(offsets, function (offset) {\n        return sum > 0 ? Math.PI - offset : Math.PI + offset;\n    });\n}\n\n// Whether two polygons are similar (or if specified, congruent)\nfunction similar(\n    coords1: ReadonlyArray<Coord>,\n    coords2: ReadonlyArray<Coord>,\n    tolerance: number,\n): boolean {\n    if (coords1.length !== coords2.length) {\n        return false;\n    }\n\n    const n = coords1.length;\n\n    const angles1 = angleMeasures(coords1);\n    const angles2 = angleMeasures(coords2);\n\n    const sides1 = sideLengths(coords1);\n    const sides2 = sideLengths(coords2);\n\n    for (let i = 0; i < 2 * n; i++) {\n        let angles = angles2.slice();\n        let sides = sides2.slice();\n\n        // Reverse angles and sides to allow matching reflected polygons\n        if (i >= n) {\n            angles.reverse();\n            sides.reverse();\n            // Since sides are calculated from two coordinates,\n            // simply reversing results in an off by one error\n            // @ts-expect-error [FEI-5003] - TS4104 - The type 'readonly number[]' is 'readonly' and cannot be assigned to the mutable type 'number[]'.\n            sides = rotate(sides, 1);\n        }\n\n        // @ts-expect-error [FEI-5003] - TS4104 - The type 'readonly number[]' is 'readonly' and cannot be assigned to the mutable type 'number[]'.\n        angles = rotate(angles, i);\n        // @ts-expect-error [FEI-5003] - TS4104 - The type 'readonly number[]' is 'readonly' and cannot be assigned to the mutable type 'number[]'.\n        sides = rotate(sides, i);\n\n        if (deepEq(angles1, angles)) {\n            const sidePairs = _.zip(sides1, sides);\n\n            const factors = _.map(sidePairs, function (pair) {\n                return pair[0] / pair[1];\n            });\n\n            const same = _.all(factors, function (factor) {\n                return eq(factors[0], factor);\n            });\n\n            const congruentEnough = _.all(sidePairs, function (pair) {\n                return knumber.equal(pair[0], pair[1], tolerance);\n            });\n\n            if (same && congruentEnough) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\n// Less than or approximately equal\nfunction leq(a: any, b) {\n    return a < b || eq(a, b);\n}\n\n// Given triangle with sides ABC return angle opposite side C in degrees\nfunction lawOfCosines(a: number, b: number, c: number): number {\n    return (Math.acos((a * a + b * b - c * c) / (2 * a * b)) * 180) / Math.PI;\n}\n\nfunction canonicalSineCoefficients([\n    amplitude,\n    angularFrequency,\n    phase,\n    verticalOffset,\n]: [any, any, any, any]) {\n    // For a curve of the form f(x) = a * Sin(b * x - c) + d,\n    // this function ensures that a, b > 0, and c is its\n    // smallest possible positive value.\n\n    // Guarantee a > 0\n    if (amplitude < 0) {\n        amplitude *= -1;\n        angularFrequency *= -1;\n        phase *= -1;\n    }\n\n    const period = 2 * Math.PI;\n    // Guarantee b > 0\n    if (angularFrequency < 0) {\n        angularFrequency *= -1;\n        phase *= -1;\n        phase += period / 2;\n    }\n\n    // Guarantee c is smallest possible positive value\n    while (phase > 0) {\n        phase -= period;\n    }\n    while (phase < 0) {\n        phase += period;\n    }\n\n    return [amplitude, angularFrequency, phase, verticalOffset];\n}\n\n// e.g. rotate([1, 2, 3]) -> [2, 3, 1]\nfunction rotate<T>(array: ReadonlyArray<T>, n?: number): ReadonlyArray<T> {\n    n = typeof n === \"undefined\" ? 1 : n % array.length;\n    return array.slice(n).concat(array.slice(0, n));\n}\n\nfunction capitalize(str) {\n    return str.replace(/(?:^|-)(.)/g, function (match, letter) {\n        return letter.toUpperCase();\n    });\n}\n\nfunction getLineEquation(first: Coord, second: Coord): string {\n    if (eq(first[0], second[0])) {\n        return \"x = \" + first[0].toFixed(3);\n    }\n    const m = (second[1] - first[1]) / (second[0] - first[0]);\n    const b = first[1] - m * first[0];\n    return \"y = \" + m.toFixed(3) + \"x + \" + b.toFixed(3);\n}\n\n// Stolen from the wikipedia article\n// http://en.wikipedia.org/wiki/Line-line_intersection\nfunction getLineIntersection(\n    // TODO(LP-10725): update these to be 2-tuples\n    firstPoints: ReadonlyArray<Coord>,\n    secondPoints: ReadonlyArray<Coord>,\n): string {\n    const x1 = firstPoints[0][0];\n    const y1 = firstPoints[0][1];\n    const x2 = firstPoints[1][0];\n    const y2 = firstPoints[1][1];\n    const x3 = secondPoints[0][0];\n    const y3 = secondPoints[0][1];\n    const x4 = secondPoints[1][0];\n    const y4 = secondPoints[1][1];\n\n    const determinant = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n    if (Math.abs(determinant) < 1e-9) {\n        return \"Lines are parallel\";\n    }\n    const x =\n        ((x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4)) /\n        determinant;\n    const y =\n        ((x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4)) /\n        determinant;\n    return \"Intersection: (\" + x.toFixed(3) + \", \" + y.toFixed(3) + \")\";\n}\n\nfunction numSteps(range: Range, step: number) {\n    return Math.floor((range[1] - range[0]) / step);\n}\n\nconst deprecatedProps = {\n    showGraph: function (props) {\n        return {markings: props.showGraph ? \"graph\" : \"none\"};\n    },\n} as const;\n\nconst _getShouldShowInstructions: (arg1: Props) => boolean = (props) => {\n    return (\n        _isClickToAddPoints(props) &&\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'. | TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'.\n        (props.graph.coords == null || props.graph.coords.length === 0)\n    );\n};\n\nconst _isClickToAddPoints: (arg1: Props) => boolean = (props) => {\n    return (\n        (props.graph.type === \"point\" && props.graph.numPoints === UNLIMITED) ||\n        (props.graph.type === \"polygon\" && props.graph.numSides === UNLIMITED)\n    );\n};\n\nconst makeInvalidTypeError = (\n    functionName: string,\n    graphType: string,\n): PerseusError => {\n    return new PerseusError(\n        `${functionName} called but current graph type is not a '${graphType}'`,\n        Errors.NotAllowed,\n        {metadata: {graphType}},\n    );\n};\n\ntype RenderProps = PerseusInteractiveGraphWidgetOptions; // There's no transform function in exports\ntype Rubric = PerseusInteractiveGraphWidgetOptions;\ntype Props = WidgetProps<RenderProps, Rubric>;\ntype State = any;\ntype DefaultProps = {\n    labels: Props[\"labels\"];\n    range: Props[\"range\"];\n    step: Props[\"step\"];\n    backgroundImage: Props[\"backgroundImage\"];\n    markings: Props[\"markings\"];\n    showTooltips: Props[\"showTooltips\"];\n    showProtractor: Props[\"showProtractor\"];\n    showRuler: Props[\"showRuler\"];\n    rulerLabel: Props[\"rulerLabel\"];\n    rulerTicks: Props[\"rulerTicks\"];\n    graph: Props[\"graph\"];\n};\n\nclass InteractiveGraph extends React.Component<Props, State> {\n    angle: any | null | undefined;\n    circle: any | null | undefined;\n    graphie: any | null | undefined;\n    horizHairline: any | null | undefined;\n    line: any | null | undefined;\n    lines: ReadonlyArray<ReadonlyArray<Coord>> | null | undefined;\n    parabola: any | null | undefined;\n    pointA: any | null | undefined;\n    pointB: any | null | undefined;\n    pointC: any | null | undefined;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'points' has no initializer and is not definitely assigned in the constructor.\n    points: Array<any>;\n    polygon: any | null | undefined;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'shouldResetGraphie' has no initializer and is not definitely assigned in the constructor.\n    shouldResetGraphie: boolean;\n    sinusoid: any | null | undefined;\n    trashCan: any | null | undefined;\n    vertHairline: any | null | undefined;\n\n    static defaultProps: DefaultProps = {\n        labels: [\"x\", \"y\"],\n        range: [\n            [-10, 10],\n            [-10, 10],\n        ],\n        step: [1, 1],\n        backgroundImage: defaultBackgroundImage,\n        markings: \"graph\",\n        showTooltips: false,\n        showProtractor: false,\n        showRuler: false,\n        rulerLabel: \"\",\n        rulerTicks: 10,\n        graph: {\n            type: \"linear\",\n        },\n    };\n\n    state: State = {\n        shouldShowInstructions: _getShouldShowInstructions(this.props),\n    };\n\n    // TODO(jangmi, CP-3288): Remove usage of `UNSAFE_componentWillMount`\n    UNSAFE_componentWillMount() {\n        DeprecationMixin.UNSAFE_componentWillMount.call(this);\n    }\n\n    componentDidMount() {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type 'ReactInstance'.\n        this.setGraphie(this.refs.graph.graphie());\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        if (this.isClickToAddPoints() !== this.isClickToAddPoints(nextProps)) {\n            this.shouldResetGraphie = true;\n            this.setState({\n                shouldShowInstructions: _getShouldShowInstructions(nextProps),\n            });\n        }\n\n        if (\n            this.props.backgroundImage?.url !==\n                nextProps.backgroundImage?.url ||\n            this.props.backgroundImage !== nextProps.backgroundImage ||\n            this.props.containerSizeClass !== nextProps.containerSizeClass\n        ) {\n            this.shouldResetGraphie = true;\n        }\n    }\n\n    componentDidUpdate(prevProps: Props, prevState: State) {\n        // TODO(jeremy): This feels underspecified. For example, if the props\n        // change the coords of a segment graph, but not the numSegments, we'd\n        // not count that as an update.\n        const oldType = prevProps.graph.type;\n        const newType = this.props.graph.type;\n        if (\n            oldType !== newType ||\n            (prevProps.graph.type === \"angle\" &&\n                this.props.graph.type === \"angle\" &&\n                this.areAngleGraphsEqual(prevProps.graph, this.props.graph)) ||\n            (prevProps.graph.type === \"point\" &&\n                this.props.graph.type === \"point\" &&\n                this.arePointGraphsEqual(prevProps.graph, this.props.graph)) ||\n            (prevProps.graph.type === \"polygon\" &&\n                this.props.graph.type === \"polygon\" &&\n                this.arePolygonGraphsEqual(\n                    prevProps.graph,\n                    this.props.graph,\n                )) ||\n            (prevProps.graph.type === \"segment\" &&\n                this.props.graph.type === \"segment\" &&\n                this.areSegmentGraphsEqual(prevProps.graph, this.props.graph))\n        ) {\n            this[\"remove\" + capitalize(oldType) + \"Controls\"]();\n            this[\"add\" + capitalize(newType) + \"Controls\"]();\n        }\n        if (this.shouldResetGraphie) {\n            this.resetGraphie();\n        }\n    }\n\n    _getShouldShowInstructions: (arg1?: Props | null | undefined) => boolean = (\n        props,\n    ) => {\n        props = props || this.props;\n        return (\n            this.isClickToAddPoints(props) &&\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'. | TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'.\n            (props.graph.coords == null || props.graph.coords.length === 0)\n        );\n    };\n\n    deprecatedProps: any = deprecatedProps;\n\n    setGraphie: (arg1: any) => void = (newGraphie) => {\n        this.graphie = newGraphie;\n        this.setupGraphie();\n    };\n\n    handleAddPointsMouseDown: (arg1: Coord) => void = (coord) => {\n        // This function should only be called when this.isClickToAddPoints()\n        // is true\n        if (!this.isClickToAddPoints()) {\n            throw new PerseusError(\n                \"handleAddPointsClick should not be registered\" +\n                    \"when isClickToAddPoints() is false\",\n                Errors.NotAllowed,\n            );\n        }\n        if (!this.isCoordInTrash(coord)) {\n            let point;\n\n            if (this.props.graph.type === \"point\") {\n                point = this.createPointForPointsType(\n                    coord,\n                    this.points.length,\n                );\n                if (!point.constrain()) {\n                    point.remove();\n                    return;\n                }\n                this.points.push(point);\n\n                // interactive2 allows us to grab the point\n                const idx = this.points.length - 1;\n                this.points[idx].grab(coord);\n\n                this.updateCoordsFromPoints();\n            } else if (this.props.graph.type === \"polygon\") {\n                if (this.polygon?.closed()) {\n                    return;\n                }\n                point = this.createPointForPolygonType(\n                    coord,\n                    this.points.length,\n                );\n                this.points.push(point);\n\n                const idx = this.points.length - 1;\n                this.points[idx].grab(coord);\n\n                // We don't call updateCoordsFromPoints for\n                // polygons, since the polygon won't be\n                // closed yet.\n                this.updatePolygon();\n            }\n\n            this.setState({\n                shouldShowInstructions: false,\n            });\n        }\n    };\n\n    resetGraphie: () => void = () => {\n        this.shouldResetGraphie = false;\n        this.parabola = null;\n        this.sinusoid = null;\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'reset' does not exist on type 'ReactInstance'.\n        this.refs.graph.reset();\n    };\n\n    setupGraphie: () => void = () => {\n        this.setTrashCanVisibility(0);\n        if (this.isClickToAddPoints()) {\n            this.setTrashCanVisibility(0.5);\n        }\n\n        if (this.props.apiOptions.isMobile) {\n            this.horizHairline = new WrappedLine(this.graphie, [0, 0], [0, 0], {\n                normalStyle: {\n                    strokeWidth: 1,\n                },\n            });\n            this.horizHairline.attr({\n                stroke: KhanColors.INTERACTIVE,\n            });\n            this.horizHairline?.hide();\n\n            this.vertHairline = new WrappedLine(this.graphie, [0, 0], [0, 0], {\n                normalStyle: {\n                    strokeWidth: 1,\n                },\n            });\n            this.vertHairline.attr({\n                stroke: KhanColors.INTERACTIVE,\n            });\n            this.vertHairline?.hide();\n        }\n\n        const type = this.props.graph.type;\n        this[\"add\" + capitalize(type) + \"Controls\"]();\n    };\n\n    showHairlines: (arg1: Coord) => void = (point) => {\n        if (this.props.apiOptions.isMobile && this.props.markings !== \"none\") {\n            // Hairlines are already initialized when the graph is loaded, so\n            // here we just move them to the updated location and make them\n            // visible.\n            this.horizHairline?.moveTo(\n                [this.props.range[0][0], point[1]],\n                [this.props.range[0][1], point[1]],\n            );\n\n            this.horizHairline?.show();\n\n            this.vertHairline?.moveTo(\n                [point[0], this.props.range[1][0]],\n                [point[0], this.props.range[1][1]],\n            );\n\n            this.vertHairline?.show();\n        }\n    };\n\n    hideHairlines: () => void = () => {\n        if (this.props.apiOptions.isMobile) {\n            this.horizHairline?.hide();\n            this.vertHairline?.hide();\n        }\n    };\n\n    setTrashCanVisibility: (arg1: number) => void = (opacity) => {\n        const graphie = this.graphie;\n\n        if (knumber.equal(opacity, 0)) {\n            if (this.trashCan) {\n                this.trashCan.remove();\n                this.trashCan = null;\n            }\n        } else if (!this.props.apiOptions.isMobile) {\n            // Only if trash tooltips are not being used, we initialize the old\n            // trash can area.\n            if (!this.trashCan) {\n                this.trashCan = graphie?.raphael?.image(\n                    TRASH_ICON_URI,\n                    graphie.xpixels - 40,\n                    graphie.ypixels - 40,\n                    40,\n                    40,\n                );\n            }\n            this.trashCan?.attr({\n                opacity: opacity,\n            });\n        }\n    };\n\n    isClickToAddPoints: (arg1?: Props | null | undefined) => boolean = (\n        props,\n    ) => {\n        props = props || this.props;\n        return _isClickToAddPoints(props);\n    };\n\n    areAngleGraphsEqual(\n        prevGraph: PerseusGraphTypeAngle,\n        currentGraph: PerseusGraphTypeAngle,\n    ): boolean {\n        return (\n            prevGraph.allowReflexAngles !== currentGraph.allowReflexAngles ||\n            prevGraph.angleOffsetDeg !== currentGraph.angleOffsetDeg ||\n            prevGraph.snapDegrees !== currentGraph.snapDegrees\n        );\n    }\n\n    arePointGraphsEqual(\n        prevGraph: PerseusGraphTypePoint,\n        currentGraph: PerseusGraphTypePoint,\n    ): boolean {\n        return prevGraph.numPoints !== currentGraph.numPoints;\n    }\n\n    arePolygonGraphsEqual(\n        prevGraph: PerseusGraphTypePolygon,\n        currentGraph: PerseusGraphTypePolygon,\n    ): boolean {\n        return (\n            prevGraph.numSides !== currentGraph.numSides ||\n            prevGraph.showAngles !== currentGraph.showAngles ||\n            prevGraph.showSides !== currentGraph.showSides ||\n            prevGraph.snapTo !== currentGraph.snapTo\n        );\n    }\n\n    areSegmentGraphsEqual(\n        prevGraph: PerseusGraphTypeSegment,\n        currentGraph: PerseusGraphTypeSegment,\n    ): boolean {\n        return prevGraph.numSegments !== currentGraph.numSegments;\n    }\n\n    _lineStroke: () => {\n        [\"stroke-width\"]?: number;\n    } = () => {\n        // This should probably use: this.props.apiOptions.isMobile\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'isMobile' does not exist on type 'Readonly<Props> & Readonly<{ children?: ReactNode; }>'.\n        return this.props.isMobile ? {\"stroke-width\": 3} : {};\n    };\n\n    addLine: (arg1: string) => void = (type) => {\n        const self = this;\n        const graphie = self.graphie;\n        const coords = InteractiveGraph.getLineCoords(\n            self.props.graph,\n            self.props,\n        );\n\n        const points = (self.points = _.map(coords, (coord) => {\n            return Interactive2.addMaybeMobileMovablePoint(this, {\n                coord: coord,\n                constraints: [\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                    Interactive2.MovablePoint.constraints.bound(),\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                    Interactive2.MovablePoint.constraints.snap(),\n                ],\n                onMove: () => {\n                    const graph = _.extend({}, self.props.graph, {\n                        coords: _.invoke(points, \"coord\"),\n                    });\n                    self.onChange({graph: graph});\n                },\n            });\n        }));\n\n        const lineConfig = {\n            points: points,\n            static: true,\n            normalStyle: {\n                stroke: this.props.apiOptions.isMobile\n                    ? KhanColors.BLUE_C\n                    : KhanColors.INTERACTIVE,\n                ...this._lineStroke(),\n            },\n        } as const;\n\n        if (type === \"line\") {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'extendLine' does not exist on type '{ readonly points: any[]; readonly static: true; readonly normalStyle: { readonly \"stroke-width\"?: number | undefined; readonly stroke: \"#71B307\" | \"#63D9EA\"; }; }'.\n            lineConfig.extendLine = true;\n        } else if (type === \"ray\") {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'extendRay' does not exist on type '{ readonly points: any[]; readonly static: true; readonly normalStyle: { readonly \"stroke-width\"?: number | undefined; readonly stroke: \"#71B307\" | \"#63D9EA\"; }; }'.\n            lineConfig.extendRay = true;\n        }\n\n        self.line = Interactive2.addMovableLine(graphie, lineConfig);\n\n        // A and B can't be in the same place\n        points[0].listen(\"constraints\", \"isLine\", (coord) => {\n            return !kpoint.equal(coord, points[1].coord());\n        });\n        points[1].listen(\"constraints\", \"isLine\", (coord) => {\n            return !kpoint.equal(coord, points[0].coord());\n        });\n    };\n\n    removeLine: () => void = () => {\n        _.invoke(this.points, \"remove\");\n        this.line?.remove();\n    };\n\n    addLinearControls: () => void = () => {\n        this.addLine(\"line\");\n    };\n\n    removeLinearControls: () => void = () => {\n        this.removeLine();\n    };\n\n    addQuadraticControls: () => void = () => {\n        if (this.props.graph.type !== \"quadratic\") {\n            throw makeInvalidTypeError(\"addQuadraticControls\", \"quadratic\");\n        }\n\n        let coords = this.props.graph.coords;\n        if (!coords) {\n            coords = InteractiveGraph.defaultQuadraticCoords(this.props);\n        }\n\n        const onMoveHandler = () => {\n            const graph = _.extend({}, this.props.graph, {\n                // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2531 - Object is possibly 'null'. | TS2531 - Object is possibly 'null'.\n                coords: [pointA.coord(), pointB.coord(), pointC.coord()],\n            });\n            this.onChange({graph});\n            this.updateQuadratic();\n        };\n\n        // NOTE(jeresig): This code attempts to access the variable while it's\n        // still being defined, it should be refactored! The callbacks appear\n        // to be executed synchronously, which causes this issue.\n        let pointA = null;\n        pointA = this.pointA = Interactive2.addMaybeMobileMovablePoint(this, {\n            coord: coords[0],\n            constraints: [\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.bound(),\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.snap(),\n                (coord) => {\n                    return (\n                        !pointA ||\n                        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                        (coord[0] !== pointB.coord()[0] &&\n                            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                            coord[0] !== pointC.coord()[0])\n                    );\n                },\n            ],\n            onMove: onMoveHandler,\n        });\n\n        // NOTE(jeresig): This code attempts to access the variable while it's\n        // still being defined, it should be refactored! The callbacks appear\n        // to be executed synchronously, which causes this issue.\n        let pointB = null;\n        pointB = this.pointB = Interactive2.addMaybeMobileMovablePoint(this, {\n            coord: coords[1],\n            constraints: [\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.bound(),\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.snap(),\n                (coord: any) => {\n                    return (\n                        !pointB ||\n                        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                        (coord[0] !== pointA.coord()[0] &&\n                            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                            coord[0] !== pointC.coord()[0])\n                    );\n                },\n            ],\n            onMove: onMoveHandler,\n        });\n\n        // NOTE(jeresig): This code attempts to access the variable while it's\n        // still being defined, it should be refactored! The callbacks appear\n        // to be executed synchronously, which causes this issue.\n        let pointC = null;\n        pointC = this.pointC = Interactive2.addMaybeMobileMovablePoint(this, {\n            coord: coords[2],\n            constraints: [\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.bound(),\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.snap(),\n                (coord: any) => {\n                    return (\n                        !pointC ||\n                        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                        (coord[0] !== pointA.coord()[0] &&\n                            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                            coord[0] !== pointB.coord()[0])\n                    );\n                },\n            ],\n            onMove: onMoveHandler,\n        });\n\n        this.updateQuadratic();\n    };\n\n    updateQuadratic: () => void = () => {\n        const coeffs = InteractiveGraph.getCurrentQuadraticCoefficients(\n            this.props,\n        );\n        if (!coeffs) {\n            return;\n        }\n\n        // Extract coefficients the parabola\n        const a = coeffs[0];\n        const b = coeffs[1];\n        const c = coeffs[2];\n\n        // Plot and style\n        if (this.parabola) {\n            const path = this.graphie?.svgParabolaPath(a, b, c);\n            this.parabola?.attr({path: path});\n        } else {\n            this.parabola = this.graphie?.parabola(a, b, c);\n            this.parabola?.attr({\n                stroke: this.props.apiOptions.isMobile\n                    ? KhanColors.BLUE_C\n                    : KhanColors.DYNAMIC,\n                ...this._lineStroke(),\n            });\n            this.parabola?.toBack();\n        }\n    };\n\n    removeQuadraticControls: () => void = () => {\n        this.pointA?.remove();\n        this.pointB?.remove();\n        this.pointC?.remove();\n        if (this.parabola) {\n            this.parabola.remove();\n            this.parabola = null;\n        }\n    };\n\n    addSinusoidControls: () => void = () => {\n        if (this.props.graph.type !== \"sinusoid\") {\n            throw makeInvalidTypeError(\"addSinusoidControls\", \"sinusoid\");\n        }\n        let coords = this.props.graph.coords;\n        if (!coords) {\n            coords = InteractiveGraph.defaultSinusoidCoords(this.props);\n        }\n\n        const onMoveHandler = () => {\n            const graph = _.extend({}, this.props.graph, {\n                // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                coords: [pointA.coord(), pointB.coord()],\n            });\n            this.onChange({graph: graph});\n            this.updateSinusoid();\n        };\n\n        // NOTE(jeresig): This code attempts to access the variable while it's\n        // still being defined, it should be refactored! The callbacks appear\n        // to be executed synchronously, which causes this issue.\n        let pointA = null;\n        pointA = this.pointA = Interactive2.addMaybeMobileMovablePoint(this, {\n            coord: coords[0],\n            constraints: [\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.bound(),\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.snap(),\n                (coord: any) => {\n                    return !pointA || coord[0] !== pointB.coord()[0];\n                },\n            ],\n            onMove: onMoveHandler,\n        });\n\n        const pointB = (this.pointB = Interactive2.addMaybeMobileMovablePoint(\n            this,\n            {\n                coord: coords[1],\n                constraints: [\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                    Interactive2.MovablePoint.constraints.bound(),\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                    Interactive2.MovablePoint.constraints.snap(),\n                    (coord: any) => {\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'coord' does not exist on type 'never'.\n                        return !pointA || coord[0] !== pointA.coord()[0];\n                    },\n                ],\n                onMove: onMoveHandler,\n            },\n        ));\n\n        this.updateSinusoid();\n    };\n\n    updateSinusoid: () => void = () => {\n        const coeffs = InteractiveGraph.getCurrentSinusoidCoefficients(\n            this.props,\n        );\n        if (!coeffs) {\n            return;\n        }\n\n        const a = coeffs[0];\n        const b = coeffs[1];\n        const c = coeffs[2];\n        const d = coeffs[3];\n\n        // Plot and style\n        if (this.sinusoid) {\n            const path = this.graphie?.svgSinusoidPath(a, b, c, d);\n            this.sinusoid?.attr({path: path});\n        } else {\n            this.sinusoid = this.graphie?.sinusoid(a, b, c, d);\n            this.sinusoid?.attr({\n                stroke: this.props.apiOptions.isMobile\n                    ? KhanColors.BLUE_C\n                    : KhanColors.DYNAMIC,\n                ...this._lineStroke(),\n            });\n            this.sinusoid?.toBack();\n        }\n    };\n\n    removeSinusoidControls: () => void = () => {\n        this.pointA?.remove();\n        this.pointB?.remove();\n        if (this.sinusoid) {\n            this.sinusoid.remove();\n            this.sinusoid = null;\n        }\n    };\n\n    addCircleControls: () => void = () => {\n        const graphie = this.graphie;\n        const minSnap = _.min(graphie.snap);\n\n        const circle = (this.circle = graphie?.addCircleGraph({\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'center' does not exist on type 'PerseusGraphType'.\n            center: this.props.graph.center || [0, 0],\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'radius' does not exist on type 'PerseusGraphType'.\n            radius: this.props.graph.radius || _.min(this.props.step),\n            snapX: graphie.snap[0],\n            snapY: graphie.snap[1],\n            minRadius: minSnap,\n            snapRadius: minSnap,\n        }));\n\n        $(circle).on(\"move\", () => {\n            const graph = _.extend({}, this.props.graph, {\n                center: circle.center,\n                radius: circle.radius,\n            });\n            this.onChange({graph: graph});\n        });\n    };\n\n    removeCircleControls: () => void = () => {\n        this.circle?.remove();\n    };\n\n    addLinearSystemControls: () => void = () => {\n        const graphie = this.graphie;\n        const coords = InteractiveGraph.getLinearSystemCoords(\n            this.props.graph,\n            this.props,\n        );\n\n        const segmentColors = [KhanColors.INTERACTIVE, KhanColors.GREEN];\n        const points = (this.points = _.map(\n            coords,\n            (segmentCoords, segmentIndex) => {\n                // NOTE(jeresig): This code attempts to access the variable\n                // while it's still being defined, it should be refactored!\n                // The callbacks appear to be executed synchronously, which\n                // causes this issue.\n                const segmentPoints: Array<any> = [];\n\n                for (let i = 0; i < segmentCoords.length; i += 1) {\n                    const coord = segmentCoords[i];\n                    segmentPoints.push(\n                        Interactive2.addMaybeMobileMovablePoint(this, {\n                            coord: coord,\n                            constraints: [\n                                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                                Interactive2.MovablePoint.constraints.bound(),\n                                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                                Interactive2.MovablePoint.constraints.snap(),\n                                (coord) => {\n                                    const otherSegment = segmentPoints[1 - i];\n                                    if (!otherSegment) {\n                                        // segment hasn't been defined yet\n                                        // because we're still creating them\n                                        return;\n                                    }\n                                    return !kpoint.equal(\n                                        coord,\n                                        otherSegment.coord(),\n                                    );\n                                },\n                            ],\n                            onMove: () => {\n                                const graph = _.extend({}, this.props.graph, {\n                                    coords: _.map(this.points, (segment) =>\n                                        _.invoke(segment, \"coord\"),\n                                    ),\n                                });\n                                this.onChange({graph: graph});\n                            },\n                            normalStyle: {\n                                fill: segmentColors[segmentIndex],\n                            },\n                            highlightStyle: {\n                                fill: segmentColors[segmentIndex],\n                            },\n                        }),\n                    );\n                }\n\n                return segmentPoints;\n            },\n        ));\n\n        this.lines = _.map(points, (segmentPoints, segmentIndex) => {\n            return Interactive2.addMovableLine(graphie, {\n                points: segmentPoints,\n                static: true,\n                extendLine: true,\n                normalStyle: {\n                    stroke: segmentColors[segmentIndex],\n                },\n            });\n        });\n    };\n\n    removeLinearSystemControls: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly (readonly Coord[])[] | null | undefined' is not assignable to parameter of type 'Collection<any>'.\n        _.invoke(this.lines, \"remove\");\n        _.map(this.points, (segment) => _.invoke(segment, \"remove\"));\n    };\n\n    isCoordInTrash: (arg1: Coord) => boolean = (coord) => {\n        if (this.props.apiOptions.isMobile) {\n            return false;\n        }\n\n        const graphie = this.graphie;\n        const screenPoint = graphie?.scalePoint(coord);\n        return (\n            screenPoint[0] >= graphie.xpixels - 40 &&\n            screenPoint[1] >= graphie.ypixels - 40\n        );\n    };\n\n    createPointForPointsType: (arg1: Coord, arg2: number) => any = (\n        coord,\n        i,\n    ) => {\n        const self = this;\n\n        const remove = () => {\n            self.points = _.filter(self.points, function (pt) {\n                return pt !== point;\n            });\n            // update the correct answer box\n            self.updateCoordsFromPoints();\n\n            // remove this movablePoint from graphie.\n            // we wait to do this until we're not inside of\n            // said point's onMoveEnd method so its state is\n            // consistent throughout this method call\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n            setTimeout(point.remove.bind(point), 0); // eslint-disable-line no-restricted-syntax\n        };\n\n        // NOTE(jeresig): This code attempts to access the variable while it's\n        // still being defined, it should be refactored! The callbacks appear\n        // to be executed synchronously, which causes this issue.\n        let point = null;\n        point = Interactive2.addMaybeMobileMovablePoint(this, {\n            coord: coord,\n            constraints: [\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.bound(),\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.snap(),\n                function (coord) {\n                    // TODO(jack): There ought to be a\n                    // MovablePoint.constraints.avoid\n                    // default that lets you do things like this\n                    return _.all(self.points, function (pt) {\n                        return point === pt || !kpoint.equal(coord, pt.coord());\n                    });\n                },\n            ],\n            onMoveStart: function () {\n                if (self.isClickToAddPoints()) {\n                    self.setTrashCanVisibility(1);\n                }\n            },\n            onMove: self.updateCoordsFromPoints,\n            onMoveEnd: function (coord) {\n                if (self.isClickToAddPoints()) {\n                    if (self.isCoordInTrash(coord)) {\n                        remove();\n                    }\n                    // In case we mouseup'd off the graphie and that\n                    // stopped the move (in which case, we might not\n                    // be in isCoordInTrash()\n                    self.setTrashCanVisibility(0.5);\n                }\n            },\n            ...(this.props.apiOptions.isMobile && self.isClickToAddPoints()\n                ? {onRemove: remove}\n                : {}),\n        });\n\n        return point;\n    };\n\n    removePoint: (arg1: Coord) => number | null | undefined = (point) => {\n        let index = null;\n        this.points = _.filter(this.points, function (pt, i) {\n            if (pt === point) {\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n                index = i;\n                return false;\n            }\n            return true;\n        });\n        return index;\n    };\n\n    createPointForPolygonType: (arg1: Coord, arg2: number) => any = (\n        coord,\n        i,\n    ) => {\n        if (this.props.graph.type !== \"polygon\") {\n            throw makeInvalidTypeError(\"createPointForPolygonType\", \"polygon\");\n        }\n\n        // TODO(alex): check against \"grid\" instead, use constants\n        const snapToGrid = !_.contains(\n            [\"angles\", \"sides\"],\n            this.props.graph.snapTo,\n        );\n\n        // Index relative to current point -> absolute index\n        // NOTE: This does not work when isClickToAddPoints() == true,\n        // as `i` can be changed by dragging a point to the trash\n        // Currently this function is only called when !isClickToAddPoints()\n        const rel = (j) => {\n            return (i + j + this.points.length) % this.points.length;\n        };\n\n        const remove = () => {\n            // remove this point from points\n            const index = this.removePoint(point);\n            if (this.polygon?.closed()) {\n                // We should be checking if this.points is defined before rotating them.\n                // @ts-expect-error [FEI-5003] - TS4104 - The type 'readonly any[]' is 'readonly' and cannot be assigned to the mutable type 'any[]'. | TS2345 - Argument of type 'number | null | undefined' is not assignable to parameter of type 'number | undefined'.\n                this.points = rotate(this.points, index);\n                this.polygon?.update({closed: false});\n            }\n            this.updatePolygon();\n            // the polygon is now unclosed, so we need to\n            // remove any points props\n            this.clearCoords();\n\n            // remove this movablePoint from graphie.\n            // wait to do this until we're not inside of\n            // said point's onMoveEnd method so state is\n            // consistent throughout the method call\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(point.remove.bind(point), 0);\n        };\n\n        const setInitialMove = debounce((point, bool) => {\n            point.state.isInitialMove = bool;\n        }, 1000);\n\n        const onMoveEndHandler = (coord) => {\n            // If the user clicked and dragged a point over endpoint,\n            // join the them\n            const overlappedPoints =\n                this.points.length > 1 &&\n                ((point === this.points[0] &&\n                    kpoint.equal(coord, _.last(this.points).coord())) ||\n                    (point === _.last(this.points) &&\n                        kpoint.equal(coord, this.points[0].coord())));\n\n            if (this.isClickToAddPoints()) {\n                if (this.isCoordInTrash(coord)) {\n                    remove();\n                } else if (overlappedPoints) {\n                    const pointToRemove = this.points.pop();\n\n                    if (this.points.length > 2) {\n                        this.polygon?.update({closed: true});\n                        this.updateCoordsFromPoints();\n                    } else {\n                        this.polygon?.update({closed: false});\n                        this.clearCoords();\n                    }\n\n                    this.updatePolygon();\n                    // remove this movablePoint from graphie.\n                    // wait to do this until we're not inside of\n                    // said point's onMoveEnd method so state is\n                    // consistent throughout the method call\n                    // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n                    // eslint-disable-next-line no-restricted-syntax\n                    setTimeout(pointToRemove.remove.bind(pointToRemove), 0);\n                } else {\n                    // If the user clicked and dragged a point over any other\n                    // existing point, fix shape\n                    const shouldRemove = _.any(this.points, function (pt) {\n                        return pt !== point && kpoint.equal(pt.coord(), coord);\n                    });\n\n                    if (shouldRemove) {\n                        this.removePoint(point);\n\n                        if (this.points.length < 3) {\n                            this.polygon?.update({closed: false});\n                            this.clearCoords();\n                        } else if (this.polygon?.closed()) {\n                            this.updateCoordsFromPoints();\n                        }\n\n                        this.updatePolygon();\n                        // remove this movablePoint from graphie.\n                        // wait to do this until we're not inside\n                        // said point's onMoveEnd method so state\n                        // is consistent throughout the method call\n                        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n                        // eslint-disable-next-line no-restricted-syntax\n                        setTimeout(point.remove.bind(point), 0);\n                    } else {\n                        // If this was\n                        //  * a click on the first or last point\n                        //  * and not a deletion\n                        //  * and not a drag,\n                        //  * and not a creation of a new point\n                        //    (see !point.state.isInitialMove, below),\n                        //  * and our polygon is not closed,\n                        //  * and we can close it (we need at least the same\n                        //    number of points as coordinates asked for in the\n                        //    question),\n                        // then close it\n                        const isFirstOrLastPoint =\n                            point === _.head(this.points) ||\n                            point === _.last(this.points);\n                        const pointNotMoved = !point.hasMoved();\n                        // NOTE (jsatk): Currently different on mobile versus\n                        // destkop\n                        const notANewPoint = !point.state.isInitialMove;\n                        const polygonNotClosed = !this.polygon?.closed();\n                        const allPointsPlotted = this.points.length > 2;\n\n                        const canCloseUnclosedPolygon =\n                            isFirstOrLastPoint &&\n                            pointNotMoved &&\n                            notANewPoint &&\n                            polygonNotClosed &&\n                            allPointsPlotted;\n\n                        if (canCloseUnclosedPolygon) {\n                            this.polygon?.update({closed: true});\n                            this.updatePolygon();\n\n                            // We finally have a closed polygon, so save our\n                            // points to props\n                            this.updateCoordsFromPoints();\n                        }\n                    }\n                }\n\n                // In case we mouseup'd off the graphie and that\n                // stopped the move\n                this.setTrashCanVisibility(0.5);\n            }\n\n            setInitialMove(point, false);\n        };\n\n        const graphConstraint = (coord: any) => {\n            // These constraints are all relative to the other points, so if\n            // we're creating the initial points and haven't added any others\n            // to the graph, we can't enforce them.\n            if (this.points == null || this.points.length === 0) {\n                return true;\n            }\n\n            const coords: Array<Coord> = _.invoke(this.points, \"coord\");\n            coords[i] = coord;\n\n            // Check for invalid positioning, but only if we aren't adding\n            // points one click at a time, since those added points could\n            // have already violated these constraints\n            if (!this.isClickToAddPoints()) {\n                // Polygons can't have consecutive collinear points\n                if (\n                    collinear(coords[rel(-2)], coords[rel(-1)], coords[i]) ||\n                    collinear(coords[rel(-1)], coords[i], coords[rel(1)]) ||\n                    collinear(coords[i], coords[rel(1)], coords[rel(2)])\n                ) {\n                    return false;\n                }\n\n                const segments = _.zip(coords, rotate(coords));\n\n                if (this.points.length > 3) {\n                    // Constrain to simple (non self-intersecting) polygon by\n                    // testing whether adjacent segments intersect any others\n                    for (let j = -1; j <= 0; j++) {\n                        const segment = segments[rel(j)];\n                        const others = _.without(\n                            segments,\n                            segment,\n                            segments[rel(j - 1)],\n                            segments[rel(j + 1)],\n                        );\n\n                        for (let k = 0; k < others.length; k++) {\n                            const other = others[k];\n                            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any[]' is not assignable to parameter of type 'Line'.\n                            if (intersects(segment, other)) {\n                                return false;\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'snapTo' does not exist on type 'PerseusGraphType'.\n                this.props.graph.snapTo === \"angles\" &&\n                this.points.length > 2\n            ) {\n                // Snap to whole degree interior angles\n\n                const angles = _.map(angleMeasures(coords), function (rad) {\n                    return (rad * 180) / Math.PI;\n                });\n\n                _.each([-1, 1], function (j) {\n                    angles[rel(j)] = Math.round(angles[rel(j)]);\n                });\n\n                const getAngle = function (a: number, vertex, b: number) {\n                    const angle = GraphUtils.findAngle(\n                        coords[rel(a)],\n                        coords[rel(b)],\n                        coords[rel(vertex)],\n                    );\n                    return (angle + 360) % 360;\n                };\n\n                const innerAngles = [\n                    angles[rel(-1)] - getAngle(-2, -1, 1),\n                    angles[rel(1)] - getAngle(-1, 1, 2),\n                ];\n                innerAngles[2] = 180 - (innerAngles[0] + innerAngles[1]);\n\n                // Avoid degenerate triangles\n                if (\n                    _.any(innerAngles, function (angle) {\n                        return leq(angle, 1);\n                    })\n                ) {\n                    return false;\n                }\n\n                const knownSide = magnitude(\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type 'readonly Coord[]'.\n                    vector(coords[rel(-1)], coords[rel(1)]),\n                );\n\n                const onLeft =\n                    sign(ccw(coords[rel(-1)], coords[rel(1)], coords[i])) === 1;\n\n                // Solve for side by using the law of sines\n                const side =\n                    (Math.sin((innerAngles[1] * Math.PI) / 180) /\n                        Math.sin((innerAngles[2] * Math.PI) / 180)) *\n                    knownSide;\n\n                const outerAngle = GraphUtils.findAngle(\n                    coords[rel(1)],\n                    coords[rel(-1)],\n                );\n\n                const offset = this.graphie?.polar(\n                    side,\n                    outerAngle + (onLeft ? 1 : -1) * innerAngles[0],\n                );\n\n                return this.graphie?.addPoints(coords[rel(-1)], offset);\n            }\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'snapTo' does not exist on type 'PerseusGraphType'.\n            if (this.props.graph.snapTo === \"sides\" && this.points.length > 1) {\n                // Snap to whole unit side measures\n\n                const sides = _.map(\n                    [\n                        [coords[rel(-1)], coords[i]],\n                        [coords[i], coords[rel(1)]],\n                        [coords[rel(-1)], coords[rel(1)]],\n                    ],\n                    function (coords) {\n                        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type 'readonly Coord[]'. | TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n                        return magnitude(vector(...coords));\n                    },\n                );\n\n                _.each([0, 1], function (j) {\n                    sides[j] = Math.round(sides[j]);\n                });\n\n                // Avoid degenerate triangles\n                if (\n                    leq(sides[1] + sides[2], sides[0]) ||\n                    leq(sides[0] + sides[2], sides[1]) ||\n                    leq(sides[0] + sides[1], sides[2])\n                ) {\n                    return false;\n                }\n\n                // Solve for angle by using the law of cosines\n                const innerAngle = lawOfCosines(sides[0], sides[2], sides[1]);\n\n                const outerAngle = GraphUtils.findAngle(\n                    coords[rel(1)],\n                    coords[rel(-1)],\n                );\n\n                const onLeft =\n                    sign(ccw(coords[rel(-1)], coords[rel(1)], coords[i])) === 1;\n\n                const offset = this.graphie?.polar(\n                    sides[0],\n                    outerAngle + (onLeft ? 1 : -1) * innerAngle,\n                );\n\n                return this.graphie?.addPoints(coords[rel(-1)], offset);\n            }\n            // Snap to grid (already done)\n            return true;\n        };\n\n        const point = Interactive2.addMaybeMobileMovablePoint(this, {\n            coord: coord,\n            constraints: [\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                Interactive2.MovablePoint.constraints.bound(),\n                snapToGrid\n                    ? // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                      Interactive2.MovablePoint.constraints.snap()\n                    : null,\n                graphConstraint,\n            ],\n            onMoveStart: () => {\n                if (this.isClickToAddPoints()) {\n                    this.setTrashCanVisibility(1);\n                }\n            },\n            onMove: () => {\n                if (this.polygon?.closed()) {\n                    this.updateCoordsFromPoints();\n                }\n            },\n            onMoveEnd: onMoveEndHandler,\n            ...(this.props.apiOptions.isMobile && this.isClickToAddPoints()\n                ? {onRemove: remove}\n                : {}),\n        });\n\n        point.state.isInitialMove = true;\n\n        return point;\n    };\n\n    updateCoordsFromPoints: () => void = () => {\n        const graph = _.extend({}, this.props.graph, {\n            // Handle old movable points with .coord, or\n            // Interactive2.MovablePoint's with .coord()\n            coords: _.map(this.points, function (point) {\n                return _.result(point, \"coord\");\n            }),\n        });\n        this.onChange({graph: graph});\n    };\n\n    clearCoords: () => void = () => {\n        const graph = _.extend({}, this.props.graph, {\n            coords: null,\n        });\n        this.onChange({graph: graph});\n    };\n\n    onChange: (arg1: any) => void = (data) => {\n        this.props.onChange(data);\n        this.props.trackInteraction();\n    };\n\n    addPointControls: () => void = () => {\n        if (this.props.graph.type !== \"point\") {\n            throw makeInvalidTypeError(\"addPointControls\", \"point\");\n        }\n\n        const coords = InteractiveGraph.getPointCoords(\n            this.props.graph,\n            this.props,\n        );\n        // Clear out our old points so that newly added points don't\n        // \"collide\" with them and reposition when being added\n        // Without this, when added, each point checks whether it is on top\n        // of a point in this.points, which (a) shouldn't matter since\n        // we're clearing out this.points anyways, and (b) can cause problems\n        // if each of this.points is a MovablePoint instead of an\n        // Interactive2.MovablePoint, since one has a .coord and the other\n        // has .coord()\n        // TODO(jack): Figure out a better way to do this\n        this.points = [];\n        this.points = _.map(coords, this.createPointForPointsType, this);\n    };\n\n    removePointControls: () => void = () => {\n        _.invoke(this.points, \"remove\");\n    };\n\n    addSegmentControls: () => void = () => {\n        if (this.props.graph.type !== \"segment\") {\n            throw makeInvalidTypeError(\"addSegmentControls\", \"segment\");\n        }\n\n        const self = this;\n        const graphie = this.graphie;\n\n        const coords = InteractiveGraph.getSegmentCoords(\n            this.props.graph,\n            this.props,\n        );\n\n        const createPoint = (options: {\n            constraints: Array<any | ((coord: never) => boolean)>;\n            coord: any;\n            onMove: () => void;\n        }) => Interactive2.addMaybeMobileMovablePoint(this, options);\n\n        this.points = [];\n        this.lines = _.map(\n            coords,\n            function (segment, i) {\n                const updateCoordProps = function () {\n                    const graph = _.extend({}, self.props.graph, {\n                        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly (readonly Coord[])[] | null | undefined' is not assignable to parameter of type 'Collection<any>'.\n                        coords: _.invoke(self.lines, \"coords\"),\n                    });\n                    self.onChange({graph: graph});\n                };\n\n                // NOTE(jeresig): This code attempts to access the variable\n                // while it's still being defined, it should be refactored!\n                // The callbacks appear to be executed synchronously, which\n                // causes this issue.\n                const points: Array<any> = [];\n\n                for (let i = 0; i < segment.length; i += 1) {\n                    const coord = segment[i];\n                    points.push(\n                        createPoint({\n                            coord: coord,\n                            constraints: [\n                                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                                Interactive2.MovablePoint.constraints.bound(),\n                                // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                                Interactive2.MovablePoint.constraints.snap(),\n                                (coord: any) => {\n                                    const otherPoint = points[1 - i];\n                                    if (!otherPoint) {\n                                        // point hasn't been defined yet\n                                        // because we're still creating them\n                                        // We return false as the points aren't\n                                        // going to be in the same position at\n                                        // this point.\n                                        return false;\n                                    }\n                                    return !kpoint.equal(\n                                        coord,\n                                        otherPoint.coord(),\n                                    );\n                                },\n                            ],\n                            onMove: updateCoordProps,\n                        }),\n                    );\n                }\n\n                self.points = self.points.concat(points);\n                const line = Interactive2.addMovableLine(graphie, {\n                    points: points,\n                    static: false,\n                    constraints: [\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                        Interactive2.MovableLine.constraints.bound(),\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                        Interactive2.MovableLine.constraints.snap(),\n                    ],\n                    onMove: [\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'onMove' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                        Interactive2.MovableLine.onMove.updatePoints,\n                        updateCoordProps,\n                    ],\n                    normalStyle: {\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        stroke: this.props.apiOptions.isMobile\n                            ? KhanColors.BLUE_C\n                            : KhanColors.INTERACTIVE,\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        ...this._lineStroke(),\n                    },\n                    highlightStyle: {\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        stroke: this.props.apiOptions.isMobile\n                            ? KhanColors.BLUE_C\n                            : KhanColors.INTERACTING,\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        ...this._lineStroke(),\n                    },\n                });\n                _.invoke(points, \"toFront\");\n\n                return line;\n            },\n            this,\n        );\n    };\n\n    removeSegmentControls: () => void = () => {\n        _.invoke(this.points, \"remove\");\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly (readonly Coord[])[] | null | undefined' is not assignable to parameter of type 'Collection<any>'.\n        _.invoke(this.lines, \"remove\");\n    };\n\n    addRayControls: () => void = () => {\n        this.addLine(\"ray\");\n    };\n\n    removeRayControls: () => void = () => {\n        this.removeLine();\n    };\n\n    addPolygonControls: () => void = () => {\n        this.polygon = null;\n        const coords = InteractiveGraph.getPolygonCoords(\n            this.props.graph,\n            this.props,\n        );\n        // Clear out our old points so that newly added points don't\n        // \"collide\", as in `addPointControls`\n        this.points = [];\n        this.points = _.map(coords, this.createPointForPolygonType, this);\n        this.updatePolygon();\n    };\n\n    updatePolygon: () => void = () => {\n        if (this.props.graph.type !== \"polygon\") {\n            throw makeInvalidTypeError(\"updatePolygon\", \"polygon\");\n        }\n\n        let closed;\n        if (this.polygon) {\n            closed = this.polygon.closed();\n        } else if (this.points.length >= 3) {\n            closed = true;\n        } else {\n            // There will only be fewer than 3 points in click-to-add-vertices\n            // mode, so we don't need to explicitly check for that here.\n            closed = false;\n        }\n\n        const graphie = this.graphie;\n        const n = this.points.length;\n\n        // TODO(alex): check against \"grid\" instead, use constants\n        const snapToGrid = !_.contains(\n            [\"angles\", \"sides\"],\n            this.props.graph.snapTo,\n        );\n\n        const angleLabels = _.times(\n            n,\n            function (i) {\n                if (\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    !this.props.graph.showAngles ||\n                    (!closed && (i === 0 || i === n - 1))\n                ) {\n                    return \"\";\n                }\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                if (this.props.graph.snapTo === \"angles\") {\n                    return \"$deg0\";\n                }\n                return \"$deg1\";\n            },\n            this,\n        );\n\n        const showRightAngleMarkers = _.times(\n            n,\n            function (i) {\n                return closed || (i !== 0 && i !== n - 1);\n            },\n            this,\n        );\n\n        const numArcs = _.times(\n            n,\n            function (i) {\n                if (\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    this.props.graph.showAngles &&\n                    (closed || (i !== 0 && i !== n - 1))\n                ) {\n                    return 1;\n                }\n                return 0;\n            },\n            this,\n        );\n\n        const sideLabels = _.times(\n            n,\n            function (i) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                if (!this.props.graph.showSides || (!closed && i === n - 1)) {\n                    return \"\";\n                }\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                if (this.props.graph.snapTo === \"sides\") {\n                    return \"$len0\";\n                }\n                return \"$len1\";\n            },\n            this,\n        );\n\n        if (this.polygon == null) {\n            const self = this;\n            self.polygon = Interactive2.addMovablePolygon(graphie, {\n                constraints: [\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => undefined'.\n                    Interactive2.MovablePolygon.constraints.bound(),\n                    snapToGrid\n                        ? // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => undefined'.\n                          Interactive2.MovablePolygon.constraints.snap()\n                        : null,\n                ],\n                closed: closed,\n                points: self.points,\n                angleLabels: angleLabels,\n                showRightAngleMarkers: showRightAngleMarkers,\n                numArcs: numArcs,\n                sideLabels: sideLabels,\n                onMove: [\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'onMove' does not exist on type '(graphie: any, movable: any, options: any) => undefined'.\n                    Interactive2.MovablePolygon.onMove.updatePoints,\n                    function () {\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        if (this.closed()) {\n                            self.updateCoordsFromPoints();\n                        }\n                    },\n                ],\n                normalStyle: {\n                    stroke: this.props.apiOptions.isMobile\n                        ? KhanColors.BLUE_C\n                        : KhanColors.INTERACTIVE,\n                    ...this._lineStroke(),\n                },\n            });\n        } else {\n            // We only need to pass in the properties that might've changed\n            this.polygon.update({\n                closed: closed,\n                points: this.points,\n                angleLabels: angleLabels,\n                showRightAngleMarkers: showRightAngleMarkers,\n                numArcs: numArcs,\n                sideLabels: sideLabels,\n            });\n        }\n    };\n\n    removePolygonControls: () => void = () => {\n        _.invoke(this.points, \"remove\");\n        this.polygon?.remove();\n    };\n\n    addAngleControls: () => void = () => {\n        if (this.props.graph.type !== \"angle\") {\n            throw makeInvalidTypeError(\"addAngleControls\", \"angle\");\n        }\n\n        const graph = this.props.graph;\n        const graphie = this.graphie;\n\n        const coords = InteractiveGraph.getAngleCoords(\n            this.props.graph,\n            this.props,\n        );\n\n        // The vertex snaps to the grid, but the rays don't...\n        this.points = coords.map(function (coord, i) {\n            return graphie?.addMovablePoint(\n                _.extend(\n                    {\n                        coord: coord,\n                        normalStyle: {\n                            stroke: KhanColors.INTERACTIVE,\n                            fill: KhanColors.INTERACTIVE,\n                        },\n                    },\n                    i === 1\n                        ? {\n                              snapX: graphie.snap[0],\n                              snapY: graphie.snap[1],\n                          }\n                        : {},\n                ),\n            );\n        });\n\n        // ...they snap to whole-degree angles from the vertex.\n        this.angle = graphie?.addMovableAngle({\n            points: this.points,\n            snapDegrees: graph.snapDegrees || 1,\n            snapOffsetDeg: graph.angleOffsetDeg || 0,\n            angleLabel: graph.showAngles ? \"$deg0\" : \"\",\n            pushOut: 2,\n            allowReflex: defaultVal(graph.allowReflexAngles, true),\n        });\n\n        $(this.angle).on(\"move\", () => {\n            this.onChange({\n                graph: {...graph, coords: this.angle?.getClockwiseCoords()},\n            });\n        });\n    };\n\n    removeAngleControls: () => void = () => {\n        _.invoke(this.points, \"remove\");\n        this.angle?.remove();\n    };\n\n    toggleShowAngles: () => void = () => {\n        if (this.props.graph.type !== \"polygon\") {\n            throw makeInvalidTypeError(\"toggleShowAngles\", \"polygon\");\n        }\n        const graph = _.extend({}, this.props.graph, {\n            showAngles: !this.props.graph.showAngles,\n        });\n        this.onChange({graph: graph});\n    };\n\n    toggleShowSides: () => void = () => {\n        if (this.props.graph.type !== \"polygon\") {\n            throw makeInvalidTypeError(\"toggleShowSides\", \"polygon\");\n        }\n        const graph = _.extend({}, this.props.graph, {\n            showSides: !this.props.graph.showSides,\n        });\n        this.onChange({graph: graph});\n    };\n\n    getUserInput: () => PerseusGraphType = () => {\n        return InteractiveGraph.getUserInputFromProps(this.props);\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return InteractiveGraph.validate(this.getUserInput(), rubric, this);\n    };\n\n    focus: () => void = $.noop;\n\n    render(): React.ReactNode {\n        const box = getInteractiveBoxFromSizeClass(\n            this.props.containerSizeClass,\n        );\n\n        let instructions;\n        if (this.isClickToAddPoints() && this.state.shouldShowInstructions) {\n            if (this.props.graph.type === \"point\") {\n                instructions = i18n._(\"Click to add points\");\n            } else if (this.props.graph.type === \"polygon\") {\n                instructions = i18n._(\"Click to add vertices\");\n            }\n        } else {\n            instructions = undefined;\n        }\n\n        let onMouseDown;\n        if (this.isClickToAddPoints()) {\n            onMouseDown = this.handleAddPointsMouseDown;\n        }\n\n        const gridStep =\n            this.props.gridStep ||\n            Util.getGridStep(this.props.range, this.props.step, box[0]);\n        const snapStep =\n            this.props.snapStep || Util.snapStepFromGridStep(gridStep);\n\n        const isMobile = this.props.apiOptions.isMobile;\n\n        return (\n            <div\n                className={\n                    \"perseus-widget \" + \"perseus-widget-interactive-graph\"\n                }\n                style={{\n                    width: box[0],\n                    height: box[1],\n                }}\n            >\n                <Graph\n                    instructions={instructions}\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"graph\"\n                    box={box}\n                    labels={this.props.labels}\n                    range={this.props.range}\n                    step={\n                        isMobile\n                            ? Util.constrainedTickStepsFromTickSteps(\n                                  this.props.step,\n                                  this.props.range,\n                              )\n                            : this.props.step\n                    }\n                    gridStep={gridStep}\n                    snapStep={snapStep}\n                    markings={this.props.markings}\n                    backgroundImage={this.props.backgroundImage}\n                    showProtractor={this.props.showProtractor}\n                    showRuler={this.props.showRuler}\n                    rulerLabel={this.props.rulerLabel}\n                    rulerTicks={this.props.rulerTicks}\n                    onMouseDown={onMouseDown}\n                    onGraphieUpdated={this.setGraphie}\n                    setDrawingAreaAvailable={\n                        this.props.apiOptions.setDrawingAreaAvailable\n                    }\n                    isMobile={isMobile}\n                />\n            </div>\n        );\n    }\n\n    static getQuadraticCoefficients(\n        coords: ReadonlyArray<Coord>,\n    ): QuadraticCoefficient {\n        const p1 = coords[0];\n        const p2 = coords[1];\n        const p3 = coords[2];\n\n        const denom = (p1[0] - p2[0]) * (p1[0] - p3[0]) * (p2[0] - p3[0]);\n        if (denom === 0) {\n            // Many of the callers assume that the return value is always defined.\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'undefined' is not assignable to type 'QuadraticCoefficient'.\n            return;\n        }\n        const a =\n            (p3[0] * (p2[1] - p1[1]) +\n                p2[0] * (p1[1] - p3[1]) +\n                p1[0] * (p3[1] - p2[1])) /\n            denom;\n        const b =\n            (p3[0] * p3[0] * (p1[1] - p2[1]) +\n                p2[0] * p2[0] * (p3[1] - p1[1]) +\n                p1[0] * p1[0] * (p2[1] - p3[1])) /\n            denom;\n        const c =\n            (p2[0] * p3[0] * (p2[0] - p3[0]) * p1[1] +\n                p3[0] * p1[0] * (p3[0] - p1[0]) * p2[1] +\n                p1[0] * p2[0] * (p1[0] - p2[0]) * p3[1]) /\n            denom;\n        return [a, b, c];\n    }\n\n    static getSinusoidCoefficients(\n        coords: ReadonlyArray<Coord>,\n    ): SineCoefficient {\n        // It's assumed that p1 is the root and p2 is the first peak\n        const p1 = coords[0];\n        const p2 = coords[1];\n\n        // Resulting coefficients are canonical for this sine curve\n        const amplitude = p2[1] - p1[1];\n        const angularFrequency = Math.PI / (2 * (p2[0] - p1[0]));\n        const phase = p1[0] * angularFrequency;\n        const verticalOffset = p1[1];\n\n        return [amplitude, angularFrequency, phase, verticalOffset];\n    }\n\n    /**\n     * @param {object} graph Like props.graph or props.correct\n     * @param {object} props of an InteractiveGraph instance\n     */\n    static getLineCoords(\n        graph: PerseusGraphType,\n        props: Props,\n    ): ReadonlyArray<Coord> {\n        return (\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'.\n            graph.coords ||\n            InteractiveGraph.pointsFromNormalized(props, [\n                [0.25, 0.75],\n                [0.75, 0.75],\n            ])\n        );\n    }\n\n    /**\n     * @param {object} graph Like props.graph or props.correct\n     * @param {object} props of an InteractiveGraph instance\n     */\n    static getPointCoords(\n        graph: PerseusGraphTypePoint,\n        props: Props,\n    ): ReadonlyArray<Coord> {\n        const numPoints = graph.numPoints || 1;\n        let coords = graph.coords;\n\n        if (coords) {\n            return coords;\n        }\n        switch (numPoints) {\n            case 1:\n                // Back in the day, one point's coords were in graph.coord\n                coords = [graph.coord || [0, 0]];\n                break;\n            case 2:\n                coords = [\n                    [-5, 0],\n                    [5, 0],\n                ];\n                break;\n            case 3:\n                coords = [\n                    [-5, 0],\n                    [0, 0],\n                    [5, 0],\n                ];\n                break;\n            case 4:\n                coords = [\n                    [-6, 0],\n                    [-2, 0],\n                    [2, 0],\n                    [6, 0],\n                ];\n                break;\n            case 5:\n                coords = [\n                    [-6, 0],\n                    [-3, 0],\n                    [0, 0],\n                    [3, 0],\n                    [6, 0],\n                ];\n                break;\n            case 6:\n                coords = [\n                    [-5, 0],\n                    [-3, 0],\n                    [-1, 0],\n                    [1, 0],\n                    [3, 0],\n                    [5, 0],\n                ];\n                break;\n            case UNLIMITED:\n                coords = [];\n                break;\n        }\n        // Transform coords from their -10 to 10 space to 0 to 1\n        // because of the old graph.coord, and also it's easier.\n        const range = [\n            [-10, 10],\n            [-10, 10],\n        ];\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly Coord[] | undefined' is not assignable to parameter of type 'readonly Coord[]'.\n        const newCoords = InteractiveGraph.normalizeCoords(coords, range);\n\n        return InteractiveGraph.pointsFromNormalized(props, newCoords);\n    }\n\n    /**\n     * @param {object} graph Like props.graph or props.correct\n     * @param {object} props of an InteractiveGraph instance\n     */\n    static getLinearSystemCoords(\n        graph: PerseusGraphType,\n        props: Props,\n    ): ReadonlyArray<ReadonlyArray<Coord>> {\n        return (\n            // The callers assume that we're return an array of points\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'.\n            graph.coords ||\n            _.map(\n                [\n                    [\n                        [0.25, 0.75],\n                        [0.75, 0.75],\n                    ],\n                    [\n                        [0.25, 0.25],\n                        [0.75, 0.25],\n                    ],\n                ],\n                (coords) => {\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[][]' is not assignable to parameter of type 'readonly Coord[]'.\n                    return InteractiveGraph.pointsFromNormalized(props, coords);\n                },\n            )\n        );\n    }\n\n    /**\n     * @param {object} graph Like props.graph or props.correct\n     * @param {object} props of an InteractiveGraph instance\n     */\n    static getPolygonCoords(\n        graph: PerseusGraphType,\n        props: Props,\n    ): ReadonlyArray<Coord> {\n        if (graph.type !== \"polygon\") {\n            throw makeInvalidTypeError(\"toggleShowSides\", \"polygon\");\n        }\n\n        let coords = graph.coords;\n        if (coords) {\n            return coords;\n        }\n\n        const n = graph.numSides || 3;\n\n        if (n === UNLIMITED) {\n            coords = [];\n        } else {\n            const angle = (2 * Math.PI) / n;\n            const offset = (1 / n - 1 / 2) * Math.PI;\n\n            // TODO(alex): Generalize this to more than just triangles so that\n            // all polygons have whole number side lengths if snapping to sides\n            const radius =\n                graph.snapTo === \"sides\" ? (Math.sqrt(3) / 3) * 7 : 4;\n\n            // Generate coords of a regular polygon with n sides\n            coords = _.times(n, function (i) {\n                return [\n                    radius * Math.cos(i * angle + offset),\n                    radius * Math.sin(i * angle + offset),\n                ];\n            });\n        }\n\n        const ranges: [Range, Range] = [\n            [-10, 10],\n            [-10, 10],\n        ];\n        coords = InteractiveGraph.normalizeCoords(coords, ranges);\n\n        const snapToGrid = !_.contains([\"angles\", \"sides\"], graph.snapTo);\n        coords = InteractiveGraph.pointsFromNormalized(\n            props,\n            coords,\n            /* noSnap */ !snapToGrid,\n        );\n\n        return coords;\n    }\n\n    /**\n     * @param {object} graph Like props.graph or props.correct\n     * @param {object} props of an InteractiveGraph instance\n     */\n    static getSegmentCoords(\n        graph: PerseusGraphTypeSegment,\n        props: Props,\n    ): ReadonlyArray<ReadonlyArray<Coord>> {\n        const coords = graph.coords;\n        if (coords) {\n            return coords;\n        }\n\n        const n = graph.numSegments || 1;\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number[] | undefined' is not assignable to type 'readonly number[]'.\n        const ys: ReadonlyArray<number> = {\n            1: [5],\n            2: [5, -5],\n            3: [5, 0, -5],\n            4: [6, 2, -2, -6],\n            5: [6, 3, 0, -3, -6],\n            6: [5, 3, 1, -1, -3, -5],\n        }[n];\n        const range = [\n            [-10, 10],\n            [-10, 10],\n        ];\n\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number[][][]' is not assignable to type 'readonly (readonly Coord[])[]'.\n        return ys.map(function (y) {\n            let segment = [\n                [-5, y],\n                [5, y],\n            ];\n            // @ts-expect-error [FEI-5003] - TS4104 - The type 'readonly Coord[]' is 'readonly' and cannot be assigned to the mutable type 'number[][]'. | TS2345 - Argument of type 'number[][]' is not assignable to parameter of type 'readonly Coord[]'.\n            segment = InteractiveGraph.normalizeCoords(segment, range);\n            // @ts-expect-error [FEI-5003] - TS4104 - The type 'readonly Coord[]' is 'readonly' and cannot be assigned to the mutable type 'number[][]'. | TS2345 - Argument of type 'number[][]' is not assignable to parameter of type 'readonly Coord[]'.\n            segment = InteractiveGraph.pointsFromNormalized(props, segment);\n            return segment;\n        });\n    }\n\n    /**\n     * @param {object} graph Like props.graph or props.correct\n     * @param {object} props of an InteractiveGraph instance\n     */\n    static getAngleCoords(\n        graph: PerseusGraphTypeAngle,\n        props: Props,\n    ): ReadonlyArray<Coord> {\n        let coords = graph.coords;\n        if (coords) {\n            return coords;\n        }\n\n        const snap = graph.snapDegrees || 1;\n        let angle = snap;\n        while (angle < 20) {\n            angle += snap;\n        }\n        angle = (angle * Math.PI) / 180;\n        const offset = ((graph.angleOffsetDeg || 0) * Math.PI) / 180;\n\n        coords = InteractiveGraph.pointsFromNormalized(props, [\n            [0.85, 0.5],\n            [0.5, 0.5],\n        ]);\n\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[]' is not assignable to parameter of type 'readonly Coord[]'. | TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n        const radius = magnitude(vector(...coords));\n\n        // Adjust the lower point by angleOffsetDeg degrees\n        // @ts-expect-error [FEI-5003] - TS2542 - Index signature in type 'readonly Coord[]' only permits reading.\n        coords[0] = [\n            coords[1][0] + radius * Math.cos(offset),\n            coords[1][1] + radius * Math.sin(offset),\n        ];\n        // Position the upper point angle radians from the\n        // lower point\n        // @ts-expect-error [FEI-5003] - TS2542 - Index signature in type 'readonly Coord[]' only permits reading.\n        coords[2] = [\n            coords[1][0] + radius * Math.cos(angle + offset),\n            coords[1][1] + radius * Math.sin(angle + offset),\n        ];\n\n        return coords;\n    }\n\n    static normalizeCoords(\n        coordsList: ReadonlyArray<Coord>,\n        ranges: [Range, Range],\n    ): ReadonlyArray<Coord> {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number[][]' is not assignable to type 'readonly Coord[]'.\n        return _.map(coordsList, function (coords) {\n            return _.map(coords, function (coord, i) {\n                const extent = ranges[i][1] - ranges[i][0];\n                return (coord + ranges[i][1]) / extent;\n            });\n        });\n    }\n\n    static getEquationString(props: Props): string {\n        const type = props.graph.type;\n        const funcName = \"get\" + capitalize(type) + \"EquationString\";\n        return InteractiveGraph[funcName](props);\n    }\n\n    static pointsFromNormalized(\n        props: Props,\n        coordsList: ReadonlyArray<Coord>,\n        noSnap?: boolean,\n    ): ReadonlyArray<Coord> {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number[][]' is not assignable to type 'readonly Coord[]'.\n        return _.map(coordsList, function (coords) {\n            return _.map(coords, function (coord, i) {\n                const range: Range = props.range[i];\n                if (noSnap) {\n                    return range[0] + (range[1] - range[0]) * coord;\n                }\n                const step = props.step[i];\n                const nSteps = numSteps(range, step);\n                const tick = Math.round(coord * nSteps);\n                return range[0] + step * tick;\n            });\n        });\n    }\n\n    static getLinearEquationString(props: Props): string {\n        const coords = InteractiveGraph.getLineCoords(props.graph, props);\n        if (eq(coords[0][0], coords[1][0])) {\n            return \"x = \" + coords[0][0].toFixed(3);\n        }\n        const m = (coords[1][1] - coords[0][1]) / (coords[1][0] - coords[0][0]);\n        const b = coords[0][1] - m * coords[0][0];\n        if (eq(m, 0)) {\n            return \"y = \" + b.toFixed(3);\n        }\n        return \"y = \" + m.toFixed(3) + \"x + \" + b.toFixed(3);\n    }\n\n    static getCurrentQuadraticCoefficients(props: Props): QuadraticCoefficient {\n        // TODO(alpert): Don't duplicate\n        const coords =\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'.\n            props.graph.coords ||\n            InteractiveGraph.defaultQuadraticCoords(props);\n        return InteractiveGraph.getQuadraticCoefficients(coords);\n    }\n\n    static defaultQuadraticCoords(props: Props): ReadonlyArray<Coord> {\n        const coords = [\n            [0.25, 0.75],\n            [0.5, 0.25],\n            [0.75, 0.75],\n        ];\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[][]' is not assignable to parameter of type 'readonly Coord[]'.\n        return InteractiveGraph.pointsFromNormalized(props, coords);\n    }\n\n    static getQuadraticEquationString(props: Props): string {\n        const coeffs = InteractiveGraph.getCurrentQuadraticCoefficients(props);\n        return (\n            \"y = \" +\n            coeffs[0].toFixed(3) +\n            \"x^2 + \" +\n            coeffs[1].toFixed(3) +\n            \"x + \" +\n            coeffs[2].toFixed(3)\n        );\n    }\n\n    static getCurrentSinusoidCoefficients(props: Props): SineCoefficient {\n        const coords =\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'.\n            props.graph.coords || InteractiveGraph.defaultSinusoidCoords(props);\n        return InteractiveGraph.getSinusoidCoefficients(coords);\n    }\n\n    static defaultSinusoidCoords(props: Props): ReadonlyArray<Coord> {\n        const coords = [\n            [0.5, 0.5],\n            [0.65, 0.6],\n        ];\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number[][]' is not assignable to parameter of type 'readonly Coord[]'.\n        return InteractiveGraph.pointsFromNormalized(props, coords);\n    }\n\n    static getSinusoidEquationString(props: Props): string {\n        const coeffs = InteractiveGraph.getCurrentSinusoidCoefficients(props);\n        return (\n            \"y = \" +\n            coeffs[0].toFixed(3) +\n            \"sin(\" +\n            coeffs[1].toFixed(3) +\n            \"x - \" +\n            coeffs[2].toFixed(3) +\n            \") + \" +\n            coeffs[3].toFixed(3)\n        );\n    }\n\n    static getCircleEquationString(props: Props): string {\n        const graph = props.graph;\n        // TODO(alpert): Don't duplicate\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'center' does not exist on type 'PerseusGraphType'.\n        const center = graph.center || [0, 0];\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'radius' does not exist on type 'PerseusGraphType'.\n        const radius = graph.radius || 2;\n        return (\n            \"center (\" + center[0] + \", \" + center[1] + \"), radius \" + radius\n        );\n    }\n\n    static getLinearSystemEquationString(props: Props): string {\n        const coords = InteractiveGraph.getLinearSystemCoords(\n            props.graph,\n            props,\n        );\n\n        return (\n            \"\\n\" +\n            getLineEquation(coords[0][0], coords[0][1]) +\n            \"\\n\" +\n            getLineEquation(coords[1][0], coords[1][1]) +\n            \"\\n\" +\n            getLineIntersection(coords[0], coords[1])\n        );\n    }\n\n    static getPointEquationString(props: Props): string {\n        if (props.graph.type !== \"point\") {\n            throw makeInvalidTypeError(\"getPointEquationString\", \"point\");\n        }\n\n        const coords = InteractiveGraph.getPointCoords(props.graph, props);\n        return coords\n            .map(function (coord) {\n                return \"(\" + coord[0] + \", \" + coord[1] + \")\";\n            })\n            .join(\", \");\n    }\n\n    static getSegmentEquationString(props: Props): string {\n        if (props.graph.type !== \"segment\") {\n            throw makeInvalidTypeError(\"getSegmentEquationString\", \"segment\");\n        }\n\n        const segments = InteractiveGraph.getSegmentCoords(props.graph, props);\n        return _.map(segments, function (segment) {\n            return (\n                \"[\" +\n                _.map(segment, function (coord) {\n                    return \"(\" + coord.join(\", \") + \")\";\n                }).join(\" \") +\n                \"]\"\n            );\n        }).join(\" \");\n    }\n\n    static getRayEquationString(props: Props): string {\n        if (props.graph.type !== \"ray\") {\n            throw makeInvalidTypeError(\"createPointForPolygonType\", \"ray\");\n        }\n\n        const coords = InteractiveGraph.getLineCoords(props.graph, props);\n        const a = coords[0];\n        const b = coords[1];\n        let eq = InteractiveGraph.getLinearEquationString(props);\n\n        if (a[0] > b[0]) {\n            eq += \" (for x <= \" + a[0].toFixed(3) + \")\";\n        } else if (a[0] < b[0]) {\n            eq += \" (for x >= \" + a[0].toFixed(3) + \")\";\n        } else if (a[1] > b[1]) {\n            eq += \" (for y <= \" + a[1].toFixed(3) + \")\";\n        } else {\n            eq += \" (for y >= \" + a[1].toFixed(3) + \")\";\n        }\n\n        return eq;\n    }\n\n    static getPolygonEquationString(props: Props): string {\n        if (props.graph.type !== \"polygon\") {\n            throw makeInvalidTypeError(\"getPolygonEquationString\", \"polygon\");\n        }\n        const coords = InteractiveGraph.getPolygonCoords(props.graph, props);\n        return _.map(coords, function (coord) {\n            return \"(\" + coord.join(\", \") + \")\";\n        }).join(\" \");\n    }\n\n    static getAngleEquationString(props: Props): string {\n        if (props.graph.type !== \"angle\") {\n            throw makeInvalidTypeError(\"getAngleEquationString\", \"angle\");\n        }\n        const coords = InteractiveGraph.getAngleCoords(props.graph, props);\n        const angle = GraphUtils.findAngle(coords[2], coords[0], coords[1]);\n        return (\n            angle.toFixed(0) +\n            \"\\u00B0 angle\" +\n            \" at (\" +\n            coords[1].join(\", \") +\n            \")\"\n        );\n    }\n\n    static validate(\n        // TODO(kevinb): rename state to userInput\n        // state === userInput\n        state: PerseusGraphType,\n        rubric: Rubric,\n        component: any,\n    ): PerseusScore {\n        // When nothing has moved, there will neither be coords nor the\n        // circle's center/radius fields. When those fields are absent, skip\n        // all these checks; just go mark the answer as empty.\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'coords' does not exist on type 'PerseusGraphType'. | TS2339 - Property 'center' does not exist on type 'PerseusGraphType'. | TS2339 - Property 'radius' does not exist on type 'PerseusGraphType'.\n        const hasValue = !!(state.coords || (state.center && state.radius));\n\n        if (state.type === rubric.correct.type && hasValue) {\n            if (\n                state.type === \"linear\" &&\n                rubric.correct.type === \"linear\" &&\n                state.coords != null\n            ) {\n                const guess = state.coords;\n                const correct = rubric.correct.coords;\n\n                // If both of the guess points are on the correct line, it's\n                // correct.\n                if (\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                    collinear(correct[0], correct[1], guess[0]) &&\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                    collinear(correct[0], correct[1], guess[1])\n                ) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"linear-system\" &&\n                rubric.correct.type === \"linear-system\" &&\n                state.coords != null\n            ) {\n                const guess = state.coords;\n                const correct = rubric.correct.coords as ReadonlyArray<\n                    ReadonlyArray<Coord>\n                >;\n\n                if (\n                    (collinear(correct[0][0], correct[0][1], guess[0][0]) &&\n                        collinear(correct[0][0], correct[0][1], guess[0][1]) &&\n                        collinear(correct[1][0], correct[1][1], guess[1][0]) &&\n                        collinear(correct[1][0], correct[1][1], guess[1][1])) ||\n                    (collinear(correct[0][0], correct[0][1], guess[1][0]) &&\n                        collinear(correct[0][0], correct[0][1], guess[1][1]) &&\n                        collinear(correct[1][0], correct[1][1], guess[0][0]) &&\n                        collinear(correct[1][0], correct[1][1], guess[0][1]))\n                ) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"quadratic\" &&\n                rubric.correct.type === \"quadratic\" &&\n                state.coords != null\n            ) {\n                // If the parabola coefficients match, it's correct.\n                const guessCoeffs = this.getQuadraticCoefficients(state.coords);\n                const correctCoeffs = this.getQuadraticCoefficients(\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly Coord[] | undefined' is not assignable to parameter of type 'readonly Coord[]'.\n                    rubric.correct.coords,\n                );\n                if (deepEq(guessCoeffs, correctCoeffs)) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"sinusoid\" &&\n                rubric.correct.type === \"sinusoid\" &&\n                state.coords != null\n            ) {\n                const guessCoeffs = this.getSinusoidCoefficients(state.coords);\n                const correctCoeffs = this.getSinusoidCoefficients(\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly Coord[] | undefined' is not assignable to parameter of type 'readonly Coord[]'.\n                    rubric.correct.coords,\n                );\n\n                const canonicalGuessCoeffs =\n                    canonicalSineCoefficients(guessCoeffs);\n                const canonicalCorrectCoeffs =\n                    canonicalSineCoefficients(correctCoeffs);\n                // If the canonical coefficients match, it's correct.\n                if (deepEq(canonicalGuessCoeffs, canonicalCorrectCoeffs)) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"circle\" &&\n                rubric.correct.type === \"circle\"\n            ) {\n                if (\n                    deepEq(state.center, rubric.correct.center) &&\n                    eq(state.radius, rubric.correct.radius)\n                ) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"point\" &&\n                rubric.correct.type === \"point\" &&\n                state.coords != null\n            ) {\n                let correct = InteractiveGraph.getPointCoords(\n                    rubric.correct,\n                    component,\n                );\n                const guess = state.coords?.slice();\n                correct = correct.slice();\n                // Everything's already rounded so we shouldn't need to do an\n                // eq() comparison but _.isEqual(0, -0) is false, so we'll use\n                // eq() anyway. The sort should be fine because it'll stringify\n                // it and -0 converted to a string is \"0\"\n                guess?.sort();\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'sort' does not exist on type 'readonly Coord[]'.\n                correct.sort();\n                if (deepEq(guess, correct)) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"polygon\" &&\n                rubric.correct.type === \"polygon\" &&\n                state.coords != null\n            ) {\n                const guess: Array<Coord> = state.coords?.slice();\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'Coord[] | undefined' is not assignable to type 'Coord[]'.\n                const correct: Array<Coord> = rubric.correct.coords?.slice();\n\n                let match;\n                if (rubric.correct.match === \"similar\") {\n                    match = similar(guess, correct, Number.POSITIVE_INFINITY);\n                } else if (rubric.correct.match === \"congruent\") {\n                    match = similar(guess, correct, knumber.DEFAULT_TOLERANCE);\n                } else if (rubric.correct.match === \"approx\") {\n                    match = similar(guess, correct, 0.1);\n                } else {\n                    /* exact */\n                    guess.sort();\n                    correct.sort();\n                    match = deepEq(guess, correct);\n                }\n\n                if (match) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"segment\" &&\n                rubric.correct.type === \"segment\" &&\n                state.coords != null\n            ) {\n                let guess = state.coords.slice();\n                let correct = rubric.correct.coords?.slice();\n                guess = _.invoke(guess, \"sort\").sort();\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(readonly Coord[])[] | undefined' is not assignable to parameter of type 'Collection<any>'.\n                correct = _.invoke(correct, \"sort\").sort();\n                if (deepEq(guess, correct)) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"ray\" &&\n                rubric.correct.type === \"ray\" &&\n                state.coords != null\n            ) {\n                const guess = state.coords;\n                const correct = rubric.correct.coords;\n                if (\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                    deepEq(guess[0], correct[0]) &&\n                    // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                    collinear(correct[0], correct[1], guess[1])\n                ) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            } else if (\n                state.type === \"angle\" &&\n                rubric.correct.type === \"angle\"\n            ) {\n                const guess = state.coords;\n                const correct = rubric.correct.coords;\n\n                let match;\n                if (rubric.correct.match === \"congruent\") {\n                    const angles = _.map([guess, correct], function (coords) {\n                        const angle = GraphUtils.findAngle(\n                            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                            coords[2],\n                            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                            coords[0],\n                            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'.\n                            coords[1],\n                        );\n                        return (angle + 360) % 360;\n                    });\n                    // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n                    match = eq(...angles);\n                } else {\n                    /* exact */\n                    match = // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                        deepEq(guess[1], correct[1]) &&\n                        // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                        collinear(correct[1], correct[0], guess[0]) &&\n                        // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n                        collinear(correct[1], correct[2], guess[2]);\n                }\n\n                if (match) {\n                    return {\n                        type: \"points\",\n                        earned: 1,\n                        total: 1,\n                        message: null,\n                    };\n                }\n            }\n        }\n\n        // The input wasn't correct, so check if it's a blank input or if it's\n        // actually just wrong\n        if (!hasValue || _.isEqual(state, rubric.graph)) {\n            // We're where we started.\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 1,\n            message: null,\n        };\n    }\n\n    static getUserInputFromProps(props: Props): PerseusGraphType {\n        return props.graph;\n    }\n}\n\nexport default {\n    name: \"interactive-graph\",\n    displayName: \"Interactive graph\",\n    widget: InteractiveGraph,\n} as WidgetExports<typeof InteractiveGraph>;\n","export const black = \"#000000\";\nexport const grayDarker = \"#333333\";\nexport const grayDark = \"#555555\";\nexport const gray = \"#999999\";\nexport const grayLight = \"#AAAAAA\";\nexport const grayLighter = \"#DDDDDD\";\nexport const white = \"#FFFFFF\";\nexport const blue = \"#005A88\";\nexport const blueDark = \"#2C3747\";\nexport const green = \"#76A005\";\nexport const red = \"#CF5044\";\nexport const yellow = \"#FFC40D\";\nexport const orange = \"#BF4F04\";\nexport const pink = \"#C3325F\";\nexport const purple = \"#7A43B6\";\nexport const bodyBackground = \"#FFFFFF\";\nexport const textColor = \"#444444\";\nexport const linkColor = \"#005987\";\nexport const linkColorHover = \"#678D00\";\nexport const sansFontFamily = \"'Helvetica Neue',Helvetica,Arial,sans-serif\";\nexport const serifFontFamily = \"Georgia,'Times New Roman',Times,serif\";\nexport const monoFontFamily = \"Monaco,Menlo,Consolas,'Courier New',monospace\";\nexport const baseFontSize = \"14px\";\nexport const baseFontFamily = \"inherit\";\nexport const baseLineHeight = \"20px\";\nexport const altFontFamily = \"Georgia,'Times New Roman',Times,serif\";\nexport const headingsFontFamily = \"inherit\";\nexport const headingsFontWeight = \"bold\";\nexport const headingsColor = \"inherit\";\nexport const fontSizeLarge = \"18px\";\nexport const fontSizeSmall = \"12px\";\nexport const fontSizeMini = \"10.5px\";\nexport const paddingLarge = \"11px 19px\";\nexport const paddingSmall = \"2px 10px\";\nexport const paddingMini = \"0 6px\";\nexport const baseBorderRadius = \"4px\";\nexport const borderRadiusLarge = \"6px\";\nexport const borderRadiusSmall = \"3px\";\nexport const tableBackground = \"#000000\";\nexport const tableBackgroundAccent = \"#F9F9F9\";\nexport const tableBackgroundHover = \"#F5F5F5\";\nexport const tableBorder = \"#DDDDDD\";\nexport const btnBackground = \"#FFFFFF\";\nexport const btnBackgroundHighlight = \"rgb(230, 230, 230)\";\nexport const btnBorder = \"#CCCCCC\";\nexport const btnPrimaryBackground = \"#0088CC\";\nexport const btnPrimaryBackgroundHighlight = \"rgb(0, 68, 204)\";\nexport const btnInfoBackground = \"#5BC0DE\";\nexport const btnInfoBackgroundHighlight = \"#2F96B4\";\nexport const btnSuccessBackground = \"#62C462\";\nexport const btnSuccessBackgroundHighlight = \"#51A351\";\nexport const btnWarningBackground = \"rgb(251, 180, 81)\";\nexport const btnWarningBackgroundHighlight = \"#F89406\";\nexport const btnDangerBackground = \"#EE5F5B\";\nexport const btnDangerBackgroundHighlight = \"#BD362F\";\nexport const btnInverseBackground = \"#444444\";\nexport const btnInverseBackgroundHighlight = \"#222222\";\nexport const inputBackground = \"#FFFFFF\";\nexport const inputBorder = \"#CCCCCC\";\nexport const inputBorderRadius = \"4px\";\nexport const inputDisabledBackground = \"#EEEEEE\";\nexport const formActionsBackground = \"#F5F5F5\";\nexport const inputHeight = \"30px\";\nexport const dropdownBackground = \"#FFFFFF\";\nexport const dropdownBorder = \"rgba(0, 0, 0, 0.2)\";\nexport const dropdownDividerTop = \"#E5E5E5\";\nexport const dropdownDividerBottom = \"#FFFFFF\";\nexport const dropdownLinkColor = \"#333333\";\nexport const dropdownLinkColorHover = \"#FFFFFF\";\nexport const dropdownLinkColorActive = \"#FFFFFF\";\nexport const dropdownLinkBackgroundActive = \"#0088CC\";\nexport const dropdownLinkBackgroundHover = \"#0088CC\";\nexport const zindexDropdown = 1000;\nexport const zindexPopover = 1010;\nexport const zindexTooltip = 1030;\nexport const zindexFixedNavbar = 1030;\nexport const zindexHeader = 1060;\nexport const zindexModalBackdrop = 1070;\nexport const zindexModal = 1080;\nexport const zindexAboveModal = 1090;\nexport const iconSpritePath = \"../img/glyphicons-halflings.png\";\nexport const iconWhiteSpritePath = \"../img/glyphicons-halflings-white.png\";\nexport const placeholderText = \"#999999\";\nexport const hrBorder = \"#EEEEEE\";\nexport const horizontalComponentOffset = \"180px\";\nexport const wellBackground = \"#F5F5F5\";\nexport const navbarCollapseWidth = \"979px\";\nexport const navbarCollapseDesktopWidth = \"980px\";\nexport const navbarHeight = \"40px\";\nexport const navbarBackgroundHighlight = \"#FFFFFF\";\nexport const navbarBackground = \"rgb(242, 242, 242)\";\nexport const navbarBorder = \"rgb(212, 212, 212)\";\nexport const navbarText = \"#777777\";\nexport const navbarLinkColor = \"#777777\";\nexport const navbarLinkColorHover = \"#333333\";\nexport const navbarLinkColorActive = \"#555555\";\nexport const navbarLinkBackgroundHover = \"#000000\";\nexport const navbarLinkBackgroundActive = \"rgb(230, 230, 230)\";\nexport const navbarBrandColor = \"#777777\";\nexport const navbarInverseBackground = \"#111111\";\nexport const navbarInverseBackgroundHighlight = \"#222222\";\nexport const navbarInverseBorder = \"#252525\";\nexport const navbarInverseText = \"#999999\";\nexport const navbarInverseLinkColor = \"#999999\";\nexport const navbarInverseLinkColorHover = \"#FFFFFF\";\nexport const navbarInverseLinkColorActive = \"#FFFFFF\";\nexport const navbarInverseLinkBackgroundHover = \"#000000\";\nexport const navbarInverseLinkBackgroundActive = \"#111111\";\nexport const navbarInverseSearchBackground = \"rgb(82, 82, 82)\";\nexport const navbarInverseSearchBackgroundFocus = \"#FFFFFF\";\nexport const navbarInverseSearchBorder = \"#111111\";\nexport const navbarInverseSearchPlaceholderColor = \"#CCCCCC\";\nexport const navbarInverseBrandColor = \"#999999\";\nexport const paginationBackground = \"#FFFFFF\";\nexport const paginationBorder = \"#DDDDDD\";\nexport const paginationActiveBackground = \"#F5F5F5\";\nexport const heroUnitBackground = \"#EEEEEE\";\nexport const heroUnitHeadingColor = \"inherit\";\nexport const heroUnitLeadColor = \"inherit\";\nexport const warningText = \"#C09853\";\nexport const warningBackground = \"#FCF8E3\";\nexport const warningBorder = \"rgb(251, 239, 213)\";\nexport const errorText = \"#B94A48\";\nexport const errorBackground = \"#F2DEDE\";\nexport const errorBorder = \"rgb(238, 211, 215)\";\nexport const successText = \"#468847\";\nexport const successBackground = \"#DFF0D8\";\nexport const successBorder = \"rgb(212, 232, 197)\";\nexport const infoText = \"#4A7C17\";\nexport const infoBackground = \"#EDF2DF\";\nexport const infoBorder = \"rgb(228, 232, 197)\";\nexport const tooltipColor = \"#FFFFFF\";\nexport const tooltipBackground = \"#000000\";\nexport const tooltipArrowWidth = \"5px\";\nexport const tooltipArrowColor = \"#000000\";\nexport const popoverBackground = \"#FFFFFF\";\nexport const popoverArrowWidth = \"10px\";\nexport const popoverArrowColor = \"#FFFFFF\";\nexport const popoverTitleBackground = \"rgb(247, 247, 247)\";\nexport const popoverArrowOuterWidth = \"11px\";\nexport const popoverArrowOuterColor = \"rgba(0, 0, 0, 0.25)\";\nexport const gridColumns = \"12\";\nexport const gridColumnWidth = \"60px\";\nexport const gridGutterWidth = \"20px\";\nexport const gridRowWidth = \"940px\";\nexport const gridColumnWidth1200 = \"70px\";\nexport const gridGutterWidth1200 = \"30px\";\nexport const gridRowWidth1200 = \"1170px\";\nexport const gridColumnWidth768 = \"42px\";\nexport const gridGutterWidth768 = \"20px\";\nexport const gridRowWidth768 = \"724px\";\nexport const fluidGridColumnWidth = \"6.382978723404255%\";\nexport const fluidGridGutterWidth = \"2.127659574468085%\";\nexport const fluidGridColumnWidth1200 = \"5.982905982905983%\";\nexport const fluidGridGutterWidth1200 = \"2.564102564102564%\";\nexport const fluidGridColumnWidth768 = \"5.801104972375691%\";\nexport const fluidGridGutterWidth768 = \"2.7624309392265194%\";\nexport const kaGreen = \"#71B307\";\nexport const kaGreenLight = \"#BED47A\";\nexport const kaBlue = \"#314453\";\nexport const kaBlueLight = \"#4D6779\";\nexport const grayExtraDark = \"#111111\";\nexport const grayExtraLight = \"#EEEEEE\";\nexport const graySuperLight = \"#F7F7F7\";\nexport const whiteDark = \"#FDFDFD\";\nexport const dark = \"#21242C\";\nexport const blueDarkUnsaturated = \"#3B414E\";\nexport const blueDarkSaturated = \"#1F3043\";\nexport const blueLight = \"#A9C0D1\";\nexport const greenLight = \"#C6D1AD\";\nexport const greenDark = \"#356700\";\nexport const yellowGreen = \"#9DB63B\";\nexport const okGreen = \"#A7CF5B\";\nexport const alertRed = \"#C42420\";\nexport const coral = \"#EE6666\";\nexport const grayBlue = \"#9AB3B9\";\nexport const lightPageBackground = \"#FDFDFD\";\nexport const yclaBlue = \"#49BAD5\";\nexport const yclaTeal = \"#56D0B3\";\nexport const yclaTealDark = \"#50C1A7\";\nexport const yclaGreenDark = \"#3D9A82\";\nexport const yclaGreen = \"#81C262\";\nexport const learnstormBlue = \"#4898FC\";\nexport const homepageBlue = \"#46A8BF\";\nexport const backgroundBlue = \"#00294A\";\nexport const teacherSignupBlue = \"#335d7d\";\nexport const homepageGreen = \"#2B8E7B\";\nexport const streakColor = \"#F79734\";\nexport const facebookColor = \"#1A60A2\";\nexport const blueGoogleColor = \"#2CAFE2\";\nexport const redGoogleColor = \"#BF4434\";\nexport const homepageColor = \"#2D585E\";\nexport const lightTextColor = \"#898989\";\nexport const fontSizeTiny = \"11px\";\nexport const fontSizeNormal = \"14px\";\nexport const fontSizeMedium = \"16px\";\nexport const fontSizeExtraLarge = \"24px\";\nexport const fontSizeHuge = \"36px\";\nexport const fontSizeBakana = \"48px\";\nexport const fontSizeBananas = \"60px\";\nexport const fixedWidthFontFamily =\n    \"'Helvetica Neue',Helvetica,Arial,sans-serif\";\nexport const contentPadding = \"20px\";\nexport const primaryButtonBackground = \"#89B908\";\nexport const primaryButtonBorder = \"#76A005\";\nexport const buttonTextColor = \"rgb(122, 122, 122)\";\nexport const buttonBorderRadius = \"3px\";\nexport const basicBorderColor = \"#CCCCCC\";\nexport const minContainerWidth = \"1000px\";\nexport const maxContainerWidth = \"1200px\";\nexport const formHintColor = \"#999999\";\nexport const guidelineExampleText = \"#606060\";\nexport const hoverCardWidth = \"450px\";\nexport const menuHighlightColor = \"#96AB4F\";\nexport const menuHighlightBorderColor = \"#76A005\";\nexport const menuActiveTextColor = \"#FFFFFF\";\nexport const menuInactiveTextColor = \"#444444\";\nexport const menuSubheaderTextColor = \"rgb(120, 120, 120)\";\nexport const menuBorderColor = \"#94A170\";\nexport const unreadBackgroundColor = \"#ECEEF4\";\nexport const menuLineHeight = \"18px\";\nexport const menuSubheaderLineHeight = \"17px\";\nexport const menuSubheaderFontSize = \"9px\";\nexport const notificationBarColor = \"#4858A4\";\nexport const modalBodyTopPadding = \"20px\";\nexport const modalDialogPadding = \"15px\";\nexport const modalSectionPadding = \"9px\";\nexport const mathDomain1 = \"#11ACCD\";\nexport const mathDomain2 = \"#63D9EA\";\nexport const mathDomain3 = \"#027d97\";\nexport const mathDomain4 = \"#085566\";\nexport const partnerContentDomain1 = \"#01A995\";\nexport const partnerContentDomain2 = \"#01D1C1\";\nexport const partnerContentDomain3 = \"#208170\";\nexport const partnerContentDomain4 = \"#144F44\";\nexport const csDomain1 = \"#1FAB54\";\nexport const csDomain2 = \"#74CF70\";\nexport const csDomain3 = \"#0D923F\";\nexport const csDomain4 = \"#085E29\";\nexport const economicsDomain1 = \"#E07D10\";\nexport const economicsDomain2 = \"#FFBE26\";\nexport const economicsDomain3 = \"#A75A05\";\nexport const economicsDomain4 = \"#953C02\";\nexport const collegeCareersMoreDomain1 = \"#01A995\";\nexport const collegeCareersMoreDomain2 = \"#01D1C1\";\nexport const collegeCareersMoreDomain3 = \"#208170\";\nexport const collegeCareersMoreDomain4 = \"#144F44\";\nexport const humanitiesDomain1 = \"#E84D39\";\nexport const humanitiesDomain2 = \"#FF8482\";\nexport const humanitiesDomain3 = \"#BE2612\";\nexport const humanitiesDomain4 = \"#8C1C0D\";\nexport const gtpDomain1 = \"#1865F2\";\nexport const gtpDomain2 = \"#1865F2\";\nexport const gtpDomain3 = \"#1865F2\";\nexport const gtpDomain4 = \"#1865F2\";\nexport const scienceDomain1 = \"#CA337C\";\nexport const scienceDomain2 = \"#FF92C6\";\nexport const scienceDomain3 = \"#9E034E\";\nexport const scienceDomain4 = \"#6B0235\";\nexport const testPrepDomain1 = \"#1865F2\";\nexport const testPrepDomain2 = \"#1865F2\";\nexport const testPrepDomain3 = \"#1865F2\";\nexport const testPrepDomain4 = \"#1865F2\";\nexport const defaultDomain1 = \"#1865F2\";\nexport const defaultDomain2 = \"#66afe9\";\nexport const defaultDomain3 = \"#1152b0\";\nexport const defaultDomain4 = \"#0d3d82\";\nexport const defaultDomainColor = \"#314453\";\nexport const defaultSubjectColor = \"#4D6779\";\nexport const defaultTopicColor = \"#6A8DA6\";\nexport const defaultHoverColor = \"#314453\";\nexport const defaultLinkColor = \"#314453\";\nexport const defaultLinkHoverColor = \"#6A8DA6\";\nexport const scienceDomainColor = \"#94424F\";\nexport const scienceSubjectColor = \"#9D4A5A\";\nexport const scienceTopicColor = \"#C55F73\";\nexport const scienceHoverColor = \"#94424F\";\nexport const scienceLinkColor = \"#94424F\";\nexport const scienceLinkHoverColor = \"#C55F73\";\nexport const humanitiesDomainColor = \"#AD3434\";\nexport const humanitiesSubjectColor = \"#C13B31\";\nexport const humanitiesTopicColor = \"#D24A45\";\nexport const humanitiesHoverColor = \"#AD3434\";\nexport const humanitiesLinkColor = \"#AD3434\";\nexport const humanitiesLinkHoverColor = \"#D24A45\";\nexport const economicsDomainColor = \"#B77033\";\nexport const economicsSubjectColor = \"#BF7B34\";\nexport const economicsTopicColor = \"#D1933B\";\nexport const economicsHoverColor = \"#B77033\";\nexport const economicsLinkColor = \"#B77033\";\nexport const economicsLinkHoverColor = \"#D1933B\";\nexport const csDomainColor = \"#437A39\";\nexport const csSubjectColor = \"#53893E\";\nexport const csTopicColor = \"#689B51\";\nexport const csHoverColor = \"#437A39\";\nexport const csLinkColor = \"#437A39\";\nexport const csLinkHoverColor = \"#689B51\";\nexport const partnerContentDomainColor = \"#218270\";\nexport const partnerContentSubjectColor = \"#2C8D7B\";\nexport const partnerContentTopicColor = \"#329A86\";\nexport const partnerContentHoverColor = \"#218270\";\nexport const partnerContentLinkColor = \"#218270\";\nexport const partnerContentLinkHoverColor = \"#329A86\";\nexport const essayDomainColor = \"#0071B3\";\nexport const mathDomainColor = \"#1C758A\";\nexport const mathSubjectColor = \"#46A8BF\";\nexport const mathTopicColor = \"#4FBAD4\";\nexport const mathHoverColor = \"#1C758A\";\nexport const mathLinkColor = \"#1C758A\";\nexport const mathLinkHoverColor = \"#4FBAD4\";\nexport const testPrepDomainColor = \"#644172\";\nexport const testPrepSubjectColor = \"#7E5F8E\";\nexport const testPrepTopicColor = \"#9A72AC\";\nexport const testPrepHoverColor = \"#644172\";\nexport const testPrepLinkColor = \"#644172\";\nexport const testPrepLinkHoverColor = \"#9A72AC\";\nexport const collegeCareersMoreDomainColor = \"#218270\";\nexport const collegeCareersMoreSubjectColor = \"#2C8D7B\";\nexport const collegeCareersMoreTopicColor = \"#329A86\";\nexport const collegeCareersMoreHoverColor = \"#218270\";\nexport const collegeCareersMoreLinkColor = \"#218270\";\nexport const collegeCareersMoreLinkHoverColor = \"#329A86\";\nexport const colorProficient = \"#1C758A\";\nexport const colorPracticed = \"rgb(158, 221, 235)\";\nexport const colorMastery1 = \"rgb(90, 197, 221)\";\nexport const colorMastery2 = \"rgb(42, 174, 203)\";\nexport const colorMastery3 = \"#1C758A\";\nexport const colorSuggested = \"#73982C\";\nexport const colorReview = \"#E35D04\";\nexport const colorNotStarted = \"#CCCCCC\";\nexport const colorStarted = \"#C7E5F7\";\nexport const colorStruggling = \"#C30202\";\nexport const colorPersonal = \"#00809C\";\nexport const colorPractice = \"#96D9FF\";\nexport const colorEnergyPoints = \"#005987\";\nexport const pureSmMin = \"568px\";\nexport const pureMdMin = \"768px\";\nexport const pureLgMin = \"1024px\";\nexport const pureXlMin = \"1200px\";\nexport const pureXsMax = \"567px\";\nexport const pureSmMax = \"767px\";\nexport const pureMdMax = \"1023px\";\nexport const pureLgMax = \"1199px\";\n","import {\n    alertRed,\n    homepageBlue,\n    kaGreen,\n    kaGreenLight,\n    kaBlue,\n    kaBlueLight,\n    learnstormBlue,\n    backgroundBlue,\n} from \"./global-constants\";\nimport mediaQueries from \"./media-queries\";\n\nimport type {CSSProperties, StyleDeclaration} from \"aphrodite\";\n\nexport const colors = {\n    white: \"#FFFFFF\",\n    gray98: \"#FAFAFA\",\n    gray97: \"#F6F7F7\",\n    gray95: \"#F0F1F2\",\n    gray90: \"#E3E5E6\",\n    gray85: \"#D6D8DA\",\n    gray76: \"#BABEC2\",\n    gray72: \"#999A9D\",\n    gray68: \"#888D93\",\n    gray55: \"#707378\",\n    gray41: \"#626569\",\n    gray25: \"#3B3E40\",\n    gray17: \"#21242C\",\n    gray10: \"#1499af\",\n    black: \"#000000\",\n\n    // These colors are pulled out from constants.js, which is itself generated\n    // from variables.less. We should probably avoid duplicating these here.\n    alertRed,\n    homepageBlue,\n    kaBlue,\n    kaBlueLight,\n    kaGreen,\n    kaGreenLight,\n    learnstormBlue,\n    backgroundBlue,\n\n    adminGreen: \"#78C008\",\n    kaBlueExtraLight: \"#39c2db\",\n    kaBlueHover: \"#0c7f99\",\n    kaGreenHover: \"#518005\",\n\n    // Domain-agnostic colors related to the study guide experience in the\n    // content library.\n    skyDark: \"#001f4d\",\n    recommendationGold: \"#ffbe26\",\n    starAced: \"#ff9c39\",\n\n    // We interploate the domain colors into this colors object for\n    // historical reasons, but everyone using domain-specific colors\n    // should switch to using the domainColors() function to look up\n    // colors instead.\n    //\n    // TODO(davidflanagan): remove this line once everything is\n    // working correctly with the domainColors() accessor.\n    // ...domainToColorsMap,\n    // mission: missionColors,\n\n    // Colors for various OAuth providers\n    google: \"#C1432f\",\n    modernGoogle: \"#be2612\",\n    modernGoogleHover: \"#8c1c0d\",\n    facebook: \"#4267B2\",\n    modernFacebook: \"#4267B2\",\n    modernFacebookHover: \"#00294a\",\n\n    wonderBlocksGold: \"#FFB100\",\n    wonderBlocksLightBlue: \"#37C5FD\",\n\n    // We're using rgba instead of opacity to avoid affecting the focus outline\n    // when we just want to make the color transparent.\n    breadcrumbs: \"rgba(255, 255, 255, 0.7)\",\n} as const;\n\nexport const borderRadius = 4;\n\nconst breadcrumbStyles: CSSProperties = {\n    color: colors.breadcrumbs,\n    fontFamily: \"inherit\",\n    fontSize: 15,\n    fontWeight: \"bold\",\n    letterSpacing: 0.8,\n    lineHeight: \"19px\",\n    textTransform: \"uppercase\",\n    // Disable subpixel antialiasing for OSX (improves light on dark text)\n    MozOsxFontSmoothing: \"grayscale\",\n    WebkitFontSmoothing: \"antialiased\",\n};\n\nexport const fonts = {\n    // The body of the page is setup to use 'Helvetica' by default and\n    // 'Lato' if/once it downloads. For your elements to follow this\n    // pattern, all you need is to make the text in your element\n    // inherit from the body using the \"inherit\" value.\n    regular: \"inherit\",\n} as const;\n\nexport const typography: StyleDeclaration = {\n    // For subject names\n    subjectHeadingDesktop: {\n        fontFamily: \"inherit\",\n        fontSize: 50,\n        fontWeight: \"bold\",\n        lineHeight: \"61px\",\n    },\n    subjectHeadingMobile: {\n        fontFamily: \"inherit\",\n        fontSize: 35,\n        fontWeight: \"bold\",\n        lineHeight: \"37px\",\n    },\n\n    // For the most important thing on the page\n    conceptHeadingDesktop: {\n        fontFamily: \"inherit\",\n        fontSize: 35,\n        fontWeight: \"bold\",\n        lineHeight: \"37px\",\n    },\n    conceptHeadingMobile: {\n        fontFamily: \"inherit\",\n        fontSize: 23,\n        fontWeight: \"bold\",\n        lineHeight: \"27px\",\n    },\n\n    // For sections or modules\n    subheadingDesktop: {\n        fontFamily: \"inherit\",\n        fontSize: 23,\n        fontWeight: \"bold\",\n        lineHeight: \"27px\",\n    },\n    subheadingMobile: {\n        fontFamily: \"inherit\",\n        fontSize: 20,\n        fontWeight: \"bold\",\n        lineHeight: \"24px\",\n    },\n\n    smallSubheadingDesktop: {\n        fontFamily: \"inherit\",\n        fontSize: 20,\n        lineHeight: 1.25,\n    },\n\n    smallSubheadingMobile: {\n        fontFamily: \"inherit\",\n        fontSize: 15,\n        lineHeight: 1.25,\n    },\n\n    // For callouts\n    smallHeading: {\n        color: colors.gray25,\n        fontFamily: \"inherit\",\n        fontSize: 17,\n        fontWeight: \"bold\",\n        lineHeight: \"23px\",\n    },\n    smallHeadingMobile: {\n        color: colors.gray25,\n        fontFamily: \"inherit\",\n        fontSize: 15,\n        fontWeight: \"bold\",\n        lineHeight: \"18px\",\n    },\n\n    // Accent headings\n    accentHeading: {\n        color: colors.gray68,\n        fontFamily: \"inherit\",\n        fontSize: 15,\n        fontWeight: \"bold\",\n        letterSpacing: 0.8,\n        lineHeight: \"19px\",\n        textTransform: \"uppercase\",\n    },\n\n    bodyLarge: {\n        // For articles with multiple paragraphs\n        fontFamily: fonts.regular,\n        fontSize: 20,\n        lineHeight: \"30px\",\n    },\n    bodySmall: {\n        // For small blocks of copy\n        fontFamily: fonts.regular,\n        fontSize: 17,\n        fontWeight: \"normal\",\n        lineHeight: \"23px\",\n    },\n    bodySmallBold: {\n        // For small blocks of copy\n        fontFamily: fonts.regular,\n        fontSize: 17,\n        fontWeight: \"bold\",\n        lineHeight: \"23px\",\n    },\n    bodyXsmall: {\n        // For metadata, descriptions, etc\n        fontFamily: fonts.regular,\n        fontSize: 15,\n        lineHeight: \"22px\",\n    },\n    bodyXsmallBold: {\n        // For emphasized metadata, descriptions, etc\n        fontFamily: \"inherit\",\n        fontSize: 15,\n        fontWeight: \"bold\",\n        lineHeight: \"22px\",\n    },\n    breadcrumb: breadcrumbStyles, // For in-page tabs, breadcrumbs\n    breadcrumbSmall: {\n        // For in-page tabs and leaf page breadcrumbs\n        ...breadcrumbStyles,\n        fontSize: 12,\n        lineHeight: \"13px\",\n    },\n    labelLarge: {\n        // For chiclets and thumbnail titles\n        fontFamily: \"inherit\",\n        fontSize: 23,\n        fontWeight: \"bold\",\n        lineHeight: \"27px\",\n    },\n    labelMedium: {\n        // For chiclets and thumbnail titles\n        fontFamily: \"inherit\",\n        fontSize: 15,\n        fontWeight: \"bold\",\n        lineHeight: \"18px\",\n    },\n    labelSmall: {\n        // Generally used with labelLarge, for breadcrumbs in thumbnails\n        fontFamily: fonts.regular,\n        fontSize: 12,\n        lineHeight: \"14px\",\n    },\n    caption: {\n        // For image captions\n        fontFamily: fonts.regular,\n        fontSize: 14,\n        fontStyle: \"italic\",\n        lineHeight: \"17px\",\n    },\n    desktopScalingOnMobile: {\n        // For when you need Mobile Safari and friends to stick to desktop\n        // sizes\n        MozTextSizeAdjust: \"100%\",\n        MsTextSizeAdjust: \"100%\",\n        WebkitTextSizeAdjust: \"100%\",\n    } as any,\n    // TODO (josh): This should move to within <ModalHeader>\n    modalSubtitle: {\n        fontSize: 12,\n        lineHeight: 1.65,\n        // NOTE (josh): Font smoothing used here to create a 'medium' weight\n        // font, between normal and bold, on webkit browsers.\n        // This prop is an a11y risk when used on non-bold text, since it\n        // makes text very thin, but it's fine on bold text.\n        WebkitFontSmoothing: \"antialiased\",\n        fontWeight: \"bold\",\n    },\n\n    // HACK(kevinb): temporary wonder blocks styles for header only\n    // TODO(kevinb): use components from wonder-blocks-typography instead\n    wonderBlocksHeader: {\n        paddingLeft: 16,\n        paddingRight: 16,\n        paddingBottom: 24,\n        paddingTop: 34,\n\n        [mediaQueries.mdOrLarger]: {\n            paddingBottom: 32,\n        },\n    },\n\n    // HACK(kevinb): temporary wonder blocks styles for header only\n    // TODO(kevinb): use components from wonder-blocks-typography instead\n    wonderBlocksTitle: {\n        color: colors.white,\n        fontWeight: 900, // \"Black\" weight\n        fontSize: 28,\n        lineHeight: \"32px\",\n        margin: 0,\n\n        [mediaQueries.mdOrLarger]: {\n            fontSize: 36,\n            lineHeight: \"40px\",\n        },\n    },\n\n    // HACK(kevinb): temporary wonder blocks styles for header only\n    // TODO(kevinb): use components from wonder-blocks-typography instead\n    wonderBlocksLabelLarge: {\n        fontSize: 16,\n        lineHeight: \"20px\",\n        fontWeight: 700, // Bold\n    },\n};\n","/**\n * Controlled list of answer choices, supports arrow key navigation.\n *\n * Enables single or multiple answers selection, using radio or checkbox input\n * types, respectively.\n */\n\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport Icon from \"../../components/icon\";\nimport {iconCheckMedium} from \"../../icon-paths\";\nimport Renderer from \"../../renderer\";\nimport sharedStyles from \"../../styles/shared\";\n\nexport type AnswerType = {\n    // The answer string, can be plain text or a KaTeX expression.\n    content: string;\n    // Whether the answer is selected.\n    checked: boolean;\n};\n\ntype AnswerProps = AnswerType & {\n    // The input control type to use.\n    inputType: \"checkbox\" | \"radio\";\n    // The radio group name.\n    groupName: string;\n    // The answer position within choices.\n    index: number;\n    // Callback to handle change to answer selection.\n    onChange: (checked: boolean) => void;\n    // Callbacks to handle navigating between adjacent answers.\n    onFocusPrevAnswer: () => void;\n    onFocusNextAnswer: () => void;\n};\n\ntype AnswerState = {\n    // Whether answer is currently focused.\n    isInputFocused: boolean;\n};\n\ntype AnswerChoicesProps = {\n    // The list of possible answers in a specific order.\n    choices: ReadonlyArray<AnswerType>;\n    // Whether multiple answers may be chosen.\n    multipleSelect: boolean;\n    // Callback to handle change to answer choices selection.\n    onChange: (selection: ReadonlyArray<boolean>) => void;\n};\n\ntype AnswerChoicesState = {\n    // Globally unique radio group name.\n    groupName: string;\n};\n\nclass AnswerChoice extends React.Component<AnswerProps, AnswerState> {\n    // The radio button or checkbox input control.\n    _input: HTMLInputElement | null | undefined;\n\n    state: AnswerState = {\n        isInputFocused: false,\n    };\n\n    focusInput() {\n        if (this._input) {\n            this._input.focus();\n        }\n    }\n\n    handleClick(e: React.MouseEvent<HTMLDivElement>) {\n        const {checked, onChange} = this.props;\n\n        e.preventDefault();\n\n        // We manually handle clicks, setting focus on the input control.\n        this.focusInput();\n\n        // And toggling the answer selection state.\n        onChange(!checked);\n    }\n\n    handleKeyDown(e: React.KeyboardEvent<HTMLDivElement>) {\n        const {onFocusPrevAnswer, onFocusNextAnswer} = this.props;\n\n        // This may override built-in browser arrow key navigation for radio\n        // group. Checkbox fieldset does not have such built-in capability,\n        // thus we do this manually for both input types.\n        switch (e.key) {\n            case \"ArrowUp\":\n                e.preventDefault();\n                onFocusPrevAnswer();\n                break;\n\n            case \"ArrowDown\":\n                e.preventDefault();\n                onFocusNextAnswer();\n                break;\n        }\n    }\n\n    handleInputChange(e: React.SyntheticEvent<HTMLInputElement>) {\n        // Prevent answer selection from double-toggling, as `handleClick` is\n        // handling changes to selection state.\n        e.preventDefault();\n    }\n\n    handleInputFocus() {\n        this.setState({isInputFocused: true});\n    }\n\n    handleInputBlur() {\n        this.setState({isInputFocused: false});\n    }\n\n    renderCheckmark(): React.ReactNode {\n        const {checked} = this.props;\n\n        return (\n            <span className={css(styles.checkmarkContainer)}>\n                {checked && (\n                    <Icon\n                        icon={iconCheckMedium}\n                        size={16}\n                        color={Color.offBlack}\n                    />\n                )}\n            </span>\n        );\n    }\n\n    render(): React.ReactNode {\n        const {content, checked, groupName, index, inputType} = this.props;\n\n        const {isInputFocused} = this.state;\n\n        const answerId = `${groupName}-${index}`;\n\n        return (\n            <div\n                className={css(\n                    styles.answerChoice,\n                    isInputFocused && styles.answerFocused,\n                )}\n                onClick={(e) => this.handleClick(e)}\n                onKeyDown={(e) => this.handleKeyDown(e)}\n            >\n                <span className={css(styles.answerInputWrapper)}>\n                    <input\n                        className={css(sharedStyles.perseusSrOnly)}\n                        checked={checked}\n                        name={groupName}\n                        id={answerId}\n                        type={inputType}\n                        onChange={(e) => this.handleInputChange(e)}\n                        onFocus={() => this.handleInputFocus()}\n                        onBlur={() => this.handleInputBlur()}\n                        ref={(node) => (this._input = node)}\n                    />\n\n                    {this.renderCheckmark()}\n                </span>\n\n                <label htmlFor={answerId}>\n                    <Renderer content={content} />\n                </label>\n            </div>\n        );\n    }\n}\n\nexport default class AnswerChoices extends React.Component<\n    AnswerChoicesProps,\n    AnswerChoicesState\n> {\n    // The rendered answers elements.\n    _choices: Array<AnswerChoice | null | undefined>;\n\n    constructor(props: AnswerChoicesProps) {\n        super(props);\n\n        this._choices = [];\n\n        this.state = {\n            groupName: _.uniqueId(\"answer_choices_\"),\n        };\n    }\n\n    focusAnswer(index = 0) {\n        const numChoices = this.props.choices.length;\n\n        // Wrap the index if necessary.\n        if (index < 0) {\n            index += numChoices;\n        } else if (index >= numChoices) {\n            index -= numChoices;\n        }\n\n        const choice = this._choices[index];\n\n        if (choice) {\n            choice.focusInput();\n        }\n    }\n\n    onAnswerChange(index: number, checked: boolean) {\n        const {choices, multipleSelect, onChange} = this.props;\n\n        const selection: Array<boolean> = [];\n\n        // Compile the selection state of answer choices. In single selection\n        // mode (radio input type), only 0 or 1 answer may be chosen.\n        for (let i = 0; i < choices.length; i++) {\n            selection.push(\n                multipleSelect\n                    ? i === index\n                        ? checked\n                        : choices[i].checked\n                    : i === index\n                    ? checked\n                    : false,\n            );\n        }\n\n        onChange(selection);\n    }\n\n    onFocusAnswer(index: number) {\n        this.focusAnswer(index);\n    }\n\n    render(): React.ReactNode {\n        const {choices, multipleSelect} = this.props;\n\n        const {groupName} = this.state;\n\n        return (\n            <fieldset>\n                {choices.map((choice, index) => (\n                    <AnswerChoice\n                        {...choice}\n                        key={choice.content}\n                        groupName={groupName}\n                        index={index}\n                        inputType={multipleSelect ? \"checkbox\" : \"radio\"}\n                        onChange={(checked) =>\n                            this.onAnswerChange(index, checked)\n                        }\n                        onFocusPrevAnswer={() => this.onFocusAnswer(index - 1)}\n                        onFocusNextAnswer={() => this.onFocusAnswer(index + 1)}\n                        ref={(node) => (this._choices[index] = node)}\n                    />\n                ))}\n            </fieldset>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    answerChoice: {\n        display: \"flex\",\n        alignItems: \"center\",\n\n        userSelect: \"none\",\n\n        padding: \"10px 16px 10px 0px\",\n\n        fontWeight: \"bold\",\n\n        border: \"solid 2px transparent\",\n        borderRadius: 2,\n\n        \":active\": {\n            backgroundColor: \"rgba(33, 36, 44, 0.08)\",\n        },\n    },\n\n    answerFocused: {\n        borderColor: \"#1865f2\",\n\n        \":active\": {\n            borderColor: \"transparent\",\n        },\n    },\n\n    answerInputWrapper: {\n        marginRight: 8,\n    },\n\n    checkmarkContainer: {\n        display: \"flex\",\n        position: \"relative\",\n\n        width: 16,\n        height: 16,\n\n        marginLeft: 8,\n    },\n});\n","/**\n * Controlled question image marker, rendered as a styled button element.\n *\n * The target for labeling question image with answers.\n */\n\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport Icon from \"../../components/icon\";\nimport {iconCheck, iconMinus} from \"../../icon-paths\";\n\nimport type {InteractiveMarkerType} from \"./types\";\n\ntype Props = InteractiveMarkerType & {\n    // Whether this marker has been selected by user.\n    showSelected: boolean;\n    // Whether this marker should pulsate to draw user attention.\n    showPulsate: boolean;\n    // Callbacks for when marker is interacted with using input device.\n    onClick: (e: MouseEvent) => void;\n    onKeyDown: (e: KeyboardEvent) => void;\n};\n\ntype State = {\n    // Whether the marker button has input focus.\n    isFocused: boolean;\n};\n\nexport default class Marker extends React.Component<Props, State> {\n    // The marker icon element.\n    _icon: HTMLElement | null | undefined;\n\n    static defaultProps: {\n        selected: ReadonlyArray<any>;\n    } = {\n        selected: [],\n    };\n\n    state: State = {\n        isFocused: false,\n    };\n\n    handleFocus() {\n        this.setState({isFocused: true});\n    }\n\n    handleBlur() {\n        this.setState({isFocused: false});\n    }\n\n    renderIcon(): React.ReactElement<React.ComponentProps<\"div\">> {\n        const {selected, showCorrectness, showSelected, showPulsate} =\n            this.props;\n\n        const {isFocused} = this.state;\n\n        // Only a single marker may be \"selected\" at a time.\n        // `showSelected` is a controlled prop, that may be set to `true` for\n        // one marker at a time.\n        // `isFocused` is a controlled state, driven by focus events, and may\n        // only be `true` when there's no answer choices popup visible, and\n        // keyboard focus is given to the marker.\n        const isSelected = showSelected || isFocused;\n\n        let innerIcon;\n        let iconStyles;\n\n        if (showCorrectness) {\n            innerIcon = (\n                <Icon\n                    icon={showCorrectness === \"correct\" ? iconCheck : iconMinus}\n                    size={24}\n                    color={Color.white}\n                />\n            );\n\n            if (showCorrectness === \"correct\") {\n                iconStyles = [\n                    styles.markerCorrect,\n                    isSelected && styles.markerCorrectSelected,\n                ];\n            } else {\n                iconStyles = [\n                    styles.markerIncorrect,\n                    isSelected && styles.markerIncorrectSelected,\n                ];\n            }\n        } else if (selected && selected.length > 0) {\n            iconStyles = [\n                styles.markerFilled,\n                isSelected && styles.markerFilledSelected,\n            ];\n        } else {\n            iconStyles = [\n                isSelected\n                    ? styles.markerUnfilledSelected\n                    : showPulsate && styles.markerUnfilledPulsate,\n            ];\n        }\n\n        return (\n            <div\n                className={css(styles.markerIcon, ...iconStyles)}\n                ref={(node) => (this._icon = node)}\n            >\n                {innerIcon}\n            </div>\n        );\n    }\n\n    render(): React.ReactNode {\n        const {label, x, y, showCorrectness} = this.props;\n\n        // It should no longer be possible to interact with a marker after it\n        // has been labeled (answered) correctly.\n        const isDisabled = showCorrectness === \"correct\";\n\n        return (\n            <button\n                aria-label={label}\n                className={css(\n                    styles.unstyledButton,\n                    styles.marker,\n                    isDisabled && styles.disabled,\n                )}\n                style={{\n                    left: `${x}%`,\n                    top: `${y}%`,\n                }}\n                tabIndex={isDisabled ? -1 : 0}\n                onFocus={() => this.handleFocus()}\n                onBlur={() => this.handleBlur()}\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'MouseEvent<HTMLButtonElement, MouseEvent>' is not assignable to parameter of type 'MouseEvent'.\n                onClick={(e) => this.props.onClick(e)}\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'KeyboardEvent<HTMLButtonElement>' is not assignable to parameter of type 'KeyboardEvent'.\n                onKeyDown={(e) => this.props.onKeyDown(e)}\n            >\n                {this.renderIcon()}\n            </button>\n        );\n    }\n}\n\nconst markerColor = \"#1865f2\";\nconst selectedColor = \"#2552b0\";\nconst activeColor = selectedColor;\nconst correctColor = \"#00a60e\";\nconst correctActiveColor = \"#167b1f\";\nconst incorrectColor = \"#909195\";\nconst incorrectActiveColor = \"#6c6e73\";\nconst markerShadowColor = \"rgba(33, 36, 44, 0.32)\";\nconst lightShadowColor = \"rgba(33, 36, 44, 0.16)\";\n\nconst styles = StyleSheet.create({\n    unstyledButton: {\n        padding: 0,\n\n        overflow: \"visible\",\n\n        color: \"inherit\",\n        font: \"inherit\",\n\n        lineHeight: \"normal\",\n\n        background: \"none\",\n        border: \"none\",\n    },\n\n    marker: {\n        position: \"absolute\",\n\n        // Center marker position based on it's maximum size.\n        width: 30,\n        height: 30,\n        marginLeft: -15,\n        marginTop: -15,\n    },\n\n    disabled: {\n        pointerEvents: \"none\",\n    },\n\n    // The base and unfilled marker style.\n    markerIcon: {\n        display: \"flex\",\n        position: \"relative\",\n\n        boxSizing: \"content-box\",\n\n        width: 16,\n        height: 16,\n        // Center icon within marker.\n        marginLeft: 5,\n\n        cursor: \"pointer\",\n\n        backgroundColor: markerColor,\n\n        border: \"solid 2px #ffffff\",\n        borderRadius: 16,\n\n        boxShadow: `0 2px 6px 0 ${markerShadowColor}`,\n    },\n\n    markerUnfilledPulsate: {\n        animationName: {\n            \"0%\": {\n                transform: \"scale(1)\",\n            },\n\n            \"100%\": {\n                transform: \"scale(1.5)\",\n            },\n        },\n\n        animationDirection: \"alternate\",\n        animationDuration: \"0.8s\",\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"ease-in\",\n\n        transformOrigin: \"50% 50%\",\n    },\n\n    markerUnfilledSelected: {\n        \"::before\": {\n            content: \"''\",\n            display: \"inline-block\",\n            position: \"absolute\",\n\n            width: 20,\n            height: 20,\n            marginLeft: -4,\n            marginTop: -4,\n\n            border: `solid 2px ${selectedColor}`,\n            borderRadius: 20,\n        },\n\n        \":active\": {\n            backgroundColor: activeColor,\n\n            boxShadow: \"none\",\n\n            \"::before\": {\n                display: \"none\",\n            },\n        },\n    },\n\n    markerFilled: {\n        width: 8,\n        height: 8,\n        // Center icon within marker.\n        marginLeft: 9,\n\n        borderRadius: 8,\n\n        boxShadow: `0 1px 1px 0 ${lightShadowColor}`,\n    },\n\n    markerFilledSelected: {\n        \"::before\": {\n            content: \"''\",\n            display: \"inline-block\",\n            position: \"absolute\",\n\n            width: 12,\n            height: 12,\n            marginLeft: -4,\n            marginTop: -4,\n\n            border: `solid 2px ${selectedColor}`,\n            borderRadius: 12,\n        },\n\n        \":active\": {\n            backgroundColor: activeColor,\n\n            boxShadow: \"none\",\n\n            \"::before\": {\n                display: \"none\",\n            },\n        },\n    },\n\n    markerCorrect: {\n        width: 24,\n        height: 24,\n        marginLeft: 1,\n        marginTop: 1,\n\n        justifyContent: \"center\",\n        alignItems: \"center\",\n\n        background: correctColor,\n\n        boxShadow: `0 1px 1px 0 ${lightShadowColor}`,\n    },\n\n    markerCorrectSelected: {\n        \"::before\": {\n            content: \"''\",\n            display: \"inline-block\",\n            position: \"absolute\",\n\n            width: 28,\n            height: 28,\n\n            border: `solid 2px ${selectedColor}`,\n            borderRadius: 28,\n        },\n\n        \":active\": {\n            backgroundColor: correctActiveColor,\n\n            boxShadow: \"none\",\n\n            \"::before\": {\n                display: \"none\",\n            },\n        },\n    },\n\n    markerIncorrect: {\n        width: 24,\n        height: 24,\n        marginLeft: 1,\n        marginTop: 1,\n\n        justifyContent: \"center\",\n        alignItems: \"center\",\n\n        background: incorrectColor,\n\n        boxShadow: `0 1px 1px 0 ${lightShadowColor}`,\n    },\n\n    markerIncorrectSelected: {\n        \"::before\": {\n            content: \"''\",\n            display: \"inline-block\",\n            position: \"absolute\",\n\n            width: 28,\n            height: 28,\n\n            border: `solid 2px ${selectedColor}`,\n            borderRadius: 28,\n        },\n\n        \":active\": {\n            backgroundColor: incorrectActiveColor,\n\n            boxShadow: \"none\",\n\n            \"::before\": {\n                display: \"none\",\n            },\n        },\n    },\n});\n","/**\n * Direct image labeling widget.\n *\n * Label on image widget enables creating more natural, conceptual questions\n * that involve the use of images, and enable learners to demonstrate their\n * knowledge by directly interacting with the image.\n */\n\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {Popover, PopoverContentCore} from \"@khanacademy/wonder-blocks-popover\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nimport AssetContext from \"../asset-context\";\nimport SvgImage from \"../components/svg-image\";\nimport Renderer from \"../renderer\";\nimport {typography} from \"../styles/global-styles\";\nimport mediaQueries from \"../styles/media-queries\";\n\nimport AnswerChoices from \"./label-image/answer-choices\";\nimport Marker from \"./label-image/marker\";\n\nimport type {ChangeableProps} from \"../mixins/changeable\";\nimport type {APIOptions, PerseusScore, WidgetExports} from \"../types\";\nimport type {\n    InteractiveMarkerType,\n    InteractiveMarkerScore,\n} from \"./label-image/types\";\n\ntype MarkersState = {\n    markers: ReadonlyArray<InteractiveMarkerType>;\n};\n\n/**\n * Represents a direction vector.\n * No diagonals allowed.\n */\ntype Direction =\n    | {\n          x: 0;\n          y: 1 | -1;\n      }\n    | {\n          x: 1 | -1;\n          y: 0;\n      }\n    | {\n          x: 0;\n          y: 0;\n      };\n\ntype Point = {\n    x: number;\n    y: number;\n};\n\ntype LabelImageProps = ChangeableProps & {\n    apiOptions: APIOptions;\n    // The list of possible answer choices.\n    choices: ReadonlyArray<string>;\n    // The question image properties.\n    imageAlt: string;\n    imageUrl: string;\n    imageWidth: number;\n    imageHeight: number;\n    // The list of label markers on the question image.\n    markers: ReadonlyArray<InteractiveMarkerType>;\n    // Whether multiple answer choices may be selected for markers.\n    multipleAnswers: boolean;\n    // Whether to hide answer choices from user instructions.\n    hideChoicesFromInstructions: boolean;\n    // Whether the question has been answered by the user.\n    questionCompleted: boolean;\n};\n\ntype LabelImageState = {\n    // The user selected marker index, defaults to -1, no selection.\n    selectedMarkerIndex: number;\n    // Whether any of the markers were interacted with by the user.\n    markersInteracted: boolean;\n};\n\nclass LabelImage extends React.Component<LabelImageProps, LabelImageState> {\n    // The rendered markers on the question image for labeling.\n    _markers: Array<Marker | null | undefined>;\n\n    // The popup component containing the answer choices.\n    _selectedMarkerPopup: Popover | null | undefined;\n\n    // The rendered list of answer choices for the currently selected marker.\n    _answerChoices: AnswerChoices | null | undefined;\n\n    static gradeMarker(marker: InteractiveMarkerType): InteractiveMarkerScore {\n        const score = {\n            hasAnswers: false,\n            isCorrect: false,\n        } as const;\n\n        if (marker.selected && marker.selected.length > 0) {\n            // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'hasAnswers' because it is a read-only property.\n            score.hasAnswers = true;\n        }\n\n        if (marker.answers.length > 0) {\n            if (\n                marker.selected &&\n                marker.selected.length === marker.answers.length\n            ) {\n                // All correct answers are selected by the user.\n                // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'isCorrect' because it is a read-only property.\n                score.isCorrect = marker.selected.every((choice) =>\n                    marker.answers.includes(choice),\n                );\n            }\n        } else if (!marker.selected || marker.selected.length === 0) {\n            // Correct as no answers should be selected by the user.\n            // @ts-expect-error [FEI-5003] - TS2540 - Cannot assign to 'isCorrect' because it is a read-only property.\n            score.isCorrect = true;\n        }\n\n        return score;\n    }\n\n    static validate(\n        state: MarkersState,\n        rubric?: LabelImageProps,\n    ): PerseusScore {\n        let numAnswered = 0;\n        let numCorrect = 0;\n\n        for (const marker of state.markers) {\n            const score = LabelImage.gradeMarker(marker);\n\n            if (score.hasAnswers) {\n                numAnswered++;\n            }\n\n            if (score.isCorrect) {\n                numCorrect++;\n            }\n        }\n\n        // We expect all question markers to be answered before grading.\n        if (numAnswered !== state.markers.length) {\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n\n        return {\n            type: \"points\",\n            // Markers with no expected answers are graded as correct if user\n            // makes no answer selection.\n            earned: numCorrect === state.markers.length ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    }\n\n    /**\n     * Test whether point is contained within triangle.\n     *\n     * Implementation taken from: https://stackoverflow.com/a/2049593\n     */\n    static pointInTriangle(p: Point, a: Point, b: Point, c: Point): boolean {\n        const sign = (p1: Point, p2: Point, p3) =>\n            (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);\n\n        const b1 = sign(p, a, b) < 0;\n        const b2 = sign(p, b, c) < 0;\n        const b3 = sign(p, c, a) < 0;\n\n        return b1 === b2 && b2 === b3;\n    }\n\n    /**\n     * Determine the image side given a marker position (as percent of size).\n     */\n    static imageSideForMarkerPosition(\n        x: number,\n        y: number,\n    ): \"bottom\" | \"left\" | \"right\" | \"top\" | \"center\" {\n        // Special handling for when marker is positioned near the horizontal\n        // edges of the image. We want to ensure the returned side would not\n        // result in a popup rendering that may overflow outside the page.\n        if (x < 20) {\n            return \"left\";\n        }\n        if (x > 80) {\n            return \"right\";\n        }\n\n        // Points to define corners (and center) of a rectangle representing\n        // the constrained area of the image for which we want to determine the\n        // image side.\n        const tl = {x: 20, y: 0} as const;\n        const tr = {x: 80, y: 0} as const;\n        const br = {x: 80, y: 100} as const;\n        const bl = {x: 20, y: 100} as const;\n        const cp = {x: 50, y: 50} as const;\n\n        // The triangles representing the sides to test.\n        const triangles = {\n            top: [tl, tr, cp],\n            right: [cp, tr, br],\n            bottom: [bl, cp, br],\n            left: [tl, cp, bl],\n        } as const;\n\n        const p = {x, y} as const;\n\n        // Test whether marker is positioned within one of the triangles\n        // representing the sides.\n        for (const side of Object.keys(triangles)) {\n            const corners = triangles[side];\n\n            // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n            if (LabelImage.pointInTriangle(p, ...corners)) {\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type '\"left\" | \"top\" | \"center\" | \"right\" | \"bottom\"'.\n                return side;\n            }\n        }\n\n        // Fallback, if side was not found for marker position.\n        return \"center\";\n    }\n\n    /**\n     * Calculate the next marker to navigate to, from the \"this marker\".\n     *\n     * Given a cardinal navigation direction (in the x or y axis), return the\n     * next marker index to visit.\n     */\n    static navigateToMarkerIndex(\n        navigateDirection: Direction,\n        markers: ReadonlyArray<InteractiveMarkerType>,\n        thisIndex: number,\n    ): number {\n        const thisMarker = markers[thisIndex];\n\n        // Sort markers along the direction of navigation from \"this\" marker.\n        const sortedMarkers = markers\n            .map((otherMarker, index) => {\n                // Calculate distance and (normalized) vector to the marker from\n                // \"this\" marker.\n                const x = otherMarker.x - thisMarker.x;\n                const y = otherMarker.y - thisMarker.y;\n\n                const dist = Math.sqrt(x ** 2 + y ** 2);\n\n                return {\n                    index,\n                    dist,\n                    dir: {\n                        x: dist !== 0 ? x / dist : 0,\n                        y: dist !== 0 ? y / dist : 0,\n                    },\n                };\n            })\n            .filter((marker) => {\n                if (marker.index === thisIndex) {\n                    return false;\n                }\n\n                // Exclude any marker that has been answered correctly,\n                // as it should no longer be interacted with by the user.\n                return markers[marker.index].showCorrectness !== \"correct\";\n            })\n            .sort((a, b) => {\n                // Project distances to the two markers being sorted (from the\n                // \"this\" marker) along the direction of navigation. This will\n                // order by the \"closest\" marker in the direction of navigation,\n                // not the \"absolute\" closest marker to \"this\" marker.\n                // We round the calculated distances so that if markers are\n                // found to be positioned \"close enough\" to the \"this\" marker,\n                // they will be treated as coplanar with it.\n                const distA = Math.round(\n                    a.dist *\n                        (navigateDirection.x * a.dir.x +\n                            navigateDirection.y * a.dir.y),\n                );\n                const distB = Math.round(\n                    b.dist *\n                        (navigateDirection.x * b.dir.x +\n                            navigateDirection.y * b.dir.y),\n                );\n\n                let dirA;\n                let dirB;\n                // Determine whether the two markers lie ahead or behind the\n                // \"this\" marker. A marker that lies in the same plane as the\n                // \"this\" marker will be considered to be behind it.\n                // Only navigation in the \"x\" or \"y\" axis is supported, no\n                // diagonals.\n                if (navigateDirection.x > 0) {\n                    dirA = a.dir.x > 0 && distA !== 0;\n                    dirB = b.dir.x > 0 && distB !== 0;\n                } else if (navigateDirection.x < 0) {\n                    dirA = a.dir.x < 0 && distA !== 0;\n                    dirB = b.dir.x < 0 && distB !== 0;\n                } else if (navigateDirection.y > 0) {\n                    dirA = a.dir.y > 0 && distA !== 0;\n                    dirB = b.dir.y > 0 && distB !== 0;\n                } else if (navigateDirection.y < 0) {\n                    dirA = a.dir.y < 0 && distA !== 0;\n                    dirB = b.dir.y < 0 && distB !== 0;\n                }\n\n                // If one of the markers is positioned behind, sort the other\n                // marker ahead of it in the order.\n                if (dirA !== dirB) {\n                    if (dirA) {\n                        return -1;\n                    }\n                    return 1;\n                }\n\n                // Both markers are either positioned ahead or behind, sort the\n                // closest (or furthest if behind, to \"wrap\" navigation) marker\n                // ahead in the order.\n                return distA - distB;\n            });\n\n        // Return the index in the provided markers array of the closest marker\n        // found along the direction of navigation, or \"this\" index if no other\n        // marker was found. This may happen if the user has answered all but\n        // one (\"this\" marker) of the markers correctly in the question.\n        return sortedMarkers.length > 0 ? sortedMarkers[0].index : thisIndex;\n    }\n\n    constructor(props: LabelImageProps) {\n        super(props);\n\n        this._markers = [];\n\n        this.state = {\n            selectedMarkerIndex: -1,\n            markersInteracted: false,\n        };\n    }\n\n    componentDidMount() {\n        document.addEventListener(\"click\", this.handleDocumentClick, true);\n        document.addEventListener(\"keydown\", this.handleDocumentKeyDown, true);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"click\", this.handleDocumentClick, true);\n        document.removeEventListener(\n            \"keydown\",\n            this.handleDocumentKeyDown,\n            true,\n        );\n    }\n\n    simpleValidate(rubric: LabelImageProps): PerseusScore {\n        return LabelImage.validate(this.getUserInput(), rubric);\n    }\n\n    getUserInput(): MarkersState {\n        const {markers} = this.props;\n        return {markers};\n    }\n\n    showRationalesForCurrentlySelectedChoices(rubric: LabelImageProps) {\n        const {markers} = this.props;\n        const {onChange} = this.props;\n\n        const updatedMarkers = markers.map((marker) => {\n            const score = LabelImage.gradeMarker(marker);\n\n            return {\n                ...marker,\n                // Reveal correctness state for markers with answers.\n                showCorrectness: score.hasAnswers\n                    ? score.isCorrect\n                        ? \"correct\"\n                        : \"incorrect\"\n                    : undefined,\n            };\n        });\n\n        // Update Perseus widget state with user selected answers without\n        // triggering interaction events for listeners.\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'null' is not assignable to parameter of type '(() => unknown) | undefined'.\n        onChange({markers: updatedMarkers}, null, true);\n    }\n\n    dismissMarkerPopup() {\n        const {selectedMarkerIndex: index} = this.state;\n\n        // No popup should be open if there's no selected marker.\n        if (index === -1) {\n            return;\n        }\n\n        this.setState({selectedMarkerIndex: -1}, () => {\n            const marker = this._markers[index];\n            // Set focus on the just-deselected-marker, to enable to resume\n            // navigating between the markers using the keyboard.\n            if (marker) {\n                (ReactDOM.findDOMNode(marker) as HTMLElement).focus();\n            }\n        });\n    }\n\n    handleDocumentClick: (e: MouseEvent) => void = (e: MouseEvent) => {\n        // Dismiss open popup with answer choices if user clicks outside it.\n        if (this._selectedMarkerPopup && this._answerChoices) {\n            const answerChoices = ReactDOM.findDOMNode(this._answerChoices);\n\n            const targetElement = e.target as Node;\n            // HACK(michaelpolyak): We want to determine if the click target is\n            // contained within the popup layer. As there's no public interface\n            // to get this layer from the popup, we traverse several levels of\n            // answer choices parents to test whether the click target is\n            // contained within.\n            const containsEventTarget = (\n                element: Element | null | undefined | Text,\n                depth = 3,\n            ) =>\n                element &&\n                (element.contains(targetElement) ||\n                    (depth > 0 &&\n                        containsEventTarget(element.parentElement, depth - 1)));\n\n            if (!containsEventTarget(answerChoices)) {\n                // Close popup and set focus back to the marker for which it was\n                // open.\n                this.dismissMarkerPopup();\n            }\n        }\n    };\n\n    handleDocumentKeyDown: (e: KeyboardEvent) => void = (e: KeyboardEvent) => {\n        // Dismiss open popup with answer choices if user presses Escape key.\n        if (this._selectedMarkerPopup && e.keyCode === 27) {\n            // Ensure other listeners are not triggered on key down event that\n            // closes the popup, as this will also dismiss the modal that the\n            // widget may be rendered within.\n            e.stopPropagation();\n\n            // Close popup and set focus back to the marker for which it was\n            // open.\n            this.dismissMarkerPopup();\n        }\n    };\n\n    handleMarkerChange(index: number, marker: InteractiveMarkerType) {\n        const {markers, onChange} = this.props;\n\n        // Replace marker with a changed version at the specified index.\n        const updatedMarkers = [\n            ...markers.slice(0, index),\n            {\n                ...marker,\n                // Do not show correctness state if user changes answer\n                // selection for marker.\n                showCorrectness: undefined,\n            },\n            ...markers.slice(index + 1),\n        ];\n\n        // Update Perseus widget state with user selected answers.\n        onChange({markers: updatedMarkers});\n    }\n\n    handleMarkerClick(index: number, e: MouseEvent) {\n        const {selectedMarkerIndex} = this.state;\n\n        e.preventDefault();\n\n        // Select the marker, revealing answer choices.\n        if (selectedMarkerIndex !== index) {\n            this.setState(\n                {\n                    selectedMarkerIndex: index,\n                    markersInteracted: true,\n                },\n                () => {\n                    // A delay is required to allow answer choices to first render\n                    // before trying to set focus on the first choice.\n                    // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n                    // eslint-disable-next-line no-restricted-syntax\n                    setTimeout(() => {\n                        if (this._answerChoices) {\n                            this._answerChoices.focusAnswer();\n                        }\n                    }, 100);\n                },\n            );\n        } else {\n            // The answer choices are shown within a popup attached to the\n            // selected marker. Close the popup and set focus back to the\n            // marker.\n            this.dismissMarkerPopup();\n        }\n    }\n\n    handleMarkerKeyDown(index: number, e: KeyboardEvent) {\n        const {markers} = this.props;\n\n        // One is the loneliest number.\n        if (markers.length < 2) {\n            return;\n        }\n\n        // Only navigation in the \"x\" or \"y\" axis is supported, no diagonals.\n        const navigateDirection = {\n            ArrowUp: {x: 0, y: -1},\n            ArrowRight: {x: 1, y: 0},\n            ArrowDown: {x: 0, y: 1},\n            ArrowLeft: {x: -1, y: 0},\n        }[e.key];\n\n        if (!navigateDirection) {\n            return;\n        }\n\n        e.preventDefault();\n\n        // Focus on the closest marker along the direction of navigation.\n        const marker =\n            this._markers[\n                LabelImage.navigateToMarkerIndex(\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ x: number; y: number; } | { x: number; y: number; } | { x: number; y: number; } | { x: number; y: number; }' is not assignable to parameter of type 'Direction'.\n                    navigateDirection,\n                    markers,\n                    index,\n                )\n            ];\n\n        if (marker) {\n            (ReactDOM.findDOMNode(marker) as HTMLElement).focus();\n        }\n    }\n\n    handleAnswerChoicesChangeForMarker(\n        index: number,\n        selection: ReadonlyArray<boolean>,\n    ) {\n        const {choices, markers, multipleAnswers} = this.props;\n\n        // Compile the user selected answer choices.\n        const selected = choices.filter((choice, index) => selection[index]);\n\n        this.handleMarkerChange(index, {\n            ...markers[index],\n            selected,\n        });\n\n        if (!multipleAnswers) {\n            this.dismissMarkerPopup();\n        }\n    }\n\n    renderAnswerChoicesForMarker(\n        index: number,\n        marker: InteractiveMarkerType,\n    ): React.ReactElement<React.ComponentProps<\"div\">> {\n        const {choices, multipleAnswers} = this.props;\n\n        // The user selected answer choices.\n        const selected = marker.selected;\n\n        return (\n            <div\n                className={classNames(\n                    \"perseus-label-image-widget-answer-choices\",\n                    css(styles.scrollableChoices),\n                )}\n            >\n                <AnswerChoices\n                    choices={choices.map((choice) => ({\n                        content: choice,\n                        checked: selected ? selected.includes(choice) : false,\n                    }))}\n                    multipleSelect={multipleAnswers}\n                    onChange={(selection) =>\n                        this.handleAnswerChoicesChangeForMarker(\n                            index,\n                            selection,\n                        )\n                    }\n                    ref={(node) => (this._answerChoices = node)}\n                />\n            </div>\n        );\n    }\n\n    renderMarkers(): ReadonlyArray<React.ReactNode> {\n        const {markers, questionCompleted} = this.props;\n\n        const {selectedMarkerIndex, markersInteracted} = this.state;\n\n        // Render all markers for widget.\n        return markers.map((marker, index): React.ReactElement => {\n            const score = LabelImage.gradeMarker(marker);\n\n            const element = (\n                <Marker\n                    {...marker}\n                    // Once the question is answered, show markers\n                    // with correct answers, otherwise passthrough\n                    // the correctness state.\n                    showCorrectness={\n                        questionCompleted && score.hasAnswers && score.isCorrect\n                            ? \"correct\"\n                            : marker.showCorrectness\n                    }\n                    showSelected={index === selectedMarkerIndex}\n                    showPulsate={!markersInteracted}\n                    key={`${marker.x}.${marker.y}`}\n                    onClick={(e) => this.handleMarkerClick(index, e)}\n                    onKeyDown={(e) => this.handleMarkerKeyDown(index, e)}\n                    ref={(node) => (this._markers[index] = node)}\n                />\n            );\n\n            // The user selected marker is wrapped with a popup that shows its\n            // answer choices, otherwise it's returned as is.\n            if (index !== selectedMarkerIndex) {\n                return element;\n            }\n\n            // Determine whether page is rendered in a narrow browser window.\n            const isNarrowPage = window.matchMedia(\n                mediaQueries.xsOrSmaller.replace(\"@media \", \"\"),\n            ).matches;\n\n            let side;\n            // Position popup closest to the center, preferring it renders\n            // entirely within the image area.\n            if (isNarrowPage) {\n                side = marker.y > 50 ? \"top\" : \"bottom\";\n            } else {\n                // This mirrors the calculated side of where the marker is\n                // located within the image, so that popup appears closer to\n                // the image center.\n                side = {\n                    left: \"right\",\n                    top: \"bottom\",\n                    right: \"left\",\n                    bottom: \"top\",\n                    center: \"top\",\n                }[LabelImage.imageSideForMarkerPosition(marker.x, marker.y)];\n            }\n\n            // TODO(michaelpolyak): Ideally we would always render markers\n            // wrapped in the popover. Setting `opened={false}` for those\n            // markers that are unselected (to hide their popup), this would\n            // keep the React tree more stable.\n            return (\n                <Popover\n                    content={() => (\n                        <PopoverContentCore style={styles.choicesPopover}>\n                            {this.renderAnswerChoicesForMarker(index, marker)}\n                        </PopoverContentCore>\n                    )}\n                    placement={side}\n                    opened={true}\n                    key={`${marker.x}.${marker.y}`}\n                    ref={(node) => (this._selectedMarkerPopup = node)}\n                >\n                    {element}\n                </Popover>\n            );\n        });\n    }\n\n    renderInstructions(): React.ReactNode {\n        const {\n            apiOptions: {isMobile},\n            choices,\n            multipleAnswers,\n            hideChoicesFromInstructions: hideChoices,\n        } = this.props;\n\n        const promptString = isMobile\n            ? multipleAnswers\n                ? i18n._(\n                      \"Tap each dot on the image to select all answers that apply.\",\n                  )\n                : i18n._(\"Tap each dot on the image to select an answer.\")\n            : multipleAnswers\n            ? i18n._(\n                  \"Click each dot on the image to select all answers that apply.\",\n              )\n            : i18n._(\"Click each dot on the image to select an answer.\");\n\n        const choicesString = i18n._(\"Choices:\");\n\n        return (\n            <div\n                className={classNames(\n                    \"perseus-label-image-widget-instructions\",\n                    css(styles.instructions),\n                )}\n            >\n                <div className={css(styles.instructionsCaption)}>\n                    {promptString} {!hideChoices && choicesString}\n                </div>\n\n                {!hideChoices && (\n                    <div className={css(styles.instructionsChoices)}>\n                        {choices.map((choice, index) => (\n                            <div\n                                className={css(styles.instructionsChoice)}\n                                key={index}\n                            >\n                                <Renderer content={choice} />\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    render(): React.ReactNode {\n        const {imageAlt, imageUrl, imageWidth, imageHeight} = this.props;\n\n        const {selectedMarkerIndex} = this.state;\n\n        return (\n            <div>\n                {this.renderInstructions()}\n                <div\n                    className={css(styles.markersCanvas)}\n                    style={{\n                        maxWidth: imageWidth,\n                        maxHeight: imageHeight,\n                    }}\n                >\n                    <div\n                        className={css(\n                            styles.imageContainer,\n                            // Ensure image interaction is disabled while answer\n                            // choices popup is visible. This addresses specific\n                            // case where user may click on question image to\n                            // dismiss the popup. If the image is larger in size\n                            // than its rendered in the widget, this would\n                            // result in a zoom of the image.\n                            selectedMarkerIndex !== -1 &&\n                                styles.imageInteractionDisabled,\n                        )}\n                    >\n                        <AssetContext.Consumer>\n                            {({setAssetStatus}) => (\n                                <SvgImage\n                                    alt={imageAlt}\n                                    src={imageUrl}\n                                    width={imageWidth}\n                                    height={imageHeight}\n                                    setAssetStatus={setAssetStatus}\n                                />\n                            )}\n                        </AssetContext.Consumer>\n                    </div>\n                    {this.renderMarkers()}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    instructions: {\n        paddingBottom: 16,\n    },\n\n    instructionsCaption: {\n        ...typography.bodyXsmallBold,\n\n        paddingBottom: 16,\n    },\n\n    instructionsChoices: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n\n        margin: \"-8px 0\",\n    },\n\n    instructionsChoice: {\n        display: \"flex\",\n        alignItems: \"center\",\n\n        margin: \"8px 0\",\n\n        \":not(:last-child)\": {\n            \"::after\": {\n                content: \"''\",\n                display: \"inline-block\",\n                position: \"relative\",\n\n                width: 2,\n                height: 2,\n\n                marginLeft: 5,\n                marginRight: 5,\n\n                background: \"rgba(33, 36, 44, 0.32)\",\n\n                borderRadius: 2,\n            },\n        },\n    },\n\n    markersCanvas: {\n        position: \"relative\",\n    },\n\n    imageContainer: {\n        // Remove the additional height added due to white-spacing, this ensures\n        // markers canvas will have the same height as the question image.\n        display: \"flex\",\n    },\n\n    imageInteractionDisabled: {\n        pointerEvents: \"none\",\n    },\n\n    scrollableChoices: {\n        paddingTop: 8,\n        paddingBottom: 8,\n\n        // Enable scroll for answer choices within popup on mobile phones.\n        [mediaQueries.xsOrSmaller]: {\n            maxHeight: 250,\n            overflowY: \"auto\",\n        },\n    },\n\n    choicesPopover: {\n        padding: 0,\n    },\n});\n\nexport default {\n    name: \"label-image\",\n    displayName: \"Label Image\",\n    widget: LabelImage,\n    accessible: true,\n    isLintable: true,\n} as WidgetExports<typeof LabelImage>;\n","/* eslint-disable @typescript-eslint/no-unused-vars, react/sort-comp */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport * as Changeable from \"../mixins/changeable\";\nimport WidgetJsonifyDeprecated from \"../mixins/widget-jsonify-deprecated\";\n\nimport type {WidgetExports} from \"../types\";\n\nconst MAX_SIZE = 8;\n\n// Styling\nconst CELL_PADDING = 5;\n\nconst TABLE_STYLE = {\n    display: \"table\",\n    tableLayout: \"fixed\",\n} as const;\n\nconst ROW_STYLE = {\n    display: \"table-row\",\n} as const;\n\nconst CELL_STYLE = {\n    display: \"table-cell\",\n    padding: CELL_PADDING,\n} as const;\n\nconst BASE_TILE_STYLE = {\n    borderRadius: 10,\n    cursor: \"pointer\",\n} as const;\n\nconst MOVE_COUNT_STYLE = {\n    padding: CELL_PADDING,\n    display: \"inline-block\",\n} as const;\n\nconst RESET_BUTTON_STYLE = {\n    float: \"right\",\n    paddingRight: CELL_PADDING,\n} as const;\n\nconst MAIN_TILE_SIZE = 50;\n\nconst mapCells = (cells: any, func: any) => {\n    return _.map(cells, (row, y) => {\n        return _.map(row, (value, x) => {\n            return func(value, y, x);\n        });\n    });\n};\n\nconst genCells = (height: any, width, func: any) => {\n    return _.times(height, (y) => {\n        return _.times(width, (x) => {\n            return func(y, x);\n        });\n    });\n};\n\nconst PATTERNS = {\n    plus: () => [\n        [false, true, false],\n        [true, true, true],\n        [false, true, false],\n    ],\n    x: () => [\n        [true, false, true],\n        [false, true, false],\n        [true, false, true],\n    ],\n    \"plus/x\": (iter) => {\n        return iter % 2 ? PATTERNS.x() : PATTERNS.plus();\n    },\n} as const;\n\n/**\n * Clamps value to an integer in the range [min, max]\n */\nconst clampToInt = function (value: number, min: any, max) {\n    value = Math.floor(value);\n    value = Math.max(value, min);\n    value = Math.min(value, max);\n    return value;\n};\n\n// A single glowy cell\nclass Tile extends React.Component<any> {\n    static propTypes = {\n        value: PropTypes.bool.isRequired,\n        size: PropTypes.number.isRequired,\n    };\n\n    render(): React.ReactNode {\n        const color = this.props.value ? \"#55dd55\" : \"#115511\";\n        const style = _.extend({}, BASE_TILE_STYLE, {\n            width: this.props.size,\n            height: this.props.size,\n            backgroundColor: color,\n        });\n        return <div style={style} onClick={this._flip} />;\n    }\n\n    _flip = () => {\n        this.props.onChange(!this.props.value);\n    };\n}\n\n// A grid of glowy cells\nclass TileGrid extends React.Component<any> {\n    static propTypes = {\n        cells: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.bool)).isRequired,\n        size: PropTypes.number.isRequired,\n    };\n\n    render(): React.ReactNode {\n        return (\n            <div style={TABLE_STYLE} className=\"no-select\">\n                {_.map(this.props.cells, (row, y) => {\n                    return (\n                        <div key={y} style={ROW_STYLE}>\n                            {_.map(row, (cell, x) => {\n                                return (\n                                    <div key={x} style={CELL_STYLE}>\n                                        <Tile\n                                            value={cell}\n                                            size={this.props.size}\n                                            onChange={_.partial(\n                                                this.props.onChange,\n                                                y,\n                                                x,\n                                            )}\n                                        />\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\n// Returns a copy of the tiles, with tiles flipped according to\n// whether or not their y, x position satisfies the predicate\nconst flipTilesPredicate = (\n    oldCells: any,\n    predicate: (y?: any, x?: any) => any | boolean,\n) => {\n    return _.map(oldCells, (row, y) => {\n        return _.map(row, (cell, x) => {\n            return predicate(y, x) ? !cell : cell;\n        });\n    });\n};\n\nconst flipTilesPattern = (oldCells: any, tileY: any, tileX, pattern: any) => {\n    return flipTilesPredicate(oldCells, (y, x) => {\n        const offsetY = y - tileY;\n        const offsetX = x - tileX;\n        if (Math.abs(offsetY) <= 1 && Math.abs(offsetX) <= 1) {\n            return pattern[offsetY + 1][offsetX + 1];\n        }\n        return false;\n    });\n};\n\n// The lights puzzle widget\nclass LightsPuzzle extends React.Component<any> {\n    _currPattern: any;\n    _nextPattern: any;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_patternIndex' has no initializer and is not definitely assigned in the constructor.\n    _patternIndex: number;\n\n    static propTypes = {\n        ...Changeable.propTypes,\n        cells: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.bool)),\n        startCells: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.bool)),\n        flipPattern: PropTypes.string.isRequired,\n        moveCount: PropTypes.number.isRequired,\n    };\n\n    static defaultProps: any = {\n        cells: [\n            [false, false, false],\n            [false, false, false],\n            [false, false, false],\n        ],\n        startCells: [\n            [false, false, false],\n            [false, false, false],\n            [false, false, false],\n        ],\n        flipPattern: \"plus\",\n        moveCount: 0,\n    };\n\n    getUserInput: () => any = () => {\n        return WidgetJsonifyDeprecated.getUserInput.call(this);\n    };\n\n    render(): React.ReactNode {\n        const width = this._width();\n        const tileSize = MAIN_TILE_SIZE;\n        const pxWidth = width * (tileSize + 2 * CELL_PADDING);\n        return (\n            <div>\n                <TileGrid\n                    cells={this.props.cells}\n                    size={tileSize}\n                    onChange={this._flipTile}\n                />\n                <div style={{width: pxWidth}}>\n                    <div style={MOVE_COUNT_STYLE}>\n                        {i18n.ngettext(\n                            \"Moves: %(num)s\",\n                            \"Moves: %(num)s\",\n                            this.props.moveCount,\n                        )}\n                    </div>\n                    <div style={RESET_BUTTON_STYLE}>\n                        <input\n                            type=\"button\"\n                            value=\"Reset\"\n                            onClick={this._reset}\n                            className=\"simple-button\"\n                        />\n                    </div>\n                </div>\n                <div className=\"clearfix\" />\n            </div>\n        );\n    }\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    _width: () => number = () => {\n        if (this.props.cells.length !== 0) {\n            return this.props.cells[0].length;\n        }\n        return 0; // default to 0\n    };\n\n    componentDidMount() {\n        this._initNextPatterns();\n    }\n\n    componentDidUpdate(prevProps: any) {\n        if (prevProps.flipPattern !== this.props.flipPattern) {\n            this._initNextPatterns();\n        }\n    }\n\n    _initNextPatterns: () => void = () => {\n        this._currPattern = PATTERNS[this.props.flipPattern](0);\n        this._nextPattern = PATTERNS[this.props.flipPattern](1);\n        this._patternIndex = 2;\n    };\n\n    _shiftPatterns: () => void = () => {\n        this._currPattern = this._nextPattern;\n        this._nextPattern = PATTERNS[this.props.flipPattern](\n            this._patternIndex,\n        );\n        this._patternIndex++;\n    };\n\n    _flipTile: (arg1: any, arg2: any) => void = (tileY, tileX) => {\n        const newCells = flipTilesPattern(\n            this.props.cells,\n            tileY,\n            tileX,\n            this._currPattern,\n        );\n        this._shiftPatterns();\n\n        this.change({\n            cells: newCells,\n            moveCount: this.props.moveCount + 1,\n        });\n    };\n\n    _reset: () => void = () => {\n        this.change({\n            cells: this.props.startCells,\n            moveCount: 0,\n        });\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        return validate(rubric, this.getUserInput());\n    };\n}\n\n// grading function\nconst validate = function (rubric: any, state: any) {\n    const empty = _.all(state.cells, (row, y) => {\n        return _.all(row, (cell, x) => {\n            return cell === rubric.startCells[y][x];\n        });\n    });\n    if (empty) {\n        return {\n            type: \"invalid\",\n            message: i18n._(\"Click on the tiles to change the lights.\"),\n        };\n    }\n\n    const correct = _.all(state.cells, (row) => {\n        return _.all(row, (cell) => {\n            return cell;\n        });\n    });\n\n    if (correct) {\n        return {\n            type: \"points\",\n            earned: 1,\n            total: 1,\n            message: null,\n        };\n    }\n    if (rubric.gradeIncompleteAsWrong) {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 1,\n            message: null,\n        };\n    }\n    return {\n        type: \"invalid\",\n        message: i18n._(\"You must turn on all of the lights to continue.\"),\n    };\n};\n\n// The function run on the editor props to create the widget props\nconst transformProps: (arg1: any) => any = function (editorProps) {\n    return {\n        cells: editorProps.startCells,\n        startCells: editorProps.startCells,\n        flipPattern: editorProps.flipPattern,\n    };\n};\n\nexport default {\n    name: \"lights-puzzle\",\n    displayName: \"Lights Puzzle\",\n    hidden: true,\n    widget: LightsPuzzle,\n    transform: transformProps,\n} as WidgetExports<typeof LightsPuzzle>;\n","/* eslint-disable @babel/no-invalid-this, react/no-unsafe, react/sort-comp */\nimport * as PerseusLinter from \"@khanacademy/perseus-linter\";\nimport {CircularSpinner} from \"@khanacademy/wonder-blocks-progress-spinner\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\nimport {ClassNames as ApiClassNames} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport Util, {Position} from \"../util\";\n\nimport type {LinterContextProps} from \"../types\";\n\nexport enum Layout {\n    HORIZONTAL = \"horizontal\",\n    VERTICAL = \"vertical\",\n}\n\nenum ItemState {\n    STATIC = \"static\",\n    DRAGGING = \"dragging\",\n    ANIMATING = \"animating\",\n    DISABLED = \"disabled\",\n}\n\n// Augment the given position with the scroll position of the offset parent.\nconst addOffsetParentScroll = ($el: any, position: any) => {\n    // NOTE(slim): $(el).offsetParent() is NOT equivalent to $el[0].offsetParent.\n    // Specifically, when `el` is not positioned, then the native HTMLElement.offsetParent\n    // returns the closest table element, which in this case is the <td> rendered by the\n    // Perseus Matcher widget.\n    // Conversely, jQuery's offsetParent() always returns the closest positioned ancestor,\n    // even when the element is not positioned.\n    const $offsetParent = $el.offsetParent();\n    return {\n        top: position.top + $offsetParent.scrollTop(),\n        left: position.left + $offsetParent.scrollLeft(),\n    };\n};\n\ntype PlaceholderProps = {\n    layout: Layout;\n    width: number;\n    height: number;\n    margin?: string;\n};\n\n// A placeholder that appears in the sortable whenever an item is dragged.\nclass Placeholder extends React.Component<PlaceholderProps> {\n    render(): React.ReactNode {\n        const {layout} = this.props;\n        const className = css(\n            styles.card,\n            styles.placeholder,\n            layout === Layout.HORIZONTAL && styles.horizontalCard,\n        );\n        const style: any = {\n            width: this.props.width,\n            height: this.props.height,\n        };\n\n        if (this.props.margin != null) {\n            style.margin = this.props.margin;\n        }\n\n        return <li className={className} style={style} />;\n    }\n}\n\ntype DraggableProps = {\n    content: string;\n    endPosition: {left: number; top: number} | Record<string, never>;\n    includePadding: boolean;\n    layout: Layout;\n    width?: number;\n    height?: number;\n    margin?: string;\n    onAnimationEnd: () => void;\n    onMouseDown: () => void;\n    onMouseMove: () => void;\n    onMouseUp: () => void;\n    onRender: () => void;\n    state: ItemState;\n    linterContext: LinterContextProps;\n};\n\ntype DefaultDraggableProps = {\n    includePadding: DraggableProps[\"includePadding\"];\n    type: DraggableProps[\"state\"];\n    linterContext: DraggableProps[\"linterContext\"];\n};\n\ntype DraggableState = {\n    startPosition: Position;\n    startMouse: Position;\n    mouse: Position;\n    dragging?: boolean;\n};\n\n// A draggable item in the sortable. Can be in one of four states:\n//     Static:    The item is not being interacted with.\n//     Dragging:  The item is being dragged.\n//     Animating: The item has been released, and is moving to its destination.\n//     Disabled:  The item cannot be interacted with.\n//\n// Usual flow:      Static -> Dragging -> Animating -> Static\n// [Dis|en]abling:  Static|Dragging|Animating -> Disabled -> Static\nclass Draggable extends React.Component<DraggableProps, DraggableState> {\n    // Handler returned by requestAnimationFrame.\n    animationFrameRequest = null;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'isMouseMoveUpBound' has no initializer and is not definitely assigned in the constructor.\n    isMouseMoveUpBound: boolean;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_mounted' has no initializer and is not definitely assigned in the constructor.\n    _mounted: boolean;\n\n    static defaultProps: DefaultDraggableProps = {\n        includePadding: true,\n        type: ItemState.STATIC,\n        linterContext: PerseusLinter.linterContextDefault,\n    };\n\n    state: DraggableState = {\n        startPosition: {left: 0, top: 0},\n        startMouse: {left: 0, top: 0},\n        mouse: {left: 0, top: 0},\n        dragging: false,\n    };\n\n    componentDidMount() {\n        this._mounted = true;\n        this.isMouseMoveUpBound = false;\n\n        // On touch devices, we set up our own touchmove handler because React\n        // all event subscriptions using `OnTouchMove` props are non-passive.\n        // See: https://github.com/facebook/react/issues/6436\n        // Also, we can't subscribe to `ontouchmove`  within the `ontouchstart`\n        // handler because of a WebKit bug:\n        // https://github.com/atlassian/react-beautiful-dnd/issues/413 and\n        // https://bugs.webkit.org/show_bug.cgi?id=184250\n        document.addEventListener(\n            \"touchmove\",\n            this.onMouseMove,\n            // Not all browsers support passive events, and when they don't\n            // this third paramter is just a boolean. If we pass the \"options\"\n            // object, it's interpreted as `capture=true` (which we don't want!)\n            Util.supportsPassiveEvents() ? {passive: false} : false,\n        );\n    }\n\n    componentWillUnmount() {\n        this._mounted = false;\n        // Event handlers should be unbound before component unmounting, but\n        // just in case...\n        if (this.isMouseMoveUpBound) {\n            this.unbindMouseMoveUp();\n        }\n\n        if (this.animationFrameRequest) {\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // eslint-disable-next-line no-restricted-syntax\n            cancelAnimationFrame(this.animationFrameRequest);\n        }\n\n        document.removeEventListener(\"touchmove\", this.onMouseMove);\n    }\n\n    getCurrentPosition = () => {\n        return {\n            left:\n                this.state.startPosition.left +\n                this.state.mouse.left -\n                this.state.startMouse.left,\n            top:\n                this.state.startPosition.top +\n                this.state.mouse.top -\n                this.state.startMouse.top,\n        };\n    };\n\n    render(): React.ReactNode {\n        const {includePadding, layout, state: type} = this.props;\n\n        // We need to keep backwards compatbility with rules specified directly\n        // in CSS. Hence the hacky tacking on of manual classNames.\n        // See sortable.less for details.\n        let className =\n            css(\n                styles.card,\n                styles.draggable,\n                layout === Layout.HORIZONTAL && styles.horizontalCard,\n                layout === Layout.VERTICAL && styles.verticalCard,\n                type === ItemState.DRAGGING && styles.dragging,\n                type === ItemState.DISABLED && styles.disabled,\n                !includePadding && styles.unpaddedCard,\n            ) +\n            \" \" +\n            ApiClassNames.INTERACTIVE +\n            \" perseus-sortable-draggable\";\n\n        if (!includePadding) {\n            className += \" perseus-sortable-draggable-unpadded\";\n        }\n\n        const style: any = {\n            position: \"static\",\n        };\n\n        if (\n            this.props.state === ItemState.DRAGGING ||\n            this.props.state === ItemState.ANIMATING\n        ) {\n            _.extend(style, {position: \"absolute\"}, this.getCurrentPosition());\n        }\n\n        if (this.props.width) {\n            style.width = this.props.width + 1; // Fix for non-integer widths\n        }\n        if (this.props.height) {\n            style.height = this.props.height;\n        }\n        if (this.props.margin != null) {\n            style.margin = this.props.margin;\n        }\n        return (\n            <li\n                className={className}\n                style={style}\n                onMouseDown={this.onMouseDown}\n                onTouchStart={this.onMouseDown}\n                onTouchMove={this.onMouseMove}\n                onTouchEnd={this.onMouseUp}\n                onTouchCancel={this.onMouseUp}\n            >\n                <Renderer\n                    content={this.props.content}\n                    linterContext={PerseusLinter.pushContextStack(\n                        this.props.linterContext,\n                        \"draggable\",\n                    )}\n                    onRender={this.props.onRender}\n                />\n            </li>\n        );\n    }\n\n    componentDidUpdate(prevProps: DraggableProps) {\n        if (this.props.state === prevProps.state) {\n            return;\n        }\n\n        if (this.props.state === ItemState.ANIMATING) {\n            // Start animating\n            const current = this.getCurrentPosition();\n            const duration =\n                15 *\n                Math.sqrt(\n                    Math.sqrt(\n                        Math.pow(\n                            this.props.endPosition.left - current.left,\n                            2,\n                        ) +\n                            Math.pow(\n                                this.props.endPosition.top - current.top,\n                                2,\n                            ),\n                    ),\n                );\n\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'animate' does not exist on type 'JQueryStatic'.\n            $(ReactDOM.findDOMNode(this)).animate(this.props.endPosition, {\n                duration: Math.max(duration, 1),\n                // Animating -> Static\n                complete: this.props.onAnimationEnd,\n            });\n        } else if (this.props.state === ItemState.STATIC) {\n            // Ensure that any animations are done\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'finish' does not exist on type 'JQueryStatic'.\n            $(ReactDOM.findDOMNode(this)).finish();\n        }\n    }\n\n    bindMouseMoveUp = () => {\n        this.isMouseMoveUpBound = true;\n        $(document).on(\"mousemove\", this.onMouseMove);\n        $(document).on(\"mouseup\", this.onMouseUp);\n    };\n\n    unbindMouseMoveUp = () => {\n        this.isMouseMoveUpBound = false;\n        $(document).off(\"mousemove\", this.onMouseMove);\n        $(document).off(\"mouseup\", this.onMouseUp);\n    };\n\n    onMouseDown = (event) => {\n        if (this.props.state !== ItemState.STATIC) {\n            return;\n        }\n\n        if (\n            !(\n                event.button === 0 ||\n                (event.touches != null && event.touches.length === 1)\n            )\n        ) {\n            return;\n        }\n\n        event.preventDefault();\n        const loc = Util.extractPointerLocation(event);\n\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n        this.animationFrameRequest = requestAnimationFrame(() => {\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            const $el = $(ReactDOM.findDOMNode(this));\n\n            // jQuery.position() gets the position of the element wrt its offset parent,\n            // but subtracts the scroll position of the parent. We need to add that back.\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'position' does not exist on type 'JQueryStatic'.\n            const position = $el.position();\n            const startPosition = addOffsetParentScroll($el, position);\n\n            if (loc && this._mounted) {\n                this.setState(\n                    {\n                        startPosition,\n                        // NOTE(slim): We don't bother adjusting `loc` because we only keep track of (mouse - startMouse) in\n                        // this.getCurrentPosition(). Adjusting `loc` here requires us to also change how `loc` is used in\n                        // onMouseMove and onMouseUp, and this requires reading from the DOM each time to measure the parent's scrollTop.\n                        startMouse: loc,\n                        mouse: loc,\n                        dragging: true,\n                    },\n                    function () {\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.bindMouseMoveUp();\n\n                        // Static -> Dragging\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.props.onMouseDown();\n                    },\n                );\n            }\n        });\n    };\n\n    onMouseMove: (arg1: any) => void = (event) => {\n        const notDragging =\n            this.props.state !== ItemState.DRAGGING || !this.state.dragging;\n\n        if (notDragging) {\n            return;\n        }\n\n        event.preventDefault();\n        const loc = Util.extractPointerLocation(event);\n\n        if (loc) {\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // eslint-disable-next-line no-restricted-syntax\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n            this.animationFrameRequest = requestAnimationFrame(() => {\n                this.setState(\n                    {\n                        mouse: loc,\n                    },\n                    this.props.onMouseMove,\n                );\n            });\n        }\n    };\n\n    onMouseUp: (arg1: any) => void = (event) => {\n        const notDragging =\n            this.props.state !== ItemState.DRAGGING || !this.state.dragging;\n\n        if (notDragging) {\n            return;\n        }\n\n        event.preventDefault();\n        const loc = Util.extractPointerLocation(event);\n        if (loc) {\n            this.setState({dragging: false});\n            this.unbindMouseMoveUp();\n\n            // Dragging -> Animating\n            this.props.onMouseUp();\n        }\n    };\n}\n\nexport type SortableOption = string;\n\ntype SortableProps = {\n    constraints:\n        | {\n              width: number;\n              height: number;\n          }\n        | Record<any, any>;\n    disabled: boolean;\n    layout: Layout;\n    margin: number;\n    onChange: (arg1: any) => void;\n    onMeasure: (arg1: {\n        widths: ReadonlyArray<number>;\n        heights: ReadonlyArray<number>;\n    }) => void;\n    padding: boolean;\n    linterContext: LinterContextProps;\n    options: ReadonlyArray<SortableOption>;\n    waitForTexRendererToLoad: boolean;\n};\n\ntype DefaultProps = {\n    constraints: SortableProps[\"constraints\"];\n    disabled: SortableProps[\"disabled\"];\n    layout: SortableProps[\"layout\"];\n    margin: SortableProps[\"margin\"];\n    onChange: SortableProps[\"onChange\"];\n    onMeasure: SortableProps[\"onMeasure\"];\n    padding: SortableProps[\"padding\"];\n    linterContext: SortableProps[\"linterContext\"];\n    waitForTexRendererToLoad: SortableProps[\"waitForTexRendererToLoad\"];\n};\n\ntype SortableItem = {\n    option: SortableOption;\n    key: number;\n    state: ItemState;\n    endPosition: Position | Record<string, never>;\n    width: number;\n    height: number;\n};\n\ntype SortableState = {\n    items: ReadonlyArray<SortableItem>;\n    texRendererLoaded: boolean;\n};\nclass Sortable extends React.Component<SortableProps, SortableState> {\n    static defaultProps: DefaultProps = {\n        layout: Layout.HORIZONTAL,\n        padding: true,\n        disabled: false,\n        constraints: {},\n        onMeasure: function () {},\n        margin: 5,\n        onChange: function () {},\n        linterContext: PerseusLinter.linterContextDefault,\n        waitForTexRendererToLoad: true,\n    };\n\n    constructor(props: SortableProps) {\n        super(props);\n        // Don't call this.setState() here!\n        this.state = {\n            items: Sortable.itemsFromProps(this.props),\n            texRendererLoaded: false,\n        };\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: SortableProps) {\n        const prevProps = this.props;\n\n        if (!_.isEqual(nextProps.options, prevProps.options)) {\n            // Regenerate items\n            this.setState({\n                items: Sortable.itemsFromProps(nextProps),\n            });\n        } else if (\n            nextProps.layout !== prevProps.layout ||\n            nextProps.padding !== prevProps.padding ||\n            nextProps.disabled !== prevProps.disabled ||\n            !_.isEqual(nextProps.constraints, prevProps.constraints)\n        ) {\n            // Clear item measurements\n            this.setState({\n                items: Sortable.clearItemMeasurements(this.state.items),\n            });\n        }\n    }\n\n    componentDidUpdate() {\n        // Measure items if their dimensions have been reset\n        if (\n            this.state.items.length &&\n            !this.state.items[0].width &&\n            !this.state.items[0].height\n        ) {\n            // Measure on the next frame to allow items size to settle.\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(() => {\n                this.measureItems();\n            }, 0);\n        }\n    }\n\n    static itemsFromProps(props: {\n        disabled: boolean;\n        options: ReadonlyArray<SortableOption>;\n    }): ReadonlyArray<SortableItem> {\n        const state: ItemState = props.disabled\n            ? ItemState.DISABLED\n            : ItemState.STATIC;\n        return props.options.map((option: SortableOption, i) => {\n            return {\n                option: option,\n                key: i,\n                state,\n                endPosition: {},\n                width: 0,\n                height: 0,\n            };\n        });\n    }\n\n    static clearItemMeasurements(\n        items: ReadonlyArray<SortableItem>,\n    ): ReadonlyArray<SortableItem> {\n        return items.map((item) => {\n            return {\n                ...item,\n                width: 0,\n                height: 0,\n            };\n        });\n    }\n\n    measureItems() {\n        // Measure all items and cache what their dimensions should be, taking\n        // into account constraints and the current layout. This allows syncing\n        // widths and heights for pretty rows/columns. Note that dimensions are\n        // explictly set on Draggables - this prevents them from changing size\n        // or shape while being dragged.\n\n        let items: ReadonlyArray<SortableItem> = [...this.state.items];\n\n        // Fetches a jQuery list of elements for each item\n        const $items = _.map(\n            items,\n            function (item) {\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                return $(ReactDOM.findDOMNode(this.refs[item.key]));\n            },\n            this,\n        );\n\n        const widths: ReadonlyArray<number> = _.invoke($items, \"outerWidth\");\n        const heights: ReadonlyArray<number> = _.invoke($items, \"outerHeight\");\n\n        const {constraints, layout} = this.props;\n\n        let syncWidth: number | null = null;\n        if (constraints?.width) {\n            // Items must be at least as wide as the specified constraint\n            syncWidth = _.max(widths.concat(constraints.width));\n        } else if (layout === Layout.VERTICAL) {\n            // Sync widths to get a clean column\n            syncWidth = _.max(widths);\n        }\n\n        let syncHeight: number | null = null;\n        if (constraints?.height) {\n            // Items must be at least as high as the specified constraint\n            syncHeight = _.max(heights.concat(constraints.height));\n        } else if (layout === Layout.HORIZONTAL) {\n            // Sync widths to get a clean row\n            syncHeight = _.max(heights);\n        }\n\n        items = _.map(items, function (item, i) {\n            item.width = syncWidth || widths[i];\n            item.height = syncHeight || heights[i];\n            return item;\n        });\n\n        this.setState({items}, () => {\n            this.props.onMeasure &&\n                this.props.onMeasure({widths: widths, heights: heights});\n        });\n    }\n\n    remeasureItems: () => void = _.debounce(() => {\n        this.setState({\n            // Clear item measurements\n            items: Sortable.clearItemMeasurements(this.state.items),\n        });\n    }, 20);\n\n    render(): React.ReactNode {\n        // To minimize layout shift, we display a spinner until our math\n        // renderer is ready to render the math inside the sortable. To\n        // do this, we:\n        // - render a dummy TeX component to force the math renderer to load\n        // - display a spinner until the TeX component calls its onRender\n        //   callback, signifying that the math is rendered (from which we can\n        //   infer that the math renderer has loaded)\n        //\n        // If we didn't do this, the user might see a sortable with empty\n        // cells on first render, and then the math would pop in a few moments\n        // later once the rendering library loaded.\n        if (\n            this.props.waitForTexRendererToLoad &&\n            !this.state.texRendererLoaded\n        ) {\n            const {TeX} = getDependencies();\n            return (\n                <>\n                    <CircularSpinner />\n                    <div style={{display: \"none\"}}>\n                        <TeX\n                            onRender={() =>\n                                this.setState({texRendererLoaded: true})\n                            }\n                        >\n                            1\n                        </TeX>\n                    </div>\n                </>\n            );\n        }\n\n        const cards: Array<\n            | React.ReactElement<React.ComponentProps<typeof Placeholder>>\n            | React.ReactElement<React.ComponentProps<typeof Draggable>>\n        > = [];\n\n        const {layout} = this.props;\n        // We need to keep backwards compatbility with rules specified directly\n        // in CSS. See sortable.less for details.\n        const className = css(styles.sortable) + \" perseus-sortable\";\n\n        const syncWidth =\n            this.props.constraints?.width || layout === Layout.VERTICAL;\n        const syncHeight =\n            this.props.constraints?.height || layout === Layout.HORIZONTAL;\n\n        _.each(\n            this.state.items,\n            function (item, i, items) {\n                const isLast = i === items.length - 1;\n                const isStatic =\n                    item.state === ItemState.STATIC ||\n                    item.state === ItemState.DISABLED;\n                let margin;\n\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                if (this.props.layout === Layout.HORIZONTAL) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    margin = \"0 \" + this.props.margin + \"px 0 0\"; // right\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                } else if (this.props.layout === Layout.VERTICAL) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    margin = \"0 0 \" + this.props.margin + \"px 0\"; // bottom\n                }\n\n                cards.push(\n                    <Draggable\n                        content={item.option}\n                        key={item.key}\n                        state={item.state}\n                        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                        ref={item.key}\n                        width={syncWidth ? item.width : undefined}\n                        height={syncHeight ? item.height : undefined}\n                        layout={layout}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        includePadding={this.props.padding}\n                        margin={isLast && isStatic ? 0 : margin}\n                        endPosition={item.endPosition}\n                        linterContext={PerseusLinter.pushContextStack(\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.props.linterContext,\n                            \"sortable\",\n                        )}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onRender={this.remeasureItems}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onMouseDown={this.onMouseDown.bind(this, item.key)}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onMouseMove={this.onMouseMove.bind(this, item.key)}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onMouseUp={this.onMouseUp.bind(this, item.key)}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onTouchMove={this.onMouseMove.bind(this, item.key)}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onTouchEnd={this.onMouseUp.bind(this, item.key)}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onTouchCancel={this.onMouseUp.bind(this, item.key)}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onAnimationEnd={this.onAnimationEnd.bind(\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this,\n                            item.key,\n                        )}\n                    />,\n                );\n\n                if (\n                    item.state === ItemState.DRAGGING ||\n                    item.state === ItemState.ANIMATING\n                ) {\n                    cards.push(\n                        <Placeholder\n                            key={\"placeholder_\" + item.key}\n                            ref={\"placeholder_\" + item.key}\n                            width={item.width}\n                            height={item.height}\n                            layout={layout}\n                            margin={isLast ? 0 : margin}\n                        />,\n                    );\n                }\n            },\n            this,\n        );\n\n        return <ul className={className}>{cards}</ul>;\n    }\n\n    onMouseDown(key: SortableItem[\"key\"]) {\n        // Static -> Dragging\n        const items = _.map(this.state.items, function (item) {\n            if (item.key === key) {\n                item.state = ItemState.DRAGGING;\n            }\n            return item;\n        });\n\n        this.setState({items: items});\n    }\n\n    // This is public API and it's ok for components that use\n    // this sortable to call this.\n    // moveOptionToIndex takes an option and a desired index and\n    // will move that item to the desired index. This is useful\n    // for testing and other cases where dragging and dropping may\n    // not be available\n    moveOptionToIndex(option: SortableOption, index: number) {\n        const {items} = this.state;\n\n        if (index < 0 || index > items.length) {\n            throw new Error(`index ${index} out of bounds`);\n        }\n\n        const nextItems = _.clone(items);\n\n        const item = items.filter((item: SortableItem) => {\n            return item.option === option;\n        })[0];\n\n        if (item == null) {\n            throw new Error(`option ${option} not found`);\n        }\n\n        const currentIndex = items.findIndex((i: SortableItem) => {\n            return i.key === item.key;\n        });\n\n        // @ts-expect-error [FEI-5003] - TS2551 - Property 'splice' does not exist on type 'readonly SortableItem[]'. Did you mean 'slice'?\n        nextItems.splice(currentIndex, 1);\n        // @ts-expect-error [FEI-5003] - TS2551 - Property 'splice' does not exist on type 'readonly SortableItem[]'. Did you mean 'slice'?\n        nextItems.splice(index, 0, item);\n\n        this.setState({items: nextItems});\n        this.props.onChange && this.props.onChange({});\n    }\n\n    onMouseMove(key: SortableItem[\"key\"]) {\n        // Dragging: Rearrange items based on draggable's position\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $draggable = $(ReactDOM.findDOMNode(this.refs[key]));\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $sortable = $(ReactDOM.findDOMNode(this));\n        const items = _.clone(this.state.items);\n        const item = _.findWhere(this.state.items, {key: key});\n        const margin = this.props.margin || 0;\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'SortableItem | undefined' is not assignable to parameter of type 'SortableItem'.\n        const currentIndex = _.indexOf(items, item);\n        let newIndex = 0;\n\n        // @ts-expect-error [FEI-5003] - TS2551 - Property 'splice' does not exist on type 'readonly SortableItem[]'. Did you mean 'slice'?\n        items.splice(currentIndex, 1);\n\n        if (this.props.layout === Layout.HORIZONTAL) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'offset' does not exist on type 'JQueryStatic'. | TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n            const midWidth = $draggable.offset().left - $sortable.offset().left;\n            let sumWidth = 0;\n            let cardWidth;\n\n            _.each(items, function (item) {\n                cardWidth = item.width;\n                if (midWidth > sumWidth + cardWidth / 2) {\n                    newIndex += 1;\n                }\n                sumWidth += cardWidth + margin;\n            });\n        } else {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'offset' does not exist on type 'JQueryStatic'. | TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n            const midHeight = $draggable.offset().top - $sortable.offset().top;\n            let sumHeight = 0;\n            let cardHeight;\n\n            _.each(items, function (item) {\n                cardHeight = item.height;\n                if (midHeight > sumHeight + cardHeight / 2) {\n                    newIndex += 1;\n                }\n                sumHeight += cardHeight + margin;\n            });\n        }\n\n        if (newIndex !== currentIndex) {\n            // @ts-expect-error [FEI-5003] - TS2551 - Property 'splice' does not exist on type 'readonly SortableItem[]'. Did you mean 'slice'?\n            items.splice(newIndex, 0, item);\n            this.setState({items: items});\n        }\n    }\n\n    onMouseUp(key: SortableItem[\"key\"]) {\n        // Dragging -> Animating\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        const nextAnimationFrame = requestAnimationFrame(() => {\n            const items = _.map(\n                this.state.items,\n                function (item) {\n                    if (item.key === key) {\n                        item.state = ItemState.ANIMATING;\n                        const $placeholder = $(\n                            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                            ReactDOM.findDOMNode(\n                                // eslint-disable-next-line react/no-string-refs\n                                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                this.refs[\"placeholder_\" + key],\n                            ),\n                        );\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'position' does not exist on type 'JQueryStatic'.\n                        const position = $placeholder.position();\n                        const endPosition = addOffsetParentScroll(\n                            $placeholder,\n                            position,\n                        );\n                        item.endPosition = endPosition;\n                    }\n                    return item;\n                },\n                this,\n            );\n\n            this.setState({items: items});\n            // HACK: We need to know *that* the widget changed, but currently it's\n            // not set up in a nice way to tell us *how* it changed, since the\n            // permutation of the items is stored in state.\n            this.props.onChange && this.props.onChange({});\n        });\n\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'animationFrameRequest' does not exist on type 'Sortable'.\n        this.animationFrameRequest = nextAnimationFrame;\n    }\n\n    onAnimationEnd(key: SortableItem[\"key\"]) {\n        // Animating -> Static\n        const items = _.map(this.state.items, function (item) {\n            if (item.key === key) {\n                item.state = ItemState.STATIC;\n            }\n            return item;\n        });\n\n        this.setState({items: items});\n    }\n\n    getOptions(): ReadonlyArray<SortableOption> {\n        return _.pluck(this.state.items, \"option\");\n    }\n}\n\nconst styles = StyleSheet.create({\n    sortable: {\n        boxSizing: \"border-box\",\n        float: \"left\",\n\n        padding: 0,\n        margin: 0,\n    },\n\n    card: {\n        boxSizing: \"border-box\",\n        background: \"#fff\",\n        border: \"1px solid #ddd\",\n        borderRadius: 4,\n        cursor: \"pointer\",\n        minWidth: 25,\n        minHeight: 44,\n        padding: 10,\n\n        listStyleType: \"none\",\n\n        userSelect: \"none\",\n        touchAction: \"none\",\n    },\n\n    placeholder: {\n        background: \"#ddd\",\n        border: \"1px solid #ccc\",\n    },\n\n    draggable: {\n        textAlign: \"center\",\n    },\n\n    horizontalCard: {\n        float: \"left\",\n        cursor: \"ew-resize\",\n    },\n\n    verticalCard: {\n        maxWidth: \"100%\",\n        cursor: \"ns-resize\",\n    },\n\n    unpaddedCard: {\n        padding: 0,\n    },\n\n    dragging: {\n        background: \"#ffedcd\",\n        opacity: 0.8,\n    },\n\n    disabled: {\n        backgroundColor: \"inherit\",\n        border: \"1px solid transparent\",\n        cursor: \"default\",\n    },\n});\n\nexport default Sortable;\n","/* eslint-disable react/forbid-prop-types, react/sort-comp */\nimport {\n    linterContextProps,\n    linterContextDefault,\n} from \"@khanacademy/perseus-linter\";\nimport {CircularSpinner} from \"@khanacademy/wonder-blocks-progress-spinner\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport Sortable, {Layout} from \"../components/sortable\";\nimport {getDependencies} from \"../dependencies\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport Util from \"../util\";\n\nimport type {SortableOption} from \"../components/sortable\";\nimport type {WidgetExports} from \"../types\";\n\nconst {shuffle, seededRNG} = Util;\nconst HACKY_CSS_CLASSNAME = \"perseus-widget-matcher\";\n\ntype State = {\n    leftHeight: number;\n    rightHeight: number;\n    texRendererLoaded: boolean;\n};\n\nclass Matcher extends React.Component<any, any> {\n    static propTypes = {\n        apiOptions: ApiOptions.propTypes,\n        labels: PropTypes.array,\n        left: PropTypes.array,\n        onChange: PropTypes.func,\n        orderMatters: PropTypes.bool,\n        padding: PropTypes.bool,\n        problemNum: PropTypes.number,\n        right: PropTypes.array,\n        trackInteraction: PropTypes.func.isRequired,\n        linterContext: linterContextProps,\n    };\n\n    static defaultProps: any = {\n        left: [],\n        right: [],\n        labels: [\"\", \"\"],\n        orderMatters: false,\n        padding: true,\n        problemNum: 0,\n        onChange: function () {},\n        linterContext: linterContextDefault,\n    };\n\n    state: State = {\n        leftHeight: 0,\n        rightHeight: 0,\n        texRendererLoaded: false,\n    };\n\n    render(): React.ReactElement {\n        // To minimize layout shift, we display a spinner until our math\n        // renderer is ready to render the math inside the matcher. To\n        // do this, we:\n        // - render a dummy TeX component to force the math renderer to load\n        // - display a spinner until the TeX component calls its onRender\n        //   callback, signifying that the math is rendered (from which we can\n        //   infer that the math renderer has loaded)\n        //\n        // If we didn't do this, the user might see a matcher with empty\n        // columns on first render, and then the math would pop in a few\n        // moments later once the rendering library loaded.\n        if (!this.state.texRendererLoaded) {\n            const {TeX} = getDependencies();\n            return (\n                <>\n                    <CircularSpinner />\n                    <div style={{display: \"none\"}}>\n                        <TeX\n                            onRender={() => {\n                                this.setState({texRendererLoaded: true});\n                            }}\n                        >\n                            1\n                        </TeX>\n                    </div>\n                </>\n            );\n        }\n\n        // Use the same random() function to shuffle both columns sequentially\n        const rng = seededRNG(this.props.problemNum);\n\n        let left;\n        if (!this.props.orderMatters) {\n            // If the order doesn't matter, don't shuffle the left column\n            left = this.props.left;\n        } else {\n            left = shuffle(this.props.left, rng, /* ensurePermuted */ true);\n        }\n\n        const right = shuffle(this.props.right, rng, /* ensurePermuted */ true);\n\n        const showLabels = _.any(this.props.labels);\n        const constraints = {\n            height: _.max([this.state.leftHeight, this.state.rightHeight]),\n        } as const;\n\n        const cellMarginPx = this.props.apiOptions.isMobile ? 8 : 5;\n\n        return (\n            <table className={css(styles.widget) + \" \" + HACKY_CSS_CLASSNAME}>\n                <tbody>\n                    {showLabels && (\n                        <tr className={css(styles.row)}>\n                            <th\n                                className={css(\n                                    styles.column,\n                                    styles.columnLabel,\n                                )}\n                            >\n                                <Renderer\n                                    content={this.props.labels[0] || \"...\"}\n                                    linterContext={this.props.linterContext}\n                                />\n                            </th>\n                            <th\n                                className={css(\n                                    styles.column,\n                                    styles.columnRight,\n                                    styles.columnLabel,\n                                )}\n                            >\n                                <Renderer\n                                    content={this.props.labels[1] || \"...\"}\n                                    linterContext={this.props.linterContext}\n                                />\n                            </th>\n                        </tr>\n                    )}\n                    <tr className={css(styles.row)}>\n                        <td className={css(styles.column)}>\n                            <Sortable\n                                options={left}\n                                layout={Layout.VERTICAL}\n                                padding={this.props.padding}\n                                disabled={!this.props.orderMatters}\n                                constraints={constraints}\n                                onMeasure={this.onMeasureLeft}\n                                onChange={this.changeAndTrack}\n                                margin={cellMarginPx}\n                                linterContext={this.props.linterContext}\n                                // eslint-disable-next-line react/no-string-refs\n                                ref=\"left\"\n                            />\n                        </td>\n                        <td className={css(styles.column, styles.columnRight)}>\n                            <Sortable\n                                // @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly unknown[]' is not assignable to type 'readonly string[]'.\n                                options={right}\n                                layout={Layout.VERTICAL}\n                                padding={this.props.padding}\n                                constraints={constraints}\n                                onMeasure={this.onMeasureRight}\n                                onChange={this.changeAndTrack}\n                                margin={cellMarginPx}\n                                linterContext={this.props.linterContext}\n                                // eslint-disable-next-line react/no-string-refs\n                                ref=\"right\"\n                            />\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        );\n    }\n\n    changeAndTrack: (arg1: any) => void = (e) => {\n        this.props.onChange(e);\n        this.props.trackInteraction();\n    };\n\n    onMeasureLeft: (arg1: any) => void = (dimensions) => {\n        const height = _.max(dimensions.heights);\n        this.setState({leftHeight: height});\n    };\n\n    onMeasureRight: (arg1: any) => void = (dimensions) => {\n        const height = _.max(dimensions.heights);\n        this.setState({rightHeight: height});\n    };\n\n    getUserInput: () => any = () => {\n        // If the math renderer hasn't loaded then we won't be able to get the\n        // contents of the sortables on the left and right, so we just return\n        // empty arrays until we render for the first time.\n        if (!this.state.texRendererLoaded) {\n            return {\n                left: [],\n                right: [],\n            };\n        }\n\n        return {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getOptions' does not exist on type 'ReactInstance'.\n            left: this.refs.left.getOptions(),\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getOptions' does not exist on type 'ReactInstance'.\n            right: this.refs.right.getOptions(),\n        };\n    };\n\n    // Programatic API for moving options\n    // This is used by testing\n    moveLeftOptionToIndex: (option: SortableOption, index: number) => void = (\n        option,\n        index,\n    ) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'moveOptionToIndex' does not exist on type 'ReactInstance'.\n        this.refs.left.moveOptionToIndex(option, index);\n    };\n\n    // Programatic API for moving options\n    // This is used by testing\n    moveRightOptionToIndex: (option: SortableOption, index: number) => void = (\n        option,\n        index,\n    ) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'moveOptionToIndex' does not exist on type 'ReactInstance'.\n        this.refs.right.moveOptionToIndex(option, index);\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof Matcher'.\n        return Matcher.validate(this.getUserInput(), rubric);\n    };\n}\n\n_.extend(Matcher, {\n    validate: function (state, rubric) {\n        const correct =\n            _.isEqual(state.left, rubric.left) &&\n            _.isEqual(state.right, rubric.right);\n\n        return {\n            type: \"points\",\n            earned: correct ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    },\n});\n\nconst padding = 5;\nconst border = \"1px solid #444\";\n\nconst styles = StyleSheet.create({\n    widget: {\n        paddingTop: padding,\n        maxWidth: \"100%\",\n\n        // Need to override minWidth in CSS :(\n        minWidth: \"auto\",\n    },\n\n    row: {\n        // Need to override global rules in CSS :(\n        border: 0,\n    },\n\n    column: {\n        // TODO(benkomalo): constraint to half width?\n        padding: 0,\n        border: 0,\n    },\n\n    columnRight: {\n        borderLeft: border,\n    },\n\n    columnLabel: {\n        fontWeight: \"inherit\",\n        borderBottom: border,\n        padding: `0 ${padding}px ${padding}px ${padding}px`,\n        textAlign: \"center\",\n    },\n});\n\nexport default {\n    name: \"matcher\",\n    displayName: \"Two column matcher\",\n    widget: Matcher,\n    isLintable: true,\n} as WidgetExports<typeof Matcher>;\n","/* eslint-disable react/sort-comp */\nimport {number as knumber} from \"@khanacademy/kmath\";\nimport classNames from \"classnames\";\nimport $ from \"jquery\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport Util from \"../util\";\nimport KhanMath from \"../util/math\";\n\nimport type {MathFormat} from \"../perseus-types\";\n\nconst {firstNumericalParse, captureScratchpadTouchStart} = Util;\nconst toNumericString = KhanMath.toNumericString;\nconst getNumericFormat = KhanMath.getNumericFormat;\n\n/* An input box that accepts only numeric strings\n *\n * Calls onChange(value, format) for valid numbers.\n * Reverts to the current value onBlur or on [ENTER],\n *   but maintains the format (i.e. 3/2, 1 1/2, 150%)\n * Accepts empty input and sends it to onChange as null\n *   if no numeric placeholder is set.\n * If given a checkValidity function, will turn\n *   the background/outline red when invalid\n * If useArrowKeys is set to true, up/down arrows will\n *   increment/decrement integers\n * Optionally takes a size (\"mini\", \"small\", \"normal\")\n */\nclass NumberInput extends React.Component<any, any> {\n    static propTypes = {\n        value: PropTypes.number,\n        format: PropTypes.string,\n        placeholder: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        onChange: PropTypes.func.isRequired,\n        onFormatChange: PropTypes.func,\n        checkValidity: PropTypes.func,\n        size: PropTypes.string,\n        label: PropTypes.oneOf([\"put your labels outside your inputs!\"]),\n    };\n\n    static defaultProps: any = {\n        value: null,\n        placeholder: null,\n        format: null,\n        onFormatChange: () => null,\n        checkValidity: () => true,\n        useArrowKeys: false,\n    };\n\n    state: any = {\n        format: this.props.format,\n    };\n\n    render(): React.ReactNode {\n        let classes = classNames({\n            \"number-input\": true,\n            \"invalid-input\": !this._checkValidity(this.props.value),\n            mini: this.props.size === \"mini\",\n            small: this.props.size === \"small\",\n            normal: this.props.size === \"normal\",\n        });\n        if (this.props.className != null) {\n            classes = classes + \" \" + this.props.className;\n        }\n\n        const {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            onFormatChange,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            checkValidity,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            useArrowKeys,\n            ...restProps\n        } = this.props;\n\n        return (\n            <input\n                {...restProps}\n                className={classes}\n                type=\"text\"\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"input\"\n                onChange={this._handleChange}\n                onFocus={this._handleFocus}\n                onBlur={this._handleBlur}\n                onKeyPress={this._handleBlur}\n                onKeyDown={this._onKeyDown}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type '(e: TouchEvent) => void' is not assignable to type 'TouchEventHandler<HTMLInputElement>'.\n                onTouchStart={captureScratchpadTouchStart}\n                defaultValue={toNumericString(\n                    this.props.value,\n                    this.state.format,\n                )}\n                value={undefined}\n            />\n        );\n    }\n\n    componentDidUpdate(prevProps: any) {\n        if (!knumber.equal(this.getValue(), this.props.value)) {\n            this._setValue(this.props.value, this.state.format);\n        }\n    }\n\n    /* Return the current \"value\" of this input\n     * If empty, it returns the placeholder (if it is a number) or null\n     */\n    getValue: () => any = () => {\n        return this.parseInputValue(\n            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'value' does not exist on type 'Element | Text'.\n            ReactDOM.findDOMNode(this.refs.input).value, // eslint-disable-line react/no-string-refs\n        );\n    };\n\n    /* Return the current string value of this input */\n    getStringValue: () => string = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'value' does not exist on type 'Element | Text'.\n        return ReactDOM.findDOMNode(this.refs.input).value.toString(); // eslint-disable-line react/no-string-refs\n    };\n\n    parseInputValue: (arg1: any) => any = (value) => {\n        if (value === \"\") {\n            const placeholder = this.props.placeholder;\n            return _.isFinite(placeholder) ? +placeholder : null;\n        }\n        const result = firstNumericalParse(value);\n        return _.isFinite(result) ? result : this.props.value;\n    };\n\n    /* Set text input focus to this input */\n    focus: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this.refs.input).focus(); // eslint-disable-line react/no-string-refs\n        this._handleFocus();\n    };\n\n    blur: () => void = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'blur' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this.refs.input).blur(); // eslint-disable-line react/no-string-refs\n        this._handleBlur();\n    };\n\n    setSelectionRange: (arg1: number, arg2: number) => any = (\n        selectionStart,\n        selectionEnd,\n    ) => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'setSelectionRange' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this).setSelectionRange(\n            selectionStart,\n            selectionEnd,\n        );\n    };\n\n    getSelectionStart: () => number = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'selectionStart' does not exist on type 'Element | Text'.\n        return ReactDOM.findDOMNode(this).selectionStart;\n    };\n\n    getSelectionEnd: () => number = () => {\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'selectionEnd' does not exist on type 'Element | Text'.\n        return ReactDOM.findDOMNode(this).selectionEnd;\n    };\n\n    _checkValidity: (arg1: any) => boolean = (value) => {\n        if (value == null) {\n            return true;\n        }\n\n        const val = firstNumericalParse(value);\n        const checkValidity = this.props.checkValidity;\n\n        return _.isFinite(val) && checkValidity(val);\n    };\n\n    _handleChange: (arg1: React.ChangeEvent<HTMLInputElement>) => void = (\n        e,\n    ) => {\n        const text = e.target.value;\n        const value = this.parseInputValue(text);\n        const format = getNumericFormat(text);\n\n        this.props.onChange(value);\n        if (format) {\n            this.props.onFormatChange(value, format);\n            this.setState({format: format});\n        }\n    };\n\n    _handleFocus: () => void = () => {\n        if (this.props.onFocus) {\n            this.props.onFocus();\n        }\n    };\n\n    _handleBlur: (e?: React.FocusEvent | React.KeyboardEvent) => void = (e) => {\n        // Only continue on blur or \"enter\"\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'keyCode' does not exist on type 'KeyboardEvent<Element> | FocusEvent<Element, Element>'.\n        if (e && e.type === \"keypress\" && e.keyCode !== 13) {\n            return;\n        }\n\n        this._setValue(this.props.value, this.state.format);\n        if (this.props.onBlur) {\n            this.props.onBlur();\n        }\n    };\n\n    _onKeyDown: (arg1: React.KeyboardEvent) => void = (e) => {\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(e);\n        }\n\n        if (\n            !this.props.useArrowKeys ||\n            !_.contains([\"ArrowUp\", \"ArrowDown\"], e.key)\n        ) {\n            return;\n        }\n\n        let val = this.getValue();\n        if (val !== Math.floor(val)) {\n            return; // bail if not an integer\n        }\n\n        if (e.key === \"ArrowUp\") {\n            val = val + 1;\n        } else if (e.key === \"ArrowDown\") {\n            val = val - 1;\n        }\n\n        if (this._checkValidity(val)) {\n            this.props.onChange(val);\n        }\n    };\n\n    _setValue: (arg1: number, arg2: MathFormat) => void = (val, format) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'val' does not exist on type 'JQueryStatic'.\n        $(ReactDOM.findDOMNode(this.refs.input)).val(\n            toNumericString(val, format),\n        );\n    };\n}\n\nexport default NumberInput;\n","/* eslint-disable react/prop-types */\n/* eslint-disable react/sort-comp */\nimport {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet} from \"aphrodite\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport NumberInput from \"../components/number-input\";\nimport SimpleKeypadInput from \"../components/simple-keypad-input\";\nimport TextInput from \"../components/text-input\";\nimport InteractiveUtil from \"../interactive2/interactive-util\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport Util from \"../util\";\nimport KhanAnswerTypes from \"../util/answer-types\";\n\n// Type imports\nimport type {PerseusMatrixWidgetOptions} from \"../perseus-types\";\nimport type {WidgetExports, WidgetProps} from \"../types\";\n\nconst {assert} = InteractiveUtil;\nconst {stringArrayOfSize} = Util;\n\n// We store two sets of dimensions for the brackets, for our two types of\n// inputs, which vary in formatting: (1) the normal inputs rendered on\n// desktop and (2) the keypad-based inputs newly rendered for the mobile apps\n// and mobile web. These sets of dimensions come from `matrix.less`;\n// the keypad-based input's dimensions are provided to the component itself,\n// below.\nconst NORMAL_DIMENSIONS = {\n    INPUT_MARGIN: 3,\n    INPUT_HEIGHT: 30,\n    INPUT_WIDTH: 40,\n} as const;\n\nconst KEYPAD_INPUT_DIMENSIONS = {\n    INPUT_MARGIN: 4,\n    INPUT_HEIGHT: 36,\n    INPUT_WIDTH: 64,\n} as const;\n\n/* Input handling: Maps a (row, column) pair to a unique ref used by React,\n * and extracts (row, column) pairs from input paths, used to allow outsiders\n * to focus, blur, set input values, etc. */\nfunction getInputPath(row: any, column: any): ReadonlyArray<string> {\n    return [\"\" + row, \"\" + column];\n}\n\nconst getDefaultPath = function () {\n    return getInputPath(0, 0);\n};\n\nconst getRowFromPath = function (path) {\n    // 'path' should be a (row, column) pair\n    assert(_.isArray(path) && path.length === 2);\n    return +path[0];\n};\n\nconst getColumnFromPath = function (path) {\n    // 'path' should be a (row, column) pair\n    assert(_.isArray(path) && path.length === 2);\n    return +path[1];\n};\n\nconst getRefForPath = function (path) {\n    const row = getRowFromPath(path);\n    const column = getColumnFromPath(path);\n    return \"answer\" + row + \",\" + column;\n};\n\nconst getMatrixSize = function (matrix: ReadonlyArray<ReadonlyArray<number>>) {\n    const matrixSize = [1, 1];\n\n    // We need to find the widest row and tallest column to get the correct\n    // matrix size.\n    _(matrix).each((matrixRow, row) => {\n        let rowWidth = 0;\n        _(matrixRow).each((matrixCol, col) => {\n            if (matrixCol != null && matrixCol.toString().length) {\n                rowWidth = col + 1;\n            }\n        });\n\n        // Matrix width:\n        matrixSize[1] = Math.max(matrixSize[1], rowWidth);\n\n        // Matrix height:\n        if (rowWidth > 0) {\n            matrixSize[0] = Math.max(matrixSize[0], row + 1);\n        }\n    });\n    return matrixSize;\n};\n\ntype Rubric = PerseusMatrixWidgetOptions;\n\ntype ExternalProps = WidgetProps<PerseusMatrixWidgetOptions, Rubric>;\n\ntype Props = ExternalProps & {\n    onChange: (\n        arg1: {\n            cursorPosition?: ReadonlyArray<number>;\n            answers?: ReadonlyArray<ReadonlyArray<number | string>>;\n        },\n        arg2: () => boolean,\n    ) => void;\n    numericInput?: boolean;\n};\n\ntype DefaultProps = {\n    matrixBoardSize: Props[\"matrixBoardSize\"];\n    answers: Props[\"answers\"];\n    prefix: Props[\"prefix\"];\n    suffix: Props[\"suffix\"];\n    cursorPosition: Props[\"cursorPosition\"];\n    apiOptions: Props[\"apiOptions\"];\n    linterContext: Props[\"linterContext\"];\n};\n\ntype State = {\n    enterTheMatrix: number;\n};\nclass Matrix extends React.Component<Props, State> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'cursorPosition' has no initializer and is not definitely assigned in the constructor.\n    cursorPosition: [number, number];\n\n    static defaultProps: DefaultProps = {\n        matrixBoardSize: [3, 3],\n        answers: [[]],\n        prefix: \"\",\n        suffix: \"\",\n        cursorPosition: [0, 0],\n        apiOptions: ApiOptions.defaults,\n        linterContext: linterContextDefault,\n    };\n\n    state: State = {\n        enterTheMatrix: 0,\n    };\n\n    componentDidMount() {\n        // Used in the `onBlur` and `onFocus` handlers\n        this.cursorPosition = [0, 0];\n    }\n\n    render(): React.ReactNode {\n        // Set the input sizes through JS so we can control the size of the\n        // brackets. (If we set them in CSS we won't know values until the\n        // inputs are rendered.)\n        let dimensions;\n        if (this.props.apiOptions.customKeypad) {\n            dimensions = KEYPAD_INPUT_DIMENSIONS;\n        } else {\n            dimensions = NORMAL_DIMENSIONS;\n        }\n        const {INPUT_MARGIN, INPUT_HEIGHT, INPUT_WIDTH} = dimensions;\n\n        const matrixSize = getMatrixSize(this.props.answers);\n        const maxRows = this.props.matrixBoardSize[0];\n        const maxCols = this.props.matrixBoardSize[1];\n        const cursorRow = this.props.cursorPosition[0];\n        const cursorCol = this.props.cursorPosition[1];\n\n        const highlightedRow = Math.max(cursorRow, matrixSize[0] - 1);\n        const highlightedCol = Math.max(cursorCol, matrixSize[1] - 1);\n        const bracketHeight =\n            (highlightedRow + 1) * (INPUT_HEIGHT + 2 * INPUT_MARGIN);\n        const bracketOffset =\n            (highlightedCol + 1) * (INPUT_WIDTH + 2 * INPUT_MARGIN);\n\n        const className = classNames({\n            \"perseus-matrix\": true,\n            \"static-mode\": this.props.static,\n            \"the-matrix\": this.state.enterTheMatrix >= 5,\n        });\n\n        return (\n            <div className={className}>\n                {this.props.prefix && (\n                    <div className=\"matrix-prefix\">\n                        <Renderer\n                            content={this.props.prefix}\n                            linterContext={this.props.linterContext}\n                        />\n                    </div>\n                )}\n                <div className=\"matrix-input\">\n                    <div\n                        className=\"matrix-bracket bracket-left\"\n                        style={{\n                            height: bracketHeight,\n                        }}\n                    />\n                    <div\n                        className=\"matrix-bracket bracket-right\"\n                        style={{\n                            height: bracketHeight,\n                            left: bracketOffset,\n                        }}\n                    />\n                    {_(maxRows).times((row) => {\n                        const rowVals = this.props.answers[row];\n                        return (\n                            <div className=\"matrix-row\" key={row}>\n                                {_(maxCols).times((col) => {\n                                    const outside =\n                                        row > highlightedRow ||\n                                        col > highlightedCol;\n                                    const inputProps = {\n                                        className: outside\n                                            ? \"outside\"\n                                            : \"inside\",\n                                        ref: getRefForPath(\n                                            getInputPath(row, col),\n                                        ),\n                                        value: rowVals ? rowVals[col] : null,\n                                        style: {\n                                            height: INPUT_HEIGHT,\n                                            width: INPUT_WIDTH,\n                                            margin: INPUT_MARGIN,\n                                        },\n                                        disabled:\n                                            this.props.apiOptions.readOnly,\n                                        onFocus: () => {\n                                            // We store this locally so that we can use\n                                            // the new information in the `onBlur`\n                                            // handler, which happens before the props\n                                            // change has time to propagate.\n                                            // TODO(emily): Try to fix `MathOutput` so\n                                            // it correctly sends blur events before\n                                            // focus events.\n                                            this.cursorPosition = [row, col];\n                                            this.props.onChange(\n                                                {\n                                                    cursorPosition: [row, col],\n                                                },\n                                                () => {\n                                                    // This isn't a user interaction, so\n                                                    // return false to signal that the\n                                                    // matrix shouldn't be focused\n                                                    return false;\n                                                },\n                                            );\n                                            this._handleFocus(row, col);\n                                        },\n                                        onBlur: () => {\n                                            if (\n                                                row ===\n                                                    this.cursorPosition[0] &&\n                                                col === this.cursorPosition[1]\n                                            ) {\n                                                this.props.onChange(\n                                                    {\n                                                        cursorPosition: [0, 0],\n                                                    },\n                                                    () => {\n                                                        // This isn't a user interaction,\n                                                        // so return false to signal that\n                                                        // the matrix shouldn't be focused\n                                                        return false;\n                                                    },\n                                                );\n                                            }\n                                            this._handleBlur(row, col);\n                                        },\n                                        onKeyDown: (e) => {\n                                            this.handleKeyDown(row, col, e);\n                                        },\n                                        onChange: (value, cb) => {\n                                            this.onValueChange(\n                                                row,\n                                                col,\n                                                value,\n                                                cb,\n                                            );\n                                        },\n                                    } as const;\n\n                                    let MatrixInput;\n                                    if (this.props.apiOptions.customKeypad) {\n                                        const style = {\n                                            margin: INPUT_MARGIN,\n                                            minWidth: INPUT_WIDTH,\n                                            minHeight: INPUT_HEIGHT,\n                                            // Ensure that any borders are included in\n                                            // the provided width.\n                                            boxSizing: \"border-box\",\n                                            backgroundColor: outside\n                                                ? \"#f3f3f3\"\n                                                : \"#fff\",\n                                        } as const;\n\n                                        MatrixInput = (\n                                            <SimpleKeypadInput\n                                                {...inputProps}\n                                                style={style}\n                                                scrollable={true}\n                                                keypadElement={\n                                                    this.props.keypadElement\n                                                }\n                                            />\n                                        );\n                                    } else if (this.props.numericInput) {\n                                        MatrixInput = (\n                                            <NumberInput {...inputProps} />\n                                        );\n                                    } else {\n                                        const updatedProps = {\n                                            ...inputProps,\n                                            style: StyleSheet.create({\n                                                // eslint-disable-next-line react-native/no-unused-styles\n                                                input: {\n                                                    ...inputProps.style,\n                                                    display: \"inline-block\",\n                                                    padding: 0,\n                                                    backgroundColor: outside\n                                                        ? \"#f3f3f3\"\n                                                        : \"#fff\",\n                                                },\n                                            }).input,\n                                        } as const;\n\n                                        MatrixInput = (\n                                            // @ts-expect-error [FEI-5003] - TS2322 - Type '{ style: CSSProperties; className: \"inside\" | \"outside\"; ref: string; value: number | null; disabled: boolean; onFocus: () => void; onBlur: () => void; onKeyDown: (e: any) => void; onChange: (value: any, cb: any) => void; }' is not assignable to type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"children\" | \"style\" | \"id\" | \"className\" | \"placeholder\" | \"onFocus\" | \"onBlur\" | \"onChange\" | \"onKeyDown\" | \"labelText\">'.\n                                            <TextInput {...updatedProps} />\n                                        );\n                                    }\n                                    return (\n                                        <span\n                                            key={col}\n                                            className=\"matrix-input-field\"\n                                        >\n                                            {MatrixInput}\n                                        </span>\n                                    );\n                                })}\n                            </div>\n                        );\n                    })}\n                </div>\n                {this.props.suffix && (\n                    <div className=\"matrix-suffix\">\n                        <Renderer\n                            content={this.props.suffix}\n                            linterContext={this.props.linterContext}\n                        />\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        const inputPaths: Array<ReadonlyArray<string>> = [];\n        const maxRows = this.props.matrixBoardSize[0];\n        const maxCols = this.props.matrixBoardSize[1];\n\n        _(maxRows).times((row) => {\n            _(maxCols).times((col) => {\n                const inputPath = getInputPath(row, col);\n                inputPaths.push(inputPath);\n            });\n        });\n\n        return inputPaths;\n    };\n\n    getGrammarTypeForPath: (arg1: any) => string = (inputPath) => {\n        return \"number\";\n    };\n\n    _handleFocus: (arg1: any, arg2: any) => void = (row, col) => {\n        this.props.onFocus(getInputPath(row, col));\n    };\n\n    _handleBlur: (arg1: any, arg2: any) => void = (row, col) => {\n        this.props.onBlur(getInputPath(row, col));\n    };\n\n    focus: () => boolean = () => {\n        this.focusInputPath(getDefaultPath());\n        return true;\n    };\n\n    focusInputPath: (arg1: any) => void = (path) => {\n        const inputID = getRefForPath(path);\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        this.refs[inputID].focus();\n    };\n\n    blurInputPath: (arg1: any) => void = (path) => {\n        if (path.length === 0) {\n            path = getDefaultPath();\n        }\n\n        const inputID = getRefForPath(path);\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n        this.refs[inputID].blur();\n    };\n\n    getDOMNodeForPath: (arg1: any) => Element | Text | null | undefined = (\n        inputPath,\n    ) => {\n        const inputID = getRefForPath(inputPath);\n        // eslint-disable-next-line react/no-string-refs\n        return ReactDOM.findDOMNode(this.refs[inputID]);\n    };\n\n    setInputValue: (arg1: any, arg2: any, arg3: any) => void = (\n        inputPath,\n        value,\n        callback,\n    ) => {\n        const row = getRowFromPath(inputPath);\n        const col = getColumnFromPath(inputPath);\n        this.onValueChange(row, col, value, callback);\n    };\n\n    handleKeyDown: (arg1: any, arg2: any, arg3: any) => void = (\n        row,\n        col,\n        e,\n    ) => {\n        const maxRow = this.props.matrixBoardSize[0];\n        const maxCol = this.props.matrixBoardSize[1];\n        let enterTheMatrix = null;\n\n        // eslint-disable-next-line react/no-string-refs\n        const curInput = this.refs[getRefForPath(getInputPath(row, col))];\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getStringValue' does not exist on type 'ReactInstance'.\n        const curValueString = curInput.getStringValue();\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getSelectionStart' does not exist on type 'ReactInstance'.\n        const cursorStartPosition = curInput.getSelectionStart();\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getSelectionEnd' does not exist on type 'ReactInstance'.\n        const cursorEndPosition = curInput.getSelectionEnd();\n\n        let nextPath = null;\n        if (e.key === \"ArrowUp\" && row > 0) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly string[]' is not assignable to type 'null'.\n            nextPath = getInputPath(row - 1, col);\n        } else if (e.key === \"ArrowDown\" && row + 1 < maxRow) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly string[]' is not assignable to type 'null'.\n            nextPath = getInputPath(row + 1, col);\n        } else if (e.key === \"ArrowLeft\" && col > 0) {\n            if (cursorStartPosition === 0 && cursorEndPosition === 0) {\n                // Only go to next input if we're at the *start* of the content\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly string[]' is not assignable to type 'null'.\n                nextPath = getInputPath(row, col - 1);\n            }\n        } else if (e.key === \"ArrowRight\" && col + 1 < maxCol) {\n            if (cursorStartPosition === curValueString.length) {\n                // Only go to next input if we're at the *end* of the content\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly string[]' is not assignable to type 'null'.\n                nextPath = getInputPath(row, col + 1);\n            }\n        } else if (e.key === \"Enter\") {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n            enterTheMatrix = this.state.enterTheMatrix + 1;\n        } else if (e.key === \"Escape\") {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type '0' is not assignable to type 'null'.\n            enterTheMatrix = 0;\n        }\n\n        if (nextPath) {\n            // Prevent the cursor from jumping again inside the next input\n            e.preventDefault();\n\n            // Focus the input and move the cursor to the end of it.\n            // eslint-disable-next-line react/no-string-refs\n            const input = this.refs[getRefForPath(nextPath)];\n\n            // Multiply by 2 to ensure the cursor always ends up at the end;\n            // Opera sometimes sees a carriage return as 2 characters.\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getStringValue' does not exist on type 'ReactInstance'.\n            const inputValString = input.getStringValue();\n            const valueLength = inputValString.length * 2;\n\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n            input.focus();\n            if (e.key === \"ArrowRight\") {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'setSelectionRange' does not exist on type 'ReactInstance'.\n                input.setSelectionRange(0, 0);\n            } else {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'setSelectionRange' does not exist on type 'ReactInstance'.\n                input.setSelectionRange(valueLength, valueLength);\n            }\n        }\n\n        if (enterTheMatrix != null) {\n            this.setState({\n                enterTheMatrix: enterTheMatrix,\n            });\n        }\n    };\n\n    onValueChange: (arg1: any, arg2: any, arg3: any, arg4: any) => void = (\n        row,\n        column,\n        value,\n        cb,\n    ) => {\n        const answers = _.map(this.props.answers, _.clone);\n        if (!answers[row]) {\n            answers[row] = [];\n        }\n        // @ts-expect-error [FEI-5003] - TS2571 - Object is of type 'unknown'.\n        answers[row][column] = value;\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        this.props.onChange(\n            {\n                answers: answers,\n            },\n            cb,\n        );\n        this.props.trackInteraction();\n    };\n\n    getUserInput: () => any = () => {\n        return {\n            answers: this.props.answers,\n        };\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof Matrix'.\n        return Matrix.validate(this.getUserInput(), rubric);\n    };\n}\n\n_.extend(Matrix, {\n    validate: function (state, rubric) {\n        const solution = rubric.answers;\n        const supplied = state.answers;\n        const solutionSize = getMatrixSize(solution);\n        const suppliedSize = getMatrixSize(supplied);\n\n        const incorrectSize =\n            solutionSize[0] !== suppliedSize[0] ||\n            solutionSize[1] !== suppliedSize[1];\n\n        const createValidator =\n            KhanAnswerTypes.number.createValidatorFunctional;\n        let message = null;\n        let hasEmptyCell = false;\n        let incorrect = false;\n        _(suppliedSize[0]).times((row) => {\n            _(suppliedSize[1]).times((col) => {\n                if (\n                    supplied[row][col] == null ||\n                    supplied[row][col].toString().length === 0\n                ) {\n                    hasEmptyCell = true;\n                }\n                if (!incorrectSize) {\n                    const validator = createValidator(solution[row][col], {\n                        simplify: true,\n                    });\n                    const result = validator(supplied[row][col]);\n                    if (result.message) {\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n                        message = result.message;\n                    }\n                    if (!result.correct) {\n                        incorrect = true;\n                    }\n                }\n            });\n        });\n\n        if (hasEmptyCell) {\n            return {\n                type: \"invalid\",\n                message: i18n._(\n                    \"Make sure you fill in all cells in the matrix.\",\n                ),\n            };\n        }\n\n        if (incorrectSize) {\n            return {\n                type: \"points\",\n                earned: 0,\n                total: 1,\n                message: null,\n            };\n        }\n\n        return {\n            type: \"points\",\n            earned: incorrect ? 0 : 1,\n            total: 1,\n            message: message,\n        };\n    },\n});\n\nconst propTransform: (arg1: any) => any = (editorProps) => {\n    // Remove answers before passing to widget\n    const blankAnswers = _(editorProps.matrixBoardSize[0]).times(function () {\n        return stringArrayOfSize(editorProps.matrixBoardSize[1]);\n    });\n    editorProps = _.pick(editorProps, \"matrixBoardSize\", \"prefix\", \"suffix\");\n    return _.extend(editorProps, {\n        answers: blankAnswers,\n    });\n};\n\nconst staticTransform: (arg1: any) => any = (editorProps) => {\n    const widgetProps = _.pick(\n        editorProps,\n        \"matrixBoardSize\",\n        \"prefix\",\n        \"suffix\",\n    );\n    // We convert matrix cells from numbers to string to match the expected\n    // input into the rendered widget.\n    // @ts-expect-error [FEI-5003] - TS2339 - Property 'answers' does not exist on type 'Pick<any, \"suffix\" | \"prefix\" | \"matrixBoardSize\">'.\n    widgetProps.answers = _.map(editorProps.answers, (row) => {\n        // Replace null values with empty string\n        return _.map(row, (cell) => (cell != null ? String(cell) : \"\"));\n    });\n    return widgetProps;\n};\n\nexport default {\n    name: \"matrix\",\n    displayName: \"Matrix\",\n    widget: Matrix,\n    transform: propTransform,\n    staticTransform: staticTransform,\n    isLintable: true,\n} as WidgetExports<typeof Matrix>;\n","/* eslint-disable @babel/no-invalid-this, react/sort-comp */\nimport createReactClass from \"create-react-class\";\nimport $ from \"jquery\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport SvgImage from \"../components/svg-image\";\nimport {ApiOptions} from \"../perseus-api\";\nimport GraphUtils from \"../util/graph-utils\";\n\nimport type {WidgetExports} from \"../types\";\n\nconst defaultImage = {\n    url: null,\n    top: 0,\n    left: 0,\n} as const;\n\nconst Measurer: any = createReactClass({\n    displayName: \"Measurer\",\n\n    propTypes: {\n        apiOptions: ApiOptions.propTypes,\n        box: PropTypes.arrayOf(PropTypes.number),\n        image: PropTypes.shape({\n            url: PropTypes.string,\n            top: PropTypes.number,\n            left: PropTypes.number,\n        }),\n        showProtractor: PropTypes.bool,\n        protractorX: PropTypes.number,\n        protractorY: PropTypes.number,\n        showRuler: PropTypes.bool,\n        rulerLabel: PropTypes.string,\n        rulerTicks: PropTypes.number,\n        rulerPixels: PropTypes.number,\n        rulerLength: PropTypes.number,\n    },\n\n    getDefaultProps: function () {\n        return {\n            box: [480, 480],\n            image: {},\n            showProtractor: true,\n            protractorX: 7.5,\n            protractorY: 0.5,\n            showRuler: false,\n            rulerLabel: \"\",\n            rulerTicks: 10,\n            rulerPixels: 40,\n            rulerLength: 10,\n        };\n    },\n\n    getInitialState: function () {\n        return {};\n    },\n\n    render: function () {\n        const image = _.extend({}, defaultImage, this.props.image);\n\n        // TODO(scottgrant): This isn't a11y-friendly! We should insist on\n        // finding some valid alt text when this widget is used.\n        return (\n            <div\n                className={\n                    \"perseus-widget perseus-widget-measurer \" +\n                    \"graphie-container above-scratchpad\"\n                }\n                style={{width: this.props.box[0], height: this.props.box[1]}}\n            >\n                {image.url && (\n                    <div\n                        style={{\n                            position: \"relative\",\n                            top: image.top,\n                            left: image.left,\n                        }}\n                    >\n                        {/* @ts-expect-error [FEI-5003] - TS2741 - Property 'alt' is missing in type '{ src: any; }' but required in type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"children\" | \"height\" | \"width\" | \"title\" | \"alt\" | \"trackInteraction\" | \"preloader\" | \"allowFullBleed\" | \"extraGraphie\" | \"overrideAriaHidden\">'. */}\n                        <SvgImage src={image.url} />\n                    </div>\n                )}\n                {/* eslint-disable-next-line react/no-string-refs */}\n                <div className=\"graphie\" ref=\"graphieDiv\" />\n            </div>\n        );\n    },\n\n    componentDidMount: function () {\n        this.setupGraphie();\n    },\n\n    componentDidUpdate: function (prevProps) {\n        const shouldSetupGraphie = _.any(\n            [\n                \"box\",\n                \"showProtractor\",\n                \"showRuler\",\n                \"rulerLabel\",\n                \"rulerTicks\",\n                \"rulerPixels\",\n                \"rulerLength\",\n            ],\n            function (prop) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                return prevProps[prop] !== this.props[prop];\n            },\n            this,\n        );\n\n        if (shouldSetupGraphie) {\n            this.setupGraphie();\n        }\n    },\n\n    setupGraphie: function () {\n        // eslint-disable-next-line react/no-string-refs\n        const graphieDiv = ReactDOM.findDOMNode(this.refs.graphieDiv);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'empty' does not exist on type 'JQueryStatic'.\n        $(graphieDiv).empty();\n        const graphie = (this.graphie = GraphUtils.createGraphie(graphieDiv));\n\n        const scale = [40, 40];\n        const range = [\n            [0, this.props.box[0] / scale[0]],\n            [0, this.props.box[1] / scale[1]],\n        ];\n        graphie.init({\n            range: range,\n            scale: scale,\n        });\n        graphie.addMouseLayer({\n            allowScratchpad: true,\n            setDrawingAreaAvailable:\n                this.props.apiOptions.setDrawingAreaAvailable,\n        });\n\n        if (this.protractor) {\n            this.protractor.remove();\n        }\n\n        if (this.props.showProtractor) {\n            this.protractor = graphie.protractor([\n                this.props.protractorX,\n                this.props.protractorY,\n            ]);\n        }\n\n        if (this.ruler) {\n            this.ruler.remove();\n        }\n\n        if (this.props.showRuler) {\n            this.ruler = graphie.ruler({\n                center: [\n                    (range[0][0] + range[0][1]) / 2,\n                    (range[1][0] + range[1][1]) / 2,\n                ],\n                label: this.props.rulerLabel,\n                pixelsPerUnit: this.props.rulerPixels,\n                ticksPerUnit: this.props.rulerTicks,\n                units: this.props.rulerLength,\n            });\n        }\n    },\n\n    getUserInput: function () {\n        return {};\n    },\n\n    simpleValidate: function (rubric) {\n        // TODO(joel) - I don't understand how this is useful!\n        return Measurer.validate(this.getUserInput(), rubric);\n    },\n\n    focus: $.noop,\n});\n\n_.extend(Measurer, {\n    validate: function (state, rubric) {\n        return {\n            type: \"points\",\n            earned: 1,\n            total: 1,\n            message: null,\n        };\n    },\n});\n\nconst propUpgrades = {\n    \"1\": (v0props: any): any => {\n        const v1props = _(v0props)\n            .chain()\n            .omit(\"imageUrl\", \"imageTop\", \"imageLeft\")\n            .extend({\n                image: {\n                    url: v0props.imageUrl,\n                    top: v0props.imageTop,\n                    left: v0props.imageLeft,\n                },\n            })\n            .value();\n        return v1props;\n    },\n} as const;\n\nexport default {\n    name: \"measurer\",\n    displayName: \"Measurer\",\n    widget: Measurer,\n    version: {major: 1, minor: 0},\n    propUpgrades: propUpgrades,\n} as WidgetExports<typeof Measurer>;\n","/**\n * Draw some text into a 2D canvas drawing context.\n *\n * Args:\n *     ctx: the 2D drawing context\n *     item: the rendering instruction for the text.  Must look like: {\n *         type: \"text\",\n *         pos: [x, y],\n *         value: \"some text to draw\",\n *     }\n *\n */\nfunction drawText(ctx, item: any) {\n    if (item.value === null) {\n        return;\n    }\n    ctx.fillStyle = styles.fgColor;\n    ctx.font = styles.font;\n    ctx.fillText(\n        item.value,\n        item.pos[0] - styles.fontSizePx / 2 + 1,\n        item.pos[1] + styles.fontSizePx / 2,\n    );\n}\n\n/**\n * Draw a double line into a 2D canvas drawing context.\n *\n * Apparently the way you do this is to stroke an extra-wide line in the\n * foreground color and then a smaller line in the background color. 5:3\n * foreground:background width looks reasonable for drawing chemical bonds.\n *\n * Args:\n *     ctx: the 2D drawing context\n *     item: the rendering instruction for the line.  Must look like: {\n *         type: \"line:double\",\n *         startPos: [x, y],\n *         endPos: [x, y],\n *     }\n */\nfunction drawDoubleLine(ctx: any, item: any) {\n    // Outer line that forms both of the bond lines.\n    let path = new Path2D();\n    ctx.lineWidth = 5 * styles.lineWidth;\n    ctx.strokeStyle = styles.fgColor;\n    path.moveTo(item.startPos[0], item.startPos[1]);\n    path.lineTo(item.endPos[0], item.endPos[1]);\n    ctx.stroke(path);\n\n    // Inner white line that separates the two bond lines.\n    path = new Path2D();\n    ctx.lineWidth = 3 * styles.lineWidth;\n    ctx.strokeStyle = styles.bgColor;\n    path.moveTo(item.startPos[0], item.startPos[1]);\n    path.lineTo(item.endPos[0], item.endPos[1]);\n    ctx.stroke(path);\n}\n\n/**\n * Draw a triple line into a 2D canvas drawing context.\n *\n * Following the strategy for the double line, we stroke a very wide\n * foreground-color line, then a medium background-color line, then a narrow\n * foreground-color line.\n *\n * Args:\n *     ctx: the 2D drawing context\n *     item: the rendering instruction for the line.  Must look like: {\n *         type: \"line:triple\",\n *         startPos: [x, y],\n *         endPos: [x, y],\n *     }\n */\nfunction drawTripleLine(ctx: any, item: any) {\n    // TODO(colin): consolidate duplicated code from the three line drawing\n    // functions.\n\n    // Outer line that will form the two outer bond lines.\n    let path = new Path2D();\n    ctx.lineWidth = 7 * styles.lineWidth;\n    ctx.strokeStyle = styles.fgColor;\n    path.moveTo(item.startPos[0], item.startPos[1]);\n    path.lineTo(item.endPos[0], item.endPos[1]);\n    ctx.stroke(path);\n\n    // Middle white line that separates the bonds\n    path = new Path2D();\n    ctx.lineWidth = 5 * styles.lineWidth;\n    ctx.strokeStyle = styles.bgColor;\n    path.moveTo(item.startPos[0], item.startPos[1]);\n    path.lineTo(item.endPos[0], item.endPos[1]);\n    ctx.stroke(path);\n\n    // Inner line that forms the middle bond line.\n    drawLine(ctx, item);\n}\n\n/**\n * Draw a single line into a 2D canvas drawing context\n *\n * Args:\n *     ctx: the 2D drawing context\n *     item: the rendering instruction for the line.  Must look like: {\n *         type: \"line:single\",\n *         startPos: [x, y],\n *         endPos: [x, y],\n *     }\n */\nfunction drawLine(ctx: any, item) {\n    const path = new Path2D();\n    ctx.lineWidth = styles.lineWidth;\n    ctx.strokeStyle = styles.fgColor;\n    path.moveTo(item.startPos[0], item.startPos[1]);\n    path.lineTo(item.endPos[0], item.endPos[1]);\n    ctx.stroke(path);\n}\n\n/**\n * Lookup table that maps drawing instruction types to the functions that\n * render them.\n */\nconst drawingFuncs = {\n    text: drawText,\n    \"line:single\": drawLine,\n    \"line:double\": drawDoubleLine,\n    \"line:triple\": drawTripleLine,\n} as const;\n\n/**\n * Draw a single rendering instruction into a 2D canvas drawing context.\n */\nfunction drawItem(ctx: any) {\n    return function (item: any) {\n        drawingFuncs[item.type](ctx, item);\n    };\n}\n\n/**\n * Lookup table for drawing priorities.\n *\n * Types with lower priorities are drawn first.\n */\nconst ordering = {\n    \"line:single\": 0,\n    \"line:double\": 0,\n    \"line:triple\": 0,\n    text: 1,\n} as const;\n\n/**\n * Sorting comparison function that orders rendering instructions according to\n * their type's priority.\n */\nfunction compareElements(item0: any, item1: any) {\n    return ordering[item0.type] - ordering[item1.type];\n}\n\n/**\n * Draw an array of rendering instructions into a 2D canvas drawing context.\n */\nfunction draw(ctx: any, items: Array<any>) {\n    items.sort(compareElements).forEach(drawItem(ctx));\n}\n\nconst styles = {\n    bgColor: \"rgb(255, 255, 255)\",\n    fgColor: \"rgb(0, 0, 0)\",\n    fontSizePx: 12,\n    lineWidth: 1,\n    font: \"12px sans\",\n} as const;\n\nexport default draw;\n","/**\n * A molecule layout engine.\n *\n * This module transforms the SMILES syntax tree into a set of rendering\n * instructions.  A rendering instruction is an object indicating what type of\n * thing to render (e.g. text or line), where to render it, and any other style\n * properties needed.\n *\n * For instance, an oxygen atom might be rendered as\n * {type: \"text\", value: \"O\", pos: [0, 0], idx: \"1,0\"}\n */\n\n// Default length of the bond.  This currently corresponds directly to pixels\n// in the renderer, but we may want this just to be arbitrary in the future.\nconst bondLength = 30;\n\n/**\n * Compute a coordinate by moving an angle and length from an origin point.\n *\n * Args:\n *     origin: a list of the [x, y] coordinates of the origin\n *     angle: an angle in degrees from the origin, following the typical\n *         convention of +x axis = 0 degrees, +y axis = 90 degrees.\n *     length: the distance to the new point\n * Return:\n *     a two-element list containing the [x, y] coordinates of the point.\n */\nfunction polarAdd(origin: any, angle, length) {\n    const x = origin[0];\n    const y = origin[1];\n    return [\n        x + Math.cos((angle * 2 * Math.PI) / 360) * length,\n        y + -1.0 * Math.sin((angle * 2 * Math.PI) / 360) * length,\n    ];\n}\n\n/**\n * Compute the layout for a single atom.\n *\n * Args:\n *     atom: the atom node for which layout is being created, as returned from\n *         convertTree; the computed position of this atom is added to this\n *         object in place, in addition to being returned in the layout\n *         instruction.\n *         TODO(colin): refactor so that we don't need to modify this in place\n *     atoms: the list of all atoms, as returned from convertTree, used to\n *         position this atom appropriately relative to its neighbors\n *     bonds: the list of all bonds, as returned from convertTree, used to\n *         determine the geometry based on bond type\n *     rotationAngle: a constant rotation for the whole molecule (in degrees)\n *\n * Return:\n *     a rendering instruction for the atom, containing a type (text), the text\n *     to render, the position, and the atom index\n */\nfunction atomLayout(\n    atom: any,\n    atoms: any,\n    bonds: ReadonlyArray<any>,\n    rotationAngle: number,\n): any {\n    let textValue = atom.symbol;\n    if (textValue === \"C\" && Object.keys(atoms).length !== 1) {\n        // By convention, don't render the C for carbon in a chain.\n        textValue = null;\n    }\n\n    if (atom.idx === \"1,0\") {\n        // The first atom is special-cased because there are no neighbors for\n        // relative positioning.\n        const pos = [0, 0];\n        atom.pos = pos;\n        // Conventionally, molecules are rendered where the first bond is not\n        // horizontal, but at a 30 degree angle, so subtract 30 degrees for the\n        // first atom's direction.\n        atom.baseAngle = -30 + rotationAngle;\n        return {type: \"text\", value: textValue, pos: pos, idx: atom.idx};\n    }\n    // If we're an atom with any other index than the case just handled, we're\n    // guaranteed to have a neighbor who has a defined position.\n    const prevPositionedAtom =\n        atoms[\n            atom.connections.find(function (c) {\n                return atoms[c].pos;\n            })\n        ];\n\n    // Find this atom's index in the previous atom's connections\n    const myIndex = prevPositionedAtom.connections.indexOf(atom.idx);\n\n    let baseAngleIncrement = 60;\n    let angleIncrement = 120;\n    if (prevPositionedAtom.connections.length === 4) {\n        // By convention, if an atom has 4 bonds, we represent it with 90\n        // degree angles in 2D, even though it would have tetrahedral geometry\n        // with ~110 degree angles in 3D.\n        angleIncrement = 90;\n        baseAngleIncrement = 90;\n    } else if (\n        bonds.find(\n            (bond) => bond.bondType === \"triple\" && bond.to === atom.idx,\n        ) ||\n        bonds.find(\n            (bond) =>\n                bond.bondType === \"triple\" &&\n                bond.to === prevPositionedAtom.idx,\n        )\n    ) {\n        // Triple bonds have a bond angle of 180 degrees, so don't change the\n        // direction in which we made the previous bond.\n        angleIncrement = 0;\n        baseAngleIncrement = 0;\n    }\n\n    let angle = 0;\n    const idxPath = prevPositionedAtom.idx.split(\":\");\n    const lastAtomIdx = idxPath[idxPath.length - 1].split(\",\")[0];\n\n    // Conventionally, a single chain of atoms is rendered as a zig-zag pattern\n    // with 120 degree angles.  This means we need to flip the angle every\n    // other atom.  The parser ensures that indices always alternate odd-even,\n    // including taking into account branch points.\n    // TODO(colin): don't depend on the parser's indexing scheme and just track\n    // this entirely in the layout engine.\n    if (parseInt(lastAtomIdx) % 2 !== 0) {\n        angle =\n            prevPositionedAtom.baseAngle -\n            (baseAngleIncrement - angleIncrement * myIndex);\n    } else {\n        angle =\n            prevPositionedAtom.baseAngle +\n            (baseAngleIncrement - angleIncrement * myIndex);\n    }\n\n    const pos = polarAdd(prevPositionedAtom.pos, angle, bondLength);\n\n    atom.pos = pos;\n    atom.baseAngle = angle;\n\n    return {type: \"text\", value: textValue, pos: pos, idx: atom.idx};\n}\n\n/**\n * Get the start and end position for a bond connecting two atoms.\n *\n * If we have non-carbon atoms that render with explicit letters connected by a\n * bond, we don't want the line for the bond to extend into the lettering for\n * the atom.\n *\n * This function returns the start and end positions of the bond's line, taking\n * into account that one or both end points might need to be moved to make room\n * for text.\n *\n * TODO(colin): this makes assumptions about the relative sizes of the length\n * of a bond and the text.  Think about alternate ways to represent this that\n * might not have that problem.\n */\nfunction maybeShrinkLines(fromAtom: any, toAtom) {\n    const shrinkFactor = 0.25;\n    let fromPos = [fromAtom.pos[0], fromAtom.pos[1]];\n    let toPos = [toAtom.pos[0], toAtom.pos[1]];\n    if (fromAtom.symbol !== \"C\") {\n        fromPos = [\n            toAtom.pos[0] -\n                (1 - shrinkFactor) * (toAtom.pos[0] - fromAtom.pos[0]),\n            toAtom.pos[1] -\n                (1 - shrinkFactor) * (toAtom.pos[1] - fromAtom.pos[1]),\n        ];\n    }\n    if (toAtom.symbol !== \"C\") {\n        // For carbon atoms, conventionally we don't draw any letter, so this\n        // special cases drawing the bond lines all the way to the point where\n        // they meet.\n        toPos = [\n            fromAtom.pos[0] -\n                (1 - shrinkFactor) * (fromAtom.pos[0] - toAtom.pos[0]),\n            fromAtom.pos[1] -\n                (1 - shrinkFactor) * (fromAtom.pos[1] - toAtom.pos[1]),\n        ];\n    }\n    return [fromPos, toPos];\n}\n\n/**\n * Compute the layout for a bond between two atoms.\n *\n * Args:\n *     bond: the bond node for which the layout is being computed, as returned\n *         by convertTree\n *     atoms: the list of all atoms returned by convertTree, which should\n *         already have been processed for layout and thus have positions set\n *\n * Return:\n *     a rendering instruction for the bond containing a type\n *     (line:{single,double,triple}) and the line's endpoints\n */\nfunction bondLayout(bond: any, atoms: any): any {\n    const fromAtom = atoms[bond.from];\n    const toAtom = atoms[bond.to];\n    const startAndEndPos = maybeShrinkLines(fromAtom, toAtom);\n    return {\n        type: \"line:\" + bond.bondType,\n        startPos: startAndEndPos[0],\n        endPos: startAndEndPos[1],\n    };\n}\n\n/**\n * Convert an array of atom indices to a single string unique identifier.\n *\n * For linear molecules, or for atoms in the main chain, this will just be the\n * atom index, something like \"0,1\".  For branched molecules, however, we\n * uniquely identify atoms by an array of atoms where the branching happened,\n * followed by the index in the current branch (like [\"0,1\", \"1,2\", \"1,1\"]).\n * This function just joins the parts with a colon so that we can have nice\n * object keys that still track the series of branches to get to an atom, which\n * is guaranteed to be a unique identifier.\n *\n */\nfunction idxString(idx) {\n    return idx.join(\":\");\n}\n\n/**\n * Convert the parse tree output by the parser into an ordered list of atoms\n * and bonds to render.\n *\n * Args:\n *     atoms: the output list of atoms that we're in the process of building.\n *         This should be the empty list if not being called recursively.\n *     bonds: the output list of bonds that we're in the process of building.\n *         This should be the empty list if not being called recursively.\n *     tree: the parse tree generated by the SMILES parser module.\n *\n * Return:\n *     the final value of atoms and bonds, which are lists of all the atom\n *     nodes and bond nodes, respectively, that need to be rendered.\n */\nfunction convertTree(atoms: any, bonds: any, tree: any): [any, any] {\n    if (tree === null) {\n        return [atoms, bonds];\n    }\n    if (tree.type === \"atom\") {\n        const treeIdx = idxString(tree.idx);\n        atoms[treeIdx] = {idx: treeIdx, symbol: tree.symbol, connections: []};\n        if (tree.bonds) {\n            tree.bonds.forEach(function (b) {\n                const toIdx = idxString(b.to.idx);\n                atoms[treeIdx].connections.push(toIdx);\n                bonds.push({from: treeIdx, to: toIdx, bondType: b.bondType});\n                convertTree(atoms, bonds, b.to);\n                atoms[toIdx].connections.push(treeIdx);\n            });\n        }\n    }\n    return [atoms, bonds];\n}\n\n/**\n * Recursively process the queue of atoms that need to have layout computed.\n *\n * Args:\n *     outputs: the array of atom rendering instructions we're in the process\n *         of building.  This should be the empty array if not being called\n *         recursively.\n *     atomProcessingQueue: the array of unique identifier strings (see the\n *         comment for idxString for more information about these) of atoms\n *         currently in line to be processed.  When not being called\n *         recursively, this should be a array with a single element, the\n *         unique identifier of the first atom in the structure (\"1,0\" in the\n *         current scheme).\n *     atoms: the array of all atom nodes to be rendered, as returned by\n *         convertTree\n *     bonds: the array of all bond nodes to be rendered, as returned by\n *         convertTree\n *\n * Return:\n *     an array of rendering instructions for all the atoms in the molecule\n */\nfunction atomLayoutHelper(\n    outputs,\n    atomProcessingQueue,\n    atoms,\n    bonds,\n    rotationAngle,\n) {\n    if (atomProcessingQueue.length === 0) {\n        return outputs;\n    }\n\n    const queuedAtomIdx = atomProcessingQueue.shift();\n    const atom = atoms[queuedAtomIdx];\n    atom.connections.forEach(function (c) {\n        if (!atoms[c].pos) {\n            atomProcessingQueue.push(c);\n        }\n    });\n    return atomLayoutHelper(\n        outputs.concat(atomLayout(atom, atoms, bonds, rotationAngle)),\n        atomProcessingQueue,\n        atoms,\n        bonds,\n        rotationAngle,\n    );\n}\n\n/**\n * Recursively process the queue of bonds that need to have layout computed.\n *\n * Args:\n *     outputs: the array of bond rendering instructions we're in the process\n *         of building.  This should be the empty array or the array of all\n *         atom rendering instructions if not being called recursively.\n *     atoms: the array of all atom nodes to be rendered, as returned by\n *         convertTree\n *     bonds: the array of all bond nodes to be rendered, as returned by\n *         convertTree\n *\n * Return:\n *     an array of rendering instructions for all the bonds in the molecule\n *     concatenated to the initial value of outputs\n */\nfunction bondLayoutHelper(outputs: Array<any>, atoms, bonds: any) {\n    if (bonds.length === 0) {\n        return outputs;\n    }\n    return bondLayoutHelper(\n        outputs.concat(bondLayout(bonds[0], atoms)),\n        atoms,\n        bonds.slice(1),\n    );\n}\n\n/**\n * Compute an array of rendering instructions from the parse tree of a molecule.\n *\n * Args:\n *     tree: the parse tree as returned by the SMILES parser module\n *     rotationAngle: a global rotation (in degrees) to be applied to the whole\n *         molecule; this is manually adjustable in the widget.\n *\n * Return:\n *     an array of rendering instructions for all the atoms and bonds in the\n *     molecule suitable for processing by the renderer\n */\nfunction layout(tree: any, rotationAngle: any): any {\n    const converted = convertTree({}, [], tree);\n    const atoms = converted[0];\n    const bonds = converted[1];\n    const outputs = atomLayoutHelper([], [\"1,0\"], atoms, bonds, rotationAngle);\n    return bondLayoutHelper(outputs, atoms, bonds);\n}\n\nexport default {\n    layout: layout,\n    // The remainder are exported for testing and are not intended for external\n    // use.\n    _atomLayout: atomLayout,\n    _bondLayout: bondLayout,\n    _bondLength: bondLength,\n    _convertTree: convertTree,\n};\n","// Regexp defining characters that are valid SMILES characters that this parser\n// can parse.  In addition to serving as a sort of validation, this also keeps\n// out unimplemented features (like cycles and stereochemistry), which use\n// additional characters.\nconst smilesRe = new RegExp(\"^[A-Za-z\\\\[\\\\]()=#+-]*$\");\n\n// Regexp defining what characters are valid as atom names.  This includes\n// common 1-character elements, Cl and Br for convenience, and the open\n// bracket, which can be used to include anything as an atom name.\nconst atomRe = new RegExp(\"^(Cl|Br|[CONPSFBI]|\\\\[)\");\n\nfunction ParseError(message: string) {\n    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n    this.message = message;\n}\n\n/**\n * Perform a functional update of a possibly nested object.\n *\n * Args:\n *     obj: an object, will not be modified\n *     keylist: a list of keys whose values will be updated in the object.\n *         This represents a path to a value inside nested objects.  For\n *         example, if keylist == [\"a\", \"b\", \"c\"], then a new object is\n *         returned with obj[\"a\"][\"b\"][\"c\"] updated.  Note that if any of the\n *         keys is not already present, this will insert {} as a default value\n *         for that key.\n *     val: the new value to associate with the keypath\n *\n * Return: a new object, which is a shallow copy of the original with the value\n *     at the specified keypath replaced.\n */\nfunction _mset(obj, keylist, val) {\n    const k0 = keylist[0];\n    const rest = keylist.slice(1);\n    let newObj;\n    if (Array.isArray(obj)) {\n        newObj = [...obj];\n    } else {\n        newObj = {...(obj || {})};\n    }\n    let newVal = val;\n    if (rest.length > 0) {\n        newVal = _mset(newObj[k0], rest, val);\n    }\n    newObj[k0] = newVal;\n    return newObj;\n}\n\n/**\n * Perform a functional increment of a value in a nested object.\n *\n * Args:\n *     obj: an object; this will not be modified\n *     keylist: a list of keys representing a path into a nested object.  (See\n *         `_mset` for examples.)\n *\n * Return:\n *     an object that is a shallow copy of obj, with the value at the specified\n *     path incremeneted.\n */\nfunction _inc(obj, keylist: Array<number | string>) {\n    const val = keylist.reduce(function (acc, elt) {\n        return acc[elt];\n    }, obj);\n\n    return _mset(obj, keylist, val + 1);\n}\n\nfunction validate(smiles) {\n    return smilesRe.test(smiles);\n}\n\n/**\n * Parse a bond modifier character, updating the context object so that the\n * next bond created has this modifier.\n */\nfunction parseBondModifier(smiles: any, ctx) {\n    const firstChar = smiles[0];\n    const rest = smiles.slice(1);\n    if (firstChar === \"=\") {\n        return parse(rest, _mset(ctx, [\"bond\", \"bondType\"], \"double\"));\n    }\n    if (firstChar === \"#\") {\n        return parse(rest, _mset(ctx, [\"bond\", \"bondType\"], \"triple\"));\n    }\n    throw new ParseError(\"Invalid character: \" + firstChar);\n}\n\n/**\n * Slice the input string, removing a parenthesized expression.\n * (Will handle nested parentheses.)\n *\n * parenStack should be a list containing any open parentheses already\n * encountered.  (Usually, this will be [\"(\"])\n */\nfunction sliceFromMatchingCloseParen(smiles: any, parenStack: Array<any>) {\n    if (parenStack.length === 0) {\n        return smiles;\n    }\n\n    if (smiles === \"\") {\n        throw new ParseError(\"Mismatched parentheses\");\n    }\n\n    const firstChar = smiles[0];\n    const rest = smiles.slice(1);\n\n    if (firstChar === \"(\") {\n        return sliceFromMatchingCloseParen(rest, parenStack.concat(firstChar));\n    }\n\n    if (firstChar === \")\") {\n        return sliceFromMatchingCloseParen(rest, parenStack.slice(1));\n    }\n\n    return sliceFromMatchingCloseParen(rest, parenStack);\n}\n\n/**\n * Parse a branch, as indicated by the presence of a parenthesized experession.\n *\n * This returns a list of all branches (including the continuation of the\n * backbone) that should be added to the previous atom's bond list.\n */\nfunction parseParenthesizedExpression(smiles: any, ctx: any) {\n    const firstChar = smiles[0];\n    const rest = smiles.slice(1);\n    if (firstChar === \"(\") {\n        let newCtx = {...ctx, parens: ctx.parens + \"(\"};\n        // increment the branch index\n        newCtx = _inc(ctx, [\"idx\", ctx.idx.length - 1, 1]);\n\n        let inBranchIdx = -1;\n        if (ctx.idx[ctx.idx.length - 1][0] % 2 === 0) {\n            // HACK(colin): this is so that we preserve the odd/even series in\n            // indices in branches; the layout engine uses this to select\n            // angles, and if we don't do this, editing one part of a molecule\n            // can cause another to flop around oddly.\n            // TODO(colin): this should just start at 0 all the time, and the\n            // layout engine should figure out continuity.\n            inBranchIdx = 0;\n        }\n        const parenCtx = {\n            ...newCtx,\n            idx: newCtx.idx.concat([[inBranchIdx, 0]]),\n            parens: newCtx.parens.concat(\"(\"),\n        } as const;\n        const parenExpr = parse(rest, parenCtx);\n        const remainder = parse(\n            sliceFromMatchingCloseParen(rest, [\"(\"]),\n            newCtx,\n        );\n        return [parenExpr].concat(remainder);\n    }\n    if (firstChar === \")\") {\n        if (ctx.parens[ctx.parens.length - 1] !== \"(\") {\n            throw new ParseError(\"Mismatched parentheses\");\n        }\n        return null;\n    }\n    throw new ParseError(\"Invalid bare character: \" + firstChar);\n}\n\n/**\n * Get the symbol of the next atom in the molecule.\n *\n * Return a 2-element list containing that symbol and the remainder of the\n * molecule.\n */\nfunction readAtomSymbol(smiles: any, _ctx) {\n    let sym = null;\n    let rest = null;\n    if (smiles[0] === \"[\") {\n        const closingIdx = smiles.indexOf(\"]\");\n        if (closingIdx === -1) {\n            return [\"\", smiles];\n        }\n        sym = smiles.slice(1, closingIdx);\n        rest = smiles.slice(closingIdx + 1);\n    } else {\n        const match = atomRe.exec(smiles);\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'. | TS2531 - Object is possibly 'null'.\n        sym = match[1];\n        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n        rest = smiles.slice(sym.length);\n    }\n\n    return [sym, rest];\n}\n\n/**\n * Parse the next atom in the molecule, returning an atom object if this is the\n * first atom in the molecule, or a bond object with this atom as the\n * destination of the bond if this is not the first atom.\n */\nfunction parseAtom(smiles, ctx) {\n    const symbolInfo = readAtomSymbol(smiles, ctx);\n    const atom = symbolInfo[0];\n    if (atom === \"\") {\n        return [\"error\", \"Unable to parse bracketed atom.\"];\n    }\n    const rest = symbolInfo[1];\n\n    // Atoms are indexed by a list of two-element lists.  In each two-element\n    // list, the first element is the atom counter, and the second element is\n    // the branch counter.  Branches are 1-indexed so that the main chain of\n    // the molecule can be indicated by 0.  Atoms may be either 0- or\n    // 1-indexed, defaulting to 1, to maintain a alternating pattern of\n    // odd/even indices. So, for example, if an atom has a branch off the main\n    // chain, and its atom index is x, then the indices of atoms are:\n    //     Atom where branch occurs: [[x, 0]]\n    //     First atom in the branch: [[x, 1], [1, 0]]  (assuming x is even)\n    //     Next atom in the main chain: [[x + 1, 0]]\n\n    // increment the atom counter and reset the branch counter\n    const newCtx = _mset(\n        ctx,\n        [\"idx\", ctx.idx.length - 1],\n        [1 + ctx.idx[ctx.idx.length - 1][0], 0],\n    );\n    let restOfMolecule = parse(\n        rest,\n        _mset(newCtx, [\"bond\", \"bondType\"], \"single\"),\n    );\n    if (!Array.isArray(restOfMolecule) && !!restOfMolecule) {\n        //TODO(colin): fix this awkwardness.\n        restOfMolecule = [restOfMolecule];\n    }\n    const atomObj = {\n        type: \"atom\",\n        symbol: atom,\n        bonds: restOfMolecule,\n        idx: newCtx.idx,\n    } as const;\n    if (ctx.bond) {\n        return {\n            type: \"bond\",\n            bondType: ctx.bond.bondType,\n            to: atomObj,\n        };\n    }\n    return atomObj;\n}\n\nfunction startsWithAtom(s: any) {\n    return atomRe.test(s);\n}\n\nfunction isModifierChar(s: any) {\n    return s === \"=\" || s === \"#\";\n}\n\n/**\n * Parse a SMILES string to an internal tree representation.\n *\n * Args:\n *   smiles [string]: a string representing the molecule.\n *\n * Returns: the parse tree (see top-of file docstring for details).\n *\n * Throws:\n *     ParseError: if the input is not valid SMILES or contains features not\n *         yet implemented.\n */\nfunction parse(smiles: any, ctx: any): any {\n    if (!validate(smiles)) {\n        throw new ParseError(\"Invalid input.\");\n    }\n\n    if (!smiles || smiles.length === 0) {\n        return null;\n    }\n\n    if (startsWithAtom(smiles)) {\n        return parseAtom(\n            smiles,\n            ctx || {\n                idx: [[0, 0]],\n                parens: [],\n                stack: [],\n                bondModifiers: [],\n            },\n        );\n    }\n    if (isModifierChar(smiles[0])) {\n        // TODO(colin): add a better error message in the case where the input\n        // is invalid and starts with a modifier character?\n        return parseBondModifier(smiles, ctx);\n    }\n    // TODO(colin): add additional cases for unimplemented bits of SMILES\n    // syntax.\n    return parseParenthesizedExpression(smiles, ctx);\n}\n\nexport default {parse: parse, ParseError: ParseError};\n","/* eslint-disable react/no-unsafe */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nimport draw from \"./molecule/molecule-drawing\";\nimport MoleculeLayout from \"./molecule/molecule-layout\";\nimport SmilesParser from \"./molecule/smiles-parser\";\n\nimport type {WidgetExports} from \"../types\";\n\nconst {layout} = MoleculeLayout;\nconst parse = SmilesParser.parse;\nconst ParseError = SmilesParser.ParseError;\n\nconst borderSize = 30;\n\nexport class Molecule extends React.Component<any, any> {\n    static propTypes = {\n        id: PropTypes.string.isRequired,\n        rotationAngle: PropTypes.number,\n        smiles: PropTypes.string,\n    };\n\n    state: any = {parsedSmiles: null, error: null};\n\n    // TODO(jangmi, CP-3288): Remove usage of `UNSAFE_componentWillMount`\n    UNSAFE_componentWillMount() {\n        this.stateFromSmiles(this.props.smiles);\n    }\n\n    componentDidMount() {\n        this.canvasRender();\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: any) {\n        this.stateFromSmiles(nextProps.smiles);\n    }\n\n    componentDidUpdate() {\n        this.canvasRender();\n    }\n\n    stateFromSmiles: (arg1: any) => void = (smiles) => {\n        try {\n            this.setState({\n                // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n                parsedSmiles: parse(smiles),\n                error: null,\n            });\n        } catch (e: any) {\n            if (e instanceof ParseError) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'message' does not exist on type '{}'.\n                this.setState({error: e.message});\n            } else {\n                throw e;\n            }\n        }\n    };\n\n    setCanvasBounds: (arg1: any, arg2: any) => any = (canvas, items) => {\n        const xmax = Math.max(\n            ...items.map((item) => (item.pos ? item.pos[0] : -Infinity)),\n        );\n        const ymax = Math.max(\n            ...items.map((item) => (item.pos ? item.pos[1] : -Infinity)),\n        );\n        const xmin = Math.min(\n            ...items.map((item) => (item.pos ? item.pos[0] : Infinity)),\n        );\n        const ymin = Math.min(\n            ...items.map((item) => (item.pos ? item.pos[1] : Infinity)),\n        );\n        const width = xmax - xmin + 2 * borderSize;\n        const height = ymax - ymin + 2 * borderSize;\n        canvas.width = width;\n        canvas.height = height;\n        return [borderSize - xmin, borderSize - ymin];\n    };\n\n    canvasRender: () => void = () => {\n        // Since canvas drawing happens only through an imperative API, we sync\n        // up the component with the canvas here, which happens when the\n        // component mounts or updates.\n        if (!!this.state.error || !this.state.parsedSmiles) {\n            return;\n        }\n        const items = layout(this.state.parsedSmiles, this.props.rotationAngle);\n        // eslint-disable-next-line react/no-string-refs\n        const canvas = this.refs.canvas;\n        const translation = this.setCanvasBounds(canvas, items);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getContext' does not exist on type 'ReactInstance'.\n        const ctx = canvas.getContext(\"2d\");\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'ReactInstance'. | TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.save();\n        ctx.translate(translation[0], translation[1]);\n        draw(ctx, items);\n        ctx.restore();\n    };\n\n    render(): React.ReactNode {\n        // TODO(colin): escape the punctuation in the SMILES alt text for\n        // screen readers?\n        let content = (\n            <canvas\n                className=\"molecule-canvas\"\n                id={this.props.id + \"-molecule\"}\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"canvas\"\n            >\n                {i18n.$_(\n                    \"A molecular structure drawing. SMILES notation: %(content)s\",\n                    {\n                        content: this.props.smiles,\n                    },\n                )}\n            </canvas>\n        );\n        if (this.state.error) {\n            content = <div className=\"error\">{this.state.error}</div>;\n        }\n        return <div className=\"molecule-canvas\">{content}</div>;\n    }\n}\n\nclass MoleculeWidget extends React.Component<any> {\n    static propTypes = {\n        rotationAngle: PropTypes.number,\n        smiles: PropTypes.string,\n        widgetId: PropTypes.string,\n    };\n\n    static defaultProps: any = {rotationAngle: 0};\n\n    simpleValidate: (arg1: any) => any = () => {\n        return {type: \"points\", earned: 0, total: 0, message: null};\n    };\n\n    getUserInput: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        return [];\n    };\n\n    validate: (arg1: any, arg2: any) => any = (state, rubric) => {\n        // TODO(colin): this is here as part of the interface for a component.\n        // Figure out if there is something more appropriate that this should\n        // return.\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    };\n\n    render(): React.ReactNode {\n        return (\n            <Molecule\n                id={this.props.widgetId}\n                smiles={this.props.smiles}\n                rotationAngle={this.props.rotationAngle}\n            />\n        );\n    }\n}\n\nexport default {\n    name: \"molecule-renderer\",\n    displayName: \"Molecule renderer\",\n    hidden: true,\n    widget: MoleculeWidget,\n} as WidgetExports<typeof MoleculeWidget>;\n","import {number as knumber} from \"@khanacademy/kmath\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport Graphie from \"../components/graphie\";\nimport NumberInput from \"../components/number-input\";\nimport SimpleKeypadInput from \"../components/simple-keypad-input\";\nimport InteractiveUtil from \"../interactive2/interactive-util\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {ApiOptions} from \"../perseus-api\";\nimport KhanColors from \"../util/colors\";\nimport KhanMath from \"../util/math\";\n\nimport type {ChangeableProps} from \"../mixins/changeable\";\nimport type {APIOptions, WidgetExports} from \"../types\";\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'MovablePoint' does not exist on type 'typeof Graphie'.\nconst MovablePoint = Graphie.MovablePoint;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Line' does not exist on type 'typeof Graphie'.\nconst Line = Graphie.Line;\nconst {assert} = InteractiveUtil;\n\nconst bound = (x: number, gt: any, lt: any) => Math.min(Math.max(x, gt), lt);\n\nconst EN_DASH = \"\\u2013\";\nconst horizontalPadding = 30;\n\nconst reverseRel = {\n    ge: \"le\",\n    gt: \"lt\",\n    le: \"ge\",\n    lt: \"gt\",\n} as const;\n\nconst toggleStrictRel = {\n    ge: \"gt\",\n    gt: \"ge\",\n    le: \"lt\",\n    lt: \"le\",\n} as const;\n\nfunction formatImproper(n: number, d: number): string {\n    if (d === 1) {\n        return \"\" + n;\n    }\n    return `\\\\dfrac{${n}}{${d}}`;\n}\n\nfunction formatMixed(n: number, d: number): string {\n    if (n < 0) {\n        return \"-\" + formatMixed(-n, d);\n    }\n    const w = Math.floor(n / d);\n    if (w === 0) {\n        return formatImproper(n, d);\n    }\n    if (n - w * d === 0) {\n        return \"\" + w;\n    }\n    return w + formatImproper(n - w * d, d);\n}\n\nfunction formatNonReduced(n: number, d: number, base: number): string {\n    const factor = Math.floor(base / d);\n    return formatImproper(n * factor, base);\n}\n\nconst _label = (\n    graphie: any,\n    labelStyle: any,\n    pos: any,\n    value: any,\n    base: number,\n): any => {\n    value = value || pos;\n\n    // TODO(jack): Find out if any exercises have \"decimal ticks\" set,\n    // and if so, re-save them and remove this check.\n    if (labelStyle === \"decimal\" || labelStyle === \"decimal ticks\") {\n        return graphie.label(\n            [pos, -0.53],\n            Math.round(value * 100) / 100,\n            \"center\",\n        );\n    }\n    if (labelStyle === \"improper\") {\n        const frac = KhanMath.toFraction(value);\n        return graphie.label(\n            [pos, -0.17],\n            formatImproper(frac[0], frac[1]),\n            \"below\",\n        );\n    }\n    if (labelStyle === \"mixed\") {\n        const frac = KhanMath.toFraction(value);\n        return graphie.label(\n            [pos, -0.17],\n            formatMixed(frac[0], frac[1]),\n            \"below\",\n        );\n    }\n    if (labelStyle === \"non-reduced\") {\n        const frac = KhanMath.toFraction(value);\n        return graphie.label(\n            [pos, -0.17],\n            formatNonReduced(frac[0], frac[1], base),\n            \"below\",\n        );\n    }\n};\n\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'createSimpleClass' does not exist on type 'typeof Graphie'.\nconst TickMarks: any = Graphie.createSimpleClass((graphie, props) => {\n    // Avoid infinite loop\n    if (!_.isFinite(props.tickStep) || props.tickStep <= 0) {\n        return []; // this has screwed me for the last time!\n    }\n\n    const results: Array<any> = [];\n\n    // For convenience, extract some props into separate variables\n    const range = props.range;\n    const labelRange = props.labelRange;\n    const leftLabel = labelRange[0] == null ? range[0] : labelRange[0];\n    const rightLabel = labelRange[1] == null ? range[1] : labelRange[1];\n\n    // Find base via GCD for non-reduced fractions\n    let base;\n    if (props.labelStyle === \"non-reduced\") {\n        const fractions = [leftLabel, rightLabel];\n        for (let i = 0; i <= props.numDivisions; i++) {\n            const x = range[0] + i * props.tickStep;\n            fractions.push(x);\n        }\n        const getDenom = (x: any) => knumber.toFraction(x)[1];\n        const denoms = _.map(fractions, getDenom);\n        base = _.reduce(denoms, (x, y) => KhanMath.getLCM(x, y));\n    } else {\n        base = undefined;\n    }\n\n    // Draw and save the tick marks and tick labels\n    for (let i = 0; i <= props.numDivisions; i++) {\n        const x = range[0] + i * props.tickStep;\n        results.push(graphie.line([x, -0.2], [x, 0.2]));\n\n        const labelTicks = props.labelTicks;\n        if (labelTicks || props.labelStyle === \"decimal ticks\") {\n            results.push(_label(graphie, props.labelStyle, x, x, base));\n        }\n    }\n\n    // Render the text labels\n    results.push(\n        graphie.style(\n            props.isMobile\n                ? {\n                      color: KhanColors.BLUE_D,\n                  }\n                : {},\n            () => _label(graphie, props.labelStyle, leftLabel, leftLabel, base),\n        ),\n    );\n\n    results.push(\n        graphie.style(\n            props.isMobile\n                ? {\n                      color: KhanColors.BLUE_D,\n                  }\n                : {},\n            () =>\n                _label(graphie, props.labelStyle, rightLabel, rightLabel, base),\n        ),\n    );\n\n    // Render the labels' lines\n    graphie.style(\n        {\n            stroke: props.isMobile ? KhanColors.BLUE_D : KhanColors.DYNAMIC,\n            strokeWidth: 3.5,\n        },\n        () => {\n            results.push(graphie.line([leftLabel, -0.2], [leftLabel, 0.2]));\n            results.push(graphie.line([rightLabel, -0.2], [rightLabel, 0.2]));\n        },\n    );\n\n    return results;\n});\n\ntype Props = ChangeableProps & {\n    range: [number, number];\n    labelRange: ReadonlyArray<number | null>;\n    labelStyle: string;\n    labelTicks: boolean;\n    divisionRange: ReadonlyArray<number>;\n    numDivisions: number;\n    snapDivisions: number;\n    isTickCtrl: boolean;\n    isInequality: boolean;\n    numLinePosition: number;\n    rel: \"lt\" | \"gt\" | \"le\" | \"ge\";\n    onFocus: (arg1: any) => void;\n    onBlur: (arg1: any) => void;\n    onChange: (arg1: any, arg2?: () => void | null | undefined) => void;\n    apiOptions: APIOptions;\n    keypadElement: HTMLElement | null | undefined;\n    static?: boolean;\n    showTooltips?: boolean;\n    trackInteraction: () => void;\n};\n\ntype DefaultProps = {\n    range: Props[\"range\"];\n    labelStyle: Props[\"labelStyle\"];\n    labelRange: Props[\"labelRange\"];\n    divisionRange: Props[\"divisionRange\"];\n    labelTicks: Props[\"labelTicks\"];\n    isTickCtrl: Props[\"isTickCtrl\"];\n    isInequality: Props[\"isInequality\"];\n    numLinePosition: Props[\"numLinePosition\"];\n    snapDivisions: Props[\"snapDivisions\"];\n    showTooltips: Props[\"showTooltips\"];\n    rel: Props[\"rel\"];\n    apiOptions: Props[\"apiOptions\"];\n};\n\ntype State = {\n    numDivisionsEmpty: boolean;\n};\nclass NumberLine extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        range: [0, 10],\n        labelStyle: \"decimal\",\n        labelRange: [null, null],\n        divisionRange: [1, 12],\n        labelTicks: true,\n        isTickCtrl: false,\n        isInequality: false,\n        numLinePosition: 0,\n        snapDivisions: 2,\n        showTooltips: false,\n        rel: \"ge\",\n        apiOptions: ApiOptions.defaults,\n    };\n\n    state: any = {\n        numDivisionsEmpty: false,\n    };\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    isValid: () => boolean = () => {\n        const range = this.props.range;\n        let initialX = this.props.numLinePosition;\n        const divisionRange = this.props.divisionRange;\n\n        initialX = initialX == null ? range[0] : initialX;\n\n        return (\n            range[0] < range[1] &&\n            knumber.sign(initialX - range[0]) >= 0 &&\n            knumber.sign(initialX - range[1]) <= 0 &&\n            divisionRange[0] < divisionRange[1] &&\n            0 < this.props.numDivisions &&\n            0 < this.props.snapDivisions\n        );\n    };\n\n    onNumDivisionsChange: (arg1: number, arg2: any) => void = (\n        numDivisions,\n        cb,\n    ) => {\n        const divRange = this.props.divisionRange.slice();\n        const width = this.props.range[1] - this.props.range[0];\n\n        // Don't allow a fraction for the number of divisions\n        numDivisions = Math.round(numDivisions);\n\n        // Don't allow negative numbers for the number of divisions\n        numDivisions = numDivisions < 0 ? numDivisions * -1 : numDivisions;\n\n        // If the number of divisions isn't blank, update the number line\n        if (numDivisions) {\n            const nextProps = _.extend({}, this.props, {\n                tickStep: width / numDivisions,\n            });\n\n            const newNumLinePosition = this.snapNumLinePosition(\n                nextProps,\n                this.props.numLinePosition,\n            );\n\n            this.setState(\n                {\n                    numDivisionsEmpty: false,\n                },\n                () => {\n                    this.props.onChange(\n                        {\n                            divisionRange: divRange,\n                            numDivisions: numDivisions,\n                            numLinePosition: newNumLinePosition,\n                        },\n                        cb,\n                    );\n                },\n            );\n        } else {\n            this.setState(\n                {\n                    numDivisionsEmpty: true,\n                },\n                cb,\n            );\n        }\n    };\n\n    _handleTickCtrlFocus: () => void = () => {\n        this.props.onFocus([\"tick-ctrl\"]);\n    };\n\n    _handleTickCtrlBlur: () => void = () => {\n        this.props.onBlur([\"tick-ctrl\"]);\n    };\n\n    focus: () => boolean | null | undefined = () => {\n        if (this.props.isTickCtrl) {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n            this.refs[\"tick-ctrl\"].focus();\n            return true;\n        }\n    };\n\n    focusInputPath: (arg1: any) => void = (path) => {\n        if (path.length === 1) {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n            this.refs[path[0]].focus();\n        }\n    };\n\n    blurInputPath: (arg1: any) => void = (path) => {\n        if (path.length === 1) {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n            this.refs[path[0]].blur();\n        }\n    };\n\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        if (this.props.isTickCtrl) {\n            return [[\"tick-ctrl\"]];\n        }\n        return [];\n    };\n\n    getDOMNodeForPath: (arg1: any) => Element | Text | null | undefined = (\n        inputPath,\n    ) => {\n        if (inputPath.length === 1) {\n            // eslint-disable-next-line react/no-string-refs\n            return ReactDOM.findDOMNode(this.refs[inputPath[0]]);\n        }\n    };\n\n    getGrammarTypeForPath: (arg1: any) => string | null | undefined = (\n        inputPath,\n    ) => {\n        if (inputPath.length === 1 && inputPath[0] === \"tick-ctrl\") {\n            return \"number\";\n        }\n    };\n\n    setInputValue: (arg1: any, arg2: any, arg3: any) => void = (\n        inputPath,\n        value,\n        callback,\n    ) => {\n        if (inputPath.length === 1 && inputPath[0] === \"tick-ctrl\") {\n            this.onNumDivisionsChange(value, callback);\n        }\n    };\n\n    _renderGraphie: () => React.ReactElement = () => {\n        // Position variables\n        const range = this.props.range;\n        const width = range[1] - range[0];\n\n        const options = _.pick(this.props, [\"range\", \"isTickCtrl\"]);\n\n        // TODO(aria): Maybe save this as `this.calculatedProps`?\n        const props = _.extend({}, this.props, {\n            tickStep: width / this.props.numDivisions,\n        });\n\n        return (\n            <Graphie\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"graphie\"\n                // HACK(emily): We key this graphie on the label style because\n                // when the label style changes we want to resize the graphie,\n                // which isn't doable without throwing away the graphie and\n                // making a new one.\n                key={this.props.labelStyle}\n                box={[this.props.apiOptions.isMobile ? 288 : 460, 80]}\n                options={options}\n                onMouseDown={(coord) => {\n                    // eslint-disable-next-line react/no-string-refs\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'movables' does not exist on type 'ReactInstance'.\n                    this.refs.graphie.movables.numberLinePoint.grab(coord);\n                }}\n                setup={this._setupGraphie}\n                setDrawingAreaAvailable={\n                    this.props.apiOptions.setDrawingAreaAvailable\n                }\n                isMobile={this.props.apiOptions.isMobile}\n            >\n                <TickMarks\n                    {..._.pick(props, [\n                        \"range\",\n                        \"numDivisions\",\n                        \"labelTicks\",\n                        \"labelStyle\",\n                        \"labelRange\",\n                        \"tickStep\",\n                    ])}\n                    isMobile={this.props.apiOptions.isMobile}\n                />\n                {this._renderInequality(props)}\n                {this._renderNumberLinePoint(props)}\n            </Graphie>\n        );\n    };\n\n    snapNumLinePosition: (arg1: any, arg2: number) => number = (\n        props,\n        numLinePosition,\n    ) => {\n        const left = props.range[0];\n        const right = props.range[1];\n        const snapX = props.tickStep / props.snapDivisions;\n\n        let x = bound(numLinePosition, left, right);\n        x = left + knumber.roundTo(x - left, snapX);\n        assert(_.isFinite(x));\n        return x;\n    };\n\n    // This function is intended to be used by the client code\n    // and by test code to directly set the target number line\n    // position\n    movePosition: (arg1: number) => void = (targetPosition) => {\n        this.change({numLinePosition: targetPosition});\n        this.props.trackInteraction();\n    };\n\n    _renderNumberLinePoint: (arg1: any) => React.ReactElement = (props) => {\n        const isOpen = _([\"lt\", \"gt\"]).contains(props.rel);\n\n        // In static mode the point's fill and stroke is blue to signify that\n        // it can't be interacted with.\n        let fill;\n        if (isOpen) {\n            fill = KhanColors._BACKGROUND;\n        } else if (props.static) {\n            fill = KhanColors.DYNAMIC;\n        } else {\n            fill = KhanColors.INTERACTIVE;\n        }\n        const normalStyle = {\n            fill: fill,\n            stroke: props.static ? KhanColors.DYNAMIC : KhanColors.INTERACTIVE,\n            \"stroke-width\": isOpen ? 3 : 1,\n        } as const;\n        const highlightStyle = {\n            fill: isOpen ? KhanColors._BACKGROUND : KhanColors.INTERACTING,\n            \"stroke-width\": isOpen ? 3 : 1,\n        } as const;\n\n        const mobileDotStyle = props.isInequality\n            ? {\n                  stroke: KhanColors.INTERACTIVE,\n                  \"fill-opacity\": isOpen ? 0 : 1,\n              }\n            : {};\n\n        return (\n            <MovablePoint\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"numberLinePoint\"\n                pointSize={6}\n                coord={[props.numLinePosition, 0]}\n                constraints={[\n                    (coord: any, prevCoord) => {\n                        // constrain-y\n                        return [coord[0], prevCoord[1]];\n                    },\n                    (coord: any, prevCoord) => {\n                        // snap X\n                        const x = this.snapNumLinePosition(props, coord[0]);\n                        return [x, coord[1]];\n                    },\n                ]}\n                normalStyle={normalStyle}\n                highlightStyle={highlightStyle}\n                onMove={(coord) => {\n                    this.movePosition(coord[0]);\n                }}\n                isMobile={this.props.apiOptions.isMobile}\n                mobileStyleOverride={mobileDotStyle}\n                showTooltips={this.props.showTooltips}\n                xOnlyTooltip={true}\n            />\n        );\n    };\n\n    handleReverse: () => void = () => {\n        const newRel = reverseRel[this.props.rel];\n        this.props.onChange({rel: newRel});\n    };\n\n    handleToggleStrict: () => void = () => {\n        const newRel = toggleStrictRel[this.props.rel];\n        this.props.onChange({rel: newRel});\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(props: any) => any[]' is not assignable to type '(arg1: any) => [number, number]'.\n    _getInequalityEndpoint: (arg1: any) => [number, number] = (props) => {\n        const isGreater = _([\"ge\", \"gt\"]).contains(props.rel);\n        const widthInPixels = 400;\n        const range = props.range;\n        const scale = (range[1] - range[0]) / widthInPixels;\n        const buffer = horizontalPadding * scale;\n        const left = range[0] - buffer;\n        const right = range[1] + buffer;\n        const end = isGreater ? [right, 0] : [left, 0];\n        return end;\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(props: any) => Element | null' is not assignable to type '(arg1: any) => ReactElement<any, string | JSXElementConstructor<any>>'.\n    _renderInequality: (arg1: any) => React.ReactElement = (props) => {\n        if (props.isInequality) {\n            const end = this._getInequalityEndpoint(props);\n            const style = {\n                arrows: \"->\",\n                stroke: this.props.apiOptions.isMobile\n                    ? KhanColors.INTERACTIVE\n                    : KhanColors.DYNAMIC,\n                strokeWidth: 3.5,\n            } as const;\n\n            const isGreater = [\"ge\", \"gt\"].includes(props.rel);\n\n            return (\n                <Line\n                    // We shift the line to either side of the dot so they don't\n                    // intersect\n                    start={[\n                        (isGreater ? 0.4 : -0.4) + props.numLinePosition,\n                        0,\n                    ]}\n                    end={end}\n                    style={style}\n                />\n            );\n        }\n        return null;\n    };\n\n    _setupGraphie: (arg1: any, arg2: any) => void = (graphie, options) => {\n        // Ensure a sane configuration to avoid infinite loops\n        if (!this.isValid()) {\n            return;\n        }\n\n        // Position variables\n        const widthInPixels = this.props.apiOptions.isMobile\n            ? 288 - horizontalPadding * 2\n            : 400;\n        const range = options.range;\n        const scale = (range[1] - range[0]) / widthInPixels;\n        const buffer = horizontalPadding * scale;\n\n        // Initiate the graphie without actually drawing anything\n        const left = range[0] - buffer;\n        const right = range[1] + buffer;\n\n        const hasFractionalLabels =\n            this.props.labelStyle === \"improper\" ||\n            this.props.labelStyle === \"mixed\" ||\n            this.props.labelStyle === \"non-reduced\";\n        const bottom = hasFractionalLabels ? -1.5 : -1;\n        const top = 1;\n\n        graphie.init({\n            range: [\n                [left, right],\n                [bottom, top],\n            ],\n            scale: [1 / scale, 40],\n            isMobile: this.props.apiOptions.isMobile,\n        });\n\n        // Draw the number line\n        const center = (range[0] + range[1]) / 2;\n        graphie.line([center, 0], [right, 0], {arrows: \"->\"});\n        graphie.line([center, 0], [left, 0], {arrows: \"->\"});\n    };\n\n    getUserInput: () => any = () => {\n        return {\n            numLinePosition: this.props.numLinePosition,\n            rel: this.props.isInequality ? this.props.rel : \"eq\",\n            numDivisions: this.props.numDivisions,\n            divisionRange: this.props.divisionRange,\n        };\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof NumberLine'.\n        return NumberLine.validate(this.getUserInput(), rubric);\n    };\n\n    render(): React.ReactNode {\n        const divisionRange = this.props.divisionRange;\n        const divRangeString = divisionRange[0] + EN_DASH + divisionRange[1];\n        const invalidNumDivisions =\n            this.props.numDivisions < divisionRange[0] ||\n            this.props.numDivisions > divisionRange[1];\n\n        const inequalityControls = (\n            <div>\n                <input\n                    type=\"button\"\n                    className=\"simple-button\"\n                    value={i18n._(\"Switch direction\")}\n                    onClick={this.handleReverse}\n                />\n                <input\n                    type=\"button\"\n                    className=\"simple-button\"\n                    value={\n                        _([\"le\", \"ge\"]).contains(this.props.rel)\n                            ? i18n._(\"Make circle open\")\n                            : i18n._(\"Make circle filled\")\n                    }\n                    onClick={this.handleToggleStrict}\n                />\n            </div>\n        );\n\n        let tickCtrl;\n        if (this.props.isTickCtrl) {\n            let Input;\n            if (this.props.apiOptions.customKeypad) {\n                Input = SimpleKeypadInput;\n            } else {\n                Input = NumberInput;\n            }\n            tickCtrl = (\n                <label>\n                    {i18n._(\"Number of divisions:\")}{\" \"}\n                    <Input\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"tick-ctrl\"\n                        value={\n                            this.state.numDivisionsEmpty\n                                ? null\n                                : this.props.numDivisions || divisionRange[0]\n                        }\n                        checkValidity={(val) =>\n                            val >= divisionRange[0] && val <= divisionRange[1]\n                        }\n                        onChange={this.onNumDivisionsChange}\n                        onFocus={this._handleTickCtrlFocus}\n                        onBlur={this._handleTickCtrlBlur}\n                        useArrowKeys={true}\n                        keypadElement={this.props.keypadElement}\n                    />\n                </label>\n            );\n        }\n\n        return (\n            <div\n                className={\n                    \"perseus-widget \" + \"perseus-widget-interactive-number-line\"\n                }\n            >\n                {tickCtrl}\n                {!this.isValid() ? (\n                    <div className=\"perseus-error\">\n                        {i18n.doNotTranslate(\n                            \"Invalid number line configuration.\",\n                        )}\n                    </div>\n                ) : this.props.isTickCtrl && invalidNumDivisions ? (\n                    <div className=\"perseus-error\">\n                        {i18n.$_(\n                            \"Please make sure the number of divisions is \" +\n                                \"in the range %(divRangeString)s.\",\n                            {divRangeString: divRangeString},\n                        )}\n                    </div>\n                ) : (\n                    this._renderGraphie()\n                )}\n                {!this.props.static &&\n                    this.props.isInequality &&\n                    inequalityControls}\n            </div>\n        );\n    }\n}\n\n_.extend(NumberLine, {\n    validate: function (state, rubric) {\n        const range = rubric.range;\n        const divisionRange = state.divisionRange;\n        const start = rubric.initialX != null ? rubric.initialX : range[0];\n        const startRel = rubric.isInequality ? \"ge\" : \"eq\";\n        const correctRel = rubric.correctRel || \"eq\";\n        const correctPos = knumber.equal(\n            state.numLinePosition,\n            rubric.correctX || 0,\n        );\n        const outsideAllowedRange =\n            state.numDivisions > divisionRange[1] ||\n            state.numDivisions < divisionRange[0];\n\n        if (state.isTickCrtl && outsideAllowedRange) {\n            return {\n                type: \"invalid\",\n                message: \"Number of divisions is outside the allowed range.\",\n            };\n        }\n        if (correctPos && correctRel === state.rel) {\n            return {\n                type: \"points\",\n                earned: 1,\n                total: 1,\n                message: null,\n            };\n        }\n        if (state.numLinePosition === start && state.rel === startRel) {\n            // We're where we started.\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 1,\n            message: null,\n        };\n    },\n});\n\nconst numberLineTransform: (arg1: any) => any = (editorProps) => {\n    const props = _.pick(editorProps, [\n        \"range\",\n\n        \"labelRange\",\n        \"labelStyle\",\n        \"labelTicks\",\n\n        \"divisionRange\",\n        \"snapDivisions\",\n\n        \"isTickCtrl\",\n        \"isInequality\",\n\n        \"showTooltips\",\n    ]);\n\n    const numLinePosition =\n        editorProps.initialX != null\n            ? editorProps.initialX\n            : editorProps.range[0];\n\n    const width = editorProps.range[1] - editorProps.range[0];\n\n    let numDivisions;\n    if (editorProps.numDivisions != null) {\n        numDivisions = editorProps.numDivisions;\n    } else if (editorProps.tickStep != null) {\n        numDivisions = width / editorProps.tickStep;\n    } else {\n        numDivisions = undefined; // send to getDefaultProps()\n    }\n\n    _.extend(props, {\n        numLinePosition: numLinePosition,\n        numDivisions: numDivisions,\n        // Use getDefaultProps value if null\n        snapDivisions: props.snapDivisions || undefined,\n    });\n\n    return props;\n};\n\nconst staticTransform: (arg1: any) => any = (editorProps) => {\n    const props = _.pick(editorProps, [\n        \"range\",\n\n        \"labelRange\",\n        \"labelStyle\",\n        \"labelTicks\",\n\n        \"divisionRange\",\n        \"snapDivisions\",\n\n        // isTickCtrl is ignored since users can't interact with it anyway\n        \"isInequality\",\n    ]);\n\n    // The correct x is the initial position of the point\n    const numLinePosition =\n        editorProps.correctX != null\n            ? editorProps.correctX\n            : editorProps.range[0];\n\n    const width = editorProps.range[1] - editorProps.range[0];\n\n    let numDivisions;\n    if (editorProps.numDivisions != null) {\n        numDivisions = editorProps.numDivisions;\n    } else if (editorProps.tickStep != null) {\n        numDivisions = width / editorProps.tickStep;\n    } else {\n        numDivisions = undefined; // send to getDefaultProps()\n    }\n\n    _.extend(props, {\n        numLinePosition: numLinePosition,\n        numDivisions: numDivisions,\n        // Render the relation in the correct answer\n        rel: editorProps.isInequality ? editorProps.correctRel : null,\n        // Use getDefaultProps value if null\n        snapDivisions: props.snapDivisions || undefined,\n    });\n\n    return props;\n};\n\nexport default {\n    name: \"number-line\",\n    displayName: \"Number line\",\n    widget: NumberLine,\n    transform: numberLineTransform,\n    staticTransform: staticTransform,\n} as WidgetExports<typeof NumberLine>;\n","/* eslint-disable @babel/no-invalid-this, @typescript-eslint/no-unused-vars, one-var, react/no-unsafe, react/sort-comp */\nimport {\n    linterContextProps,\n    linterContextDefault,\n} from \"@khanacademy/perseus-linter\";\nimport $ from \"jquery\";\nimport PropTypes, {bool} from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport {getDependencies} from \"../dependencies\";\nimport {Errors, Log} from \"../logging/log\";\nimport {ClassNames as ApiClassNames} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport Util from \"../util\";\n\nimport type {PerseusOrdererWidgetOptions} from \"../perseus-types\";\nimport type {WidgetExports, WidgetProps} from \"../types\";\n\nclass PlaceholderCard extends React.Component<any> {\n    static propTypes = {\n        width: PropTypes.number.isRequired,\n        height: PropTypes.number.isRequired,\n    };\n\n    render(): React.ReactNode {\n        return (\n            <div\n                className={\"card-wrap \" + ApiClassNames.INTERACTIVE}\n                style={{width: this.props.width}}\n            >\n                <div\n                    className=\"card placeholder\"\n                    style={{height: this.props.height}}\n                />\n            </div>\n        );\n    }\n}\n\nclass DragHintCard extends React.Component<any> {\n    render(): React.ReactNode {\n        return (\n            <div className={\"card-wrap \" + ApiClassNames.INTERACTIVE}>\n                <div className=\"card drag-hint\" />\n            </div>\n        );\n    }\n}\n\nconst PropTypePosition = PropTypes.shape({\n    left: PropTypes.number,\n    top: PropTypes.number,\n});\n\nclass Card extends React.Component<any, any> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'mouseMoveUpBound' has no initializer and is not definitely assigned in the constructor.\n    mouseMoveUpBound: boolean;\n\n    static propTypes = {\n        floating: PropTypes.bool.isRequired,\n        animating: PropTypes.bool,\n        width: PropTypes.number,\n        stack: PropTypes.bool,\n\n        onMouseDown: PropTypes.func,\n        onMouseMove: PropTypes.func,\n        onMouseUp: PropTypes.func,\n\n        // Used only for floating/animating cards\n        startMouse: PropTypePosition,\n        startOffset: PropTypePosition,\n        animateTo: PropTypePosition,\n        onAnimationEnd: PropTypes.func,\n        linterContext: linterContextProps,\n    };\n\n    static defaultProps = {\n        stack: false,\n        animating: false,\n        linterContext: linterContextDefault,\n    };\n\n    state = {dragging: false};\n\n    render(): React.ReactNode {\n        let style: Record<string, any> = {};\n\n        if (this.props.floating) {\n            style = {\n                position: \"absolute\",\n                left: this.props.startOffset.left,\n                top: this.props.startOffset.top,\n            };\n        }\n\n        if (this.props.width) {\n            style.width = this.props.width;\n        }\n\n        const className = [\"card\"];\n        if (this.props.stack) {\n            className.push(\"stack\");\n        }\n        if (this.props.floating && !this.props.animating) {\n            className.push(\"dragging\");\n            style.left += this.props.mouse.left - this.props.startMouse.left;\n            style.top += this.props.mouse.top - this.props.startMouse.top;\n        }\n\n        // Pull out the content to get rendered\n        const rendererProps = _.pick(this.props, \"content\");\n\n        const onMouseDown = this.props.animating ? $.noop : this.onMouseDown;\n\n        return (\n            <div\n                className={\"card-wrap \" + ApiClassNames.INTERACTIVE}\n                style={style}\n                onMouseDown={onMouseDown}\n                onTouchStart={onMouseDown}\n                onTouchEnd={this.onMouseUp}\n                onTouchCancel={this.onMouseUp}\n            >\n                <div className={className.join(\" \")}>\n                    <Renderer\n                        {...rendererProps}\n                        linterContext={this.props.linterContext}\n                    />\n                </div>\n            </div>\n        );\n    }\n\n    shouldComponentUpdate(nextProps: any, nextState) {\n        // Cards in the bank or drag list don't usually change -- they only\n        // reorder themselves -- so we want to skip the update to things a\n        // little faster. We also need to re-render if the content changes,\n        // which happens only in the editor. (We do want to update the floating\n        // card on mouse move to update its position.)\n        return (\n            this.props.floating ||\n            nextProps.floating ||\n            this.props.content !== nextProps.content ||\n            // TODO(alpert): Remove ref here after fixing facebook/react#1392.\n            this.props.fakeRef !== nextProps.fakeRef\n        );\n    }\n\n    componentDidMount() {\n        this.mouseMoveUpBound = false;\n\n        // On touch devices, we set up our own touchmove handler because React\n        // all event subscriptions using `OnTouchMove` props are non-passive.\n        // See: https://github.com/facebook/react/issues/6436\n        // Also, we can't subscribe to `ontouchmove`  within the `ontouchstart`\n        // handler because of a WebKit bug:\n        // https://github.com/atlassian/react-beautiful-dnd/issues/413 and\n        // https://bugs.webkit.org/show_bug.cgi?id=184250\n        document.addEventListener(\n            \"touchmove\",\n            this.onMouseMove,\n            // Not all browsers support passive events, and when they don't\n            // this third paramter is just a boolean. If we pass the \"options\"\n            // object, it's interpreted as `capture=true` (which we don't want!)\n            Util.supportsPassiveEvents() ? {passive: false} : false,\n        );\n    }\n\n    componentDidUpdate(prevProps, prevState: any) {\n        if (this.props.animating && !prevProps.animating) {\n            // If we just were changed into animating, start the animation.\n            // We pick the animation speed based on the distance that the card\n            // needs to travel. (Why sqrt? Just because it looks nice -- with a\n            // linear scale, far things take too long to come back.)\n            const ms =\n                15 *\n                Math.sqrt(\n                    Math.sqrt(\n                        Math.pow(\n                            this.props.animateTo.left -\n                                this.props.startOffset.left,\n                            2,\n                        ) +\n                            Math.pow(\n                                this.props.animateTo.top -\n                                    this.props.startOffset.top,\n                                2,\n                            ),\n                    ),\n                );\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'animate' does not exist on type 'JQueryStatic'.\n            $(ReactDOM.findDOMNode(this)).animate(\n                this.props.animateTo,\n                Math.max(ms, 1),\n                this.props.onAnimationEnd,\n            );\n        }\n    }\n\n    componentWillUnmount() {\n        // Event handlers should be unbound before component unmounting, but\n        // just in case...\n        if (this.mouseMoveUpBound) {\n            Log.error(\n                \"Removing an element with bound event handlers.\",\n                Errors.Internal,\n            );\n\n            this.unbindMouseMoveUp();\n            Util.resetTouchHandlers();\n        }\n\n        document.removeEventListener(\"touchmove\", this.onMouseMove);\n    }\n\n    bindMouseMoveUp: () => void = () => {\n        this.mouseMoveUpBound = true;\n        $(document).on(\"mousemove\", this.onMouseMove);\n        $(document).on(\"mouseup\", this.onMouseUp);\n    };\n\n    unbindMouseMoveUp: () => void = () => {\n        this.mouseMoveUpBound = false;\n        $(document).off(\"mousemove\", this.onMouseMove);\n        $(document).off(\"mouseup\", this.onMouseUp);\n    };\n\n    onMouseDown: (arg1: any) => void = (event) => {\n        event.preventDefault();\n        const loc = Util.extractPointerLocation(event);\n        if (loc) {\n            this.setState({dragging: true});\n            this.bindMouseMoveUp();\n            this.props.onMouseDown && this.props.onMouseDown(loc, this);\n        }\n    };\n\n    onMouseMove: (arg1: any) => void = (event) => {\n        if (!this.state.dragging) {\n            return;\n        }\n\n        event.preventDefault();\n        const loc = Util.extractPointerLocation(event);\n        if (loc) {\n            this.props.onMouseMove && this.props.onMouseMove(loc);\n        }\n    };\n\n    onMouseUp: (arg1: any) => void = (event) => {\n        event.preventDefault();\n        const loc = Util.extractPointerLocation(event);\n        if (loc) {\n            this.setState({dragging: false});\n            this.unbindMouseMoveUp();\n            this.props.onMouseUp && this.props.onMouseUp(loc);\n        }\n    };\n}\n\nconst NORMAL = \"normal\",\n    AUTO = \"auto\",\n    HORIZONTAL = \"horizontal\",\n    VERTICAL = \"vertical\";\n\ntype Rubric = PerseusOrdererWidgetOptions;\ntype RenderProps = PerseusOrdererWidgetOptions & {\n    current: any;\n};\nexport type OrdererProps = WidgetProps<RenderProps, Rubric>;\n\ntype OrdererDefaultProps = {\n    current: OrdererProps[\"current\"];\n    options: OrdererProps[\"options\"];\n    correctOptions: OrdererProps[\"correctOptions\"];\n    height: OrdererProps[\"height\"];\n    layout: OrdererProps[\"layout\"];\n    linterContext: OrdererProps[\"linterContext\"];\n};\n\ntype OrdererState = {\n    current: ReadonlyArray<any>;\n    dragging: boolean;\n    placeholderIndex: number | null | undefined;\n    dragKey: string | null | undefined;\n    animating: boolean;\n    dragWidth: number | null | undefined;\n    dragHeight: number | null | undefined;\n    dragContent: any;\n    offsetPos: number | null | undefined;\n    grabPos: any;\n    mousePos?: any;\n    animateTo:\n        | {\n              top: number;\n              left: number;\n          }\n        | null\n        | undefined;\n    onAnimationEnd?: (arg1: any) => void;\n};\n\nclass Orderer extends React.Component<OrdererProps, OrdererState> {\n    static defaultProps: OrdererDefaultProps = {\n        current: [],\n        options: [],\n        correctOptions: [],\n        height: NORMAL,\n        layout: HORIZONTAL,\n        linterContext: linterContextDefault,\n    };\n\n    state: OrdererState = {\n        current: [],\n        dragging: false,\n        placeholderIndex: null,\n        dragKey: null,\n        animating: false,\n        dragContent: null,\n        dragWidth: null,\n        dragHeight: null,\n        offsetPos: null,\n        animateTo: null,\n        grabPos: null,\n    };\n\n    UNSAFE_componentWillReceiveProps(nextProps: OrdererProps) {\n        if (!_.isEqual(this.props.current, nextProps.current)) {\n            this.setState({current: nextProps.current});\n        }\n    }\n\n    render(): React.ReactNode {\n        // This is the card we are currently dragging\n        const dragging = this.state.dragging && (\n            <Card\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"dragging\"\n                floating={true}\n                content={this.state.dragContent}\n                startOffset={this.state.offsetPos}\n                startMouse={this.state.grabPos}\n                mouse={this.state.mousePos}\n                width={this.state.dragWidth}\n                onMouseUp={this.onRelease}\n                onMouseMove={this.onMouseMove}\n                key={this.state.dragKey || \"draggingCard\"}\n                linterContext={this.props.linterContext}\n            />\n        );\n\n        // This is the card that is currently animating\n        const animating = this.state.animating && (\n            <Card\n                floating={true}\n                animating={true}\n                content={this.state.dragContent}\n                startOffset={this.state.offsetPos}\n                width={this.state.dragWidth}\n                animateTo={this.state.animateTo}\n                onAnimationEnd={this.state.onAnimationEnd}\n                key={this.state.dragKey || \"draggingCard\"}\n                linterContext={this.props.linterContext}\n            />\n        );\n\n        // This is the list of draggable, rearrangable cards\n        const sortableCards = _.map(\n            this.state.current,\n            function (opt, i) {\n                return (\n                    <Card\n                        key={`sortableCard${i}`}\n                        ref={\"sortable\" + i}\n                        fakeRef={\"sortable\" + i}\n                        floating={false}\n                        content={opt.content}\n                        width={opt.width}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        linterContext={this.props.linterContext}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        onMouseDown={\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.state.animating\n                                ? $.noop\n                                : // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                                  this.onClick.bind(null, \"current\", i)\n                        }\n                    />\n                );\n            },\n            this,\n        );\n\n        if (this.state.placeholderIndex != null) {\n            const placeholder = (\n                <PlaceholderCard\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"placeholder\"\n                    width={this.state.dragWidth}\n                    height={this.state.dragHeight}\n                    key=\"placeholder\"\n                />\n            );\n            sortableCards.splice(this.state.placeholderIndex, 0, placeholder);\n        }\n\n        const anySortableCards = sortableCards.length > 0;\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'false | Element' is not assignable to parameter of type 'Element'.\n        sortableCards.push(dragging, animating);\n\n        // If there are no cards in the list, then add a \"hint\" card\n        const sortable = (\n            <div className=\"perseus-clearfix draggable-box\">\n                {!anySortableCards && <DragHintCard />}\n                {/* eslint-disable-next-line react/no-string-refs */}\n                <div ref=\"dragList\">{sortableCards}</div>\n            </div>\n        );\n\n        // This is the bank of stacks of cards\n        const bank = (\n            // eslint-disable-next-line react/no-string-refs\n            <div ref=\"bank\" className=\"bank perseus-clearfix\">\n                {_.map(\n                    this.props.options,\n                    (opt, i) => {\n                        return (\n                            <Card\n                                ref={\"bank\" + i}\n                                floating={false}\n                                content={opt.content}\n                                stack={true}\n                                key={i}\n                                linterContext={this.props.linterContext}\n                                // eslint-disable-next-line react/jsx-no-bind\n                                onMouseDown={\n                                    this.state.animating\n                                        ? $.noop\n                                        : this.onClick.bind(null, \"bank\", i)\n                                }\n                                onMouseMove={this.onMouseMove}\n                                onMouseUp={this.onRelease}\n                            />\n                        );\n                    },\n                    this,\n                )}\n            </div>\n        );\n\n        return (\n            <div\n                className={\n                    \"draggy-boxy-thing orderer \" +\n                    \"height-\" +\n                    this.props.height +\n                    \" \" +\n                    \"layout-\" +\n                    this.props.layout +\n                    \" \" +\n                    \"above-scratchpad blank-background \" +\n                    \"perseus-clearfix \" +\n                    ApiClassNames.INTERACTIVE\n                }\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"orderer\"\n            >\n                {bank}\n                {sortable}\n            </div>\n        );\n    }\n\n    onClick: (arg1: string, arg2: number, arg3: any, arg4: Element) => void = (\n        type,\n        index,\n        loc,\n        draggable,\n    ) => {\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $draggable = $(ReactDOM.findDOMNode(draggable));\n        const list = this.state.current.slice();\n\n        let opt;\n        let placeholderIndex = null;\n\n        if (type === \"current\") {\n            // If this is coming from the original list, remove the original\n            // card from the list\n            list.splice(index, 1);\n            opt = this.state.current[index];\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n            placeholderIndex = index;\n        } else if (type === \"bank\") {\n            opt = this.props.options[index];\n        }\n\n        this.setState({\n            current: list,\n            dragging: true,\n            placeholderIndex: placeholderIndex,\n            dragKey: opt.key,\n            dragContent: opt.content,\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'JQueryStatic'.\n            dragWidth: $draggable.width(),\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'height' does not exist on type 'JQueryStatic'.\n            dragHeight: $draggable.height(),\n            grabPos: loc,\n            mousePos: loc,\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'position' does not exist on type 'JQueryStatic'.\n            offsetPos: $draggable.position(),\n        });\n    };\n\n    onRelease: (arg1: any) => void = (loc) => {\n        // eslint-disable-next-line react/no-string-refs\n        const draggable = this.refs.dragging;\n        if (draggable == null) {\n            return;\n        }\n        const inCardBank = this.isCardInBank(draggable);\n        const index = this.state.placeholderIndex || 0;\n\n        // Here, we build a callback function for the card to call when it is\n        // done animating\n        const onAnimationEnd = () => {\n            const list = this.state.current.slice();\n\n            if (!inCardBank) {\n                // Insert the new card into the position\n                const newCard = {\n                    content: this.state.dragContent,\n                    key: _.uniqueId(\"perseus_draggable_card_\"),\n                    width: this.state.dragWidth,\n                } as const;\n\n                list.splice(index, 0, newCard);\n            }\n\n            this.props.onChange({\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ current: any[]; }' is not assignable to parameter of type '{ hints?: readonly Hint[] | undefined; replace?: boolean | undefined; content?: string | undefined; widgets?: WidgetDict | undefined; images?: ImageDict | undefined; ... 13 more ...; plot?: any; }'.\n                current: list,\n            });\n            this.setState({\n                current: list,\n                dragging: false,\n                placeholderIndex: null,\n                animating: false,\n            });\n            this.props.trackInteraction();\n        };\n\n        // Find the position of the card we should animate to\n        // TODO(alpert): Update mouse position once more before animating?\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'position' does not exist on type 'JQueryStatic'.\n        const offset = $(ReactDOM.findDOMNode(draggable)).position();\n        let finalOffset = null;\n        if (inCardBank) {\n            // If we're in the card bank, go through the options to find the\n            // one with the same content\n            _.each(\n                this.props.options,\n                function (opt, i) {\n                    // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                    if (opt.content === this.state.dragContent) {\n                        const card = ReactDOM.findDOMNode(\n                            // eslint-disable-next-line react/no-string-refs\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.refs[\"bank\" + i],\n                        );\n                        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'position' does not exist on type 'JQueryStatic'.\n                        finalOffset = $(card).position();\n                    }\n                },\n                this,\n            );\n            // eslint-disable-next-line react/no-string-refs\n        } else if (this.refs.placeholder != null) {\n            // Otherwise, go to the position that the placeholder is at\n            finalOffset = $(\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                ReactDOM.findDOMNode(this.refs.placeholder),\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'position' does not exist on type 'JQueryStatic'.\n            ).position();\n        }\n\n        if (finalOffset == null) {\n            // If we didn't find a card to go to, simply make the changes we\n            // would have made at the end. (should only happen if we are\n            // messing around with card contents, and not on the real site)\n            onAnimationEnd();\n        } else {\n            this.setState({\n                offsetPos: offset,\n                animateTo: finalOffset,\n                onAnimationEnd: onAnimationEnd,\n                animating: true,\n                dragging: false,\n            });\n        }\n    };\n\n    onMouseMove: (arg1: any) => void = (loc) => {\n        // eslint-disable-next-line react/no-string-refs\n        const draggable = this.refs.dragging;\n        if (draggable == null) {\n            return;\n        }\n\n        let index;\n        if (this.isCardInBank(draggable)) {\n            index = null;\n        } else {\n            index = this.findCorrectIndex(draggable, this.state.current);\n        }\n\n        this.setState({\n            mousePos: loc,\n            placeholderIndex: index,\n        });\n    };\n\n    findCorrectIndex: (arg1: any, arg2: any) => any = (draggable, list) => {\n        // Find the correct index for a card given the current cards.\n        const isHorizontal = this.props.layout === HORIZONTAL;\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $dragList = $(ReactDOM.findDOMNode(this.refs.dragList));\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n        const leftEdge = $dragList.offset().left;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n        const topEdge = $dragList.offset().top;\n        const midWidth =\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n            $(ReactDOM.findDOMNode(draggable)).offset().left - leftEdge;\n        const midHeight =\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n            $(ReactDOM.findDOMNode(draggable)).offset().top - topEdge;\n        let index = 0;\n        let sumWidth = 0;\n        let sumHeight = 0;\n\n        if (isHorizontal) {\n            _.each(\n                list,\n                function (opt, i) {\n                    const card = ReactDOM.findDOMNode(\n                        // eslint-disable-next-line react/no-string-refs\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.refs[\"sortable\" + i],\n                    );\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'outerWidth' does not exist on type 'JQueryStatic'.\n                    const outerWidth = $(card).outerWidth(true);\n                    if (midWidth > sumWidth + outerWidth / 2) {\n                        index += 1;\n                    }\n                    sumWidth += outerWidth;\n                },\n                this,\n            );\n        } else {\n            _.each(\n                list,\n                function (opt, i) {\n                    const card = ReactDOM.findDOMNode(\n                        // eslint-disable-next-line react/no-string-refs\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        this.refs[\"sortable\" + i],\n                    );\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'outerHeight' does not exist on type 'JQueryStatic'.\n                    const outerHeight = $(card).outerHeight(true);\n                    if (midHeight > sumHeight + outerHeight / 2) {\n                        index += 1;\n                    }\n                    sumHeight += outerHeight;\n                },\n                this,\n            );\n        }\n\n        return index;\n    };\n\n    isCardInBank: (arg1: any) => boolean = (draggable) => {\n        if (draggable == null) {\n            return false;\n        }\n\n        const isHorizontal = this.props.layout === HORIZONTAL,\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            $draggable = $(ReactDOM.findDOMNode(draggable)),\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            $bank = $(ReactDOM.findDOMNode(this.refs.bank)),\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n            draggableOffset = $draggable.offset(),\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n            bankOffset = $bank.offset(),\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'outerHeight' does not exist on type 'JQueryStatic'.\n            draggableHeight = $draggable.outerHeight(true),\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'outerHeight' does not exist on type 'JQueryStatic'.\n            bankHeight = $bank.outerHeight(true),\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'outerWidth' does not exist on type 'JQueryStatic'.\n            bankWidth = $bank.outerWidth(true),\n            // eslint-disable-next-line react/no-string-refs\n            dragList = ReactDOM.findDOMNode(this.refs.dragList),\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'width' does not exist on type 'JQueryStatic'.\n            dragListWidth = $(dragList).width(),\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'outerWidth' does not exist on type 'JQueryStatic'.\n            draggableWidth = $draggable.outerWidth(true);\n\n        if (isHorizontal) {\n            return (\n                draggableOffset.top + draggableHeight / 2 <\n                bankOffset.top + bankHeight\n            );\n        }\n        return (\n            draggableOffset.left + draggableWidth / 2 <\n            bankOffset.left + bankWidth\n        );\n    };\n\n    // This component makes use of a lot of DOM manipulation\n    // For testing and direct manipulation of values there's a function\n    // to directly set the list value\n    setListValues: (arg1: ReadonlyArray<string>) => void = (values) => {\n        const list = values.map((value: string) => {\n            return {content: value};\n        });\n        this.props.onChange({\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ current: { content: string; }[]; }' is not assignable to parameter of type '{ hints?: readonly Hint[] | undefined; replace?: boolean | undefined; content?: string | undefined; widgets?: WidgetDict | undefined; images?: ImageDict | undefined; ... 13 more ...; plot?: any; }'.\n            current: list,\n        });\n\n        this.setState({current: list});\n    };\n\n    getUserInput: () => any = () => {\n        return {\n            current: _.map(this.props.current, function (v) {\n                return v.content;\n            }),\n        };\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof Orderer'.\n        return Orderer.validate(this.getUserInput(), rubric);\n    };\n}\n\n_.extend(Orderer, {\n    validate: function (state, rubric) {\n        if (state.current.length === 0) {\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n\n        const correct = _.isEqual(\n            state.current,\n            _.pluck(rubric.correctOptions, \"content\"),\n        );\n\n        return {\n            type: \"points\",\n            earned: correct ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    },\n});\n\nexport default {\n    name: \"orderer\",\n    displayName: \"Orderer\",\n    widget: Orderer,\n    isLintable: true,\n} as WidgetExports<typeof Orderer>;\n","/**\n * Utility functions for manipulating ranges of highlightable content.\n */\n\nimport type {DOMRange} from \"./types\";\n\n/**\n * Given two DOMRange objects, and a choice of start/end point for each, compare\n * the two chosen points. Return -1 if a's comes first in the document, return\n * 1 if b's comes first in the document, or 0 if they represent the same point\n * in the document.\n *\n * NOTE(mdr): This function exists primarily to cover over some confusing parts\n *     of the DOM's `compareBoundaryPoints` API, and to cover over a Flow bug\n *     documented here: https://github.com/facebook/flow/issues/3734.\n */\nfunction compareRangeBoundaryPoints(\n    a: DOMRange,\n    whichA: \"start\" | \"end\",\n    b: DOMRange,\n    whichB: \"start\" | \"end\",\n): number {\n    let mode;\n    if (whichA === \"start\" && whichB === \"start\") {\n        mode = Range.START_TO_START;\n    } else if (whichA === \"start\" && whichB === \"end\") {\n        // NOTE(mdr): Confusingly, the correct constant here is actually\n        //     `END_TO_START`, which is the reverse of what you'd expect.\n        mode = Range.END_TO_START;\n    } else if (whichA === \"end\" && whichB === \"start\") {\n        // NOTE(mdr): Confusingly, the correct constant here is actually\n        //     `START_TO_END`, which is the reverse of what you'd expect.\n        mode = Range.START_TO_END;\n    } else {\n        mode = Range.END_TO_END;\n    }\n    return a.compareBoundaryPoints(mode, b);\n}\n\n/**\n * Given two DOMRanges, return a DOMRange whose start point comes from A, and\n * whose end point comes from B.\n */\nexport function spanRanges(a: DOMRange, b: DOMRange): DOMRange {\n    const range = a.cloneRange();\n    range.setEnd(b.endContainer, b.endOffset);\n    return range;\n}\n\n/**\n * Given two DOMRanges, return whether they overlap.\n *\n * We here treat ranges like closed intervals: the boundary points are\n * considered to be included in the range, and, if a ends exactly where b\n * starts, they are considered to overlap.\n */\nexport function rangesOverlap(a: DOMRange, b: DOMRange): boolean {\n    // Two ranges do *not* overlap iff one ends before the other begins.\n    const rangesDoNotOverlap =\n        compareRangeBoundaryPoints(a, \"end\", b, \"start\") < 0 ||\n        compareRangeBoundaryPoints(b, \"end\", a, \"start\") < 0;\n    return !rangesDoNotOverlap;\n}\n\n/**\n * Given two DOMRanges, return whether the first includes the second: whether\n * all points that B contains are also contained by A.\n */\nexport function rangeIncludes(a: DOMRange, b: DOMRange): boolean {\n    const rangeIsIncluded =\n        compareRangeBoundaryPoints(a, \"start\", b, \"start\") <= 0 &&\n        compareRangeBoundaryPoints(a, \"end\", b, \"end\") >= 0;\n    return rangeIsIncluded;\n}\n\n/**\n * Given two DOMRanges, intersect them: return a range that contains all points\n * that both A contains and B contains, and contains no other points.\n *\n * If A and B do not overlap, no intersection exists; return null.\n */\nexport function intersectRanges(\n    a: DOMRange,\n    b: DOMRange,\n): DOMRange | null | undefined {\n    if (!rangesOverlap(a, b)) {\n        return null;\n    }\n\n    // Find the range with the latest start point, and the range with the\n    // earliest end point.\n    const starter =\n        compareRangeBoundaryPoints(a, \"start\", b, \"start\") > 0 ? a : b;\n    const ender = compareRangeBoundaryPoints(a, \"end\", b, \"end\") < 0 ? a : b;\n\n    return spanRanges(starter, ender);\n}\n\n/**\n * Given two DOMRanges, union them: return a range that contains all points\n * that either A contains or B contains, and contains no other points.\n *\n * If A and B do not overlap, no union exists; return null.\n */\nexport function unionRanges(\n    a: DOMRange,\n    b: DOMRange,\n): DOMRange | null | undefined {\n    if (!rangesOverlap(a, b)) {\n        return null;\n    }\n\n    // Find the range with the earliest start point, and the range with the\n    // latest end point.\n    const starter =\n        compareRangeBoundaryPoints(a, \"start\", b, \"start\") < 0 ? a : b;\n    const ender = compareRangeBoundaryPoints(a, \"end\", b, \"end\") > 0 ? a : b;\n\n    return spanRanges(starter, ender);\n}\n\n/**\n * Given a list of word ranges, and a selection range, binary search the list\n * and return the index of the goal word, or -1 if no satisfactory goal word\n * exists in the list.\n *\n * If `goal` is \"first\", return the index of the first word whose end point is\n * after the selection's start point.\n *\n * If `goal` is \"last\", return the index of the last word whose start point is\n * before the selection's end point.\n */\nfunction findBoundaryWordIndex(\n    selectionRange: DOMRange,\n    wordRanges: ReadonlyArray<DOMRange>,\n    goal: \"first\" | \"last\",\n    initialLowerBound: number,\n    initialUpperBound: number,\n): number {\n    let bestValidWordIndex = -1;\n    let lowerBound = initialLowerBound;\n    let upperBound = initialUpperBound;\n    let iterationCount = 0;\n    while (lowerBound <= upperBound) {\n        iterationCount++;\n        if (iterationCount > wordRanges.length * 2) {\n            throw new Error(\n                `Assertion error: Binary search isn't terminating? ` +\n                    `lower=${lowerBound}, upper=${upperBound}`,\n            );\n        }\n\n        const mid = Math.floor((lowerBound + upperBound) / 2);\n\n        if (goal === \"first\") {\n            const rangeComparison = compareRangeBoundaryPoints(\n                wordRanges[mid],\n                \"end\",\n                selectionRange,\n                \"start\",\n            );\n            if (rangeComparison <= 0) {\n                // If this word's end point is before or equal to the\n                // selection's start point, then this word is not a valid\n                // candidate, nor are any of the words before it.\n                //\n                // Update our bounds to look for a valid word after this one.\n                lowerBound = mid + 1;\n            } else {\n                // If this word's end point is after the selection's start\n                // point, then this word is valid, and is, by nature of the\n                // search, the earliest valid word we're aware of.\n                //\n                // Update our bounds to look for a better valid word before\n                // this one.\n                bestValidWordIndex = mid;\n                upperBound = mid - 1;\n            }\n        } else {\n            const rangeComparison = compareRangeBoundaryPoints(\n                wordRanges[mid],\n                \"start\",\n                selectionRange,\n                \"end\",\n            );\n            if (rangeComparison >= 0) {\n                // If this word's start point is after or equal to the\n                // selection's end point, then this word is not a valid\n                // candidate, nor are any of the words after it.\n                //\n                // Update our bounds to look for a valid word before this one.\n                upperBound = mid - 1;\n            } else {\n                // If this word's start point is before the selection's end\n                // point, then this word is valid, and is, by nature of the\n                // search, the latest valid word we're aware of.\n                //\n                // Update our bounds to look for a better valid word after\n                // this one.\n                bestValidWordIndex = mid;\n                lowerBound = mid + 1;\n            }\n        }\n    }\n\n    return bestValidWordIndex;\n}\n\n/**\n * Given a list of word ranges, and a selection range, binary search the list\n * and return the indexes of the first and last words that the selection\n * intersects, or `null` if the range includes no words.\n */\nexport function findFirstAndLastWordIndexes(\n    selectionRange: DOMRange,\n    wordRanges: ReadonlyArray<DOMRange>,\n): [number, number] | null | undefined {\n    // Find the first word whose end point is after the selection's start\n    // point.\n    //\n    // Note that this does *not* alone prove that this word is *intersected* by\n    // the current range; to intersect, the first word's start point must also\n    // be before the selection's end point. This is proven by the success of\n    // the second search.\n    //\n    // (For example, imagine highlighting the space between two words. This\n    // search would return the first word after the selection, despite not\n    // intersecting the selection.)\n    const firstWordIndex = findBoundaryWordIndex(\n        selectionRange,\n        wordRanges,\n        \"first\",\n        0,\n        wordRanges.length - 1,\n    );\n    if (firstWordIndex < 0) {\n        return null;\n    }\n\n    // Find the last word whose start point is before the selection's end\n    // point.\n    //\n    // Start the search with our candidate first word, because, while we don't\n    // know whether our candidate first word intersects the selection, we *do*\n    // know that no *earlier* word intersects the selection, or else it would\n    // have been yielded as the candidate first word instead.\n    const lastWordIndex = findBoundaryWordIndex(\n        selectionRange,\n        wordRanges,\n        \"last\",\n        firstWordIndex,\n        wordRanges.length - 1,\n    );\n    if (lastWordIndex < 0) {\n        return null;\n    }\n\n    // Now, we have discovered a candidate first word F, and a candidate last\n    // word L. Let's prove that these are indeed the first and last intersected\n    // words of the selection S.\n    //\n    // Syntax: Let A1 and A2 represent the start and end point of range A.\n    //\n    // Definition: A1 <= A2 for any range A.\n    //\n    // Theorem 1: Two ranges A and B intersect iff A1 <= B2 and B1 <= A2.\n    // Proof: See http://www.rgrjr.com/emacs/overlap.html, and extend the\n    //     result to closed intervals by also accepting equality.\n    //\n    // Given 1: F1 <= L1 and F2 <= L2. That is, either the first and last word\n    //     are the same, or the last word comes after, because we provided\n    //     `firstWordIndex` as the lower bound when search for L.\n    // Given 2: S1 <= F2, and no earlier word's end point is >= S1, because\n    //     F was returned by `findBoundaryWordIndex` with goal \"first\".\n    // Given 3: L1 <= S2, and no later word's start point is <= S2, because\n    //     L was returned by `findBoundaryWordIndex` with goal \"last\".\n    //\n    // Conclusion 1: F intersects S.\n    // Proof: By Theorem 1, we must show that F1 <= S2 and S1 <= F2.\n    //     F1 <= L1 <= S2, by Given 1 and Given 3.\n    //     S1 <= F2, by Given 2. QED.\n    //\n    // Conclusion 2: L intersects S.\n    // Proof: By Theorem 1, we must show that L1 <= S2 and S1 <= L2.\n    //     L1 <= S2 by Given 3.\n    //     S1 <= F2 <= L2, by Given 1 and Given 2. QED.\n    //\n    // Conclusion 3: No word earlier than F intersects S.\n    // Proof: Consider some word W earlier than F.\n    //     W2 < S1, by Given 2. Therefore, it's false that S1 <= W2.\n    //     Therefore, W and S do not intersect, by Theorem 1. QED.\n    //\n    // Conclusion 4: No word later than L intersects S.\n    // Proof: Consider some word W later than L.\n    //     W1 > S2, by Given 2. Therefore, it's false that W1 <= S2.\n    //     Therefore, W and S do not intersect, by Theorem 1, QED.\n    //\n    // Therefore, while neither of these two searches alone proves that F is\n    // the first intersected word of S, or that L is the last intersected word\n    // of S, the implications of the two searches are sufficient proof when\n    // combined. Return these two indexes with confidence, hooray!\n\n    return [firstWordIndex, lastWordIndex];\n}\n","/**\n * Utility functions for manipulating highlights.\n */\n\nimport {Errors} from \"../../logging/log\";\nimport {PerseusError} from \"../../perseus-error\";\n\nimport {\n    findFirstAndLastWordIndexes,\n    unionRanges,\n    spanRanges,\n    rangeIncludes,\n} from \"./ranges\";\n\nimport type {\n    DOMHighlight,\n    DOMHighlightSet,\n    SerializedHighlight,\n    DOMRange,\n} from \"./types\";\n\n/**\n * Given a list of DOMHighlights, return a new list that also includes the\n * given DOMRange as a new DOMHighlight. If the DOMHighlight intersects\n * existing DOMHighlights, the other Highlights are removed and their ranges\n * are merged into the new DOMHighlight.\n */\nexport function addHighlight(\n    existingHighlights: DOMHighlightSet,\n    newHighlight: DOMHighlight,\n): DOMHighlightSet {\n    const newHighlights: Record<string, any> = {};\n\n    // Merge the new highlight with any existing highlights that intersect it.\n    let mergedDomRange = newHighlight.domRange;\n    let mergedFirstWordIndex = newHighlight.firstWordIndex;\n    let mergedLastWordIndex = newHighlight.lastWordIndex;\n    for (const key of Object.keys(existingHighlights)) {\n        const h = existingHighlights[key];\n        const newMergedDomRange = unionRanges(h.domRange, mergedDomRange);\n        if (newMergedDomRange) {\n            // This highlight's range was successfully merged into the new\n            // highlight. Update `mergedDomRange`, and *don't* add it to the\n            // new set of highlights.\n            mergedDomRange = newMergedDomRange;\n            mergedFirstWordIndex = Math.min(\n                h.firstWordIndex,\n                mergedFirstWordIndex,\n            );\n            mergedLastWordIndex = Math.max(\n                h.lastWordIndex,\n                mergedLastWordIndex,\n            );\n        } else {\n            // This highlight's range can't be merged into the new highlight.\n            // Add it to the new set of highlights.\n            newHighlights[key] = h;\n        }\n    }\n\n    const newMergedHighlight = {\n        firstWordIndex: mergedFirstWordIndex,\n        lastWordIndex: mergedLastWordIndex,\n        domRange: mergedDomRange,\n    } as const;\n\n    // Add the newly-merged highlight to the set of highlights, under a new,\n    // unique key.\n    const existingKeys = Object.keys(newHighlights);\n    const newKey = createNewUniqueKey(existingKeys);\n    newHighlights[newKey] = newMergedHighlight;\n\n    return newHighlights;\n}\n\n/**\n * Given a DOMRange and a list of word ranges, build a corresponding\n * DOMHighlight.\n *\n * If the DOMRange is not a valid highlight given the word ranges, return null.\n */\nexport function buildHighlight(\n    existingHighlights: DOMHighlightSet,\n    wordRanges: ReadonlyArray<DOMRange>,\n    newHighlightRange: DOMRange,\n): DOMHighlight | null | undefined {\n    // If any existing highlight fully contains the new highlight range, it's\n    // redundant and therefore not valid to build this as a highlight.\n    // Return null.\n    //\n    // NOTE(mdr): Really, our goal is to determine whether the new range's\n    //     content is already fully highlighted, so you could imagine this\n    //     logic not catching the case where a range's contents are fully\n    //     highlighted, but by multiple ranges.\n    //\n    //     However, words aren't actually adjacent; they have spaces between\n    //     them. So, even if each word in the range is currently highlighted,\n    //     the space between a pair of words will only be highlighted if\n    //     they're included in the same highlight range.\n    //\n    //     Therefore, if this new range isn't fully contained by an existing\n    //     highlight, then there's at *least* an unhighlighted space within the\n    //     range. In that case, it makes sense to offer this as a new highlight\n    //     that, when added, will merge with the highlights that it intersects.\n    for (const key of Object.keys(existingHighlights)) {\n        const existingHighlightRange = existingHighlights[key].domRange;\n        if (rangeIncludes(existingHighlightRange, newHighlightRange)) {\n            return null;\n        }\n    }\n\n    // If the new highlight range doesn't span two words from the content, it's\n    // not valid to build this as a highlight. Return null.\n    const indexes = findFirstAndLastWordIndexes(newHighlightRange, wordRanges);\n    if (!indexes) {\n        return null;\n    }\n\n    const [firstWordIndex, lastWordIndex] = indexes;\n    const firstWord = wordRanges[firstWordIndex];\n    const lastWord = wordRanges[lastWordIndex];\n    return {\n        firstWordIndex,\n        lastWordIndex,\n        domRange: spanRanges(firstWord, lastWord),\n    };\n}\n\n/**\n * Given a list of keys, return a new unique key that is not in the list.\n */\nfunction createNewUniqueKey(existingKeys: ReadonlyArray<string>): string {\n    // The base of the key is the current time, in milliseconds since epoch.\n    const base = `${new Date().getTime()}`;\n    if (!existingKeys.includes(base)) {\n        return base;\n    }\n\n    // But, if the user is a fast-clicker or time-traveler or something, and\n    // already has a highlight from this millisecond, then let's attach a\n    // suffix and keep incrementing it until we find an unused suffix.\n    let suffix = 0;\n    let key;\n    do {\n        key = `${base}-${suffix}`;\n        suffix++;\n    } while (existingKeys.includes(key));\n\n    return key;\n}\n\n/**\n * Given a SerializedHightlight and the current set of word ranges, return a\n * DOMHighlight representing the SerializedHighlight.\n *\n * If the SerializedHighlight is not valid given the list of word ranges, throw\n * an error.\n */\nexport function deserializeHighlight(\n    serializedHighlight: SerializedHighlight,\n    wordRanges: ReadonlyArray<DOMRange>,\n): DOMHighlight {\n    const {firstWordIndex, lastWordIndex} = serializedHighlight.range;\n\n    const firstWord = wordRanges[firstWordIndex];\n    if (!firstWord) {\n        throw new PerseusError(\n            `first word index ${firstWord} is out of bounds: ` +\n                `must be 0–${wordRanges.length - 1} inclusive`,\n            Errors.InvalidInput,\n            {metadata: {firstWord, wordRanges: JSON.stringify(wordRanges)}},\n        );\n    }\n\n    const lastWord = wordRanges[lastWordIndex];\n    if (!lastWord) {\n        throw new PerseusError(\n            `last word index ${lastWord} is out of bounds: ` +\n                `must be 0–${wordRanges.length - 1} inclusive`,\n            Errors.InvalidInput,\n            {metadata: {lastWord, wordRanges: JSON.stringify(wordRanges)}},\n        );\n    }\n\n    return {\n        firstWordIndex,\n        lastWordIndex,\n        domRange: spanRanges(firstWord, lastWord),\n    };\n}\n\n/**\n * Return a SerializedHighlight representing the given DOMHighlight.\n */\nexport function serializeHighlight(\n    highlight: DOMHighlight,\n): SerializedHighlight {\n    const {firstWordIndex, lastWordIndex} = highlight;\n\n    return {\n        range: {\n            type: \"word-indexes\",\n            firstWordIndex,\n            lastWordIndex,\n        },\n    };\n}\n","/**\n * Utility functions for highlighting UI.\n */\nimport {rangesOverlap, intersectRanges} from \"../ranges\";\n\nimport type {DOMRange, Position, Rect} from \"./types\";\n\n/**\n * Given two positions relative to the same origin, return `child`'s position\n * relative to `parent`'s position.\n */\nexport function getRelativePosition(\n    child: Position,\n    parent: Position,\n): Position {\n    return {\n        left: child.left - parent.left,\n        top: child.top - parent.top,\n    };\n}\n\n/**\n * `getRelativePosition`, but for Rects.\n *\n * Given a rectangle and a position relative to the same origin, return a new\n * rectangle of the same size, whose position is relative to the given\n * position.\n */\nexport function getRelativeRect(\n    {left, top, width, height}: Rect,\n    parent: Position,\n): Rect {\n    return {\n        ...getRelativePosition({left, top}, parent),\n        width,\n        height,\n    };\n}\n\n/**\n * Given a DOMRange, return a list of client-relative rects that cover the text\n * inside the DOMRange.\n *\n * This behaves differently than the browser's built-in `getClientRects` method\n * for DOMRanges, because this method only gets rects for the *text* nodes,\n * whereas the browser's method will also return rects for any fully-contained\n * *element* nodes.\n *\n * For example, if an entire paragraph is selected, then `getClientRects` will\n * return a rectangle that covers the entire paragraph block, whereas this\n * method will only return rectangles for the text inside the paragraph.\n */\nexport function getClientRectsForTextInRange(\n    range: DOMRange,\n): ReadonlyArray<Rect> {\n    const mutableRects = [];\n    addClientRectsForTextInNodeAndRange(\n        range.commonAncestorContainer,\n        range,\n        mutableRects,\n    );\n    return mutableRects;\n}\n\n/**\n * A helper method for getClientRectsForTextInRange.\n *\n * Given a node and a range, find text that is contained within both the node\n * and the range by recursing down the node's subtree, and push the text's\n * client rects onto the given `mutableRects` array.\n */\nfunction addClientRectsForTextInNodeAndRange(\n    node: Node,\n    range: DOMRange,\n    mutableRects: Array<Rect>,\n): void {\n    const nodeContentsRange = new Range();\n    nodeContentsRange.selectNodeContents(node);\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        // Get the text that appears both in this text node and in the range\n        // we're searching.\n        const intersectedRange = intersectRanges(range, nodeContentsRange);\n        if (intersectedRange) {\n            addClientRectsForText(node, intersectedRange, mutableRects);\n        }\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n        // Don't bother deep-traversing a node that doesn't even overlap the\n        // range we're searching.\n        if (!rangesOverlap(range, nodeContentsRange)) {\n            return;\n        }\n\n        // NOTE(mdr): Safari returns a non-iterable `childNodes` object, so\n        //     convert it to an array.\n        for (const child of Array.from(node.childNodes)) {\n            // TODO(mdr): If this parent has overflow: hidden, bound the child\n            //     rects accordingly. This would allow us to remove the hack\n            //     we added to .perseus-sr-only.\n            addClientRectsForTextInNodeAndRange(child, range, mutableRects);\n        }\n    }\n}\n\n/**\n * Given a DOMRange of text fully contained by the given `textNode`, compute\n * rectangles that visually cover the range, and push them onto the given\n * `mutableRects` array.\n *\n * This function adjusts the rectangles to the line height of the text, to\n * match the visual behavior of native text selection, and remove annoying gaps\n * between lines that disrupt hover behavior.\n */\nfunction addClientRectsForText(\n    textNode: Node,\n    textRange: DOMRange,\n    mutableRects: Array<Rect>,\n): void {\n    const parentElement = textNode.parentElement;\n    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'HTMLElement | null' is not assignable to parameter of type 'Element'.\n    const computedStyle = window.getComputedStyle(parentElement);\n\n    // NOTE(mdr): I'm not sure how computed line height works in all contexts\n    //     in all browsers. It's valid to specify line height as a ratio,\n    //     relative to font size. Latest Chrome seems to transform this into a\n    //     px value, but maybe some browsers don't, so I'm being defensive here\n    //     and only using the computed line height if it's explicitly a px\n    //     value. We could also handle other browsers by computing font size\n    //     and doing the math ourselves, but let's punt that until we need it.\n    let lineHeight = null;\n    if (\n        typeof computedStyle.lineHeight === \"string\" &&\n        computedStyle.lineHeight.endsWith(\"px\")\n    ) {\n        const parsedLineHeight = parseFloat(computedStyle.lineHeight);\n        if (!isNaN(parsedLineHeight)) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'number' is not assignable to type 'null'.\n            lineHeight = parsedLineHeight;\n        }\n    }\n\n    // NOTE(mdr): Safari returns a non-iterable `getClientRects` object, so\n    //     convert it to an array.\n    const boundingRects = Array.from(textRange.getClientRects());\n\n    for (const boundingRect of boundingRects) {\n        const rect: Rect = {\n            left: boundingRect.left,\n            top: boundingRect.top,\n            height: boundingRect.height,\n            width: boundingRect.width,\n        };\n\n        // Adjust the rectangle according to the text's line height. It should\n        // keep the same bottom coordinate, so the top coordinate will move\n        // accordingly.\n        if (lineHeight !== null) {\n            const heightIncrease = lineHeight - rect.height;\n            rect.top -= heightIncrease;\n            rect.height = lineHeight;\n        }\n\n        mutableRects.push(rect);\n    }\n}\n","/* eslint-disable react/no-unsafe */\n/**\n * This component, given a single DOMHighlight, draws highlight rectangles in\n * the same absolute position as the highlighted content, as computed via\n * `getClientRects`.\n *\n * TODO(mdr): Many things can affect the correct positioning of highlighting,\n *     and this component does not attempt to anticipate them. If we start\n *     using this highlighting library on content with a more dynamic layout,\n *     we should add a hook to allow the parent to `forceUpdate` the\n *     `HighlightRenderer`.\n */\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {\n    getClientRectsForTextInRange,\n    getRelativePosition,\n    getRelativeRect,\n} from \"./util\";\n\nimport type {DOMHighlight, Position, Rect, ZIndexes} from \"./types\";\n\ntype Props = {\n    // The DOMHighlight to render.\n    highlight: DOMHighlight;\n    // A unique key corresponding to the given `highlight`.\n    highlightKey: string;\n    // This component's `offsetParent` element, which is the nearest ancestor\n    // with `position: relative`. This will enable us to choose the correct\n    // CSS coordinates to align highlights and tooltips with the target\n    // content.\n    offsetParent: Element;\n    // The z-indexes to use when rendering tooltips above content, and\n    // highlights below content.\n    zIndexes: ZIndexes;\n};\n\ntype State = {\n    // The set of rectangles that cover this highlight's content, relative to\n    // the offset parent. This cache is updated on mount and on changes to\n    // the `highlight` and `offsetParent` props.\n    //\n    // We perform this caching because HighlightSetRenderer uses this\n    // component's `isHovered` function to access the rectangles every time the\n    // user's mouse moves, in order to check the hover state, and recomputing\n    // them on every mousemove seems like it could be expensive on older\n    // devices (though tbf that's just a gut instinct, not the result of\n    // testing on older devices).\n    cachedHighlightRects: ReadonlyArray<Rect>;\n};\n\nclass HighlightRenderer extends React.PureComponent<Props, State> {\n    state: State = {\n        cachedHighlightRects: this._computeRects(this.props),\n        // @ts-expect-error [FEI-5003] - TS2322 - Type '{ cachedHighlightRects: readonly Rect[]; tooltipIsHovered: boolean; }' is not assignable to type 'HighlightRendererState'.\n        tooltipIsHovered: false,\n    };\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        if (\n            this.props.highlight !== nextProps.highlight ||\n            this.props.offsetParent !== nextProps.offsetParent\n        ) {\n            this.setState({\n                cachedHighlightRects: this._computeRects(nextProps),\n            });\n        }\n    }\n\n    /**\n     * Compute the set of rectangles that cover the highlighted content, with\n     * coordinates relative to the offset parent. That way, we can use them\n     * for CSS positioning.\n     */\n    _computeRects(props: Props): ReadonlyArray<Rect> {\n        const {highlight, offsetParent} = props;\n\n        // Get the set of rectangles that covers the range's text, relative to\n        // the offset parent.\n        const clientRects = getClientRectsForTextInRange(highlight.domRange);\n        const {left, top} = offsetParent.getBoundingClientRect();\n        const relativeRects = clientRects.map((rect) =>\n            getRelativeRect(rect, {left, top}),\n        );\n\n        return relativeRects;\n    }\n\n    /**\n     * Return whether the given mouse position (coordinates relative to this\n     * component's offset parent) is hovering over the given rectangle\n     * (coordinates also relative to this component's offset parent).\n     */\n    _rectIsHovered(rect: Rect, mouseOffsetPosition: Position): boolean {\n        const positionWithinRect = getRelativePosition(mouseOffsetPosition, {\n            left: rect.left,\n            top: rect.top,\n        });\n\n        return (\n            0 <= positionWithinRect.left &&\n            positionWithinRect.left < rect.width &&\n            0 <= positionWithinRect.top &&\n            positionWithinRect.top < rect.height\n        );\n    }\n\n    /**\n     * Return whether the given mouse position (coordinates relative to the\n     * viewport) is hovering over this highlight.\n     */\n    isHovered(mouseClientPosition?: Position | null): boolean {\n        if (!mouseClientPosition) {\n            return false;\n        }\n\n        const {offsetParent} = this.props;\n        const {cachedHighlightRects} = this.state;\n\n        // Convert the client-relative mouse coordinates to be relative to the\n        // offset parent. That way, we can compare them to the cached highlight\n        // rectangles.\n        const {left, top} = offsetParent.getBoundingClientRect();\n        const mouseOffsetPosition = getRelativePosition(mouseClientPosition, {\n            left,\n            top,\n        });\n\n        return cachedHighlightRects.some((rect) =>\n            this._rectIsHovered(rect, mouseOffsetPosition),\n        );\n    }\n\n    render(): React.ReactNode {\n        const rects = this.state.cachedHighlightRects;\n\n        return (\n            <div>\n                {rects.map((rect, index) => (\n                    <div\n                        key={index}\n                        className={css(styles.highlightRect)}\n                        style={{\n                            // NOTE(mdr): We apply `position: absolute` here\n                            //     rather than in Aphrodite styles, because\n                            //     Aphrodite styles are delayed. If this\n                            //     element temporarily has `position: static`,\n                            //     then it'll displace the content, and other\n                            //     highlights rendering during this update will\n                            //     measure the displaced content instead, oops!\n                            position: \"absolute\",\n                            width: rect.width,\n                            height: rect.height,\n                            top: rect.top,\n                            left: rect.left,\n                            zIndex: this.props.zIndexes.belowContent,\n                        }}\n                    />\n                ))}\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    highlightRect: {\n        background: \"#fffabe\", // highlighter yellow :)\n    },\n});\n\nexport default HighlightRenderer;\n","/**\n * A tooltip to point to the focus of a highlight.\n *\n * We use the NewTooltip component, which positions itself not by coordinate,\n * but by watching the position of a target DOM element. So, we render a 0x0\n * DOM element, absolute-position it to the position of the the highlight\n * focus, and point the tooltip at that 0x0 element.\n *\n * This technique enables NewTooltip to use its existing visibility-watching\n * and scroll-tracking logic to effectively \"watch\" the focus of this\n * highlight. So, we get lots of the repositioning logic for free! But we _do_\n * still have to notify the tooltip to remeasure itself when the highlight\n * focus _changes_.\n */\nimport Spacing from \"@khanacademy/wonder-blocks-spacing\";\nimport Tooltip from \"@khanacademy/wonder-blocks-tooltip\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {Log} from \"../../../logging/log\";\n\nimport {getRelativeRect} from \"./util\";\n\nimport type {Rect} from \"./types\";\n\ntype Props = {\n    label: string;\n    onClick: () => unknown;\n    onMouseEnter?: () => unknown;\n    onMouseLeave?: () => unknown;\n    focusNode: Node;\n    focusOffset: number;\n    offsetParent: Element;\n};\n\nclass HighlightTooltip extends React.PureComponent<Props> {\n    _getFocusRect(): Rect | null | undefined {\n        const {focusNode, focusOffset, offsetParent} = this.props;\n\n        // Get a range of *just* the focus point of the selection.\n        const focusRange = document.createRange();\n        focusRange.setStart(focusNode, focusOffset);\n        focusRange.setEnd(focusNode, focusOffset);\n\n        // Then, get the bounding box of the collapsed range. This will be a\n        // zero-width rectangle, but still have positioning information, which\n        // we can use the position the tooltip.\n        //\n        // NOTE(mdr): If we used getClientBoundingRect here instead, Safari\n        //     would return an unpositioned rect. But all tested browsers at\n        //     time of writing (latest Chrome, Firefox, Safari) return at least\n        //     one rectangle from getClientRects, and it's well-positioned.\n        const focusRect = focusRange.getClientRects()[0];\n\n        // NOTE(mdr): ...except in the case where the focus is between two\n        //     paragraphs, in which case the focus range has no client rects?\n        //     Not sure why, or in what browsers (only noticed in Chrome 60),\n        //     but let's catch that case and bail out.\n        // TODO(mdr): Instead, we should somehow walk back the range until we\n        //     find an appropriate position for the tooltip. Sounds tricky!\n        if (!focusRect) {\n            Log.log(\n                \"[Highlighting] Known bug: Could not determine the focus \" +\n                    'position, so did not show an \"Add Highlight\" tooltip. ' +\n                    \"https://app.asana.com/0/329800276300868/413878480039713 \" +\n                    \"(see also /r/asana-links)\",\n            );\n            return null;\n        }\n\n        // Compute the desired position of the tooltip relative to the offset\n        // parent.\n        const {left, top} = offsetParent.getBoundingClientRect();\n        const relativeFocusRect = getRelativeRect(\n            {\n                left: focusRect.left,\n                top: focusRect.top,\n                width: focusRect.width,\n                height: focusRect.height,\n            },\n            {left, top},\n        );\n\n        return relativeFocusRect;\n    }\n\n    render(): null | React.ReactNode {\n        const focusRect = this._getFocusRect();\n        if (!focusRect) {\n            return null;\n        }\n\n        // using div instead of TooltipContent because\n        // TooltipContent wouldn't let me overwrite\n        // user-select and onClick\n        const content: any = (\n            <div\n                className={css(styles.tooltipLabel)}\n                onClick={this.props.onClick}\n            >\n                {this.props.label}\n            </div>\n        );\n\n        const style = {\n            position: \"absolute\",\n            left: focusRect.left,\n            // offset the spacing WB provides around tooltips\n            top: `calc(${Math.round(focusRect.top)}px + 0.95em)`,\n            height: 0,\n        } as const;\n\n        return (\n            <div\n                style={style}\n                onMouseEnter={this.props.onMouseEnter}\n                onMouseLeave={this.props.onMouseLeave}\n            >\n                <Tooltip content={content} opened={true}>\n                    <div />\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    tooltipLabel: {\n        // Unlike most tooltip contents, we don't want this label to be\n        // selectable. Selecting it is not only unhelpful, but dangerous: if\n        // the user accidentally selects the \"Add highlight\" tooltip text, then\n        // we lose our reference to the _actual_ text they want to highlight,\n        // and the \"Add highlight\" action fails.\n        userSelect: \"none\",\n        fontFamily: `\"Lato\", sans-serif`,\n        padding: `10px ${Spacing.medium_16}px`,\n        cursor: \"pointer\",\n    },\n});\n\nexport default HighlightTooltip;\n","/* eslint-disable react/no-unsafe */\n/**\n * Render a set of highlights. See HighlightRenderer for more details about how\n * each highlight is rendered.\n *\n * This component manages the state of the \"Remove highlight\" tooltip. To\n * determine the currently-hovered highlight, it calls the `isHovered` method\n * on each HighlightRenderer.\n */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\n\nimport HighlightRenderer from \"./highlight-renderer\";\nimport HighlightTooltip from \"./highlight-tooltip\";\n\nimport type {DOMHighlightSet, Position, ZIndexes} from \"./types\";\n\ntype Props = {\n    // Whether the highlights are user-editable. If false, highlights are\n    // read-only.\n    editable: boolean;\n    // A set of highlights to render.\n    highlights: DOMHighlightSet;\n    // This component's `offsetParent` element, which is the nearest ancestor\n    // with `position: relative`. This will enable us to choose the correct\n    // CSS coordinates to align highlights and tooltips with the target\n    // content.\n    offsetParent: Element;\n    // A callback indicating that the user would like to remove the highlight\n    // with the given key.\n    onRemoveHighlight: (highlightKey: string) => unknown;\n    // The z-indexes to use when rendering tooltips above content, and\n    // highlights below content.\n    zIndexes: ZIndexes;\n};\ntype State = {\n    // If the user is currently hovering over a highlight, this field contains\n    // its key.\n    hoveredHighlightKey: string | null | undefined;\n    // If the user is currently hovering over the \"Remove highlight\" tooltip,\n    // this field contains the key of the corresponding highlight.\n    hoveringTooltipFor: string | null | undefined;\n};\n\nclass HighlightSetRenderer extends React.PureComponent<Props, State> {\n    state: State = {\n        hoveredHighlightKey: null,\n        hoveringTooltipFor: null,\n    };\n\n    // eslint-disable-next-line react/sort-comp\n    _highlightRenderers: {\n        [highlightKey: string]: HighlightRenderer;\n    } = {};\n\n    componentDidMount() {\n        this._updateEditListeners(false, this.props.editable);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        this._updateEditListeners(this.props.editable, nextProps.editable);\n\n        // If we were previously hovering over a highlight that has been\n        // removed, reset the hover state accordingly.\n        if (\n            this.state.hoveredHighlightKey != null &&\n            !(this.state.hoveredHighlightKey in nextProps.highlights)\n        ) {\n            this.setState({hoveredHighlightKey: null});\n        }\n\n        // Similarly, if we were previously hovering over the tooltip for a\n        // highlight that has been removed, reset the hover state accordingly.\n        if (\n            this.state.hoveringTooltipFor != null &&\n            !(this.state.hoveringTooltipFor in nextProps.highlights)\n        ) {\n            this.setState({hoveringTooltipFor: null});\n        }\n    }\n\n    componentWillUnmount() {\n        this._updateEditListeners(this.props.editable, false);\n    }\n\n    /**\n     * Given whether we were previously listening to mousemove events, and\n     * whether we will now listen to mousemove events, add or remove the\n     * listener accordingly.\n     */\n    _updateEditListeners(wasListening: boolean, willListen: boolean) {\n        if (!wasListening && willListen) {\n            window.addEventListener(\"mousemove\", this._handleMouseMove);\n        } else if (wasListening && !willListen) {\n            window.removeEventListener(\"mousemove\", this._handleMouseMove);\n\n            // Additionally, reset the hover state, to ensure that we don't\n            // keep old hover state around.\n            this.setState({\n                hoveredHighlightKey: null,\n                hoveringTooltipFor: null,\n            });\n        }\n    }\n\n    _handleMouseMove: (e: MouseEvent) => void = (e: MouseEvent) => {\n        const mouseClientPosition = {left: e.clientX, top: e.clientY} as const;\n        const hoveredHighlightKey =\n            this._getHoveredHighlightKey(mouseClientPosition);\n        this.setState({hoveredHighlightKey});\n    };\n\n    _getHoveredHighlightKey(\n        mouseClientPosition: Position,\n    ): string | null | undefined {\n        // If we're hovering over the tooltip, the hovered highlight is the\n        // highlight that the tooltip is pointing to.\n        const {hoveringTooltipFor} = this.state;\n        if (typeof hoveringTooltipFor === \"string\") {\n            return hoveringTooltipFor;\n        }\n\n        // Otherwise, check each highlight renderer to see whether the current\n        // mouse position intersects any of the highlight rectangles.\n        const highlightKeys = Object.keys(this.props.highlights);\n        return highlightKeys.find((key) => {\n            const highlightRenderer = this._highlightRenderers[key];\n            return (\n                highlightRenderer &&\n                highlightRenderer.isHovered(mouseClientPosition)\n            );\n        });\n    }\n\n    _renderTooltip(): null | React.ReactNode {\n        const {hoveredHighlightKey} = this.state;\n        if (hoveredHighlightKey == null) {\n            return null;\n        }\n\n        const hoveredHighlight = this.props.highlights[hoveredHighlightKey];\n\n        return (\n            <HighlightTooltip\n                label={i18n._(\"Remove highlight\")}\n                focusNode={hoveredHighlight.domRange.endContainer}\n                focusOffset={hoveredHighlight.domRange.endOffset}\n                offsetParent={this.props.offsetParent}\n                onClick={() =>\n                    this.props.onRemoveHighlight(hoveredHighlightKey)\n                }\n                onMouseEnter={() =>\n                    this.setState({hoveringTooltipFor: hoveredHighlightKey})\n                }\n                onMouseLeave={() => this.setState({hoveringTooltipFor: null})}\n            />\n        );\n    }\n\n    render(): React.ReactNode {\n        return (\n            <div>\n                {Object.keys(this.props.highlights).map((key) => (\n                    <HighlightRenderer\n                        ref={(r) => {\n                            if (r) {\n                                this._highlightRenderers[key] = r;\n                            } else {\n                                delete this._highlightRenderers[key];\n                            }\n                        }}\n                        key={key}\n                        highlight={this.props.highlights[key]}\n                        highlightKey={key}\n                        offsetParent={this.props.offsetParent}\n                        zIndexes={this.props.zIndexes}\n                    />\n                ))}\n                {this.props.editable && this._renderTooltip()}\n            </div>\n        );\n    }\n}\n\nexport default HighlightSetRenderer;\n","/* eslint-disable react/no-unsafe */\n/**\n * Tracks the user's current selection, and exposes it to the subtree using the\n * function-as-children pattern.\n */\nimport * as React from \"react\";\n\nimport type {DOMHighlight, DOMRange} from \"./types\";\n\nexport type TrackedSelection = {\n    // The focus of the current selection - that is, the boundary point of the\n    // selection that the user is dragging around.\n    //\n    // We don't simply track the full `Selection` object, which contains all of\n    // this focus and range information and more, because the browser reuses\n    // the global `Selection` object and mutates it, which breaks our\n    // `shouldComponentUpdate` checks.\n    focusNode: Node;\n    focusOffset: number;\n    // If the current selection maps to a valid new highlight, we cache the\n    // highlight object here.\n    proposedHighlight: DOMHighlight;\n};\n\ntype Props = {\n    // A function that builds a DOMHighlight from the given DOMRange, if\n    // possible. If it would not currently be valid to add a highlight over the\n    // given DOMRange, returns null.\n    buildHighlight: (domRange: DOMRange) => DOMHighlight | null | undefined;\n    // The function-as-children pattern: passes the tracked selection, and\n    // whether the user is currently using their mouse to select, down the\n    // tree.\n    children?: (\n        trackedSelection: TrackedSelection | null | undefined,\n        userIsMouseSelecting: boolean,\n    ) => React.ReactElement<any>;\n    // If false, will not track selections.\n    enabled: boolean;\n};\n\ntype State = {\n    // The current state of the mouse button. We distinguish between down,\n    // down and the selection has changed since going down, and up.\n    mouseState: \"down\" | \"down-and-selecting\" | \"up\";\n    // The current TrackedSelection, if any.\n    trackedSelection: TrackedSelection | null | undefined;\n};\n\nclass SelectionTracker extends React.PureComponent<Props, State> {\n    state: State = {\n        mouseState: \"up\",\n        trackedSelection: null,\n    };\n\n    componentDidMount() {\n        this._updateListeners(false, this.props.enabled);\n    }\n\n    componentDidUpdate(prevProps: Props) {\n        if (this.props.buildHighlight !== prevProps.buildHighlight) {\n            // The highlight-building function changed, so the\n            // proposedHighlight we built with it might be different, or no\n            // longer be valid. Update accordingly.\n            this._updateTrackedSelection();\n        }\n\n        this._updateListeners(prevProps.enabled, this.props.enabled);\n    }\n\n    componentWillUnmount() {\n        this._updateListeners(this.props.enabled, false);\n    }\n\n    _updateListeners(wasListening: boolean, willListen: boolean) {\n        if (!wasListening && willListen) {\n            window.addEventListener(\"mousedown\", this._handleMouseDown);\n            window.addEventListener(\"mouseup\", this._handleMouseUp);\n            document.addEventListener(\n                \"selectionchange\",\n                this._handleSelectionChange,\n            );\n        } else if (wasListening && !willListen) {\n            window.removeEventListener(\"mousedown\", this._handleMouseDown);\n            window.removeEventListener(\"mouseup\", this._handleMouseUp);\n            document.removeEventListener(\n                \"selectionchange\",\n                this._handleSelectionChange,\n            );\n\n            // Additionally, reset the state, to guard against errors where we\n            // re-enter listening mode and have stale values stored.\n            this.setState({\n                mouseState: \"up\",\n                trackedSelection: null,\n            });\n        }\n    }\n\n    /**\n     * Get the current selection focus and range, if present and non-collapsed.\n     *\n     * Otherwise, if there is no current selection or it's collapsed, return\n     * null.\n     */\n    _computeFocusAndRange():\n        | {\n              focusNode: Node;\n              focusOffset: number;\n              range: DOMRange;\n          }\n        | null\n        | undefined {\n        const selection = document.getSelection();\n        if (!selection || selection.rangeCount === 0) {\n            return null;\n        }\n\n        const range = selection.getRangeAt(0);\n        if (range.collapsed) {\n            return null;\n        }\n\n        // NOTE(mdr): The focus node is guaranteed to exist, because\n        //     there's a range, but the type annotations for\n        //     Selection don't know that. Cast it ourselves.\n        const focusNode: Node = selection.focusNode as any;\n        const focusOffset = selection.focusOffset;\n        return {focusNode, focusOffset, range};\n    }\n\n    /**\n     * Compute and update the TrackedSelection to reflect the document state.\n     */\n    _updateTrackedSelection(): void {\n        const focusAndRange = this._computeFocusAndRange();\n        if (!focusAndRange) {\n            this.setState({trackedSelection: null});\n            return;\n        }\n\n        const {focusNode, focusOffset, range} = focusAndRange;\n        const proposedHighlight = this.props.buildHighlight(range);\n        if (!proposedHighlight) {\n            this.setState({trackedSelection: null});\n            return;\n        }\n\n        const trackedSelection = {\n            focusNode,\n            focusOffset,\n            proposedHighlight,\n        } as const;\n        this.setState({trackedSelection});\n    }\n\n    _handleSelectionChange: () => void = () => {\n        this._updateTrackedSelection();\n\n        if (this.state.mouseState === \"down\") {\n            this.setState({\n                mouseState: \"down-and-selecting\",\n            });\n        }\n    };\n\n    _handleMouseDown: () => void = () => {\n        this.setState({mouseState: \"down\"});\n    };\n\n    _handleMouseUp: () => void = () => {\n        this.setState({mouseState: \"up\"});\n    };\n\n    render(): null | React.ReactElement<React.ComponentProps<\"div\">> {\n        const {mouseState, trackedSelection} = this.state;\n        const userIsMouseSelecting = mouseState === \"down-and-selecting\";\n\n        return this.props.children ? (\n            <div>\n                {this.props.children(trackedSelection, userIsMouseSelecting)}\n            </div>\n        ) : null;\n    }\n}\n\nexport default SelectionTracker;\n","/**\n * This component, given a set of DOMHighlights, draws highlight rectangles in\n * the same absolute position as the highlighted content, as computed by the\n * range's `getClientRects` method.\n *\n * TODO(mdr): Many things can affect the correct positioning of highlighting,\n *     and this component does not attempt to anticipate them. If we start\n *     using this highlighting library on content with a more dynamic layout,\n *     we should add a hook to allow the parent to `forceUpdate` the\n *     `HighlightingUI`.\n */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\n\nimport {rangesOverlap} from \"../ranges\";\n\nimport HighlightSetRenderer from \"./highlight-set-renderer\";\nimport HighlightTooltip from \"./highlight-tooltip\";\nimport SelectionTracker from \"./selection-tracker\";\n\nimport type {TrackedSelection} from \"./selection-tracker\";\nimport type {DOMHighlight, DOMHighlightSet, DOMRange, ZIndexes} from \"./types\";\n\ntype Props = {\n    // A function that builds a DOMHighlight from the given DOMRange, if\n    // possible. If it would not currently be valid to add a highlight over the\n    // given DOMRange, returns null.\n    buildHighlight: (range: DOMRange) => DOMHighlight | null | undefined;\n    // A Node that contains the highlightable content.\n    contentNode: Node;\n    // Whether the highlights are user-editable. If false, highlights are\n    // read-only.\n    editable: boolean;\n    // A set of highlights to render.\n    highlights: DOMHighlightSet;\n    // This component's `offsetParent` element, which is the nearest ancestor\n    // with `position: relative`. This will enable us to choose the correct\n    // CSS coordinates to align highlights and tooltips with the target\n    // content.\n    offsetParent: Element;\n    // A callback indicating that the user would like to add the given\n    // highlight to the current set of highlights.\n    onAddHighlight: (range: DOMHighlight) => unknown;\n    // A callback indicating that the user would like to remove the highlight\n    // with the given key.\n    onRemoveHighlight: (highlightKey: string) => unknown;\n    // The z-indexes to use when rendering tooltips above content, and\n    // highlights below content.\n    zIndexes: ZIndexes;\n};\n\nclass HighlightingUI extends React.PureComponent<Props> {\n    _handleAddHighlight(highlightToAdd: DOMHighlight) {\n        this.props.onAddHighlight(highlightToAdd);\n\n        // Deselect the newly-highlighted text, by collapsing the selection\n        // to the end of the range.\n        const selection = document.getSelection();\n        if (selection) {\n            selection.collapseToEnd();\n        }\n    }\n\n    _selectionIsValid(\n        trackedSelection?: TrackedSelection | null,\n    ): trackedSelection is TrackedSelection {\n        if (!trackedSelection) {\n            return false;\n        }\n\n        const {contentNode} = this.props;\n\n        // Create a range over the content node.\n        const contentRange = new Range();\n        contentRange.selectNodeContents(contentNode);\n\n        // Create a range over the focus position.\n        const focusRange = new Range();\n        focusRange.setStart(\n            trackedSelection.focusNode,\n            trackedSelection.focusOffset,\n        );\n        focusRange.collapse(true /* to start */);\n\n        // Determine whether the content range contains the focus, by checking\n        // whether they intersect. Because the focus range is a single point,\n        // intersection is equivalent to being fully contained.\n        const contentContainsFocus = rangesOverlap(contentRange, focusRange);\n\n        // If the content contains the focus, this is a valid selection. Some\n        // parts of the range might go beyond the content, but that's okay; the\n        // corresponding DOMHighlight is already trimmed to only contain valid\n        // words. We're just checking that the tooltip we render will be inside\n        // the content, because rendering a tooltip outside the content would\n        // be weird.\n        const selectionIsValid = contentContainsFocus;\n\n        return selectionIsValid;\n    }\n\n    render(): React.ReactNode {\n        return (\n            <SelectionTracker\n                buildHighlight={this.props.buildHighlight}\n                enabled={this.props.editable}\n            >\n                {(trackedSelection, userIsMouseSelecting) => (\n                    <div>\n                        <HighlightSetRenderer\n                            editable={\n                                /* An existing highlight is editable when the\n                                 * component is in editable mode, and there's no\n                                 * selection in progress. */\n                                this.props.editable &&\n                                !this._selectionIsValid(trackedSelection)\n                            }\n                            highlights={this.props.highlights}\n                            offsetParent={this.props.offsetParent}\n                            onRemoveHighlight={this.props.onRemoveHighlight}\n                            zIndexes={this.props.zIndexes}\n                        />\n                        {this._selectionIsValid(trackedSelection) &&\n                            !userIsMouseSelecting && (\n                                <HighlightTooltip\n                                    label={i18n._(\"Add highlight\")}\n                                    onClick={() =>\n                                        this._handleAddHighlight(\n                                            trackedSelection.proposedHighlight,\n                                        )\n                                    }\n                                    focusNode={trackedSelection.focusNode}\n                                    focusOffset={trackedSelection.focusOffset}\n                                    offsetParent={this.props.offsetParent}\n                                />\n                            )}\n                    </div>\n                )}\n            </SelectionTracker>\n        );\n    }\n}\n\nexport default HighlightingUI;\n","/**\n * This component, whenever its content updates, traverses the DOM to find\n * semantic words and send the corresponding DOMRanges to the caller via a\n * callback.\n *\n * A \"word\" here is a sequence of non-whitespace text characters, uninterrupted\n * by the start/end of a non-inline element. That is, a word can span across\n * text nodes and inline tags like <b>, but cannot span across block\n * paragraphs.\n *\n * The words yielded by WordIndexer are sorted in document order, which makes\n * them amenable to binary search - see `findBoundaryWordIndex` in ranges.js.\n */\nimport * as React from \"react\";\n\nimport {Errors} from \"../../logging/log\";\nimport {PerseusError} from \"../../perseus-error\";\n\nimport type {DOMRange} from \"./types\";\n\ntype Props = {\n    // The content to display and traverse in search of words.\n    children?: React.ReactElement<any>;\n    // After each mount and update, this callback is called with the list of\n    // word ranges in `children`'s DOM, sorted in document order.\n    onWordsUpdate: (wordRanges: ReadonlyArray<DOMRange>) => unknown;\n};\n\nclass WordIndexer extends React.PureComponent<Props> {\n    _container: HTMLElement | null | undefined;\n    /* eslint-enable react/sort-comp */\n\n    componentDidMount() {\n        this._sendWordsUpdate();\n    }\n\n    componentDidUpdate() {\n        this._sendWordsUpdate();\n    }\n\n    _sendWordsUpdate() {\n        this.props.onWordsUpdate(this._getWordRanges());\n    }\n\n    _getWordRanges(): ReadonlyArray<DOMRange> {\n        const container = this._container;\n\n        if (!container) {\n            throw new PerseusError(\n                \"invariant violation: `this._container` is not defined, but \" +\n                    \"this method is only called after mount/update\",\n                Errors.NotAllowed,\n            );\n        }\n\n        // Create a TreeWalker that visits text nodes and element nodes.\n        // We select the types of nodes we're interested in by bitwise-ORing\n        // the desired filters together.\n        const treeWalker = container.ownerDocument.createTreeWalker(\n            container,\n            NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT,\n            () => NodeFilter.FILTER_ACCEPT,\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 1-3 arguments, but got 4.\n            false,\n        );\n\n        // Traverse the container's descendant text nodes in DOM order,\n        // indexing the words we find.\n        const index: Array<Range> = [];\n        let trailingWordRange = null;\n        while (treeWalker.nextNode()) {\n            const node = treeWalker.currentNode;\n\n            if (node.nodeType === Node.ELEMENT_NODE) {\n                const element: Element = node as any;\n                if (getComputedStyle(element).display !== \"inline\") {\n                    // Block-level elements interrupt text words, so set the\n                    // current trailing word to `null`.\n                    //\n                    // This includes exiting one paragraph to visit another,\n                    // but also includes text interrupted by inline-block\n                    // elements.\n                    //\n                    // TODO(mdr): Is this behavior *generalizably* correct?\n                    // TODO(mdr): I don't *fully* understand the performance\n                    //     implications of `getComputedStyle`, but I think it's\n                    //     gonna be nbd at the current call sites. If we try to\n                    //     generalize to frequently-updating content, we might\n                    //     want to watch this as a potential performance\n                    //     bottleneck.\n                    trailingWordRange = null;\n                }\n            } else if (node.nodeType === Node.TEXT_NODE) {\n                const text = node.nodeValue;\n\n                // A \"word\" is here simply defined as a maximal-length\n                // substring of non-space characters.\n                //\n                // Loop over all the words in the string, by repeatedly calling\n                // `wordPattern.exec(text)`.\n                const wordPattern = /\\S+/g;\n                let wordMatch;\n                let newTrailingWordRange = null;\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string | null' is not assignable to parameter of type 'string'.\n                while ((wordMatch = wordPattern.exec(text)) !== null) {\n                    const startOffset = wordMatch.index;\n                    const endOffset = wordMatch.index + wordMatch[0].length;\n\n                    let range;\n                    if (startOffset === 0 && trailingWordRange) {\n                        // This word is at the start of this text node, and\n                        // there's a trailing word from the previous text node,\n                        // and there was no non-inline element between them.\n                        // This word and the trailing word are probably\n                        // intended to be two parts of the same word.\n                        //\n                        // So, instead of creating a new word range, we add\n                        // this word to the previous range by extending it.\n                        range = trailingWordRange;\n                        range.setEnd(node, endOffset);\n                    } else {\n                        // Otherwise, start a new word range here, and add it\n                        // to the list.\n                        // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                        range = node.ownerDocument.createRange();\n                        range.setStart(node, startOffset);\n                        range.setEnd(node, endOffset);\n                        index.push(range);\n                    }\n\n                    // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                    if (endOffset === text.length) {\n                        newTrailingWordRange = range;\n                    }\n                }\n                trailingWordRange = newTrailingWordRange;\n            }\n        }\n\n        return index;\n    }\n\n    render(): React.ReactNode {\n        return (\n            <div ref={(container) => (this._container = container)}>\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default WordIndexer;\n","/**\n * The entry point for highlighting!\n *\n * Given a content node and a set of serialized highlights, this component\n * renders the content with the given highlights applied. The content's DOM is\n * not modified by this process, so any content should be safe to pass to this\n * component.\n *\n * This component also renders controls for the user to add/remove/update\n * highlights. When the user does so, this component will update the full set\n * of highlights, serialize them, and call `onSerializedHighlightsUpdate` with\n * new set of serialized highlights, which you can then persist and send back\n * down to this component. Easy peasy!\n */\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {\n    addHighlight,\n    buildHighlight,\n    deserializeHighlight,\n    serializeHighlight,\n} from \"./highlights\";\nimport HighlightingUI from \"./ui/highlighting-ui\";\nimport WordIndexer from \"./word-indexer\";\n\nimport type {\n    DOMHighlight,\n    DOMHighlightSet,\n    SerializedHighlightSet,\n    DOMRange,\n} from \"./types\";\n\ntype Props = {\n    // The highlightable content itself. Highlights will be defined relative to\n    // the content specified here.\n    children?: React.ReactElement<any>;\n    // Whether the highlights are user-editable. If false, highlights are\n    // read-only.\n    editable: boolean;\n    // Whether highlighting is currently enabled. If false, highlights are not\n    // visible and are read-only (regardless of the `editable` prop), and this\n    // component is effectively a no-op.\n    //\n    // NOTE(mdr): The purpose of the `enabled` prop, as opposed to, say, just\n    //     *not* wrapping the content, is to enable quick toggles between\n    //     enabled/disabled while maintaining the same component structure.\n    //     Forcing React to rebuild the entire component tree is not kind!\n    enabled: boolean;\n    // When the user attempts to add/remove/update a highlight, this callback\n    // will be called with a newly-updated full set of highlights that reflects\n    // the user's intent.\n    onSerializedHighlightsUpdate: (\n        serializedHighlights: SerializedHighlightSet,\n    ) => unknown;\n    // The set of highlights to apply to the given content.\n    serializedHighlights: SerializedHighlightSet;\n};\n\ntype State = {\n    // A cached list of DOMRanges, each representing one of the content's\n    // semantic words. Sorted in document order.\n    wordRanges: ReadonlyArray<DOMRange>;\n};\n\nclass HighlightableContent extends React.PureComponent<Props, State> {\n    // References to the mounted container and content divs.\n    _container: HTMLElement | null | undefined;\n    _content: HTMLElement | null | undefined;\n\n    state: State = {\n        wordRanges: [],\n    };\n\n    _buildHighlight(highlightRange: DOMRange): DOMHighlight | null | undefined {\n        // TODO(mdr): If _buildHighlight starts getting called more often, we\n        //     might want to cache the DOMHighlightSet instead of recomputing\n        //     it here.\n        return buildHighlight(\n            this._getDOMHighlights(),\n            this.state.wordRanges,\n            highlightRange,\n        );\n    }\n\n    /**\n     * Take the highlights from props, and deserialize them into DOMHighlights,\n     * according to the latest cache of word ranges.\n     */\n    _getDOMHighlights(): DOMHighlightSet {\n        const {serializedHighlights} = this.props;\n        const {wordRanges} = this.state;\n\n        const domHighlights: Record<string, any> = {};\n        for (const key of Object.keys(serializedHighlights)) {\n            domHighlights[key] = deserializeHighlight(\n                serializedHighlights[key],\n                wordRanges,\n            );\n        }\n        return domHighlights;\n    }\n\n    /**\n     * Add the given DOMHighlight to the current set.\n     */\n    _handleAddHighlight: (highlight: DOMHighlight) => void = (\n        highlight: DOMHighlight,\n    ) => {\n        const newDomHighlights = addHighlight(\n            this._getDOMHighlights(),\n            highlight,\n        );\n\n        const newSerializedHighlights: Record<string, any> = {};\n        for (const key of Object.keys(newDomHighlights)) {\n            newSerializedHighlights[key] = serializeHighlight(\n                newDomHighlights[key],\n            );\n        }\n\n        this.props.onSerializedHighlightsUpdate(newSerializedHighlights);\n    };\n\n    /**\n     * Remove the given highlight from the list, and call our callback with the\n     * new set of highlights.\n     */\n    _handleRemoveHighlight: (keyToRemove: string) => void = (\n        keyToRemove: string,\n    ) => {\n        const {serializedHighlights} = this.props;\n        const newSerializedHighlights = {...serializedHighlights} as const;\n        // @ts-expect-error [FEI-5003] - TS2542 - Index signature in type '{ readonly [x: string]: SerializedHighlight; }' only permits reading.\n        delete newSerializedHighlights[keyToRemove];\n        this.props.onSerializedHighlightsUpdate(newSerializedHighlights);\n    };\n\n    /**\n     * When our WordIndexer sends us a new cache of word ranges, store it in\n     * our component state.\n     */\n    _handleWordsUpdate: (wordRanges: ReadonlyArray<DOMRange>) => void = (\n        wordRanges: ReadonlyArray<DOMRange>,\n    ) => {\n        this.setState({wordRanges});\n    };\n\n    render(): React.ReactNode {\n        const highlights = this._getDOMHighlights();\n\n        // NOTE(mdr): This lambda is rebuilt every time this component updates,\n        //     so every update to HighlightableContent triggers an update in\n        //     the child HighlightingUI and SelectionTracker, even if the\n        //     behavior hasn't changed.\n        //\n        //     Over-updating is preferable to under-updating here, because some\n        //     updates in this component's props/state *do* affect\n        //     `buildHighlight`'s behavior, and *should* trigger an update.\n        //\n        //     A more performant approach would be to cache this function\n        //     object until its implicitly-bound inputs change. If profiling\n        //     leads us to implement such caching, this draft might be a good\n        //     starting point: https://phabricator.khanacademy.org/D35623?id=170698\n        const buildHighlight = (r: DOMRange) => this._buildHighlight(r);\n\n        return (\n            <div\n                className={css(styles.container)}\n                ref={(container) => (this._container = container)}\n            >\n                <div>\n                    {this.props.enabled && this._container && this._content && (\n                        <HighlightingUI\n                            buildHighlight={buildHighlight}\n                            contentNode={this._content}\n                            editable={this.props.editable}\n                            highlights={highlights}\n                            offsetParent={this._container}\n                            zIndexes={{\n                                // The content has a z-index of 1, so, to\n                                // be below the content, use z-index of 0.\n                                //\n                                // TODO(mdr): Is this way of passing around\n                                //     `z-index: 0` actually worth the\n                                //     trouble? We used to have more, but\n                                //     now we don't need them...\n                                belowContent: 0,\n                            }}\n                            onAddHighlight={this._handleAddHighlight}\n                            onRemoveHighlight={this._handleRemoveHighlight}\n                        />\n                    )}\n                </div>\n                <div\n                    className={css(styles.content)}\n                    ref={(content) => (this._content = content)}\n                >\n                    <WordIndexer onWordsUpdate={this._handleWordsUpdate}>\n                        {this.props.children}\n                    </WordIndexer>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    // We render content with z-index 1, and highlights with z-index 0, so that\n    // content will receive the browser's native pointer events. (Highlights\n    // have their own magic code to manage hover detection, despite being\n    // behind the content.)\n\n    container: {\n        // Position the container and give it a z-index, to scope the z-indexes\n        // inside by creating a stacking context.\n        // https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context\n        //\n        // This way, content's z-index of 1, and highlights' z-index of 0, and\n        // tooltips' z-index of 2 don't interact with anything external;\n        // external UI will see `HighlightableContent` as a single flat layer\n        // with a z-index of 0. This removes the need for us to coordinate our\n        // choices of z-index with external UI.\n        position: \"relative\",\n        zIndex: 0,\n    },\n\n    content: {\n        // NOTE(mdr): Creating a stacking context for content of z-index 1 may\n        //    be problematic if the content and external page want to\n        //    interleave layers between each other, e.g., if the application UI\n        //    wants to render something above some parts of our content, but\n        //    below other parts. It's not relevant for the current Passage-only\n        //    call site, but could be relevant someday…\n        position: \"relative\",\n        zIndex: 1,\n    },\n});\n\nexport default HighlightableContent;\n","/* eslint-disable react/sort-comp */\nimport SimpleMarkdown from \"@khanacademy/simple-markdown\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport type {\n    Capture,\n    Parser,\n    SingleASTNode,\n    State,\n} from \"@khanacademy/simple-markdown\";\n\nexport type ParseState = State & {\n    currentRef: number[];\n    useRefs: boolean;\n    lastRef: number;\n    firstSentenceRef: string | null | undefined;\n    firstQuestionRef: string | null | undefined;\n    lastFootnote: {\n        id: number;\n        text: string;\n    };\n};\n\ntype OutputFun = any;\n\ntype FootnoteType = {\n    id: number;\n    text: string;\n};\n\ntype RefStartNode = {\n    ref: number | null | undefined;\n    refContent: React.ReactNode;\n};\n\ntype RefEndNode = {\n    ref: number | null | undefined;\n};\n\ntype LabelNode = {\n    content: string;\n    space: boolean;\n};\n\ntype HighlightNode = {\n    content: string;\n};\n\ntype Props = {\n    refContent: React.ReactNode;\n};\n\nfunction getInitialParseState(): ParseState {\n    return {\n        currentRef: [],\n        useRefs: true,\n        lastRef: 0,\n        firstSentenceRef: null,\n        firstQuestionRef: null,\n        lastFootnote: {id: 0, text: \"\"},\n    };\n}\n\nclass RefStart extends React.Component<Props> {\n    render(): React.ReactNode {\n        return <span style={REF_STYLE}>{i18n.doNotTranslate(\"_\")}</span>;\n    }\n\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '() => React.ReactNode' is not assignable to type '() => ReactElement<any, string | JSXElementConstructor<any>>'.\n    getRefContent: () => React.ReactElement = () => {\n        return this.props.refContent;\n    };\n}\n\nclass RefEnd extends React.Component<Record<any, any>> {\n    render(): React.ReactNode {\n        return <span style={REF_STYLE}>{i18n.doNotTranslate(\"_\")}</span>;\n    }\n}\n\nconst rules = {\n    newline: SimpleMarkdown.defaultRules.newline,\n    paragraph: SimpleMarkdown.defaultRules.paragraph,\n    escape: SimpleMarkdown.defaultRules.escape,\n    passageFootnote: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.1,\n        match: SimpleMarkdown.inlineRegex(/^\\^/),\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): FootnoteType => {\n            // if no footnotes have been seen, we're id 1. otherwise,\n            // we're the next subsequent id\n            const id = state.lastFootnote.id + 1;\n            const footnote = {\n                id: id,\n                // our text is what to output. if there is only one footnote,\n                // it's a *; otherwise it's a superscript number\n                text: id === 1 ? \"*\" : \"\" + id,\n            } as const;\n\n            // If the previous footnote was a *, we need to adjust it to be\n            // a number, since now we know there is more than one footnote\n            if (state.lastFootnote.text === \"*\") {\n                state.lastFootnote.text = \"\" + state.lastFootnote.id;\n            }\n\n            // and update our last footnote, + return.\n            state.lastFootnote = footnote;\n            return footnote;\n        },\n        react: (node: FootnoteType, output: OutputFun, state: ParseState) => {\n            return <sup key={state.key}>{node.text}</sup>;\n        },\n    },\n    refStart: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.2,\n        match: function (source) {\n            const capture = /^\\{\\{/.exec(source);\n            if (capture) {\n                // We need to do extra processing here to capture the\n                // full text of the reference, which we include so that\n                // we can use that information as a screenreader\n                let closeIndex = 2; // start looking after the opening \"{{\"\n                let refNestingLevel = 0;\n\n                // Find the closing \"}}\" for our opening \"{{\"\n                while (closeIndex < source.length) {\n                    const token = source.slice(closeIndex, closeIndex + 2);\n                    if (token === \"{{\") {\n                        refNestingLevel++;\n                        // increment an extra character so we get the\n                        // full 2-char token\n                        closeIndex++;\n                    } else if (token === \"}}\") {\n                        if (refNestingLevel > 0) {\n                            refNestingLevel--;\n                            // increment an extra character so we get the\n                            // full 2-char token\n                            closeIndex++;\n                        } else {\n                            break;\n                        }\n                    }\n                    closeIndex++;\n                }\n\n                // A \"magic\" capture that matches the opening {{\n                // but captures the full ref text internally :D\n                // unfortunately the \"magic\" makes TypeScript upset,\n                // so there's this questionable workaround\n                capture[1] = source.slice(2, closeIndex);\n                return capture;\n            }\n            return null;\n        },\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): RefStartNode => {\n            if (!state.useRefs) {\n                return {\n                    ref: null,\n                    refContent: null,\n                };\n            }\n\n            const ref = state.lastRef + 1;\n            state.lastRef = ref;\n            state.currentRef.push(ref);\n\n            const refContent = parse(\n                // Curly quotes\n                \"(\\u201C\" + capture[1] + \"\\u201D)\\n\\n\",\n                _.defaults(\n                    {\n                        // We don't want to parse refs while looking through\n                        // this refs contents. We definitely don't want\n                        // to make those refs into react refs on the\n                        // passage, for instance!\n                        useRefs: false,\n                    },\n                    getInitialParseState(),\n                ),\n            );\n\n            return {\n                ref: ref,\n                refContent: refContent,\n            };\n        },\n        react: (node: RefStartNode, output: OutputFun, state: ParseState) => {\n            const ref = node.ref;\n            if (ref == null) {\n                return null;\n            }\n\n            // We don't pass state here because this is parsed\n            // and output out-of-band. We don't want to affect\n            // our state by the double-output here :).\n            const refContent = output(node.refContent, {});\n\n            // note(matthewc) the refs created here become the refs\n            // pulled from `this.refs` in passage.jsx\n            return (\n                <RefStart\n                    ref={START_REF_PREFIX + ref}\n                    key={START_REF_PREFIX + ref}\n                    refContent={refContent}\n                />\n            );\n        },\n    },\n    refEnd: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.3,\n        match: SimpleMarkdown.inlineRegex(/^\\}\\}/),\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): RefEndNode => {\n            if (!state.useRefs) {\n                return {\n                    ref: null,\n                };\n            }\n\n            const ref = state.currentRef.pop() || null;\n            return {\n                ref: ref,\n            };\n        },\n        react: (node: RefEndNode, output: OutputFun, state: ParseState) => {\n            if (node.ref != null) {\n                // note(matthewc) the refs created here become the refs\n                // pulled from `this.refs` in passage.jsx\n                return (\n                    <RefEnd\n                        ref={END_REF_PREFIX + node.ref}\n                        key={END_REF_PREFIX + node.ref}\n                    />\n                );\n            }\n            // if we didn't have a matching start reference, or\n            // we aren't parsing refs for this pass (we do this\n            // inside of refContent), don't output a ref\n            return null;\n        },\n    },\n    squareLabel: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.4,\n        match: SimpleMarkdown.inlineRegex(/^\\[\\[(\\w+)\\]\\]( *)/),\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): LabelNode => {\n            if (!state.firstQuestionRef) {\n                state.firstQuestionRef = capture[1];\n            }\n            return {\n                content: capture[1],\n                space: capture[2].length > 0,\n            };\n        },\n        react: (node: LabelNode, output: OutputFun, state: ParseState) => {\n            return [\n                <span\n                    key=\"visual-square\"\n                    className=\"perseus-passage-square-label\"\n                    style={LABEL_OUTER_STYLE}\n                    aria-hidden=\"true\"\n                >\n                    <span style={SQUARE_LABEL_STYLE}>{node.content}</span>\n                </span>,\n                <span key=\"alt-text\" className=\"perseus-sr-only\">\n                    {i18n.$_(\"[Marker for question %(number)s]\", {\n                        number: node.content,\n                    })}\n                </span>,\n                node.space ? \"\\u00A0\" : null,\n            ];\n        },\n    },\n    circleLabel: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.5,\n        match: SimpleMarkdown.inlineRegex(/^\\(\\((\\w+)\\)\\)( *)/),\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): LabelNode => {\n            return {\n                content: capture[1],\n                space: capture[2].length > 0,\n            };\n        },\n        react: (\n            node: LabelNode,\n            output: OutputFun,\n            state: ParseState,\n        ): React.ReactElement => {\n            // @ts-expect-error [FEI-5003] - TS2739 - Type '(string | Element | null)[]' is missing the following properties from type 'ReactElement<any, string | JSXElementConstructor<any>>': type, props, key\n            return [\n                <span\n                    key=\"visual-circle\"\n                    className=\"perseus-passage-circle-label\"\n                    style={LABEL_OUTER_STYLE}\n                    aria-hidden={true}\n                >\n                    <span style={CIRCLE_LABEL_STYLE}>{node.content}</span>\n                </span>,\n                <span key=\"alt-text\" className=\"perseus-sr-only\">\n                    {i18n.$_(\"[Circle marker %(number)s]\", {\n                        number: node.content,\n                    })}\n                </span>,\n                node.space ? \"\\u00A0\" : null,\n            ];\n        },\n    },\n    squareBracketRef: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.6,\n        match: SimpleMarkdown.inlineRegex(/^\\[(\\d+)\\]( *)/),\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): LabelNode => {\n            if (!state.firstSentenceRef) {\n                state.firstSentenceRef = capture[1];\n            }\n            return {\n                content: capture[1],\n                space: capture[2].length > 0,\n            };\n        },\n        react: (node: LabelNode, output: OutputFun, state: ParseState) => {\n            return [\n                <span\n                    key=\"visual-brackets\"\n                    className=\"perseus-passage-bracket-label\"\n                    aria-hidden=\"true\"\n                >\n                    [{node.content}]\n                </span>,\n                <span key=\"alt-text\" className=\"perseus-sr-only\">\n                    {i18n.$_(\"[Sentence %(number)s]\", {number: node.content})}\n                </span>,\n                node.space ? \"\\u00A0\" : null,\n            ];\n        },\n    },\n    highlight: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.7,\n        match: SimpleMarkdown.inlineRegex(\n            /^{highlighting.start}(.+?){highlighting.end}/,\n        ),\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): HighlightNode => {\n            return {\n                content: capture[1],\n            };\n        },\n        react: (node: HighlightNode, output: OutputFun, state: ParseState) => {\n            return [\n                <span key={0} className=\"perseus-highlight\">\n                    {node.content}\n                </span>,\n            ];\n        },\n    },\n    reviewHighlight: {\n        order: SimpleMarkdown.defaultRules.escape.order + 0.7,\n        match: SimpleMarkdown.inlineRegex(\n            /^{review-highlighting.start}(.+?){review-highlighting.end}/,\n        ),\n        parse: (\n            capture: Capture,\n            parse: Parser,\n            state: ParseState,\n        ): HighlightNode => {\n            return {\n                content: capture[1],\n            };\n        },\n        react: (node: HighlightNode, output: OutputFun, state: ParseState) => {\n            return [\n                <span key={0} className=\"perseus-review-highlight\">\n                    {node.content}\n                </span>,\n            ];\n        },\n    },\n    strong: SimpleMarkdown.defaultRules.strong,\n    u: SimpleMarkdown.defaultRules.u,\n    em: SimpleMarkdown.defaultRules.em,\n    del: SimpleMarkdown.defaultRules.del,\n    text: {\n        ...SimpleMarkdown.defaultRules.text,\n        react(node: any, output: any, state: any) {\n            return <span key={state.key}>{node.content}</span>;\n        },\n    },\n} as const;\n\nconst START_REF_PREFIX = \"start-ref-\";\nconst END_REF_PREFIX = \"end-ref-\";\nconst REF_STYLE = {\n    display: \"inline-block\",\n    width: 0,\n    visibility: \"hidden\",\n} as const;\n\nconst LABEL_OUTER_STYLE = {\n    // for some reason we need these to keep the nbsp from wrapping when the\n    // inner circle/square is display: inline-block\n    display: \"inline\",\n    whiteSpace: \"nowrap\",\n} as const;\n\nconst SQUARE_LABEL_STYLE = {\n    display: \"inline-block\",\n    color: \"rgb(255, 255, 255)\",\n    backgroundColor: \"rgb(90, 90, 90)\",\n    paddingLeft: 10,\n    paddingRight: 10,\n    userSelect: \"none\",\n    WebkitUserSelect: \"none\",\n} as const;\n\nconst CIRCLE_LABEL_STYLE = {\n    display: \"inline-block\",\n    color: \"rgb(255, 255, 255)\",\n    backgroundColor: \"rgb(90, 90, 90)\",\n    userSelect: \"none\",\n    WebkitUserSelect: \"none\",\n    width: 22,\n    height: 22,\n    borderRadius: \"50%\",\n    textAlign: \"center\",\n} as const;\n\nconst builtParser = SimpleMarkdown.parserFor(rules);\nconst parse: (\n    arg1: string,\n    arg2?: ParseState | null | undefined,\n) => Array<SingleASTNode> = (source, state) => {\n    // @ts-expect-error [FEI-5003] - TS2322 - Type 'ParseState | {}' is not assignable to type 'ParseState | null | undefined'.\n    state = state || {};\n    const paragraphedSource = source + \"\\n\\n\";\n    return builtParser(\n        paragraphedSource,\n        _.extend(state, getInitialParseState()),\n    );\n};\n\n// @ts-expect-error [FEI-5003] - TS2322 - Type 'ReactOutput' is not assignable to type '(arg1: SingleASTNode[]) => ReactElement<any, string | JSXElementConstructor<any>>'.\nconst output: (arg1: Array<SingleASTNode>) => React.ReactElement =\n    SimpleMarkdown.reactFor(SimpleMarkdown.ruleOutput(rules, \"react\"));\n\nexport default {\n    parse,\n    output,\n    START_REF_PREFIX,\n    END_REF_PREFIX,\n    getInitialParseState,\n};\n","import {linterContextDefault} from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport HighlightableContent from \"../components/highlighting/highlightable-content\";\nimport {getDependencies} from \"../dependencies\";\nimport Renderer from \"../renderer\";\n\nimport PassageMarkdown from \"./passage/passage-markdown\";\n\nimport type {SerializedHighlightSet} from \"../components/highlighting/types\";\nimport type {ChangeableProps} from \"../mixins/changeable\";\nimport type {PerseusPassageWidgetOptions} from \"../perseus-types\";\nimport type {\n    PerseusScore,\n    WidgetExports,\n    WidgetInfo,\n    WidgetProps,\n} from \"../types\";\nimport type {ParseState} from \"./passage/passage-markdown\";\nimport type {SingleASTNode} from \"@khanacademy/simple-markdown\";\n\n// A fake paragraph to measure the line height of the passage,\n// so we can adapt to browser zoom\nexport class LineHeightMeasurer extends React.Component<Record<any, any>> {\n    _line: HTMLDivElement | null | undefined;\n\n    measureLineHeight(): number {\n        if (!this._line) {\n            return 0;\n        }\n\n        return this._line.clientHeight;\n    }\n\n    render(): React.ReactNode {\n        return (\n            <div className={css(styles.measurer)} aria-hidden=\"true\">\n                <div ref={(ref) => (this._line = ref)} className=\"paragraph\">\n                    Line Height Measurement\n                </div>\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    measurer: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        visibility: \"hidden\",\n        // keep from blocking text selection\n        zIndex: -1,\n    },\n});\n\ntype UserInput = null;\n\ntype Rubric = PerseusPassageWidgetOptions;\n\n// The result of the `transform` function (end of this file)\ntype RenderProps = {\n    passageTitle: PerseusPassageWidgetOptions[\"passageTitle\"];\n    passageText: PerseusPassageWidgetOptions[\"passageText\"];\n    footnotes: PerseusPassageWidgetOptions[\"footnotes\"];\n    showLineNumbers: PerseusPassageWidgetOptions[\"showLineNumbers\"];\n};\n\ntype FindWidgetsCallback = (id: string, widgetInfo: WidgetInfo) => boolean;\n\ntype PassageProps = ChangeableProps &\n    WidgetProps<RenderProps, Rubric> & {\n        findWidgets: (arg1: FindWidgetsCallback) => ReadonlyArray<Passage>;\n        highlights: SerializedHighlightSet;\n    };\n\ntype DefaultPassageProps = {\n    passageTitle: PassageProps[\"passageTitle\"];\n    passageText: PassageProps[\"passageText\"];\n    footnotes: PassageProps[\"footnotes\"];\n    showLineNumbers: PassageProps[\"showLineNumbers\"];\n    highlights: PassageProps[\"highlights\"];\n    linterContext: PassageProps[\"linterContext\"];\n};\n\ntype PassageState = {\n    nLines: number | null | undefined;\n    startLineNumbersAfter: number;\n    stylesAreApplied: boolean;\n};\n\n// Information about a passage reference, used in inter-widgets.\nexport type Reference = {\n    startLine: number;\n    endLine: number;\n    content: string | null | undefined;\n};\n\nexport class Passage extends React.Component<PassageProps, PassageState> {\n    _contentRef: HTMLDivElement | null | undefined;\n    _lineHeightMeasurerRef: LineHeightMeasurer | null | undefined;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_onResize' has no initializer and is not definitely assigned in the constructor.\n    _onResize: () => Record<any, any>;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_stylesAppiedTimer' has no initializer and is not definitely assigned in the constructor.\n    _stylesAppiedTimer: number;\n\n    static defaultProps: DefaultPassageProps = {\n        passageTitle: \"\",\n        passageText: \"\",\n        footnotes: \"\",\n        showLineNumbers: true,\n        highlights: {},\n        linterContext: linterContextDefault,\n    };\n\n    state: PassageState = {\n        nLines: null,\n        startLineNumbersAfter: 0,\n        stylesAreApplied: false,\n    };\n\n    componentDidMount() {\n        this._updateState();\n\n        // @ts-expect-error [FEI-5003] - TS2322 - Type '(() => void) & Cancelable' is not assignable to type '() => Record<any, any>'.\n        this._onResize = _.throttle(() => {\n            // If we're rendering JIPT text, we won't have line numbers or a\n            // line height measurer, so skip handling this resize.\n            if (this.shouldRenderJipt()) {\n                return;\n            }\n\n            // Remeasure the line height on resize, because the only line\n            // height changes we expect are subpixel changes when the user\n            // zooms in/out, and the only way to listen for zoom events is to\n            // listen for resize events.\n            this._lineHeightMeasurerRef?.measureLineHeight();\n            this._updateState();\n        }, 500);\n        window.addEventListener(\"resize\", this._onResize);\n\n        // Wait for Aphrodite styles (which are guaranteed to apply after one\n        // tick), then set state.\n        //\n        // This flag is used to set the `enabled` prop of the\n        // `HighlightableContent` component. That way, we only show highlights\n        // once styles are ready, and they're measured with the correct\n        // position.\n        //\n        // HACK(mdr): It's not really the Passage's Aphrodite styles that are\n        //     causing bad measures, but more so the Khan Academy Test Prep\n        //     app's Aphrodite styles. We would ideally instead offer the\n        //     embedding application an API to signal that the app's layout has\n        //     changed in a way that affects the Renderer... but, for now, just\n        //     hardcode this hack into here.\n        // TODO(somewhatabstract): Use WB timing\n        // eslint-disable-next-line no-restricted-syntax\n        this._stylesAppiedTimer = window.setTimeout(() => {\n            this.setState({stylesAreApplied: true});\n        }, 0);\n    }\n\n    shouldComponentUpdate(\n        nextProps: PassageProps,\n        nextState: PassageState,\n    ): any | boolean {\n        return (\n            !_.isEqual(this.props, nextProps) ||\n            !_.isEqual(this.state, nextState)\n        );\n    }\n\n    componentDidUpdate() {\n        this._updateState();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this._onResize);\n        // eslint-disable-next-line no-restricted-syntax\n        clearTimeout(this._stylesAppiedTimer);\n    }\n\n    _handleSerializedHighlightsUpdate: (\n        serializedHighlights: SerializedHighlightSet,\n    ) => void = (serializedHighlights: SerializedHighlightSet) => {\n        this.props.onChange({highlights: serializedHighlights});\n    };\n\n    /**\n     * Line numbering\n     *\n     * These functions support passage line numbering, which is non-trivial\n     * because we manually measure lines to support resizing as well as\n     * continuing line numbers from previous passages.\n     */\n\n    _updateState() {\n        // If we're rendering JIPT text, we're not rendering line numbers so we\n        // don't need to update this state.\n        if (this.shouldRenderJipt()) {\n            return;\n        }\n\n        this.setState({\n            nLines: this._measureLines(),\n            startLineNumbersAfter: this._getInitialLineNumber(),\n        });\n    }\n\n    _measureLines(): number {\n        const renderer = ReactDOM.findDOMNode(this._contentRef);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'height' does not exist on type 'JQueryStatic'.\n        const contentsHeight: number = $(renderer).height();\n        const lineHeight = this._getLineHeight();\n        const nLines = Math.round(contentsHeight / lineHeight);\n        return nLines;\n    }\n\n    _getInitialLineNumber(): number {\n        let isPassageBeforeThisPassage = true;\n        const passagesBeforeUs = this.props.findWidgets((id, widgetInfo) => {\n            if (widgetInfo.type !== \"passage\") {\n                return false;\n            }\n            if (id === this.props.widgetId) {\n                isPassageBeforeThisPassage = false;\n            }\n            return isPassageBeforeThisPassage;\n        });\n\n        return passagesBeforeUs\n            .map((passageWidget) => {\n                return passageWidget.getLineCount();\n            })\n            .reduce((a, b) => a + b, 0);\n    }\n\n    _getLineHeight(): number {\n        return this._lineHeightMeasurerRef?.measureLineHeight() || 0;\n    }\n\n    getLineCount(): number {\n        if (this.state.nLines != null) {\n            return this.state.nLines;\n        }\n        return this._measureLines();\n    }\n\n    /**\n     * Passage refs\n     *\n     * These are functions to support the passage refs inter-widgets feature\n     * where other widgets can fetch the line numbers of a reference inside of\n     * a passage.\n     *\n     * todo(matthewc): The refs are created by PassageMarkdown's refStart and refEnd,\n     * somehow bubbling up to Passage's `this.refs`. This runs against\n     * current best practices for refs by using string refs, but also\n     * by breaking our expectation of explicit data flow.\n     */\n\n    _getStartRefLineNumber(referenceNumber: number): number | null | undefined {\n        const refRef = PassageMarkdown.START_REF_PREFIX + referenceNumber;\n        const ref = this.refs[refRef];\n        if (!ref) {\n            return null;\n        }\n\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $ref = $(ReactDOM.findDOMNode(ref));\n        // We really care about the first text after the ref, not the\n        // ref element itself:\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'next' does not exist on type 'JQueryStatic'.\n        let $refText = $ref.next();\n        if ($refText.length === 0) {\n            // But if there are no elements after the ref, just\n            // use the ref itself.\n            $refText = $ref;\n        }\n        const vPos = $refText.offset().top;\n\n        return (\n            this.state.startLineNumbersAfter +\n            1 +\n            this._convertPosToLineNumber(vPos)\n        );\n    }\n\n    _getEndRefLineNumber(referenceNumber: number): number | null | undefined {\n        const refRef = PassageMarkdown.END_REF_PREFIX + referenceNumber;\n        const ref = this.refs[refRef];\n        if (!ref) {\n            return null;\n        }\n\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $ref = $(ReactDOM.findDOMNode(ref));\n        // We really care about the last text before the ref, not the\n        // ref element itself:\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'prev' does not exist on type 'JQueryStatic'.\n        let $refText = $ref.prev();\n        if ($refText.length === 0) {\n            // But if there are no elements before the ref, just\n            // use the ref itself.\n            $refText = $ref;\n        }\n        const height: number = $refText.height();\n        const vPos: number = $refText.offset().top;\n\n        let line = this._convertPosToLineNumber(vPos + height);\n        if (height === 0) {\n            // If the element before the end ref span was the start\n            // ref span, it might have 0 height. This is obviously not\n            // the intended use case, but we should handle it gracefully.\n            // If this is the case, then the \"bottom\" of our element is\n            // actually the top of the line we're on, so we need to add\n            // one to the line number.\n            line += 1;\n        }\n\n        return this.state.startLineNumbersAfter + line;\n    }\n\n    _convertPosToLineNumber(absoluteVPos: number): number {\n        const content = ReactDOM.findDOMNode(this._contentRef);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'offset' does not exist on type 'JQueryStatic'.\n        const relativeVPos = absoluteVPos - $(content).offset().top;\n        const lineHeight = this._getLineHeight();\n\n        const line = Math.round(relativeVPos / lineHeight);\n        return line;\n    }\n\n    _getRefContent(referenceNumber: number): string | null | undefined {\n        const refRef = PassageMarkdown.START_REF_PREFIX + referenceNumber;\n        const ref = this.refs[refRef];\n        if (!ref) {\n            return null;\n        }\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getRefContent' does not exist on type 'ReactInstance'.\n        return ref.getRefContent();\n    }\n\n    getReference(referenceNumber: number): Reference | null | undefined {\n        const refStartLine = this._getStartRefLineNumber(referenceNumber);\n        const refEndLine = this._getEndRefLineNumber(referenceNumber);\n        if (refStartLine == null || refEndLine == null) {\n            return null;\n        }\n        const refContent = this._getRefContent(referenceNumber);\n\n        return {\n            startLine: refStartLine,\n            endLine: refEndLine,\n            content: refContent,\n        };\n    }\n\n    /**\n     * Misc functions\n     *\n     * These are misc widget functions used for the widget API\n     */\n\n    getUserInput(): UserInput {\n        return null;\n    }\n\n    simpleValidate(rubric: Rubric): PerseusScore {\n        return Passage.validate(this.getUserInput(), rubric);\n    }\n\n    /* eslint-disable react/sort-comp */\n    static validate(state: UserInput, rubric: Rubric): PerseusScore {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n    /* eslint-enable react/sort-comp */\n\n    /**\n     * Rendering\n     *\n     * Functions to render the passage widget.\n     */\n\n    _renderInstructions(parseState: ParseState): React.ReactElement<any> {\n        const firstQuestionNumber = parseState.firstQuestionRef;\n        const firstSentenceRef = parseState.firstSentenceRef;\n\n        let instructions = \"\";\n        if (firstQuestionNumber) {\n            instructions += i18n._(\n                \"The symbol %(questionSymbol)s indicates that question \" +\n                    \"%(questionNumber)s references this portion of the \" +\n                    \"passage.\",\n                {\n                    questionSymbol: \"[[\" + firstQuestionNumber + \"]]\",\n                    questionNumber: firstQuestionNumber,\n                },\n            );\n        }\n        if (firstSentenceRef) {\n            instructions += i18n._(\n                \" The symbol %(sentenceSymbol)s indicates that the \" +\n                    \"following sentence is referenced in a question.\",\n                {\n                    sentenceSymbol: \"[\" + firstSentenceRef + \"]\",\n                },\n            );\n        }\n        const parsedInstructions = PassageMarkdown.parse(instructions);\n        return (\n            <div className=\"perseus-widget-passage-instructions\">\n                {PassageMarkdown.output(parsedInstructions)}\n            </div>\n        );\n    }\n\n    shouldRenderJipt(): boolean {\n        // Mostly copied from `renderer.jsx`. If we're doing JIPT, we want to\n        // render our content differently.\n        const {JIPT} = getDependencies();\n        return JIPT.useJIPT && this.props.passageText.indexOf(\"crwdns\") !== -1;\n    }\n\n    _renderContent(parsed: Array<SingleASTNode>): React.ReactElement<any> {\n        // Wait until Aphrodite styles are applied before enabling highlights,\n        // so that we measure the correct positions.\n        const enabled = this.state.stylesAreApplied;\n\n        // Highlights are read-only in review mode.\n        const editable = !this.props.reviewModeRubric;\n        return (\n            <HighlightableContent\n                editable={editable}\n                enabled={enabled}\n                onSerializedHighlightsUpdate={\n                    this._handleSerializedHighlightsUpdate\n                }\n                serializedHighlights={this.props.highlights}\n            >\n                <div ref={(ref) => (this._contentRef = ref)}>\n                    <LineHeightMeasurer\n                        ref={(ref) => (this._lineHeightMeasurerRef = ref)}\n                    />\n                    {PassageMarkdown.output(parsed)}\n                </div>\n            </HighlightableContent>\n        );\n    }\n\n    _hasFootnotes(): boolean {\n        const rawContent = this.props.footnotes;\n        const isEmpty = /^\\s*$/.test(rawContent);\n        return !isEmpty;\n    }\n\n    _renderFootnotes(): React.ReactNode {\n        const rawContent = this.props.footnotes;\n        const parsed = PassageMarkdown.parse(rawContent);\n        return PassageMarkdown.output(parsed);\n    }\n\n    render(): React.ReactNode {\n        let lineNumbers: ReadonlyArray<React.ReactNode>;\n        const nLines = this.state.nLines;\n        if (this.props.showLineNumbers && nLines) {\n            // lineN is the line number in the current passage\n            // lineAt is the actual line number across multiple passages\n            lineNumbers = _.range(1, nLines + 1).map((lineN) => {\n                const lineAt = lineN + this.state.startLineNumbersAfter;\n                if (lineAt === 4) {\n                    // we leave a space in i18n to disambiguate translations, see TP-5392\n                    // I18N: a label next to a reading passage to denote the line number\n                    const translatedLine = i18n._(\"Line \");\n                    return (\n                        <span key=\"line-marker\" className=\"line-marker\">\n                            {translatedLine}\n                        </span>\n                    );\n                }\n                return <span key={lineN}>{lineAt}</span>;\n            });\n        }\n\n        const parseState: ParseState = PassageMarkdown.getInitialParseState();\n\n        // Replace the vertical double quote characters quoting text with\n        // an unicode left and right double quote characters. This would\n        // avoid rendering right or left unicode double quotes on both\n        // ends of a sentence wrapped by double quotes.\n        const re = /(\"{1})([^\"]*)(\"{1})/g;\n        const doubleQuoteParsedContent = this.props.passageText.replace(\n            re,\n            \"\\u201c$2\\u201d\",\n        );\n        const parsedContent = PassageMarkdown.parse(\n            doubleQuoteParsedContent,\n            parseState,\n        );\n        // Check if the title has any non-empty text in it.\n        const hasTitle = /\\S/.test(this.props.passageTitle);\n\n        return (\n            <div>\n                <div className=\"perseus-widget-passage-container\">\n                    {this._renderInstructions(parseState)}\n                    <div className=\"perseus-widget-passage\">\n                        {hasTitle && (\n                            <h3 className=\"passage-title\">\n                                <Renderer\n                                    content={this.props.passageTitle}\n                                    linterContext={this.props.linterContext}\n                                />\n                            </h3>\n                        )}\n                        {/* @ts-expect-error [FEI-5003] - TS2454 - Variable 'lineNumbers' is used before being assigned. */}\n                        {lineNumbers && (\n                            <div className=\"line-numbers\" aria-hidden={true}>\n                                {lineNumbers}\n                            </div>\n                        )}\n                        {!hasTitle && (\n                            <h3 className=\"perseus-sr-only\">\n                                {i18n._(\"Beginning of reading passage.\")}\n                            </h3>\n                        )}\n                        <div className=\"passage-text\">\n                            {this.shouldRenderJipt() ? (\n                                // If we're in JIPT mode, just pass off our\n                                // content to a <Renderer /> which knows how\n                                // to handle rendering JIPT text.\n                                <Renderer content={this.props.passageText} />\n                            ) : (\n                                this._renderContent(parsedContent)\n                            )}\n                        </div>\n                        {this._hasFootnotes() && [\n                            <h4\n                                key=\"footnote-start\"\n                                className=\"perseus-sr-only\"\n                            >\n                                {i18n._(\n                                    \"Beginning of reading passage footnotes.\",\n                                )}\n                            </h4>,\n                            <div key=\"footnotes\" className=\"footnotes\">\n                                {this._renderFootnotes()}\n                            </div>,\n                        ]}\n                        <div className=\"perseus-sr-only\">\n                            {i18n._(\"End of reading passage.\")}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default {\n    name: \"passage\",\n    displayName: \"Passage (SAT only)\",\n    widget: Passage,\n    transform: (editorProps: any): RenderProps => {\n        return _.pick(\n            editorProps,\n            \"passageTitle\",\n            \"passageText\",\n            \"footnotes\",\n            \"showLineNumbers\",\n        );\n    },\n    isLintable: true,\n} as WidgetExports<typeof Passage>;\n","import {\n    linterContextProps,\n    linterContextDefault,\n} from \"@khanacademy/perseus-linter\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport * as Changeable from \"../mixins/changeable\";\nimport WidgetJsonifyDeprecated from \"../mixins/widget-jsonify-deprecated\";\nimport Renderer from \"../renderer\";\n\nimport type {WidgetExports} from \"../types\";\n\nclass PassageRefTarget extends React.Component<any> {\n    static propTypes = {\n        ...Changeable.propTypes,\n        content: PropTypes.string,\n        linterContext: linterContextProps,\n    };\n\n    static defaultProps: any = {\n        content: \"\",\n        linterContext: linterContextDefault,\n    };\n\n    static validate(state: any, rubric: any): any {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n\n    getUserInput: () => any = () => {\n        return WidgetJsonifyDeprecated.getUserInput.call(this);\n    };\n\n    change: (arg1: any, arg2: any, arg3: any) => any = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        return PassageRefTarget.validate(this.getUserInput(), rubric);\n    };\n\n    render(): React.ReactNode {\n        return (\n            <Renderer\n                content={this.props.content}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type '{ content: any; inline: boolean; apiOptions: any; linterContext: any; }' is not assignable to type 'IntrinsicAttributes & IntrinsicClassAttributes<Renderer> & Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"children\" | ... 3 more ... | \"legacyPerseusLint\"> & InexactPartial<...> & InexactPartial<...>'.\n                inline={true}\n                apiOptions={this.props.apiOptions}\n                linterContext={this.props.linterContext}\n            />\n        );\n    }\n}\n\nexport default {\n    name: \"passage-ref-target\",\n    displayName: \"PassageRefTarget\",\n    defaultAlignment: \"inline\",\n    widget: PassageRefTarget,\n    hidden: true,\n    transform: (editorProps: any): any => {\n        return _.pick(editorProps, \"content\");\n    },\n    version: {major: 0, minor: 0},\n    isLintable: true,\n} as WidgetExports<typeof PassageRefTarget>;\n","/* eslint-disable @babel/no-invalid-this, @typescript-eslint/no-unused-vars, one-var, react/no-unsafe, react/sort-comp */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport $ from \"jquery\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport Interactive2 from \"../interactive2\";\nimport WrappedLine from \"../interactive2/wrapped-line\";\nimport {ClassNames as ApiClassNames} from \"../perseus-api\";\nimport Util from \"../util\";\nimport KhanColors from \"../util/colors\";\nimport GraphUtils from \"../util/graph-utils\";\nimport KhanMath from \"../util/math\";\n\nimport type {WidgetExports} from \"../types\";\n\nconst {deepEq} = Util;\n\nconst BAR = \"bar\",\n    LINE = \"line\",\n    PIC = \"pic\",\n    HISTOGRAM = \"histogram\",\n    DOTPLOT = \"dotplot\";\n\nconst widgetPropTypes = {\n    type: PropTypes.oneOf([BAR, LINE, PIC, HISTOGRAM, DOTPLOT]),\n    labels: PropTypes.arrayOf(PropTypes.string),\n    categories: PropTypes.arrayOf(\n        PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    ),\n\n    scaleY: PropTypes.number,\n    maxY: PropTypes.number,\n    snapsPerLine: PropTypes.number,\n\n    picSize: PropTypes.number,\n    pixBoxHeight: PropTypes.number,\n    picUrl: PropTypes.string,\n\n    plotDimensions: PropTypes.arrayOf(PropTypes.number),\n    labelInterval: PropTypes.number,\n    starting: PropTypes.arrayOf(PropTypes.number),\n    static: PropTypes.bool,\n} as const;\n\nclass Plotter extends React.Component<any, any> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'shouldSetupGraphie' has no initializer and is not definitely assigned in the constructor.\n    shouldSetupGraphie: boolean;\n    _isMounted = false;\n    horizHairline: any;\n    hairlineRange: any;\n    graphie: any;\n\n    static propTypes = {\n        onChange: PropTypes.func.isRequired,\n        trackInteraction: PropTypes.func.isRequired,\n        // TODO(alex): Figure out why lint chokes on this line\n        // ...widgetPropTypes,\n    };\n\n    static defaultProps: any = {\n        type: BAR,\n        labels: [\"\", \"\"],\n        categories: [\"\"],\n\n        scaleY: 1,\n        maxY: 10,\n        snapsPerLine: 2,\n\n        picSize: 40,\n        picBoxHeight: 48,\n        picUrl: \"\",\n\n        plotDimensions: [380, 300],\n        labelInterval: 1,\n    };\n\n    state: any = {\n        values: this.props.starting || [1],\n\n        // The measured rendered height of category strings. Used to calculate\n        // bottom padding of plot, to prevent categories from overlapping the\n        // bottom label.\n        categoryHeights: {},\n    };\n\n    DOT_PLOT_POINT_SIZE: () => number = () => {\n        return this.props.apiOptions.isMobile ? 6 : 4;\n    };\n\n    DOT_PLOT_POINT_PADDING: () => number = () => {\n        return 8;\n    };\n\n    DOT_TICK_POINT_SIZE: () => number = () => {\n        return 2;\n    };\n\n    render(): React.ReactNode {\n        // TODO(kevinb) actually compute the size of the graphie correctly and\n        // make it that size so we don't have to add extra padding.  The value\n        // was determined by eye-balling the layout.  :(\n        const paddingForBottomLabel = 75;\n        const style = {\n            marginBottom: this.props.labels[0] ? paddingForBottomLabel : 0,\n        } as const;\n\n        return (\n            <div\n                className={\n                    \"perseus-widget-plotter graphie \" +\n                    ApiClassNames.INTERACTIVE\n                }\n                // eslint-disable-next-line react/no-string-refs\n                ref=\"graphieDiv\"\n                style={style}\n            />\n        );\n    }\n\n    componentDidUpdate(prevProps: any, prevState: any) {\n        this.shouldSetupGraphie =\n            this.shouldSetupGraphie ||\n            !_.isEqual(this.state.categoryHeights, prevState.categoryHeights);\n\n        if (this.shouldSetupGraphie) {\n            this.setupGraphie(prevState);\n        }\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        this.setupGraphie(this.state);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: any) {\n        const props = [\n            \"type\",\n            \"labels\",\n            \"categories\",\n            \"scaleY\",\n            \"maxY\",\n            \"snapsPerLine\",\n            \"picUrl\",\n            \"labelInterval\",\n            \"static\",\n        ];\n\n        this.shouldSetupGraphie = _.any(\n            props,\n            function (prop) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                return !_.isEqual(this.props[prop], nextProps[prop]);\n            },\n            this,\n        );\n\n        if (\n            !_.isEqual(this.props.starting, nextProps.starting) &&\n            !_.isEqual(this.state.values, nextProps.starting)\n        ) {\n            this.shouldSetupGraphie = true;\n            this.setState({values: nextProps.starting});\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    setupGraphie: (arg1: any) => void = (prevState) => {\n        const self = this;\n        self.shouldSetupGraphie = false;\n        const graphieDiv = ReactDOM.findDOMNode(self.refs.graphieDiv);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call. | TS2339 - Property 'empty' does not exist on type 'JQueryStatic'.\n        $(graphieDiv).empty();\n        const graphie = GraphUtils.createGraphie(graphieDiv);\n\n        // TODO(jakesandlund): It's not the react way to hang\n        // something off the component object, but since graphie\n        // is outside React, it makes it easier to do this.\n        self.graphie = graphie;\n        self.graphie.pics = [];\n        self.graphie.dotTicks = [];\n\n        const isBar = self.props.type === BAR,\n            isLine = self.props.type === LINE,\n            isPic = self.props.type === PIC,\n            isHistogram = self.props.type === HISTOGRAM,\n            isDotplot = self.props.type === DOTPLOT;\n\n        const isTiledPlot = isPic || isDotplot;\n\n        const config: Record<string, any> = {};\n        const c = config; // c for short\n\n        const isMobile = this.props.apiOptions.isMobile;\n\n        c.graph = {\n            lines: [],\n            bars: [],\n            points: [],\n            dividers: [],\n        };\n        c.scaleY = self.props.scaleY;\n        c.dimX = self.props.categories.length;\n        const plotDimensions = isMobile\n            ? [288, 336]\n            : self.props.plotDimensions;\n        if (isLine) {\n            // Subtracting 0.2 makes line have equal padding on each side\n            c.dimX += isMobile ? -0.2 : 1;\n        } else if (isHistogram) {\n            c.barPad = 0;\n            c.barWidth = 1;\n        } else if (isBar) {\n            c.barPad = isMobile ? 0.08 : 0.15;\n            c.barWidth = 1 - 2 * c.barPad;\n            c.dimX += (isMobile ? -2 : 2) * c.barPad;\n        } else if (isTiledPlot) {\n            c.picBoxHeight = self.props.picBoxHeight;\n            c.picBoxWidthPx = plotDimensions[0] / self.props.categories.length;\n            const picPadAllWidth = plotDimensions[0] - c.dimX * c.picBoxWidthPx;\n            c.picPad = picPadAllWidth / (2 * c.dimX + 2);\n            const picFullWidth = c.picBoxWidthPx + 2 * c.picPad;\n\n            // Convert from px to \"unscaled\"\n            c.picPad = c.picPad / picFullWidth;\n            c.picBoxWidth = c.picBoxWidthPx / picFullWidth;\n            c.dimX += 2 * c.picPad;\n        }\n\n        if (isDotplot) {\n            c.picBoxHeight =\n                this.DOT_PLOT_POINT_SIZE() * 2 + this.DOT_PLOT_POINT_PADDING();\n        }\n\n        c.dimY = Math.ceil(self.props.maxY / c.scaleY) * c.scaleY;\n\n        let padX = 25;\n\n        if ((isBar || isLine) && isMobile) {\n            padX = self.props.labels[1].length !== 0 ? 17 : 11;\n        }\n\n        // Since dotplot doesn't have an axis along the left it looks weird\n        // with the same padding as the others\n        if (isDotplot) {\n            padX /= 2;\n        }\n\n        if (isMobile && isTiledPlot && self.props.labels[1].length === 0) {\n            padX = 0;\n        }\n\n        // Default vertical padding.\n        let padTop = 25;\n        let padBottom = 25 * 3;\n\n        // TODO(michaelpolyak): Handle other plot types: Dot, Histogram, Line.\n        if (isMobile && (isBar || isTiledPlot)) {\n            const maxCategoryHeight = Math.max(\n                0,\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'unknown' is not assignable to parameter of type 'number'.\n                ...Object.values(self.state.categoryHeights),\n            );\n\n            if (maxCategoryHeight) {\n                // Account for bottom label position, height.\n                let offsetY = 25;\n\n                if (isTiledPlot) {\n                    // Tiled plot categories have additional spacing.\n                    offsetY += 10;\n                }\n\n                padBottom = offsetY + maxCategoryHeight;\n            }\n        }\n\n        if (isMobile) {\n            c.scale = [\n                // We multiply pad by 4 because we add 3*pad padding on the left\n                // and 1*pad on the right\n                (plotDimensions[0] - padX * 4) / c.dimX,\n                (plotDimensions[1] - (padTop + padBottom)) / c.dimY,\n            ];\n        } else {\n            c.scale = _.map([c.dimX, c.dimY], function (dim, i) {\n                return plotDimensions[i] / dim;\n            });\n        }\n\n        if (isTiledPlot) {\n            c.scale[1] = c.picBoxHeight / c.scaleY;\n        }\n\n        // Transform from screen space (pixels) to plot space.\n        padX /= c.scale[0];\n        padTop /= c.scale[1];\n        padBottom /= c.scale[1];\n\n        graphie.init({\n            range: [\n                [-3 * padX, c.dimX + padX],\n                [-padBottom, c.dimY + padTop],\n            ],\n            scale: c.scale,\n            isMobile: this.props.apiOptions.isMobile,\n        });\n        graphie.addMouseLayer({\n            allowScratchpad: true,\n            setDrawingAreaAvailable:\n                this.props.apiOptions.setDrawingAreaAvailable,\n        });\n\n        if (!isTiledPlot) {\n            // If we have isMobile, we skip the 0 label.\n            const initialY = isMobile ? c.scaleY : 0;\n            for (let y = initialY; y <= c.dimY; y += c.scaleY) {\n                graphie.label(\n                    [0, y],\n                    KhanMath.roundToApprox(y, 2),\n                    \"left\",\n                    /* isTeX */ true /* for the \\approx symbol */,\n                );\n                graphie.style(\n                    {\n                        stroke: isMobile ? \"#e9ebec\" : \"#000\",\n                        strokeWidth: 1,\n                        opacity: isMobile ? 1 : 0.3,\n                    },\n                    function () {\n                        graphie.line([0, y], [c.dimX, y]);\n                    },\n                );\n            }\n        }\n\n        if ((isBar || isLine) && isMobile) {\n            self.graphie.dragPrompt = graphie\n                .label(\n                    [c.dimX / 2, c.dimY / 2],\n                    i18n._(\"Drag handles to make graph\"),\n                    \"center\",\n                    false,\n                )\n                .css(\"font-weight\", \"bold\")\n                .css(\"color\", KhanColors.KA_GREEN)\n                .css(\"display\", \"none\");\n        }\n\n        self.setupCategories(config);\n\n        if (isTiledPlot && isMobile) {\n            self.graphie.dotPrompt = graphie\n                .label(\n                    [c.dimX / 2, c.dimY / 2],\n                    i18n._(\"Tap to add points\"),\n                    \"center\",\n                    false,\n                )\n                .css(\"font-weight\", \"bold\")\n                .css(\"color\", KhanColors.KA_GREEN)\n                .css(\"display\", \"none\");\n        }\n\n        if (isTiledPlot) {\n            self.drawPicHeights(self.state.values, prevState.values);\n        }\n\n        graphie.style(\n            {stroke: \"#000\", strokeWidth: 2, opacity: 1.0},\n            function () {\n                if (isTiledPlot) {\n                    if (isDotplot) {\n                        // Dotplot is a subtype of tiled plot, here we only draw\n                        // the x-axis\n                        graphie.style(\n                            {\n                                stroke: isMobile ? KhanColors.GRAY_G : \"#000\",\n                                strokeWidth: isMobile ? 1 : 2,\n                            },\n                            () =>\n                                graphie.line(\n                                    [isMobile ? 0 : 0.5, 0],\n                                    [c.dimX - (isMobile ? 0 : 0.5), 0],\n                                ),\n                        );\n                    } else {\n                        graphie.line([0, 0], [c.dimX, 0]);\n\n                        // Draw the left axis for non-dotplots\n                        if (self.props.labels[1].length !== 0 || !isMobile) {\n                            graphie.style(\n                                {\n                                    stroke: isMobile\n                                        ? KhanColors.GRAY_G\n                                        : \"#000\",\n                                    strokeWidth: isMobile ? 1 : 2,\n                                },\n                                () => graphie.line([0, 0], [0, c.dimY]),\n                            );\n                        }\n                    }\n                } else {\n                    // Draw normal axes\n                    graphie.style(\n                        {\n                            stroke: isMobile ? KhanColors.GRAY_G : \"#000\",\n                            strokeWidth: isMobile ? 1 : 2,\n                        },\n                        () =>\n                            graphie.line(\n                                [isMobile ? -padX * 3 : 0, 0],\n                                [c.dimX + (isMobile ? padX : 0), 0],\n                            ),\n                    );\n\n                    if (!((isBar || isLine) && isMobile)) {\n                        graphie.style(\n                            {\n                                stroke: isMobile ? KhanColors.GRAY_G : \"#000\",\n                                strokeWidth: isMobile ? 1 : 2,\n                            },\n                            () => graphie.line([0, 0], [0, c.dimY]),\n                        );\n                    }\n                }\n            },\n        );\n\n        graphie\n            .label(\n                [c.dimX / 2, isMobile ? -padBottom : -35 / c.scale[1]],\n                self.props.labels[0],\n                isMobile ? \"above\" : \"below\",\n                false,\n            )\n            .css(\"font-weight\", \"bold\")\n            .css(\"color\", isMobile && KhanColors.GRAY_F);\n\n        graphie\n            .label(\n                [(isMobile ? -35 : -60) / c.scale[0], c.dimY / 2],\n                self.props.labels[1],\n                \"center\",\n                false,\n            )\n            .css(\"font-weight\", \"bold\")\n            .css(\"color\", isMobile && KhanColors.GRAY_F)\n            .addClass(\"rotate\");\n\n        if (this.props.apiOptions.isMobile) {\n            this.horizHairline = new WrappedLine(this.graphie, [0, 0], [0, 0], {\n                normalStyle: {\n                    strokeWidth: 1,\n                },\n            });\n\n            this.horizHairline.attr({\n                stroke: KhanColors.INTERACTIVE,\n            });\n            this.horizHairline.hide();\n\n            this.hairlineRange = [\n                [0, c.dimX],\n                [0, c.dimY],\n            ];\n        }\n    };\n\n    showHairlines: (arg1: any) => void = (point) => {\n        if (this.props.apiOptions.isMobile && this.props.markings !== \"none\") {\n            // Hairlines are already initialized when the graph is loaded, so\n            // here we just move them to the updated location and make them\n            // visible.\n            this.horizHairline.moveTo(\n                [this.hairlineRange[0][0], point[1]],\n                [this.hairlineRange[0][1], point[1]],\n            );\n\n            this.horizHairline.show();\n        }\n    };\n\n    hideHairlines: () => void = () => {\n        if (this.props.apiOptions.isMobile) {\n            this.horizHairline.hide();\n        }\n    };\n\n    labelCategory: (arg1: any, arg2: any) => Promise<any> = (x, category) => {\n        const isMobile = this.props.apiOptions.isMobile;\n\n        const graphie = this.graphie;\n        category = category + \"\";\n        let isTeX = false;\n        const mathyCategory = category.match(/^\\$(.*)\\$$/);\n        if (mathyCategory) {\n            category = mathyCategory[1];\n            isTeX = true;\n        }\n\n        const translateX = 5;\n        const rotationDeg = 45;\n        const rotationRad = rotationDeg * (Math.PI / 180);\n\n        const labelRotation =\n            `translateX(-50%) translateX(${translateX}px) ` +\n            `translateY(-50%) rotate(-${rotationDeg}deg)`;\n\n        const shouldRotate = isMobile && !mathyCategory;\n\n        // We return a promise that will resolve to measured category height.\n        return new Promise((resolve) => {\n            graphie.style(\n                {\n                    color: isMobile ? KhanColors.GRAY_G : \"inherit\",\n                    transform: shouldRotate ? labelRotation : \"none\",\n                    transformOrigin: \"100%\",\n                },\n                () => {\n                    const $span = graphie.label(\n                        [x, isMobile ? -0.5 : 0],\n                        category,\n                        \"below\",\n                        isTeX,\n                    );\n\n                    const height =\n                        // Additional padding is applied by style.\n                        14 +\n                        (shouldRotate\n                            ? Math.round(\n                                  $span.height() * Math.cos(rotationRad) +\n                                      ($span.width() + translateX) *\n                                          Math.sin(rotationRad),\n                              )\n                            : $span.height());\n\n                    resolve({category, height});\n                },\n            );\n        });\n    };\n\n    setupCategories: (arg1: any) => void = (config) => {\n        const self = this;\n        const c = config;\n        const graphie = self.graphie;\n\n        const isMobile = this.props.apiOptions.isMobile;\n\n        // The deferred measurements returned from `labelCategory`.\n        const categoryHeightPromises = [];\n\n        if (self.props.type === HISTOGRAM) {\n            // Histograms with n labels/categories have n - 1 buckets\n            _.times(self.props.categories.length - 1, function (i) {\n                self.setupBar({\n                    index: i,\n                    startHeight: self.state.values[i],\n                    config: config,\n                    isHistogram: true,\n                });\n            });\n\n            // Label categories\n            _.each(self.props.categories, function (category, i) {\n                const x = 0.5 + i * c.barWidth;\n\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Promise<any>' is not assignable to parameter of type 'never'.\n                categoryHeightPromises.push(self.labelCategory(x, category));\n                const tickHeight = 6 / c.scale[1];\n                graphie.style(\n                    {\n                        stroke: \"#000\",\n                        strokeWidth: isMobile ? 1 : 2,\n                        opacity: 1.0,\n                    },\n                    function () {\n                        graphie.line([x, -tickHeight], [x, 0]);\n                    },\n                );\n            });\n        } else {\n            _.each(self.props.categories, function (category, i) {\n                const startHeight = self.state.values[i];\n                let x;\n\n                if (self.props.type === BAR) {\n                    x = self.setupBar({\n                        index: i,\n                        startHeight: startHeight,\n                        config: config,\n                        isHistogram: false,\n                    });\n                } else if (self.props.type === LINE) {\n                    x = self.setupLine(i, startHeight, config);\n                } else if (self.props.type === PIC) {\n                    x = self.setupPic(i, config);\n                } else if (self.props.type === DOTPLOT) {\n                    x = self.setupDotplot(i, config);\n                }\n\n                let tickStart = 0;\n                let tickEnd = -6 / c.scale[1];\n\n                if (self.props.type === DOTPLOT && !isMobile) {\n                    tickStart = -tickEnd;\n                }\n\n                if (self.props.type === DOTPLOT) {\n                    // Dotplot lets you specify to only show labels every 'n'\n                    // ticks. It also looks nicer if it makes the labelled\n                    // ticks a bit bigger.\n                    if (\n                        i % self.props.labelInterval === 0 ||\n                        i === self.props.categories.length - 1\n                    ) {\n                        categoryHeightPromises.push(\n                            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Promise<any>' is not assignable to parameter of type 'never'.\n                            self.labelCategory(x, category),\n                        );\n                        tickStart *= 1.5;\n                        tickEnd *= 1.5;\n                    }\n                } else {\n                    categoryHeightPromises.push(\n                        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Promise<any>' is not assignable to parameter of type 'never'.\n                        self.labelCategory(x, category),\n                    );\n                }\n\n                graphie.style(\n                    {\n                        stroke: isMobile ? KhanColors.GRAY_G : \"#000\",\n                        strokeWidth: isMobile ? 1 : 2,\n                        opacity: 1.0,\n                    },\n                    function () {\n                        graphie.line([x, tickStart], [x, tickEnd]);\n                    },\n                );\n            });\n        }\n\n        Promise.all(categoryHeightPromises).then((measurements) => {\n            if (self._isMounted) {\n                const categoryHeights: Record<string, any> = {};\n\n                measurements.forEach(\n                    ({category, height}) =>\n                        (categoryHeights[category] = height),\n                );\n\n                self.setState({categoryHeights});\n            }\n        });\n    };\n\n    _clampValue: (arg1: number, arg2: number, arg3: number) => number = (\n        v,\n        min,\n        max,\n    ) => {\n        return Math.max(Math.min(v, max), min);\n    };\n\n    _maybeShowDragPrompt: () => void = () => {\n        // The drag prompt is only added on certain types of plots.\n        if (this.graphie.dragPrompt != null) {\n            this.graphie.dragPrompt[0].style.display = \"inline\";\n        }\n    };\n\n    _maybeHideDragPrompt: () => void = () => {\n        // The drag prompt is only added on certain types of plots.\n        if (this.graphie.dragPrompt != null) {\n            this.graphie.dragPrompt[0].style.display = \"none\";\n        }\n    };\n\n    setupBar: (arg1: any) => number = (args) => {\n        const isMobile = this.props.apiOptions.isMobile;\n\n        const i = args.index;\n        const startHeight = args.startHeight;\n        const config = args.config;\n        const isHistogram = args.isHistogram;\n\n        const self = this;\n        const graphie = self.graphie;\n        const barHalfWidth = config.barWidth / 2;\n        let x;\n        if (isHistogram) {\n            x = 0.5 + i * config.barWidth + barHalfWidth;\n        } else {\n            x = (isMobile ? barHalfWidth : 0.5 + config.barPad) + i;\n        }\n\n        /**\n         * Updates the bar with given index to the given height\n         * @param i the index of the bar to update\n         * @param height the new height of the bar\n         */\n        const scaleBar = function (i: any, height) {\n            const center = graphie.scalePoint(0);\n\n            // Scale filled bucket (bar)\n            config.graph.bars[i].scale(\n                1,\n                Math.max(isMobile ? 0.2 : 0.01, height / config.scaleY),\n                center[0],\n                center[1],\n            );\n\n            if (isHistogram) {\n                // Scale dividers between buckets\n                const leftDivider = config.graph.dividers[i - 1],\n                    rightDivider = config.graph.dividers[i];\n\n                if (leftDivider) {\n                    const divHeight = Math.min(\n                        self.state.values[i - 1],\n                        height,\n                    );\n                    leftDivider.scale(\n                        1,\n                        Math.max(0.01, divHeight / config.scaleY),\n                        center[0],\n                        center[1],\n                    );\n                }\n\n                if (rightDivider) {\n                    const divHeight = Math.min(\n                        self.state.values[i + 1],\n                        height,\n                    );\n                    rightDivider.scale(\n                        1,\n                        Math.max(0.01, divHeight / config.scaleY),\n                        center[0],\n                        center[1],\n                    );\n                }\n            }\n        };\n\n        graphie.style(\n            {\n                stroke: \"none\",\n                fill: isMobile ? KhanColors.BLUE_C : KhanColors.LIGHT_BLUE,\n                opacity: 1.0,\n            },\n            function () {\n                config.graph.bars[i] = graphie.path([\n                    [x - barHalfWidth, 0],\n                    [x - barHalfWidth, config.scaleY],\n                    [x + barHalfWidth, config.scaleY],\n                    [x + barHalfWidth, 0],\n                    [x - barHalfWidth, 0],\n                ]);\n            },\n        );\n\n        if (isHistogram) {\n            if (i > 0) {\n                // Don't draw a divider to the left of the first bucket\n                graphie.style(\n                    {\n                        stroke: \"#000\",\n                        strokeWidth: 1,\n                        opacity: 0.3,\n                    },\n                    function () {\n                        config.graph.dividers.push(\n                            graphie.path([\n                                [x - barHalfWidth, 0],\n                                [x - barHalfWidth, config.scaleY],\n                            ]),\n                        );\n                    },\n                );\n            }\n        }\n\n        if (isMobile) {\n            const snap = config.scaleY / self.props.snapsPerLine;\n            config.graph.lines[i] = Interactive2.addMaybeMobileMovablePoint(\n                this,\n                {\n                    coord: [x, startHeight],\n                    constraints: [\n                        (coord: any, prev: any, options: any) => {\n                            return [\n                                x,\n                                this._clampValue(\n                                    Math.round(coord[1] / snap) * snap,\n                                    0,\n                                    config.dimY,\n                                ),\n                            ];\n                        },\n                    ],\n                    onMoveStart: function () {\n                        config.graph.bars[i].attr({\n                            fill: KhanColors.INTERACTIVE,\n                        });\n                    },\n                    onMove: function () {\n                        const y = config.graph.lines[i].coord()[1];\n\n                        const values = _.clone(self.state.values);\n                        values[i] = y;\n                        self.setState({values: values});\n                        self.changeAndTrack({values: values});\n\n                        self._maybeHideDragPrompt();\n\n                        scaleBar(i, y);\n                    },\n                    onMoveEnd: function () {\n                        config.graph.bars[i].attr({\n                            fill: KhanColors.BLUE_C,\n                        });\n                    },\n                },\n            );\n\n            // We set the z-index to 1 here so that the hairlines cover up the\n            // points\n            config.graph.lines[i].state.visibleShape.wrapper.style.zIndex = \"1\";\n\n            self._maybeShowDragPrompt();\n        } else {\n            config.graph.lines[i] = graphie.addMovableLineSegment({\n                coordA: [x - barHalfWidth, startHeight],\n                coordZ: [x + barHalfWidth, startHeight],\n                snapY: config.scaleY / self.props.snapsPerLine,\n                constraints: {\n                    constrainX: true,\n                },\n                normalStyle: {\n                    stroke: KhanColors.INTERACTIVE,\n                    // Don't display graph handles in static mode\n                    \"stroke-width\": this.props.static ? 0 : 4,\n                },\n            });\n\n            config.graph.lines[i].onMove = function (dx, dy: any) {\n                let y = this.coordA[1];\n                if (y < 0 || y > config.dimY) {\n                    y = Math.min(Math.max(y, 0), config.dimY);\n                    this.coordA[1] = this.coordZ[1] = y;\n\n                    // Snap the line back into range.\n                    this.transform();\n                }\n\n                const values = _.clone(self.state.values);\n                values[i] = y;\n                self.setState({values: values});\n                self.changeAndTrack({values: values});\n\n                scaleBar(i, y);\n            };\n        }\n\n        scaleBar(i, startHeight);\n        return x;\n    };\n\n    /**\n     * Renders a segment of an interactive line to the plotter graph\n     * @param i the index of the point to render\n     * @param startHeight the initial height of the given point\n     * @param config the graph setup, such as scale and dimensions\n     */\n    setupLine: (arg1: number, arg2: number, arg3: any) => number = (\n        i,\n        startHeight,\n        config,\n    ) => {\n        const isMobile = this.props.apiOptions.isMobile;\n\n        const self = this;\n        const c = config;\n        const graphie = self.graphie;\n        const x = i + (isMobile ? 0.4 : 1);\n\n        if (isMobile) {\n            const snap = config.scaleY / self.props.snapsPerLine;\n            c.graph.points[i] = Interactive2.addMaybeMobileMovablePoint(this, {\n                coord: [x, startHeight],\n                constraints: [\n                    (coord, prev, options: any) => {\n                        return [\n                            x,\n                            this._clampValue(\n                                Math.round(coord[1] / snap) * snap,\n                                0,\n                                config.dimY,\n                            ),\n                        ];\n                    },\n                ],\n                onMove: function () {\n                    const y = c.graph.points[i].coord()[1];\n\n                    const values = _.clone(self.state.values);\n                    values[i] = y;\n                    self.setState({values: values});\n                    self.changeAndTrack({values: values});\n\n                    self._maybeHideDragPrompt();\n                },\n            });\n\n            self._maybeShowDragPrompt();\n\n            if (i > 0) {\n                c.graph.lines[i] = Interactive2.addMovableLine(graphie, {\n                    points: [c.graph.points[i - 1], c.graph.points[i]],\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'constraints' does not exist on type '(graphie: any, movable: any, options: any) => void'.\n                    constraints: Interactive2.MovablePoint.constraints.fixed(),\n                    normalStyle: {\n                        stroke: KhanColors.BLUE_C,\n                        \"stroke-width\": 2,\n                    },\n                    highlightStyle: {\n                        stroke: KhanColors.BLUE_C,\n                        \"stroke-width\": 2,\n                    },\n                });\n            }\n        } else {\n            c.graph.points[i] = graphie.addMovablePoint({\n                coord: [x, startHeight],\n                constraints: {\n                    constrainX: true,\n                },\n                normalStyle: {\n                    fill: KhanColors.INTERACTIVE,\n                    stroke: KhanColors.INTERACTIVE,\n                },\n                snapY: c.scaleY / self.props.snapsPerLine,\n            });\n            c.graph.points[i].onMove = function (x, y) {\n                y = Math.min(Math.max(y, 0), c.dimY);\n                const values = _.clone(self.state.values);\n                values[i] = y;\n                self.setState({values: values});\n                self.changeAndTrack({values: values});\n                return [x, y];\n            };\n\n            if (i > 0) {\n                c.graph.lines[i] = graphie.addMovableLineSegment({\n                    pointA: c.graph.points[i - 1],\n                    pointZ: c.graph.points[i],\n                    constraints: {\n                        fixed: true,\n                    },\n                    normalStyle: {\n                        stroke: \"#9ab8ed\",\n                        \"stroke-width\": 2,\n                    },\n                });\n            }\n        }\n\n        return x;\n    };\n\n    setupDotplot: (arg1: any, arg2: any) => any = (i, config) => {\n        const graphie = this.graphie;\n        const isMobile = this.props.apiOptions.isMobile;\n\n        return this.setupTiledPlot(i, isMobile ? 0.5 : 1, config, (x, y) => {\n            return graphie.ellipse(\n                [x, y],\n                [\n                    this.DOT_PLOT_POINT_SIZE() / graphie.scale[0],\n                    this.DOT_PLOT_POINT_SIZE() / graphie.scale[1],\n                ],\n                {\n                    fill: KhanColors.INTERACTIVE,\n                    stroke: KhanColors.INTERACTIVE,\n                },\n            );\n        });\n    };\n\n    setupPic: (arg1: any, arg2: any) => any = (i, config) => {\n        const graphie = this.graphie;\n        return this.setupTiledPlot(i, 0, config, (x, y) => {\n            const scaledCenter = graphie.scalePoint([x, y]);\n            const size = this.props.picSize;\n            return graphie.raphael.image(\n                this.props.picUrl,\n                scaledCenter[0] - size / 2,\n                scaledCenter[1] - size / 2,\n                size,\n                size,\n            );\n        });\n    };\n\n    setupTiledPlot: (arg1: any, arg2: any, arg3: any, arg4: any) => any = (\n        i,\n        bottomMargin,\n        config,\n        createImage,\n    ) => {\n        const self = this;\n        const c = config;\n        const graphie = self.graphie;\n        const pics = graphie.pics;\n        const dotTicks = graphie.dotTicks;\n        const x = i + 0.5 + c.picPad;\n\n        // In order to make sure that manipulating the graph doesn't cause\n        // dragging, we disable touch actions for the whole mouselayer.\n        // TODO(emily): Figure out a way to turn of touch actions for only the\n        // part of the widget that can be manipulated. Putting this style\n        // directly on the rects below doesn't work.\n        graphie.mouselayer.canvas.style.touchAction = \"none\";\n\n        pics[i] = [];\n        dotTicks[i] = [];\n        const n = Math.round(c.dimY / c.scaleY) + 1;\n        _(n).times(function (j) {\n            j -= 1;\n            const midY = (j + 0.5) * c.scaleY;\n            const leftX = x - c.picBoxWidth / 2;\n            const topY = midY + 0.5 * c.scaleY;\n            const coord = graphie.scalePoint([leftX, topY + bottomMargin]);\n            const mouseRect = graphie.mouselayer.rect(\n                coord[0],\n                coord[1],\n                c.picBoxWidthPx,\n                c.picBoxHeight,\n            );\n            $(mouseRect[0])\n                .css({fill: \"#000\", opacity: 0.0, cursor: \"pointer\"})\n                .on(\"vmousedown\", function (e) {\n                    e.preventDefault();\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'whichPicClicked' does not exist on type 'Plotter'.\n                    self.whichPicClicked = i;\n                    self.setPicHeight(i, topY);\n\n                    $(document).on(\"vmouseup.plotTile\", function (e) {\n                        $(document).unbind(\".plotTile\");\n                    });\n\n                    $(document).on(\"vmousemove.plotTile\", function (e) {\n                        e.preventDefault();\n\n                        // Reverse-engineer the initial calculation\n                        const yCoord = graphie.getMouseCoord(e)[1];\n                        const adjustedCoord = Math.floor(yCoord - bottomMargin);\n\n                        // Calculate top coord from j value, but don't let them\n                        // go below j = -1, which is equivalent to having '0'\n                        // on the dot plot (due to weird indexing).\n                        const newJ = Math.max(\n                            -1,\n                            Math.floor(adjustedCoord / c.scaleY),\n                        );\n                        const newMidY = (newJ + 0.5) * c.scaleY;\n                        // Constrain the max Y value to max displayable Y of the\n                        // plot.  Otherwise users can unintentionally select an\n                        // out-of-range value and not see that they have done so.\n                        const newTopY = Math.min(\n                            newMidY + 0.5 * c.scaleY,\n                            c.dimY,\n                        );\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'whichPicClicked' does not exist on type 'Plotter'.\n                        self.setPicHeight(self.whichPicClicked, newTopY);\n                    });\n                });\n\n            if (j < 0) {\n                // Don't show a pic underneath the axis!\n                return;\n            }\n            pics[i][j] = createImage(x, midY + bottomMargin);\n            dotTicks[i][j] = graphie.ellipse(\n                [x, midY + bottomMargin],\n                [\n                    self.DOT_TICK_POINT_SIZE() / graphie.scale[0],\n                    self.DOT_TICK_POINT_SIZE() / graphie.scale[1],\n                ],\n                {\n                    fill: \"#dee1e3\",\n                    stroke: \"#dee1e3\",\n                },\n            );\n        });\n        return x;\n    };\n\n    setPicHeight: (arg1: number, arg2: number) => void = (i, y) => {\n        const values = _.clone(this.state.values);\n        values[i] = y;\n        this.drawPicHeights(values, this.state.values);\n        this.setState({values: values});\n        this.changeAndTrack({values: values});\n    };\n\n    changeAndTrack: (arg1: any) => void = (data) => {\n        this.props.onChange(data);\n        this.props.trackInteraction();\n    };\n\n    drawPicHeights: (arg1: any, arg2: any) => void = (values, prevValues) => {\n        const self = this;\n        const graphie = self.graphie;\n        const pics = graphie.pics;\n\n        const isMobile = this.props.apiOptions.isMobile;\n\n        if (isMobile) {\n            const shouldDisplay = values.every((v) => v === 0);\n            graphie.dotPrompt[0].style.display = shouldDisplay\n                ? \"inline\"\n                : \"none\";\n        }\n\n        _.each(pics, function (ps, i) {\n            _.each(ps, function (pic, j) {\n                const y = (j + 1) * self.props.scaleY;\n                const show = y <= values[i];\n\n                if (self.props.type === DOTPLOT) {\n                    const wasShown = y <= prevValues[i];\n                    const wasJustShown = show && !wasShown;\n                    if (wasJustShown) {\n                        pic.animate(\n                            {\n                                \"stroke-width\": 8,\n                            },\n                            75,\n                            () =>\n                                pic.animate(\n                                    {\n                                        \"stroke-width\": 2,\n                                    },\n                                    75,\n                                ),\n                        );\n                    }\n                }\n                $(pic[0]).css({display: show ? \"inline\" : \"none\"});\n\n                graphie.dotTicks[i][j][0].style.display =\n                    show || !isMobile ? \"none\" : \"inline\";\n            });\n        });\n    };\n\n    getUserInput: () => any = () => {\n        return this.state.values;\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof Plotter'.\n        return Plotter.validate(this.getUserInput(), rubric);\n    };\n}\n\n_.extend(Plotter, {\n    validate: function (guess, rubric) {\n        if (deepEq(guess, rubric.starting)) {\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n        return {\n            type: \"points\",\n            earned: deepEq(guess, rubric.correct) ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    },\n});\n\n// We don't need to change any of the original props for static mode\nconst staticTransform = _.identity;\n\nexport default {\n    name: \"plotter\",\n    displayName: \"Plotter\",\n    widget: Plotter,\n    staticTransform: staticTransform,\n} as WidgetExports<typeof Plotter>;\n","import * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nimport {Molecule} from \"./molecule\";\n\nimport type {WidgetExports} from \"../types\";\n\nclass Separator extends React.Component<any> {\n    arrowLength = 100;\n\n    static propTypes = {\n        // TODO(colin): figure out and add shape.\n        data: PropTypes.any,\n        index: PropTypes.number,\n    };\n\n    componentDidMount() {\n        this.drawArrow();\n    }\n\n    componentDidUpdate() {\n        this.drawArrow();\n    }\n\n    drawArrow = () => {\n        // eslint-disable-next-line react/no-string-refs\n        const canvas = this.refs[\"arrowCanvas\" + this.props.index];\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getContext' does not exist on type 'ReactInstance'.\n        const ctx = canvas.getContext(\"2d\");\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'ReactInstance'. | TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        const path = new Path2D();\n        ctx.strokeStyle = \"rgb(0,0,0)\";\n        ctx.lineWidth = 1.2;\n        ctx.lineCap = \"round\";\n        const offset = 5;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        path.moveTo(offset, canvas.height / 2);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'ReactInstance'. | TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        path.lineTo(canvas.width - offset, canvas.height / 2);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'ReactInstance'. | TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        path.moveTo(canvas.width - 2 * offset, canvas.height / 2 - offset);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'ReactInstance'. | TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        path.lineTo(canvas.width - offset, canvas.height / 2);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'ReactInstance'. | TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        path.moveTo(canvas.width - 2 * offset, canvas.height / 2 + offset);\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'width' does not exist on type 'ReactInstance'. | TS2339 - Property 'height' does not exist on type 'ReactInstance'.\n        path.lineTo(canvas.width - offset, canvas.height / 2);\n        ctx.stroke(path);\n    };\n\n    render(): React.ReactNode {\n        return (\n            <div className=\"arrow-container\">\n                <div className=\"above-text\">{this.props.data.topText}</div>\n                <canvas\n                    height=\"30\"\n                    id={\"arrowCanvas\" + this.props.index}\n                    ref={\"arrowCanvas\" + this.props.index}\n                    width={this.arrowLength}\n                >\n                    {i18n._(\"Reaction arrow pointing to the right.\")}\n                </canvas>\n                <div className=\"below-text\">{this.props.data.bottomText}</div>\n            </div>\n        );\n    }\n}\n\nclass ReactionDiagramWidget extends React.Component<any> {\n    static propTypes = {\n        // TODO(colin): at the moment, these must be arrays of two elements;\n        // we're limited to a single reaction step.  At some point, add support\n        // for more steps in the reaction.\n        rotationAngle: PropTypes.arrayOf(PropTypes.number),\n        // eslint-disable-next-line react/forbid-prop-types\n        separators: PropTypes.arrayOf(PropTypes.object),\n        smiles: PropTypes.arrayOf(PropTypes.string),\n        widgetId: PropTypes.string,\n    };\n\n    static defaultProps: any = {\n        smiles: [],\n        rotationAngle: [],\n        separators: [],\n    };\n\n    simpleValidate: (arg1: any) => any = () => {\n        return {type: \"points\", earned: 0, total: 0, message: null};\n    };\n\n    getUserInput: () => any = () => {\n        return [];\n    };\n\n    validate: (arg1: any, arg2: any) => any = (state, rubric) => {\n        // TODO(colin): this appears to be part of the perseus interface.\n        // Figure out if there's a more appropriate value to return.\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    };\n\n    focus: () => boolean = () => {\n        return true;\n    };\n\n    render(): React.ReactNode {\n        return (\n            // eslint-disable-next-line react/no-string-refs\n            <div className=\"reaction\" ref=\"reaction\">\n                {this.props.smiles.map((s, i) => {\n                    const id = this.props.widgetId + \"-\" + i;\n                    return (\n                        <div key={id} className=\"molecule-container\">\n                            <Molecule\n                                id={id}\n                                rotationAngle={this.props.rotationAngle[i]}\n                                smiles={s}\n                            />\n                            {i === this.props.smiles.length - 1 ? null : (\n                                <Separator\n                                    data={this.props.separators[i]}\n                                    index={i}\n                                />\n                            )}\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\nexport default {\n    name: \"reaction-diagram\",\n    displayName: \"Chemical reaction\",\n    hidden: true,\n    widget: ReactionDiagramWidget,\n} as WidgetExports<typeof ReactionDiagramWidget>;\n","import {\n    linterContextProps,\n    linterContextDefault,\n} from \"@khanacademy/perseus-linter\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport InlineIcon from \"../components/inline-icon\";\nimport {iconOk} from \"../icon-paths\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport Util from \"../util\";\n\nimport type {WidgetExports} from \"../types\";\n\nclass Sequence extends React.Component<any, any> {\n    static propTypes = {\n        ...Changeable.propTypes,\n        apiOptions: ApiOptions.propTypes,\n        json: PropTypes.arrayOf(\n            PropTypes.shape({\n                content: PropTypes.string,\n                images: PropTypes.objectOf(PropTypes.any),\n                widgets: PropTypes.objectOf(PropTypes.any),\n            }),\n        ),\n        trackInteraction: PropTypes.func.isRequired,\n        linterContext: linterContextProps,\n    };\n\n    static defaultProps: any = {\n        json: [\n            {\n                content: \"\",\n                widgets: {},\n                images: {},\n            },\n        ],\n        linterContext: linterContextDefault,\n    };\n\n    state: any = {\n        visible: 1,\n    };\n\n    shouldComponentUpdate(nextProps: any, nextState: any): boolean {\n        return nextProps !== this.props || nextState !== this.state;\n    }\n\n    change: (arg1: any, arg2: any, arg3: any) => any = (...args) => {\n        return Changeable.change.apply(this, args);\n    };\n\n    _handleInteraction: (arg1: string) => void = (groupWidgetId) => {\n        const step = parseInt(groupWidgetId.split(\" \")[1]);\n        if (step === this.state.visible - 1) {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getWidgetInstance' does not exist on type 'ReactInstance'.\n            const widget = this.refs.renderer.getWidgetInstance(\n                \"group \" + step,\n            );\n\n            widget.showRationalesForCurrentlySelectedChoices();\n            const score = widget.simpleValidate();\n\n            if (score.type === \"points\" && score.total === score.earned) {\n                this.setState({\n                    visible: this.state.visible + 1,\n                });\n                this.props.trackInteraction({\n                    visible: this.state.visible + 1,\n                });\n            }\n        }\n    };\n\n    render(): React.ReactNode {\n        const icon = <InlineIcon {...iconOk} style={{color: \"green\"}} />;\n\n        const content = _.chain(this.props.json)\n            .first(this.state.visible)\n            .map((step, i) => `[[${Util.snowman} group ${i}]]`)\n            .join(\"\\n\\n\")\n            .value();\n\n        const widgets: Record<string, any> = {};\n        _.each(this.props.json, (step, i) => {\n            const widgetId = `group ${i}`;\n            widgets[widgetId] = {\n                type: \"group\",\n                graded: true,\n                version: {major: 0, minor: 0},\n                options: _.extend({}, step, {\n                    icon: i < this.state.visible - 1 ? icon : null,\n                }),\n            };\n        });\n\n        return (\n            <div className=\"perseus-sequence\">\n                <Renderer\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"renderer\"\n                    content={content}\n                    widgets={widgets}\n                    onInteractWithWidget={this._handleInteraction}\n                    apiOptions={this.props.apiOptions}\n                    linterContext={this.props.linterContext}\n                />\n            </div>\n        );\n    }\n}\n\nconst traverseChildWidgets = function (props: any, traverseRenderer: any): any {\n    let oldJson = props.json;\n    if (!_.isArray(oldJson)) {\n        oldJson = [oldJson];\n    }\n    const json = _.map(oldJson, (rendererOptions) => {\n        return traverseRenderer(rendererOptions);\n    });\n\n    return _.extend({}, props, {json: json});\n};\n\nexport default {\n    name: \"sequence\",\n    displayName: \"Graded Sequence\",\n    widget: Sequence,\n    traverseChildWidgets: traverseChildWidgets,\n    tracking: \"all\",\n    hidden: true,\n    isLintable: true,\n} as WidgetExports<typeof Sequence>;\n","import {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nconst colors = {\n    grayLight: \"#aaa\",\n    basicBorderColor: \"#ccc\",\n    white: \"#fff\",\n} as const;\n\nconst triangleBeforeAfter = {\n    borderBottom: \"9px solid transparent\",\n    borderTop: \"9px solid transparent\",\n    content: '\" \"',\n    height: \"0\",\n    position: \"absolute\",\n    top: \"0\",\n    width: \"0\",\n} as const;\n\nconst styles = StyleSheet.create({\n    infoTip: {\n        display: \"inline-block\",\n        marginLeft: \"5px\",\n        position: \"relative\",\n    },\n\n    infoTipContainer: {\n        position: \"absolute\",\n        top: \"-12px\",\n        left: \"22px\",\n        zIndex: 1000,\n    },\n\n    infoTipTriangle: {\n        height: \"10px\",\n        left: \"0\",\n        position: \"absolute\",\n        top: \"8px\",\n        width: \"0\",\n        zIndex: 1,\n\n        \":before\": {\n            ...triangleBeforeAfter,\n            borderRight: \"9px solid #bbb\",\n            right: \"0\",\n        },\n\n        \":after\": {\n            ...triangleBeforeAfter,\n            borderRight: `9px solid ${colors.white}`,\n            right: \"-1px\",\n        },\n    },\n\n    verticalShadow: {\n        border: `1px solid ${colors.basicBorderColor}`,\n        boxShadow: `0 1px 3px ${colors.basicBorderColor}`,\n        borderBottom: `1px solid ${colors.grayLight}`,\n    },\n\n    infoTipContentContainer: {\n        background: colors.white,\n        padding: \"5px 10px\",\n        width: \"240px\",\n    },\n});\n\nconst questionMark =\n    \"data:image/png;base64,\" +\n    \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBB\" +\n    \"ZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/\" +\n    \"eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+\" +\n    \"IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2Jl\" +\n    \"IFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAg\" +\n    \"ICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5\" +\n    \"LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9\" +\n    \"IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHht\" +\n    \"bG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3Vy\" +\n    \"Y2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHht\" +\n    \"cE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2N2M3NTAxYS04YmVlLTQ0M2Mt\" +\n    \"YmRiNS04OGM2N2IxN2NhYzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJCRTk4\" +\n    \"Qjc4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5p\" +\n    \"aWQ6OUJCRTk4QjY4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcDpDcmVhdG9yVG9v\" +\n    \"bD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRG\" +\n    \"cm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGE5ZDI0OTMtODk1NC00OGFkLTlh\" +\n    \"MTgtZDAwM2MwYWNjNDJlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY3Yzc1MDFh\" +\n    \"LThiZWUtNDQzYy1iZGI1LTg4YzY3YjE3Y2FjMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4g\" +\n    \"PC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqm89uYAAADM\" +\n    \"SURBVHjaXJA9DoJAEIUH1M4TUHIFsCMGen9OwCGw1YRGW2ntKel0exsojHIBC0ouQAyU\" +\n    \"viFDstmXfNmZeS+zm7XSNCXRFiRgJf0bXIHixpbhGdxBBJYC1w/xaA424MhNEATkui71\" +\n    \"fU9KqfEU78UbD9PdbJRlOdae55GmhIP+1NV1TcMwkOM41DSNHvRtMhTHMRVFQW3b6mOL\" +\n    \"gx99kue5GRp/gIOZuZGvNpTNwjD8oliANU+qqqKu6/TQBdymN57AHjzBT+B6Jx79BRgA\" +\n    \"vc49kQA4yxgAAAAASUVORK5CYII=\";\n\ntype Props = {\n    children: React.ReactNode;\n};\n\ntype State = {\n    hover: boolean;\n};\n\nclass InfoTip extends React.Component<Props, State> {\n    state: State = {hover: false};\n\n    handleMouseEnter: () => void = () => {\n        this.setState({hover: true});\n    };\n\n    handleMouseLeave: () => void = () => {\n        this.setState({hover: false});\n    };\n\n    render(): React.ReactNode {\n        return (\n            <div className={css(styles.infoTip)}>\n                <img\n                    alt=\"\"\n                    width={10}\n                    height={10}\n                    src={questionMark}\n                    onMouseEnter={this.handleMouseEnter}\n                    onMouseLeave={this.handleMouseLeave}\n                />\n                <div\n                    className={css(styles.infoTipContainer)}\n                    style={{display: this.state.hover ? \"block\" : \"none\"}}\n                >\n                    <div className={css(styles.infoTipTriangle)} />\n                    <div\n                        className={css(\n                            styles.verticalShadow,\n                            styles.infoTipContentContainer,\n                        )}\n                    >\n                        {this.props.children}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default InfoTip;\n","/**\n * A wrapper around info-tip/info-tip.jsx that can be rendered on the\n * server without causing a checksum mismatch on the client.\n * (RCSS generates classnames with a randomSuffix, which ensures that any\n * two sets of generated classnames will not match.)\n */\n\nimport * as React from \"react\";\n\nimport ReactComponentsInfoTip from \"./info-tip/info-tip\";\n\ntype Props = JSX.LibraryManagedAttributes<\n    typeof ReactComponentsInfoTip,\n    React.ComponentProps<typeof ReactComponentsInfoTip>\n>;\n\ntype State = {\n    didMount: boolean;\n};\n\nclass InfoTip extends React.Component<Props, State> {\n    state: State = {\n        didMount: false,\n    };\n\n    componentDidMount() {\n        /* eslint-disable react/no-did-mount-set-state */\n        this.setState({didMount: true});\n        /* eslint-enable react/no-did-mount-set-state */\n    }\n\n    render(): React.ReactNode {\n        if (this.state.didMount) {\n            return <ReactComponentsInfoTip {...this.props} />;\n        }\n        return <div />;\n    }\n}\n\nexport default InfoTip;\n","/* eslint-disable @typescript-eslint/no-unused-vars, react/no-unsafe, react/sort-comp */\nimport {number as knumber} from \"@khanacademy/kmath\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport Graphie from \"../components/graphie\";\nimport InfoTip from \"../components/info-tip\";\nimport NumberInput from \"../components/number-input\";\nimport InteractiveUtil from \"../interactive2/interactive-util\";\nimport * as Changeable from \"../mixins/changeable\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Util from \"../util\";\nimport KhanColors from \"../util/colors\";\nimport KhanMath from \"../util/math\";\n\nimport type {Range} from \"../perseus-types\";\nimport type {WidgetExports} from \"../types\";\n\nconst {assert} = InteractiveUtil;\nconst {seededRNG} = Util;\n// @ts-expect-error [FEI-5003] - TS2339 - Property 'Path' does not exist on type 'typeof Graphie'. | TS2339 - Property 'Arc' does not exist on type 'typeof Graphie'. | TS2339 - Property 'Circle' does not exist on type 'typeof Graphie'. | TS2339 - Property 'Label' does not exist on type 'typeof Graphie'. | TS2339 - Property 'Line' does not exist on type 'typeof Graphie'. | TS2339 - Property 'MovablePoint' does not exist on type 'typeof Graphie'. | TS2339 - Property 'MovableLine' does not exist on type 'typeof Graphie'.\nconst {Path, Arc, Circle, Label, Line, MovablePoint, MovableLine} = Graphie;\n\nconst defaultBoxSize = 400;\nconst maxSampleSize = 1000;\nconst maxTrials = 5000;\n\nclass Histogram extends React.Component<any, any> {\n    static propTypes = {\n        data: PropTypes.arrayOf(PropTypes.number),\n        xAxisLabel: PropTypes.string,\n        yAxisLabel: PropTypes.string,\n        box: PropTypes.arrayOf(PropTypes.number),\n    };\n\n    static defaultProps = {\n        data: null,\n        xAxisLabel: \"Proportion (%)\",\n        yAxisLabel: \"Number of times seen\",\n        box: [defaultBoxSize, defaultBoxSize],\n    };\n\n    UNSAFE_componentWillReceiveProps(nextProps: any) {\n        // Reset the threshold if the range has changed\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        const oldRange = this._range();\n        const nextRange = this._range(nextProps);\n        if (!Util.deepEq(oldRange, nextRange)) {\n            this.setState({\n                threshold: this._getInitialThreshold(nextRange),\n            });\n        }\n    }\n\n    /* Renders the vertical line that users can drag across the histogram. */\n    _renderThresholdLine = () => {\n        // Recall the the y-range goes from [-1, yMax] to allow for ticks on\n        // the x-axis.\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        const yRange = [0, this._range()[1][1]];\n        const coords = _.map(yRange, (y) => [this.state.threshold, y]);\n\n        // Returns an inivisble, placeholder coord that anchors the line\n        const invisiblePointForCoord = (coord: any, i: any) => {\n            return (\n                <MovablePoint\n                    key={i}\n                    static={true}\n                    coord={coord}\n                    normalStyle={{stroke: \"none\", fill: \"none\"}}\n                />\n            );\n        };\n\n        return (\n            <MovableLine onMove={this.handleMouseInteraction}>\n                {_.map(coords, invisiblePointForCoord)}\n            </MovableLine>\n        );\n    };\n\n    /* Renders the shaded circle in the top right. */\n    _renderCircle = () => {\n        const data = this.props.data;\n\n        // Get proportion of results below threshold\n        const total = _.reduce(\n            data,\n            (sum, next) => {\n                return sum + next;\n            },\n            0,\n        );\n        const numBelow = _.reduce(\n            data,\n            (sum, next, i) => {\n                if (this.state.threshold != null && i <= this.state.threshold) {\n                    return sum + next;\n                }\n                return sum;\n            },\n            0,\n        );\n        const proportionBelow = numBelow / total;\n\n        // This is a hack around the arc taking angles modulo 360.\n        // TODO(charlie): Find a better way around this.\n        const epsilon = 1e-5;\n        const radius = 20;\n        const center = [this.props.box[0] - 1.5 * radius, 1.5 * radius];\n\n        // Plot little circle\n        const plotBelowCircle = () => {\n            const options = {\n                key: \"below\",\n                center: center,\n                radius: radius,\n                startAngle: 0,\n                endAngle:\n                    proportionBelow < 1 ? 360 * proportionBelow : 360 - epsilon,\n                sector: proportionBelow !== 1,\n                unscaled: true,\n                style: {\n                    fill: KhanColors.LIGHT_RED,\n                    stroke: KhanColors.RED,\n                },\n            } as const;\n\n            return <Arc {...options} />;\n        };\n        const plotAboveCircle = () => {\n            const options = {\n                key: \"above\",\n                center: center,\n                radius: radius,\n                startAngle:\n                    proportionBelow > 0 ? 360 * proportionBelow : epsilon,\n                endAngle: 360,\n                sector: proportionBelow !== 0,\n                unscaled: true,\n                style: {\n                    fill: KhanColors.LIGHT_BLUE,\n                    stroke: KhanColors.BLUE,\n                },\n            } as const;\n\n            return <Arc {...options} />;\n        };\n\n        // Plot the label below the circle\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        const xRange = this._range()[0];\n        const formattedThreshold = Math.min(\n            Math.max(this.state.threshold, xRange[0]),\n            xRange[1],\n        ).toFixed(2);\n        const plotLabel = () => {\n            const options = {\n                key: \"label\",\n                coord: [center[0], center[1] + 1.5 * radius],\n                text:\n                    numBelow +\n                    \" of \" +\n                    total +\n                    \" results below \" +\n                    formattedThreshold +\n                    \"%\",\n                direction: \"center\",\n                tex: false,\n                unscaled: true,\n                style: {\n                    fontSize: \"12px\",\n                },\n            } as const;\n            return <Label {...options} />;\n        };\n\n        return [\n            proportionBelow > 0 && plotBelowCircle(),\n            proportionBelow < 1 && plotAboveCircle(),\n            plotLabel(),\n        ];\n    };\n\n    /* Renders the actual bars of the histogram. */\n    _renderData = () => {\n        const data = this.props.data;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        const range = this._range();\n\n        // Plot bars\n        const barWidth = 1;\n        const pathForData = (count: any, i: any) => {\n            // Avoid plotting bars of height 0, else you get a thick blue line\n            // over the x-axis. We don't filter these out of the data passed in\n            // to this function, however, to preserve absolute indices.\n            if (!count) {\n                return;\n            }\n\n            const isBelow =\n                this.state.threshold != null && i <= this.state.threshold;\n            const style = {\n                fill: isBelow ? KhanColors.LIGHT_RED : KhanColors.LIGHT_BLUE,\n                stroke: isBelow ? KhanColors.RED : KhanColors.BLUE,\n            } as const;\n            const coords = [\n                [i, 0],\n                [i, count],\n                [i + barWidth, count],\n                [i + barWidth, 0],\n            ];\n            return <Path key={i} coords={coords} style={style} />;\n        };\n\n        return _.map(data, pathForData);\n    };\n\n    render(): React.ReactNode {\n        const data = this.props.data;\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        const range = this._range();\n\n        const options = {\n            xAxisLabel: this.props.xAxisLabel,\n            yAxisLabel: this.props.yAxisLabel,\n            box: this.props.box,\n            range: range,\n            data: data,\n            scale: [\n                Util.scaleFromExtent(range[0], this.props.box[0]),\n                Util.scaleFromExtent(range[1], this.props.box[1]),\n            ],\n        } as const;\n\n        const axisStyle = {\n            stroke: \"#000\",\n            strokeWidth: 1,\n            opacity: 1.0,\n        } as const;\n        const origin = [range[0][0], 0];\n        const bottomRight = [range[0][1], 0];\n\n        return (\n            <Graphie\n                box={options.box}\n                range={options.range}\n                options={options}\n                setup={this._setupGraphie}\n                onMouseMove={this.handleMouseInteraction}\n                onMouseDown={this.handleMouseInteraction}\n                setDrawingAreaAvailable={this.props.setDrawingAreaAvailable}\n            >\n                <Line start={origin} end={bottomRight} style={axisStyle} />\n                {/* Only plot these cool extra features if there's data */}\n                {data && this._renderData()}\n                {data && this._renderCircle()}\n                {data && this._renderThresholdLine()}\n            </Graphie>\n        );\n    }\n\n    _setupGraphie = (graphie: any, options: any) => {\n        const data = options.data;\n        const range = options.range;\n        const scale = options.scale;\n\n        /* Plot the bars that run parallel to the x-axis. */\n        const xWidth = range[0][1] - range[0][0];\n        const yWidth = range[1][1] - 0;\n\n        const maxYAxisEntities = 20;\n        const ySkip = Math.ceil(yWidth / maxYAxisEntities);\n        _.each(_.range(0, range[1][1], ySkip), (y) => {\n            // If there's no data, we don't label the axes\n            if (data) {\n                graphie.label(\n                    [range[0][0], y],\n                    KhanMath.roundToApprox(y, 2),\n                    \"left\",\n                    /* isTeX */ true /* for the \\approx symbol */,\n                );\n            }\n\n            graphie.line([range[0][0], y], [range[0][1], y], {\n                stroke: \"#000\",\n                strokeWidth: 1,\n                opacity: 0.3,\n            });\n        });\n\n        // If there's no data, we don't label the x-axis at all\n        if (data) {\n            // Plot the labels below the bars\n            const maxXAxisEntities = 15;\n            const xSkip = Math.ceil(xWidth / maxXAxisEntities);\n            _.each(_.range(range[0][0], range[0][1], xSkip), (x) => {\n                graphie.label([x, 0], knumber.round(x, 2), \"below\", true);\n\n                const tickHeight = 8;\n                graphie.line([x, 0], [x, -tickHeight / scale[1]], {\n                    stroke: \"#000\",\n                    strokeWidth: 1,\n                });\n            });\n        }\n\n        // Add y axis (x axis is added later to overlap the bars)\n        const axisStyle = {\n            stroke: \"#000\",\n            strokeWidth: 2,\n            opacity: 1.0,\n        } as const;\n        const origin = [range[0][0], 0];\n        const topLeft = [range[0][0], range[1][1]];\n        graphie.line(origin, topLeft, axisStyle);\n\n        // Add axis labels\n        const xMid = range[0][0] + xWidth / 2;\n        const xOffset = data ? 25 : 0;\n        graphie\n            .label(\n                [xMid, -xOffset / scale[1]],\n                options.xAxisLabel,\n                \"below\",\n                false,\n            )\n            .css(\"font-weight\", \"bold\");\n\n        const yMid = 0 + yWidth / 2;\n        const yOffset = data ? 55 : 28;\n        graphie\n            .label(\n                [range[0][0] - yOffset / scale[0], yMid],\n                options.yAxisLabel,\n                \"center\",\n                false,\n            )\n            .css(\"font-weight\", \"bold\")\n            .css(\"-webkit-transform\", \"rotate(-90deg)\");\n    };\n\n    handleMouseInteraction = (point: any) => {\n        this.setState({\n            threshold: point[0],\n        });\n    };\n\n    /* Convenience functions that help calculate props based on other props. */\n    _range = (props): [Range, Range] => {\n        const defaultRange: [Range, Range] = [\n            [0, 100],\n            [-1, 10],\n        ];\n        props = props || this.props;\n        return props.data ? this._getRangeForData(props.data) : defaultRange;\n    };\n\n    _getRangeForData = (data: any): [Range, Range] => {\n        // Find first/last non-zero entry and add some padding\n        const padding = 10;\n        const firstIndex = _.indexOf(\n            data,\n            _.find(data, (n) => n > 0),\n        );\n        const xMin = Math.max(0, firstIndex - padding);\n        const lastIndex = _.lastIndexOf(\n            data,\n            _.last(_.filter(data, (n) => n > 0)),\n        );\n        const xMax = Math.min(100 + 1, lastIndex + 1 + padding);\n\n        // The y-axis is bounded above by largest value, and below by 0.\n        // However, the 'range' of the y-axis goes as low as -1 to allow\n        // Graphie to draw ticks on the x-Axis that extend vertically below\n        // y = 0.\n        const yMin = -1;\n        const yMax = _.max(data);\n\n        return [\n            [xMin, xMax],\n            [yMin, yMax],\n        ];\n    };\n\n    _getInitialThreshold = (\n        range:\n            | Array<Array<number>>\n            | Array<Array<number> | Array<any | number>>,\n    ) => {\n        // We pick a pretty-looking threshold, 1/3 of the way along the axis\n        const xRange = range[0];\n        return xRange[0] + (xRange[1] - xRange[0]) / 3;\n    };\n\n    state = {\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n        threshold: this._getInitialThreshold(this._range()),\n    };\n}\n\nclass Simulator extends React.Component<any, any> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'generateNumber' has no initializer and is not definitely assigned in the constructor.\n    generateNumber: () => number;\n\n    static propTypes = {\n        ...Changeable.propTypes,\n        apiOptions: ApiOptions.propTypes,\n        data: PropTypes.arrayOf(PropTypes.number),\n        numTrials: PropTypes.number,\n        proportionLabel: PropTypes.string,\n        proportionOrPercentage: PropTypes.string,\n        randomSeed: PropTypes.number,\n        sampleSize: PropTypes.number,\n        trackInteraction: PropTypes.func.isRequired,\n        userProportion: PropTypes.number,\n        xAxisLabel: PropTypes.string,\n        yAxisLabel: PropTypes.string,\n    };\n\n    static defaultProps: any = {\n        data: null,\n        userProportion: null,\n        sampleSize: null,\n        numTrials: null,\n        randomSeed: 0,\n        xAxisLabel: \"Proportion (%)\",\n        yAxisLabel: \"Number of times seen\",\n        proportionLabel: \"Underlying proportion\",\n        proportionOrPercentage: \"proportion\",\n        apiOptions: ApiOptions.defaults,\n    };\n\n    state: any = {\n        invalidInput: false,\n    };\n\n    // TODO(jangmi, CP-3288): Remove usage of `UNSAFE_componentWillMount`\n    UNSAFE_componentWillMount() {\n        if (this.props.randomSeed != null) {\n            this.generateNumber = Util.seededRNG(this.props.randomSeed);\n        }\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: any) {\n        if (nextProps.randomSeed !== this.props.randomSeed) {\n            this.generateNumber = Util.seededRNG(nextProps.randomSeed);\n        }\n    }\n\n    render(): React.ReactNode {\n        const inputStyle = {\n            marginLeft: \"5px\",\n        } as const;\n\n        const highlight = \"0px 0px 0px 2px rgba(255, 165, 0, 1)\";\n        const highlightStyle = _.extend({}, inputStyle, {\n            boxShadow: highlight,\n            transition: \"all 0.15s\",\n        });\n        const unhighlightStyle = _.extend({}, inputStyle, {\n            transition: \"all 0.15s\",\n        });\n        const style = this.state.invalidInput\n            ? highlightStyle\n            : unhighlightStyle;\n\n        const proportionInput = (\n            <div>\n                <NumberInput\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"userProportion\"\n                    style={style}\n                    value={this.calculateDisplayProportion()}\n                    checkValidity={this.checkProportionValidity}\n                    disabled={this.props.apiOptions.readOnly}\n                    onChange={this.handleUserProportionChange}\n                    onFocus={() => this.props.onFocus([\"userProportion\"])}\n                    onBlur={() => this.props.onBlur([\"userProportion\"])}\n                />\n                <InfoTip>\n                    <p>\n                        {i18n._(\n                            \"This controls the proportion or percentage that will be used in your simulation.\",\n                        )}\n                    </p>\n                </InfoTip>\n            </div>\n        );\n\n        const sampleSizeInput = (\n            <div>\n                <NumberInput\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"sampleSize\"\n                    style={style}\n                    value={this.props.sampleSize}\n                    checkValidity={(val) => val >= 0}\n                    disabled={this.props.apiOptions.readOnly}\n                    onChange={this.handleSampleSizeChange}\n                    onFocus={() => this.props.onFocus([\"sampleSize\"])}\n                    onBlur={() => this.props.onBlur([\"sampleSize\"])}\n                />\n                <InfoTip>\n                    <p>\n                        {i18n._(\n                            \"This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated.\",\n                        )}\n                    </p>\n                </InfoTip>\n            </div>\n        );\n\n        const numTrialsDisplay = (\n            <div style={{textAlign: \"right\"}}>\n                <b>{this.props.numTrials}</b>\n                <InfoTip>\n                    <p>\n                        {i18n._(\n                            \"This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times.\",\n                        )}\n                    </p>\n                </InfoTip>\n            </div>\n        );\n\n        // Generates a table from a set of titles and values.\n        const generateTable = (\n            contents: Array<{\n                title: string;\n                value: React.ReactElement<React.ComponentProps<\"div\">>;\n            }>,\n        ) => {\n            const header = (\n                <thead>\n                    <tr>\n                        <th>{i18n._(\"Parameter\")}</th>\n                        <th>{i18n._(\"Value\")}</th>\n                    </tr>\n                </thead>\n            );\n\n            const body = (\n                <tbody>\n                    {_.map(contents, (row, i) => {\n                        return (\n                            <tr key={i}>\n                                <td>{row.title}</td>\n                                <td>{row.value}</td>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            );\n\n            return (\n                <table>\n                    {header}\n                    {body}\n                </table>\n            );\n        };\n\n        // Contents for the table to-be generated\n        const contents = [\n            {\n                title: this.props.proportionLabel + \":\",\n                value: proportionInput,\n            },\n            {\n                title: i18n._(\"Sample size:\"),\n                value: sampleSizeInput,\n            },\n            {\n                title: i18n._(\"Number of trials:\"),\n                value: numTrialsDisplay,\n            },\n        ];\n\n        // The 'Run Simulation' button\n        const buttonStyle = {\n            margin: \"20px 0\",\n        } as const;\n        const startButton = (\n            <button\n                className=\"simple-button\"\n                style={buttonStyle}\n                disabled={this.props.apiOptions.readOnly}\n                onClick={this.handleRunSimulation}\n            >\n                {i18n._(\"Run simulation\")}\n            </button>\n        );\n\n        // When we plot data, ticks on the x-axis require some vertical padding\n        const histogramStyle = {\n            paddingBottom: this.props.data ? 40 : 0,\n        } as const;\n        const histogram = (\n            <div style={histogramStyle}>\n                <Histogram\n                    data={this.props.data}\n                    xAxisLabel={this.props.xAxisLabel}\n                    yAxisLabel={this.props.yAxisLabel}\n                    setDrawingAreaAvailable={\n                        this.props.apiOptions.setDrawingAreaAvailable\n                    }\n                />\n            </div>\n        );\n\n        return (\n            <div>\n                {generateTable(contents)}\n                {startButton}\n                {histogram}\n            </div>\n        );\n    }\n\n    calculateDisplayProportion: () => number = () => {\n        const userProportion = this.props.userProportion;\n\n        // If we want to display as a percentage, multiply proportion by 100.0.\n        if (this.props.proportionOrPercentage === \"percentage\") {\n            return Math.round(100 * userProportion);\n        }\n        return userProportion;\n    };\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    checkProportionValidity: (arg1: number) => boolean = (value) => {\n        return (\n            (value >= 0.0 &&\n                this.props.proportionOrPercentage === \"proportion\" &&\n                value <= 1.0) ||\n            (this.props.proportionOrPercentage === \"percentage\" &&\n                value <= 100.0)\n        );\n    };\n\n    handleUserProportionChange: (arg1: number, arg2: any) => void = (\n        value,\n        cb,\n    ) => {\n        let userProportion;\n\n        // If \"percentage\" mode is enabled, user will have entered value as\n        // a percentage. However, we always store as a proportion, so we cast.\n        if (this.props.proportionOrPercentage === \"percentage\") {\n            userProportion = value / 100.0;\n        } else {\n            userProportion = value;\n        }\n\n        // If they entered a number, we may need to cap it\n        if (userProportion != null) {\n            userProportion = Math.min(1.0, Math.max(0.0, userProportion));\n        }\n        this.props.onChange(\n            {\n                userProportion: userProportion,\n            },\n            cb,\n        );\n    };\n\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(sampleSize: any, cb: any) => void' is not assignable to type '(number: any) => void'.\n    handleSampleSizeChange: (number: any) => void = (sampleSize, cb) => {\n        if (sampleSize != null) {\n            sampleSize = Math.min(\n                maxSampleSize,\n                Math.max(0, Math.floor(sampleSize)),\n            );\n        }\n        this.props.onChange(\n            {\n                sampleSize: sampleSize,\n            },\n            cb,\n        );\n    };\n\n    handleRunSimulation: () => void = () => {\n        // If they haven't filled out a parameter field, highlight it.\n        if (\n            this.props.numTrials == null ||\n            this.props.userProportion == null ||\n            this.props.sampleSize == null\n        ) {\n            this.setState({\n                invalidInput: true,\n            });\n            return;\n        }\n        this.setState({\n            invalidInput: false,\n        });\n\n        this.props.onChange({\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n            data: this.generateData(),\n        });\n        this.props.trackInteraction();\n    };\n\n    generateData: (arg1: any) => any = (props) => {\n        props = props || this.props;\n        const getSampleDistribution = (\n            sampleSize: any,\n            numTrials: any,\n            proportion: any,\n        ) => {\n            const draw = () => {\n                return this.generateNumber() < proportion;\n            };\n            const sampleDistribution = _.times(100 + 1, () => 0);\n            _.times(numTrials, () => {\n                const results = _.times(sampleSize, draw);\n                const count = _.filter(results, _.identity).length;\n                const normalizedCount = Math.floor((100 * count) / sampleSize);\n                sampleDistribution[normalizedCount]++;\n            });\n            return sampleDistribution;\n        };\n        return getSampleDistribution(\n            props.sampleSize,\n            props.numTrials,\n            props.userProportion,\n        );\n    };\n\n    /* InputPath API */\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        return [[\"userProportion\"], [\"sampleSize\"]];\n    };\n\n    focus: () => boolean = () => {\n        const path = _.head(this.getInputPaths());\n        this.focusInputPath(path);\n        return true;\n    };\n\n    focusInputPath: (arg1: any) => void = (path) => {\n        assert(path.length > 0);\n        const inputID = _.head(path);\n        // eslint-disable-next-line react/no-string-refs\n        const inputComponent = this.refs[inputID];\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n        inputComponent.focus();\n    };\n\n    blurInputPath: (arg1: any) => void = (path) => {\n        assert(path.length > 0);\n        const inputID = _.head(path);\n        // eslint-disable-next-line react/no-string-refs\n        const inputComponent = this.refs[inputID];\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n        inputComponent.blur();\n    };\n\n    getDOMNodeForPath: (arg1: any) => Element | Text | null | undefined = (\n        path,\n    ) => {\n        assert(path.length > 0);\n        const inputID = _.head(path);\n        // eslint-disable-next-line react/no-string-refs\n        return ReactDOM.findDOMNode(this.refs[inputID]);\n    };\n\n    getGrammarTypeForPath: (arg1: any) => string = (path) => {\n        assert(path.length > 0);\n        return \"number\";\n    };\n\n    setInputValue: (arg1: any, arg2: any, arg3: any) => void = (\n        path,\n        newValue,\n        cb,\n    ) => {\n        assert(path.length > 0);\n        const inputID = _.head(path);\n        const capitalizedID =\n            inputID.charAt(0).toUpperCase() + inputID.slice(1);\n        const functionName = \"handle\" + capitalizedID + \"Change\";\n        this[functionName](newValue, cb);\n    };\n\n    getUserInput: () => undefined | null | undefined = () => {\n        return null;\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof Simulator'.\n        return Simulator.validate(this.getUserInput(), rubric);\n    };\n}\n\n_.extend(Simulator, {\n    validate: function (state, rubric) {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    },\n});\n\nconst propTransform: (arg1: any) => any = (editorProps) => {\n    const widgetProps = _.clone(editorProps);\n    widgetProps.randomSeed = editorProps.problemNum;\n    return widgetProps;\n};\n\nexport default {\n    name: \"simulator\",\n    displayName: \"Simulator\",\n    widget: Simulator,\n    transform: propTransform,\n    hidden: true,\n} as WidgetExports<typeof Simulator>;\n","import {\n    linterContextProps,\n    linterContextDefault,\n} from \"@khanacademy/perseus-linter\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport Sortable from \"../components/sortable\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Util from \"../util\";\n\nimport type {SortableOption} from \"../components/sortable\";\nimport type {WidgetExports} from \"../types\";\n\nconst {shuffle} = Util;\nconst HORIZONTAL = \"horizontal\";\nconst VERTICAL = \"vertical\";\n\nclass Sorter extends React.Component<any, any> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_isMounted' has no initializer and is not definitely assigned in the constructor.\n    _isMounted: boolean;\n\n    static propTypes = {\n        apiOptions: ApiOptions.propTypes,\n        // eslint-disable-next-line react/forbid-prop-types\n        correct: PropTypes.array,\n        layout: PropTypes.oneOf([HORIZONTAL, VERTICAL]),\n        onChange: PropTypes.func,\n        padding: PropTypes.bool,\n        problemNum: PropTypes.number,\n        trackInteraction: PropTypes.func.isRequired,\n        linterContext: linterContextProps,\n    };\n\n    static defaultProps: any = {\n        correct: [],\n        layout: HORIZONTAL,\n        padding: true,\n        problemNum: 0,\n        onChange: function () {},\n        linterContext: linterContextDefault,\n    };\n\n    static validate(state: any, rubric: any): any {\n        const correct = _.isEqual(state.options, rubric.correct);\n\n        return {\n            type: \"points\",\n            earned: correct ? 1 : 0,\n            total: 1,\n            message: null,\n        };\n    }\n\n    state: any = {\n        changed: false,\n    };\n\n    componentDidMount() {\n        this._isMounted = true;\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    handleChange: (arg1: React.ChangeEvent<HTMLInputElement>) => void = (e) => {\n        if (!this._isMounted) {\n            return;\n        }\n\n        this.setState({changed: true}, () => {\n            // Wait until all components have rendered. In React 16, the\n            // setState callback fires immediately after componentDidUpdate,\n            // and there is no guarantee that parent/siblings components have\n            // finished rendering.\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n            // eslint-disable-next-line no-restricted-syntax\n            setTimeout(() => {\n                this.props.onChange(e);\n                this.props.trackInteraction();\n            }, 0);\n        });\n    };\n\n    getUserInput: () => {\n        options: any;\n    } = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getOptions' does not exist on type 'ReactInstance'.\n        return {options: this.refs.sortable.getOptions()};\n    };\n\n    moveOptionToIndex: (option: SortableOption, index: number) => void = (\n        option,\n        index,\n    ) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'moveOptionToIndex' does not exist on type 'ReactInstance'.\n        this.refs.sortable.moveOptionToIndex(option, index);\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // If this widget hasn't been changed yet, we treat it as \"empty\" which\n        // prevents the \"Check\" button from becoming active. We want the user\n        // to make a change before trying to move forward. This makes an\n        // assumption that the initial order isn't the correct order! However,\n        // this should be rare if it happens, and interacting with the list\n        // will enable the button, so they won't be locked out of progressing.\n        if (!this.state.changed) {\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n\n        return Sorter.validate(this.getUserInput(), rubric);\n    };\n\n    render(): React.ReactNode {\n        const options = shuffle(\n            this.props.correct,\n            this.props.problemNum,\n            /* ensurePermuted */ true,\n        );\n\n        const {apiOptions} = this.props;\n        const marginPx = apiOptions.isMobile ? 8 : 5;\n\n        return (\n            <div className=\"perseus-widget-sorter perseus-clearfix\">\n                <Sortable\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'readonly unknown[]' is not assignable to type 'readonly string[]'.\n                    options={options}\n                    layout={this.props.layout}\n                    margin={marginPx}\n                    padding={this.props.padding}\n                    onChange={this.handleChange}\n                    linterContext={this.props.linterContext}\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"sortable\"\n                />\n            </div>\n        );\n    }\n}\n\nexport default {\n    name: \"sorter\",\n    displayName: \"Sorter\",\n    widget: Sorter,\n    isLintable: true,\n} as WidgetExports<typeof Sorter>;\n","/* eslint-disable react/sort-comp */\nimport {keypadElementPropType} from \"@khanacademy/math-input\";\nimport {\n    linterContextProps,\n    linterContextDefault,\n} from \"@khanacademy/perseus-linter\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport SimpleKeypadInput from \"../components/simple-keypad-input\";\nimport InteractiveUtil from \"../interactive2/interactive-util\";\nimport {ApiOptions} from \"../perseus-api\";\nimport Renderer from \"../renderer\";\nimport Util from \"../util\";\nimport KhanAnswerTypes from \"../util/answer-types\";\n\nimport type {WidgetExports} from \"../types\";\n\nconst {assert} = InteractiveUtil;\n\n/* Input handling: Maps a (row, column) pair to a unique ref used by React,\n * and extracts (row, column) pairs from input paths, used to allow outsiders\n * to focus, blur, set input values, etc. */\nconst getInputPath = function (row, column) {\n    return [\"\" + row, \"\" + column];\n};\n\nconst getDefaultPath = function () {\n    return getInputPath(0, 0);\n};\n\nconst getRowFromPath = function (path) {\n    // 'path' should be a (row, column) pair\n    assert(_.isArray(path) && path.length === 2);\n    return +path[0];\n};\n\nconst getColumnFromPath = function (path) {\n    // 'path' should be a (row, column) pair\n    assert(_.isArray(path) && path.length === 2);\n    return +path[1];\n};\n\nconst getRefForPath = function (path) {\n    const row = getRowFromPath(path);\n    const column = getColumnFromPath(path);\n    return \"answer\" + row + \",\" + column;\n};\n\nclass Table extends React.Component<any> {\n    static propTypes = {\n        answers: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\n        editableHeaders: PropTypes.bool,\n        // The editor to use when editableHeaders is enabled\n        Editor: PropTypes.func,\n        headers: PropTypes.arrayOf(PropTypes.string),\n        keypadElement: keypadElementPropType,\n        trackInteraction: PropTypes.func.isRequired,\n        linterContext: linterContextProps,\n    };\n\n    static defaultProps: any = (function () {\n        const defaultRows = 4;\n        const defaultColumns = 1;\n        const blankAnswers = _(defaultRows).times(function () {\n            return Util.stringArrayOfSize(defaultColumns);\n        });\n        return {\n            apiOptions: ApiOptions.defaults,\n            headers: [\"\"],\n            editableHeaders: false,\n            rows: defaultRows,\n            columns: defaultColumns,\n            answers: blankAnswers,\n            linterContext: linterContextDefault,\n        };\n    })();\n\n    _getRows: () => number = () => {\n        return this.props.answers.length;\n    };\n\n    _getColumns: () => number = () => {\n        return this.props.answers[0].length;\n    };\n\n    render(): React.ReactNode {\n        const rows = this._getRows();\n        const columns = this._getColumns();\n        const headers = this.props.headers;\n\n        let InputComponent;\n        let inputStyle;\n        const extraInputProps: Record<string, any> = {};\n        if (this.props.apiOptions.customKeypad) {\n            InputComponent = SimpleKeypadInput;\n            // NOTE(charlie): This is intended to match the \"width: 80px\" in\n            // input in table.less. Those values should be kept in-sync.\n            inputStyle = {width: 80};\n            extraInputProps.keypadElement = this.props.keypadElement;\n        } else {\n            InputComponent = \"input\";\n            inputStyle = {};\n        }\n\n        return (\n            <table className=\"perseus-widget-table-of-values non-markdown\">\n                <thead>\n                    <tr>\n                        {_.map(headers, (header, i) => {\n                            if (this.props.editableHeaders) {\n                                return (\n                                    <th key={i}>\n                                        <this.props.Editor\n                                            ref={\"columnHeader\" + i}\n                                            apiOptions={this.props.apiOptions}\n                                            content={header}\n                                            widgetEnabled={false}\n                                            onChange={_.partial(\n                                                this.onHeaderChange,\n                                                i,\n                                            )}\n                                        />\n                                    </th>\n                                );\n                            }\n                            return (\n                                <th key={i}>\n                                    <Renderer\n                                        content={header}\n                                        linterContext={this.props.linterContext}\n                                    />\n                                </th>\n                            );\n                        })}\n                    </tr>\n                </thead>\n                <tbody>\n                    {_(rows).times((r) => {\n                        return (\n                            <tr key={r}>\n                                {_(columns).times((c) => {\n                                    return (\n                                        <td key={c}>\n                                            <InputComponent\n                                                ref={getRefForPath(\n                                                    getInputPath(r, c),\n                                                )}\n                                                type=\"text\"\n                                                value={this.props.answers[r][c]}\n                                                disabled={\n                                                    this.props.apiOptions\n                                                        .readOnly\n                                                }\n                                                onFocus={_.partial(\n                                                    this._handleFocus,\n                                                    getInputPath(r, c),\n                                                )}\n                                                onBlur={_.partial(\n                                                    this._handleBlur,\n                                                    getInputPath(r, c),\n                                                )}\n                                                onChange={_.partial(\n                                                    this.onValueChange,\n                                                    r,\n                                                    c,\n                                                )}\n                                                style={inputStyle}\n                                                {...extraInputProps}\n                                            />\n                                        </td>\n                                    );\n                                })}\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        );\n    }\n\n    getUserInput: () => any = () => {\n        return _.map(this.props.answers, _.clone);\n    };\n\n    onValueChange: (arg1: any, arg2: any, arg3: any) => void = (\n        row,\n        column,\n        eventOrValue,\n    ) => {\n        const answers = _.map(this.props.answers, _.clone);\n\n        // If this is coming from an \"input\", the last argument will be an\n        // event. If it's coming from a SimpleKeypadInput, it'll be the value.\n        // @ts-expect-error [FEI-5003] - TS2571 - Object is of type 'unknown'.\n        answers[row][column] = eventOrValue.target\n            ? eventOrValue.target.value\n            : eventOrValue;\n\n        this.props.onChange({\n            answers: answers,\n        });\n        this.props.trackInteraction();\n    };\n\n    onHeaderChange: (arg1: number, arg2: any) => void = (index, e) => {\n        const headers = this.props.headers.slice();\n        headers[index] = e.content;\n        this.props.onChange({\n            headers: headers,\n        });\n    };\n\n    simpleValidate: (arg1: any) => any = (rubric) => {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'validate' does not exist on type 'typeof Table'.\n        return Table.validate(this.getUserInput(), rubric);\n    };\n\n    _handleFocus: (arg1: any) => void = (inputPath) => {\n        this.props.onFocus(inputPath);\n    };\n\n    _handleBlur: (arg1: any) => void = (inputPath) => {\n        this.props.onBlur(inputPath);\n    };\n\n    focus: () => boolean = () => {\n        this.focusInputPath(getDefaultPath());\n        return true;\n    };\n\n    focusInputPath: (arg1: any) => void = (path) => {\n        const inputID = getRefForPath(path);\n        // eslint-disable-next-line react/no-string-refs\n        const inputComponent = this.refs[inputID];\n        if (this.props.apiOptions.customKeypad) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n            inputComponent.focus();\n        } else {\n            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n            ReactDOM.findDOMNode(inputComponent).focus();\n        }\n    };\n\n    blurInputPath: (arg1: any) => void = (path) => {\n        const inputID = getRefForPath(path);\n        // eslint-disable-next-line react/no-string-refs\n        const inputComponent = this.refs[inputID];\n        if (this.props.apiOptions.customKeypad) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'ReactInstance'.\n            inputComponent.blur();\n        } else {\n            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'blur' does not exist on type 'Element | Text'.\n            ReactDOM.findDOMNode(inputComponent).blur();\n        }\n    };\n\n    getDOMNodeForPath: (arg1: any) => Text | Element | null | undefined = (\n        path,\n    ) => {\n        const inputID = getRefForPath(path);\n        // eslint-disable-next-line react/no-string-refs\n        return ReactDOM.findDOMNode(this.refs[inputID]);\n    };\n\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<string>> = () => {\n        const rows = this._getRows();\n        const columns = this._getColumns();\n        const inputPaths: Array<Array<string>> = [];\n        _(rows).times((r) => {\n            _(columns).times((c) => {\n                const inputPath = getInputPath(r, c);\n                inputPaths.push(inputPath);\n            });\n        });\n        return inputPaths;\n    };\n\n    getGrammarTypeForPath: (arg1: any) => string = (inputPath) => {\n        return \"number\";\n    };\n\n    setInputValue: (arg1: any, arg2: any, arg3: any) => void = (\n        path,\n        newValue,\n        cb,\n    ) => {\n        // Extract row, column information\n        const row = getRowFromPath(path);\n        const column = getColumnFromPath(path);\n\n        const answers = _.map(this.props.answers, _.clone);\n        // @ts-expect-error [FEI-5003] - TS2571 - Object is of type 'unknown'.\n        answers[row][column] = newValue;\n        this.props.onChange(\n            {\n                answers: answers,\n            },\n            cb,\n        );\n    };\n}\n\n_.extend(Table, {\n    validate: function (state, rubric) {\n        const filterNonEmpty = function (table: any) {\n            return _.filter(table, function (row) {\n                // Check if row has a cell that is nonempty\n                return _.some(row, _.identity);\n            });\n        };\n        const solution = filterNonEmpty(rubric.answers);\n        const supplied = filterNonEmpty(state);\n        const hasEmptyCell = _.some(supplied, function (row) {\n            return _.some(row, function (cell) {\n                return cell === \"\";\n            });\n        });\n        if (hasEmptyCell || !supplied.length) {\n            return {\n                type: \"invalid\",\n                message: null,\n            };\n        }\n        if (supplied.length !== solution.length) {\n            return {\n                type: \"points\",\n                earned: 0,\n                total: 1,\n                message: null,\n            };\n        }\n        const createValidator =\n            KhanAnswerTypes.number.createValidatorFunctional;\n        let message = null;\n        const allCorrect = _.every(solution, function (rowSolution) {\n            let i;\n            for (i = 0; i < supplied.length; i++) {\n                const rowSupplied = supplied[i];\n                const correct = _.every(\n                    rowSupplied,\n                    function (cellSupplied, i) {\n                        const cellSolution = rowSolution[i];\n                        const validator = createValidator(cellSolution, {\n                            simplify: true,\n                        });\n                        const result = validator(cellSupplied);\n                        if (result.message) {\n                            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n                            message = result.message;\n                        }\n                        return result.correct;\n                    },\n                );\n                if (correct) {\n                    supplied.splice(i, 1);\n                    return true;\n                }\n            }\n            return false;\n        });\n        return {\n            type: \"points\",\n            earned: allCorrect ? 1 : 0,\n            total: 1,\n            message: message,\n        };\n    },\n});\n\nconst propTransform: (arg1: any) => any = (editorProps) => {\n    // Remove answers before passing to widget\n    const rows = editorProps.answers.length;\n    const columns = editorProps.answers[0].length;\n    const blankAnswers = _(rows).times(function () {\n        return Util.stringArrayOfSize(columns);\n    });\n    return _.extend({}, editorProps, {\n        answers: blankAnswers,\n    });\n};\n\nexport default {\n    name: \"table\",\n    displayName: \"Table of values\",\n    accessible: true,\n    widget: Table,\n    transform: propTransform,\n    hidden: true,\n    isLintable: true,\n} as WidgetExports<typeof Table>;\n","/* eslint-disable react/prop-types */\n/* eslint-disable @babel/no-invalid-this */\n/* eslint-disable camelcase */\n/* eslint-disable react/no-did-update-set-state */\n/* eslint-disable react/sort-comp */\n/*\nNOTE(Pereus stabilize project): This widget is no-longer-used as of January\n2022. It's not present in US content but is still present in some\ninternational content so it can't be removed quite yet. As soon as it's\nverified to have been removed from international content this all needs\nto get deleted. In the meantime- do not maintain this code.\n\nref: https://khanacademy.slack.com/archives/CJDRXTGQ7/p1641857400011600\nref: https://khanacademy.slack.com/archives/C2RFQGYKU/p1596160975061500?thread_ts=1596129758.040000&cid=C2RFQGYKU\n*/\nimport {\n    number as knumber,\n    vector as kvector,\n    point as kpoint,\n    ray as kray,\n    line as kline,\n} from \"@khanacademy/kmath\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport createReactClass from \"create-react-class\";\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport Graph from \"../components/graph\";\nimport InlineIcon from \"../components/inline-icon\";\nimport NumberInput from \"../components/number-input\";\nimport SimpleKeypadInput from \"../components/simple-keypad-input\";\nimport {getDependencies} from \"../dependencies\";\nimport {iconPlus, iconUndo} from \"../icon-paths\";\nimport InteractiveUtil from \"../interactive2/interactive-util\";\nimport {Errors} from \"../logging/log\";\nimport {ApiOptions} from \"../perseus-api\";\nimport {PerseusError} from \"../perseus-error\";\nimport Util from \"../util\";\nimport KhanColors from \"../util/colors\";\nimport KhanMath from \"../util/math\";\n\nimport type {Coord} from \"../interactive2/types\";\nimport type {\n    PerseusTransformerWidgetOptions,\n    PerseusTransformerTransformation as TransformerTransformation,\n    DilationTransformation,\n    ReflectionTransformation,\n    RotationTransformation,\n    TranslationTransformation,\n} from \"../perseus-types\";\nimport type {Path, PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\nconst {deepEq, getGridStep, captureScratchpadTouchStart} = Util;\nconst {assert} = InteractiveUtil;\n\nconst ROTATE_SNAP_DEGREES = 15;\n\nconst DEGREE_SIGN = \"\\u00B0\";\nconst RENDER_TRANSFORM_DELAY_IN_MS = 300;\nconst ROTATE_HANDLE_DIST = 1.5;\nconst REFLECT_ROTATE_HANDLE_DIST = 2;\nconst REFLECT_BUTTON_SIZE = 1;\nconst defaultBoxSize = 400;\nconst defaultBackgroundImage = {\n    url: null,\n} as const;\n\n/* Does a pluck on keys inside objects in an object\n *\n * Ex:\n * tools = {\n *     translation: {\n *         enabled: true\n *     },\n *     rotation: {\n *         enabled: false\n *     }\n * };\n * pluckObject(tools, \"enabled\") returns {\n *     translation: true\n *     rotation: false\n * }\n */\nfunction pluckObject(object, subKey: string) {\n    return _.object(\n        _.map(object, function (value, key) {\n            return [key, value[subKey]];\n        }),\n    );\n}\n\nconst defaultGraphProps = function (setProps, boxSize) {\n    setProps = setProps || {};\n    const labels = setProps.labels || [\"x\", \"y\"];\n    const range = setProps.range || [\n        [-10, 10],\n        [-10, 10],\n    ];\n    const step = setProps.step || [1, 1];\n    const gridStep = setProps.gridStep || getGridStep(range, step, boxSize);\n    return {\n        box: [boxSize, boxSize],\n        labels: labels,\n        range: range,\n        step: step,\n        gridStep: gridStep,\n        valid: true,\n        backgroundImage: defaultBackgroundImage,\n        markings: \"grid\",\n        showProtractor: false,\n    };\n};\n\nconst defaultTransformerProps = {\n    apiOptions: ApiOptions.defaults,\n    gradeEmpty: false,\n    graphMode: \"interactive\",\n    listMode: \"dynamic\",\n    graph: {},\n    tools: {\n        translation: {\n            enabled: true,\n            required: false,\n            constraints: {},\n        },\n        rotation: {\n            enabled: true,\n            required: false,\n            constraints: {\n                fixed: false,\n            },\n            coord: [1, 6],\n        },\n        reflection: {\n            enabled: true,\n            required: false,\n            constraints: {\n                fixed: false,\n            },\n            coords: [\n                [2, -4],\n                [2, 2],\n            ],\n        },\n        dilation: {\n            enabled: true,\n            required: false,\n            constraints: {\n                fixed: false,\n            },\n            coord: [6, 6],\n        },\n    },\n    drawSolutionShape: true,\n    starting: {\n        shape: {\n            type: \"polygon-3\",\n            coords: [\n                [2, 2],\n                [2, 6],\n                [7, 2],\n            ],\n        },\n        transformations: [],\n    },\n    correct: {\n        shape: {\n            type: \"polygon-3\",\n            coords: [\n                [2, 2],\n                [2, 6],\n                [7, 2],\n            ],\n        },\n        transformations: [],\n    },\n} as const;\n\nfunction colorForTool(tool) {\n    return tool.constraints.fixed ? KhanColors.DYNAMIC : KhanColors.INTERACTIVE;\n}\n\n/* Scales a distance from the default range of\n * [-10, 10] to a given props.range pair\n *\n * Used for sizing various transformation tools\n * (rotation handle, dilation circle)\n */\nfunction scaleToRange(dist: number, range) {\n    const spreadX = range[0][1] - range[0][0];\n    const spreadY = range[1][1] - range[1][0];\n\n    return (dist * Math.max(spreadX, spreadY)) / 20;\n}\n\nfunction dilatePointFromCenter(\n    point: any,\n    dilationCenter: Coord,\n    scale: number,\n) {\n    const pv = kvector.subtract(point, dilationCenter);\n    const pvScaled = kvector.scale(pv, scale);\n    const transformedPoint = kvector.add(dilationCenter, pvScaled);\n    return transformedPoint;\n}\n\n// TODO(jack): i18nize this\nfunction stringFromDecimal(number) {\n    return String(KhanMath.roundTo(9, number));\n}\n\nfunction stringFromFraction(number) {\n    const frac = KhanMath.toFraction(number, knumber.DEFAULT_TOLERANCE);\n    if (frac[1] === 1) {\n        return stringFromDecimal(number);\n    }\n    return stringFromDecimal(frac[0]) + \"/\" + stringFromDecimal(frac[1]);\n}\n\nfunction texFromPoint(point: Coord) {\n    const {TeX} = getDependencies();\n\n    return [\n        <TeX key=\"(\">(</TeX>,\n        stringFromDecimal(point[0]),\n        <TeX key=\",\">{\", {}\"}</TeX>,\n        stringFromDecimal(point[1]),\n        <TeX key=\")\">)</TeX>,\n    ];\n}\n\nfunction texFromVector(vector) {\n    const {TeX} = getDependencies();\n\n    return [\n        <TeX key=\"<\">{i18n.doNotTranslate(\"\\\\langle\")}</TeX>,\n        stringFromDecimal(vector[0]),\n        <TeX key=\",\">{\", {}\"}</TeX>,\n        stringFromDecimal(vector[1]),\n        <TeX key=\">\">{i18n.doNotTranslate(\"\\\\rangle\")}</TeX>,\n    ];\n}\n\nfunction texFromAngleDeg(angleDeg: number) {\n    return stringFromDecimal(angleDeg) + DEGREE_SIGN;\n}\n\nfunction orderInsensitiveCoordsEqual(coords1, coords2: any) {\n    coords1 = _.clone(coords1).sort(kpoint.compare);\n    coords2 = _.clone(coords2).sort(kpoint.compare);\n    return _.all(\n        _.map(coords1, function (coord1, i) {\n            const coord2 = coords2[i];\n            return kpoint.equal(coord1, coord2);\n        }),\n    );\n}\n\nconst inputComponentForApiOptions = (apiOptions) => {\n    if (apiOptions.customKeypad) {\n        return SimpleKeypadInput;\n    }\n    return NumberInput;\n};\n\n/* Perform operations on raw transform objects */\nconst TransformOps = {\n    apply: function (transform: TransformerTransformation) {\n        // Any transformation with empty text boxes is a no-op until\n        // filled out (these show up as nulls in transform.vector/line/etc).\n        // TODO (jack): Merge this just into reflections now that other\n        // transforms are always valid (after merging transformation\n        // collapsing, which may use isValid)\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'PerseusTransformerTransformation' is not assignable to parameter of type 'never'.\n        if (!Transformations[transform.type].isValid(transform)) {\n            return _.identity; // do not transform the coord\n        }\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'PerseusTransformerTransformation' is not assignable to parameter of type 'never'.\n        return Transformations[transform.type].apply(transform);\n    },\n\n    append: function (transformList, newTransform) {\n        // Append newTransform to transformList, and collapse the last\n        // two transforms if they are collapsable\n        const results = TransformOps._appendAndCollapseLastTwo(\n            transformList,\n            newTransform,\n        );\n        // Collapse any no-ops at the end of the transformation list\n        return TransformOps._collapseFinalNoOps(results);\n    },\n\n    _collapseFinalNoOps: function (transforms) {\n        // Collapse no-op transformations at the end of the list\n        if (transforms.length && TransformOps.isNoOp(_.last(transforms))) {\n            return _.initial(transforms);\n        }\n        return transforms;\n    },\n\n    _appendAndCollapseLastTwo: function (transformList, newTransform) {\n        if (!transformList.length) {\n            return [newTransform];\n        }\n        const collapsed = TransformOps.collapse(\n            _.last(transformList),\n            newTransform,\n        );\n        return _.initial(transformList).concat(collapsed);\n    },\n\n    isNoOp: function (transform) {\n        return Transformations[transform.type].isNoOp(transform);\n    },\n\n    collapse: function (transform1, transform2) {\n        // We can only collapse transforms that have the same type\n        if (transform1.type !== transform2.type) {\n            return [transform1, transform2];\n        }\n\n        // Clicking the button again removes empty transformations\n        if (\n            TransformOps.isEmpty(transform1) &&\n            TransformOps.isEmpty(transform2)\n        ) {\n            return [];\n        }\n\n        // Don't collapse invalid transformations otherwise\n        if (\n            !TransformOps.isValid(transform1) ||\n            !TransformOps.isValid(transform2)\n        ) {\n            return [transform1, transform2];\n        }\n\n        return TransformOps._collapseValidMonotypedTransforms(\n            transform1,\n            transform2,\n        );\n    },\n\n    isValid: function (transform: TransformerTransformation): boolean {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'PerseusTransformerTransformation' is not assignable to parameter of type 'never'.\n        return Transformations[transform.type].isValid(transform);\n    },\n\n    isEmpty: function (transform: TransformerTransformation): boolean {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'PerseusTransformerTransformation' is not assignable to parameter of type 'never'.\n        return Transformations[transform.type].isEmpty(transform);\n    },\n\n    _collapseValidMonotypedTransforms: function (transform1, transform2) {\n        let collapsed = Transformations[transform1.type].collapse(\n            transform1,\n            transform2,\n        );\n        if (collapsed) {\n            // Force all answers into an array\n            if (!_.isArray(collapsed)) {\n                collapsed = [collapsed];\n            }\n            // Add types to all transforms in the answer\n            _.each(collapsed, function (transform) {\n                transform.type = transform1.type;\n            });\n            return collapsed;\n        }\n        // These transforms can't be collapsed together\n        return [transform1, transform2];\n    },\n\n    toTeX: function (transform) {\n        return Transformations[transform.type].toTeX(transform);\n    },\n\n    /* A react representation of this transform object */\n    ListItem: createReactClass({\n        displayName: \"ListItem\",\n\n        render: function () {\n            if (this.props.mode === \"dynamic\") {\n                return <div>{TransformOps.toTeX(this.props.transform)}</div>;\n            }\n            if (this.props.mode === \"interactive\") {\n                const TransformClass =\n                    Transformations[this.props.transform.type].Input;\n                return (\n                    <TransformClass\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"transform\"\n                        onChange={this.handleChange}\n                        onFocus={this.props.onFocus}\n                        onBlur={this.props.onBlur}\n                        keypadElement={this.props.keypadElement}\n                        apiOptions={this.props.apiOptions}\n                        {...this.props.transform}\n                    />\n                );\n            }\n            throw new PerseusError(\n                \"Invalid mode: \" + this.props.mode,\n                Errors.InvalidInput,\n            );\n        },\n\n        value: function () {\n            if (this.props.mode === \"interactive\") {\n                return _.extend(\n                    {\n                        type: this.props.transform.type,\n                    },\n                    // eslint-disable-next-line react/no-string-refs\n                    this.refs.transform.value(),\n                );\n            }\n            return this.props.transform;\n        },\n\n        handleChange: _.debounce(function (callback) {\n            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n            this.props.onChange(this.value(), callback);\n        }, RENDER_TRANSFORM_DELAY_IN_MS),\n\n        /* InputPath API: depending on the API call, this could involve simply\n         * navigating to the right ref and calling the function on that\n         * component, or threading the call down and returning the result. */\n        _getComponentAtPath: function (path) {\n            // eslint-disable-next-line react/no-string-refs\n            const transform = this.refs.transform;\n            const ref = _.head(path);\n            return transform.refs[ref];\n        },\n\n        focus: function () {\n            // eslint-disable-next-line react/no-string-refs\n            const transform = this.refs.transform;\n            const path = _.head(transform.getInputPaths());\n            if (path) {\n                this.focusInputPath(path);\n            }\n        },\n\n        focusInputPath: function (path) {\n            this._getComponentAtPath(path).focus();\n        },\n\n        blurInputPath: function (path) {\n            this._getComponentAtPath(path).blur();\n        },\n\n        getDOMNodeForPath: function (path) {\n            return ReactDOM.findDOMNode(this._getComponentAtPath(path));\n        },\n\n        getGrammarTypeForPath: function (path) {\n            return \"number\";\n        },\n\n        setInputValue: function (path, value: string | number, cb) {\n            // `value` comes in as a string on mobile, but we need a number\n            // We let through the empty string so that \"Clear\" works -- in\n            // that case, the transformer widget will just act as if there is\n            // no input, which is what we want.\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'length' does not exist on type 'string | number'.\n            if (value.length) {\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string | number' is not assignable to parameter of type 'string'.\n                value = parseFloat(value);\n                if (isNaN(value)) {\n                    return;\n                }\n            }\n            // eslint-disable-next-line react/no-string-refs\n            this.refs.transform.setInputValue(path, value, cb);\n        },\n\n        getInputPaths: function () {\n            // If we're in dynamic mode, then the list items are made up of\n            // static text.\n            if (this.props.mode === \"dynamic\") {\n                return [];\n            }\n            // eslint-disable-next-line react/no-string-refs\n            return this.refs.transform.getInputPaths();\n        },\n    }),\n} as const;\n\nconst Transformations = {\n    translation: {\n        // I18N: As in the command, \"Translate the polygon\"\n        verbName: i18n._(\"Translate\"),\n        nounName: i18n._(\"Translation\"),\n        lowerNounName: i18n._(\"translation\"),\n        apply: function (transform: TranslationTransformation) {\n            return function (coord) {\n                return kvector.add(coord, transform.vector);\n            };\n        },\n        isValid: function (transform: TranslationTransformation) {\n            return (\n                _.isFinite(transform.vector[0]) &&\n                _.isFinite(transform.vector[1])\n            );\n        },\n        isEmpty: function (transform: TranslationTransformation) {\n            return transform.vector[0] === null && transform.vector[1] === null;\n        },\n        isNoOp: function (transform) {\n            return kvector.equal(transform.vector, [0, 0]);\n        },\n        collapse: function (\n            transform1: TranslationTransformation,\n            transform2: TranslationTransformation,\n        ) {\n            return {\n                vector: kvector.add(transform1.vector, transform2.vector),\n            };\n        },\n        toTeX: function (transform: TranslationTransformation) {\n            // I18N: As in the command, \"Translation by <3, 1>\"\n            return i18n.$_(\"Translation by %(vector)s\", {\n                vector: texFromVector(transform.vector),\n            });\n        },\n        Input: class extends React.Component<any, any> {\n            state = {\n                vector: this.props.vector || [null, null],\n            };\n\n            componentDidUpdate(prevProps: any) {\n                if (!deepEq(this.props, prevProps)) {\n                    this.setState({vector: this.props.vector});\n                }\n            }\n\n            render(): React.ReactNode {\n                const InputComponent = inputComponentForApiOptions(\n                    this.props.apiOptions,\n                );\n                const {TeX} = getDependencies();\n\n                const vector = [\n                    <TeX key=\"<\">{i18n.doNotTranslate(\"\\\\langle\")}</TeX>,\n                    <InputComponent\n                        key=\"vec_x\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"x\"\n                        placeholder={0}\n                        value={this.state.vector[0]}\n                        useArrowKeys={true}\n                        onChange={(val0) => {\n                            const val1 = this.state.vector[1];\n                            this.setState({vector: [val0, val1]}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"x\")}\n                        onBlur={_.partial(this.props.onBlur, \"x\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\",\">{\", {}\"}</TeX>,\n                    <InputComponent\n                        key=\"vec_y\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"y\"\n                        placeholder={0}\n                        value={this.state.vector[1]}\n                        useArrowKeys={true}\n                        onChange={(val1) => {\n                            const val0 = this.state.vector[0];\n                            this.setState({vector: [val0, val1]}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"y\")}\n                        onBlur={_.partial(this.props.onBlur, \"y\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\">\">{i18n.doNotTranslate(\"\\\\rangle\")}</TeX>,\n                ];\n                return (\n                    <div>\n                        {i18n.$_(\"Translation by %(vector)s\", {vector: vector})}\n                    </div>\n                );\n            }\n\n            value = () => {\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const x = this.refs.x.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const y = this.refs.y.getValue();\n                return {\n                    vector: [x, y],\n                };\n            };\n\n            /* InputPath API */\n            setInputValue = (path, value, cb) => {\n                const id = _.first(path);\n                const vector = _.clone(this.state.vector);\n                if (id === \"x\") {\n                    vector[0] = value;\n                } else if (id === \"y\") {\n                    vector[1] = value;\n                }\n                this.setState({vector: vector}, () => {\n                    this.props.onChange(cb);\n                });\n            };\n\n            getInputPaths = () => {\n                return [[\"x\"], [\"y\"]];\n            };\n        },\n    },\n\n    rotation: {\n        // I18N: As in the command, \"Rotate the polygon\"\n        verbName: i18n._(\"Rotate\"),\n        nounName: i18n._(\"Rotation\"),\n        lowerNounName: i18n._(\"rotation\"),\n        apply: function (transform: RotationTransformation) {\n            return function (coord: any) {\n                return kpoint.rotateDeg(\n                    coord,\n                    transform.angleDeg,\n                    transform.center,\n                );\n            };\n        },\n        isValid: function (transform: RotationTransformation) {\n            return (\n                _.isFinite(transform.angleDeg) &&\n                _.isFinite(transform.center[0]) &&\n                _.isFinite(transform.center[1])\n            );\n        },\n        isEmpty: function (transform: RotationTransformation) {\n            return (\n                transform.angleDeg === null &&\n                transform.center[0] === null &&\n                transform.center[1] === null\n            );\n        },\n        isNoOp: function (transform: RotationTransformation) {\n            return knumber.equal(transform.angleDeg, 0);\n        },\n        collapse: function (\n            transform1: RotationTransformation,\n            transform2: RotationTransformation,\n        ) {\n            if (!kpoint.equal(transform1.center, transform2.center)) {\n                return false;\n            }\n            return {\n                center: transform1.center,\n                angleDeg: transform1.angleDeg + transform2.angleDeg,\n            };\n        },\n        toTeX: function (transform: RotationTransformation) {\n            return i18n.$_(\"Rotation by %(degrees)s about %(point)s\", {\n                degrees: texFromAngleDeg(transform.angleDeg),\n                point: texFromPoint(transform.center),\n            });\n        },\n        Input: class extends React.Component<any, any> {\n            state = {\n                center: this.props.center || [null, null],\n                angleDeg: this.props.angleDeg || null,\n            };\n\n            componentDidUpdate(prevProps: any) {\n                if (!deepEq(this.props, prevProps)) {\n                    this.setState({\n                        center: this.props.center,\n                        angleDeg: this.props.angleDeg,\n                    });\n                }\n            }\n\n            render(): React.ReactNode {\n                const InputComponent = inputComponentForApiOptions(\n                    this.props.apiOptions,\n                );\n                const {TeX} = getDependencies();\n\n                const point = [\n                    <TeX key=\"(\">(</TeX>,\n                    <InputComponent\n                        key=\"X\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"centerX\"\n                        placeholder={0}\n                        value={this.state.center[0]}\n                        useArrowKeys={true}\n                        onChange={(val0) => {\n                            const val1 = this.state.center[1];\n                            this.setState({center: [val0, val1]}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"centerX\")}\n                        onBlur={_.partial(this.props.onBlur, \"centerX\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\",\">{\", {}\"}</TeX>,\n                    <InputComponent\n                        key=\"Y\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"centerY\"\n                        placeholder={0}\n                        value={this.state.center[1]}\n                        useArrowKeys={true}\n                        onChange={(val1) => {\n                            const val0 = this.state.center[0];\n                            this.setState({center: [val0, val1]}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"centerY\")}\n                        onBlur={_.partial(this.props.onBlur, \"centerY\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\")\">)</TeX>,\n                ];\n                const degrees = [\n                    <InputComponent\n                        key=\"deg\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"angleDeg\"\n                        placeholder={0}\n                        value={this.state.angleDeg}\n                        useArrowKeys={true}\n                        onChange={(val) => {\n                            this.setState({angleDeg: val}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"angleDeg\")}\n                        onBlur={_.partial(this.props.onBlur, \"angleDeg\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    DEGREE_SIGN,\n                ];\n                // I18N: %(point)s must come before %(degrees)s in this phrase\n                const text = i18n.$_(\n                    \"Rotation about %(point)s by %(degrees)s\",\n                    {\n                        point,\n                        degrees,\n                    },\n                );\n\n                return <div>{text}</div>;\n            }\n\n            value = () => {\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const angleDeg = this.refs.angleDeg.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const centerX = this.refs.centerX.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const centerY = this.refs.centerY.getValue();\n                return {\n                    angleDeg: angleDeg,\n                    center: [centerX, centerY],\n                };\n            };\n\n            /* InputPath API */\n            setInputValue = (path, value, cb) => {\n                const id = _.first(path);\n                let angleDeg = _.clone(this.state.angleDeg);\n                const center = _.clone(this.state.center);\n                if (id === \"angleDeg\") {\n                    angleDeg = value;\n                } else if (id === \"centerX\") {\n                    center[0] = value;\n                } else if (id === \"centerY\") {\n                    center[1] = value;\n                }\n                this.setState({angleDeg: angleDeg, center: center}, () => {\n                    this.props.onChange(cb);\n                });\n            };\n\n            getInputPaths = () => {\n                return [[\"centerX\"], [\"centerY\"], [\"angleDeg\"]];\n            };\n        },\n    },\n\n    reflection: {\n        // I18N: As in the command, \"Reflect the polygon\"\n        verbName: i18n._(\"Reflect\"),\n        nounName: i18n._(\"Reflection\"),\n        lowerNounName: i18n._(\"reflection\"),\n        apply: function (transform: ReflectionTransformation) {\n            return function (coord: any) {\n                return kpoint.reflectOverLine(coord, transform.line);\n            };\n        },\n        isValid: function (transform: ReflectionTransformation) {\n            // A bit hacky, but we'll also define reflecting over a\n            // single point as a no-op, to avoid NaN fun.\n            return (\n                _.all(_.flatten(transform.line), _.isFinite) &&\n                !kpoint.equal(transform.line[0], transform.line[1])\n            );\n        },\n        isEmpty: function (transform: ReflectionTransformation) {\n            return _.all(_.flatten(transform.line), _.isNull);\n        },\n        isNoOp: function (transform: ReflectionTransformation) {\n            // Invalid transforms are implicitly no-ops, so we don't\n            // have to catch that case here.\n            return false;\n        },\n        collapse: function (\n            transform1: ReflectionTransformation,\n            transform2: ReflectionTransformation,\n        ) {\n            if (!kline.equal(transform1.line, transform2.line)) {\n                return false;\n            }\n            return [];\n        },\n        toTeX: function (transform) {\n            const point1 = transform.line[0];\n            const point2 = transform.line[1];\n            return i18n.$_(\n                \"Reflection over the line from %(point1)s to %(point2)s\",\n                {\n                    point1: texFromPoint(point1),\n                    point2: texFromPoint(point2),\n                },\n            );\n        },\n        Input: class extends React.Component<any, any> {\n            state = {\n                line: this.props.line || [\n                    [null, null],\n                    [null, null],\n                ],\n            };\n\n            componentDidUpdate(prevProps) {\n                if (!deepEq(this.props, prevProps)) {\n                    this.setState({line: this.props.line});\n                }\n            }\n\n            render(): React.ReactNode {\n                const InputComponent = inputComponentForApiOptions(\n                    this.props.apiOptions,\n                );\n                const {TeX} = getDependencies();\n\n                const point1 = [\n                    <TeX key=\"(\">(</TeX>,\n                    <InputComponent\n                        key=\"x1\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"x1\"\n                        value={this.state.line[0][0]}\n                        useArrowKeys={true}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        onChange={this.changePoint.bind(this, 0, 0)}\n                        onFocus={_.partial(this.props.onFocus, \"x1\")}\n                        onBlur={_.partial(this.props.onBlur, \"x1\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\",\">{\", {}\"}</TeX>,\n                    <InputComponent\n                        key=\"y1\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"y1\"\n                        value={this.state.line[0][1]}\n                        useArrowKeys={true}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        onChange={this.changePoint.bind(this, 0, 1)}\n                        onFocus={_.partial(this.props.onFocus, \"y1\")}\n                        onBlur={_.partial(this.props.onBlur, \"y1\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\")\">)</TeX>,\n                ];\n                const point2 = [\n                    <TeX key=\"(\">(</TeX>,\n                    <InputComponent\n                        key=\"x2\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"x2\"\n                        value={this.state.line[1][0]}\n                        useArrowKeys={true}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        onChange={this.changePoint.bind(this, 1, 0)}\n                        onFocus={_.partial(this.props.onFocus, \"x2\")}\n                        onBlur={_.partial(this.props.onBlur, \"x2\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\",\">{\", {}\"}</TeX>,\n                    <InputComponent\n                        key=\"y2\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"y2\"\n                        value={this.state.line[1][1]}\n                        useArrowKeys={true}\n                        // eslint-disable-next-line react/jsx-no-bind\n                        onChange={this.changePoint.bind(this, 1, 1)}\n                        onFocus={_.partial(this.props.onFocus, \"y2\")}\n                        onBlur={_.partial(this.props.onBlur, \"y2\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\")\">)</TeX>,\n                ];\n                return (\n                    <div>\n                        {i18n.$_(\n                            \"Reflection over the line from \" +\n                                \"%(point1)s to %(point2)s\",\n                            {point1, point2},\n                        )}\n                    </div>\n                );\n            }\n\n            changePoint = (\n                i: undefined | number,\n                j: undefined | number,\n                val: any,\n                cb,\n            ) => {\n                const line = _.map(this.state.line, _.clone);\n                // @ts-expect-error [FEI-5003] - TS2538 - Type 'undefined' cannot be used as an index type.\n                line[i][j] = val;\n                this.setState({line: line}, () => {\n                    this.props.onChange(cb);\n                });\n            };\n\n            value = () => {\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const x1 = this.refs.x1.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const y1 = this.refs.y1.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const x2 = this.refs.x2.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const y2 = this.refs.y2.getValue();\n                return {\n                    line: [\n                        [x1, y1],\n                        [x2, y2],\n                    ],\n                };\n            };\n\n            /* InputPath API */\n            setInputValue = (path: any, value: any, cb: any) => {\n                const id = _.first(path);\n                let j;\n                if (id[0] === \"x\") {\n                    j = 0;\n                } else if (id[0] === \"y\") {\n                    j = 1;\n                }\n                let i;\n                if (id[1] === \"1\") {\n                    i = 0;\n                } else if (id[1] === \"2\") {\n                    i = 1;\n                }\n                this.changePoint(i, j, value, cb);\n            };\n\n            getInputPaths = () => {\n                return [[\"x1\"], [\"y1\"], [\"x2\"], [\"y2\"]];\n            };\n        },\n    },\n\n    dilation: {\n        // I18N: As in the command, \"Dilate the polygon\"\n        verbName: i18n._(\"Dilate\"),\n        nounName: i18n._(\"Dilation\"),\n        lowerNounName: i18n._(\"dilation\"),\n        apply: function (transform: DilationTransformation) {\n            return function (coord: any) {\n                return dilatePointFromCenter(\n                    coord,\n                    transform.center,\n                    transform.scale,\n                );\n            };\n        },\n        isValid: function (transform: DilationTransformation) {\n            return (\n                _.isFinite(transform.scale) &&\n                _.isFinite(transform.center[0]) &&\n                _.isFinite(transform.center[1])\n            );\n        },\n        isEmpty: function (transform: DilationTransformation) {\n            return (\n                transform.scale === null &&\n                transform.center[0] === null &&\n                transform.center[1] === null\n            );\n        },\n        isNoOp: function (transform: DilationTransformation) {\n            return knumber.equal(transform.scale, 1);\n        },\n        collapse: function (\n            transform1: DilationTransformation,\n            transform2: DilationTransformation,\n        ) {\n            if (!kpoint.equal(transform1.center, transform2.center)) {\n                return false;\n            }\n            return {\n                center: transform1.center,\n                scale: transform1.scale * transform2.scale,\n            };\n        },\n        toTeX: function (transform: DilationTransformation) {\n            const scaleString = stringFromFraction(transform.scale);\n            return i18n.$_(\"Dilation of scale %(scale)s about %(point)s\", {\n                scale: scaleString,\n                point: texFromPoint(transform.center),\n            });\n        },\n        Input: class extends React.Component<any, any> {\n            state = {\n                center: this.props.center || [null, null],\n                scale: this.props.scale || null,\n            };\n\n            componentDidUpdate(prevProps: any) {\n                if (!deepEq(this.props, prevProps)) {\n                    this.setState({\n                        center: this.props.center,\n                        scale: this.props.scale,\n                    });\n                }\n            }\n\n            render(): React.ReactNode {\n                const InputComponent = inputComponentForApiOptions(\n                    this.props.apiOptions,\n                );\n                const {TeX} = getDependencies();\n\n                const point = [\n                    <TeX key=\"(\">(</TeX>,\n                    <InputComponent\n                        key=\"point_x\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"x\"\n                        placeholder={0}\n                        value={this.state.center[0]}\n                        useArrowKeys={true}\n                        onChange={(val0) => {\n                            const val1 = this.state.center[1];\n                            this.setState({center: [val0, val1]}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"x\")}\n                        onBlur={_.partial(this.props.onBlur, \"x\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\",\">{\", {}\"}</TeX>,\n                    <InputComponent\n                        key=\"point_y\"\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"y\"\n                        placeholder={0}\n                        value={this.state.center[1]}\n                        useArrowKeys={true}\n                        onChange={(val1) => {\n                            const val0 = this.state.center[0];\n                            this.setState({center: [val0, val1]}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"y\")}\n                        onBlur={_.partial(this.props.onBlur, \"y\")}\n                        keypadElement={this.props.keypadElement}\n                    />,\n                    <TeX key=\")\">)</TeX>,\n                ];\n                const scale = (\n                    <InputComponent\n                        // eslint-disable-next-line react/no-string-refs\n                        ref=\"scale\"\n                        placeholder={1}\n                        value={this.state.scale}\n                        useArrowKeys={true}\n                        onChange={(val) => {\n                            this.setState({scale: val}, () => {\n                                this.props.onChange();\n                            });\n                        }}\n                        onFocus={_.partial(this.props.onFocus, \"scale\")}\n                        onBlur={_.partial(this.props.onBlur, \"scale\")}\n                        keypadElement={this.props.keypadElement}\n                    />\n                );\n                return (\n                    <div>\n                        {i18n.$_(\"Dilation about %(point)s by %(scale)s\", {\n                            point,\n                            scale,\n                        })}\n                    </div>\n                );\n            }\n\n            value = () => {\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const scale = this.refs.scale.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const x = this.refs.x.getValue();\n                // eslint-disable-next-line react/no-string-refs\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getValue' does not exist on type 'ReactInstance'.\n                const y = this.refs.y.getValue();\n                return {\n                    scale: scale,\n                    center: [x, y],\n                };\n            };\n\n            /* InputPath API */\n            setInputValue = (path: any, value, cb: any) => {\n                const id = _.first(path);\n                let scale = this.state.scale;\n                const center = _.clone(this.state.center);\n                if (id === \"x\") {\n                    center[0] = value;\n                } else if (id === \"y\") {\n                    center[1] = value;\n                } else if (id === \"scale\") {\n                    scale = value;\n                }\n                this.setState({scale: scale, center: center}, () => {\n                    this.props.onChange(cb);\n                });\n            };\n\n            getInputPaths = () => {\n                return [[\"x\"], [\"y\"], [\"scale\"]];\n            };\n        },\n    },\n} as const;\n\n/* Various functions to deal with different shape types */\nconst ShapeTypes = {\n    getPointCountForType: function (type) {\n        const splitType = type.split(\"-\");\n        if (splitType[0] === \"polygon\") {\n            return splitType[1] || 3;\n        }\n        if (splitType[0] === \"line\" || splitType[0] === \"lineSegment\") {\n            return 2;\n        }\n        if (splitType[0] === \"angle\") {\n            return 3;\n        }\n        if (splitType[0] === \"circle\") {\n            return 2;\n        }\n        if (splitType[0] === \"point\") {\n            return 1;\n        }\n    },\n\n    addMovableShape: function (graphie, options) {\n        if (options.editable && options.translatable) {\n            throw new PerseusError(\n                \"It doesn't make sense to have a movable shape \" +\n                    \"where you can stretch the points and translate them \" +\n                    \"simultaneously. options: \" +\n                    JSON.stringify(options),\n                Errors.InvalidInput,\n            );\n        }\n\n        const points = _.map(options.shape.coords, function (coord) {\n            let isMoving = false;\n            let previousCoord = coord;\n\n            const onMove = function (x, y: any) {\n                if (!isMoving) {\n                    previousCoord = currentPoint.coord;\n                    isMoving = true;\n                }\n\n                let moveVector = kvector.subtract([x, y], currentPoint.coord);\n\n                // Translate from (x, y) semantics to (dX, dY) semantics\n                // This is more useful for translations on multiple points,\n                // where we care about how the points moved, not where any\n                // individual point ended up\n                if (options.onMove) {\n                    moveVector = options.onMove(moveVector[0], moveVector[1]);\n                }\n\n                // Perform a translation on all points in this shape when\n                // any point moves\n                if (options.translatable) {\n                    _.each(points, function (point) {\n                        // The point itself will be updated by the\n                        // movablePoint class, so only translate the other\n                        // points\n                        if (point !== currentPoint) {\n                            point.setCoord(\n                                kvector.add(point.coord, moveVector),\n                            );\n                        }\n                    });\n                }\n\n                // Update our shape and our currentPoint\n                // Without this, some shapes (circles, angles) appear\n                // \"bouncy\" as they are updated with currentPoint at the\n                // current mouse coordinate (oldCoord), rather than newCoord\n                const oldCoord = currentPoint.coord;\n                const newCoord = kvector.add(currentPoint.coord, moveVector);\n                // Temporarily change our coordinate so that\n                // shape.update() sees the new coordinate\n                currentPoint.coord = newCoord;\n                shape.update();\n                // ...But don't break onMove, which assumes it\n                // is the only thing changing our coord\n                currentPoint.coord = oldCoord;\n                return newCoord;\n            };\n\n            const onMoveEnd = function () {\n                // onMove isn't guaranteed to be called before onMoveEnd, so\n                // we have to take into account that we may not have moved and\n                // set previousCoord.\n                if (options.onMoveEnd && isMoving) {\n                    isMoving = false;\n                    // We don't use the supplied x and y parameters here\n                    // because MovablePoint's onMoveEnd semantics suck.\n                    // It returns the mouseX, mouseY without processing them\n                    // through onMove, leaving us with weird fractional moves\n                    const change = kvector.subtract(\n                        currentPoint.coord,\n                        previousCoord,\n                    );\n                    options.onMoveEnd(change[0], change[1]);\n                }\n                shape.update();\n            };\n\n            const currentPoint = graphie.addMovablePoint({\n                coord: coord,\n                normalStyle: options.normalPointStyle,\n                highlightStyle: options.highlightPointStyle,\n                constraints: {\n                    fixed: !options.translatable && !options.editable,\n                },\n                visible: options.showPoints,\n                snapX: (options.snap && options.snap[0]) || 0,\n                snapY: (options.snap && options.snap[1]) || 0,\n                bounded: false, // Don't bound it when placing it on the graph\n                onMove: onMove,\n                onMoveEnd: onMoveEnd,\n            });\n\n            // Bound it when moving\n            // We can't set this earlier, because doing so would mean any\n            // points outside of the graph would be moved into a moved into\n            // a position that doesn't preserve the shape\n            currentPoint.bounded = true;\n\n            return currentPoint;\n        });\n\n        const shape = ShapeTypes.addShape(graphie, options, points);\n        const removeShapeWithoutPoints = shape.remove;\n        shape.remove = function () {\n            removeShapeWithoutPoints.apply(shape);\n            _.invoke(points, \"remove\");\n        };\n        return shape;\n    },\n\n    addShape: function (graphie, options, points) {\n        points = points || options.shape.coords;\n\n        const types = ShapeTypes._typesOf(options.shape);\n        const typeOptions =\n            options.shape.options || ShapeTypes.defaultOptions(types);\n\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 4 arguments, but got 3.\n        const shapes = ShapeTypes._mapTypes(\n            types,\n            points,\n            function (type, points, i) {\n                const shapeOptions = _.extend({}, options, typeOptions[i]);\n                return ShapeTypes._addType(graphie, type, points, shapeOptions);\n            },\n        );\n\n        const updateFuncs = _.filter(_.pluck(shapes, \"update\"), _.identity);\n        const update = function () {\n            _.invoke(updateFuncs, \"call\");\n        };\n\n        const removeFuncs = _.filter(_.pluck(shapes, \"remove\"), _.identity);\n        const remove = function () {\n            _.invoke(removeFuncs, \"call\");\n        };\n\n        const getOptions = function () {\n            return _.map(shapes, function (shape) {\n                if (shape.getOptions) {\n                    return shape.getOptions();\n                }\n                return {};\n            });\n        };\n\n        const toJSON = function () {\n            const coords = _.map(points, function (pt) {\n                if (_.isArray(pt)) {\n                    return pt;\n                }\n                return pt.coord;\n            });\n            return {\n                type: types,\n                coords: coords,\n                options: getOptions(),\n            };\n        };\n\n        return {\n            type: types,\n            points: points,\n            update: update,\n            remove: remove,\n            toJSON: toJSON,\n            getOptions: getOptions,\n        };\n    },\n\n    equal: function (shape1, shape2) {\n        const types1 = ShapeTypes._typesOf(shape1);\n        const types2 = ShapeTypes._typesOf(shape2);\n        if (types1.length !== types2.length) {\n            return false;\n        }\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 4 arguments, but got 3.\n        const shapes1 = ShapeTypes._mapTypes(\n            types1,\n            shape1.coords,\n            ShapeTypes._combine,\n        );\n        // @ts-expect-error [FEI-5003] - TS2554 - Expected 4 arguments, but got 3.\n        const shapes2 = ShapeTypes._mapTypes(\n            types2,\n            shape2.coords,\n            ShapeTypes._combine,\n        );\n        return _.all(\n            _.map(shapes1, function (partialShape1, i) {\n                const partialShape2 = shapes2[i];\n                if (partialShape1.type !== partialShape2.type) {\n                    return false;\n                }\n                return ShapeTypes._forType(partialShape1.type).equal(\n                    partialShape1.coords,\n                    partialShape2.coords,\n                );\n            }),\n        );\n    },\n\n    _typesOf: function (shape) {\n        let types = shape.type;\n        if (!_.isArray(types)) {\n            types = [types];\n        }\n        return _.map(types, function (type) {\n            if (type === \"polygon\") {\n                return \"polygon-3\";\n            }\n            return type;\n        });\n    },\n\n    defaultOptions: function (types) {\n        return _.map(types, function (type) {\n            const typeDefaultOptions = ShapeTypes._forType(type).defaultOptions;\n            return _.extend({}, typeDefaultOptions);\n        });\n    },\n\n    _forType: function (type) {\n        const baseType = type.split(\"-\")[0];\n        return ShapeTypes[baseType];\n    },\n\n    _mapTypes: function (types, points, func, context) {\n        return _.map(types, function (type, i) {\n            const pointCount = ShapeTypes.getPointCountForType(type);\n            const currentPoints = _.first(points, pointCount);\n            points = _.rest(points, pointCount);\n            return func.call(context, type, currentPoints, i);\n        });\n    },\n\n    _addType: function (graphie, type, points, options) {\n        const lineCoords = _.isArray(points[0])\n            ? {\n                  coordA: points[0],\n                  coordZ: points[1],\n              }\n            : {\n                  pointA: points[0],\n                  pointZ: points[1],\n              };\n\n        type = type.split(\"-\")[0];\n        if (type === \"polygon\") {\n            const polygon = graphie.addMovablePolygon(\n                _.extend({}, options, {\n                    fixed: !options.editable,\n                    snapX: (options.snap && options.snap[0]) || 0,\n                    snapY: (options.snap && options.snap[1]) || 0,\n                    points: points,\n                    constrainToGraph: false,\n                }),\n            );\n            return {\n                update: polygon.transform.bind(polygon),\n                remove: polygon.remove.bind(polygon),\n            };\n        }\n        if (type === \"line\" || type === \"lineSegment\") {\n            const line = graphie.addMovableLineSegment(\n                _.extend({}, options, lineCoords, {\n                    movePointsWithLine: true,\n                    fixed: true,\n                    constraints: {\n                        fixed: true,\n                    },\n                    extendLine: type === \"line\",\n                }),\n            );\n\n            // TODO(jack): Hide points on uneditable lines when translation\n            // is a vector.\n            // We can't just remove the points yet, because they are the\n            // translation handle for the line.\n            return {\n                update: line.transform.bind(line, true),\n                remove: line.remove.bind(line),\n            };\n        }\n        if (type === \"angle\") {\n            // If this angle is editable, we want to be able to make angles\n            // both larger and smaller than 180 degrees.\n            // If this angle is not editable, it should always maintain\n            // it's angle measure, even if it is reflected (causing the\n            // clockwise-ness of the points to change)\n            const shouldChangeReflexivity = options.editable ? null : false;\n\n            const angle = graphie.addMovableAngle({\n                angleLabel: \"$deg0\",\n                fixed: true,\n                points: points,\n                normalStyle: options.normalStyle,\n                reflex: options.reflex,\n            });\n\n            // Hide non-vertex points on uneditable angles\n            if (!_.isArray(points[0]) && !options.editable) {\n                points[0].remove();\n                points[2].remove();\n            }\n            return {\n                update: angle.update.bind(angle, shouldChangeReflexivity),\n                remove: angle.remove.bind(angle),\n                getOptions: function () {\n                    return {\n                        reflex: angle.isReflex(),\n                    };\n                },\n            };\n        }\n        if (type === \"circle\") {\n            let perimeter = {\n                // temporary object for the first removal\n                remove: _.identity,\n            };\n            const redrawPerim = function () {\n                const coord0 = points[0].coord || points[0];\n                const coord1 = points[1].coord || points[1];\n                const radius = kpoint.distanceToPoint(coord0, coord1);\n                // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n                perimeter.remove();\n                perimeter = graphie.circle(\n                    coord0,\n                    radius,\n                    _.extend(\n                        {\n                            stroke: KhanColors.DYNAMIC,\n                            \"stroke-width\": 2,\n                        },\n                        options.normalStyle,\n                    ),\n                );\n            };\n\n            redrawPerim();\n            if (points[1].remove && !options.editable) {\n                points[1].remove();\n            }\n\n            return {\n                update: redrawPerim,\n                remove: function () {\n                    // Not _.bind because the remove function changes\n                    // when the perimeter is redrawn\n                    // @ts-expect-error [FEI-5003] - TS2554 - Expected 1 arguments, but got 0.\n                    perimeter.remove();\n                },\n            };\n        }\n        if (type === \"point\") {\n            // do nothing\n            return {\n                update: null,\n                remove: null,\n            };\n        }\n        throw new PerseusError(\n            \"Invalid shape type \" + type,\n            Errors.InvalidInput,\n        );\n    },\n\n    _combine: function (type, coords) {\n        return {\n            type: type,\n            coords: coords,\n        };\n    },\n\n    polygon: {\n        equal: orderInsensitiveCoordsEqual,\n    },\n\n    line: {\n        equal: kline.equal,\n    },\n\n    lineSegment: {\n        equal: orderInsensitiveCoordsEqual,\n    },\n\n    angle: {\n        equal: function (points1, points2) {\n            if (!kpoint.equal(points1[1], points2[1])) {\n                return false;\n            }\n\n            const line1_0 = [points1[1], points1[0]];\n            const line1_2 = [points1[1], points1[2]];\n            const line2_0 = [points2[1], points2[0]];\n            const line2_2 = [points2[1], points2[2]];\n\n            const equalUnflipped =\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any[]' is not assignable to parameter of type 'Ray'. | TS2345 - Argument of type 'any[]' is not assignable to parameter of type 'Ray'.\n                kray.equal(line1_0, line2_0) && kray.equal(line1_2, line2_2);\n            const equalFlipped =\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'any[]' is not assignable to parameter of type 'Ray'. | TS2345 - Argument of type 'any[]' is not assignable to parameter of type 'Ray'.\n                kray.equal(line1_0, line2_2) && kray.equal(line1_2, line2_0);\n\n            return equalUnflipped || equalFlipped;\n        },\n\n        defaultOptions: {\n            reflex: false,\n        },\n    },\n\n    circle: {\n        equal: function (points1, points2) {\n            const radius1 = kpoint.distanceToPoint(points1[0], points1[1]);\n            const radius2 = kpoint.distanceToPoint(points2[0], points2[1]);\n            return (\n                kpoint.equal(points1[0], points2[0]) &&\n                knumber.equal(radius1, radius2)\n            );\n        },\n    },\n\n    point: {\n        equal: kpoint.equal,\n    },\n} as const;\n\nconst TransformationListItem = TransformOps.ListItem;\n\nclass TransformationList extends React.Component<any, any> {\n    render(): React.ReactNode {\n        if (this.props.mode === \"static\") {\n            return <span />; // don't render anything\n        }\n\n        const transformationList = _.map(\n            this.props.transformations,\n            function (transform, i) {\n                return (\n                    <TransformationListItem\n                        ref={\"transformation\" + i}\n                        key={\"transformation\" + i}\n                        transform={transform}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        mode={this.props.mode}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onChange={this.handleChange}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onFocus={_.partial(this.props.onFocus, \"\" + i)}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        onBlur={_.partial(this.props.onBlur, \"\" + i)}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        keypadElement={this.props.keypadElement}\n                        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                        apiOptions={this.props.apiOptions}\n                    />\n                );\n            },\n            this,\n        );\n\n        return (\n            <div className=\"perseus-transformation-list\">\n                {transformationList}\n            </div>\n        );\n    }\n\n    _transformationRefs = () => {\n        return _.times(this.props.transformations.length, (i) => {\n            // eslint-disable-next-line react/no-string-refs\n            return this.refs[\"transformation\" + i];\n        });\n    };\n\n    value = () => {\n        return _.invoke(this._transformationRefs(), \"value\");\n    };\n\n    handleChange = (changed: any, callback: any) => {\n        this.props.onChange(this.value(), callback);\n    };\n\n    focusLast = () => {\n        const transformationRefs = this._transformationRefs();\n        if (transformationRefs.length !== 0) {\n            // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2339 - Property 'focus' does not exist on type 'ReactInstance'.\n            _.last(transformationRefs).focus();\n        }\n    };\n}\n\nclass ToolButton extends React.Component<any, any> {\n    render(): React.ReactNode {\n        const classes = this.props.toggled\n            ? \"simple-button exercise-orange toggled highlighted-tool-button\"\n            : \"simple-button\";\n\n        return (\n            <button\n                type=\"button\"\n                className={classes}\n                disabled={this.props.disabled}\n                onClick={this.props.onClick}\n                // @ts-expect-error [FEI-5003] - TS2322 - Type '(e: TouchEvent) => void' is not assignable to type 'TouchEventHandler<HTMLButtonElement>'.\n                onTouchStart={captureScratchpadTouchStart}\n            >\n                {this.props.children}\n            </button>\n        );\n    }\n}\n\nclass ToolsBar extends React.Component<any, any> {\n    state = {\n        selected: null,\n    };\n\n    render(): React.ReactNode {\n        const tools = _.map(\n            Transformations,\n            function (tool, type) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                if (this.props.enabled[type]) {\n                    return (\n                        <ToolButton\n                            key={type}\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            disabled={this.props.apiOptions.readOnly}\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            toggled={this.state.selected === type}\n                            // eslint-disable-next-line react/jsx-no-bind\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            onClick={this.changeSelected.bind(this, type)}\n                        >\n                            {tool.verbName}\n                        </ToolButton>\n                    );\n                }\n            },\n            this,\n        );\n\n        return (\n            <div className=\"transformer-tools-bar\">\n                <span className=\"simple-button-group\">{tools}</span>\n                <button\n                    className=\"transformer-undo-button simple-button\"\n                    type=\"button\"\n                    disabled={this.props.apiOptions.readOnly}\n                    onClick={this.props.onUndoClick}\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type '(e: TouchEvent) => void' is not assignable to type 'TouchEventHandler<HTMLButtonElement>'.\n                    onTouchStart={captureScratchpadTouchStart}\n                >\n                    <InlineIcon {...iconUndo} />\n                    {\" \" + i18n._(\"Undo\")}\n                </button>\n                <div className=\"clear\" />\n            </div>\n        );\n    }\n\n    changeSelected = (tool) => {\n        this.props.removeTool(this.state.selected);\n\n        if (!tool || tool === this.state.selected) {\n            this.setState({\n                selected: null,\n            });\n        } else {\n            this.props.addTool(tool);\n            this.setState({\n                selected: tool,\n            });\n        }\n    };\n}\n\nclass AddTransformBar extends React.Component<any, any> {\n    render(): React.ReactNode {\n        const tools = _.map(\n            Transformations,\n            function (tool, type) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                if (this.props.enabled[type]) {\n                    return (\n                        <ToolButton\n                            key={type}\n                            toggled={false}\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            disabled={this.props.apiOptions.readOnly}\n                            // eslint-disable-next-line react/jsx-no-bind\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation. | TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            onClick={this.changeSelected.bind(this, type)}\n                        >\n                            <InlineIcon {...iconPlus} /> {tool.nounName}\n                        </ToolButton>\n                    );\n                }\n            },\n            this,\n        );\n\n        return (\n            <div className=\"transformer-tools-bar\">\n                {tools}\n                <button\n                    className=\"transformer-undo-button simple-button\"\n                    type=\"button\"\n                    onClick={this.props.onUndoClick}\n                    disabled={this.props.apiOptions.readOnly}\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type '(e: TouchEvent) => void' is not assignable to type 'TouchEventHandler<HTMLButtonElement>'.\n                    onTouchStart={captureScratchpadTouchStart}\n                >\n                    <InlineIcon {...iconUndo} />\n                    {\" \" + i18n._(\"Undo\")}\n                </button>\n                <div className=\"clear\" />\n            </div>\n        );\n    }\n\n    changeSelected = (tool: any) => {\n        if (tool) {\n            this.props.addTool(tool);\n        }\n    };\n}\n\ntype Graphie = any;\ntype Tool = any;\ntype ToolCleanup = any;\n\ntype Rubric = PerseusTransformerWidgetOptions;\ntype RenderProps = PerseusTransformerWidgetOptions; // there's no transform in the exports\ntype UserInput = any;\ntype Props = WidgetProps<RenderProps, Rubric> & {\n    transformations: ReadonlyArray<TransformerTransformation>;\n    keypadElement: any;\n};\n\nclass Transformer extends React.Component<Props> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'tools' has no initializer and is not definitely assigned in the constructor.\n    tools: {\n        [key: string]: Tool;\n    };\n    currentTool: Tool | null | undefined;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'transformations' has no initializer and is not definitely assigned in the constructor.\n    transformations: ReadonlyArray<TransformerTransformation>;\n    shape: any | null | undefined; // This is not the same as TransformerShape\n    dilationCircle: any | null | undefined;\n    rotatePoint: any | null | undefined;\n    rotateHandle: any | null | undefined;\n\n    static defaultProps: any = _.defaults(\n        {\n            transformations: [],\n        },\n        defaultTransformerProps,\n    );\n\n    render(): React.ReactNode {\n        // Fill in any missing value in this.props.graph\n        // this can happen because the graph json doesn't include\n        // box, for example\n        const graph = _.extend(\n            defaultGraphProps(this.props.graph, defaultBoxSize),\n            this.props.graph,\n        );\n\n        const interactiveToolsMode = this.props.graphMode === \"interactive\";\n\n        const ToolsBarClass = interactiveToolsMode ? ToolsBar : AddTransformBar;\n\n        // This style is applied inline because it is dependent on the\n        // size of the graph as set by the graph.box prop, and this also\n        // lets us specify it in the same place the graph's width is\n        // specified.\n        const toolsBar = (\n            <div style={{width: graph.box[0]}}>\n                <ToolsBarClass\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"toolsBar\"\n                    enabled={pluckObject(this.props.tools, \"enabled\")}\n                    apiOptions={this.props.apiOptions}\n                    addTool={this.addTool}\n                    removeTool={this.removeTool}\n                    onUndoClick={this.handleUndoClick}\n                />\n            </div>\n        );\n\n        return (\n            <div className={\"perseus-widget \" + \"perseus-widget-transformer\"}>\n                <Graph\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"graph\"\n                    box={graph.box}\n                    range={graph.range}\n                    labels={graph.labels}\n                    step={graph.step}\n                    gridStep={graph.gridStep}\n                    markings={graph.markings}\n                    backgroundImage={graph.backgroundImage}\n                    showProtractor={graph.showProtractor}\n                    onGraphieUpdated={this.setupGraphie}\n                    setDrawingAreaAvailable={\n                        this.props.apiOptions.setDrawingAreaAvailable\n                    }\n                />\n\n                {!interactiveToolsMode && i18n._(\"Add transformations below:\")}\n\n                {this.props.graphMode === \"static\" && [\n                    <br key=\"static-br\" />,\n                    <em key=\"static-nomove\">\n                        {\" \"}\n                        {i18n._(\n                            \"Note: For this question, the shape will not move.\",\n                        )}{\" \"}\n                    </em>,\n                ]}\n\n                {interactiveToolsMode && toolsBar}\n\n                <TransformationList\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"transformationList\"\n                    mode={this.props.listMode}\n                    transformations={this.props.transformations}\n                    onChange={this.setTransformationProps}\n                    onFocus={this._handleFocus}\n                    onBlur={this._handleBlur}\n                    keypadElement={this.props.keypadElement}\n                    apiOptions={this.props.apiOptions}\n                />\n\n                {!interactiveToolsMode && toolsBar}\n            </div>\n        );\n    }\n\n    componentDidMount() {\n        this.setupGraphie(this.graphie());\n    }\n\n    componentDidUpdate(prevProps: Props) {\n        if (this.shouldSetupGraphie(this.props, prevProps)) {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'reset' does not exist on type 'ReactInstance'.\n            this.refs.graph.reset();\n        } else if (!deepEq(this.props.transformations, this.transformations)) {\n            this.setTransformations(this.props.transformations);\n        }\n    }\n\n    shouldSetupGraphie: (arg1: Props, arg2: Props) => boolean = (\n        nextProps,\n        prevProps,\n    ) => {\n        if (!deepEq(prevProps.starting, nextProps.starting)) {\n            return true;\n        }\n        if (prevProps.graphMode !== nextProps.graphMode) {\n            return true;\n        }\n        if (prevProps.listMode !== nextProps.listMode) {\n            return true;\n        }\n        if (prevProps.drawSolutionShape !== nextProps.drawSolutionShape) {\n            return true;\n        }\n        if (\n            nextProps.drawSolutionShape &&\n            !deepEq(prevProps.correct.shape, nextProps.correct.shape)\n        ) {\n            return true;\n        }\n        if (!deepEq(this.tools, nextProps.tools)) {\n            return true;\n        }\n        return false;\n    };\n\n    graphie: () => Graphie = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type 'ReactInstance'.\n        return this.refs.graph.graphie();\n    };\n\n    setupGraphie: (arg1: Graphie) => void = (graphie) => {\n        // A background image of our solution:\n        if (\n            this.props.drawSolutionShape &&\n            this.props.correct.shape &&\n            this.props.correct.shape.coords\n        ) {\n            // @ts-expect-error [FEI-5003] - TS2554 - Expected 3 arguments, but got 2.\n            ShapeTypes.addShape(graphie, {\n                fixed: true,\n                shape: this.props.correct.shape,\n                normalStyle: {\n                    stroke: KhanColors.GRAY,\n                    \"stroke-dasharray\": \"\",\n                    \"stroke-width\": 2,\n                },\n            });\n        }\n\n        this.currentTool = null;\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'changeSelected' does not exist on type 'ReactInstance'.\n        this.refs.toolsBar.changeSelected(null);\n        this.addTransformerShape(\n            this.props.starting.shape,\n            /* translatable */ false,\n        );\n        this.setTransformations(this.props.transformations);\n\n        // Save a copy of our tools so that we can check future\n        // this.props.tools changes against them\n        // This seems weird, but gives us an easy way to tell whether\n        // props changes were self-inflicted (for which a graphie reset\n        // is not required, and is in fact a bad idea right now because\n        // of resetting the size of the dilation tool).\n        // TODO (jack): A deepClone method would be nice here\n        this.tools = {\n            translation: _.clone(this.props.tools.translation),\n            rotation: _.clone(this.props.tools.rotation),\n            reflection: _.clone(this.props.tools.reflection),\n            dilation: _.clone(this.props.tools.dilation),\n        };\n    };\n\n    /* Applies all transformations in `transformations`\n     * to the starting shape, and updates this.transformations\n     * to reflect this\n     *\n     * Usually called with this.props.transformations\n     */\n    setTransformations: (\n        arg1: ReadonlyArray<TransformerTransformation>,\n    ) => void = (transformations) => {\n        this.resetCoords();\n        this.transformations = _.clone(transformations);\n        _.each(this.transformations, this.applyTransform);\n    };\n\n    // the polygon that we transform\n    addTransformerShape: (arg1: any, arg2: boolean) => void = (\n        shape,\n        translatable,\n    ) => {\n        const self = this;\n        const graphie = this.graphie();\n\n        this.shape = ShapeTypes.addMovableShape(graphie, {\n            shape: shape,\n            editable: false,\n            showPoints: this.props.graphMode !== \"static\",\n            translatable: translatable,\n            onMove: function (dX, dY) {\n                dX = KhanMath.roundToNearest(graphie.snap[0], dX);\n                dY = KhanMath.roundToNearest(graphie.snap[1], dY);\n                // NOTE(kevinb): object is missing .constraints property\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ type: \"translation\"; vector: [any, any]; }' is not assignable to parameter of type 'PerseusTransformerTransformation'.\n                self.addTransform({\n                    type: \"translation\",\n                    vector: [dX, dY],\n                });\n                return [dX, dY];\n            },\n            normalPointStyle: {\n                fill: translatable\n                    ? KhanColors.INTERACTIVE\n                    : KhanColors.DYNAMIC,\n                stroke: translatable\n                    ? KhanColors.INTERACTIVE\n                    : KhanColors.DYNAMIC,\n            },\n            highlightPointStyle: {\n                fill: KhanColors.INTERACTING,\n                stroke: KhanColors.INTERACTING,\n            },\n        });\n    };\n\n    addTool: (arg1: TransformerTransformation[\"type\"]) => void = (toolId) => {\n        const self = this;\n\n        if (this.props.graphMode === \"interactive\") {\n            if (toolId === \"translation\") {\n                this.currentTool = this.addTranslationTool();\n            } else if (toolId === \"rotation\") {\n                this.currentTool = this.addRotationTool();\n            } else if (toolId === \"reflection\") {\n                this.currentTool = this.addReflectionTool();\n            } else if (toolId === \"dilation\") {\n                this.currentTool = this.addDilationTool();\n            } else {\n                throw new PerseusError(\n                    \"Invalid tool id: \" + toolId,\n                    Errors.InvalidInput,\n                );\n            }\n        } else {\n            let transform: TransformerTransformation;\n            if (toolId === \"translation\") {\n                // NOTE(kevinb): object is missing .constraints property\n                transform = {\n                    type: \"translation\",\n                    // NOTE(kevib): these should be numbers\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'number'. | TS2322 - Type 'null' is not assignable to type 'number'.\n                    vector: [null, null],\n                };\n            } else if (toolId === \"rotation\") {\n                // NOTE(kevinb): object is missing .constraints property\n                transform = {\n                    type: \"rotation\",\n                    // NOTE(kevib): these should be numbers\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'number'. | TS2322 - Type 'null' is not assignable to type 'number'.\n                    center: [null, null],\n                    // NOTE(kevib): this should be a number\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'number'.\n                    angleDeg: null,\n                };\n            } else if (toolId === \"reflection\") {\n                // Reflections with nulls in them won't be applied until\n                // fills in the blanks\n                transform = {\n                    type: \"reflection\",\n                    line: [\n                        // NOTE(kevib): these should be numbers\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'number'. | TS2322 - Type 'null' is not assignable to type 'number'.\n                        [null, null],\n                        // NOTE(kevib): these should be numbers\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'number'. | TS2322 - Type 'null' is not assignable to type 'number'.\n                        [null, null],\n                    ],\n                };\n            } else if (toolId === \"dilation\") {\n                // NOTE(kevinb): object is missing .constraints property\n                transform = {\n                    type: \"dilation\",\n                    // NOTE(kevib): these should be numbers\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'number'. | TS2322 - Type 'null' is not assignable to type 'number'.\n                    center: [null, null],\n                    // NOTE(kevib): this should be a number\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'null' is not assignable to type 'number'.\n                    scale: null,\n                };\n            } else {\n                throw new PerseusError(\n                    \"Invalid tool id: \" + toolId,\n                    Errors.InvalidInput,\n                );\n            }\n\n            this.doTransform(transform, function () {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'focusLast' does not exist on type 'ReactInstance'.\n                self.refs.transformationList.focusLast();\n            });\n        }\n    };\n\n    removeTool: (arg1: string) => void = (toolId) => {\n        if (this.currentTool) {\n            this.currentTool.remove();\n        }\n        this.currentTool = null;\n    };\n\n    addTranslationTool: () => any = () => {\n        const self = this;\n        this.shape?.remove();\n        this.addTransformerShape(this.shape?.toJSON(), /* translatable */ true);\n\n        return {\n            remove: function () {\n                self.shape?.remove();\n                self.addTransformerShape(\n                    self.shape?.toJSON(),\n                    /* translatable */ false,\n                );\n            },\n        };\n    };\n\n    // Snaps a coord to this.graphie()'s snap\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(coord: Coord) => number[]' is not assignable to type '(arg1: Coord) => Coord'.\n    snapCoord: (arg1: Coord) => Coord = (coord) => {\n        const graphie = this.graphie();\n        return _.map(coord, function (val, dim) {\n            return KhanMath.roundToNearest(graphie.snap[dim], val);\n        });\n    };\n\n    // Normalize the coords into something that fits the new 45 degree\n    // reflection line.\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(messyCoords: [Coord, Coord]) => any[]' is not assignable to type '(arg1: [Coord, Coord]) => [Coord, Coord]'.\n    normalizeReflectionCoords: (arg1: [Coord, Coord]) => [Coord, Coord] = (\n        messyCoords,\n    ) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Point' is not assignable to parameter of type 'Coord'.\n        const midpoint = this.snapCoord(kline.midpoint(messyCoords));\n        const origDirectionPolar = kvector.polarDegFromCart(\n            kvector.subtract(messyCoords[0], messyCoords[1]),\n        );\n\n        const direction = kvector.cartFromPolarDeg(\n            1,\n            KhanMath.roundToNearest(45, origDirectionPolar[1]),\n        );\n        const coords = _.map(\n            [-1, 1],\n            function (directionCoefficient) {\n                const coord = kvector.add(\n                    midpoint,\n                    kvector.scale(\n                        direction,\n                        directionCoefficient *\n                            // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                            this.scaleToCurrentRange(\n                                REFLECT_ROTATE_HANDLE_DIST,\n                            ),\n                    ),\n                );\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                return this.snapCoord(coord);\n            },\n            this,\n        );\n        return coords;\n    };\n\n    addReflectionTool: () => ToolCleanup = () => {\n        const options = this.props.tools.reflection;\n        if (!options.enabled) {\n            return;\n        }\n        const self = this;\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type 'ReactInstance'.\n        const graphie = this.refs.graph.graphie();\n\n        const updateReflectionTool = function () {\n            self.changeTool(\"reflection\", {\n                coords: _.pluck(reflectPoints, \"coord\"),\n            });\n        };\n\n        const coords = this.normalizeReflectionCoords(options.coords);\n\n        // The points defining the line of reflection; hidden from the\n        // user.\n        const reflectPoints = _.map(\n            coords,\n            function (coord) {\n                return graphie.addMovablePoint({\n                    coord: coord,\n                    visible: false,\n                });\n            },\n            this,\n        );\n\n        // the line of reflection\n        // TODO(jack): graphie.style here is a hack to prevent the dashed\n        // style from leaking into the rest of the shapes. Remove when\n        // graphie.addMovableLineSegment doesn't leak styles anymore.\n        let reflectLine;\n        const normalColor = colorForTool(options);\n        graphie.style({}, function () {\n            reflectLine = graphie.addMovableLineSegment({\n                fixed: options.constraints.fixed,\n                constraints: options.constraints,\n                pointA: reflectPoints[0],\n                pointZ: reflectPoints[1],\n                snapX: graphie.snap[0],\n                snapY: graphie.snap[1],\n                extendLine: true,\n                normalStyle: {\n                    stroke: normalColor,\n                    \"stroke-width\": 2,\n                    \"stroke-dasharray\": \"- \",\n                },\n                highlightStyle: {\n                    stroke: KhanColors.INTERACTING,\n                    \"stroke-width\": 2,\n                    \"stroke-dasharray\": \"- \", // TODO(jack) solid doesn't\n                    // work here, but would be\n                    // nicer\n                },\n                movePointsWithLine: true,\n                onMoveEnd: updateReflectionTool,\n            });\n        });\n\n        // the \"button\" point in the center of the line of reflection\n        const reflectButton = graphie.addReflectButton({\n            fixed: options.constraints.fixed,\n            line: reflectLine,\n            size: this.scaleToCurrentRange(REFLECT_BUTTON_SIZE),\n            onClick: function () {\n                self.doTransform({\n                    type: \"reflection\",\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'any[]' is not assignable to type '[Coord, Coord]'.\n                    line: _.pluck(reflectPoints, \"coord\"),\n                });\n                if (reflectRotateHandle) {\n                    // flip the rotation handle\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'setCoord' does not exist on type 'never'.\n                    reflectRotateHandle.setCoord(\n                        kvector.add(\n                            reflectButton.coord,\n                            kvector.subtract(\n                                reflectButton.coord,\n                                // @ts-expect-error [FEI-5003] - TS2339 - Property 'coord' does not exist on type 'never'.\n                                reflectRotateHandle.coord,\n                            ),\n                        ),\n                    );\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'update' does not exist on type 'never'.\n                    reflectRotateHandle.update();\n                }\n            },\n            normalStyle: {\n                stroke: normalColor,\n                \"stroke-width\": 2,\n                fill: normalColor,\n            },\n            highlightStyle: {\n                stroke: KhanColors.INTERACTING,\n                \"stroke-width\": 3,\n                fill: KhanColors.INTERACTING,\n            },\n            onMoveEnd: updateReflectionTool,\n        });\n\n        let reflectRotateHandle = null;\n        if (!options.constraints.fixed) {\n            // The rotation handle for rotating the line of reflection\n            const initRotateHandleAngle =\n                kvector.polarDegFromCart(\n                    kvector.subtract(\n                        reflectPoints[1].coord,\n                        reflectPoints[0].coord,\n                    ),\n                )[1] + 90; // 90 degrees off of the line\n            reflectRotateHandle = graphie.addRotateHandle({\n                center: reflectButton,\n                radius: this.scaleToCurrentRange(REFLECT_ROTATE_HANDLE_DIST),\n                angleDeg: initRotateHandleAngle,\n                width: this.scaleToCurrentRange(0.24),\n                hoverWidth: this.scaleToCurrentRange(0.4),\n                lengthAngle: 17,\n                onMove: function (newAngle) {\n                    return KhanMath.roundToNearest(45, newAngle);\n                },\n                onMoveEnd: updateReflectionTool,\n            });\n        }\n\n        // Move the reflectButton and reflectRotateHandle with the line\n        $(reflectLine).on(\"move\", function () {\n            reflectButton.update();\n            $(reflectButton).trigger(\"move\"); // update the rotation handle,\n            // which watches for this in util/interactive.js.\n        });\n\n        // Update the line and reflect button when the reflectRotateHandle is\n        // rotated\n        if (reflectRotateHandle) {\n            $(reflectRotateHandle).on(\"move\", function () {\n                const rotateHandleApprox = self.snapCoord(\n                    // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                    reflectRotateHandle.coord,\n                );\n\n                const rotateVector = kvector.subtract(\n                    rotateHandleApprox,\n                    reflectButton.coord,\n                );\n\n                const flipped = reflectButton.isFlipped() ? 1 : 0;\n                reflectPoints[flipped].setCoord(\n                    kvector.add(\n                        reflectButton.coord,\n                        kvector.rotateDeg(rotateVector, 90),\n                    ),\n                );\n                reflectPoints[1 - flipped].setCoord(\n                    kvector.add(\n                        reflectButton.coord,\n                        kvector.rotateDeg(rotateVector, -90),\n                    ),\n                );\n\n                reflectLine.transform(true);\n                reflectButton.update();\n            });\n        }\n\n        return {\n            remove: function () {\n                reflectButton.remove();\n                if (reflectRotateHandle) {\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'remove' does not exist on type 'never'.\n                    reflectRotateHandle.remove();\n                }\n                reflectLine.remove();\n                reflectPoints[0].remove();\n                reflectPoints[1].remove();\n            },\n        };\n    };\n\n    /* Scales a distance from the default range of\n     * [-10, 10] to the current this.props.graph.range\n     *\n     * Used for sizing various transformation tools\n     * (rotation handle, dilation circle)\n     */\n    scaleToCurrentRange: (arg1: number) => number = (dist) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type 'ReactInstance'.\n        return scaleToRange(dist, this.refs.graph.props.range);\n    };\n\n    addRotationTool: () => ToolCleanup = () => {\n        const options = this.props.tools.rotation;\n        if (!options.enabled) {\n            return;\n        }\n        const self = this;\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type 'ReactInstance'.\n        const graphie = this.refs.graph.graphie();\n\n        const pointColor = colorForTool(options);\n        // The center of our rotation, which can be moved to change the\n        // center of rotation\n        this.rotatePoint = graphie.addMovablePoint({\n            constraints: options.constraints,\n            coord: options.coord,\n            snapX: graphie.snap[0],\n            snapY: graphie.snap[1],\n            normalStyle: {\n                // ugh, this seems to be a global and\n                \"stroke-dasharray\": \"\", // is set to dash above\n                stroke: pointColor,\n                fill: pointColor,\n            },\n            highlightStyle: {\n                \"stroke-dasharray\": \"\",\n                stroke: KhanColors.INTERACTING,\n                fill: KhanColors.INTERACTING,\n            },\n        });\n\n        // The point that we move around the center of rotation to actually\n        // cause rotations\n        this.rotateHandle = graphie.addRotateHandle({\n            center: this.rotatePoint,\n            radius: this.scaleToCurrentRange(ROTATE_HANDLE_DIST),\n            width: this.scaleToCurrentRange(0.24),\n            hoverWidth: this.scaleToCurrentRange(0.4),\n            onMove: function (newAngle, oldAngle) {\n                const transform = self.getRotationTransformFromAngle(\n                    self.rotatePoint.coord,\n                    newAngle - oldAngle,\n                );\n\n                // Rotate polygon with rotateHandle\n                self.doTransform(transform);\n\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'angleDeg' does not exist on type 'PerseusTransformerTransformation'.\n                return oldAngle + transform.angleDeg;\n            },\n        });\n\n        // Update tools.rotation.coord\n        this.rotatePoint.onMoveEnd = (x: any, y: any) => {\n            self.changeTool(\"rotation\", {\n                coord: [x, y],\n            });\n        };\n\n        return {\n            remove: function () {\n                self.rotateHandle?.remove();\n                self.rotatePoint?.remove();\n            },\n        };\n    };\n\n    addDilationTool: () => ToolCleanup = () => {\n        const options = this.props.tools.dilation;\n        if (!options.enabled) {\n            return;\n        }\n        const self = this;\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graphie' does not exist on type 'ReactInstance'.\n        const graphie = this.refs.graph.graphie();\n\n        const pointColor = colorForTool(options);\n        // the circle for causing dilation transforms\n        self.dilationCircle = graphie.addCircleGraph({\n            centerConstraints: options.constraints,\n            center: options.coord,\n            radius: self.scaleToCurrentRange(2),\n            snapX: graphie.snap[0],\n            snapY: graphie.snap[1],\n            minRadius: self.scaleToCurrentRange(1),\n            snapRadius: self.scaleToCurrentRange(0.5),\n            onResize: function (newRadius, oldRadius) {\n                // NOTE(kevinb): object is missing .constraints property\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '{ type: \"dilation\"; center: any; scale: number; }' is not assignable to parameter of type 'PerseusTransformerTransformation'.\n                self.doTransform({\n                    type: \"dilation\",\n                    // NOTE(kevinb): It's hard to convince that this.dilationCircle\n                    // will still be defined here.                    center: self.dilationCircle.centerPoint.coord,\n                    scale: newRadius / oldRadius,\n                });\n            },\n            circleNormalStyle: {\n                stroke: pointColor,\n                \"stroke-width\": 2,\n                \"stroke-dasharray\": \"- \",\n                \"fill-opacity\": 0,\n            },\n            circleHighlightStyle: {\n                stroke: KhanColors.INTERACTING,\n                \"stroke-width\": 2,\n                \"stroke-dasharray\": \"\",\n                fill: KhanColors.INTERACTING,\n                \"fill-opacity\": 0.05,\n            },\n            centerNormalStyle: {\n                stroke: pointColor,\n                fill: pointColor,\n                \"stroke-width\": 2,\n                \"stroke-dasharray\": \"\",\n            },\n            centerHighlightStyle: {\n                stroke: pointColor,\n                fill: pointColor,\n                \"stroke-width\": 2,\n                \"stroke-dasharray\": \"\",\n            },\n        });\n\n        const origOnMoveEnd = this.dilationCircle.centerPoint.onMoveEnd;\n        this.dilationCircle.centerPoint.onMoveEnd = (...args) => {\n            if (origOnMoveEnd) {\n                origOnMoveEnd(args);\n            }\n            self.changeTool(\"dilation\", {\n                coord: self.dilationCircle.centerPoint.coord,\n            });\n        };\n\n        return {\n            remove: function () {\n                self.dilationCircle?.remove();\n            },\n        };\n    };\n\n    // returns a transformation object representing a rotation\n    // rounds the angle to the nearest 15 degrees\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '(center: Coord, angleChanged: number) => { type: \"rotation\"; center: Coord; angleDeg: number; }' is not assignable to type '(arg1: Coord, arg2: number) => PerseusTransformerTransformation'.\n    getRotationTransformFromAngle: (\n        arg1: Coord,\n        arg2: number,\n    ) => TransformerTransformation = (center, angleChanged) => {\n        angleChanged = (angleChanged + 360) % 360;\n        if (angleChanged > 180) {\n            angleChanged -= 360;\n        }\n        const roundedAngle =\n            Math.round(angleChanged / ROTATE_SNAP_DEGREES) *\n            ROTATE_SNAP_DEGREES;\n\n        // NOTE(kevinb): return object is missing .constraints property\n        return {\n            type: \"rotation\",\n            center: center,\n            angleDeg: roundedAngle,\n        };\n    };\n\n    // apply and save a transform\n    doTransform: (\n        arg1: TransformerTransformation,\n        arg2?: (arg1: any) => unknown | null | undefined,\n    ) => void = (transform, callback) => {\n        this.applyTransform(transform);\n        this.addTransform(transform, callback);\n    };\n\n    // apply a transform to our polygon (without modifying our transformation\n    // list)\n    applyTransform: (arg1: TransformerTransformation) => void = (transform) => {\n        if (this.props.graphMode !== \"static\") {\n            const transformFunc = TransformOps.apply(transform);\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(coord: any) => any' is not assignable to parameter of type 'PerseusTransformerTransformation'.\n            this.applyCoordTransformation(transformFunc);\n        }\n    };\n\n    // transform our polygon by transforming each point using a given function\n    applyCoordTransformation: (arg1: TransformerTransformation) => void = (\n        pointTransform,\n    ) => {\n        _.each(this.shape.points, function (point) {\n            // @ts-expect-error [FEI-5003] - TS2349 - This expression is not callable.\n            const newCoord = pointTransform(point.coord);\n            point.setCoord(newCoord);\n        });\n        this.shape?.update();\n    };\n\n    resetCoords: () => void = () => {\n        const startCoords = this.props.starting.shape.coords;\n        _.each(this.shape.points, function (point, i) {\n            point.setCoord(startCoords[i]);\n        });\n        this.shape?.update();\n    };\n\n    // Remove the last transformation\n    handleUndoClick: () => void = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'changeSelected' does not exist on type 'ReactInstance'.\n        this.refs.toolsBar.changeSelected(null);\n        if (this.props.transformations.length) {\n            this.props.onChange({\n                transformations: _.initial(this.props.transformations),\n            });\n        }\n    };\n\n    setTransformationProps: (\n        arg1: ReadonlyArray<TransformerTransformation>,\n        arg2: (arg1: any) => unknown,\n    ) => void = (newTransfomationList, callback) => {\n        this.props.onChange(\n            {\n                transformations: newTransfomationList,\n            },\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '(arg1: any) => unknown' is not assignable to parameter of type '() => unknown'.\n            callback,\n        );\n    };\n\n    // add a transformation to our props list of transformation\n    addTransform: (\n        arg1: TransformerTransformation,\n        arg2?: (arg1: any) => unknown | null | undefined,\n    ) => void = (transform, callback) => {\n        this.transformations = TransformOps.append(\n            this.transformations,\n            transform,\n        );\n        this.props.onChange(\n            {\n                transformations: _.clone(this.transformations),\n            },\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type '((arg1: any) => unknown) | undefined' is not assignable to parameter of type '(() => unknown) | undefined'.\n            callback,\n        );\n    };\n\n    changeTool: (arg1: Tool, arg2: any) => void = (tool, changes) => {\n        const newTools = _.clone(this.props.tools);\n        newTools[tool] = _.extend({}, this.props.tools[tool], changes);\n        this.tools[tool] = _.clone(newTools[tool]);\n        this.props.onChange({\n            // @ts-expect-error [FEI-5003] - TS2740 - Type '{ dilation: DilationTool; reflection: ReflectionTool; rotation: RotationTool; translation: TranslationTool; }' is missing the following properties from type 'readonly any[]': length, concat, join, slice, and 18 more.\n            tools: newTools,\n        });\n        this.props.trackInteraction();\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return Transformer.validate(this.getUserInput(), rubric);\n    };\n\n    /**\n     * Calculate where the coordinates would be if they were\n     * moved, even if we're in formal mode with no movement\n     * (and thus the actual movablepoints may not have moved\n     */\n    // @ts-expect-error [FEI-5003] - TS2322 - Type '() => [Coord, Coord] | readonly Coord[] | [Coord, Coord, Coord]' is not assignable to type '() => Coord'.\n    getCoords: () => Coord = () => {\n        const startCoords = this.props.starting.shape.coords;\n        const transforms = this.props.transformations;\n        return _.reduce(\n            transforms,\n            function (coords, transform) {\n                return _.map(coords, TransformOps.apply(transform));\n            },\n            startCoords,\n        );\n    };\n\n    getEditorJSON: () => any = () => {\n        const json = _.pick(\n            this.props,\n            \"grading\",\n            \"starting\",\n            \"graphMode\",\n            \"listMode\",\n            \"tools\",\n            \"drawSolutionShape\",\n            \"gradeEmpty\",\n        );\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'graph' does not exist on type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"tools\" | \"starting\" | \"drawSolutionShape\" | \"gradeEmpty\" | \"graphMode\" | \"listMode\">'. | TS2339 - Property 'toJSON' does not exist on type 'ReactInstance'.\n        json.graph = this.refs.graph.toJSON();\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'version' does not exist on type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"tools\" | \"starting\" | \"drawSolutionShape\" | \"gradeEmpty\" | \"graphMode\" | \"listMode\">'.\n        json.version = 1.2; // Give us some safety to change the format\n        // when we realize that I wrote\n        // a horrible json spec for this widget\n\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'answer' does not exist on type 'Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"tools\" | \"starting\" | \"drawSolutionShape\" | \"gradeEmpty\" | \"graphMode\" | \"listMode\">'.\n        json.answer = this.getUserInput();\n        return json;\n    };\n\n    getUserInput: UserInput = () => {\n        return {\n            transformations: this.props.transformations,\n            // This doesn't call this.shape.toJSON() because that doesn't\n            // handle coordinates in formal mode without movement, since\n            // the movablepoints never move\n            shape: {\n                type: this.shape.type,\n                coords: this.getCoords(),\n                options: this.shape?.getOptions(),\n            },\n        };\n    };\n\n    /* InputPath API */\n\n    _handleFocus: (...rest: ReadonlyArray<string>) => void = (...path) => {\n        this.props.onFocus(path);\n    };\n\n    _handleBlur: (...rest: ReadonlyArray<string>) => void = (...path) => {\n        this.props.onBlur(path);\n    };\n\n    _getTransformationForID: (arg1: string) => any = (transformationID) => {\n        // Returns the 'transformation' component corresponding to a given ID\n        const refPath = [\n            \"transformationList\",\n            \"transformation\" + transformationID,\n        ];\n\n        // Follow the path of references\n        let component = this;\n        _.each(refPath, (ref) => {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'ReactInstance' is not assignable to type 'this'.\n            component = component.refs[ref];\n        });\n        return component;\n    };\n\n    getInputPaths: () => ReadonlyArray<Path> = () => {\n        // If we're in static mode, then there is no transformation list, and,\n        // as a result, no input paths.\n        if (this.props.listMode === \"static\") {\n            return [];\n        }\n\n        let inputPaths: Array<never> | Array<any> = [];\n        _.each(this.props.transformations, (transformation, i) => {\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'number' is not assignable to parameter of type 'string'.\n            transformation = this._getTransformationForID(i);\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getInputPaths' does not exist on type 'PerseusTransformerTransformation'.\n            const innerPaths = transformation.getInputPaths();\n            const fullPaths = _.map(innerPaths, (innerPath) => {\n                return [\"\" + i].concat(innerPath);\n            });\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string[][]' is not assignable to parameter of type 'ConcatArray<never>'.\n            inputPaths = inputPaths.concat(fullPaths);\n        });\n        return inputPaths;\n    };\n\n    _passToInner: (\n        arg1: string,\n        arg2: ReadonlyArray<string>,\n        arg3?: any | null | undefined,\n        arg4?: (arg1: any) => unknown | null | undefined,\n    ) => any = function (functionName, path, ...args) {\n        if (!path || !path.length) {\n            return;\n        }\n\n        // First argument tells us which transformation will receive the call;\n        // remaining arguments are used within that transformation to identify\n        // a specific input.\n        const innerPath = _.rest(path);\n\n        // Pass arguments down to appropriate 'transformation' component\n        const transformationID = _.head(path);\n        // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n        const caller = this._getTransformationForID(transformationID);\n        return caller[functionName](innerPath, ...args);\n    };\n\n    focus: () => boolean = () => {\n        // Just focus the first showing input\n        const inputs = this.getInputPaths();\n        if (inputs.length > 0) {\n            this.focusInputPath(inputs[0]);\n            return true;\n        }\n        return false;\n    };\n\n    focusInputPath: (arg1: Path) => boolean = (path) => {\n        // Since the transformer exposes the input API, it needs to be robust\n        // to empty paths. We don't expect this to happen, as entire-widget\n        // focusing is typically done through the focus() method, which already\n        // handles the empty path case properly, but it's better to be safe\n        // here.\n        if (path.length === 0) {\n            return false;\n        }\n\n        assert(path.length >= 2);\n        return this._passToInner(\"focusInputPath\", path);\n    };\n\n    blurInputPath: (arg1: Path) => boolean = (path) => {\n        // Since the transformer exposes the input API, it needs to be robust\n        // to empty paths (which indicate a blurring of the entire widget,\n        // e.g., when switching from interacting with the transformer to\n        // interacting with some other widget).\n        if (path.length === 0) {\n            return false;\n        }\n\n        assert(path.length >= 2);\n        return this._passToInner(\"blurInputPath\", path);\n    };\n\n    setInputValue: (\n        arg1: Path,\n        arg2: any,\n        arg3: (arg1: any) => unknown,\n    ) => any = (path, value, cb) => {\n        assert(path.length >= 2);\n        return this._passToInner(\"setInputValue\", path, value, cb);\n    };\n\n    getDOMNodeForPath: (arg1: Path) => any = (path) => {\n        assert(path.length >= 2);\n        return this._passToInner(\"getDOMNodeForPath\", path);\n    };\n\n    getGrammarTypeForPath: (arg1: Path) => any = (path) => {\n        assert(path.length >= 2);\n        return this._passToInner(\"getGrammarTypeForPath\", path);\n    };\n\n    static validate(guess: UserInput, rubric: Rubric): PerseusScore {\n        // Check for any required transformations\n        for (const type in Transformations) {\n            if (rubric.tools[type].required) {\n                const isUsed = _.any(\n                    _.map(guess.transformations, function (transform) {\n                        // Required transformations must appear in the\n                        // transformation list, and must not be no-ops\n                        return (\n                            transform.type === type &&\n                            !TransformOps.isEmpty(transform) &&\n                            !TransformOps.isNoOp(transform)\n                        );\n                    }),\n                );\n\n                if (!isUsed) {\n                    return {\n                        type: \"invalid\",\n                        message: i18n._(\n                            \"Your transformation must use a \" + \"%(type)s.\",\n                            {\n                                type: Transformations[type].lowerNounName,\n                            },\n                        ),\n                    };\n                }\n            }\n        }\n\n        // Compare shapes\n        if (ShapeTypes.equal(guess.shape, rubric.correct.shape)) {\n            return {\n                type: \"points\",\n                earned: 1,\n                total: 1,\n                message: null,\n            };\n        }\n        if (\n            !rubric.gradeEmpty &&\n            deepEq(guess.shape.coords, rubric.starting.shape.coords)\n        ) {\n            return {\n                type: \"invalid\",\n                message: i18n._(\n                    \"Use the interactive graph to define a \" +\n                        \"correct transformation.\",\n                ),\n            };\n        }\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 1,\n            message: null,\n        };\n    }\n}\n\nexport default {\n    name: \"transformer\",\n    displayName: \"Transformer\",\n    widget: Transformer,\n} as WidgetExports<typeof Transformer>;\n","(function webpackUniversalModuleDefinition(root, factory) {\n    if(typeof exports === 'object' && typeof module === 'object')\n        module.exports = factory();\n    else if(typeof define === 'function' && define.amd)\n        define([], factory);\n    else if(typeof exports === 'object')\n        exports[\"hubble\"] = factory();\n    else\n        root[\"hubble\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/    // The module cache\n/******/    var installedModules = {};\n/******/\n/******/    // The require function\n/******/    function __webpack_require__(moduleId) {\n/******/\n/******/        // Check if module is in cache\n/******/        if(installedModules[moduleId]) {\n/******/            return installedModules[moduleId].exports;\n/******/        }\n/******/        // Create a new module (and put it into the cache)\n/******/        var module = installedModules[moduleId] = {\n/******/            i: moduleId,\n/******/            l: false,\n/******/            exports: {}\n/******/        };\n/******/\n/******/        // Execute the module function\n/******/        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/        // Flag the module as loaded\n/******/        module.l = true;\n/******/\n/******/        // Return the exports of the module\n/******/        return module.exports;\n/******/    }\n/******/\n/******/\n/******/    // expose the modules object (__webpack_modules__)\n/******/    __webpack_require__.m = modules;\n/******/\n/******/    // expose the module cache\n/******/    __webpack_require__.c = installedModules;\n/******/\n/******/    // define getter function for harmony exports\n/******/    __webpack_require__.d = function(exports, name, getter) {\n/******/        if(!__webpack_require__.o(exports, name)) {\n/******/            Object.defineProperty(exports, name, {\n/******/                configurable: false,\n/******/                enumerable: true,\n/******/                get: getter\n/******/            });\n/******/        }\n/******/    };\n/******/\n/******/    // getDefaultExport function for compatibility with non-harmony modules\n/******/    __webpack_require__.n = function(module) {\n/******/        var getter = module && module.__esModule ?\n/******/            function getDefault() { return module['default']; } :\n/******/            function getModuleExports() { return module; };\n/******/        __webpack_require__.d(getter, 'a', getter);\n/******/        return getter;\n/******/    };\n/******/\n/******/    // Object.prototype.hasOwnProperty.call\n/******/    __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/    // __webpack_public_path__\n/******/    __webpack_require__.p = \"\";\n/******/\n/******/    // Load entry module and return exports\n/******/    return __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nvar isObject = function(obj) {\n    return obj === Object(obj);;\n}\n\nvar merge = function() {\n    var obj = {};\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i];\n        if (source) {\n            for (var prop in source) {\n                obj[prop] = source[prop];\n            }\n        }\n    }\n\n    return obj;\n};\n\nvar clone = function(obj) {\n    if (!isObject(obj)) {\n        return obj;\n    }\n\n    return Array.isArray(obj) ? obj.slice() : merge(obj);\n};\n\nmodule.exports = { isObject: isObject, merge: merge, clone: clone };\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* TODO batch *all* mutations\n * idea: freeze / thaw implementations for all types\n * lens constructor thaws, freeze delegates to type's freeze\n */\n\nvar util = __webpack_require__(0);\n    var clone = util.clone;\n    var isObject = util.isObject;\n    var merge = util.merge;\n\nvar arr = __webpack_require__(2);\nvar obj = __webpack_require__(3);\nvar str = __webpack_require__(4);\n\n// equivalents, without requiring it\n// find the implementation to use for a given object\nvar dispatch = function(x) {\n    if (Array.isArray(x)) {\n        return arr;\n    } else if (isObject(x)) {\n        return obj;\n    } else if (typeof x === \"string\") {\n        return str;\n    }\n};\n\n// This is underscore with a different name\nvar lens = function(obj) {\n    if (obj instanceof lens) {\n        return obj;\n    }\n\n    if (!(this instanceof lens)) {\n        return new lens(obj);\n    }\n\n    var ops = dispatch(obj);\n    this._wrapped = ops.thaw ? ops.thaw(obj) : obj;\n};\n\nlens.prototype.freeze = function() {\n    var obj = this._wrapped;\n    var ops = dispatch(obj);\n\n    return ops.freeze ? ops.freeze(obj) : obj;\n};\n\nlens.prototype.zoom = function(lensArr) {\n    if (this._zoomStack === undefined) {\n        this._zoomStack = [];\n    }\n\n    this._zoomStack.push({\n        zoom: lensArr,\n        wrapped: this._wrapped\n    });\n    this._wrapped = lens(this._wrapped).get(lensArr);\n\n    return this;\n};\n\nlens.prototype.deZoom = function() {\n    var frame = this._zoomStack.pop();\n    this._wrapped = lens(frame.wrapped)\n        .set(frame.zoom, this._wrapped)\n        .freeze();\n\n    return this;\n};\n\nlens.prototype.get = function(lensArr) {\n    var obj = this._wrapped;\n\n    for (var i = 0; i < lensArr.length; i++) {\n        obj = dispatch(obj).get(obj, lensArr[i]);\n    }\n\n    return obj;\n};\n\nlens.prototype.mod = function(lensArr, f) {\n    var obj = this._wrapped;\n    var newObj = clone(obj);\n    var ops = dispatch(obj);\n\n    if (lensArr.length === 0) {\n        this._wrapped = f(this._wrapped);\n    } else if (lensArr.length === 1) {\n        this._wrapped = ops.mod(newObj, lensArr[0], f);\n    } else {\n        var monocle = lensArr[0];\n        var shortLens = lensArr.slice(1);\n\n        // newObj = ops.mod(obj[monocle], shortLens, f);\n\n        newObj[monocle] = lens(obj[monocle])\n            .mod(shortLens, f)\n            .freeze();\n        this._wrapped = newObj;\n    }\n\n    return this;\n};\n\n// TODO - move to individual files\nlens.prototype.merge = function(lensArr, props) {\n    this._wrapped = lens(this._wrapped).mod(lensArr, function(oldProps) {\n        return merge(oldProps, props);\n    }).freeze();\n\n    return this;\n};\n\n// Lens must have length >= 1 or there would be nothing to return\nlens.prototype.del = function(lensArr) {\n    var obj = this._wrapped;\n    var ops = dispatch(obj);\n\n    if (lensArr.length === 1) {\n        this._wrapped = ops.del(obj, lensArr[0]);\n    } else {\n        var monocle = lensArr[0];\n        var shortLens = lensArr.slice(1);\n        var newObj = clone(obj);\n\n        newObj[monocle] = lens(obj[monocle])\n            .del(shortLens)\n            .freeze();\n\n        this._wrapped = newObj;\n    }\n\n    return this;\n};\n\nlens.prototype.set = function(lensArr, set) {\n    return this.mod(lensArr, function() { return set; });\n};\n\nmodule.exports = lens;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nvar get = function(arr, monocle) {\n    return arr[monocle];\n};\n\nvar set = function(arr, monocle, val) {\n    var newArr = arr.splice();\n    newArr[monocle] = val;\n    return newArr;\n};\n\nvar mod = function(arr, monocle, f) {\n    var newArr = arr.slice();\n    newArr[monocle] = f(arr[monocle]);\n    return newArr;\n};\n\nvar del = function(arr, monocle) {\n    var newArr = arr.slice();\n    newArr.splice(monocle, 1);\n    return newArr;\n};\n\n/*\n// Lens must point to a member of an array. We'll insert into that array.\nlens.prototype.insertAt = function(lensArr, toInsert) {\n    var obj = this._wrapped;\n\n    var arrLens = lensArr.slice(0, -1);\n    var arr = lens(obj).get(arrLens).slice(); // slice to copy\n\n    var arrIdx = lensArr[lensArr.length-1];\n    arr.splice(arrIdx, 0, toInsert);\n    return lens(obj).set(arrLens, arr);\n};\n\nlens.prototype.insertBefore = lens.prototype.insertAt;\nlens.prototype.insertAfter = function(lensArr, toInsert) {\n    var newLens = lensArr.slice();\n    newLens[newLens.length-1] += 1;\n    return lens(this._wrapped).insertAt(newLens, toInsert);\n};\n*/\n\nmodule.exports = { get: get, set: set, mod: mod, del: del };\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar clone = __webpack_require__(0).clone;\n\nvar get = function(obj, monocle) {\n    return obj[monocle];\n};\n\nvar set = function(obj, monocle, val) {\n    var newObj = clone(obj);\n    newObj[monocle] = val;\n    return newObj;\n};\n\nvar mod = function(obj, monocle, f) {\n    var newObj = clone(obj);\n    newObj[monocle] = f(obj[monocle]);\n    return newObj;\n};\n\nvar del = function(obj, monocle) {\n    var newObj = clone(obj);\n    delete newObj[monocle];\n    return newObj;\n};\n\nmodule.exports = { get: get, set: set, mod: mod, del: del };\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nvar get = function(arr, monocle) {\n    return arr[monocle];\n};\n\nvar set = function(arr, monocle, val) {\n    var newArr = arr.splice();\n    newArr[monocle] = val;\n    return newArr;\n};\n\nvar mod = function(arr, monocle, f) {\n    var newArr = arr.splice();\n    newArr[monocle] = f(arr[monocle]);\n    return newArr;\n};\n\nvar del = function(arr, monocle) {\n    var newArr = arr.slice();\n    newArr.splice(monocle);\n    return newArr;\n};\n\nmodule.exports = { get: get, set: set, mod: mod, del: del };\n\n\n/***/ })\n/******/ ]);\n});\n","/* eslint-disable eqeqeq, @typescript-eslint/no-unused-vars */\n/*\n * A class for formatting number to significant digits.\n * Copyright (C) 2001 Stephen Ostermiller\n * http://ostermiller.org/contact.pl?regarding?JavaScript+Significant+Figures\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n */\n\n/**\n * An object tho both scans floating points to\n * determine the number of significant figures.\n * and can display a floating point using any number\n * of significant figures.\n *\n * @param s A string representation of a floating point.\n */\nexport class SignificantFigures {\n    order: number;\n    mantissa: string;\n    positive: boolean;\n    sigFigs: number;\n    sigDecs: number;\n\n    constructor(s: string) {\n        this.order = parseOrder(s);\n        this.mantissa = parseMantissa(s);\n        this.positive = parseSign(s);\n\n        /**\n         * Get the number of significant figures this object uses.\n         * Leading zeros are not significant.  Traling zeros up to\n         * and after the decimal point are significant.\n         * Significant figures is good to know when the number is\n         * used in multiplication.\n         *\n         * @return the number of significant figures.\n         */\n        this.sigFigs = this.mantissa.length;\n\n        /**\n         * Get the least significant decimal this object uses.\n         * This is useful to know if a number is being used\n         * in addition.\n         * 400 - 2 the hundreds place (10^2) is the least significant decimal.\n         * 75 - 0 the ones place (10^0) is the least significant decimal.\n         * .543 - -3 the 1/1000's place (10^-3) is the least significant decimal.\n         *\n         * @return an integer representing the least significant decimal place.\n         */\n        this.sigDecs = this.order - this.mantissa.length;\n    }\n}\n\n/**\n * Format a floating point for display using the specified\n * number of significant figures and least significant decimal.\n * Scientific notation may used by this method if this\n * object is very small, very large, has many significant\n * figures, or the number of significant figures would be\n * ambiguous in the output if scientific notation were not\n * used.\n *\n * @param f A floating point number that should be displayed\n * @param sigFigs desired number of significant figures (integer).\n * @param sigDecs the least significant decimal place (integer).\n * @param scientific true iff scientific notation should always be used.\n * @return a string of this object formatted correctly.\n */\nexport function displaySigFigs(\n    f: number,\n    sigFigs: number,\n    sigDecs: number,\n    scientific: boolean,\n): string {\n    const s = \"\" + f;\n    let order = parseOrder(s);\n    let mantissa = parseMantissa(s);\n    let positive = parseSign(s);\n    let add;\n    let decAdd;\n    let sigAdd;\n    let zeroScientific = false;\n    if (f == 0 || mantissa == \"\" || mantissa == \"0\") {\n        mantissa = \"\";\n        for (let i = 0; i < sigFigs; i++) {\n            mantissa += \"0\";\n        }\n        order = sigFigs + sigDecs;\n        if (sigDecs < 0 && -sigDecs >= sigFigs) {\n            zeroScientific = true;\n        }\n    } else {\n        decAdd = order - mantissa.length - sigDecs;\n        sigAdd = sigFigs - mantissa.length;\n        add = Math.min(sigAdd, decAdd);\n        if (add < 0) {\n            let rounded = round(mantissa, -add);\n            if (rounded.length > mantissa.length + add) {\n                order++;\n                if (decAdd > sigAdd) {\n                    rounded = round(rounded, 1);\n                }\n            }\n            mantissa = rounded;\n        } else if (add > 0) {\n            for (let i = 0; i < add; i++) {\n                mantissa += \"0\";\n            }\n        }\n        if (mantissa == \"\" || mantissa == \"0\") {\n            mantissa = \"0\";\n            positive = true;\n            order = 1 + sigDecs;\n            if (order != 0) {\n                zeroScientific = true;\n            }\n        }\n    }\n    const useScientific =\n        scientific ||\n        mantissa.length > 20 ||\n        order > 4 ||\n        order < -2 ||\n        (order - mantissa.length > 0 && trailingZeros(mantissa) > 0) ||\n        zeroScientific;\n    let returnVal = \"\";\n    if (!positive) {\n        returnVal += \"-\";\n    }\n    if (useScientific) {\n        returnVal += mantissa.charAt(0);\n        if (mantissa.length > 1) {\n            returnVal += \".\" + mantissa.substring(1, mantissa.length);\n        }\n        if (order - 1 != 0) {\n            returnVal += \" x 10^\" + (order - 1);\n        }\n    } else {\n        let wholePart = \"\";\n        let fractPart = \"\";\n        let needDot = true;\n        if (order > 0) {\n            if (mantissa.length > order) {\n                wholePart = mantissa.substring(0, order);\n                fractPart = mantissa.substring(order, mantissa.length);\n            } else {\n                wholePart = mantissa;\n                needDot = trailingZeros(mantissa) != 0;\n                for (let i = 0; i < order - mantissa.length; i++) {\n                    wholePart += \"0\";\n                }\n            }\n        } else {\n            for (let i = 0; i < -order; i++) {\n                fractPart += \"0\";\n            }\n            fractPart += mantissa;\n        }\n        returnVal +=\n            (wholePart == \"\" ? \"0\" : wholePart) +\n            (needDot ? \".\" : \"\") +\n            fractPart;\n    }\n    return returnVal;\n}\n\n/**\n * Count the significant trailing zeros on this object.\n *\n * @return the number of trailing zeros\n */\nfunction trailingZeros(mantissa: string) {\n    let zeros = 0;\n    for (let i = mantissa.length - 1; i >= 0; i--) {\n        const c = mantissa.charAt(i);\n        if (c == \"0\") {\n            zeros++;\n        } else {\n            return zeros;\n        }\n    }\n    return zeros;\n}\n\n/**\n * Parse a string representation of a floating point\n * and pull out the sign.\n *\n * @param s the string representation of a floating point.\n * @return true iff this is a positive number\n */\nfunction parseSign(s: string) {\n    let beginning = true;\n    let seenDot = false;\n    let seenSomething = false;\n    let zeros = \"\";\n    let leadZeros = \"\";\n    let all = \"\";\n    let decPlaces = 0;\n    let totalDecs = 0;\n    let pos = true;\n    for (let i = 0; i < s.length; i++) {\n        const c = s.charAt(i);\n        if (c >= \"1\" && c <= \"9\") {\n            all += zeros + c;\n            zeros = \"\";\n            seenSomething = true;\n            if (!seenDot) {\n                totalDecs++;\n                decPlaces++;\n            }\n            beginning = false;\n        } else if (c == \"0\") {\n            if (seenDot) {\n                if (seenSomething) {\n                    all += zeros + c;\n                    zeros = \"\";\n                } else {\n                    leadZeros += c;\n                    decPlaces--;\n                }\n            } else {\n                totalDecs++;\n                if (seenSomething) {\n                    leadZeros += c;\n                    decPlaces++;\n                    zeros += c;\n                } else {\n                    leadZeros += c;\n                }\n            }\n            beginning = false;\n        } else if (!seenDot && c == \".\") {\n            all += zeros;\n            zeros = \"\";\n            seenDot = true;\n            beginning = false;\n        } else if (c == \"e\" || (c == \"E\" && i + 1 < s.length)) {\n            const raised = parseInt(s.substring(i + 1, s.length));\n            decPlaces += raised;\n            totalDecs += raised;\n            i = s.length;\n        } else if (beginning && (c == \"+\" || c == \"-\")) {\n            if (c == \"-\") {\n                pos = !pos;\n            }\n        }\n    }\n    if (all == \"\") {\n        return true;\n    }\n    return pos;\n}\n\n/**\n * Parse a string representation of a floating point\n * and pull out the mantissa.\n *\n * @param s the string representation of a floating point.\n * @return the mantissa of this number.\n */\nfunction parseMantissa(s: string) {\n    let beginning = true;\n    let seenDot = false;\n    let seenSomething = false;\n    let zeros = \"\";\n    let leadZeros = \"\";\n    let all = \"\";\n    let decPlaces = 0;\n    let totalDecs = 0;\n    let pos = true;\n    for (let i = 0; i < s.length; i++) {\n        const c = s.charAt(i);\n        if (c >= \"1\" && c <= \"9\") {\n            all += zeros + c;\n            zeros = \"\";\n            seenSomething = true;\n            if (!seenDot) {\n                totalDecs++;\n                decPlaces++;\n            }\n            beginning = false;\n        } else if (c == \"0\") {\n            if (seenDot) {\n                if (seenSomething) {\n                    all += zeros + c;\n                    zeros = \"\";\n                } else {\n                    leadZeros += c;\n                    decPlaces--;\n                }\n            } else {\n                totalDecs++;\n                if (seenSomething) {\n                    leadZeros += c;\n                    decPlaces++;\n                    zeros += c;\n                } else {\n                    leadZeros += c;\n                }\n            }\n            beginning = false;\n        } else if (!seenDot && c == \".\") {\n            all += zeros;\n            zeros = \"\";\n            seenDot = true;\n            beginning = false;\n        } else if (c == \"e\" || (c == \"E\" && i + 1 < s.length)) {\n            const raised = parseInt(s.substring(i + 1, s.length));\n            decPlaces += raised;\n            totalDecs += raised;\n            i = s.length;\n        } else if (beginning && (c == \"+\" || c == \"-\")) {\n            if (c == \"-\") {\n                pos = !pos;\n            }\n        }\n    }\n    if (all == \"\") {\n        return leadZeros;\n    }\n    return all;\n}\n\n/**\n * Parse a string representation of a floating point\n * and pull out the exponent.\n *\n * @param s the string representation of a floating point.\n * @return (integer) the number after the e.\n */\nfunction parseOrder(s: string) {\n    let beginning = true;\n    let seenDot = false;\n    let seenSomething = false;\n    let zeros = \"\";\n    let leadZeros = \"\";\n    let all = \"\";\n    let decPlaces = 0;\n    let totalDecs = 0;\n    let pos = true;\n    for (let i = 0; i < s.length; i++) {\n        const c = s.charAt(i);\n        if (c >= \"1\" && c <= \"9\") {\n            all += zeros + c;\n            zeros = \"\";\n            seenSomething = true;\n            if (!seenDot) {\n                totalDecs++;\n                decPlaces++;\n            }\n            beginning = false;\n        } else if (c == \"0\") {\n            if (seenDot) {\n                if (seenSomething) {\n                    all += zeros + c;\n                    zeros = \"\";\n                } else {\n                    leadZeros += c;\n                    decPlaces--;\n                }\n            } else {\n                totalDecs++;\n                if (seenSomething) {\n                    leadZeros += c;\n                    decPlaces++;\n                    zeros += c;\n                } else {\n                    leadZeros += c;\n                }\n            }\n            beginning = false;\n        } else if (!seenDot && c == \".\") {\n            all += zeros;\n            zeros = \"\";\n            seenDot = true;\n            beginning = false;\n        } else if (c == \"e\" || (c == \"E\" && i + 1 < s.length)) {\n            const raised = parseInt(s.substring(i + 1, s.length));\n            decPlaces += raised;\n            totalDecs += raised;\n            i = s.length;\n        } else if (beginning && (c == \"+\" || c == \"-\")) {\n            if (c == \"-\") {\n                pos = !pos;\n            }\n        }\n    }\n    if (all == \"\") {\n        return totalDecs;\n    }\n    return decPlaces;\n}\n\n/**\n * Remove the specified number of digits from string by\n * rounding.  Proper rounding rules for scientific purposes\n * are followed.\n * This method may cause an extra significant figure\n * to be added to the number.  For example, if 999999\n * were rounded, A one would carry over and become\n * a significant figure.  Those who call this method\n * should check for this and call round again if needed.\n *\n * @param mantissa A string representing an whole number of arbitrary length.\n * @param digits A number of digits to remove\n * @return A string represted the rounded version of mantissa\n */\nfunction round(mantissa: string, digits: number): string {\n    const last = mantissa.length - digits - 1;\n    if (last < 0) {\n        return \"\";\n    }\n    if (last >= mantissa.length - 1) {\n        return mantissa;\n    }\n    const nextToLast = mantissa.charAt(last + 1);\n    const lastChar = mantissa.charAt(last);\n    let roundUp = false;\n    if (nextToLast > \"5\") {\n        roundUp = true;\n    } else if (nextToLast == \"5\") {\n        for (let j = last + 2; j < mantissa.length; j++) {\n            if (mantissa.charAt(j) != \"0\") {\n                roundUp = true;\n            }\n        }\n        // @ts-expect-error [FEI-5003] - TS2362 - The left-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.\n        if (lastChar % 2 == 1) {\n            roundUp = true;\n        }\n    }\n    let result = \"\";\n    for (let i = last; i >= 0; i--) {\n        const c = mantissa.charAt(i);\n        if (roundUp) {\n            let nextChar;\n            if (c == \"9\") {\n                nextChar = \"0\";\n            } else {\n                switch (c) {\n                    case \"0\":\n                        nextChar = \"1\";\n                        break;\n                    case \"1\":\n                        nextChar = \"2\";\n                        break;\n                    case \"2\":\n                        nextChar = \"3\";\n                        break;\n                    case \"3\":\n                        nextChar = \"4\";\n                        break;\n                    case \"4\":\n                        nextChar = \"5\";\n                        break;\n                    case \"5\":\n                        nextChar = \"6\";\n                        break;\n                    case \"6\":\n                        nextChar = \"7\";\n                        break;\n                    case \"7\":\n                        nextChar = \"8\";\n                        break;\n                    case \"8\":\n                        nextChar = \"9\";\n                        break;\n                }\n                roundUp = false;\n            }\n            result = nextChar + result;\n        } else {\n            result = c + result;\n        }\n    }\n    if (roundUp) {\n        result = \"1\" + result;\n    }\n    return result;\n}\n","// TODO(joel): teach KAS how to accept an answer only if it's expressed in\n// terms of a certain type.\n// TODO(joel): Allow sigfigs within a range rather than an exact expected\n// value?\nimport * as KAS from \"@khanacademy/kas\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport lens from \"hubble\";\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport * as Changeable from \"../mixins/changeable\";\nimport {ClassNames as ApiClassNames, ApiOptions} from \"../perseus-api\";\nimport {SignificantFigures, displaySigFigs} from \"../sigfigs\";\n\nimport type {\n    APIOptions,\n    ChangeHandler,\n    FocusPath,\n    WidgetExports,\n} from \"../types\";\n\nconst ALL = \"all\";\nconst MAX_SIGFIGS = 10;\n\nexport const countSigfigs = function (value: string): number {\n    return new SignificantFigures(value).sigFigs;\n};\n\nexport const sigfigPrint = function (num: number, sigfigs: number): string {\n    return displaySigFigs(num, sigfigs, -MAX_SIGFIGS, false);\n};\n\ntype Rubric =\n    | {\n          value: string;\n          sigfigs: number;\n          accepting: \"all\";\n      }\n    | {\n          value: string;\n          sigfigs: number;\n          accepting: \"some\";\n          acceptingUnits: ReadonlyArray<string>;\n      };\n\ntype ValidationResult =\n    | {\n          type: \"points\";\n          earned: 1 | 0;\n          message: string | null | undefined;\n          total: number;\n      }\n    | {\n          type: \"invalid\";\n          message: string | null | undefined;\n      };\n\ntype Props = {\n    apiOptions: APIOptions;\n    onChange: ChangeHandler;\n    value: string;\n    onBlur: (arg1: FocusPath) => unknown;\n    onFocus: (arg1: FocusPath) => unknown;\n};\n\ntype DefaultProps = {\n    apiOptions: Props[\"apiOptions\"];\n    value: Props[\"value\"];\n};\n\n/* I just wrote this, but it's old by analogy to `OldExpression`, in that it's\n * the version that non-mathquill platforms get stuck with. Constructed with an\n * <input>, a parser, popsicle sticks, and glue.\n *\n * In the same way as OldExpression, this parses continuously as you type, then\n * shows and hides an error buddy. The error message is only shown after a\n * rolling two second delay, but hidden immediately on further typing.\n */\nexport class OldUnitInput extends React.Component<Props> {\n    _errorTimeout: number | null | undefined;\n\n    static defaultProps: DefaultProps = {\n        apiOptions: ApiOptions.defaults,\n        value: \"\",\n    };\n\n    static validate(userInput: string, rubric: Rubric): ValidationResult {\n        const answer = KAS.unitParse(rubric.value).expr;\n        const guess = KAS.unitParse(userInput);\n        if (!guess.parsed) {\n            return {\n                type: \"invalid\",\n                message: i18n._(\"I couldn't understand those units.\"),\n            };\n        }\n\n        // Note: we check sigfigs, then numerical correctness, then units, so\n        // the most significant things come last, that way the user will see\n        // the most important message.\n        let message = null;\n\n        // did the user specify the right number of sigfigs?\n        // TODO(joel) - add a grading mode where the wrong number of sigfigs\n        // isn't marked wrong\n        const sigfigs = rubric.sigfigs;\n        const sigfigsCorrect = countSigfigs(guess.coefficient) === sigfigs;\n        if (!sigfigsCorrect) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n            message = i18n._(\"Check your significant figures.\");\n        }\n\n        // now we need to check that the answer is correct to the precision we\n        // require.\n        let numericallyCorrect;\n        try {\n            const x = new KAS.Var(\"x\");\n            const equality = new KAS.Eq(\n                answer.simplify(),\n                \"=\",\n                new KAS.Mul(x, guess.expr.simplify()),\n            );\n\n            const conversion = equality.solveLinearEquationForVariable(x);\n\n            // Make sure the conversion factor between the user's input answer\n            // and the canonical answer is 1, to sigfig places.\n            // TODO(joel) is this sound?\n            numericallyCorrect =\n                Number(conversion.eval()).toPrecision(sigfigs) ===\n                Number(1).toPrecision(sigfigs);\n        } catch (e: any) {\n            numericallyCorrect = false;\n        }\n\n        if (!numericallyCorrect) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n            message = i18n._(\"That answer is numerically incorrect.\");\n        }\n\n        let kasCorrect;\n        const guessUnit = primUnits(guess.expr.simplify());\n        const answerUnit = primUnits(answer.simplify());\n\n        if (rubric.accepting === ALL) {\n            // We're accepting all units - KAS does the hard work of figuring\n            // out if the user's unit is equivalent to the author's unit.\n            kasCorrect = KAS.compare(guessUnit, answerUnit).equal;\n        } else {\n            // Are any of the accepted units the same as what the user entered?\n            kasCorrect = _(rubric.acceptingUnits).any((unit) => {\n                const thisAnswerUnit = primUnits(\n                    KAS.unitParse(unit).unit.simplify(),\n                );\n                return KAS.compare(\n                    thisAnswerUnit,\n                    guessUnit,\n                    // TODO(joel) - make this work as intended.\n                    // { form: true }\n                ).equal;\n            });\n        }\n        if (!kasCorrect) {\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'null'.\n            message = i18n._(\"Check your units.\");\n        }\n\n        const correct = kasCorrect && numericallyCorrect && sigfigsCorrect;\n\n        return {\n            type: \"points\",\n            earned: correct ? 1 : 0,\n            total: 1,\n            message,\n        };\n    }\n\n    componentDidUpdate() {\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        clearTimeout(this._errorTimeout);\n        if (KAS.unitParse(this.props.value).parsed) {\n            this._hideError();\n        } else {\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // eslint-disable-next-line no-restricted-syntax\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'Timeout' is not assignable to type 'number'.\n            this._errorTimeout = setTimeout(this._showError, 2000);\n        }\n    }\n\n    componentWillUnmount() {\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        clearTimeout(this._errorTimeout);\n    }\n\n    _showError: () => void = () => {\n        if (this.props.value === \"\") {\n            return;\n        }\n\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $error = $(ReactDOM.findDOMNode(this.refs.error));\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'is' does not exist on type 'JQueryStatic'.\n        if (!$error.is(\":visible\")) {\n            $error\n                // @ts-expect-error [FEI-5003] - TS2554 - Expected 2 arguments, but got 1.\n                .css({top: 50, opacity: 0.1})\n                .show()\n                .animate({top: 0, opacity: 1.0}, 300);\n        }\n    };\n\n    _hideError: () => void = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        const $error = $(ReactDOM.findDOMNode(this.refs.error));\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'is' does not exist on type 'JQueryStatic'.\n        if ($error.is(\":visible\")) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'animate' does not exist on type 'JQueryStatic'.\n            $error.animate({top: 50, opacity: 0.1}, 300, function () {\n                // eslint-disable-next-line @babel/no-invalid-this\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                // eslint-disable-next-line @babel/no-invalid-this\n                $(this).hide();\n            });\n        }\n    };\n\n    change: (...args: ReadonlyArray<any>) => any | null | undefined = (\n        ...args\n    ) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly any[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    handleBlur: () => void = () => {\n        this.props.onBlur([]);\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        clearTimeout(this._errorTimeout);\n        if (!KAS.unitParse(this.props.value).parsed) {\n            this._showError();\n        }\n    };\n\n    handleChange: (event: React.ChangeEvent<HTMLInputElement>) => void = (\n        event: React.ChangeEvent<HTMLInputElement>,\n    ) => {\n        this._hideError();\n        this.props.onChange({value: event.target.value});\n    };\n\n    simpleValidate: (\n        rubric: Rubric,\n        onInputError?: () => unknown,\n    ) => ValidationResult = (rubric: Rubric, onInputError?: () => unknown) => {\n        onInputError = onInputError || function () {};\n        return OldUnitInput.validate(this.getUserInput(), rubric);\n    };\n\n    getUserInput: () => string = () => {\n        return this.props.value;\n    };\n\n    // begin mobile stuff\n\n    getInputPaths: () => ReadonlyArray<ReadonlyArray<any>> = () => {\n        // The widget itself is an input, so we return a single empty list to\n        // indicate this.\n        return [[]];\n    };\n\n    focusInputPath: (inputPath: FocusPath) => void = (inputPath: FocusPath) => {\n        // eslint-disable-next-line react/no-string-refs\n        const input = ReactDOM.findDOMNode(this.refs.input);\n        if (input) {\n            /**\n             * TODO(somewhatabstract, JIRA-XXXX):\n             * Change to using a ref callback so that focus() can be\n             * accessed.\n             */\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n            input.focus();\n        }\n    };\n\n    handleFocus: () => void = () => {\n        this.props.onFocus([]);\n    };\n\n    blurInputPath: (inputPath: FocusPath) => void = (inputPath: FocusPath) => {\n        // eslint-disable-next-line react/no-string-refs\n        const input = ReactDOM.findDOMNode(this.refs.input);\n        if (input) {\n            /**\n             * TODO(somewhatabstract, JIRA-XXXX):\n             * Change to using a ref callback so that focus() can be\n             * accessed.\n             */\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type 'Element | Text'.\n            input.blur();\n        }\n    };\n\n    setInputValue: (\n        path: FocusPath,\n        newValue: string,\n        cb: () => unknown,\n    ) => void = (path: FocusPath, newValue: string, cb: () => unknown) => {\n        this.props.onChange(\n            {\n                value: newValue,\n            },\n            cb,\n        );\n    };\n\n    getDOMNodeForPath: () => null | Element | Text = () => {\n        // eslint-disable-next-line react/no-string-refs\n        return ReactDOM.findDOMNode(this.refs.input);\n    };\n\n    getGrammarTypeForPath: (inputPath: FocusPath) => string = (\n        inputPath: FocusPath,\n    ) => {\n        return \"unit\";\n    };\n\n    // end mobile stuff\n\n    // TODO(joel) think about showing the error buddy\n    render(): React.ReactNode {\n        return (\n            <div className=\"old-unit-input\">\n                <input\n                    onChange={this.handleChange}\n                    ref=\"input\" // eslint-disable-line react/no-string-refs\n                    className={ApiClassNames.INTERACTIVE}\n                    value={this.props.value}\n                    onFocus={this.handleFocus}\n                    onBlur={this.handleBlur}\n                />\n                {/* eslint-disable-next-line react/no-string-refs */}\n                <div ref=\"error\" className=\"error\" style={{display: \"none\"}}>\n                    {i18n._(\"I don't understand that\")}\n                </div>\n            </div>\n        );\n    }\n}\n\n// Extract the primitive units from a unit expression. This first simplifies\n// `expr` to a `Mul` like \"5 kg m / s^2\" then removes the first term.\nconst primUnits = function (expr) {\n    return expr.simplify().asMul().partition()[1].flatten().simplify();\n};\n\nexport default {\n    name: \"unit-input\",\n    displayName: \"Unit\",\n    defaultAlignment: \"inline-block\",\n    widget: OldUnitInput,\n    transform: (x: any): any => lens(x).del([\"value\"]).freeze(),\n    version: {major: 0, minor: 1},\n    hidden: true,\n} as WidgetExports<typeof OldUnitInput>;\n","/**\n * This is a component that adds a link to the transcript for embedded videos in articles.\n */\n\nimport {View, Text} from \"@khanacademy/wonder-blocks-core\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {Strut} from \"@khanacademy/wonder-blocks-layout\";\nimport Link from \"@khanacademy/wonder-blocks-link\";\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {getDependencies} from \"../dependencies\";\n\nconst IS_URL = /^https?:\\/\\//;\n\nconst getYoutubeId = (url: string): string => {\n    const regExp =\n        /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\n    const match = url.match(regExp);\n    if (match && match[7].length === 11) {\n        return match[7];\n    }\n    return \"videoNotFound\";\n};\n\n// will accept a youtube link or a video's slug name from embedded video and then query accordingly.\ntype Props = {\n    location: string;\n};\n\n/**\n * Video Transcript Link Component.\n */\nconst VideoTranscriptLink = (props: Props): React.ReactElement => {\n    const {location} = props;\n    const {useVideo} = getDependencies();\n    const [id, kind] = IS_URL.test(location)\n        ? [getYoutubeId(location), \"YOUTUBE_ID\"]\n        : [location, \"READABLE_ID\"];\n    // The result value conforms to the wonder-blocks-data `Result` type\n    // which is used by our GraphQL framework.\n    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'string' is not assignable to parameter of type 'VideoKind'.\n    const result = useVideo(id, kind);\n\n    switch (result.status) {\n        case \"loading\":\n            return <View>{i18n._(\"Loading...\")}</View>;\n        case \"success\": {\n            const video = result.data?.video;\n            return (\n                <View style={styles.transcriptLink}>\n                    <Text>{video?.title}</Text>\n                    <Strut size={10} />\n                    <Link\n                        href={\n                            \"/transcript/\" +\n                            (video?.contentId || \"videoNotFound\")\n                        }\n                        target=\"_blank\"\n                        className=\"visited-no-recolor\"\n                    >\n                        {i18n._(\"See video transcript\")}\n                    </Link>\n                </View>\n            );\n        }\n        case \"error\":\n            return <View>{i18n._(\"Something went wrong.\")}</View>;\n        case \"aborted\":\n            return <View>{i18n._(\"Something went wrong.\")}</View>;\n        default:\n            return <View>{i18n._(\"Something went wrong.\")}</View>;\n    }\n};\n\nconst styles = StyleSheet.create({\n    transcriptLink: {\n        flexDirection: \"row\",\n        width: \"100%\",\n        justifyContent: \"center\",\n    },\n});\n\nexport default VideoTranscriptLink;\n","/**\n * This is a video widget for embedding videos in articles.\n */\n\nimport {View} from \"@khanacademy/wonder-blocks-core\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport FixedToResponsive from \"../components/fixed-to-responsive\";\nimport {getDependencies} from \"../dependencies\";\nimport * as Changeable from \"../mixins/changeable\";\nimport a11y from \"../util/a11y\";\n\nimport VideoTranscriptLink from \"./video-transcript-link\";\n\nimport type {PerseusVideoWidgetOptions} from \"../perseus-types\";\nimport type {PerseusScore, WidgetExports, WidgetProps} from \"../types\";\n\n// Current default is 720p, based on the typical videos we upload currently\nconst DEFAULT_WIDTH = 1280;\nconst DEFAULT_HEIGHT = 720;\n\nconst KA_EMBED = \"{host}/embed_video?slug={slug}\" + \"&internal_video_only=1\";\nconst IS_URL = /^https?:\\/\\//;\nconst IS_KA_SITE = /(khanacademy\\.org|localhost)/;\n\ntype UserInput = null;\ntype Rubric = PerseusVideoWidgetOptions;\ntype RenderProps = PerseusVideoWidgetOptions; // exports has no 'transform'\ntype Props = WidgetProps<RenderProps, Rubric> & {\n    alignment: string; // Where does this get set?\n};\n\n/**\n * Video renderer.\n */\nclass Video extends React.Component<Props> {\n    /**\n     * This is the widget's grading function.\n     * Points for videos are tallied by the embedded video itself, in the case\n     * of Khan Academy videos.\n     */\n    static validate(userInput: UserInput, rubric: Rubric): PerseusScore {\n        return {\n            type: \"points\",\n            earned: 0,\n            total: 0,\n            message: null,\n        };\n    }\n\n    getUserInput: () => undefined | null | undefined = () => {\n        return null;\n    };\n\n    simpleValidate: (arg1: Rubric) => PerseusScore = (rubric) => {\n        return Video.validate(null, rubric);\n    };\n\n    change: (...args: ReadonlyArray<unknown>) => any = (...args) => {\n        // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'readonly unknown[]' is not assignable to parameter of type 'any[]'.\n        return Changeable.change.apply(this, args);\n    };\n\n    render(): React.ReactNode {\n        const {InitialRequestUrl} = getDependencies();\n\n        const location = this.props.location;\n        if (!location) {\n            return <div />;\n        }\n\n        let url;\n\n        if (IS_URL.test(location)) {\n            url = location;\n        } else {\n            url = KA_EMBED.replace(\"{slug}\", location);\n            let embedHostname = \"https://www.khanacademy.org\";\n            if (IS_KA_SITE.test(InitialRequestUrl.host)) {\n                embedHostname = InitialRequestUrl.origin;\n            }\n            url = url.replace(\"{host}\", embedHostname);\n        }\n\n        return (\n            <View>\n                <FixedToResponsive\n                    width={DEFAULT_WIDTH}\n                    height={DEFAULT_HEIGHT}\n                    // The key is here for the benefit of the editor, to ensure that\n                    // any changes cause a re-rendering of the frame.\n                    key={location + this.props.alignment}\n                >\n                    <View style={a11y.srOnly}>\n                        {i18n._(\"Khan Academy video wrapper\")}\n                    </View>\n\n                    <iframe\n                        // TODO(joshuan): Consider not using iframes when we're\n                        // loading this from webapp. This iframe is problematic\n                        // for screenreaders.\n                        className=\"perseus-video-widget\"\n                        sandbox=\"allow-same-origin allow-scripts\"\n                        width={DEFAULT_WIDTH}\n                        height={DEFAULT_HEIGHT}\n                        src={url}\n                        allowFullScreen={true}\n                    />\n                </FixedToResponsive>\n                <VideoTranscriptLink location={location} />\n            </View>\n        );\n    }\n}\n\nexport default {\n    name: \"video\",\n    displayName: \"Video\",\n    defaultAlignment: \"block\",\n    supportedAlignments: [\"block\", \"float-left\", \"float-right\", \"full-width\"],\n    widget: Video,\n} as WidgetExports<typeof Video>;\n","/* eslint-disable import/no-named-as-default */\n// As new widgets get added here, please also make sure they get added in\n// content_internal/perseus_traversal.py so they can be properly translated.\n\nimport Categorizer from \"./widgets/categorizer\";\nimport CSProgram from \"./widgets/cs-program\";\nimport Definition from \"./widgets/definition\";\nimport Dropdown from \"./widgets/dropdown\";\nimport Explanation from \"./widgets/explanation\";\nimport GradedGroup from \"./widgets/graded-group\";\nimport GradedGroupSet from \"./widgets/graded-group-set\";\nimport Grapher from \"./widgets/grapher\";\nimport Group from \"./widgets/group\";\nimport Iframe from \"./widgets/iframe\";\nimport Image from \"./widgets/image\";\nimport Interactive from \"./widgets/interaction\";\nimport InteractiveGraph from \"./widgets/interactive-graph\";\nimport LabelImage from \"./widgets/label-image\";\nimport LightsPuzzle from \"./widgets/lights-puzzle\";\nimport Matcher from \"./widgets/matcher\";\nimport Matrix from \"./widgets/matrix\";\nimport Measurer from \"./widgets/measurer\";\nimport Molecule from \"./widgets/molecule\";\nimport NumberLine from \"./widgets/number-line\";\nimport Orderer from \"./widgets/orderer\";\nimport Passage from \"./widgets/passage\";\nimport PassageRef from \"./widgets/passage-ref\";\nimport PassageRefTarget from \"./widgets/passage-ref-target\";\nimport Plotter from \"./widgets/plotter\";\nimport ReactionDiagram from \"./widgets/reaction-diagram\";\nimport Sequence from \"./widgets/sequence\";\nimport Simulator from \"./widgets/simulator\";\nimport Sorter from \"./widgets/sorter\";\nimport Table from \"./widgets/table\";\nimport Transformer from \"./widgets/transformer\";\nimport Unit from \"./widgets/unit\";\nimport Video from \"./widgets/video\";\n\nimport type {WidgetExports} from \"./types\";\n\nexport default [\n    Categorizer,\n    CSProgram,\n    Dropdown,\n    Explanation,\n    Definition,\n    Grapher,\n    GradedGroup,\n    GradedGroupSet,\n    Group,\n    Iframe,\n    Image,\n    Interactive,\n    InteractiveGraph,\n    LabelImage,\n    LightsPuzzle,\n    Matrix,\n    Matcher,\n    Measurer,\n    Molecule,\n    NumberLine,\n    Orderer,\n    Passage,\n    PassageRef,\n    PassageRefTarget,\n    Plotter,\n    ReactionDiagram,\n    Sequence,\n    Simulator,\n    Sorter,\n    Table,\n    Transformer,\n    Unit,\n    Video,\n] as ReadonlyArray<WidgetExports>;\n","import basicWidgets from \"./basic-widgets\";\nimport extraWidgets from \"./extra-widgets\";\nimport * as Widgets from \"./widgets\";\n\ndeclare const MathJax: any;\n\nexport type PerseusOptions = {\n    skipMathJax: boolean;\n};\n\n/**\n * This should be called by all clients, specifying whether extra widgets are\n * needed via `loadExtraWidgets`. It is idempotent, so it's not a problem to\n * call it multiple times.\n *\n * skipMathJax:\n *   If false/undefined, MathJax will be configured, and the\n *   promise will wait for MathJax to load (if it hasn't already).\n */\nconst init = function (options: PerseusOptions): Promise<undefined> {\n    Widgets.registerWidgets(basicWidgets);\n    Widgets.registerWidgets(extraWidgets);\n\n    // Pass skipMathJax: true if MathJax is already loaded and configured.\n    const skipMathJax = options.skipMathJax;\n\n    if (skipMathJax) {\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'Promise<void>' is not assignable to type 'Promise<undefined>'.\n        return Promise.resolve();\n    }\n\n    return new Promise(\n        (\n            resolve: (result: Promise<never>) => void,\n            reject: (error?: any) => void,\n        ) => {\n            MathJax.Hub.Config({\n                messageStyle: \"none\",\n                skipStartupTypeset: \"none\",\n                \"HTML-CSS\": {\n                    availableFonts: [\"TeX\"],\n                    imageFont: null,\n                    scale: 100,\n                    showMathMenu: false,\n                },\n            });\n\n            MathJax.Hub.Configured();\n            MathJax.Hub.Queue(resolve);\n        },\n    );\n};\n\nexport default init;\n","import basicWidgets from \"./basic-widgets\";\nimport extraWidgets from \"./extra-widgets\";\n\nimport type {WidgetExports} from \"./types\";\n\nexport default [\n    ...basicWidgets,\n    ...extraWidgets,\n] as ReadonlyArray<WidgetExports>;\n","import allWidgets from \"./all-widgets\";\nimport version from \"./version\";\nimport * as Widgets from \"./widgets\";\n\nWidgets.registerWidgets(allWidgets);\n\nconst ItemVersion = Widgets.getVersionVector();\nItemVersion[\"::renderer::\"] = version.itemDataVersion;\n\nexport default ItemVersion;\n","/**\n * A mixin that renders a custom software keypad in additional to the base\n * component. The base component will receive blur events when the keypad is\n * dismissed and can access the keypad element itself so as to manage its\n * activation and dismissal.\n *\n * TODO(charlie): This would make a nicer higher-order component, except that\n * we need to expose methods on the base component (i.e., `ItemRenderer`). When\n * `ItemRenderer` and friends are written as ES6 Classes, we can have them\n * extend a `ProvideKeypad` component instead of using this mixin.\n */\n\nimport {Keypad} from \"@khanacademy/math-input\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport reactRender from \"../util/react-render\";\n\nimport type {CSSProperties} from \"aphrodite\";\n\nexport type KeypadProps = {\n    // An Aphrodite style object, to be applied to the keypad container.\n    // Note that, given our awkward structure of injecting the keypad, this\n    // style won't be applied or updated dynamically. Rather, it will only\n    // be applied in `componentDidMount`.\n    keypadStyle?: CSSProperties;\n};\n\nexport type KeypadApiOptions = {\n    customKeypad: boolean;\n    nativeKeypadProxy: any;\n};\n\n// NOTE: This is not a real component.  It's a collection of methods used to\n// create and manage a Keypad instances.\n// TODO(LP-10789): replace this with a React Context object to pass information\n// between Perseus and the Keypad.\nconst ProvideKeypad = {\n    propTypes: {\n        apiOptions: PropTypes.shape({\n            customKeypad: PropTypes.bool,\n            nativeKeypadProxy: PropTypes.func,\n        }),\n        // An Aphrodite style object, to be applied to the keypad container.\n        // Note that, given our awkward structure of injecting the keypad, this\n        // style won't be applied or updated dynamically. Rather, it will only\n        // be applied in `componentDidMount`.\n        keypadStyle: PropTypes.any,\n    },\n\n    getInitialState(): {\n        keypadElement: any | null;\n    } {\n        const _this = this;\n        let keypadElement = null;\n        if (\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            _this.props.apiOptions &&\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            _this.props.apiOptions.customKeypad &&\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            _this.props.apiOptions.nativeKeypadProxy\n        ) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            keypadElement = _this.props.apiOptions.nativeKeypadProxy(\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'. | TS2339 - Property 'blur' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n                () => _this.blur && _this.blur(),\n            );\n        }\n        return {keypadElement};\n    },\n\n    componentDidMount() {\n        const _this = this;\n        if (\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            _this.props.apiOptions &&\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            _this.props.apiOptions.customKeypad &&\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            !_this.props.apiOptions.nativeKeypadProxy\n        ) {\n            // TODO(charlie): Render this and the wrapped component in the same\n            // React tree. We may also want to add this keypad asynchronously\n            // or on-demand in the future.\n            // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            _this._keypadContainer = document.createElement(\"div\");\n            // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            document.body?.appendChild(_this._keypadContainer);\n\n            reactRender(\n                <Keypad\n                    onElementMounted={(element) => {\n                        // NOTE(kevinb): The reason why this setState works is\n                        // b/c we're calling it manually from item-renderer.jsx\n                        // and we're manually setting the 'this' by using 'call'\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'setState' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n                        _this.setState({\n                            keypadElement: element,\n                        });\n                    }}\n                    onDismiss={() => {\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'blur' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'. | TS2339 - Property 'blur' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n                        _this.blur && _this.blur();\n                    }}\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n                    style={_this.props.keypadStyle}\n                />,\n                // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n                _this._keypadContainer,\n            );\n        }\n    },\n\n    componentWillUnmount() {\n        const _this = this;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n        if (_this._keypadContainer) {\n            // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            ReactDOM.unmountComponentAtNode(_this._keypadContainer);\n            // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            if (_this._keypadContainer.parentNode) {\n                // Note ChildNode.remove() isn't available in older Android\n                // webviews.\n                // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n                _this._keypadContainer.parentNode.removeChild(\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n                    _this._keypadContainer,\n                );\n            }\n            // @ts-expect-error [FEI-5003] - TS2339 - Property '_keypadContainer' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n            _this._keypadContainer = null;\n        }\n    },\n\n    keypadElement(): any {\n        const _this = this;\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'state' does not exist on type '{ readonly propTypes: { readonly apiOptions: React.PropType<{ customKeypad?: boolean | undefined; nativeKeypadProxy?: ((...a: readonly any[]) => unknown) | undefined; }>; readonly keypadStyle: Requireable<any>; }; readonly getInitialState: () => { ...; }; readonly componentDidMount: () => void; readonly componentWil...'.\n        return _this.state.keypadElement;\n    },\n} as const;\n\nexport default ProvideKeypad;\n","/**\n * An article renderer. Articles are long-form pieces of content,\n * composed of multiple (Renderer) sections concatenated together.\n */\n\nimport * as PerseusLinter from \"@khanacademy/perseus-linter\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nimport ProvideKeypad from \"./mixins/provide-keypad\";\nimport {ClassNames as ApiClassNames, ApiOptions} from \"./perseus-api\";\nimport Renderer from \"./renderer\";\nimport Util from \"./util\";\n\nconst rendererProps = PropTypes.shape({\n    content: PropTypes.string,\n    widgets: PropTypes.objectOf(PropTypes.any),\n    images: PropTypes.objectOf(PropTypes.any),\n});\n\nclass ArticleRenderer extends React.Component<any, any> {\n    _currentFocus: any;\n\n    static propTypes = {\n        ...ProvideKeypad.propTypes,\n        apiOptions: PropTypes.shape({\n            onFocusChange: PropTypes.func,\n            isMobile: PropTypes.bool,\n        }),\n        json: PropTypes.oneOfType([\n            rendererProps,\n            PropTypes.arrayOf(rendererProps),\n        ]).isRequired,\n\n        // Whether to use the new Bibliotron styles for articles\n        useNewStyles: PropTypes.bool,\n        linterContext: PerseusLinter.linterContextProps,\n        legacyPerseusLint: PropTypes.arrayOf(PropTypes.string),\n    };\n\n    static defaultProps: any = {\n        apiOptions: {},\n        useNewStyles: false,\n        linterContext: PerseusLinter.linterContextDefault,\n    };\n\n    constructor(props: any) {\n        super(props);\n        this.state = ProvideKeypad.getInitialState.call(this);\n    }\n\n    componentDidMount() {\n        ProvideKeypad.componentDidMount.call(this);\n        this._currentFocus = null;\n    }\n\n    shouldComponentUpdate(nextProps: any, nextState: any): any {\n        return nextProps !== this.props || nextState !== this.state;\n    }\n\n    componentWillUnmount() {\n        ProvideKeypad.componentWillUnmount.call(this);\n    }\n\n    keypadElement: () => void = () => {\n        return ProvideKeypad.keypadElement.call(this);\n    };\n\n    _handleFocusChange: (arg1: any, arg2: any) => void = (\n        newFocusPath,\n        oldFocusPath,\n    ) => {\n        // TODO(charlie): DRY this up--some of this logic is repeated in\n        // ItemRenderer.\n        if (newFocusPath) {\n            this._setCurrentFocus(newFocusPath);\n        } else {\n            this._onRendererBlur(oldFocusPath);\n        }\n    };\n\n    _setCurrentFocus: (arg1: any) => void = (newFocusPath) => {\n        const keypadElement = this.keypadElement();\n\n        const prevFocusPath = this._currentFocus;\n        this._currentFocus = newFocusPath;\n\n        // Use the section prefix to extract the relevant Renderer's input\n        // paths, so as to check whether the focused path represents an\n        // input.\n        let didFocusInput = false;\n        if (this._currentFocus) {\n            const [sectionRef, ...focusPath] = this._currentFocus;\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getInputPaths' does not exist on type 'ReactInstance'.\n            const inputPaths = this.refs[sectionRef].getInputPaths();\n            didFocusInput = inputPaths.some((inputPath) => {\n                return Util.inputPathsEqual(inputPath, focusPath);\n            });\n        }\n\n        if (this.props.apiOptions.onFocusChange != null) {\n            this.props.apiOptions.onFocusChange(\n                this._currentFocus,\n                prevFocusPath,\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'getDOMNode' does not exist on type 'never'.\n                didFocusInput && keypadElement && keypadElement.getDOMNode(),\n            );\n        }\n\n        // @ts-expect-error [FEI-5003] - TS1345 - An expression of type 'void' cannot be tested for truthiness.\n        if (keypadElement) {\n            if (didFocusInput) {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'activate' does not exist on type 'never'.\n                keypadElement.activate();\n            } else {\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'dismiss' does not exist on type 'never'.\n                keypadElement.dismiss();\n            }\n        }\n    };\n\n    _onRendererBlur: (arg1: any) => void = (blurPath) => {\n        const blurringFocusPath = this._currentFocus;\n\n        // Failsafe: abort if ID is different, because focus probably happened\n        // before blur.\n        if (!Util.inputPathsEqual(blurPath, blurringFocusPath)) {\n            return;\n        }\n\n        // Wait until after any new focus events fire this tick before declaring\n        // that nothing is focused, since if there were a focus change across\n        // sections, we could receive the blur before the focus.\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n        // eslint-disable-next-line no-restricted-syntax\n        setTimeout(() => {\n            if (Util.inputPathsEqual(this._currentFocus, blurringFocusPath)) {\n                this._setCurrentFocus(null);\n            }\n        });\n    };\n\n    blur: () => void = () => {\n        if (this._currentFocus) {\n            const [sectionRef, ...inputPath] = this._currentFocus;\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'blurPath' does not exist on type 'ReactInstance'.\n            this.refs[sectionRef].blurPath(inputPath);\n        }\n    };\n\n    _sections: () => any = () => {\n        return Array.isArray(this.props.json)\n            ? this.props.json\n            : [this.props.json];\n    };\n\n    render(): React.ReactNode {\n        const apiOptions = {\n            ...ApiOptions.defaults,\n            ...this.props.apiOptions,\n            isArticle: true,\n        } as const;\n\n        const classes = classNames({\n            \"framework-perseus\": true,\n            \"perseus-article\": true,\n            \"bibliotron-article\": this.props.useNewStyles,\n            // NOTE(charlie): For exercises, this is applied outside of Perseus\n            // (in webapp).\n            [ApiClassNames.MOBILE]: apiOptions.isMobile,\n        });\n\n        // TODO(alex): Add mobile api functions and pass them down here\n        const sections = this._sections().map((section, i) => {\n            const refForSection = `section-${i}`;\n            return (\n                <div key={i} className=\"clearfix\">\n                    <Renderer\n                        {...section}\n                        ref={refForSection}\n                        key={i}\n                        key_={i}\n                        keypadElement={this.keypadElement()}\n                        apiOptions={{\n                            ...apiOptions,\n                            onFocusChange: (newFocusPath, oldFocusPath) => {\n                                // Prefix the paths with the relevant section,\n                                // so as to allow us to distinguish between\n                                // equivalently-named inputs across Renderers.\n                                this._handleFocusChange(\n                                    newFocusPath &&\n                                        [refForSection].concat(newFocusPath),\n                                    oldFocusPath &&\n                                        [refForSection].concat(oldFocusPath),\n                                );\n                            },\n                        }}\n                        linterContext={PerseusLinter.pushContextStack(\n                            this.props.linterContext,\n                            \"article\",\n                        )}\n                        legacyPerseusLint={this.props.legacyPerseusLint}\n                    />\n                </div>\n            );\n        });\n\n        return <div className={classes}>{sections}</div>;\n    }\n}\n\nexport default ArticleRenderer;\n","import * as PerseusLinter from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classnames from \"classnames\";\nimport * as React from \"react\";\n\nimport Renderer from \"./renderer\";\nimport {baseUnitPx, hintBorderWidth, kaGreen, gray97} from \"./styles/constants\";\nimport mediaQueries from \"./styles/media-queries\";\n\nimport type {APIOptions, LinterContextProps} from \"./types\";\n\ntype Props = {\n    apiOptions: APIOptions;\n    className?: string;\n    hint: any;\n    lastHint?: boolean;\n    lastRendered?: boolean;\n    pos: number;\n    totalHints?: number;\n    findExternalWidgets?: any;\n    linterContext: LinterContextProps;\n};\n\ntype DefaultProps = {\n    linterContext: Props[\"linterContext\"];\n};\n\n/* Renders just a hint preview */\nclass HintRenderer extends React.Component<Props> {\n    static defaultProps: DefaultProps = {\n        linterContext: PerseusLinter.linterContextDefault,\n    };\n\n    getSerializedState: () => void = () => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'getSerializedState' does not exist on type 'ReactInstance'.\n        return this.refs.renderer.getSerializedState();\n    };\n\n    restoreSerializedState: (\n        arg1: any,\n        arg2: (...args: ReadonlyArray<any>) => unknown,\n    ) => void = (state, callback) => {\n        // eslint-disable-next-line react/no-string-refs\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'restoreSerializedState' does not exist on type 'ReactInstance'.\n        this.refs.renderer.restoreSerializedState(state, callback);\n    };\n\n    render(): React.ReactNode {\n        const {\n            apiOptions,\n            className,\n            hint,\n            lastHint,\n            lastRendered,\n            pos,\n            totalHints,\n        } = this.props;\n\n        const {isMobile} = apiOptions;\n\n        const classNames = classnames(\n            !isMobile && \"perseus-hint-renderer\",\n            isMobile && css(styles.newHint),\n            isMobile && lastRendered && css(styles.lastRenderedNewHint),\n            lastHint && \"last-hint\",\n            lastRendered && \"last-rendered\",\n            className,\n        );\n\n        // TODO(charlie): Allowing `customKeypad` would require that we\n        // extend `ItemRenderer` to support nested inputs in the `HintsRenderer`.\n        // For now, we disable this option.\n        // Instead, clients will get standard <input/> elements, which\n        // aren't nice to use on mobile, but are at least usable.\n        const rendererApiOptions = {\n            ...apiOptions,\n            customKeypad: false,\n        } as const;\n\n        return (\n            // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'number | undefined'.\n            <div className={classNames} tabIndex=\"-1\">\n                {!apiOptions.isMobile && (\n                    <span className=\"perseus-sr-only\">\n                        {i18n._(\"Hint #%(pos)s\", {pos: pos + 1})}\n                    </span>\n                )}\n                {!apiOptions.isMobile && totalHints != null && pos != null && (\n                    <span\n                        className=\"perseus-hint-label\"\n                        style={{\n                            display: \"block\",\n                            color: apiOptions.hintProgressColor,\n                        }}\n                    >\n                        {`${pos + 1} / ${totalHints}`}\n                    </span>\n                )}\n                <Renderer\n                    // eslint-disable-next-line react/no-string-refs\n                    ref=\"renderer\"\n                    widgets={hint.widgets}\n                    content={hint.content || \"\"}\n                    images={hint.images}\n                    apiOptions={rendererApiOptions}\n                    findExternalWidgets={this.props.findExternalWidgets}\n                    linterContext={PerseusLinter.pushContextStack(\n                        this.props.linterContext,\n                        \"hint\",\n                    )}\n                />\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    newHint: {\n        marginBottom: 1.5 * baseUnitPx,\n\n        borderLeftColor: gray97,\n        borderLeftStyle: \"solid\",\n        borderLeftWidth: hintBorderWidth,\n\n        // Only apply left-padding on tablets, to avoid being flush with the\n        // border. On phones, padding is applied internally by the child\n        // renderers. Some content on phones that is rendered at full-bleed may\n        // end up flush with the border, but that's acceptable for now.\n        [mediaQueries.lgOrSmaller]: {\n            paddingLeft: baseUnitPx,\n        },\n        [mediaQueries.smOrSmaller]: {\n            paddingLeft: 0,\n        },\n\n        \":focus\": {\n            outline: \"none\",\n        },\n    },\n\n    lastRenderedNewHint: {\n        marginBottom: 0,\n        borderLeftColor: kaGreen,\n    },\n});\n\nexport default HintRenderer;\n","import * as PerseusLinter from \"@khanacademy/perseus-linter\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\";\nimport classnames from \"classnames\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport HintRenderer from \"./hint-renderer\";\nimport {ApiOptions} from \"./perseus-api\";\nimport Renderer from \"./renderer\";\nimport {\n    baseUnitPx,\n    hintBorderWidth,\n    kaGreen,\n    gray85,\n    gray17,\n} from \"./styles/constants\";\nimport mediaQueries from \"./styles/media-queries\";\nimport sharedStyles from \"./styles/shared\";\nimport Util from \"./util\";\n\nimport type {APIOptionsWithDefaults} from \"./types\";\n\ntype Props = JSX.LibraryManagedAttributes<\n    Renderer,\n    // @ts-expect-error [FEI-5003] - TS2344 - Type 'Renderer' does not satisfy the constraint 'keyof IntrinsicElements | JSXElementConstructor<any>'.\n    React.ComponentProps<typeof Renderer>\n> & {\n    className?: string;\n    // note (mcurtis): I think this should be $ReadOnlyArray<PerseusRenderer>,\n    // but things spiraled out of control when I tried to change it\n    hints: ReadonlyArray<any>;\n    hintsVisible?: number;\n};\n\ntype DefaultProps = {\n    // @ts-expect-error [FEI-5003] - TS2339 - Property 'linterContext' does not exist on type '{ className?: string | undefined; hints: readonly any[]; hintsVisible?: number | undefined; }'.\n    linterContext: Props[\"linterContext\"];\n};\n\ntype State = {\n    isFinalHelpPage: boolean;\n};\n\n// Use of UNSAFE_componentWillReceiveProps:\n// eslint-disable-next-line react/no-unsafe\nclass HintsRenderer extends React.Component<Props, State> {\n    static defaultProps: DefaultProps = {\n        linterContext: PerseusLinter.linterContextDefault,\n    };\n\n    // The isFinalHelpPage property determines if the user has requested help\n    // after answering an exercise question incorrectly, which differs from\n    // the case when the user is requesting successive hints. In the case\n    // where isFinalHelpPage property is true, we want to display all hints.\n    // We know the user is on the final help page when the hintsVisible\n    // property jumps from 0 to the total number of hints.\n    state: any = {isFinalHelpPage: false};\n\n    componentDidMount() {\n        this._cacheHintImages();\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        // @ts-expect-error [FEI-5003] - TS2532 - Object is possibly 'undefined'. | TS2532 - Object is possibly 'undefined'.\n        if (nextProps.hintsVisible - this.props.hintsVisible > 1) {\n            this.setState({isFinalHelpPage: true});\n        }\n    }\n\n    componentDidUpdate(prevProps: Props, prevState: State) {\n        if (\n            !_.isEqual(prevProps.hints, this.props.hints) ||\n            prevProps.hintsVisible !== this.props.hintsVisible\n        ) {\n            this._cacheHintImages();\n        }\n\n        // Force number to make TypeScript happy\n        const prevHintsVisible = prevProps.hintsVisible || 0;\n        const nextHintsVisible = this.props.hintsVisible || 0;\n\n        // When a new hint is displayed we immediately focus it\n        // (keeping within the boundaries of hint count)\n        if (\n            prevHintsVisible < nextHintsVisible &&\n            nextHintsVisible <= this.props.hints.length &&\n            nextHintsVisible >= 0\n        ) {\n            const pos = nextHintsVisible - 1;\n            // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'. | TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n            ReactDOM.findDOMNode(this.refs[\"hintRenderer\" + pos]).focus(); // eslint-disable-line react/no-string-refs\n        }\n    }\n\n    _hintsVisible: () => number = () => {\n        if (this.props.hintsVisible == null || this.props.hintsVisible === -1) {\n            return this.props.hints.length;\n        }\n        return this.props.hintsVisible;\n    };\n\n    _cacheImagesInHint: (arg1: any) => void = (hint) => {\n        _.each(hint.images, (data, src) => {\n            const image = new Image();\n            image.src = Util.getRealImageUrl(src);\n        });\n    };\n\n    _cacheHintImages: () => any = () => {\n        // Only cache images in the first hint at the start. When hints are\n        // taken, cache images in the rest of the hints\n        if (this._hintsVisible() > 0) {\n            _.each(this.props.hints, this._cacheImagesInHint);\n        } else if (this.props.hints.length > 0) {\n            this._cacheImagesInHint(this.props.hints[0]);\n        }\n    };\n\n    getApiOptions: () => APIOptionsWithDefaults = () => {\n        // When an item is answered correctly, the entire exercise is set to\n        // `readOnly = true` so that the user cannot switch answers. However, this\n        // makes hyperlinks in hints unclickable. Thus, we always set readOnly to be\n        // false in hints.\n        return {\n            ...ApiOptions.defaults,\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'apiOptions' does not exist on type 'Readonly<{ className?: string | undefined; hints: readonly any[]; hintsVisible?: number | undefined; }> & Readonly<{ children?: ReactNode; }>'.\n            ...this.props.apiOptions,\n            readOnly: false,\n        };\n    };\n\n    getSerializedState: () => any = () => {\n        return _.times(this._hintsVisible(), (i) => {\n            // eslint-disable-next-line react/no-string-refs\n            // @ts-expect-error [FEI-5003] - TS2339 - Property 'getSerializedState' does not exist on type 'ReactInstance'.\n            return this.refs[\"hintRenderer\" + i].getSerializedState();\n        });\n    };\n\n    restoreSerializedState: (\n        arg1: any,\n        arg2: (...args: ReadonlyArray<any>) => unknown,\n    ) => void = (state, callback) => {\n        // We need to wait until all the renderers are finished restoring their\n        // state before we fire our callback.\n        let numCallbacks = 1;\n        const fireCallback = () => {\n            --numCallbacks;\n            if (callback && numCallbacks === 0) {\n                callback();\n            }\n        };\n\n        _.each(state, (hintState, i) => {\n            // eslint-disable-next-line react/no-string-refs\n            const hintRenderer = this.refs[\"hintRenderer\" + i];\n            // This is not ideal in that it doesn't restore state\n            // if the hint isn't visible, but we can't exactly restore\n            // the state to an unmounted renderer, so...\n            // If you want to restore state to hints, make sure to\n            // have the appropriate number of hints visible already.\n            if (hintRenderer) {\n                ++numCallbacks;\n                // @ts-expect-error [FEI-5003] - TS2339 - Property 'restoreSerializedState' does not exist on type 'ReactInstance'.\n                hintRenderer.restoreSerializedState(hintState, fireCallback);\n            }\n        });\n\n        // This makes sure that the callback is fired if there aren't any\n        // mounted renderers.\n        fireCallback();\n    };\n\n    render(): React.ReactNode {\n        const apiOptions = this.getApiOptions();\n        const hintsVisible = this._hintsVisible();\n        const hints: Array<\n            React.ReactElement<React.ComponentProps<typeof HintRenderer>>\n        > = [];\n        const isFinalHelpPage = this.state.isFinalHelpPage;\n        this.props.hints.slice(0, hintsVisible).forEach((hint, i) => {\n            const lastHint =\n                i === this.props.hints.length - 1 && !/\\*\\*/.test(hint.content);\n            const lastRendered = i === hintsVisible - 1;\n\n            const renderer = (\n                <HintRenderer\n                    lastHint={lastHint}\n                    lastRendered={lastRendered}\n                    hint={hint}\n                    pos={i}\n                    totalHints={this.props.hints.length}\n                    ref={\"hintRenderer\" + i}\n                    key={\"hintRenderer\" + i}\n                    apiOptions={apiOptions}\n                    // @ts-expect-error [FEI-5003] - TS2339 - Property 'findExternalWidgets' does not exist on type 'Readonly<{ className?: string | undefined; hints: readonly any[]; hintsVisible?: number | undefined; }> & Readonly<{ children?: ReactNode; }>'.\n                    findExternalWidgets={this.props.findExternalWidgets}\n                    linterContext={PerseusLinter.pushContextStack(\n                        // @ts-expect-error [FEI-5003] - TS2339 - Property 'linterContext' does not exist on type 'Readonly<{ className?: string | undefined; hints: readonly any[]; hintsVisible?: number | undefined; }> & Readonly<{ children?: ReactNode; }>'.\n                        this.props.linterContext,\n                        \"hints[\" + i + \"]\",\n                    )}\n                />\n            );\n\n            if (isFinalHelpPage) {\n                hints.push(renderer);\n            } else {\n                if (hint.replace && hints.length > 0) {\n                    hints[hints.length - 1] = renderer;\n                } else {\n                    hints.push(renderer);\n                }\n            }\n        });\n\n        const {getAnotherHint} = apiOptions;\n\n        const showGetAnotherHint =\n            getAnotherHint &&\n            hintsVisible > 0 &&\n            hintsVisible < this.props.hints.length;\n        const hintRatioCopy = `(${hintsVisible}/${this.props.hints.length})`;\n\n        const classNames = classnames(\n            this.props.className,\n            apiOptions.isMobile &&\n                hintsVisible > 0 &&\n                css(styles.mobileHintStylesHintsRenderer),\n        );\n\n        return (\n            <div className={classNames}>\n                {apiOptions.isMobile && hintsVisible > 0 && (\n                    <div\n                        className={css(\n                            styles.mobileHintStylesHintTitle,\n                            sharedStyles.responsiveLabel,\n                        )}\n                    >\n                        {i18n._(\"Hints\")}\n                    </div>\n                )}\n                {hints}\n                {showGetAnotherHint && (\n                    <button\n                        // @ts-expect-error [FEI-5003] - TS2322 - Type '{ children: Element[]; rel: string; className: string; onClick: (evt: MouseEvent<HTMLButtonElement, MouseEvent>) => void; }' is not assignable to type 'DetailedHTMLProps<ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>'.\n                        rel=\"button\"\n                        className={css(\n                            styles.linkButton,\n                            styles.getAnotherHintButton,\n                            apiOptions.isMobile &&\n                                styles.mobileHintStylesGetAnotherHintButton,\n                        )}\n                        onClick={(evt) => {\n                            evt.preventDefault();\n                            evt.stopPropagation();\n                            if (getAnotherHint) {\n                                getAnotherHint();\n                            }\n                        }}\n                    >\n                        <span\n                            className={css(\n                                styles.plusText,\n                                apiOptions.isMobile &&\n                                    styles.mobileHintStylesPlusText,\n                            )}\n                        >\n                            +\n                        </span>\n                        <span className={css(styles.getAnotherHintText)}>\n                            {i18n._(\"Get another hint\")} {hintRatioCopy}\n                        </span>\n                    </button>\n                )}\n            </div>\n        );\n    }\n}\n\nconst hintIndentation = baseUnitPx + hintBorderWidth;\n\nconst styles = StyleSheet.create({\n    // eslint-disable-next-line react-native/no-unused-styles\n    rendererMargins: {\n        marginTop: baseUnitPx,\n    },\n\n    linkButton: {\n        cursor: \"pointer\",\n        border: \"none\",\n        backgroundColor: \"transparent\",\n        fontSize: \"100%\",\n        fontFamily: \"inherit\",\n        fontWeight: \"bold\",\n        color: kaGreen,\n        padding: 0,\n        position: \"relative\",\n    },\n\n    plusText: {\n        fontSize: 20,\n        position: \"absolute\",\n        top: -3,\n        left: 0,\n    },\n    getAnotherHintText: {\n        marginLeft: 16,\n    },\n\n    mobileHintStylesHintsRenderer: {\n        marginTop: 4 * baseUnitPx,\n        border: `solid ${gray85}`,\n        borderWidth: \"1px 0 0 0\",\n\n        position: \"relative\",\n        \":before\": {\n            content: '\"\"',\n            display: \"table\",\n            clear: \"both\",\n        },\n        \":after\": {\n            content: '\"\"',\n            display: \"table\",\n            clear: \"both\",\n        },\n    },\n\n    mobileHintStylesHintTitle: {\n        fontFamily: \"inherit\",\n        fontStyle: \"normal\",\n        fontWeight: \"bold\",\n        color: gray17,\n\n        paddingTop: baseUnitPx,\n        paddingBottom: 1.5 * baseUnitPx,\n\n        [mediaQueries.lgOrSmaller]: {\n            paddingLeft: 0,\n        },\n        [mediaQueries.smOrSmaller]: {\n            // On phones, ensure that the button is aligned with the hint body\n            // content, which is inset at the standard `baseUnitPx`, plus an\n            // additional `hintBorderWidth`.\n            paddingLeft: hintIndentation,\n        },\n    },\n\n    getAnotherHintButton: {\n        marginTop: 1.5 * baseUnitPx,\n    },\n\n    mobileHintStylesGetAnotherHintButton: {\n        [mediaQueries.lgOrSmaller]: {\n            paddingLeft: 0,\n        },\n        [mediaQueries.smOrSmaller]: {\n            // As with the title, on phones, ensure that the button is aligned\n            // with the hint body content.\n            paddingLeft: hintIndentation,\n        },\n    },\n\n    mobileHintStylesPlusText: {\n        [mediaQueries.lgOrSmaller]: {\n            left: 0,\n        },\n        [mediaQueries.smOrSmaller]: {\n            left: hintIndentation,\n        },\n    },\n});\n\nexport default HintsRenderer;\n","/* eslint-disable react/no-unsafe */\nimport * as PerseusLinter from \"@khanacademy/perseus-linter\";\nimport $ from \"jquery\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport _ from \"underscore\";\n\nimport HintsRenderer from \"./hints-renderer\";\nimport Objective from \"./interactive2/objective_\";\nimport ProvideKeypad from \"./mixins/provide-keypad\";\nimport {ApiOptions} from \"./perseus-api\";\nimport Renderer from \"./renderer\";\nimport Util from \"./util\";\nimport reactRender from \"./util/react-render\";\n\nimport type {KeypadProps} from \"./mixins/provide-keypad\";\nimport type {PerseusItem} from \"./perseus-types\";\nimport type {APIOptions, FocusPath, KEScore, LinterContextProps} from \"./types\";\n\nconst {mapObject} = Objective;\n\ntype Props = // These props are used by the ProvideKeypad mixin.\n    KeypadProps & {\n        // defaults are set in `this.update()` so as to adhere to\n        // `ApiOptions.PropTypes`, though the API options that are passed in\n        // can be in any degree of completeness\n        apiOptions: APIOptions;\n        // Whether this component should control hiding/showing peripheral\n        // item-related components (for list, see item.answerArea below).\n        // TODO(alex): Generalize this to an 'expectsToBeInTemplate' prop\n        controlPeripherals?: boolean;\n        workAreaSelector: string;\n        hintsAreaSelector: string;\n        initialHintsVisible?: number;\n        item: PerseusItem | any /* any for _multi items */;\n        onShowCalculator?: () => unknown;\n        onShowChi2Table?: () => unknown;\n        onShowPeriodicTable?: () => unknown;\n        onShowTTable?: () => unknown;\n        onShowZTable?: () => unknown;\n        problemNum: number;\n        reviewMode: boolean;\n        // TODO(kevinb): make this more precise\n        savedState: any;\n        linterContext: LinterContextProps;\n        legacyPerseusLint?: ReadonlyArray<string>;\n    };\n\ntype DefaultProps = {\n    apiOptions: Props[\"apiOptions\"];\n    controlPeripherals: Props[\"controlPeripherals\"];\n    hintsAreaSelector: Props[\"hintsAreaSelector\"];\n    initialHintsVisible: Props[\"initialHintsVisible\"];\n    linterContext: Props[\"linterContext\"];\n    reviewMode: Props[\"reviewMode\"];\n    workAreaSelector: Props[\"workAreaSelector\"];\n};\n\ntype State = {\n    keypadElement: HTMLElement | null | undefined; // from ProvideKeypad.getInitialState,\n    hintsVisible: number;\n    questionCompleted: boolean;\n    questionHighlightedWidgets: ReadonlyArray<string>; // of WidgetIDs\n};\n\ntype SerializedState = {\n    hints: any;\n    question: {\n        [id: string]: any;\n    };\n};\n\nclass ItemRenderer extends React.Component<Props, State> {\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'questionRenderer' has no initializer and is not definitely assigned in the constructor.\n    questionRenderer: Renderer;\n    hintsRenderer: React.ElementRef<typeof HintsRenderer> | null | undefined;\n    _currentFocus: FocusPath;\n\n    static defaultProps: DefaultProps = {\n        apiOptions: ApiOptions.defaults, // defaults are set in `this.update()`\n        controlPeripherals: true,\n        hintsAreaSelector: \"#hintsarea\",\n        initialHintsVisible: 0,\n        workAreaSelector: \"#workarea\",\n        reviewMode: false,\n        linterContext: PerseusLinter.linterContextDefault,\n    };\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            // NOTE: This value is used in provide-keypad.jsx which contains a\n            // \"mixin\" that this file calls methods on.\n            ...ProvideKeypad.getInitialState.call(this),\n            hintsVisible: props.initialHintsVisible || 0,\n            questionCompleted: false,\n            questionHighlightedWidgets: [],\n        };\n    }\n\n    componentDidMount() {\n        ProvideKeypad.componentDidMount.call(this);\n        if (\n            this.props.controlPeripherals &&\n            this.props.apiOptions.setDrawingAreaAvailable\n        ) {\n            this.props.apiOptions.setDrawingAreaAvailable(true);\n        }\n        this._currentFocus = null;\n        this.update();\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        this.setState({\n            questionHighlightedWidgets: [],\n        });\n    }\n\n    componentDidUpdate() {\n        this.update();\n    }\n\n    componentWillUnmount() {\n        ProvideKeypad.componentWillUnmount.call(this);\n        const workArea = document.querySelector(this.props.workAreaSelector);\n        if (workArea != null) {\n            ReactDOM.unmountComponentAtNode(workArea);\n        }\n        const hintsArea = document.querySelector(this.props.hintsAreaSelector);\n        if (hintsArea != null) {\n            ReactDOM.unmountComponentAtNode(hintsArea);\n        }\n\n        if (this.props.controlPeripherals) {\n            const answerArea = this.props.item.answerArea || {};\n            if (answerArea.calculator) {\n                $(\"#calculator\").hide();\n            }\n            if (answerArea.periodicTable) {\n                $(\".periodic-table-info-box\").hide();\n            }\n            if (answerArea.zTable) {\n                $(\".z-table-info-box\").hide();\n            }\n            if (answerArea.tTable) {\n                $(\".t-table-info-box\").hide();\n            }\n            if (answerArea.chi2Table) {\n                $(\".chi2-table-info-box\").hide();\n            }\n        }\n    }\n\n    keypadElement(): any {\n        return ProvideKeypad.keypadElement.call(this);\n    }\n\n    update() {\n        const apiOptions = {\n            ...ApiOptions.defaults,\n            ...this.props.apiOptions,\n            onFocusChange: this._handleFocusChange,\n        } as const;\n\n        const workArea = document.querySelector(this.props.workAreaSelector);\n        const hintsArea = document.querySelector(this.props.hintsAreaSelector);\n        if (!workArea || !hintsArea) {\n            return;\n        }\n\n        // Since the item renderer works by rendering things into three divs\n        // that have completely different places in the DOM, we have to do this\n        // strangeness instead of relying on React's normal render() method.\n        // TODO(alpert): Figure out how to clean this up somehow\n        reactRender(\n            <Renderer\n                ref={(node) => {\n                    if (!node) {\n                        return;\n                    }\n                    this.questionRenderer = node;\n\n                    // NOTE(jeremy): Why don't we just pass this into the\n                    // renderer as a prop?\n                    const {answerableCallback} = apiOptions;\n                    if (answerableCallback) {\n                        const isAnswerable =\n                            this.questionRenderer.emptyWidgets().length === 0;\n                        answerableCallback(isAnswerable);\n                    }\n                }}\n                keypadElement={this.keypadElement()}\n                problemNum={this.props.problemNum}\n                onInteractWithWidget={this.handleInteractWithWidget}\n                highlightedWidgets={this.state.questionHighlightedWidgets}\n                apiOptions={apiOptions}\n                questionCompleted={this.state.questionCompleted}\n                reviewMode={this.props.reviewMode}\n                savedState={this.props.savedState}\n                linterContext={PerseusLinter.pushContextStack(\n                    this.props.linterContext,\n                    \"question\",\n                )}\n                {...this.props.item.question}\n                legacyPerseusLint={this.props.legacyPerseusLint}\n            />,\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Element' is not assignable to parameter of type 'HTMLElement'.\n            workArea,\n        );\n\n        reactRender(\n            <HintsRenderer\n                ref={(node) => (this.hintsRenderer = node)}\n                hints={this.props.item.hints}\n                hintsVisible={this.state.hintsVisible}\n                // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                apiOptions={apiOptions}\n                linterContext={PerseusLinter.pushContextStack(\n                    this.props.linterContext,\n                    \"hints\",\n                )}\n            />,\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Element' is not assignable to parameter of type 'HTMLElement'.\n            hintsArea,\n        );\n\n        const answerArea = this.props.item.answerArea || {};\n        if (this.props.controlPeripherals) {\n            $(\"#calculator\").toggle(answerArea.calculator || false);\n            $(\".periodic-table-info-box\").toggle(\n                answerArea.periodicTable || false,\n            );\n            $(\".z-table-info-box\").toggle(answerArea.zTable || false);\n            $(\".t-table-info-box\").toggle(answerArea.tTable || false);\n            $(\".chi2-table-info-box\").toggle(answerArea.chi2Table || false);\n        } else {\n            if (answerArea.calculator) {\n                this.props.onShowCalculator && this.props.onShowCalculator();\n            }\n            if (answerArea.periodicTable) {\n                this.props.onShowPeriodicTable &&\n                    this.props.onShowPeriodicTable();\n            }\n            if (answerArea.zTable) {\n                this.props.onShowZTable && this.props.onShowZTable();\n            }\n            if (answerArea.tTable) {\n                this.props.onShowTTable && this.props.onShowTTable();\n            }\n            if (answerArea.chi2Table) {\n                this.props.onShowChi2Table && this.props.onShowChi2Table();\n            }\n        }\n    }\n\n    _handleFocusChange: (newFocus: FocusPath, oldFocus: FocusPath) => void = (\n        newFocus: FocusPath,\n        oldFocus: FocusPath,\n    ) => {\n        if (newFocus != null) {\n            this._setCurrentFocus(newFocus);\n        } else {\n            this._onRendererBlur(oldFocus);\n        }\n    };\n\n    // Sets the current focus path and element and send an onChangeFocus event\n    // back to our parent.\n    _setCurrentFocus(newFocus: FocusPath) {\n        const keypadElement = this.keypadElement();\n        // By the time this happens, newFocus cannot be a prefix of\n        // prevFocused, since we must have either been called from\n        // an onFocusChange within a renderer, which is only called when\n        // this is not a prefix, or between the question and answer areas,\n        // which can never prefix each other.\n        const prevFocus = this._currentFocus;\n        this._currentFocus = newFocus;\n\n        // Determine whether the newly focused path represents an input.\n        const inputPaths = this.getInputPaths();\n        const didFocusInput =\n            this._currentFocus &&\n            inputPaths.some((inputPath) => {\n                return Util.inputPathsEqual(inputPath, this._currentFocus);\n            });\n\n        if (this.props.apiOptions.onFocusChange != null) {\n            this.props.apiOptions.onFocusChange(\n                this._currentFocus,\n                prevFocus,\n                didFocusInput && keypadElement && keypadElement.getDOMNode(),\n            );\n        }\n\n        if (keypadElement) {\n            if (didFocusInput) {\n                keypadElement.activate();\n            } else {\n                keypadElement.dismiss();\n            }\n        }\n    }\n\n    _onRendererBlur(blurPath: FocusPath) {\n        const blurringFocusPath = this._currentFocus;\n\n        // Failsafe: abort if ID is different, because focus probably happened\n        // before blur.\n        if (!Util.inputPathsEqual(blurPath, blurringFocusPath)) {\n            return;\n        }\n\n        // Wait until after any new focus events fire this tick before\n        // declaring that nothing is focused, since if there were a focus change\n        // across Renderers (e.g., from the HintsRenderer to the\n        // QuestionRenderer), we could receive the blur before the focus.\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API\n        // eslint-disable-next-line no-restricted-syntax\n        setTimeout(() => {\n            if (Util.inputPathsEqual(this._currentFocus, blurringFocusPath)) {\n                this._setCurrentFocus(null);\n            }\n        });\n    }\n\n    /**\n     * Accepts a question area widgetId, or an answer area widgetId of\n     * the form \"answer-input-number 1\", or the string \"answer-area\"\n     * for the whole answer area (if the answer area is a single widget).\n     */\n    _setWidgetProps(widgetId: string, newProps: any, callback: any) {\n        this.questionRenderer._setWidgetProps(widgetId, newProps, callback);\n    }\n\n    /**\n     * Sets the input value into the widget found at `path`. The `focus`\n     * function provided is called when all affected widgets have been\n     * re-rendered with the new value.\n     */\n    setInputValue(path: FocusPath, newValue: string, focus: () => void): void {\n        return this.questionRenderer.setInputValue(path, newValue, focus);\n    }\n\n    focusPath(path: FocusPath): void {\n        return this.questionRenderer.focusPath(path);\n    }\n\n    blurPath(path: FocusPath): void {\n        return this.questionRenderer.blurPath(path);\n    }\n\n    getDOMNodeForPath(path: FocusPath): Element | Text | null | undefined {\n        return this.questionRenderer.getDOMNodeForPath(path);\n    }\n\n    getGrammarTypeForPath(path: FocusPath): string | null | undefined {\n        return this.questionRenderer.getGrammarTypeForPath(path);\n    }\n\n    getInputPaths(): ReadonlyArray<FocusPath> {\n        const questionAreaInputPaths = this.questionRenderer.getInputPaths();\n        return questionAreaInputPaths;\n    }\n\n    // NOTE: this must remain as an arrow function because we pass it Renderer\n    handleInteractWithWidget: (widgetId: string) => void = (\n        widgetId: string,\n    ) => {\n        const withRemoved = _.difference(\n            this.state.questionHighlightedWidgets,\n            [widgetId],\n        );\n        this.setState({\n            questionCompleted: false,\n            questionHighlightedWidgets: withRemoved,\n        });\n\n        if (this.props.apiOptions.interactionCallback) {\n            this.props.apiOptions.interactionCallback();\n        }\n    };\n\n    focus(): boolean | null | undefined {\n        return this.questionRenderer.focus();\n    }\n\n    blur() {\n        if (this._currentFocus) {\n            this.blurPath(this._currentFocus);\n        }\n    }\n\n    showHint() {\n        if (this.state.hintsVisible < this.getNumHints()) {\n            this.setState({\n                hintsVisible: this.state.hintsVisible + 1,\n            });\n        }\n    }\n\n    getNumHints(): number {\n        return this.props.item.hints.length;\n    }\n\n    /**\n     * Grades the item.\n     *\n     * Returns a KE-style score of {\n     *     empty: bool,\n     *     correct: bool,\n     *     message: string|null,\n     *     guess: Array\n     * }\n     */\n    scoreInput(): KEScore {\n        const guessAndScore = this.questionRenderer.guessAndScore();\n        const guess = guessAndScore[0];\n        const score = guessAndScore[1];\n\n        // Continue to include an empty guess for the now defunct answer area.\n        // TODO(alex): Check whether we rely on the format here for\n        //             analyzing ProblemLogs. If not, remove this layer.\n        const maxCompatGuess = [guess, []];\n\n        const keScore = Util.keScoreFromPerseusScore(\n            score,\n            maxCompatGuess,\n            this.questionRenderer.getSerializedState(),\n        );\n\n        const emptyQuestionAreaWidgets = this.questionRenderer.emptyWidgets();\n\n        this.setState({\n            questionCompleted: keScore.correct,\n            questionHighlightedWidgets: emptyQuestionAreaWidgets,\n        });\n\n        return keScore;\n    }\n\n    /**\n     * Returns an array of all widget IDs in the order they occur in\n     * the question content.\n     */\n    getWidgetIds(): ReadonlyArray<string> {\n        return this.questionRenderer.getWidgetIds();\n    }\n\n    /**\n     * Returns an object mapping from widget ID to KE-style score.\n     * The keys of this object are the values of the array returned\n     * from `getWidgetIds`.\n     */\n    scoreWidgets(): {\n        [id: string]: KEScore;\n    } {\n        const qScore = this.questionRenderer.scoreWidgets();\n        const qGuess = this.questionRenderer.getUserInputForWidgets();\n        const state = this.questionRenderer.getSerializedState();\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'Partial<Record<string, KEScore>>' is not assignable to type '{ [id: string]: KEScore; }'. | TS2345 - Argument of type '{ [widgetId: string]: PerseusScore; }' is not assignable to parameter of type 'Partial<Record<string, { type: \"invalid\"; message?: string | null | undefined; suppressAlmostThere?: boolean | null | undefined; }>>'.\n        return mapObject(qScore, (score, id) => {\n            return Util.keScoreFromPerseusScore(score, qGuess[id], state[id]);\n        });\n    }\n\n    /**\n     * Get a representation of the current state of the item.\n     */\n    getSerializedState(): SerializedState {\n        return {\n            question: this.questionRenderer.getSerializedState(),\n            hints: this.hintsRenderer?.getSerializedState(),\n        };\n    }\n\n    // TODO(kevinb): make the type for this state better\n    restoreSerializedState(state: SerializedState, callback?: () => void) {\n        // We need to wait for both the question renderer and the hints\n        // renderer to finish restoring their states.\n        let numCallbacks = 2;\n        const fireCallback = () => {\n            --numCallbacks;\n            if (callback && numCallbacks === 0) {\n                callback();\n            }\n        };\n\n        this.questionRenderer.restoreSerializedState(\n            state.question,\n            fireCallback,\n        );\n        this.hintsRenderer?.restoreSerializedState(state.hints, fireCallback);\n    }\n\n    showRationalesForCurrentlySelectedChoices() {\n        this.questionRenderer.showRationalesForCurrentlySelectedChoices();\n    }\n\n    deselectIncorrectSelectedChoices() {\n        this.questionRenderer.deselectIncorrectSelectedChoices();\n    }\n\n    render(): React.ReactNode {\n        return <div />;\n    }\n}\n\nexport default ItemRenderer;\n","/**\n * A React context for signaling when all of the components in a Perseus\n * renderer is fully rendered.  This means that all images and math have\n * finished loading/rendering.\n *\n * Currently only used by ServerItemRender to indicate when the question\n * renderer is fully rendered.\n */\nimport * as React from \"react\";\n\ntype Context = {\n    onRendered: (isRendered: boolean) => void;\n};\n\nconst defaultContext: Context = {\n    onRendered: (isRendered: boolean) => {},\n};\n\nconst context: React.Context<Context> = React.createContext(defaultContext);\n\nexport default context;\n","import {StyleSheet, css} from \"aphrodite\";\n/**\n * A copy of the ItemRenderer which renders its question renderer and hints\n * renderer normally instead of ReactDOM.render()ing them into elements in the\n * DOM.\n *\n * This allows this component to be used in server-rendering of a perseus\n * exercise.\n */\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport AssetContext from \"./asset-context\";\nimport HintsRenderer from \"./hints-renderer\";\nimport Objective from \"./interactive2/objective_\";\nimport LoadingContext from \"./loading-context\";\nimport {ApiOptions} from \"./perseus-api\";\nimport Renderer from \"./renderer\";\nimport Util from \"./util\";\n\nimport type {KeypadProps} from \"./mixins/provide-keypad\";\nimport type {APIOptions, KEScore, FocusPath, RendererInterface} from \"./types\";\n\nconst {mapObject} = Objective;\n\ntype OwnProps = // These props are used by the ProvideKeypad mixin.\n    KeypadProps & {\n        apiOptions: APIOptions;\n        hintsVisible?: number;\n        item: {\n            hints: ReadonlyArray<any>;\n            question: any;\n        };\n        problemNum?: number;\n        reviewMode?: boolean;\n        // from KeypadContext\n        keypadElement?: any | null | undefined;\n    };\n\ntype HOCProps = {\n    onRendered: (isRendered: boolean) => void;\n};\n\ntype Props = OwnProps & HOCProps;\n\ntype DefaultProps = {\n    apiOptions: Props[\"apiOptions\"];\n    onRendered: Props[\"onRendered\"];\n};\n\ntype State = {\n    questionCompleted: boolean;\n    questionHighlightedWidgets: ReadonlyArray<any>;\n    // Keeps track of whether each asset (SvgImage or TeX) rendered by\n    // the questionRenderer has finished loading or rendering.\n    assetStatuses: {\n        [assetKey: string]: boolean;\n    };\n};\n\ntype SerializedState = {\n    question: any;\n    hints: any;\n};\n\n/* eslint-disable-next-line react/no-unsafe */\nexport class ServerItemRenderer\n    extends React.Component<Props, State>\n    implements RendererInterface\n{\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'questionRenderer' has no initializer and is not definitely assigned in the constructor.\n    questionRenderer: Renderer;\n    hintsRenderer: any;\n    _currentFocus: FocusPath;\n    _fullyRendered: boolean;\n    blurTimeoutID: number | null | undefined;\n\n    static defaultProps: DefaultProps = {\n        apiOptions: {} as any, // a deep default is done in `this.update()`\n        onRendered: (isRendered: boolean) => {},\n    };\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            questionCompleted: false,\n            questionHighlightedWidgets: [],\n            assetStatuses: {},\n        };\n        this._fullyRendered = false;\n    }\n\n    componentDidMount() {\n        this._currentFocus = null;\n        this._fullyRendered = false;\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        this.setState({\n            questionHighlightedWidgets: [],\n        });\n    }\n\n    componentDidUpdate(prevProps: Props, prevState: State) {\n        if (this.props.apiOptions.answerableCallback) {\n            const isAnswerable =\n                this.questionRenderer.emptyWidgets().length === 0;\n            const {answerableCallback} = this.props.apiOptions;\n            if (answerableCallback) {\n                answerableCallback(isAnswerable);\n            }\n        }\n\n        if (!this._fullyRendered) {\n            const assetsLoaded = Object.values(this.state.assetStatuses).every(\n                Boolean,\n            );\n            if (assetsLoaded) {\n                this._fullyRendered = true;\n                this.props.onRendered(true);\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.blurTimeoutID != null) {\n            // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n            // eslint-disable-next-line no-restricted-syntax\n            clearTimeout(this.blurTimeoutID);\n            this.blurTimeoutID = null;\n        }\n    }\n\n    _handleFocusChange: (newFocus: FocusPath, oldFocus: FocusPath) => void = (\n        newFocus: FocusPath,\n        oldFocus: FocusPath,\n    ) => {\n        if (newFocus != null) {\n            this._setCurrentFocus(newFocus);\n        } else {\n            this._onRendererBlur(oldFocus);\n        }\n    };\n\n    // Sets the current focus path and element and\n    // send an onChangeFocus event back to our parent.\n    _setCurrentFocus(newFocus: FocusPath) {\n        const {\n            apiOptions: {isMobile, onFocusChange},\n            keypadElement,\n        } = this.props;\n\n        // By the time this happens, newFocus cannot be a prefix of\n        // prevFocused, since we must have either been called from\n        // an onFocusChange within a renderer, which is only called when\n        // this is not a prefix, or between the question and answer areas,\n        // which can never prefix each other.\n        const prevFocus = this._currentFocus;\n        this._currentFocus = newFocus;\n\n        // Determine whether the newly focused path represents an input.\n        const inputPaths = this.getInputPaths();\n        const didFocusInput =\n            this._currentFocus &&\n            inputPaths.some((inputPath) => {\n                return Util.inputPathsEqual(inputPath, this._currentFocus);\n            });\n\n        if (onFocusChange != null) {\n            onFocusChange(\n                this._currentFocus,\n                prevFocus,\n                didFocusInput && keypadElement && keypadElement.getDOMNode(),\n                // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'false | Element | Text | null | undefined' is not assignable to parameter of type 'HTMLElement | undefined'.\n                didFocusInput &&\n                    this.questionRenderer.getDOMNodeForPath(newFocus),\n            );\n        }\n\n        if (keypadElement && isMobile) {\n            if (didFocusInput) {\n                keypadElement.activate();\n            } else {\n                keypadElement.dismiss();\n            }\n        }\n    }\n\n    _onRendererBlur(blurPath: FocusPath) {\n        const blurringFocusPath = this._currentFocus;\n\n        // Failsafe: abort if ID is different, because focus probably happened\n        // before blur\n        if (!_.isEqual(blurPath, blurringFocusPath)) {\n            return;\n        }\n\n        // Wait until after any new focus events fire this tick before\n        // declaring that nothing is focused.\n        // If a different widget was focused, we'll see an onBlur event\n        // now, but then an onFocus event on a different element before\n        // this callback is executed\n        // TODO(jeff, CP-3128): Use Wonder Blocks Timing API.\n        // eslint-disable-next-line no-restricted-syntax\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'Timeout' is not assignable to type 'number'.\n        this.blurTimeoutID = setTimeout(() => {\n            if (_.isEqual(this._currentFocus, blurringFocusPath)) {\n                this._setCurrentFocus(null);\n            }\n        }, 0);\n    }\n\n    /**\n     * Accepts a question area widgetId, or an answer area widgetId of\n     * the form \"answer-input-number 1\", or the string \"answer-area\"\n     * for the whole answer area (if the answer area is a single widget).\n     */\n    _setWidgetProps(widgetId: string, newProps: Props, callback: any) {\n        this.questionRenderer._setWidgetProps(widgetId, newProps, callback);\n    }\n\n    setInputValue(path: FocusPath, newValue: any, focus: () => void): void {\n        return this.questionRenderer.setInputValue(path, newValue, focus);\n    }\n\n    focusPath(path: FocusPath): void {\n        return this.questionRenderer.focusPath(path);\n    }\n\n    blurPath(path: FocusPath): void {\n        return this.questionRenderer.blurPath(path);\n    }\n\n    getDOMNodeForPath(path: FocusPath): Element | Text | null | undefined {\n        return this.questionRenderer.getDOMNodeForPath(path);\n    }\n\n    getGrammarTypeForPath(path: FocusPath): string | null | undefined {\n        return this.questionRenderer.getGrammarTypeForPath(path);\n    }\n\n    getInputPaths(): ReadonlyArray<FocusPath> {\n        const questionAreaInputPaths = this.questionRenderer.getInputPaths();\n        return questionAreaInputPaths;\n    }\n\n    handleInteractWithWidget: (widgetId: string) => void = (widgetId) => {\n        const withRemoved = _.difference(\n            this.state.questionHighlightedWidgets,\n            [widgetId],\n        );\n        this.setState({\n            questionCompleted: false,\n            questionHighlightedWidgets: withRemoved,\n        });\n\n        if (this.props.apiOptions.interactionCallback) {\n            this.props.apiOptions.interactionCallback();\n        }\n    };\n\n    focus(): boolean | null | undefined {\n        return this.questionRenderer.focus();\n    }\n\n    blur(): void {\n        if (this._currentFocus) {\n            this.blurPath(this._currentFocus);\n        }\n    }\n\n    getNumHints(): number {\n        return this.props.item.hints.length;\n    }\n\n    /**\n     * Grades the item.\n     */\n    scoreInput(): KEScore {\n        const guessAndScore = this.questionRenderer.guessAndScore();\n        const guess = guessAndScore[0];\n        const score = guessAndScore[1];\n\n        // Continue to include an empty guess for the now defunct answer area.\n        // TODO(alex): Check whether we rely on the format here for\n        //             analyzing ProblemLogs. If not, remove this layer.\n        const maxCompatGuess = [guess, []];\n\n        const keScore = Util.keScoreFromPerseusScore(\n            score,\n            maxCompatGuess,\n            this.questionRenderer.getSerializedState(),\n        );\n\n        const emptyQuestionAreaWidgets = this.questionRenderer.emptyWidgets();\n\n        this.setState({\n            questionCompleted: keScore.correct,\n            questionHighlightedWidgets: emptyQuestionAreaWidgets,\n        });\n\n        return keScore;\n    }\n\n    /**\n     * Returns an array of all widget IDs in the order they occur in\n     * the question content.\n     */\n    getWidgetIds(): ReadonlyArray<string> {\n        return this.questionRenderer.getWidgetIds();\n    }\n\n    /**\n     * Returns an object mapping from widget ID to KE-style score.\n     * The keys of this object are the values of the array returned\n     * from `getWidgetIds`.\n     */\n    scoreWidgets(): {\n        [key: string]: KEScore;\n    } {\n        const qScore = this.questionRenderer.scoreWidgets();\n        const qGuess = this.questionRenderer.getUserInputForWidgets();\n        const state = this.questionRenderer.getSerializedState();\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'Partial<Record<string, KEScore>>' is not assignable to type '{ [key: string]: KEScore; }'. | TS2345 - Argument of type '{ [widgetId: string]: PerseusScore; }' is not assignable to parameter of type 'Partial<Record<string, { type: \"invalid\"; message?: string | null | undefined; suppressAlmostThere?: boolean | null | undefined; }>>'.\n        return mapObject(qScore, (score, id) => {\n            return Util.keScoreFromPerseusScore(score, qGuess[id], state);\n        });\n    }\n\n    /**\n     * Get a representation of the current state of the item.\n     */\n    getSerializedState(): SerializedState {\n        return {\n            question: this.questionRenderer.getSerializedState(),\n            hints: this.hintsRenderer.getSerializedState(),\n        };\n    }\n\n    restoreSerializedState(state: SerializedState, callback?: () => void) {\n        // We need to wait for both the question renderer and the hints\n        // renderer to finish restoring their states.\n        let numCallbacks = 2;\n        const fireCallback = () => {\n            --numCallbacks;\n            if (callback && numCallbacks === 0) {\n                callback();\n            }\n        };\n\n        this.questionRenderer.restoreSerializedState(\n            state.question,\n            fireCallback,\n        );\n        this.hintsRenderer.restoreSerializedState(state.hints, fireCallback);\n    }\n\n    showRationalesForCurrentlySelectedChoices() {\n        this.questionRenderer.showRationalesForCurrentlySelectedChoices();\n    }\n\n    deselectIncorrectSelectedChoices() {\n        this.questionRenderer.deselectIncorrectSelectedChoices();\n    }\n\n    // This must be pre-bound otherwise SvgImage's shouldComponentUpdate\n    // won't behave correctly and we'll get an infinite loop.\n    setAssetStatus: (assetKey: string, status: boolean) => void = (\n        assetKey,\n        status,\n    ) => {\n        // setState doesn't properly merge objects so we have to do it ourselves\n        const assetStatuses = {\n            ...this.state.assetStatuses,\n            [assetKey]: status,\n        } as const;\n        this.setState({assetStatuses});\n    };\n\n    render(): React.ReactNode {\n        const apiOptions = {\n            ...ApiOptions.defaults,\n            ...this.props.apiOptions,\n            onFocusChange: this._handleFocusChange,\n        } as const;\n\n        const contextValue = {\n            assetStatuses: this.state.assetStatuses,\n            setAssetStatus: this.setAssetStatus,\n        } as const;\n\n        const questionRenderer = (\n            <AssetContext.Provider value={contextValue}>\n                <Renderer\n                    keypadElement={this.props.keypadElement}\n                    problemNum={this.props.problemNum}\n                    onInteractWithWidget={this.handleInteractWithWidget}\n                    highlightedWidgets={this.state.questionHighlightedWidgets}\n                    apiOptions={apiOptions}\n                    questionCompleted={this.state.questionCompleted}\n                    reviewMode={this.props.reviewMode}\n                    ref={(elem) => {\n                        if (elem != null) {\n                            this.questionRenderer = elem;\n                        }\n                    }}\n                    content={this.props.item.question.content}\n                    widgets={this.props.item.question.widgets}\n                    images={this.props.item.question.images}\n                />\n            </AssetContext.Provider>\n        );\n\n        const hintsRenderer = (\n            <HintsRenderer\n                hints={this.props.item.hints}\n                hintsVisible={this.props.hintsVisible}\n                // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                apiOptions={apiOptions}\n                ref={(elem) => (this.hintsRenderer = elem)}\n            />\n        );\n\n        return (\n            <div>\n                <div>{questionRenderer}</div>\n                <div\n                    className={\n                        // Avoid adding any horizontal padding when applying the\n                        // mobile hint styles, which are flush to the left.\n                        // NOTE(charlie): We may still want to apply this\n                        // padding for desktop exercises.\n                        apiOptions.isMobile\n                            ? undefined\n                            : css(styles.hintsContainer)\n                    }\n                >\n                    {hintsRenderer}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    hintsContainer: {\n        marginLeft: 50,\n    },\n});\n\nconst ref = React.forwardRef<\n    ServerItemRenderer,\n    Omit<React.ComponentProps<typeof ServerItemRenderer>, \"onRendered\">\n>((props, ref) => (\n    <LoadingContext.Consumer>\n        {({onRendered}) => (\n            <ServerItemRenderer {...props} onRendered={onRendered} ref={ref} />\n        )}\n    </LoadingContext.Consumer>\n));\nexport default ref;\n","import * as React from \"react\";\n\nimport ButtonGroup from \"../../components/button-group\";\n\nimport type {ChangeableProps} from \"../../mixins/changeable\";\n\ntype Props = {\n    value?: string;\n} & ChangeableProps;\n\nclass ArrowPicker extends React.Component<Props> {\n    static defaultProps: {\n        value: string;\n    } = {\n        value: \"\",\n    };\n\n    render(): React.ReactNode {\n        return (\n            <ButtonGroup\n                value={this.props.value}\n                allowEmpty={false}\n                buttons={[\n                    {value: \"\", content: <span>&mdash;</span>},\n                    {value: \"->\", content: <span>&#x2192;</span>},\n                    /*\n                TODO(eater): fix khan-exercises so these are supported\n                {value: \"<-\", content: <span>&#x2190;</span>},\n                {value: \"<->\", content: <span>&#x2194;</span>}\n                */\n                ]}\n                onChange={this.props.onChange}\n            />\n        );\n    }\n}\n\nexport default ArrowPicker;\n","import * as React from \"react\";\nimport _ from \"underscore\";\n\nimport ButtonGroup from \"../../components/button-group\";\nimport KhanColors from \"../../util/colors\";\n\nimport type {ChangeableProps} from \"../../mixins/changeable\";\n\nconst COLORS = [\n    KhanColors.BLACK,\n    KhanColors.BLUE,\n    KhanColors.GREEN,\n    KhanColors.PINK,\n    KhanColors.PURPLE,\n    KhanColors.RED,\n    KhanColors.GRAY,\n];\n\nconst LIGHT_COLORS = [\n    KhanColors.LIGHT_BLUE,\n    KhanColors.LIGHT_ORANGE,\n    KhanColors.LIGHT_PINK,\n    KhanColors.LIGHT_GREEN,\n    KhanColors.LIGHT_PURPLE,\n    KhanColors.LIGHT_RED,\n    \"#fff\",\n];\n\ntype Props = {\n    lightColors?: boolean;\n    value?: string;\n} & ChangeableProps;\n\nclass ColorPicker extends React.Component<Props> {\n    static defaultProps: {\n        lightColors: boolean;\n        value: any;\n    } = {\n        value: KhanColors.BLACK,\n        lightColors: false,\n    };\n\n    render(): React.ReactNode {\n        const colors = this.props.lightColors ? LIGHT_COLORS : COLORS;\n        return (\n            <ButtonGroup\n                value={this.props.value}\n                allowEmpty={false}\n                buttons={_.map(colors, (color) => {\n                    return {\n                        value: color,\n                        content: (\n                            <span>\n                                <span\n                                    className=\"colorpicker-circle\"\n                                    style={{background: color}}\n                                />\n                                &nbsp;\n                            </span>\n                        ),\n                    };\n                })}\n                onChange={this.props.onChange}\n            />\n        );\n    }\n}\n\nexport default ColorPicker;\n","import * as React from \"react\";\n\nimport ButtonGroup from \"../../components/button-group\";\n\nimport type {ChangeableProps} from \"../../mixins/changeable\";\n\ntype Props = {\n    value?: string;\n} & ChangeableProps;\n\nclass DashPicker extends React.Component<Props> {\n    static defaultProps: {\n        value: string;\n    } = {\n        value: \"\",\n    };\n\n    render(): React.ReactNode {\n        return (\n            <ButtonGroup\n                value={this.props.value}\n                allowEmpty={false}\n                buttons={[\n                    {value: \"\", content: <span>&mdash;</span>},\n                    {value: \"-\", content: <span>&ndash;&ndash;&ndash;</span>},\n                    {\n                        value: \"- \",\n                        content: <span>&ndash;&nbsp;&nbsp;&ndash;</span>,\n                    },\n                    {\n                        value: \".\",\n                        content: <span>&middot;&middot;&middot;&middot;</span>,\n                    },\n                    {\n                        value: \". \",\n                        content: <span>&middot; &middot; &middot;</span>,\n                    },\n                ]}\n                onChange={this.props.onChange}\n            />\n        );\n    }\n}\n\nexport default DashPicker;\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport * as React from \"react\";\n\nimport InlineIcon from \"../../components/inline-icon\";\nimport {\n    iconChevronDown,\n    iconChevronRight,\n    iconCircleArrowDown,\n    iconCircleArrowUp,\n    iconTrash,\n} from \"../../icon-paths\";\n\ntype Props = {\n    children: React.ReactElement<any> | ReadonlyArray<React.ReactElement<any>>;\n    initiallyVisible: boolean;\n    onDelete?: () => void | null | undefined;\n    onDown?: () => void | null | undefined;\n    onUp?: () => void | null | undefined;\n    title: string | React.ReactElement<any>;\n};\n\ntype State = {\n    show: boolean;\n};\n\nclass ElementContainer extends React.Component<Props, State> {\n    static defaultProps: {\n        initiallyVisible: boolean;\n        title: string;\n    } = {\n        initiallyVisible: false,\n        title: \"More\",\n    };\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            show: props.initiallyVisible,\n        };\n    }\n\n    toggle: (e: React.SyntheticEvent) => void = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n        this.setState({show: !this.state.show});\n    };\n\n    render(): React.ReactNode {\n        return (\n            <div className=\"perseus-interaction-element\">\n                <a\n                    href=\"#\"\n                    className={\n                        \"perseus-interaction-element-title \" +\n                        (this.state.show ? \"open\" : \"closed\")\n                    }\n                    onClick={this.toggle}\n                >\n                    {this.state.show ? (\n                        <InlineIcon {...iconChevronDown} />\n                    ) : (\n                        <InlineIcon {...iconChevronRight} />\n                    )}\n                    {this.props.title}\n                </a>\n                <div\n                    className={\n                        \"perseus-interaction-element-content \" +\n                        (this.state.show ? \"enter\" : \"leave\")\n                    }\n                >\n                    {this.props.children}\n                    {(this.props.onUp != null ||\n                        this.props.onDown != null ||\n                        this.props.onDelete != null) && (\n                        <div className=\"edit-controls\">\n                            {this.props.onUp != null && (\n                                <button onClick={this.props.onUp}>\n                                    <InlineIcon {...iconCircleArrowUp} />\n                                </button>\n                            )}\n                            {this.props.onDown != null && (\n                                <button onClick={this.props.onDown}>\n                                    <InlineIcon {...iconCircleArrowDown} />\n                                </button>\n                            )}\n                            {this.props.onDelete != null && (\n                                <button onClick={this.props.onDelete}>\n                                    <InlineIcon {...iconTrash} />\n                                </button>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ElementContainer;\n","import {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport * as constants from \"../styles/constants\";\n\n// Displays a stylized open eye: lint warnings are visible\nconst VisibleIcon = () => (\n    <svg\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n        className={css(styles.icon)}\n    >\n        <defs>\n            <path\n                id=\"a\"\n                d={\n                    \"M7.401 10.035c-1.424.748-2.599 1.905-3.544 \" +\n                    \"3.48a1 1 0 0 1-1.714-1.03C4.325 8.849 7.652 7 \" +\n                    \"12 7c4.348 0 7.675 1.848 9.857 5.486a1 1 0 0 \" +\n                    \"1-1.714 1.028c-.945-1.574-2.12-2.73-3.544-\" +\n                    \"3.48a5 5 0 1 1-9.198 0zM12 15a3 3 0 1 0 0-6 3 3 \" +\n                    \"0 0 0 0 6z\"\n                }\n            />\n        </defs>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n            <mask id=\"b\" fill=\"#fff\">\n                <use href=\"#a\" />\n            </mask>\n            <use fill=\"#fff\" fillRule=\"nonzero\" href=\"#a\" />\n            <g fill=\"#fff\" mask=\"url(#b)\">\n                <path d=\"M0 0h24v24H0z\" />\n            </g>\n        </g>\n    </svg>\n);\n\n// Displays a stylized eye with a line through it: I don't want to see lint\nconst HiddenIcon = () => (\n    <svg\n        width=\"24\"\n        height=\"24\"\n        viewBox=\"0 0 24 24\"\n        className={css(styles.icon)}\n    >\n        <defs>\n            <path\n                id=\"a\"\n                d={\n                    \"M8.794 7.38C9.791 7.127 10.86 7 12 7c4.348 0 \" +\n                    \"7.675 1.848 9.857 5.486a1 1 0 0 1-1.714 \" +\n                    \"1.028c-.945-1.574-2.12-2.73-3.544-3.48.258.\" +\n                    \"604.401 1.268.401 1.966 0 1.02-.305 \" +\n                    \"1.967-.828 2.757l2.535 2.536a1 1 0 0 \" +\n                    \"1-1.414 1.414l-12-12a1 1 0 0 1 \" +\n                    \"1.414-1.414L8.794 7.38zm5.914 5.913a3 3 0 0 \" +\n                    \"0-4.001-4.001l4 4.001zM6.072 8.486l2.976 \" +\n                    \"2.976a3 3 0 0 0 3.49 3.49l1.579 1.58A5 5 0 \" +\n                    \"0 1 7.4 10.035c-1.424.747-2.599 1.904-3.544 \" +\n                    \"3.478a1 1 0 0 1-1.714-1.028c1.049-1.75 \" +\n                    \"2.363-3.085 3.929-4z\"\n                }\n            />\n        </defs>\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n            <mask id=\"b\" fill=\"#fff\">\n                <use href=\"#a\" />\n            </mask>\n            <use fill=\"#fff\" fillRule=\"nonzero\" href=\"#a\" />\n            <g fill=\"#fff\" mask=\"url(#b)\">\n                <path d=\"M0 0h24v24H0z\" />\n            </g>\n        </g>\n    </svg>\n);\n\ntype Props = {\n    message: string;\n    enabled: boolean;\n    onClick: () => void;\n    fixedPosition?: boolean;\n};\n\nconst HUD = ({message, enabled, onClick, fixedPosition = true}: Props) => {\n    let state;\n    let icon;\n    if (enabled) {\n        state = styles.enabled;\n        icon = <VisibleIcon />;\n    } else {\n        state = styles.disabled;\n        icon = <HiddenIcon />;\n    }\n\n    return (\n        <button\n            className={css(\n                styles.hud,\n                fixedPosition && styles.hudFixedPosition,\n                state,\n            )}\n            onClick={(e) => {\n                onClick();\n            }}\n        >\n            {icon}\n            {message}\n        </button>\n    );\n};\n\nconst styles = StyleSheet.create({\n    hud: {\n        boxSizing: \"border-box\",\n        height: 36,\n        padding: \"9px 16px\",\n        borderRadius: 18,\n        fontFamily: constants.boldFontFamily,\n        fontSize: \"15px\",\n        lineHeight: \"18px\",\n        color: constants.white,\n        userSelect: \"none\",\n        borderWidth: 0, // <button> gives us a border by default\n    },\n\n    // We want to render the element in-place in our fixtures, so allow us to\n    // render in the bottom corner in production and in-place in testing.\n    hudFixedPosition: {\n        bottom: 20,\n        position: \"fixed\",\n        right: 20,\n        zIndex: 1,\n    },\n\n    icon: {\n        width: 24,\n        height: 24,\n        marginRight: 8,\n        marginTop: -3,\n        verticalAlign: \"middle\",\n    },\n\n    enabled: {\n        backgroundColor: constants.warningColor,\n        \":hover\": {\n            backgroundColor: constants.warningColorHover,\n        },\n        \":active\": {\n            backgroundColor: constants.warningColorActive,\n        },\n    },\n\n    disabled: {\n        backgroundColor: constants.gray76,\n        \":hover\": {\n            backgroundColor: \"#a1a5a9\", // in between those two grays\n        },\n        \":active\": {\n            backgroundColor: constants.gray68,\n        },\n    },\n});\n\nexport default HUD;\n","import {css, StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\ntype Props = {\n    // the initial values of the buttons selected, defaults to null (no\n    // selection).\n    values: ReadonlyArray<any> | null | undefined;\n    buttons: ReadonlyArray<{\n        // the value returned when the button is selected\n        value: any;\n        // the content shown within the button, typically a string that gets\n        // rendered as the button's display text\n        content: React.ReactNode;\n        // the title-text shown on hover\n        title?: string;\n    }>;\n    // a function that is provided with the updated set of selected value\n    // (which it then is responsible for updating)\n    onChange: (values?: any) => unknown;\n    // if false, at least one button must be selected at all times.\n    // defaults to true\n    allowEmpty?: boolean;\n};\n\ntype DefaultProps = {\n    allowEmpty: Props[\"allowEmpty\"];\n    values: Props[\"values\"];\n};\n\n/**\n * MultiButtonGroup is an aesthetically pleasing group of buttons,\n * which allows multiple buttons to be selected at the same time.\n *\n * NOTE: This component is almost identical to ./button-group.jsx except that\n * this component allows multiple selection!\n */\nclass MultiButtonGroup extends React.Component<Props> {\n    static defaultProps: DefaultProps = {\n        values: [],\n        allowEmpty: true,\n    };\n\n    focus(): boolean {\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'focus' does not exist on type 'Element | Text'.\n        ReactDOM.findDOMNode(this)?.focus();\n        return true;\n    }\n\n    toggleSelect: (arg1?: any) => void = (newValue: any) => {\n        const values = (this.props.values || []).slice(0);\n        const allowEmpty = this.props.allowEmpty;\n\n        if (\n            values.indexOf(newValue) >= 0 &&\n            (values.length > 1 || allowEmpty)\n        ) {\n            // If the value is already selected, unselect it\n            values.splice(values.indexOf(newValue), 1);\n        } else {\n            // Otherwise merge with other values and return\n            if (values.indexOf(newValue) < 0) {\n                values.push(newValue);\n            }\n        }\n\n        this.props.onChange(values);\n    };\n\n    render(): React.ReactNode {\n        const values = this.props.values || [];\n        const buttons = this.props.buttons.map((button, i) => {\n            const selected = values.indexOf(button.value) >= 0;\n            return (\n                <button\n                    title={button.title}\n                    type=\"button\"\n                    id={\"\" + i}\n                    key={\"\" + i}\n                    ref={\"button\" + i}\n                    className={css(\n                        styles.buttonStyle,\n                        selected && styles.selectedStyle,\n                    )}\n                    onClick={() => this.toggleSelect(button.value)}\n                >\n                    {button.content || \"\" + button.value}\n                </button>\n            );\n        });\n\n        const outerStyle = {\n            display: \"inline-block\",\n        } as const;\n        return <div style={outerStyle}>{buttons}</div>;\n    }\n}\n\nconst styles = StyleSheet.create({\n    buttonStyle: {\n        backgroundColor: \"white\",\n        border: \"1px solid #ccc\",\n        borderLeft: \"0\",\n        cursor: \"pointer\",\n        margin: \"0\",\n        padding: \"5px 10px\",\n        position: \"relative\", // for hover\n\n        \":first-child\": {\n            borderLeft: \"1px solid #ccc\",\n            borderTopLeftRadius: \"3px\",\n            borderBottomLeftRadius: \"3px\",\n        },\n\n        \":last-child\": {\n            borderRight: \"1px solid #ccc\",\n            borderTopRightRadius: \"3px\",\n            borderBottomRightRadius: \"3px\",\n        },\n\n        \":hover\": {\n            backgroundColor: \"#ccc\",\n        },\n\n        \":focus\": {\n            zIndex: 2,\n        },\n    },\n\n    selectedStyle: {\n        backgroundColor: \"#ddd\",\n    },\n});\n\nexport default MultiButtonGroup;\n","/* eslint-disable react/prop-types */\n/* eslint-disable @babel/no-invalid-this */\n/* eslint-disable react/sort-comp */\nimport createReactClass from \"create-react-class\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport _ from \"underscore\";\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\n/* A checkbox that syncs its value to props using the\n * renderer's onChange method, and gets the prop name\n * dynamically from its props list\n */\nconst PropCheckBox: any = createReactClass({\n    displayName: \"PropCheckBox\",\n\n    propTypes: {\n        labelAlignment: PropTypes.oneOf([\"left\", \"right\"]),\n    },\n\n    DEFAULT_PROPS: {\n        label: null,\n        onChange: null,\n        labelAlignment: \"left\",\n    },\n\n    getDefaultProps: function () {\n        return this.DEFAULT_PROPS;\n    },\n\n    propName: function () {\n        const propName = _.find(\n            _.keys(this.props),\n            function (localPropName) {\n                // @ts-expect-error [FEI-5003] - TS2683 - 'this' implicitly has type 'any' because it does not have a type annotation.\n                return !_.has(this.DEFAULT_PROPS, localPropName);\n            },\n            this,\n        );\n\n        if (!propName) {\n            throw new PerseusError(\n                \"Attempted to create a PropCheckBox with no prop!\",\n                Errors.InvalidInput,\n            );\n        }\n\n        return propName;\n    },\n\n    _labelAlignLeft: function () {\n        return this.props.labelAlignment === \"left\";\n    },\n\n    render: function () {\n        const propName = this.propName();\n        return (\n            <label>\n                {this._labelAlignLeft() && this.props.label}\n                <input\n                    type=\"checkbox\"\n                    checked={this.props[propName]}\n                    onChange={this.toggle}\n                />\n                {!this._labelAlignLeft() && this.props.label}\n            </label>\n        );\n    },\n\n    toggle: function () {\n        const propName = this.propName();\n        const changes: Record<string, any> = {};\n        changes[propName] = !this.props[propName];\n        this.props.onChange(changes);\n    },\n});\n\nexport default PropCheckBox;\n","/* eslint-disable react/forbid-prop-types, react/sort-comp */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nimport NumberInput from \"./number-input\";\n\nconst truth = () => true;\n\n/* A minor abstraction on top of NumberInput for ranges\n *\n */\nclass RangeInput extends React.Component<any> {\n    static propTypes = {\n        value: PropTypes.array.isRequired,\n        onChange: PropTypes.func.isRequired,\n        placeholder: PropTypes.array,\n        checkValidity: PropTypes.func,\n    };\n\n    static defaultProps: any = {\n        placeholder: [null, null],\n    };\n\n    render(): React.ReactNode {\n        const value = this.props.value;\n        const checkValidity = this.props.checkValidity || truth;\n\n        return (\n            <div className=\"range-input\">\n                <NumberInput\n                    {...this.props}\n                    value={value[0]}\n                    checkValidity={(val) => checkValidity([val, value[1]])}\n                    // eslint-disable-next-line react/jsx-no-bind\n                    onChange={this.onChange.bind(this, 0)}\n                    placeholder={this.props.placeholder[0]}\n                />\n                <NumberInput\n                    {...this.props}\n                    value={value[1]}\n                    checkValidity={(val) => checkValidity([value[0], val])}\n                    // eslint-disable-next-line react/jsx-no-bind\n                    onChange={this.onChange.bind(this, 1)}\n                    placeholder={this.props.placeholder[1]}\n                />\n            </div>\n        );\n    }\n\n    onChange: (arg1: number, arg2: string) => void = (i, newVal) => {\n        const value = this.props.value;\n        if (i === 0) {\n            this.props.onChange([newVal, value[1]]);\n        } else {\n            this.props.onChange([value[0], newVal]);\n        }\n    };\n}\n\nexport default RangeInput;\n","export const devices = {\n    PHONE: \"phone\" as const,\n    TABLET: \"tablet\" as const,\n    DESKTOP: \"desktop\" as const,\n} as const;\n\n// How many pixels do we reserve on the right-hand side of a preview\n// for displaying lint indicators? This space needs to be reserved\n// in DeviceFramer, but it is actually allocated in PerseusFrame\nexport const lintGutterWidth = 36;\n\n// How wide a border does PerseusFrame draw? We need to allocate enough\n// space for it in DeviceFramer.\nexport const perseusFrameBorderWidth = 1;\n","/**\n * KeypadContext provides a way to the Keypad and (Server)ItemRenderer to\n * communicate.\n *\n * The KeypadContext.Provider wraps the ExerciseFooter while KeypadContext.Consumer\n * wraps each (Server)ItemRenderer render site and the Keypad rendered in the\n * ExerciseFooter.\n */\nimport * as React from \"react\";\n\nimport type {RendererInterface} from \"./types\";\n\ntype KeypadContext = {\n    setKeypadElement: (keypadElement?: HTMLElement | null | undefined) => void;\n    keypadElement: HTMLElement | null | undefined;\n    setRenderer: (renderer?: RendererInterface | null | undefined) => void;\n    renderer: RendererInterface | null | undefined;\n    setScrollableElement: (\n        scrollableElement?: HTMLElement | null | undefined,\n    ) => void;\n    scrollableElement: HTMLElement | null | undefined;\n};\n\n// @ts-expect-error [FEI-5003] - TS2322 - Type 'Context<{ setKeypadElement: (keypadElement: HTMLElement | null | undefined) => void; keypadElement: null; setRenderer: (renderer: RendererInterface | null | undefined) => void; renderer: null; setScrollableElement: (scrollableElement: HTMLElement | ... 1 more ... | undefined) => void; scrollableElement: null; }>' is not assignable to type 'Context<KeypadContext>'.\nconst context: React.Context<KeypadContext> = React.createContext({\n    setKeypadElement: (keypadElement) => {},\n    keypadElement: null,\n    setRenderer: (renderer) => {},\n    renderer: null,\n    setScrollableElement: (scrollableElement) => {},\n    scrollableElement: null,\n});\n\nexport default context;\n","/**\n * Traverses a {content, widgets, images} renderer props object,\n * such as `itemData.question`\n *\n * This traversal is deep and handles some widget prop upgrades\n * (TODO(aria): Handle minor prop upgrades :) )\n *\n * This is the right way to traverse itemData.\n *\n * NOTE: We should not expose this on the perseus API yet. Instead,\n * build the traversal method you want inside perseus, and use this\n * from that. We might eventually expose this, but I'd like to be\n * more confident in the interface provided first.\n */\n\nimport _ from \"underscore\";\n\n// TODO(aria): Pull this out of interactive2 / replace with new _.mapObject\nimport objective_ from \"./interactive2/objective_\";\nimport * as Widgets from \"./widgets\";\n\nconst noop = function () {};\n\nconst deepCallbackFor = function (\n    contentCallback: (arg1: any) => void,\n    widgetCallback: (widgetInfo: any, widgetId: string) => any,\n    optionsCallback: (arg1: any) => void,\n) {\n    const deepCallback = function (widgetInfo: any, widgetId: string) {\n        // This doesn't modify the widget info if the widget info\n        // is at a later version than is supported, which is important\n        // for our latestVersion test below.\n        const upgradedWidgetInfo =\n            Widgets.upgradeWidgetInfoToLatestVersion(widgetInfo);\n        const latestVersion = Widgets.getVersion(upgradedWidgetInfo.type);\n\n        // Only traverse our children if we can understand this version\n        // of the widget props.\n        // TODO(aria): This will break if the traversal code assumes that\n        // any props that usually get defaulted in are present. That is,\n        // it can fail on minor version upgrades.\n        // For this reason, and because the upgrade code doesn't handle\n        // minor versions correctly (it doesn't report anything useful\n        // about what minor version a widget is actually at, since it\n        // doesn't have meaning in the context of upgrades), we\n        // just check the major version here.\n        // TODO(aria): This is seriously quirky and would be unpleasant\n        // to think about while writing traverseChildWidgets code. Please\n        // make all of this a little tighter.\n        // I think once we use react class defaultProps instead of relying\n        // on getDefaultProps, this will become easier.\n        let newWidgetInfo;\n        if (\n            latestVersion &&\n            upgradedWidgetInfo.version?.major === latestVersion.major\n        ) {\n            newWidgetInfo = Widgets.traverseChildWidgets(\n                upgradedWidgetInfo,\n                (rendererOptions) => {\n                    return traverseRenderer(\n                        rendererOptions,\n                        contentCallback,\n                        // so that we traverse grandchildren, too:\n                        deepCallback,\n                        optionsCallback,\n                    );\n                },\n            );\n        } else {\n            newWidgetInfo = upgradedWidgetInfo;\n        }\n\n        const userWidgetInfo = widgetCallback(newWidgetInfo, widgetId);\n        if (userWidgetInfo !== undefined) {\n            return userWidgetInfo;\n        }\n        return newWidgetInfo;\n    };\n    return deepCallback;\n};\n\nconst traverseRenderer = function (\n    rendererOptions,\n    contentCallback: (arg1: any) => void,\n    deepWidgetCallback: (widgetInfo: any, widgetId: string) => any,\n    optionsCallback: (arg1: any) => void,\n) {\n    let newContent = rendererOptions.content;\n    if (rendererOptions.content != null) {\n        const modifiedContent = contentCallback(rendererOptions.content);\n        if (modifiedContent !== undefined) {\n            newContent = modifiedContent;\n        }\n    }\n\n    const newWidgets = objective_.mapObject(\n        rendererOptions.widgets || {},\n        function (widgetInfo, widgetId) {\n            // Widgets without info or a type are empty widgets, and\n            // should always be renderable. It's also annoying to write\n            // checks for this everywhere, so we just filter them out once and\n            // for all!\n            // @ts-expect-error [FEI-5003] - TS2571 - Object is of type 'unknown'.\n            if (widgetInfo == null || widgetInfo.type == null) {\n                return widgetInfo;\n            }\n            return deepWidgetCallback(widgetInfo, widgetId);\n        },\n    );\n\n    const newOptions = _.extend({}, rendererOptions, {\n        content: newContent,\n        widgets: newWidgets,\n    });\n    const userOptions = optionsCallback(newOptions);\n    if (userOptions !== undefined) {\n        return userOptions;\n    }\n    return newOptions;\n};\n\nexport const traverse = function (\n    rendererOptions: any,\n    contentCallback?: ((arg1: any) => any) | null,\n    widgetCallback?: ((widgetInfo: any, widgetId: string) => any) | null,\n    optionsCallback?: (arg1: any) => void,\n): any {\n    contentCallback = contentCallback || noop;\n    widgetCallback = widgetCallback || noop;\n    optionsCallback = optionsCallback || noop;\n\n    return traverseRenderer(\n        rendererOptions,\n        contentCallback,\n        deepCallbackFor(contentCallback, widgetCallback, optionsCallback),\n        optionsCallback,\n    );\n};\n","/**\n * Utility functions for constructing and inferring multi-item shapes.\n *\n * A shape is an object that serves as a runtime type declaration: it specifies\n * a tree structure for a particular class of multi-item. See shape-types.js\n * for further discussion.\n *\n * This module allows you to construct arbitrary Shape trees, by combining\n * leaf node shapes like `content` and `hint` into composite shapes like\n * `arrayOf(shape({foo: content, bar: hint}))`.\n */\nimport type {\n    Shape,\n    ContentShape,\n    HintShape,\n    TagsShape,\n    ArrayShape,\n    ObjectShape,\n} from \"./shape-types\";\n\n/**\n * These tools allow you to construct arbirtary shapes, by combining simple\n * leaf shapes like `content` and `hint` into composite shapes like\n * `arrayOf(shape({question: content, hints: arrayOf(hint)}))`.\n */\nconst contentShape: ContentShape = {\n    type: \"content\",\n};\nconst hintShape: HintShape = {\n    type: \"hint\",\n};\nconst tagsShape: TagsShape = {\n    type: \"tags\",\n};\nconst buildArrayShape = (elementShape: Shape): ArrayShape => ({\n    type: \"array\",\n    elementShape,\n});\nconst buildObjectShape = (shape: {[k: string]: Shape}): ObjectShape => ({\n    type: \"object\",\n    shape,\n});\nconst hintsShape: ArrayShape = buildArrayShape(hintShape);\n\nexport default {\n    content: contentShape,\n    hint: hintShape,\n    hints: hintsShape,\n    tags: tagsShape,\n    arrayOf: buildArrayShape,\n    shape: buildObjectShape,\n};\n","/**\n * Utility functions for manipulating multi-item-shaped trees.\n *\n * Multi-items are trees! But we also often have other trees that are shaped\n * like multi-items - for example, if we map a multi-item tree into a tree of\n * renderer info and state, and then map that again into a tree of just the\n * renderer nodes, like we do in MultiRenderer. See tree-types.js for further\n * discussion.\n *\n * These functions enable us to manipulate generic multi-item-shaped trees,\n * regardless of what type of data they contain at their leaves. You can use\n * the mapper functions to transform a tree into another tree of the same\n * shape, or to discover all the nodes of a particular type.\n *\n * We expose two simple mapper functions (mapContentNodes and mapHintNodes),\n * and also a more complex interface for creating a mapping over all of a\n * tree's node types simultaneously:\n *\n * `buildMapper()` returns a TreeMapper object that allows you to build your\n * mapper object one node type at a time. Then, you can execute your mapping by\n * calling the `mapTree` method.\n *\n * For example:\n *     const renderers = buildMapper()\n *         .setContentMapper(this.renderContentNode)\n *         .setHintMapper(this.renderHintNode)\n *         .setTagsMapper(this.renderTagsNode)\n *         .setArrayMapper(this.hideSkippedQuestions)\n *         .mapTree(tree, shape);\n *\n * This will copy the given tree, apply the given transformations to the\n * content, hint, and array nodes respectively, and return the resulting tree.\n *\n * For node types whose mappers aren't specified, we default to the identity\n * function. (This builder interface enables us to implement that default\n * behavior in a provably type-safe way, while not requiring the call site to\n * be aware of all the node types. Hooray!)\n *\n * The call to `setArrayMapper` must come last, because the array mapper's\n * argument types depend on the other mappers' types. See ArrayMapper for more\n * details.\n *\n * WARNING: These functions trust that the provided tree conforms to the\n * provided shape. If not, behavior is undefined and may not respect the type\n * signatures specified here.\n */\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport type {\n    Shape,\n    ContentShape,\n    HintShape,\n    TagsShape,\n    ArrayShape,\n} from \"./shape-types\";\nimport type {Tree, ArrayNode, ObjectNode} from \"./tree-types\";\n\n/**\n * The sequence of edges that lead to a particular node in a Tree.\n * Elements can be `string` to correspond to an ObjectNode key, or `number` to\n * correspond to an ArrayNode index.\n */\nexport type Path = ReadonlyArray<string | number>;\n\n/**\n * These are function interfaces for mapping over various types of tree nodes.\n *\n * ArrayMapper is a bit more complicated than the leaf node mappers. It's\n * executed in the context of a `mapTree` call, after we've finished mapping\n * its child nodes, so the function has access to both the resulting array\n * (with mapped elements) and the original array (with the original untouched\n * elements).\n *\n * The ArrayMapper then has the opportunity to apply a final transformation to\n * the resulting array, like filtering certain elements or (in the hacky\n * MultiRenderer case) attaching a `renderHints` method to arrays of hint\n * renderers :)\n *\n * This is why `TreeMapper#setArrayMapper` must be called last: ArrayMapper's\n * types depend on the ContentMapper and HintMapper's types. And, since you can\n * only specify one mapper at a time in this builder interface (which is\n * necessary to provide default mappers in a type-safe way), you need your\n * dependencies to already be in place by the time you call `setArrayMapper`.\n * Otherwise, we'd have to set the ArrayMapper and *hope* that you *eventually*\n * provide a compatible ContentMapper and HintMapper, which is difficult to\n * prove at compile time.\n *\n * There's no ObjectMapper here, but not for any particular reason. We just\n * don't have a use case for it yet, so we haven't built it yet.\n */\nexport type ContentMapper<CI, CO> = (\n    content: CI,\n    shape: ContentShape,\n    path: Path,\n) => CO;\nexport type HintMapper<HI, HO> = (hint: HI, shape: HintShape, path: Path) => HO;\nexport type TagsMapper<TI, TO> = (tag: TI, shape: TagsShape, path: Path) => TO;\nexport type ArrayMapper<CI, CO, HI, HO, TI, TO> = (\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'ArrayNode' is not generic.\n    mappedArray: ArrayNode<CO, HO, TO>,\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'ArrayNode' is not generic.\n    originalArray: ArrayNode<CI, HI, TI>,\n    shape: ArrayShape,\n    path: Path,\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'ArrayNode' is not generic.\n) => ArrayNode<CO, HO, TO>;\n\n/**\n * A TreeMapper is a collection of node mappers, which, together, compose the\n * behavior for mapping over an entire tree.\n *\n * This serves as the interface for the two TreeMapper classes, including both\n * the internal mapper properties that we care about, and the `mapTree`\n * function that the call site will use.\n */\nexport interface TreeMapper<CI, CO, HI, HO, TI, TO> {\n    content: ContentMapper<CI, CO>;\n    hint: HintMapper<HI, HO>;\n    tags: TagsMapper<TI, TO>;\n    array: ArrayMapper<CI, CO, HI, HO, TI, TO>;\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic. | TS2315 - Type 'Tree' is not generic.\n    mapTree(tree: Tree<CI, HI, TI>, shape: Shape): Tree<CO, HO, TO>;\n}\n\n/**\n * This is a TreeMapper that only has mappers specified for its leaf nodes; its\n * array mapper is the identity function.\n *\n * This is the TreeMapper initially returned by `buildMapper`. It allows you to\n * change the types of your ContentMapper and HintMapper, which is safe because\n * none of the other mappers that depend on those types (aka ArrayMapper) have\n * been specified yet. (Or, more specifically, the ArrayMapper is currently\n * `identity`, which can trivially vary with the ContentMapper and HintMapper's\n * types.)\n *\n * Once you call `setArrayMapper`, however, we move to the other class:\n * TreeMapperForLeavesAndCollections.\n */\nclass TreeMapperJustForLeaves<CI, CO, HI, HO, TI, TO> {\n    content: ContentMapper<CI, CO>;\n    hint: HintMapper<HI, HO>;\n    tags: TagsMapper<TI, TO>;\n    array: ArrayMapper<CI, CO, HI, HO, TI, TO>;\n\n    constructor(\n        content: ContentMapper<CI, CO>,\n        hint: HintMapper<HI, HO>,\n        tags: TagsMapper<TI, TO>,\n    ) {\n        this.content = content;\n        this.hint = hint;\n        this.tags = tags;\n        this.array = identity;\n    }\n\n    setContentMapper<CI2, CO2>(\n        newContentMapper: ContentMapper<CI2, CO2>,\n    ): TreeMapperJustForLeaves<CI2, CO2, HI, HO, TI, TO> {\n        return new TreeMapperJustForLeaves(\n            newContentMapper,\n            this.hint,\n            this.tags,\n        );\n    }\n\n    setHintMapper<HI2, HO2>(\n        newHintMapper: HintMapper<HI2, HO2>,\n    ): TreeMapperJustForLeaves<CI, CO, HI2, HO2, TI, TO> {\n        return new TreeMapperJustForLeaves(\n            this.content,\n            newHintMapper,\n            this.tags,\n        );\n    }\n\n    setTagsMapper<TI2, TO2>(\n        newTagsMapper: TagsMapper<TI2, TO2>,\n    ): TreeMapperJustForLeaves<CI, CO, HI, HO, TI2, TO2> {\n        return new TreeMapperJustForLeaves(\n            this.content,\n            this.hint,\n            newTagsMapper,\n        );\n    }\n\n    setArrayMapper(\n        newArrayMapper: ArrayMapper<CI, CO, HI, HO, TI, TO>,\n    ): TreeMapperForLeavesAndCollections<CI, CO, HI, HO, TI, TO> {\n        return new TreeMapperForLeavesAndCollections(\n            this.content,\n            this.hint,\n            this.tags,\n            newArrayMapper,\n        );\n    }\n\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic. | TS2315 - Type 'Tree' is not generic.\n    mapTree(tree: Tree<CI, HI, TI>, shape: Shape): Tree<CO, HO, TO> {\n        return mapTree(tree, shape, [], this);\n    }\n}\n\n/**\n * This is a TreeMapper that already has an ArrayMapper specified, so its\n * ContentMapper and HintMapper are now locked in.\n */\nclass TreeMapperForLeavesAndCollections<CI, CO, HI, HO, TI, TO> {\n    content: ContentMapper<CI, CO>;\n    hint: HintMapper<HI, HO>;\n    tags: TagsMapper<TI, TO>;\n    array: ArrayMapper<CI, CO, HI, HO, TI, TO>;\n\n    constructor(\n        content: ContentMapper<CI, CO>,\n        hint: HintMapper<HI, HO>,\n        tags: TagsMapper<TI, TO>,\n        array: ArrayMapper<CI, CO, HI, HO, TI, TO>,\n    ) {\n        this.content = content;\n        this.hint = hint;\n        this.tags = tags;\n        this.array = array;\n    }\n\n    setArrayMapper(\n        newArrayMapper: ArrayMapper<CI, CO, HI, HO, TI, TO>,\n    ): TreeMapperForLeavesAndCollections<CI, CO, HI, HO, TI, TO> {\n        return new TreeMapperForLeavesAndCollections(\n            this.content,\n            this.hint,\n            this.tags,\n            newArrayMapper,\n        );\n    }\n\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic. | TS2315 - Type 'Tree' is not generic.\n    mapTree(tree: Tree<CI, HI, TI>, shape: Shape): Tree<CO, HO, TO> {\n        return mapTree(tree, shape, [], this);\n    }\n}\n\nfunction identity<T>(x: T): T {\n    return x;\n}\n\n/**\n * Return a new TreeMapper that will perform a no-op transformation on an input\n * tree. To make it useful, chain any combination of `setContentMapper`,\n * `setHintMapper`, `setTagMapper`, and `setArrayMapper` to specify\n * transformations for the individual node types.\n */\n// @ts-expect-error [FEI-5003] - TS2300 - Duplicate identifier 'C'. | TS2300 - Duplicate identifier 'H'. | TS2300 - Duplicate identifier 'T'.\nexport function buildMapper<C, C, H, H, T, T>(): TreeMapperJustForLeaves<\n    C,\n    C,\n    H,\n    H,\n    T,\n    T\n> {\n    return new TreeMapperJustForLeaves(identity, identity, identity);\n}\n\n/**\n * Copy the given tree, apply the corresponding transformation specified in the\n * TreeMapper to each node, and return the resulting tree.\n */\nfunction mapTree<CI, CO, HI, HO, TI, TO>(\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic.\n    tree: Tree<CI, HI, TI>,\n    shape: Shape,\n    path: Path,\n    mappers: TreeMapper<CI, CO, HI, HO, TI, TO>,\n    // @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic.\n): Tree<CO, HO, TO> {\n    // We trust the shape of the multi-item to match the shape provided at\n    // runtime. Therefore, in each shape branch, we cast the node to `any` and\n    // reinterpret it as the expected node type.\n    if (shape.type === \"content\") {\n        const content: CI = tree as any;\n        return mappers.content(content, shape, path);\n    }\n    if (shape.type === \"hint\") {\n        const hint: HI = tree as any;\n        return mappers.hint(hint, shape, path);\n    }\n    if (shape.type === \"tags\") {\n        const tags: TI = tree as any;\n        return mappers.tags(tags, shape, path);\n    }\n    if (shape.type === \"array\") {\n        // @ts-expect-error [FEI-5003] - TS2315 - Type 'ArrayNode' is not generic.\n        const array: ArrayNode<CI, HI, TI> = tree as any;\n\n        if (!Array.isArray(array)) {\n            throw new PerseusError(\n                `Invalid object of type \"${typeof array}\" found at path ` +\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                    `${[\"<root>\"].concat(path).join(\".\")}. Expected array.`,\n                Errors.Internal,\n            );\n        }\n\n        const elementShape = shape.elementShape;\n        // @ts-expect-error [FEI-5003] - TS2315 - Type 'ArrayNode' is not generic.\n        const mappedElements: ArrayNode<CO, HO, TO> = array.map((inner, i) =>\n            mapTree(inner, elementShape, path.concat(i), mappers),\n        );\n        return mappers.array(mappedElements, array, shape, path);\n    }\n    if (shape.type === \"object\") {\n        const object: ObjectNode<CI, HI, TI> = tree as any;\n\n        if (object && typeof object !== \"object\") {\n            throw new PerseusError(\n                `Invalid object of type \"${typeof object}\" found at ` +\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                    `path ${[\"<root>\"].concat(path).join(\".\")}. Expected ` +\n                    `\"object\" type.`,\n                Errors.InvalidInput,\n            );\n        }\n\n        const valueShapes = shape.shape;\n        if (!valueShapes) {\n            throw new PerseusError(\n                `Unexpected shape ${JSON.stringify(shape)} at path ` +\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                    `${[\"<root>\"].concat(path).join(\".\")}.`,\n                Errors.InvalidInput,\n            );\n        }\n        const newObject: Record<string, any> = {};\n        Object.keys(valueShapes).forEach((key) => {\n            if (!(key in object)) {\n                throw new PerseusError(\n                    `Key \"${key}\" is missing from shape at path ` +\n                        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                        `${[\"<root>\"].concat(path).join(\".\")}.`,\n                    Errors.InvalidInput,\n                );\n            }\n\n            newObject[key] = mapTree(\n                object[key],\n                valueShapes[key],\n                path.concat(key),\n                mappers,\n            );\n        });\n        return newObject;\n    }\n    throw new PerseusError(\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'type' does not exist on type 'never'.\n        `unexpected shape type ${shape.type}`,\n        Errors.InvalidInput,\n    );\n}\n","/**\n * Utility functions for constructing and manipulating multi-items.\n *\n * These functions apply *specifically* to Items and ItemTrees - things that\n * actually semantically *are* multi-items. For more general functions for\n * traversing and manipulating *anything* shaped like a multi-item (like a\n * renderer tree or a score tree or, well, a multi-item), see trees.js.\n */\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport shapes from \"./shapes\";\nimport {buildMapper} from \"./trees\";\n\nimport type {\n    Item,\n    ItemTree,\n    ContentNode,\n    HintNode,\n    TagsNode,\n    ItemArrayNode,\n    ItemObjectNode,\n} from \"./item-types\";\nimport type {Shape} from \"./shape-types\";\n\n/**\n * Return a semantically empty ItemTree that conforms to the given shape.\n *\n * - An empty content node has an empty content string and no widgets/images.\n * - An empty hint node has an empty content string and no widgets/images.\n * - An empty array node has no elements.\n * - An empty object node has a semantically empty node for each of its keys.\n *   (That is, we recursively call buildEmptyItemTreeForShape for each key.)\n */\nexport function buildEmptyItemTreeForShape(shape: Shape): ItemTree {\n    if (shape.type === \"content\") {\n        return {\n            __type: \"content\",\n            content: \"\",\n            images: {},\n            widgets: {},\n        };\n    }\n    if (shape.type === \"hint\") {\n        return {\n            __type: \"hint\",\n            replace: false,\n            content: \"\",\n            images: {},\n            widgets: {},\n        };\n    }\n    if (shape.type === \"tags\") {\n        return [] as TagsNode;\n    }\n    if (shape.type === \"array\") {\n        return [] as ItemArrayNode;\n    }\n    if (shape.type === \"object\") {\n        const valueShapes = shape.shape;\n        const object: ItemObjectNode = {};\n        Object.keys(valueShapes).forEach((key) => {\n            object[key] = buildEmptyItemTreeForShape(valueShapes[key]);\n        });\n        return object;\n    }\n    throw new PerseusError(\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'type' does not exist on type 'never'.\n        `unexpected shape type ${shape.type}`,\n        Errors.InvalidInput,\n    );\n}\n\n/**\n * Return a semantically empty Item that conforms to the given shape.\n *\n * - An empty content node has an empty content string and no widgets/images.\n * - An empty hint node has an empty content string and no widgets/images.\n * - An empty array node has no elements.\n * - An empty object node has a semantically empty node for each of its keys.\n *   (That is, we recursively call buildEmptyItemTreeForShape for each key.)\n */\nexport function buildEmptyItemForShape(shape: Shape): Item {\n    return treeToItem(buildEmptyItemTreeForShape(shape));\n}\n\n/**\n * Given an Item and its Shape, yield all of its content nodes to the callback.\n */\nexport function findContentNodesInItem(\n    item: Item,\n    shape: Shape,\n    callback: (c: ContentNode) => any,\n) {\n    const itemTree = itemToTree(item);\n    buildMapper().setContentMapper(callback).mapTree(itemTree, shape);\n}\n\n/**\n * Given an Item and its Shape, yield all of its hint nodes to the callback.\n */\nexport function findHintNodesInItem(\n    item: Item,\n    shape: Shape,\n    callback: (h: HintNode) => any,\n) {\n    const itemTree = itemToTree(item);\n    buildMapper().setHintMapper(callback).mapTree(itemTree, shape);\n}\n\n/**\n * Given an ItemTree, return a Shape that it conforms to.\n *\n * The Shape might not be complete or correct Shape that this Item was designed\n * for. If you have access to the intended Shape, use that instead.\n */\nexport function inferItemShape(item: Item): Shape {\n    const itemTree = itemToTree(item);\n    return inferItemTreeShape(itemTree);\n}\n\nfunction inferItemTreeShape(node: ItemTree): Shape {\n    if (Array.isArray(node)) {\n        if (node.length) {\n            if (typeof node[0] === \"string\") {\n                // There's no ItemTree that can manifest as a string.\n                // So, an array of strings must be a TagsNode, not ArrayNode.\n                return shapes.tags;\n            }\n            // Otherwise, assume that this is a valid ArrayNode, and\n            // therefore the shape of the first element applies to all\n            // elements in the array.\n            return shapes.arrayOf(inferItemTreeShape(node[0]));\n        }\n        // The array is empty, so we arbitrarily guess that it's a content\n        // array. As discussed in the docstring, this might be incorrect,\n        // and you shouldn't depend on it.\n        return shapes.arrayOf(shapes.content);\n    }\n    if (\n        // TODO(mdr): Remove #LegacyContentNode support.\n        typeof node === \"object\" &&\n        (node.__type === \"content\" || node.__type === \"item\")\n    ) {\n        return shapes.content;\n    }\n    if (typeof node === \"object\" && node.__type === \"hint\") {\n        return shapes.hint;\n    }\n    if (typeof node === \"object\") {\n        const valueShapes: Record<string, any> = {};\n        Object.keys(node).forEach((key) => {\n            valueShapes[key] = inferItemTreeShape(node[key]);\n        });\n        return shapes.shape(valueShapes);\n    }\n    throw new PerseusError(\n        `unexpected multi-item node ${JSON.stringify(node)}`,\n        Errors.InvalidInput,\n    );\n}\n\n/**\n * Convert the given Item to an ItemTree, by unwrapping the `_multi` key.\n */\nexport function itemToTree(item: Item): ItemTree {\n    return item._multi;\n}\n\n/**\n * Convert the given ItemTree to an Item, by wrapping it in the `_multi` key.\n */\nexport function treeToItem(node: ItemTree): Item {\n    return {_multi: node};\n}\n","/* eslint-disable react/no-unsafe */\n// TODO(mdr): There are some TypeScript errors in this file, and they're tricky, so\n//     I'm skipping TypeScript errors for now.\n/**\n * Main entry point to the MultiRenderer render portion.\n *\n * This file exposes the `MultiRenderer` component which performs\n * multi-rendering. To multi-render a question, pass in the content of the item\n * to the `MultiRenderer` component as a props. Then, pass in a function which\n * takes an object of renderers (in the same structure as the content), and\n * return a render tree. The `MultiRenderer` component will allow you to\n * combine scores, serialized state, etc. without having to manually call on\n * each of the functions. It also handles inter-widgets requests between the\n * different renderers.\n *\n * Example:\n *\n *   item = {_multi: {\n *       left: <content data>,\n *       right: [<content data>, <content data>],\n *   }}\n *   shape = shapes.shape({\n *       left: shapes.content,\n *       right: shapes.arrayOf(shapes.content),\n *   })\n *\n *   <MultiRenderer item={item} shape={shape}>\n *       {({renderers}) =>\n *           <div>\n *               <div id=\"left\">{renderers.left}</div>\n *               <ul id=\"right\">\n *                   {renderers.right.map(r => <li>{r}</li>)}\n *               </ul>\n *           </div>\n *       }\n *   </MultiRenderer>\n */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {StyleSheet, css} from \"aphrodite\"; // eslint-disable-line import/no-extraneous-dependencies\nimport lens from \"hubble\"; // eslint-disable-line import/no-extraneous-dependencies\nimport * as React from \"react\";\n\nimport HintsRenderer from \"../hints-renderer\";\nimport {Errors, Log} from \"../logging/log\";\nimport Renderer from \"../renderer\";\nimport Util from \"../util\";\n\nimport {itemToTree} from \"./items\";\nimport {buildMapper} from \"./trees\";\n\nimport type {Widget} from \"../renderer\";\nimport type {APIOptions, FilterCriterion, PerseusScore} from \"../types\";\nimport type {Item, ContentNode, HintNode, TagsNode} from \"./item-types\";\nimport type {Shape, ArrayShape} from \"./shape-types\";\nimport type {Tree} from \"./tree-types\";\nimport type {TreeMapper, ContentMapper, HintMapper, Path} from \"./trees\";\n\ntype Hint = any; // TODO(mdr)\ntype Score = any; // TODO(mdr)\ntype SerializedState = any; // TODO(mdr)\n\ntype RendererProps = JSX.LibraryManagedAttributes<\n    typeof Renderer,\n    // @ts-expect-error [FEI-5003] - TS2344 - Type 'typeof Renderer' does not satisfy the constraint 'keyof IntrinsicElements | JSXElementConstructor<any>'.\n    React.ComponentProps<typeof Renderer>\n>;\n\ntype ContentRendererElement = React.ReactElement<any>;\ntype HintRendererElement = React.ReactElement<any>;\ntype ContentRendererData = {\n    makeRenderer: () => ContentRendererElement;\n    ref: Renderer | null | undefined;\n};\ntype FindWidgetsFunc = (\n    criterion: FilterCriterion,\n) => ReadonlyArray<Widget | null | undefined>;\ntype HintRendererData = {\n    makeRenderer: () => HintRendererElement;\n    findExternalWidgets: FindWidgetsFunc | null | undefined;\n    ref: null;\n    hint: Hint;\n};\ntype RendererData = ContentRendererData | HintRendererData;\n// @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic.\ntype RendererDataTree = Tree<ContentRendererData, HintRendererData, null>;\n\n/**\n * TODO(somewhatabstract, JIRA-XXXX):\n * Some usage of this type somewhere is causing TypeScript to believe that these\n * elements should be components. Don't know where that is, to fix it up\n * properly. In reality, these types are just too hard to use and aren't\n * really helping us out as I now have to suppress this rather than\n * get value from the type. :(\n */\n// @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic.\ntype RendererTree = Tree<ContentRendererElement, HintRendererElement, null>;\n// @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic.\ntype ScoreTree = Tree<Score, null, null>;\n// @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic.\ntype SerializedStateTree = Tree<SerializedState, null, null>;\n\ntype Props = {\n    item: Item;\n    shape: Shape;\n    children: (tree: {renderers: RendererTree}) => React.ReactElement<any>;\n    serializedState?: SerializedStateTree | null | undefined;\n    onSerializedStateUpdated?: (state: SerializedStateTree) => void;\n    onInteractWithWidget?: (id: string) => void;\n    apiOptions?: APIOptions;\n    reviewMode?: boolean | null | undefined;\n};\ntype State = {\n    // We cache functions to generate renderers and refs in `rendererDataTree`,\n    // and change them every time content changes. This isn't just a performance\n    // optimization; see `_makeContentRendererData` for more discussion.\n    rendererDataTree: RendererDataTree | null | undefined;\n    // But, if traversing the tree fails, we store the Error in `renderError`.\n    renderError: Error | null | undefined;\n};\n\nclass MultiRenderer extends React.Component<Props, State> {\n    rendererDataTreeMapper: TreeMapper<\n        ContentNode,\n        ContentRendererData,\n        HintNode,\n        HintRendererData,\n        TagsNode,\n        null\n    >;\n    getRenderersMapper: TreeMapper<\n        ContentRendererData,\n        ContentRendererElement,\n        HintRendererData,\n        HintRendererElement,\n        null,\n        null\n    >;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.rendererDataTreeMapper = buildMapper()\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'unknown' is not assignable to parameter of type 'ContentNode'.\n            .setContentMapper((c, _, p) => this._makeContentRendererData(c, p))\n            // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'unknown' is not assignable to parameter of type 'HintNode'.\n            .setHintMapper((h) => this._makeHintRendererData(h))\n            .setTagsMapper((t) => null);\n\n        // @ts-expect-error [FEI-5003] - TS2322 - Type 'TreeMapperForLeavesAndCollections<unknown, any, unknown, any, unknown, unknown>' is not assignable to type 'TreeMapper<ContentRendererData, ContentRendererElement, HintRendererData, HintRendererElement, null, null>'.\n        this.getRenderersMapper = buildMapper()\n            // @ts-expect-error [FEI-5003] - TS2571 - Object is of type 'unknown'.\n            .setContentMapper((c) => c.makeRenderer())\n            // @ts-expect-error [FEI-5003] - TS2571 - Object is of type 'unknown'.\n            .setHintMapper((h) => h.makeRenderer())\n            .setArrayMapper((renderers, data, shape) =>\n                this._annotateRendererArray(\n                    renderers as any,\n                    data as any,\n                    shape,\n                ),\n            );\n\n        // Keep state in sync with props.\n        this.state = this._tryMakeRendererState(this.props);\n    }\n    /* eslint-enable react/sort-comp */\n\n    UNSAFE_componentWillReceiveProps(nextProps: Props) {\n        // Keep state in sync with props.\n        if (nextProps.item !== this.props.item) {\n            this.setState(this._tryMakeRendererState(nextProps));\n        }\n    }\n\n    /**\n     * Attempt to build a State that includes a renderer tree corresponding to\n     * the item provided in props. On error, return a state with `renderError`\n     * set instead.\n     */\n    _tryMakeRendererState(props: Props): State {\n        try {\n            return {\n                rendererDataTree: this._makeRendererDataTree(\n                    props.item,\n                    props.shape,\n                ),\n                renderError: null,\n            };\n        } catch (e: any) {\n            Log.error(\"Error building tree state\", Errors.Internal, {\n                cause: e,\n            });\n            return {\n                rendererDataTree: null,\n                renderError: e,\n            };\n        }\n    }\n\n    _handleSerializedStateUpdated: (path: Path, newState?: any) => void = (\n        path,\n        newState,\n    ) => {\n        const {onSerializedStateUpdated} = this.props;\n\n        if (onSerializedStateUpdated) {\n            const oldState = this._getSerializedState(\n                this.props.serializedState,\n            );\n            onSerializedStateUpdated(\n                lens(oldState).set(path, newState).freeze(),\n            );\n        }\n    };\n\n    /**\n     * Props that aren't directly used by the MultiRenderer are delegated to\n     * the underlying Renderers.\n     */\n    _getRendererProps(): RendererProps {\n        // `item`, `children`, and others are unused. I'm\n        // explicitly pulling them out of `this.props` so I don't pass them to\n        // `<Renderer>`. I'm not sure how else to do this.\n        const {\n            item: _,\n            children: __,\n            shape: ___,\n            serializedState: ____,\n            onSerializedStateUpdated: _____,\n            ...otherProps\n        } = this.props;\n        return otherProps;\n    }\n\n    /**\n     * Construct a Renderer and a ref placeholder for the given ContentNode.\n     */\n    _makeContentRendererData(\n        content: ContentNode,\n        path: Path,\n    ): ContentRendererData {\n        // NOTE(emily): The `findExternalWidgets` function here is computed\n        //     inline and thus changes each time we run this function. If it\n        //     were to change every render, it would cause the Renderer to\n        //     re-render a lot more than is necessary. Don't re-compute this\n        //     element unless it is necessary!\n        // HACK(mdr): TypeScript can't prove that this is a ContentRendererData,\n        //     because of how we awkwardly construct it in order to obtain a\n        //     circular reference. But it is, I promise.\n        const data: any = {ref: null, makeRenderer: null};\n\n        const refFunc = (e: any) => (data.ref = e);\n        const findExternalWidgets = (criterion: any) =>\n            this._findWidgets(data, criterion);\n        const handleSerializedState = (state: any) =>\n            this._handleSerializedStateUpdated(path, state);\n\n        data.makeRenderer = () => (\n            /**\n             * TODO(somewhatabstract, JIRA-XXXX):\n             * `content` contains props that Renderer doesn't have. However,\n             * since the type for `content` is not exact, it's hard to know\n             * if this spread is including undocumented props so mapping\n             * one to one could introduce a bug. Need to work out the exact\n             * type for ContentNode and then fix this.\n             */ // @ts-expect-error [FEI-5003] - TS2322 - Type '{ ref: (e: any) => any; findExternalWidgets: (criterion: any) => readonly (Widget | null | undefined)[]; serializedState: any; onSerializedStateUpdated: (state: any) => void; __type: \"content\" | \"item\"; ... 9 more ...; reviewMode?: boolean | ... 1 more ... | undefined; }' is not assignable to type 'InexactPartial<Pick<Readonly<Props> & Readonly<{ children?: ReactNode; }>, \"content\" | \"images\" | \"onRender\" | \"linterContext\" | \"widgets\" | \"alwaysUpdate\" | ... 6 more ... | \"serializedState\">>'.\n            <Renderer\n                {...this._getRendererProps()}\n                {...content}\n                ref={refFunc}\n                findExternalWidgets={findExternalWidgets}\n                serializedState={\n                    this.props.serializedState\n                        ? lens(this.props.serializedState).get(path)\n                        : null\n                }\n                onSerializedStateUpdated={handleSerializedState}\n            />\n        );\n        return data;\n    }\n\n    /**\n     * Construct a Renderer for the given HintNode, and keep track of the hint\n     * itself for future use, too.\n     */\n    _makeHintRendererData(hint: HintNode): HintRendererData {\n        // TODO(mdr): Once HintsRenderer supports inter-widget communication,\n        //     give it a ref. Until then, leave the ref null forever, to avoid\n        //     confusing the findWidgets functions.\n        //\n        // NOTE(davidflanagan): As a partial step toward inter-widget\n        // communication we're going to pass a findExternalWidgets function\n        // (using a dummy data object). This allows passage-ref widgets in\n        // hints to use findWidget() to find the passage widgets they reference.\n        // Note that this is one-way only, however. It does not allow\n        // widgets in the question to find widgets in the hints, for example.\n        const findExternalWidgets = (criterion) =>\n            this._findWidgets({} as any, criterion);\n\n        return {\n            hint,\n            findExternalWidgets, // _annotateRendererArray() needs this\n            ref: null,\n            makeRenderer: () => (\n                <HintsRenderer\n                    {...this._getRendererProps()}\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                    findExternalWidgets={findExternalWidgets}\n                    hints={[hint]}\n                />\n            ),\n        };\n    }\n\n    /**\n     * Construct a tree of interconnected RendererDatas, corresponding to the\n     * given item. Called in `_tryMakeRendererState`, in order to store this\n     * tree in the component state.\n     */\n    _makeRendererDataTree(item: Item, shape: Shape): RendererDataTree {\n        const itemTree = itemToTree(item);\n        return this.rendererDataTreeMapper.mapTree(itemTree, shape);\n    }\n\n    /**\n     * Return all widgets that meet the given criterion, from all Renderers\n     * except the Renderer that triggered this call.\n     *\n     * This function is provided to each Renderer's `findExternalWidgets` prop,\n     * which enables widgets in different Renderers to discover each other and\n     * communicate.\n     */\n    _findWidgets(\n        callingData: RendererData,\n        filterCriterion: FilterCriterion,\n    ): ReadonlyArray<Widget | null | undefined> {\n        const results: Array<Widget | null | undefined> = [];\n\n        this._mapRenderers((data) => {\n            if (callingData !== data && data.ref) {\n                results.push(...data.ref.findInternalWidgets(filterCriterion));\n            }\n        });\n\n        return results;\n    }\n\n    /**\n     * Copy the renderer tree, apply the given transformation to the leaf nodes\n     * and the optional given transformation to the array nodes, and return the\n     * result.\n     *\n     * Used to provide structured data to the call site (the Renderer tree on\n     * `render`, the Score tree on `getScores`, etc.), and to traverse the\n     * renderer tree even when we disregard the output (like in\n     * `_findWidgets`).\n     */\n    _mapRenderers<O>(\n        // eslint-disable-next-line no-restricted-syntax\n        leafMapper: ContentMapper<RendererData, O> &\n            HintMapper<RendererData, O>,\n        // @ts-expect-error [FEI-5003] - TS2315 - Type 'Tree' is not generic.\n    ): Tree<O, O, null> | null | undefined {\n        const {rendererDataTree} = this.state;\n\n        if (!rendererDataTree) {\n            return null;\n        }\n\n        const mapper = buildMapper()\n            .setContentMapper(leafMapper)\n            .setHintMapper(leafMapper);\n        return mapper.mapTree(rendererDataTree, this.props.shape);\n    }\n\n    _scoreFromRef(ref?: Renderer | null): Score {\n        if (!ref) {\n            return null;\n        }\n\n        const [guess, score] = ref.guessAndScore();\n        let state;\n        if (ref.getSerializedState) {\n            state = ref.getSerializedState();\n        }\n        return Util.keScoreFromPerseusScore(score, guess, state);\n    }\n\n    /**\n     * Return a tree in the shape of the multi-item, with scores at each of\n     * the content nodes and `null` at the other leaf nodes.\n     */\n    getScores(): ScoreTree {\n        return this._mapRenderers((data) => this._scoreFromRef(data.ref));\n    }\n\n    /**\n     * Return a single composite score for all rendered content nodes.\n     * The `guess` is a tree in the shape of the multi-item, with an individual\n     * guess at each content node and `null` at the other leaf nodes.\n     */\n    score(): Score {\n        const scores: Array<PerseusScore> = [];\n        const state: Array<\n            | any\n            | {\n                  [id: string]: any;\n              }\n        > = [];\n        const guess = this._mapRenderers((data) => {\n            if (!data.ref) {\n                return null;\n            }\n\n            if (data.ref.getSerializedState) {\n                state.push(data.ref.getSerializedState());\n            }\n\n            scores.push(data.ref.score());\n            return data.ref?.getUserInput();\n        });\n\n        const combinedScore = scores.reduce(Util.combineScores);\n\n        return Util.keScoreFromPerseusScore(combinedScore, guess, state);\n    }\n\n    /**\n     * Return a tree in the shape of the multi-item, with serialized state at\n     * each of the content nodes and `null` at the other leaf nodes.\n     *\n     * If the lastSerializedState argument is supplied, this function will fill\n     * in the state of not-currently-rendered content and hint nodes with the\n     * values from the previous serialized state. If no lastSerializedState is\n     * supplied, `null` will be returned for not-currently-rendered content and\n     * hint nodes.\n     */\n    _getSerializedState(\n        lastSerializedState?: SerializedStateTree,\n    ): SerializedStateTree {\n        return this._mapRenderers((data, _, path) => {\n            if (data.ref) {\n                return data.ref.getSerializedState();\n            }\n            if (lastSerializedState) {\n                return lens(lastSerializedState).get(path);\n            }\n            return null;\n        });\n    }\n\n    /**\n     * Given a tree in the shape of the multi-item, with serialized state at\n     * each of the content nodes, restore each state to the corresponding\n     * renderer if currently mounted.\n     */\n    restoreSerializedState(\n        serializedState: SerializedState,\n        callback?: () => any,\n    ) {\n        // We want to call our async callback only once all of the childrens'\n        // callbacks have run. We add one to this counter before we call out to\n        // each renderer and decrement it when it runs our callback.\n        let numCallbacks = 0;\n        const countCallback = () => {\n            numCallbacks--;\n            if (callback && numCallbacks === 0) {\n                callback();\n            }\n        };\n\n        this._mapRenderers((data, _, path) => {\n            if (!data.ref) {\n                return;\n            }\n\n            const state = lens(serializedState).get(path);\n            if (!state) {\n                return;\n            }\n\n            numCallbacks++;\n            data.ref?.restoreSerializedState(state, countCallback);\n        });\n    }\n\n    /**\n     * Given an array of renderers, if it happens to be an array of *hint*\n     * renderers, then attach a `firstN` method to the array, which allows the\n     * layout to render the hints together in one HintsRenderer.\n     */\n    _annotateRendererArray(\n        renderers: ReadonlyArray<Renderer>,\n        rendererDatas: ReadonlyArray<RendererData>,\n        shape: ArrayShape,\n    ): ReadonlyArray<Renderer> {\n        if (shape.elementShape.type === \"hint\") {\n            // The shape says that these are HintRendererDatas, even though\n            // it's not provable at compile time, so perform a cast.\n            const hintRendererDatas: ReadonlyArray<HintRendererData> =\n                rendererDatas as any;\n\n            renderers = [...renderers];\n            (renderers as any).firstN = (n: any) => (\n                <HintsRenderer\n                    {...this._getRendererProps()}\n                    // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n                    findExternalWidgets={\n                        hintRendererDatas[0]\n                            ? hintRendererDatas[0].findExternalWidgets\n                            : undefined\n                    }\n                    hints={hintRendererDatas.map((d) => d.hint)}\n                    hintsVisible={n}\n                />\n            );\n        }\n        return renderers;\n    }\n\n    /**\n     * Return a tree in the shape of the multi-item, with a Renderer at each\n     * content node and a HintRenderer at each hint node.\n     *\n     * This is generated by running each of the `makeRenderer` functions at the\n     * leaf nodes.\n     */\n    _getRenderers(): RendererTree {\n        return this.getRenderersMapper.mapTree(\n            this.state.rendererDataTree,\n            this.props.shape,\n        );\n    }\n\n    render(): React.ReactNode {\n        if (this.state.renderError) {\n            return (\n                <div className={css(styles.error)}>\n                    {i18n.$_(\"Error rendering: %(error)s\", {\n                        error: String(this.state.renderError),\n                    })}\n                </div>\n            );\n        }\n\n        // Pass the renderer tree to the `children` function, which will\n        // determine the actual content of this component.\n        return this.props.children({\n            renderers: this._getRenderers(),\n        });\n    }\n}\n\nconst styles = StyleSheet.create({\n    error: {\n        color: \"red\",\n    },\n});\n\nexport default MultiRenderer;\n","/**\n * Utility functions to build React PropTypes for multi-items and shapes.\n *\n * If you're writing new components, though, consider using the Item and Shape\n * types instead.\n */\n/* instanbul ignore file */\n\nimport PropTypes from \"prop-types\";\n\nimport {Errors} from \"../logging/log\";\nimport {PerseusError} from \"../perseus-error\";\n\nimport type {Shape} from \"./shape-types\";\n\n/**\n * A recursive PropType that accepts Shape objects, and rejects other objects.\n *\n * Usage: `propTypes: {shape: shapePropType}`.\n */\nexport function shapePropType(...args: ReadonlyArray<any>): any {\n    const itemShape = PropTypes.oneOfType([\n        PropTypes.shape({\n            type: PropTypes.oneOf([\"content\"]).isRequired,\n        }).isRequired,\n        PropTypes.shape({\n            type: PropTypes.oneOf([\"hint\"]).isRequired,\n        }).isRequired,\n        PropTypes.shape({\n            type: PropTypes.oneOf([\"tags\"]).isRequired,\n        }).isRequired,\n        PropTypes.shape({\n            type: PropTypes.oneOf([\"object\"]).isRequired,\n            shape: PropTypes.objectOf(shapePropType),\n        }).isRequired,\n        PropTypes.shape({\n            type: PropTypes.oneOf([\"array\"]).isRequired,\n            elementShape: shapePropType,\n        }).isRequired,\n    ]);\n\n    // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n    return itemShape(...args);\n}\n\n/**\n * Return a PropType that accepts Items of the given shape, and rejects other\n * objects.\n *\n * Usage: `propTypes: {item: buildPropTypeForShape(myShape)}`\n */\nexport function buildPropTypeForShape(shape: Shape): any {\n    return PropTypes.oneOfType([\n        PropTypes.shape({\n            _multi: buildTreePropTypeForShape(shape),\n        }),\n        PropTypes.oneOf([null, undefined]),\n    ]);\n}\n\n/**\n * Return a PropType that accepts ItemTrees of the given shape, and rejects\n * other objects.\n */\nfunction buildTreePropTypeForShape(shape: Shape): any {\n    if (shape.type === \"content\") {\n        return PropTypes.shape({\n            // TODO(mdr): Remove #LegacyContentNode support.\n            __type: PropTypes.oneOf([\"content\", \"item\"]).isRequired,\n            content: PropTypes.string,\n            images: PropTypes.objectOf(PropTypes.any),\n            widgets: PropTypes.objectOf(PropTypes.any),\n        });\n    }\n    if (shape.type === \"hint\") {\n        return PropTypes.shape({\n            __type: PropTypes.oneOf([\"hint\"]).isRequired,\n            content: PropTypes.string,\n            images: PropTypes.objectOf(PropTypes.any),\n            widgets: PropTypes.objectOf(PropTypes.any),\n            replace: PropTypes.bool,\n        });\n    }\n    if (shape.type === \"tags\") {\n        return PropTypes.arrayOf(PropTypes.string.isRequired);\n    }\n    if (shape.type === \"array\") {\n        const elementPropType = buildTreePropTypeForShape(shape.elementShape);\n        return PropTypes.arrayOf(elementPropType.isRequired);\n    }\n    if (shape.type === \"object\") {\n        const valueShapes = shape.shape;\n        const propTypeShape: Record<string, any> = {};\n        Object.keys(valueShapes).forEach((key) => {\n            propTypeShape[key] = buildTreePropTypeForShape(\n                valueShapes[key],\n            ).isRequired;\n        });\n        return PropTypes.shape(propTypeShape);\n    }\n    throw new PerseusError(\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'type' does not exist on type 'never'.\n        `unexpected shape type ${shape.type}`,\n        Errors.InvalidInput,\n    );\n}\n","/**\n * This library provides support for Perseus multi-items: structured Perseus\n * content that content creators can easily create, and that applications can\n * easily render into different parts of the layout.\n *\n * For more details about application and motivation, see:\n * https://sites.google.com/a/khanacademy.org/forge/for-developers/perseus-items-and-multi-items\n *\n * This file primarily exposes the `MultiRenderer` component, which performs\n * multi-rendering. To multi-render a question, pass in the content of the item\n * to the `MultiRenderer` component as a props. Then, pass in a function which\n * takes an object of renderers (in the same structure as the content), and\n * return a render tree. The `MultiRenderer` component will allow you to\n * combine scores, serialized state, etc. without having to manually call on\n * each of the functions. It also handles inter-widgets requests between the\n * different renderers.\n * For more details, see `multi-items/multi-renderer.jsx`.\n *\n * Example:\n *\n *   item = {_multi: {\n *       left: <content data>,\n *       right: [<content data>, <content data>],\n *   }}\n *   shape = shapes.shape({\n *       left: shapes.content,\n *       right: shapes.arrayOf(shapes.content),\n *   })\n *\n *   <MultiRenderer item={item} shape={shape}>\n *       {({renderers}) =>\n *           <div>\n *               <div id=\"left\">{renderers.left}</div>\n *               <ul id=\"right\">\n *                   {renderers.right.map(r => <li>{r}</li>)}\n *               </ul>\n *           </div>\n *       }\n *   </MultiRenderer>\n *\n * This file also exposes `shapes`, which helps you construct a runtime type\n * declaration for your particular class of multi-item. This can then be used\n * to create a MultirendererEditor for your multi-item shape, and to validate\n * that a multi-item conforms to the shape via `buildPropTypeForShape`.\n * For more details, see `multi-items/shapes.js`.\n *\n * This file also exposes some utility functions for working with generic\n * multi-items, like `findContentNodesInItem`, `findHintNodesInItem`,\n * `inferItemShape`, and `buildEmptyItemForShape`.\n * For more details, see `multi-items/items.js`.\n */\nimport {\n    buildEmptyItemForShape,\n    findContentNodesInItem,\n    findHintNodesInItem,\n    inferItemShape,\n} from \"./multi-items/items\";\nimport MultiRenderer from \"./multi-items/multi-renderer\";\nimport {buildPropTypeForShape} from \"./multi-items/prop-type-builders\";\nimport shapes from \"./multi-items/shapes\";\n\nexport default {\n    // Tools for rendering your multi-items\n    MultiRenderer,\n\n    // Tools for declaring your multi-item shapes\n    shapes,\n    buildPropTypeForShape,\n\n    // Tools for generically manipulating multi-items\n    buildEmptyItemForShape,\n    findContentNodesInItem,\n    findHintNodesInItem,\n    inferItemShape,\n};\n","/**\n * Calculates whether a perseus item is renderable by a specific\n * perseus-item-data version.\n *\n * This is done inside of the perseus repo so that it can traverse\n * widget-specific data that might need to do a sub-traversal.\n * This supports widgets that contain renderers, such as the\n * group or sequence widgets.\n */\n\nimport _ from \"underscore\";\n\nimport {Errors} from \"./logging/log\";\nimport MultiItems from \"./multi-items\";\nimport {PerseusError} from \"./perseus-error\";\nimport {traverse} from \"./traversal\";\nimport * as Widgets from \"./widgets\";\n\nimport type {PerseusWidget} from \"./perseus-types\";\n\nconst {findContentNodesInItem, inferItemShape} = MultiItems;\n\nconst isUpgradedWidgetInfoRenderableBy = function (\n    widgetInfo: PerseusWidget,\n    widgetRendererVersion: any,\n) {\n    if (widgetRendererVersion == null) {\n        // If the widget does not exist in this version, this will\n        // be null, and that version of perseus cannot render the\n        // widget (it doesn't even know the widget exists!)\n        return false;\n    }\n\n    const widgetVersion = widgetInfo.version || {major: 0, minor: 0};\n    if (widgetRendererVersion.major > widgetVersion.major) {\n        return true;\n    }\n    if (widgetRendererVersion.major < widgetVersion.major) {\n        return false;\n    }\n    // If the major versions are the same, the minor version acts\n    // like a tie-breaker.\n    // For example, input-number 3.2 can render an input-number\n    // 2.4, 3.0, or 3.2, but not an input number 3.3 or 4.0.\n    return widgetRendererVersion.minor >= widgetVersion.minor;\n};\n\nconst isRawWidgetInfoRenderableBy = function (\n    widgetInfo: any,\n    rendererContentVersion: any,\n) {\n    // Empty/non-existant widgets are always safe to render\n    if (widgetInfo == null || widgetInfo.type == null) {\n        return true;\n    }\n\n    // NOTE: This doesn't modify the widget info if the widget info\n    // is at a later version than is supported.\n    const upgradedWidgetInfo =\n        Widgets.upgradeWidgetInfoToLatestVersion(widgetInfo);\n    return isUpgradedWidgetInfoRenderableBy(\n        upgradedWidgetInfo,\n        rendererContentVersion[upgradedWidgetInfo.type],\n    );\n};\n\nconst isRendererContentRenderableBy = function (\n    rendererOptions,\n    rendererContentVersion: any,\n) {\n    let isRenderable = true;\n    traverse(rendererOptions, null, function (widgetInfo) {\n        isRenderable =\n            isRenderable &&\n            isRawWidgetInfoRenderableBy(widgetInfo, rendererContentVersion);\n    });\n    return isRenderable;\n};\n\nexport const isItemRenderableByVersion = function (\n    itemData: any,\n    rendererContentVersion: any,\n): boolean {\n    if (itemData == null || rendererContentVersion == null) {\n        throw new PerseusError(\n            \"missing parameter to Perseus.isRenderable.item\",\n            Errors.InvalidInput,\n        );\n    }\n    if (itemData._multi) {\n        const shape = inferItemShape(itemData);\n\n        let isRenderable = true;\n        findContentNodesInItem(itemData, shape, (node) => {\n            const nodeIsRenderable = isRendererContentRenderableBy(\n                node,\n                rendererContentVersion,\n            );\n            if (!nodeIsRenderable) {\n                isRenderable = false;\n            }\n        });\n        return isRenderable;\n    }\n    return isRendererContentRenderableBy(\n        itemData.question,\n        rendererContentVersion,\n    );\n};\n","/**\n * Identifies whether or not a given perseus item requires the use of a mouse\n * or screen, based on the widgets it contains.\n */\n\nimport _ from \"underscore\";\n\nimport MultiItems from \"./multi-items\";\nimport {traverse} from \"./traversal\";\nimport * as Widgets from \"./widgets\";\n\nconst {findContentNodesInItem, inferItemShape} = MultiItems;\n\n// Iterate over a single Perseus renderer, mutating `widgets` by appending\n// violating widget types discovered in this item.\nfunction traverseRenderer(itemData, widgets: Array<any>) {\n    traverse(itemData, null, function (info) {\n        if (info.type && !Widgets.isAccessible(info)) {\n            widgets.push(info.type);\n        }\n    });\n}\n\n// Returns a list of widgets that cause a given perseus item to require\n// the use of a screen or mouse.\n//\n// For now we'll just check the `accessible` field on each of the widgets\n// in the item data, but in the future we may specify accessibility on\n// each widget with higher granularity.\nexport function violatingWidgets(itemData: any): any {\n    // TODO(jordan): Hints as well\n    const widgets = [];\n\n    if (itemData._multi) {\n        const shape = inferItemShape(itemData);\n        findContentNodesInItem(itemData, shape, (content) =>\n            traverseRenderer(content, widgets),\n        );\n    } else {\n        traverseRenderer(itemData.question, widgets);\n    }\n\n    // Uniquify the list of widgets (by type)\n    return _.uniq(widgets);\n}\n","/**\n * Some tests require some or all of the widgets and editors to be registered\n * in order for them to work. Requiring this file will register all of the\n * widgets and editors.\n */\nimport allWidgets from \"../all-widgets\";\nimport * as Widgets from \"../widgets\";\n\nexport const registerAllWidgetsForTesting = () => {\n    Widgets.registerWidgets(allWidgets);\n};\n","import _ from \"underscore\";\n\nimport WIDGET_PROP_DENYLIST from \"./widget-prop-denylist\";\n\nconst EditorJsonify = {\n    serialize: function (): any {\n        // Omit props that get passed to all widgets\n        // @ts-expect-error [FEI-5003] - TS2339 - Property 'props' does not exist on type '{ readonly serialize: () => any; }'.\n        return _.omit(this.props, WIDGET_PROP_DENYLIST);\n    },\n} as const;\n\nexport default EditorJsonify;\n","/**\n * Main entry point\n */\n\nimport version from \"./version\";\n\nexport {default as init} from \"./init\";\n\nexport {ApiOptions, ClassNames} from \"./perseus-api\";\n\nexport const apiVersion = version.apiVersion;\nexport const itemDataVersion = version.itemDataVersion;\nexport {default as itemVersion} from \"./item-version\";\n\n/**\n * Renderers\n */\nexport {default as ArticleRenderer} from \"./article-renderer\";\nexport {default as ItemRenderer} from \"./item-renderer\";\nexport {default as ServerItemRenderer} from \"./server-item-renderer\";\nexport {default as HintsRenderer} from \"./hints-renderer\";\nexport {default as HintRenderer} from \"./hint-renderer\";\nexport {default as Renderer} from \"./renderer\";\n\n/**\n * Widgets\n */\nexport * as Widgets from \"./widgets\";\nexport {default as widgets} from \"./all-widgets\";\nexport {Expression} from \"./widgets/expression\";\nexport {default as InputNumber} from \"./widgets/input-number\";\nexport {default as NumericInput} from \"./widgets/numeric-input\";\nexport {default as Radio} from \"./widgets/radio\";\nexport {default as BaseRadio} from \"./widgets/radio/base-radio\";\nexport {default as Categorizer} from \"./widgets/categorizer\";\nexport {default as InteractiveGraphWidget} from \"./widgets/interactive-graph\";\nexport {default as TransformerWidget} from \"./widgets/transformer\";\nexport {default as MatrixWidget} from \"./widgets/matrix\";\nexport {default as TableWidget} from \"./widgets/table\";\nexport {default as PlotterWidget} from \"./widgets/plotter\";\nexport {default as GrapherWidget} from \"./widgets/grapher\";\n\nexport {default as ArrowPicker} from \"./widgets/interaction/arrow-picker\";\nexport {default as ColorPicker} from \"./widgets/interaction/color-picker\";\nexport {default as DashPicker} from \"./widgets/interaction/dash-picker\";\nexport {default as ElementContainer} from \"./widgets/interaction/element-container\";\nexport * as GrapherUtil from \"./widgets/grapher/util\";\n\n/**\n * Misc\n */\nexport * as components from \"./components\";\nexport * as constants from \"./components/constants\";\n// TODO(FEI-4504): Replace globalStyles with wonder-blocks where possible\nexport * as globalStyles from \"./styles/global-styles\";\n// TODO(FEI-4504): Replace globalStyles with wonder-blocks where possible\nexport * as globalConstants from \"./styles/global-constants\";\nexport * as icons from \"./icon-paths\";\nexport * as Dependencies from \"./dependencies\";\nexport {Errors, Log} from \"./logging/log\";\nexport {PerseusError} from \"./perseus-error\";\nexport {default as JiptParagraphs} from \"./jipt-paragraphs\";\nexport {default as KeypadContext} from \"./keypad-context\";\nexport {default as KhanMath} from \"./util/math\";\nexport {default as LoadingContext} from \"./loading-context\";\nexport {default as mediaQueries} from \"./styles/media-queries\";\nexport {default as PerseusMarkdown} from \"./perseus-markdown\";\nexport {traverse} from \"./traversal\";\nexport {isItemRenderableByVersion} from \"./renderability\";\nexport {violatingWidgets} from \"./a11y\";\nexport {interactiveSizes} from \"./styles/constants\";\nexport {displaySigFigs} from \"./sigfigs\";\n\n/**\n * Util\n */\nexport {default as Util} from \"./util\";\nexport {default as KhanColors} from \"./util/colors\";\nexport {default as preprocessTex} from \"./util/katex-preprocess\";\nexport {registerAllWidgetsForTesting} from \"./util/register-all-widgets-for-testing\";\nexport * as SizingUtils from \"./util/sizing-utils\";\n\n/**\n * Mixins\n */\nexport * as Changeable from \"./mixins/changeable\";\nexport {default as EditorJsonify} from \"./mixins/editor-jsonify\";\nexport {default as WidgetJsonifyDeprecated} from \"./mixins/widget-jsonify-deprecated\";\nexport {default as WIDGET_PROP_DENYLIST} from \"./mixins/widget-prop-denylist\";\n\n/**\n * Types\n */\nexport type {PerseusOptions} from \"./init\";\nexport type {ILogger, LogErrorOptions, ErrorKind} from \"./logging/log\";\nexport type {ServerItemRenderer as ServerItemRendererComponent} from \"./server-item-renderer\";\nexport type {\n    Alignment,\n    APIOptions,\n    APIOptionsWithDefaults,\n    ChangeHandler,\n    DeviceType,\n    DomInsertCheckFn,\n    EditorMode,\n    FocusPath,\n    Hint,\n    ImageDict,\n    ImageUploader,\n    JiptLabelStore,\n    JiptRenderer,\n    KEScore,\n    LinterContextProps,\n    PerseusDependencies,\n    PerseusScore,\n    RendererInterface,\n    Version,\n    VideoData,\n    VideoKind,\n    WidgetDict,\n    WidgetExports,\n    WidgetInfo,\n} from \"./types\";\nexport type {ParsedValue} from \"./util\";\nexport type {\n    MathFormat,\n    InputNumberWidget,\n    PerseusRadioWidgetOptions,\n    PerseusRenderer,\n} from \"./perseus-types\";\nexport type {Coord} from \"./interactive2/types\";\nexport type {MarkerType} from \"./widgets/label-image/types\";\n\n/**\n * Multi-items\n */\nexport {default as MultiItems} from \"./multi-items\";\nexport {buildEmptyItemTreeForShape, itemToTree} from \"./multi-items/items\";\nexport {default as shapes} from \"./multi-items/shapes\";\nexport {buildMapper} from \"./multi-items/trees\";\n\nexport type {\n    ContentNode,\n    HintNode,\n    Item,\n    ItemTree,\n    ItemObjectNode,\n    ItemArrayNode,\n    TagsNode,\n} from \"./multi-items/item-types\";\nexport type {\n    Shape,\n    ArrayShape,\n    ObjectShape,\n    ContentShape,\n    HintShape,\n    TagsShape,\n} from \"./multi-items/shape-types\";\nexport type {Path} from \"./multi-items/trees\";\n"],"names":["apiVersion","major","minor","itemDataVersion","InlineIcon","path","width","height","style","title","React","createElement","role","_extends","verticalAlign","viewBox","d","fill","_dependencies","setDependencies","dependencies","getDependencies","Error","join","prettyBig","fontSize","slightlyBig","symbStyle","basic","key","props","TeX","convertDotToTimes","i18n","doNotTranslate","input","contents","latex","typedText","cmd","buttonSets","concat","trig","className","prealgebra","keystroke","logarithms","buttonSetsPropType","PropTypes","arrayOf","oneOf","_","keys","TexButtons","Component","render","sortedButtonSets","sortBy","sets","setName","indexOf","buttons","map","buttonRows","row","symbGen","symbol","onClick","onInsert","type","buttonPopup","i","buttonSetsType","MathInput","constructor","args","mouseDown","state","focused","handleFocus","setState","handleMouseDown","event","ReactDOM","findDOMNode","contains","target","handleMouseUp","focus","handleBlur","e","relatedTarget","_shouldShowButtons","buttonsVisible","insert","value","mathField","isFunction","write","options","MQ","MathQuill","getInterface","MathField","refs","mathinput","blur","componentDidMount","window","addEventListener","initialized","autoCommands","charsThatBreakOutOfSupSub","supSubsRequireOperand","spaceBehavesLikeTab","handlers","edited","replace","left","__controller","cursor","L","ctrlSeq","backspace","onChange","enter","$","submit","upOutOf","componentWillUnmount","removeEventListener","classNames","display","ref","labelText","onFocus","onBlur","position","defaultProps","zIndex","HorizontalDirection","VerticalDirection","Triangle","borderLeft","borderRight","borderTop","borderBottom","hBorder","horizontalDirection","vBorder","color","verticalDirection","top","TooltipArrow","isTop","frontTopOffset","borderTopOffset","visibility","marginTop","marginBottom","border","VERTICAL_CORNERS","bottom","HORIZONTAL_CORNERS","targetLeft","right","HORIZONTAL_ALIGNMNENTS","tooltipLeft","arrowLeft","arrowSize","Tooltip","_updateHeight","UNSAFE_componentWillReceiveProps","componentDidUpdate","_renderToolTipDiv","isTooltipAbove","settings","Object","assign","horizontalPosition","horizontalAlign","verticalPosition","arrowAbove","arrowBelow","Top","borderColor","Bottom","show","undefined","boxShadow","children","slice","tooltipContainer","offsetHeight","targetContainerStyle","Left","iconCheck","iconCheckMedium","iconChevronDown","iconChevronRight","iconCircle","iconCircleArrowDown","iconCircleArrowUp","iconCircleThin","iconDesktop","iconDropdownArrow","iconExclamationSign","iconGear","iconMobilePhone","iconOk","iconPlus","iconRemove","iconStar","iconTryAgain","iconTablet","iconTrash","iconUndo","iconMinus","Errors","freeze","Unknown","Internal","InvalidInput","NotAllowed","TransientService","Service","Log","log","message","extra","error","kind","PerseusError","metadata","denylist","removeDenylistProps","newProps","prop","USAGE","_changeMultiple","component","callback","currProps","omit","WIDGET_PROP_DENYLIST","nextProps","extend","_changeSingle","propName","partial","change","newPropsOrSinglePropName","propValue","isObject","toArray","arguments","propTypes","func","isRequired","textWidthCache","getTextWidth","text","$test","appendTo","remove","TextListEditor","items","index","clone","length","compact","onKeyDown","which","nativeEvent","keyCode","preventDefault","focusIndex","splice","layout","inputs","item","bind","array","string","EMPTY_ARRAY","StubTagEditor","showTitle","bool","ApiOptions","shape","isArticle","onInputError","onFocusChange","GroupMetadataEditor","showAlignmentOptions","readOnly","answerableCallback","getAnotherHint","interactionCallback","groupAnnotator","imagePlaceholder","node","widgetPlaceholder","baseElements","Link","imagePreloader","trackInteraction","customKeypad","nativeKeypadProxy","isMobile","setDrawingAreaAvailable","useDraftEditor","hintProgressColor","canScrollPage","inModal","crossOutEnabled","editorChangeDelay","number","defaults","ClassNames","RENDERER","TWO_COLUMN_RENDERER","RESPONSIVE_RENDERER","INPUT","FOCUSED","RADIO","OPTION","SELECTED","OPTION_CONTENT","INTERACTIVE","CORRECT","INCORRECT","UNANSWERED","MOBILE","KhanMath","cleanMath","expr","bound","num","Math","max","min","factorial","x","getGCD","a","b","rest","call","mod","abs","getLCM","primes","isPrime","n","grep","p","sqrt","getPrimeFactorization","maxf","f","merge","roundToNearest","increment","round","roundTo","precision","factor","pow","toFixed","toFixedApprox","fixedStr","knumber","equal","roundToApprox","fixed","String","toFraction","decimal","tolerance","fract","nd","Number","loN","loD","hiN","hiD","midN","midD","getNumericFormat","trim","match","fraction","parseFloat","toNumericString","format","PI","numerator","denominator","isInteger","sign","pi","modulus","integer","MAXERROR_EPSILON","errors","APPROXIMATED_PI_ERROR","EXTRA_SYMBOLS_ERROR","NEEDS_TO_BE_SIMPLFIED_ERROR","MISSING_PERCENT_ERROR","MULTIPLICATION_SIGN_ERROR","WRONG_CASE_ERROR","WRONG_LETTER_ERROR","KhanAnswerTypes","predicate","defaultForms","createValidatorFunctional","simplify","ratio","forms","acceptableForms","isArray","split","inexact","maxError","without","push","fractionTransformer","mobileDeviceMatch","parsedInt","parseInt","denom","simplified","exact","isNaN","rounded","proper","o","improper","possibilities","integ","reduce","memo","form","approximatesPi","piMult","roundedNumber","each","possibility","piApprox","multiplier","ix","coefficient","percent","hasPercentSign","substring","transformed","t","mixed","normal","badLeadingZero","commas","c","guess","fallback","score","empty","correct","j","l","val","interpretedGuess","anyAreNaN","any","convertToPredicate","correctAnswer","correctFloat","expression","parseSolution","solutionString","solution","KAS","parse","parsed","isSimplified","ungraded","answer","result","compare","wrongVariableNames","wrongVariableCase","suppressAlmostThere","answerX","resultX","ERROR_MESSAGE","insertBraces","Expression","_args","_isMounted","errorTimeout","displayName","showErrorTooltip","showErrorText","prevProps","isEqual","functions","clearTimeout","setTimeout","apiResult","apiOptions","simpleValidate","rubric","validate","getUserInput","getUserInputFromProps","Changeable","apply","pick","decimal_separator","getDecimalSeparator","changeAndTrack","cb","_handleFocus","_handleBlur","focusInputPath","inputPath","blurInputPath","getInputPaths","getGrammarTypeForPath","setInputValue","newValue","userInput","createValidator","PerseusErrors","loggedMetadata","JSON","stringify","matchingAnswerForm","matchMessage","allEmpty","firstUngradedResult","answerForm","answerForms","considered","earned","total","getOneCorrectAnswerFromRubric","correctAnswers","filter","KeypadInput","keypadElement","_this$props$keypadEle","configure","keypadConfiguration","errorTooltip","Right","onMouseEnter","onMouseLeave","ApiClassNames","times","linterContext","linterContextDefault","keypadConfigurationForProps","widgetOptions","keypadType","KeypadType","EXPRESSION","uniqueExtraVariables","uniqueExtraConstants","maybeExpr","isGreek","toKey","toUpperCase","variable","getVars","constant","getConsts","extraVariables","sort","extraConstants","extraKeys","propUpgrades","v0props","name","defaultAlignment","widget","transform","version","isLintable","defaultContext","assetStatuses","setAssetStatus","assetKey","loaded","context","createContext","supportsPassive","svgLabelsRegex","svgLocalLabelsRegex","nestedMap","Array","child","inputPathsEqual","every","rWidgetRule","rTypeFromWidgetId","rWidgetParts","RegExp","source","snowman","noScore","seededRNG","seed","randomSeed","shuffle","ensurePermuted","shuffled","all","random","newEnd","floor","temp","str","r","output","lastIndex","exec","m","combineScores","scoreA","scoreB","keScoreFromPerseusScore","firstNumericalParse","first","ans","stringArrayOfSize","size","gridDimensionConfig","absTickStep","extent","dimensionConstraint","gridStep","scale","scaleFromExtent","stepPx","unityLabel","tickStep","getGridStep","range","step","boxSize","gridStepFromTickStep","snapStepFromGridStep","tickWidth","y","LN10","leadingDigit","span","tickStepFromExtent","tickFactor","constraintFactor","desiredNumTicks","tickStepFromNumTicks","numTicks","err","constrainTickStep","constrainedTickStepsFromTickSteps","tickSteps","ranges","DeprecationMixin","UNSAFE_componentWillMount","deprecatedProps","has","isEmpty","eq","deepEq","v","k","parseQueryString","query","location","search","urlParams","s","decodeURIComponent","updateQueryString","uri","encodeURIComponent","re","separator","strongEncodeURIComponent","escape","widgetShouldHighlight","scoreIsEmpty","touchHandlers","pointerDown","currentTouchIdentifier","resetTouchHandlers","extractPointerLocation","touchOrEvent","len","changedTouches","identifier","isEndish","pageX","pageY","supportsPassiveEvents","opts","defineProperty","get","captureScratchpadTouchStart","stopPropagation","getImageSize","url","img","Image","onload","_document$body","document","body","appendChild","defer","_document$body2","clientWidth","clientHeight","removeChild","src","getRealImageUrl","isLabeledSVG","getSvgUrl","test","getBaseUrl","getDataUrl","getWordBeforeCursor","textarea","endPos","selectionStart","startPos","lastIndexOf","pos","start","end","moveCursor","selectionEnd","unescapeMathMode","label","startsWith","endsWith","Date","getTime","Util","transitionEnd","el","transEndEventNames","WebkitTransition","MozTransition","OTransition","transition","fn","emulateTransitionEnd","duration","called","$el","one","trigger","support","special","bsTransitionEnd","bindType","delegateType","handle","is","handleObj","handler","changeViewportTag","contentString","scrollX","scrollY","viewport","querySelector","setAttribute","append","opacity","scrollTo","ZoomServiceClass","prototype","_initialize","enableMobilePinch","_$document","_activeZoom","_initialScrollPosition","_initialTouchPosition","_touchMoveListener","_$window","_$body","_boundClick","proxy","_clickHandler","_enableMobilePinch","handleZoomClick","tagName","hasClass","metaKey","ctrlKey","open","innerWidth","Zoom","getOffset","_activeZoomClose","_zoom","on","_scrollHandler","_keyHandler","_touchStart","zoomImage","forceDispose","dispose","_disposeActiveZoom","close","off","deltaY","originalEvent","touches","_touchMove","_fullHeight","_fullWidth","_overlay","_targetImage","_OFFSET","_MAX_WIDTH","_MAX_HEIGHT","zoomToFitOnMobile","$zoomedImage","imageOffset","_imageOffset","offset","_left","scrollLeft","_top","scrollTop","css","_zoomOriginal","_this$_overlay","addClass","attr","_backdrop","_calculateZoom","_triggerAnimation","originalFullImageWidth","originalFullImageHeight","viewportHeight","innerHeight","viewportWidth","maxScaleFactor","imageAspectRatio","viewportAspectRatio","_imgScaleFactor","viewportY","viewportX","scaleFactor","imageCenterY","imageCenterX","_translateY","_translateX","_zoomedInTransformString","_onZoomInFinish","marginLeft","removeClass","parentNode","ZoomService","baseFontFamily","boldFontFamily","green","kaGreen","blue","gray","red","grayLight","grayLighter","learnstormBlue","white","gray98","gray97","gray95","gray90","gray85","gray76","gray68","gray41","gray25","gray17","black","warning1","warning3","pureSmMin","pureMdMin","pureLgMin","pureXlMin","pureXsMax","pureSmMax","pureMdMax","pureLgMax","tableBackgroundAccent","zIndexScratchPad","zIndexAboveScratchpad","zIndexInteractiveComponent","zIndexCurrentlyDragging","zIndexCalculator","phoneMargin","negativePhoneMargin","hintBorderWidth","baseUnitPx","interactiveSizes","defaultBoxSize","defaultBoxSizeSmall","circleSize","radioMarginWidth","warningColor","warningColorHover","warningColorActive","publishBlockingErrorColor","radioBorderColor","checkedColor","articleMaxWidthInPx","articleMaxWidthTableInPx","MIN_VIEWPORT_HEIGHT","FixedToResponsive","_cacheViewportSize","aspectRatio","spacer","paddingBottom","constrainHeight","maxHeight","maxWidth","container","shouldFullBleed","allowFullBleed","marginRight","getKey","eventName","id","getEventName","MovableHelperMethods","_fireEvent","listeners","currentValue","previousValue","invoke","_applyConstraints","current","previous","extraOptions","skipRemaining","constraints","constraint","onSkipRemaining","kpoint","draw","currState","cloneState","prevState","listen","_listenerMap","unlisten","prefixedTransform","computePrefixedTransform","prefixes","correctPrefix","prefix","canUse3dTransform","computeCanUse3dTransform","InteractiveUtil","getPrefixedTransform","assert","isTrue","createGettersFor","Class","addMovableHelperMethodsTo","methodFunc","methodName","arrayify","funcOrArray","flatten","identity","normalizeOptions","arrayOptionNames","funcArray","getCanUse3dTransform","setAttr","att","R","cnv","create","nu","res","set","ii","elements","circle","rect","ellipse","image","formatrg","proto","doc","win","oldRaphael","was","Raphael","Paper","customAttributes","paperproto","supportsTouch","E","S","Str","events","touchMap","mousedown","mousemove","mouseup","lowerCase","toLowerCase","math","mmax","mmin","toString","fillString","objectToString","ISURL","colourRegExp","isnan","bezierrg","toFloat","toInt","ms","upperCase","availableAttrs","cx","cy","font","gradient","href","rotation","rx","ry","stroke","translation","availableAnimAttrs","along","rp","animKeyFrames","commaSpaces","hsrg","hs","rg","p2s","pathCommand","pathValues","radial_gradient","sortByKey","SVGAngle","implementation","hasFeature","innerHTML","firstChild","behavior","adj","svg","vml","_id","_oid","angle","x1","y1","x2","y2","x3","y3","atan","rad","deg","snapTo","values","rem","createUUID","setWindow","newwin","toHex","bod","docum","ActiveXObject","createPopup","createTextRange","cacher","queryCommandValue","defaultView","getComputedStyle","getPropertyValue","hsbtoString","h","hsltoString","rgbtoString","hex","hsb2rgb","hsl2rgb","rgb","channels","t2","t1","t3","g","rgb2hsb","clr","getRGB","hue","saturation","brightness","delta","rgb2hsl","hsl","_path2string","scope","postprocessor","newf","arg","cache","count","shift","colour","charAt","getColor","reset","parsePathString","pathString","paramCounts","q","z","data","pathClone","params","findDotsAtSegment","p1x","p1y","c1x","c1y","c2x","c2y","p2x","p2y","mx","my","nx","ny","ax","ay","alpha","pathDimensions","path2curve","X","Y","dim","curveDim","xmin","ymin","pathArray","jj","pathToRelative","pa","kk","pathToAbsolute","l2c","q2c","_13","_23","a2c","large_arc_flag","sweep_flag","recursive","_120","xy","rotate","cos","sin","rx2","ry2","f1","asin","f2","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","newres","findDotAtSegment","dot","path2","p2","attrs","bx","by","qx","qy","attrs2","processPath","T","Q","fixArc","pp","fixM","path1","a1","a2","seg","seg2","seglen","seg2len","parseDots","dots","par","getContainer","w","getElementById","pixelWidth","offsetWidth","pixelHeight","plugins","con","add","that","tear","paper","prev","next","tofront","toback","insertafter","el2","insertbefore","removed","methodname","svgns","xlink","createElementNS","webkitTapHighlightColor","thePath","SVG","canvas","Element","setFillAndStroke","addGradientFill","fx","fy","_fx","_fy","dir","vector","getAttribute","defs","stop","fillOpacity","updatePosition","bbox","getBBox","pattern","patternTransform","dasharray","rot","addDashes","butt","square","dashes","rotxy","pn","hl","insertBefore","setAttributeNS","clip","rc","strokeWidth","translate","isURL","ig","patternUnits","cssText","safari","stops","getElementsByTagName","cssrule","tuneText","leading","texts","tspan","dy","createTextNode","bb","dif","raphael","transformations","tx","ty","rt","sx","sy","elproto","hide","Infinity","getNumberOfChars","getExtentOfChar","subkey","toFront","toBack","insertAfter","element","nextSibling","fltr","stdDeviation","_blur","removeAttribute","theCircle","theRect","theEllipse","theImage","preserveAspectRatio","theText","setSize","cnvs","xmlns","clear","desc","M","C","Z","bites","blurregexp","coordsize","zoom","pathlike","path2vml","command","vals","isMove","createNode","coordorigin","ol","Path","newpath","rectPath","W","H","setBox","div","clipRect","dstyle","group","filterOpacity","filterMatrix","fontFamily","fontWeight","fontStyle","newfill","newstroke","strokeColor","weight","joinstyle","miterlimit","endcap","dashstyle","bbx","fxfy","method","color2","clrs","colors","focussize","focusposition","Group","gs","os","textpath","Set","runtimeStyle","margin","textpathok","cs","createStyleSheet","addRule","namespaces","rvml","navigator","userAgent","vendor","platform","returnValue","preventTouch","cancelBubble","stopTouch","addEvent","obj","realName","targetTouches","olde","attachEvent","detacher","detachEvent","drag","dragMove","clientX","clientY","documentElement","dragi","touch","_drag","move","move_scope","dragUp","unmousemove","unmouseup","end_scope","start_scope","unbind","hover","f_in","f_out","scope_in","scope_out","mouseover","mouseout","unhover","unmouseover","unmouseout","onmove","onstart","onend","undrag","itemsArray","x_y","resetScale","dx","rcx","rcy","kx","ky","posx","posy","dirx","diry","dkx","dky","ncx","ncy","fr","neww","newh","skip","P0","dim2","curveslengths","getPointAtSegmentLength","totalLength","old","timer","getLengthFactory","istotal","subpath","onlystart","sp","subpaths","point","getTotalLength","getPointAtLength","getSubpathsAtLength","getSubpath","from","to","easing_formulas","linear","backIn","backOut","elastic","bounce","animationElements","animation","Now","time","easing","diff","now","back","upto255","from2","_run","keyframesRun","prevcallback","timeouts","animate","animateWith","animateAlong","animateAlongBack","isBack","CubicBezierAtTime","sampleCurveX","solve","epsilon","solveCurveX","t0","d2","onAnimation","animateable","toColour","pathes","toPath","lastcall","unshift","easyeasy","curve","_ac","ae","pop","collector","box","registerFont","face","fonts","fontcopy","glyphs","family","glyph","getFont","stretch","bold","lighter","bolder","fontName","thefont","print","origin","letter_spacing","out","letters","descent","curr","token","ninja","st","module","KhanColors","BLUE","ORANGE","PINK","GREEN","PURPLE","RED","GRAY","BLACK","LIGHT_BLUE","LIGHT_ORANGE","LIGHT_PINK","LIGHT_GREEN","LIGHT_PURPLE","LIGHT_RED","LIGHT_GRAY","LIGHT_BLACK","GRAY10","GRAY20","GRAY30","GRAY40","GRAY50","GRAY60","GRAY70","GRAY80","GRAY90","BLUE_A","BLUE_B","BLUE_C","BLUE_D","BLUE_E","TEAL_A","TEAL_B","TEAL_C","TEAL_D","TEAL_E","GREEN_A","GREEN_B","GREEN_C","GREEN_D","GREEN_E","GOLD_A","GOLD_B","GOLD_C","GOLD_D","GOLD_E","RED_A","RED_B","RED_C","RED_D","RED_E","MAROON_A","MAROON_B","MAROON_C","MAROON_D","MAROON_E","PURPLE_A","PURPLE_B","PURPLE_C","PURPLE_D","PURPLE_E","MINT_A","MINT_B","MINT_C","GRAY_A","GRAY_B","GRAY_C","GRAY_D","GRAY_E","GRAY_F","GRAY_G","GRAY_H","GRAY_I","KA_BLUE","KA_GREEN","_BACKGROUND","INTERACTING","DYNAMIC","RenderStateRoot","throwIfNested","findChildOrAdd","elem","$child","find","doCallback","tries","check","scrollHeight","processMath","force","$elem","$katexHolder","$mathjaxHolder","script","textContent","reactRender","cleanupMath","MathJax","jax","Hub","getJaxFor","SourceElement","previousSibling","Remove","retrieveMathFormula","Tex","cartToPolar","coord","angleInRadians","theta","atan2","polar","th","GraphUtils","unscaledSvgPath","points","getDistance","point1","point2","distanceToPoint","coordDiff","startCoord","endCoord","snapCoord","snap","findAngle","vertex","graphs","Graphie","labelDirections","center","above","below","SVG_SPECIFIC_STYLE_MASK","createGraphie","xScale","yScale","xRange","yRange","currentStyle","scaleVector","scalePoint","unscalePoint","unscaleVector","setLabelMargins","$span","direction","multipliers","svgPath","alreadyScaled","scaled","svgParabolaPath","computeParabola","xVertex","distToEdge","xPoint","control","svgSinusoidPath","quarterPeriod","computeSine","computeDerivative","coordsForOffset","initial","x0","xCoords","yCoords","zip","numQuarterPeriods","ceil","coords","processAttributes","transformers","pair","processed","transformer","dasherized","addArrowheads","arrows","arrowheadsDrawn","head","graphie","almostTheEnd","drawingTools","radius","corner","dims","shapeRendering","radii","fixedEllipse","maxScale","padding","scaledPoint","scaledRadii","wrapper","localRaphael","visibleShape","arc","startAngle","endAngle","sector","cent","startVector","endVector","startPoint","endPoint","largeAngle","graphiePath","fixedPath","createPath","pathLeft","pluck","pathRight","pathTop","pathBottom","extraOffset","kvector","subtract","transformOrigin","scaledPath","line","parabola","fixedLine","thickness","sinusoid","grid","xr","yr","pad","setPosition","scrollWidth","processText","html","plotParametric","shade","fn2","clipper","clippedFn","clippedFn2","strokeLinejoin","strokeLinecap","paths","lastDiff","lastFlip","u","plotPolar","plot","swapAxes","plotPiecewise","fnArray","rangeArray","self","fnPaths","fnPath","plotEndpointCircles","endpointArray","circles","plotAsymptotes","asymptotes","lastVal","funcVal","init","dimensions","xpixels","ypixels","oldStyle","last","graphInit","gridRange","gridOpacity","axes","axisArrows","axisOpacity","axisCenter","axisLabels","ticks","tickLen","tickOpacity","labels","labelStep","labelOpacity","unityLabels","labelFormat","xLabelFormat","yLabelFormat","smartLabelPositioning","realRange","minusIgnorer","lf","halfWidthTicks","xAxisPosition","yAxisPosition","xShowZero","yShowZero","axisOffCenter","showUnityX","showUnityY","dataPropertyName","touchTargetPropertyName","virtualEventNames","touchEventProps","mouseHookProps","mouseHooks","mouseEventProps","activeDocHandlers","resetTimerID","startX","startY","didScroll","clickBlockList","blockMouseTriggers","blockTouchTriggers","eventCaptureSupported","$document","nextTouchID","lastTouchID","vmouse","moveDistanceThreshold","clickDistanceThreshold","resetTimerDuration","getNativeEvent","createVirtualEvent","eventType","oe","ne","ct","Event","getVirtualBindingFlags","flags","hasVirtualBinding","getClosestElementWithVirtualBinding","enableTouchBindings","disableTouchBindings","enableMouseBindings","disableMouseBindings","startResetTimer","clearResetTimer","triggerVirtualEvent","ve","mouseEventCallback","touchID","isDefaultPrevented","isPropagationStopped","isImmediatePropagationStopped","stopImmediatePropagation","handleTouchStart","handleScroll","handleTouchMove","didCancel","moveThreshold","handleTouchEnd","hasVirtualBindings","ele","bindings","dummyMouseHandler","getSpecialEventObject","realType","substr","setup","namespace","teardown","$this","removeData","cnt","threshold","table","subKey","object","mapObject","lambda","mapObjectFromArray","arr","PASS_TO_RAPHAEL","WrappedDefaults","transformation","getMouseTarget","moveTo","initialPoint","do3dTransform","objective_","attribute","DEFAULT_OPTIONS","mouselayer","shadow","disableMouseEventsOnWrapper","WrappedEllipse","interactiveKindForTesting","touchAction","addToMouseLayerWrapper","addToVisibleLayerWrapper","pointerEvents","WrappedLine","initialStart","initialEnd","normalStyle","initialLength","scaledStart","scaledEnd","polarDiff","polarDegFromCart","lineLength","WrappedPath","sum","clockwise","segments","areas","segment","p1","addPoints","zipped","reverseVector","scaledDistanceFromAngle","exp","scaledPolarRad","radians","scaledPolarDeg","degrees","dragging","InteractiveUtils","bogusShape","addMouseLayer","graph","allowScratchpad","mouselayerZIndex","onMouseDown","onMouseMove","onMouseOver","onMouseOut","canvasClickTarget","isClickingCanvas","getMouseCoord","_mouselayerWrapper","_visiblelayerWrapper","getMousePx","mouseX","mouseY","labelAngle","point3","numArcs","showRightAngleMarker","pushOut","sVertex","p3","halfAngle","sPadding","sRadius","v1","v2","SQRT2","v3","sOffset","sPosition","labelSide","numArrows","midpoint","sMidpoint","parallelAngle","perpendicularAngle","sCumulativeOffset","sSpacing","sHeight","sOffsetVector","sHeightVector","sPath","sStart","sEnd","distance","labelVertex","addMovablePoint","movablePoint","snapX","snapY","pointSize","highlight","visible","bounded","constrainX","constrainY","fixedAngle","fixedDistance","lineStarts","lineEnds","polygonVertices","highlightStyle","labelStyle","vertexLabel","mouseTarget","normalColor","coordX","coordY","applySnapAndConstraints","constrainToBounds","snapPoints","mouse","snapRadians","dist","centerCoord","centerX","centerY","mouseXrel","mouseYrel","outsideArcTanRange","applyConstraint","extraConstraints","override","newCoord","distPoint","constrainedAngle","highlightScale","labeledVertex","drawLabel","grab","doMove","onMove","updateLineEnds","onMoveEnd","onUnhighlight","$mouseTarget","onHighlight","startMouseCoord","isMouse","touchOffset","updateLines","animateTo","coordA","coordZ","setCoord","setCoordConstrained","addMovableLineSegment","lineSegment","tick","extendLine","extendRay","sideLabel","vertexLabels","movePointsWithLine","arrowStyle","pointA","pointZ","tickoffset","visibleLine","syncToPoints","getScaledAngle","scaledA","scaledZ","getClipPoint","xExtent","yExtent","angleVec","cartFromPolarDeg","distVec","normalize","farCoord","scaledAngle","clipPoint","constrainToBoundsOnAngle","createArrow","pv","pvScaled","createCubicPath","unscaledPoints","arrowHead","toCoordAtAngle","_arrows","coordForArrow","angleForArrow","arrow","isClockwise","labeledSide","labeledVertices","mouseOffsetA","mouseOffsetZ","offsetLeft","offsetRight","offsetTop","offsetBottom","dX","dY","addMovablePolygon","polygon","constrainToGraph","pointHighlightStyle","angleLabels","showRightAngleMarkers","sideLabels","updateOnPointMove","closed","isPoint","coordOrPoint","update","scaledCoords","reverse","labeledAngles","labeledSides","numLabels","lastX","lastY","polygonCoords","currentX","currentY","onMoveResult","lower","upper","addMovableAngle","MovableAngle","addCircleGraph","snapRadius","minRadius","centerConstraints","centerNormalStyle","centerHighlightStyle","circleNormalStyle","circleHighlightStyle","centerPoint","circ","perim","setCenter","setRadius","cursorAxes","forEach","cursorName","passive","startRadius","oldRadius","doResize","onResize","onResizeResult","isNumber","onResizeEnd","addRotateHandle","drawRotateHandle","halfWidth","lengthAngle","interacting","getRotateHandlePoint","distanceFromArrowMidline","distFromRotationCenter","vec","absolute","pixels","innerR","outerR","rotatePoint","hideArrow","uniqueId","rotateHandle","addVector","angleDeg","rotatePointPrevCoord","rotateHandlePrevCoord","rotateHandleStartCoord","isRotating","isHovering","drawnRotateHandle","redrawRotateHandle","handleCoord","handleVec","handlePolar","hoverWidth","oldPolar","newPolar","oldAngle","newAngle","oldRemove","addReflectButton","drawButton","buttonCoord","lineCoords","distanceFromCenter","leftStyle","rightStyle","lineDirection","lineVec","centerVec","leftCenterVec","rotateDeg","rightCenterVec","negLineVec","negate","leftVec","rightVec","leftCenter","addVectors","rightCenter","leftCoord1","leftCoord2","rightCoord1","rightCoord2","leftButton","rightButton","button","kline","isFlipped","currentlyDrawnButton","isHighlight","styles","baseStyle","getStyle","isRight","redraw","pointScale","oldButtonRemove","protractor","Protractor","ruler","Ruler","pro","imgPos","arrowHelper","pixelsFromEdge","scaledRadius","scaledCenter","isDragging","setNodes","makeTranslatable","startx","starty","rotateTo","pixelsPerUnit","ticksPerUnit","units","light","leftBottom","graphieUnitsPerUnit","graphieUnitsHeight","rightTop","tickHeight","tickHeightMap","sizes","tickFrequencies","getTickHeight","px","mm","cm","km","in","ft","yd","mi","leftBottomHandle","rightBottomHandle","oldCenter","scaledOldCenter","angleStyle","allowReflex","reflex","_getClockwiseAngle","rays","labeledAngle","addMoveHandlers","addHighlightHandlers","snapDegrees","snapOffsetDeg","angleLabel","tooClose","safeDistance","oldVertex","newVertex","valid","newPoints","oldPoint","newPoint","snapOffset","ray","rawAngle","clockwiseAngle","isReflex","clockwiseReflexive","getClockwiseCoords","shouldChangeReflexivity","prevCoords","prevAngle","prevClockwiseReflexive","GraphieMovable","descriptor","abstractMethod","movableProps","modify","rewriteProps","childrenArray","createClass","spec","GraphieClass","createSimpleClass","addFunction","_elements","_prevProps","FUNCTION_ARRAY_OPTIONS","DEFAULT_PROPS","DEFAULT_STATE","added","isMouseOver","Movable","_createDefaultState","onMoveStart","prevMouseCoord","moveHandler","mouseCoord","upHandler","pointsToFront","standard","prevCoord","paddingPx","absoluteLower","absoluteUpper","ceilTo","floorTo","deltaBounds","boundedDelta","deltaX","updatePoints","actualDelta","static","MovableLine","movable","MovableLineOptions","_initialRefCoord","_prevRefCoord","_totalDelta","refCoord","constrain","onOutOfBounds","MovablePointOptions","tooltip","hasMoved","outOfBounds","tooltipResetFunctions","MovablePoint","_showTooltip","_tooltip","_hideTooltip","showTrashTooltip","svgElem","showHairlines","xOnlyTooltip","content","getElementsByClassName","transformedCoord","hideHairlines","onRemove","_labelCache","_labeledAngles","_labeledSides","_labeledVertices","labelType","MovablePolygonOptions","MovablePolygon","prevRefCoord","Interactive2","addMovableLine","addMaybeMobileMovablePoint","extraProps","commonStyle","showTooltips","GraphieClasses","_getProps","mobileStyleOverride","addedProps","Label","unscaled","JIPT","useJIPT","graphieMovablesJiptLabels","addLabel","tex","Line","Parabola","Sinusoid","Plot","PlotParametric","Point","Arc","Circle","Rect","graphieDivRef","createRef","getGraphie","_graphie","_range","boundsCheckRange","_box","ensureMinSize","pixelDim","_scale","unitDim","_setupGraphie","_removeMovables","graphieDiv","onMouseUp","snapStep","responsive","_movables","_renderMovables","oldMovables","newMovables","renderChildren","areMovablesOutOfOrder","childDescriptor","nextKey","keyProp","prevMovable","modifyResult","movables","_updateMovables","oldMovable","shouldComponentUpdate","Movables","Status","PENDING","LOADING","LOADED","FAILED","ImageLoader","createLoader","destroyLoader","handleLoad","onerror","handleError","status","onLoad","onError","renderImg","imgProps","onKeyUp","staticUrl","onUpdate","preloader","ZOOMABLE_THRESHOLD","labelDataCache","doJSONP","callbackName","success","noop","cleanup","hashRegex","isImageProbablyPhotograph","imageUrl","getLocale","kaLocale","shouldUseLocalizedData","splitHashRegex","getLocalizedDataUrl","base","hash","getUrlHash","defaultPreloader","minWidth","justifyContent","alignContent","CircularSpinner","SvgImage","onDataLoaded","localized","labelsRendered","dict","dataLoaded","labelDataIsLocalized","onImageLoad","sizeProvided","imageLoaded","imageDimensions","setupGraphie","labelData","coordinates","alignment","svgImageJiptLabels","typesetAsMath","labelTop","_tryGetPixels","labelLeft","labelPosition","svgHeight","svgWidth","styleValue","styleName","_handleZoomClick","$image","zoomToFullSizeOnMobile","handleUpdate","loadResources","nextState","wasLoaded","isLoadedInState","nextLoaded","isLoaded","dataCallbacks","cacheData","retrieveData","errorCallback","cause","dataUrl","imageSrc","imageProps","alt","tabIndex","overrideAriaHidden","extraGraphie","preloaderBaseFunc","wrapperClasses","zoomable","_hasRendered","handleRender","onRender","rendered","BaseTeX","Zoomable","_observer","_measuringInitialized","_originalWidth","_node","marginBottomPx","zoomed","compactHeight","expandedHeight","measureAndScaleChildToFit","stopPropagationIfZoomed","handleClickIfZoomed","handleClick","maybeInitializeMeasuring","disconnect","shouldInitialize","readyToMeasure","MutationObserver","mutations","mutation","observe","childList","subtree","attributes","parentBounds","childBounds","computeChildBounds","childWidth","childHeight","animateHeight","property","transitionStyle","transitionProperty","transitionDuration","transitionTimingFunction","translateOffset","scaleString","WebkitTapHighlightColor","onClickCapture","onTouchCancelCapture","onTouchEndCapture","onTouchStartCapture","firstElementChild","computeMathBounds","textElement","textBounds","ZoomableTeX","isRendered","AssetContext","Consumer","activeDefinitionId","setActiveDefinitionId","DefinitionContext","DefinitionProvider","Provider","DefinitionConsumer","ErrorBoundary","componentDidCatch","info","fillRule","_noop","InteractionTracker","trackApi","widgetType","widgetID","setting","_tracked","track","_track","extraData","arrayRules","fence","SimpleMarkdown","defaultRules","order","capture","lang","paragraph","builtArrayParser","parserFor","parseToArray","paragraphedSource","inline","joinFromArray","paragraphs","exclamationIcon","Severity","Lint","_positionTimeout","tooltipAbove","getPosition","getBoundingClientRect","renderLink","severityStyle","warningText","warningTextStyle","severity","indicatorError","publishBlockingError","Warning","indicatorWarning","warning","indicatorGuideline","ruleName","indicator","tooltipParagraph","tail","tailAbove","blockHighlight","insideTable","lintContainer","lintContainerBlock","radioWidgetHoverTarget","inlineHoverTarget","hoverTarget","StyleSheet","backgroundColor","constants","outline","float","alignItems","borderRadius","lineHeight","rules","pureMarkdownRules","columns","react","col1","col2","crowdinId","cloneElement","titledTable","_node$table$content","lint","unwrapTitledTableContents","tableOutput","caption","blockMath","unescapedDollar","link","rel","isKAUrl","codeBlock","isInline","inlineNodeTypes","hasOwnProperty","strong","em","del","code","builtParser","inlineParser","traverseContent","ast","header","cells","getContent","isString","chain","nestedContent","characterCount","parseInline","reactFor","ruleOutput","basicOutput","sanitizeUrl","QuestionParagraph","translationIndex","paragraphIndex","DEBOUNCE_TIMEOUT","TranslationLinter","previousContent","runLinter","debounce","perseusStr","onLintErrorsGenerated","KA","fetch","headers","msgid","msgstr","filename","then","response","json","rejection","applyLintErrors","parsedMarkdown","translationLintErrors","errorText","Rule","ERROR","texCode","smMax","mdMax","containerSizeClass","SMALL","MEDIUM","LARGE","XLARGE","getClassFromWidth","getInteractiveBoxFromSizeClass","sizeClass","DEFAULT_ALIGNMENT","DEFAULT_SUPPORTED_ALIGNMENTS","DEFAULT_STATIC","DEFAULT_TRACKING","DEFAULT_LINTABLE","widgets","editors","registerWidget","registerWidgets","validateAlignments","registerEditors","editorsToRegister","editor","widgetName","getWidget","getEditor","getTransform","getVersion","widgetInfo","getVersionVector","getPublicWidgets","reject","hidden","isAccessible","accessible","getAllWidgetTypes","upgradeWidgetInfoToLatestVersion","oldWidgetInfo","widgetExports","initialVersion","latestVersion","newEditorProps","upgradePropsMap","nextVersion","fromMajorVersion","toMajorVersion","getSupportedAlignments","widgetStatic","graded","getRendererPropsForWidgetInfo","problemNum","getStaticTransform","traverseChildWidgets","traverseRenderer","widgetExport","supportedAlignments","getDefaultAlignment","validAlignments","unknownAlignments","difference","supportsStaticMode","staticTransform","getTracking","tracking","WidgetContainer","widgetProps","initialProps","replaceWidgetProps","newWidgetProps","containerWidth","shouldHighlight","WidgetType","Widgets","console","warn","isStatic","staticContainerStyles","overflow","staticOverlayStyles","highlightLint","Objective","rContainsNonWhitespace","rImageURL","noopOnRender","SHOULD_CLEAR_WIDGETS_PROP_LIST","isIdPathPrefix","prefixArray","wholeArray","Renderer","_currentFocus","_foundTextNodes","_interactionTrackers","_isTwoColumn","_translationLinter","lastRenderedMarkdown","reuseMarkdown","widgetIds","getApiOptions","_getInitialWidgetState","allWidgetInfo","_getAllWidgetsInfo","_getAllWidgetsStartProps","widgetId","newValues","_getDefaultWidgetInfo","widgetIdParts","_getWidgetInfo","renderWidget","impliedType","foundFullWidth","highlightedWidgets","getWidgetProps","PerseusLinter","pushContextStack","reviewModeRubric","reviewMode","interactionTracker","questionCompleted","_onWidgetFocus","_onWidgetBlur","findWidgets","silent","_setWidgetProps","isLastUsedWidget","lastUsedWidgetId","getSerializedState","getWidgetInstance","restoreSerializedState","serializedState","serializedWidgetIds","widgetPropIds","intersection","currentProps","numCallbacks","fireCallback","restoreResult","showRationalesForCurrentlySelectedChoices","deselectIncorrectSelectedChoices","findInternalWidgets","filterCriterion","filterFunc","results","findExternalWidgets","focusPath","_setCurrentFocus","blurPath","blurringFocusPath","fullPath","jiptContent","shouldRenderJiptPlaceholder","replaceJiptContent","codeFenceRegex","allContent","JiptParagraphs","outputMarkdown","oldKey","lastWasString","nodeOut","outputNested","outputNode","nestedOutput","preprocessTex","innerStyle","overflowX","overflowY","paddingTop","outerStyle","horizontalPadding","paddingLeft","paddingRight","mobileInnerStyle","mobileZoomableParentFix","whiteSpace","extraAttrs","images","inTable","PerseusMarkdown","wrappedOutput","oldOnRender","$images","prevFocus","focusResult","widgetFocusResult","getDOMNodeForPath","interWidgetPath","getNode","inputPaths","widgetInputPaths","relativeInputPath","focusWidget","blurWidget","serialize","emptyWidgets","onSerializedStateUpdated","cbResult","onInteractWithWidget","getWidgetIds","getUserInputForWidgets","scoreWidgets","gradedWidgetIds","widgetIsGraded","widgetIsStatic","widgetScores","guessAndScore","totalGuess","totalScore","examples","allEqual","example","handletranslationLintErrors","lintErrors","alwaysUpdate","stateChanged","propsChanged","UNSAFE_componentWillUpdate","oldJipt","newJipt","oldContent","newContent","oldHighlightedWidgets","newHighlightedWidgets","rendererTranslationComponents","removeComponentAtIndex","addComponent","isJipt","legacyPerseusLint","markdownContents","findEndpoint","currentIndex","bracketDepth","parseNextExpression","openBracketIndex","nextExpIndex","endpoint","expressionTeX","parsedExp","walkTex","getNextFracIndex","dfrac","frac","nextFrac","nextDFrac","parsedString","firstParsedExpression","secondParsedExpression","modifyTex","isNestedFraction","exp1","exp2","parseTex","texWithoutFracs","ModifyTex","TexWrangler","MathOutput","selectorNamespace","_getInputClassName","_getDisplayValue","displayText","getValue","_bindBlurHandler","_unbindBlurHandler","$closestWidget","closest","divStyle","textAlign","onTouchStart","lastId","uniqueIdForInput","TextInput","_ReactDOM$findDOMNode","getStringValue","_ReactDOM$findDOMNode2","setSelectionRange","getSelectionStart","getSelectionEnd","disabled","placeholder","formattedValue","TextField","autoCorrect","autoCapitalize","autoComplete","InputWithExamples","showExamples","_getUniqueId","btoa","_getPropsForInputType","inputProps","buttonSet","spellCheck","_getComponentForInputType","_renderInput","InputComponent","handleChange","examplesContent","shouldShowExamples","SimpleKeypadInput","_this","_this$props","_objectWithoutPropertiesLoose","_excluded","FRACTION","keypadElementPropType","oneOfType","ParseTex","answerTypes","rational","formExamples","InputNumber","answerType","rightAlign","inputStyles","default","small","leftAlign","answerStateUnanswered","stringValue","answerString","Spacing","xxxSmall_4","propTransform","answerFormButtons","NumericInput","inputRef","previousValues","_this$props$answerFor","uniq","_this$props$answerFor2","_this$props$answerFor3","noFormsAccepted","answerFormNames","allFormsAccepted","_this$inputRef","_this$inputRef2","_this$inputRef3","answers","answerStrings","useInput","allAnswerForms","stringAnswer","strict","normalizedAnswerExpected","localValue","maybeParsePercentInput","otherAnswers","maybeRightAlignKeypadInput","keypadInput","unionAnswerForms","answerFormsList","uniqueBy","list","iteratee","uniqueList","inList","allForms","flat","uniqueForms","formExampleKeys","inputValue","propsTransform","rendererProps","EN_DASH","PassageRef","_throttledUpdateRange","lineRange","_deferredUpdateRange","_updateRange","passage","passageNumber","refInfo","getReference","referenceNumber","startLine","endLine","lineRangeOutput","$_","lineNumber","summaryOutput","summaryText","summaryTree","throttle","xs","sm","md","lg","xl","xsOrSmaller","smOrSmaller","mdOrSmaller","lgOrSmaller","smOrLarger","mdOrLarger","lgOrLarger","xlOrLarger","perseusInteractive","aboveScratchpad","blankBackground","perseusSrOnly","responsiveLabel","mediaQueries","responsiveInput","WebkitAppearance","appearance","boxSizing","flexShrink","responsiveRadioInput","responsiveRadioInputActive","disableTextSelection","userSelect","HTMLElement","applyUniversalScrollOffset","elementOrWindow","amount","scrollElementToOffset","startPosition","pageYOffset","endPosition","scrollDistance","tickLength","numberOfSteps","scrollInterval","setInterval","newPosition","clearInterval","getScrollContainer","parentElement","SCROLL_ANIMATION_DURATION","scrollElementIntoView","scrollContainer","containerBounds","currentScrollTop","distanceToScroll","BASE_ICON_SIZE","Icon","pathClassName","icon","xMin","yMin","focusable","getA11yText","letter","checked","crossedOut","showCorrectness","FocusRing","multipleSelect","ring","styleConstants","borderWidth","borderStyle","getChoiceLetter","lettersString","CHOICE_ICON_SIZE","iconWrapper","CROSS_OUT_LINE_PADDING","CROSS_OUT_LINE_SIZE","CrossOutLine","crossOutLine","ChoiceInner","getDynamicStyles","pressed","Color","bg","offBlack64","ChoiceIcon","hovered","previouslyAnswered","dynamicStyles","sharedStyles","circleCorrect","circleIncorrect","circleIncorrectAnswered","innerWrapper","renderText","OptionStatus","textStyle","incorrectAnswered","incorrect","textTransform","intermediateCheckboxPadding","intermediateCheckboxPaddingPhone","ellipsisHorizontalIcon","Choice","showRationale","rationale","forwardedRef","isInputFocused","setIsInputFocused","useState","useEffect","sendChange","_newValues$checked","_newValues$crossedOut","updatedChecked","updatedCrossedOut","descriptionClassName","description","rationaleClassName","showDimmed","a11yText","choiceId","dispay","flexDirection","offBlack","htmlFor","Clickable","flex","xSmall_8","small_12","Popover","dismissEnabled","PopoverContent","closeButtonVisible","actions","View","Strut","medium_16","Button","alignSelf","forwardRef","ChoiceNoneAbove","showContent","choiceProps","getInstructionsText","countChoices","numCorrect","BaseRadio","choices","editMode","labelWrap","registerFocusFunction","prevReviewModeRubric","useRef","choiceRefs","checkedIndex","findIndex","anyNode","buttonNode","updateChoice","choiceIndex","newCheckedList","newCrossedOutList","firstChoiceHighlighted","highlighted","lastChoiceHighlighted","radio","responsiveRadioContainer","radioContainerFirstHighlighted","radioContainerLastHighlighted","instructionsClassName","instructions","instructionsMobile","responsiveClassName","responsiveFieldset","fieldset","listStyle","choice","elementProps","hasRationale","isNoneOfTheAbove","revealNoneOfTheAbove","nextChoice","nextChoiceHighlighted","aphroditeClassName","responsiveItem","selectedItem","aboveBackdrop","aboveBackdropMobile","nextHighlighted","correctnessClass","listElem","clickHandler","responsiveContainer","background","Radio","focusFunction","_renderRenderer","nextPassageRefId","modContent","passageNum","refNum","updateChoices","newValueLists","choiceStates","newChoiceStates","selected","rationaleShown","correctnessShown","choiceState","widgetCorrect","newStates","numSelected","choicesSelected","noneOfTheAboveSelected","isCorrect","noneOfTheAboveIndex","originalIndex","valuesLength","fun","choicesProp","reviewChoice","clue","deselectEnabled","ReversedChoices","_choiceTransform","_maybeRandomize","randomize","_addNoneOfAbove","noneOfTheAbove","newChoices","enforceOrdering","some","reversed","Boolean","hasNoneOfTheAbove","selectedChoices","WidgetJsonifyDeprecated","Categorizer","itemNum","catNum","indexedItems","randomizeItems","mobileTable","emptyHeaderCell","categories","category","indexedItem","catName","cell","radioSpan","checkedRadioSpan","staticCheckedRadioSpan","extraClassNames","inlineStyles","fullBleedContainer","completed","allCorrect","pageMargin","editorProps","isFileProtocol","protocol","_cachedClientLocation","parseUrl","URL","toAbsoluteUrl","getUrlFromProgramID","programID","InitialRequestUrl","CSProgram","handleMessageEvent","isUndefined","testsPassed","styleContainer","showEditor","programType","showButtons","sandboxOptions","widthOverride","sandbox","allowFullScreen","Definition","PopoverContentCore","tooltipBody","definition","opened","onClose","placement","togglePrompt","Dropdown","_handleChangeEvent","_handleChange","OptionItem","SingleSelect","selectedValue","optionsTransform","Explanation","expanded","_onClick","linkAnchor","hidePrompt","showPrompt","linkContainer","mobileExplanationLink","disclosureArrow","arrowHeight","arrowWidth","articleLink","explanationLink","exerciseLink","expandedStyle","contentExpandedMobile","contentExpanded","contentMobile","explanation","leftBorderSpacing","verticalContentPadding","textDecoration","srOnly","GradedGroupAnswerBar","answerBarState","onCheckAnswer","onNextQuestion","answerBarStyle","answerBar","offWhite","tryAgainIcon","buttonLabel","offBlack50","GRADING_STATUSES","invalid","getNextState","currentState","answerable","INVALID_MESSAGE_PREFIX","DEFAULT_INVALID_MESSAGE","GradedGroup","showHint","_onInteractWithWidget","renderer","_checkAnswer","newFocus","oldFocus","gradeStatus","mobileClass","inGradedGroupSet","gradedGroupInSet","gradedGroup","classes","a11y","hint","explanationTitle","onKeyPress","showHintLink","hasHint","letterSpacing","Indicators","handleKeyDown","onChangeCurrentGroup","indicatorContainer","gradedGroups","currentGroup","selectedIndicator","GradedGroupSet","_childGroup","handleNextQuestion","numGroups","comp","groups","ButtonGroup","toggleSelect","allowEmpty","buttonStyle","selectedStyle","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","DEFAULT_BACKGROUND_IMAGE","canonicalSineCoefficients","coeffs","amplitude","angularFrequency","phase","verticalOffset","period","canonicalTangentCoefficients","PlotDefaults","areEqual","coeffs1","coeffs2","getPropsForCoeffs","getFunctionForCoeffs","Linear","defaultCoords","getCoefficients","getEquationString","Quadratic","Tangent","Exponential","defaultAsymptote","extraCoordConstraint","oldCoord","asymptote","extraAsymptoteConstraint","isValid","oldY","wasBelow","bottomMost","topMost","allowReflectOverAsymptote","Logarithm","oldX","wasLeft","leftMost","rightMost","flip","inverseCoeffs","AbsoluteValue","horizontalOffset","functionTypeMapping","quadratic","tangent","exponential","logarithm","absolute_value","allTypes","functionForType","grader","guessCoeffs","correctCoeffs","pointsFromNormalized","coordsList","numSteps","unsnappedPoint","currRange","currStep","nSteps","maybePointsFromNormalized","defaultPlotProps","model","chooseType","getGridAndSnapSteps","defaultGraph","backgroundImage","markings","rulerLabel","rulerTicks","defaultPlot","DEFAULT_GRAPHER_PROPS","availableTypes","typeToButton","capitalized","CCW","typeSelectorStyle","FunctionGrapher","_coords","defaultModelCoords","_asymptote","renderPlot","functionProps","renderAsymptote","dashed","strokeDasharray","newAsymptote","proposedAsymptote","pointForCoord","otherCoord","extraConstraint","proposedCoords","reflectOverLine","imageDescription","Grapher","horizHairline","vertHairline","handlePlotChanges","newPlot","handleActiveTypeChange","newType","gridConfig","_calculateMobileTickStep","hairlineStyle","typeSelector","_getGridConfig","grapherProps","grapherValidate","rendererRef","_this$rendererRef","_this$rendererRef2","_this$rendererRef3","_this$rendererRef4","_this$rendererRef5","_this$rendererRef6","_this$rendererRef7","_this$rendererRef8","_this$rendererRef9","_this$rendererRef10","forceUpdate","_this$rendererRef11","groupWidgets","problemNumComponent","isInvalid","Iframe","entries","sandboxProperties","allowTopNavigation","defaultRange","defaultBackgroundImage","editorAlignments","ImageWidget","titleAndCaption","isImageFullWidth","bgImage","KAShashFunc","functionsLength","_parseCache","KASparse","cached","_compileCache","KAScompile","compile","Interaction","variables","_getInitialVariables","_getInitialFunctions","_updatePointLocation","subscript","_updateLineLocation","xDiff","_eval","endX","yDiff","endY","startSubscript","endSubscript","compiledVars","_extractVars","vars","prettyPrint","constraintXMin","constraintXMax","constraintYMin","constraintYMax","constraintFn","varSubscript","foo_x","foo_y","foo_z","varValues","rangeMin","rangeMax","foo_fn","foo_varvalues","plotPoints","foo_fnx","foo_fny","where","startXExpr","startYExpr","eval","endXExpr","endYExpr","funcName","defaultInstructionsStyle","instructionsTextStyle","Graph","_hasSetupGraphieThisUpdate","_shouldSetupGraphie","noSnap","initialMount","invisible","$instructionsWrapper","$instructions","_updateProtractor","_updateRuler","onGraphieUpdated","showProtractor","showRuler","toJSON","potentialChanges","imageData","TRASH_ICON_URI","UNLIMITED","ccw","collinear","defaultVal","actual","defaultValue","pointInRect","intersects","ab","cd","triplets","orientations","triplet","magnitude","dotProduct","sideLengths","angleMeasures","offsets","raw","acos","similar","coords1","coords2","angles1","angles2","sides1","sides2","angles","sides","sidePairs","factors","same","congruentEnough","leq","lawOfCosines","capitalize","getLineEquation","second","getLineIntersection","firstPoints","secondPoints","x4","y4","determinant","showGraph","_getShouldShowInstructions","_isClickToAddPoints","numPoints","numSides","makeInvalidTypeError","functionName","graphType","InteractiveGraph","lines","pointB","pointC","shouldResetGraphie","trashCan","shouldShowInstructions","isClickToAddPoints","setGraphie","newGraphie","handleAddPointsMouseDown","isCoordInTrash","createPointForPointsType","idx","updateCoordsFromPoints","_this$polygon","createPointForPolygonType","updatePolygon","resetGraphie","setTrashCanVisibility","_this$horizHairline","_this$vertHairline","_this$horizHairline2","_this$horizHairline3","_this$vertHairline2","_this$vertHairline3","_this$horizHairline4","_this$vertHairline4","_this$trashCan","_graphie$raphael","_lineStroke","addLine","getLineCoords","lineConfig","removeLine","_this$line","addLinearControls","removeLinearControls","addQuadraticControls","defaultQuadraticCoords","onMoveHandler","updateQuadratic","getCurrentQuadraticCoefficients","_this$graphie","_this$parabola","_this$graphie2","_this$parabola2","_this$parabola3","removeQuadraticControls","_this$pointA","_this$pointB","_this$pointC","addSinusoidControls","defaultSinusoidCoords","updateSinusoid","getCurrentSinusoidCoefficients","_this$graphie3","_this$sinusoid","_this$graphie4","_this$sinusoid2","_this$sinusoid3","removeSinusoidControls","_this$pointA2","_this$pointB2","addCircleControls","minSnap","removeCircleControls","_this$circle","addLinearSystemControls","getLinearSystemCoords","segmentColors","segmentCoords","segmentIndex","segmentPoints","otherSegment","removeLinearSystemControls","screenPoint","pt","removePoint","snapToGrid","_this$polygon2","_this$polygon3","clearCoords","setInitialMove","isInitialMove","onMoveEndHandler","overlappedPoints","pointToRemove","_this$polygon4","_this$polygon5","shouldRemove","_this$polygon7","_this$polygon6","_this$polygon8","isFirstOrLastPoint","pointNotMoved","notANewPoint","polygonNotClosed","allPointsPlotted","canCloseUnclosedPolygon","_this$polygon9","graphConstraint","others","other","_this$graphie5","_this$graphie6","getAngle","innerAngles","knownSide","onLeft","side","outerAngle","_this$graphie7","_this$graphie8","innerAngle","_this$polygon10","addPointControls","getPointCoords","removePointControls","addSegmentControls","getSegmentCoords","createPoint","updateCoordProps","otherPoint","removeSegmentControls","addRayControls","removeRayControls","addPolygonControls","getPolygonCoords","showAngles","showSides","removePolygonControls","_this$polygon11","addAngleControls","getAngleCoords","angleOffsetDeg","allowReflexAngles","_this$angle","removeAngleControls","_this$angle2","toggleShowAngles","toggleShowSides","_this$props$backgroun","_nextProps$background","oldType","areAngleGraphsEqual","arePointGraphsEqual","arePolygonGraphsEqual","areSegmentGraphsEqual","prevGraph","currentGraph","numSegments","getQuadraticCoefficients","getSinusoidCoefficients","newCoords","normalizeCoords","ys","getLinearEquationString","getQuadraticEquationString","getSinusoidEquationString","getCircleEquationString","getLinearSystemEquationString","getPointEquationString","getSegmentEquationString","getRayEquationString","getPolygonEquationString","getAngleEquationString","hasValue","canonicalGuessCoeffs","canonicalCorrectCoeffs","_state$coords","_state$coords2","_rubric$correct$coord","POSITIVE_INFINITY","DEFAULT_TOLERANCE","_rubric$correct$coord2","grayDarker","grayDark","blueDark","yellow","orange","pink","purple","bodyBackground","textColor","linkColor","linkColorHover","sansFontFamily","serifFontFamily","monoFontFamily","baseFontSize","baseLineHeight","altFontFamily","headingsFontFamily","headingsFontWeight","headingsColor","fontSizeLarge","fontSizeSmall","fontSizeMini","paddingLarge","paddingSmall","paddingMini","baseBorderRadius","borderRadiusLarge","borderRadiusSmall","tableBackground","tableBackgroundHover","tableBorder","btnBackground","btnBackgroundHighlight","btnBorder","btnPrimaryBackground","btnPrimaryBackgroundHighlight","btnInfoBackground","btnInfoBackgroundHighlight","btnSuccessBackground","btnSuccessBackgroundHighlight","btnWarningBackground","btnWarningBackgroundHighlight","btnDangerBackground","btnDangerBackgroundHighlight","btnInverseBackground","btnInverseBackgroundHighlight","inputBackground","inputBorder","inputBorderRadius","inputDisabledBackground","formActionsBackground","inputHeight","dropdownBackground","dropdownBorder","dropdownDividerTop","dropdownDividerBottom","dropdownLinkColor","dropdownLinkColorHover","dropdownLinkColorActive","dropdownLinkBackgroundActive","dropdownLinkBackgroundHover","zindexDropdown","zindexPopover","zindexTooltip","zindexFixedNavbar","zindexHeader","zindexModalBackdrop","zindexModal","zindexAboveModal","iconSpritePath","iconWhiteSpritePath","placeholderText","hrBorder","horizontalComponentOffset","wellBackground","navbarCollapseWidth","navbarCollapseDesktopWidth","navbarHeight","navbarBackgroundHighlight","navbarBackground","navbarBorder","navbarText","navbarLinkColor","navbarLinkColorHover","navbarLinkColorActive","navbarLinkBackgroundHover","navbarLinkBackgroundActive","navbarBrandColor","navbarInverseBackground","navbarInverseBackgroundHighlight","navbarInverseBorder","navbarInverseText","navbarInverseLinkColor","navbarInverseLinkColorHover","navbarInverseLinkColorActive","navbarInverseLinkBackgroundHover","navbarInverseLinkBackgroundActive","navbarInverseSearchBackground","navbarInverseSearchBackgroundFocus","navbarInverseSearchBorder","navbarInverseSearchPlaceholderColor","navbarInverseBrandColor","paginationBackground","paginationBorder","paginationActiveBackground","heroUnitBackground","heroUnitHeadingColor","heroUnitLeadColor","warningBackground","warningBorder","errorBackground","errorBorder","successText","successBackground","successBorder","infoText","infoBackground","infoBorder","tooltipColor","tooltipBackground","tooltipArrowWidth","tooltipArrowColor","popoverBackground","popoverArrowWidth","popoverArrowColor","popoverTitleBackground","popoverArrowOuterWidth","popoverArrowOuterColor","gridColumns","gridColumnWidth","gridGutterWidth","gridRowWidth","gridColumnWidth1200","gridGutterWidth1200","gridRowWidth1200","gridColumnWidth768","gridGutterWidth768","gridRowWidth768","fluidGridColumnWidth","fluidGridGutterWidth","fluidGridColumnWidth1200","fluidGridGutterWidth1200","fluidGridColumnWidth768","fluidGridGutterWidth768","kaGreenLight","kaBlue","kaBlueLight","grayExtraDark","grayExtraLight","graySuperLight","whiteDark","dark","blueDarkUnsaturated","blueDarkSaturated","blueLight","greenLight","greenDark","yellowGreen","okGreen","alertRed","coral","grayBlue","lightPageBackground","yclaBlue","yclaTeal","yclaTealDark","yclaGreenDark","yclaGreen","homepageBlue","backgroundBlue","teacherSignupBlue","homepageGreen","streakColor","facebookColor","blueGoogleColor","redGoogleColor","homepageColor","lightTextColor","fontSizeTiny","fontSizeNormal","fontSizeMedium","fontSizeExtraLarge","fontSizeHuge","fontSizeBakana","fontSizeBananas","fixedWidthFontFamily","contentPadding","primaryButtonBackground","primaryButtonBorder","buttonTextColor","buttonBorderRadius","basicBorderColor","minContainerWidth","maxContainerWidth","formHintColor","guidelineExampleText","hoverCardWidth","menuHighlightColor","menuHighlightBorderColor","menuActiveTextColor","menuInactiveTextColor","menuSubheaderTextColor","menuBorderColor","unreadBackgroundColor","menuLineHeight","menuSubheaderLineHeight","menuSubheaderFontSize","notificationBarColor","modalBodyTopPadding","modalDialogPadding","modalSectionPadding","mathDomain1","mathDomain2","mathDomain3","mathDomain4","partnerContentDomain1","partnerContentDomain2","partnerContentDomain3","partnerContentDomain4","csDomain1","csDomain2","csDomain3","csDomain4","economicsDomain1","economicsDomain2","economicsDomain3","economicsDomain4","collegeCareersMoreDomain1","collegeCareersMoreDomain2","collegeCareersMoreDomain3","collegeCareersMoreDomain4","humanitiesDomain1","humanitiesDomain2","humanitiesDomain3","humanitiesDomain4","gtpDomain1","gtpDomain2","gtpDomain3","gtpDomain4","scienceDomain1","scienceDomain2","scienceDomain3","scienceDomain4","testPrepDomain1","testPrepDomain2","testPrepDomain3","testPrepDomain4","defaultDomain1","defaultDomain2","defaultDomain3","defaultDomain4","defaultDomainColor","defaultSubjectColor","defaultTopicColor","defaultHoverColor","defaultLinkColor","defaultLinkHoverColor","scienceDomainColor","scienceSubjectColor","scienceTopicColor","scienceHoverColor","scienceLinkColor","scienceLinkHoverColor","humanitiesDomainColor","humanitiesSubjectColor","humanitiesTopicColor","humanitiesHoverColor","humanitiesLinkColor","humanitiesLinkHoverColor","economicsDomainColor","economicsSubjectColor","economicsTopicColor","economicsHoverColor","economicsLinkColor","economicsLinkHoverColor","csDomainColor","csSubjectColor","csTopicColor","csHoverColor","csLinkColor","csLinkHoverColor","partnerContentDomainColor","partnerContentSubjectColor","partnerContentTopicColor","partnerContentHoverColor","partnerContentLinkColor","partnerContentLinkHoverColor","essayDomainColor","mathDomainColor","mathSubjectColor","mathTopicColor","mathHoverColor","mathLinkColor","mathLinkHoverColor","testPrepDomainColor","testPrepSubjectColor","testPrepTopicColor","testPrepHoverColor","testPrepLinkColor","testPrepLinkHoverColor","collegeCareersMoreDomainColor","collegeCareersMoreSubjectColor","collegeCareersMoreTopicColor","collegeCareersMoreHoverColor","collegeCareersMoreLinkColor","collegeCareersMoreLinkHoverColor","colorProficient","colorPracticed","colorMastery1","colorMastery2","colorMastery3","colorSuggested","colorReview","colorNotStarted","colorStarted","colorStruggling","colorPersonal","colorPractice","colorEnergyPoints","gray72","gray55","gray10","adminGreen","kaBlueExtraLight","kaBlueHover","kaGreenHover","skyDark","recommendationGold","starAced","google","modernGoogle","modernGoogleHover","facebook","modernFacebook","modernFacebookHover","wonderBlocksGold","wonderBlocksLightBlue","breadcrumbs","breadcrumbStyles","MozOsxFontSmoothing","WebkitFontSmoothing","regular","typography","subjectHeadingDesktop","subjectHeadingMobile","conceptHeadingDesktop","conceptHeadingMobile","subheadingDesktop","subheadingMobile","smallSubheadingDesktop","smallSubheadingMobile","smallHeading","smallHeadingMobile","accentHeading","bodyLarge","bodySmall","bodySmallBold","bodyXsmall","bodyXsmallBold","breadcrumb","breadcrumbSmall","labelLarge","labelMedium","labelSmall","desktopScalingOnMobile","MozTextSizeAdjust","MsTextSizeAdjust","WebkitTextSizeAdjust","modalSubtitle","wonderBlocksHeader","wonderBlocksTitle","wonderBlocksLabelLarge","AnswerChoice","_input","focusInput","onFocusPrevAnswer","onFocusNextAnswer","handleInputChange","handleInputFocus","handleInputBlur","renderCheckmark","checkmarkContainer","groupName","inputType","answerId","answerChoice","answerFocused","answerInputWrapper","AnswerChoices","_choices","focusAnswer","numChoices","onAnswerChange","selection","onFocusAnswer","Marker","_icon","isFocused","renderIcon","showSelected","showPulsate","isSelected","innerIcon","iconStyles","markerCorrect","markerCorrectSelected","markerIncorrect","markerIncorrectSelected","markerFilled","markerFilledSelected","markerUnfilledSelected","markerUnfilledPulsate","markerIcon","isDisabled","unstyledButton","marker","markerColor","selectedColor","activeColor","correctColor","correctActiveColor","incorrectColor","incorrectActiveColor","markerShadowColor","lightShadowColor","animationName","animationDirection","animationDuration","animationIterationCount","animationTimingFunction","LabelImage","gradeMarker","hasAnswers","includes","numAnswered","markers","pointInTriangle","b1","b2","b3","imageSideForMarkerPosition","tl","tr","br","bl","cp","triangles","corners","navigateToMarkerIndex","navigateDirection","thisIndex","thisMarker","sortedMarkers","otherMarker","distA","distB","dirA","dirB","_markers","_selectedMarkerPopup","_answerChoices","handleDocumentClick","answerChoices","targetElement","containsEventTarget","depth","dismissMarkerPopup","handleDocumentKeyDown","selectedMarkerIndex","markersInteracted","updatedMarkers","handleMarkerChange","handleMarkerClick","handleMarkerKeyDown","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","handleAnswerChoicesChangeForMarker","multipleAnswers","renderAnswerChoicesForMarker","scrollableChoices","renderMarkers","isNarrowPage","matchMedia","matches","choicesPopover","renderInstructions","hideChoicesFromInstructions","hideChoices","promptString","choicesString","instructionsCaption","instructionsChoices","instructionsChoice","imageAlt","imageWidth","imageHeight","markersCanvas","imageContainer","imageInteractionDisabled","flexWrap","CELL_PADDING","TABLE_STYLE","tableLayout","ROW_STYLE","CELL_STYLE","BASE_TILE_STYLE","MOVE_COUNT_STYLE","RESET_BUTTON_STYLE","MAIN_TILE_SIZE","PATTERNS","plus","iter","Tile","_flip","TileGrid","flipTilesPredicate","oldCells","flipTilesPattern","tileY","tileX","offsetY","offsetX","LightsPuzzle","_currPattern","_nextPattern","_patternIndex","_width","_initNextPatterns","flipPattern","_shiftPatterns","_flipTile","newCells","moveCount","_reset","startCells","tileSize","pxWidth","ngettext","gradeIncompleteAsWrong","transformProps","Layout","ItemState","addOffsetParentScroll","$offsetParent","offsetParent","Placeholder","card","HORIZONTAL","horizontalCard","Draggable","animationFrameRequest","isMouseMoveUpBound","_mounted","startMouse","getCurrentPosition","bindMouseMoveUp","unbindMouseMoveUp","STATIC","loc","requestAnimationFrame","notDragging","DRAGGING","cancelAnimationFrame","includePadding","draggable","VERTICAL","verticalCard","DISABLED","unpaddedCard","ANIMATING","onTouchMove","onTouchEnd","onTouchCancel","complete","onAnimationEnd","finish","Sortable","remeasureItems","clearItemMeasurements","itemsFromProps","texRendererLoaded","measureItems","option","$items","widths","heights","syncWidth","syncHeight","onMeasure","_this$props$constrain","_this$props$constrain2","waitForTexRendererToLoad","Fragment","cards","sortable","isLast","moveOptionToIndex","nextItems","$draggable","$sortable","findWhere","newIndex","midWidth","sumWidth","cardWidth","midHeight","sumHeight","cardHeight","nextAnimationFrame","$placeholder","getOptions","minHeight","listStyleType","HACKY_CSS_CLASSNAME","Matcher","leftHeight","rightHeight","onMeasureLeft","onMeasureRight","moveLeftOptionToIndex","moveRightOptionToIndex","rng","orderMatters","showLabels","cellMarginPx","column","columnLabel","columnRight","linterContextProps","NumberInput","parseInputValue","isFinite","_checkValidity","checkValidity","onFormatChange","_setValue","_onKeyDown","useArrowKeys","mini","restProps","NORMAL_DIMENSIONS","INPUT_MARGIN","INPUT_HEIGHT","INPUT_WIDTH","KEYPAD_INPUT_DIMENSIONS","getInputPath","getDefaultPath","getRowFromPath","getColumnFromPath","getRefForPath","getMatrixSize","matrix","matrixSize","matrixRow","rowWidth","matrixCol","col","Matrix","cursorPosition","enterTheMatrix","maxRows","matrixBoardSize","maxCols","inputID","onValueChange","maxRow","maxCol","curInput","curValueString","cursorStartPosition","cursorEndPosition","nextPath","inputValString","valueLength","cursorRow","cursorCol","highlightedRow","highlightedCol","bracketHeight","bracketOffset","rowVals","outside","MatrixInput","scrollable","numericInput","updatedProps","suffix","supplied","solutionSize","suppliedSize","incorrectSize","hasEmptyCell","validator","blankAnswers","defaultImage","Measurer","createReactClass","protractorX","protractorY","rulerPixels","rulerLength","getDefaultProps","getInitialState","shouldSetupGraphie","v1props","imageTop","imageLeft","drawText","ctx","fillStyle","fgColor","fillText","fontSizePx","drawDoubleLine","Path2D","lineWidth","strokeStyle","lineTo","bgColor","drawTripleLine","drawLine","drawingFuncs","drawItem","ordering","compareElements","item0","item1","bondLength","polarAdd","atomLayout","atom","atoms","bonds","rotationAngle","textValue","baseAngle","prevPositionedAtom","connections","myIndex","baseAngleIncrement","angleIncrement","bond","bondType","idxPath","lastAtomIdx","maybeShrinkLines","fromAtom","toAtom","shrinkFactor","fromPos","toPos","bondLayout","startAndEndPos","idxString","convertTree","tree","treeIdx","toIdx","atomLayoutHelper","outputs","atomProcessingQueue","queuedAtomIdx","bondLayoutHelper","converted","_atomLayout","_bondLayout","_bondLength","_convertTree","smilesRe","atomRe","ParseError","_mset","keylist","k0","newObj","newVal","_inc","acc","elt","smiles","parseBondModifier","firstChar","sliceFromMatchingCloseParen","parenStack","parseParenthesizedExpression","newCtx","parens","inBranchIdx","parenCtx","parenExpr","remainder","readAtomSymbol","_ctx","sym","closingIdx","parseAtom","symbolInfo","restOfMolecule","atomObj","startsWithAtom","isModifierChar","stack","bondModifiers","MoleculeLayout","SmilesParser","borderSize","Molecule","parsedSmiles","stateFromSmiles","setCanvasBounds","xmax","ymax","canvasRender","getContext","clearRect","save","restore","MoleculeWidget","gt","lt","reverseRel","ge","le","toggleStrictRel","formatImproper","formatMixed","formatNonReduced","_label","TickMarks","labelRange","leftLabel","rightLabel","fractions","numDivisions","getDenom","denoms","labelTicks","NumberLine","numDivisionsEmpty","initialX","numLinePosition","divisionRange","snapDivisions","onNumDivisionsChange","divRange","newNumLinePosition","snapNumLinePosition","_handleTickCtrlFocus","_handleTickCtrlBlur","isTickCtrl","_renderGraphie","numberLinePoint","_renderInequality","_renderNumberLinePoint","movePosition","targetPosition","isOpen","mobileDotStyle","isInequality","handleReverse","newRel","handleToggleStrict","_getInequalityEndpoint","isGreater","widthInPixels","buffer","hasFractionalLabels","divRangeString","invalidNumDivisions","inequalityControls","tickCtrl","Input","startRel","correctRel","correctPos","correctX","outsideAllowedRange","isTickCrtl","numberLineTransform","PlaceholderCard","DragHintCard","PropTypePosition","Card","mouseMoveUpBound","floating","startOffset","animating","fakeRef","NORMAL","AUTO","Orderer","placeholderIndex","dragKey","dragContent","dragWidth","dragHeight","offsetPos","grabPos","opt","mousePos","onRelease","inCardBank","isCardInBank","newCard","finalOffset","findCorrectIndex","isHorizontal","$dragList","dragList","leftEdge","topEdge","outerWidth","outerHeight","$bank","bank","draggableOffset","bankOffset","draggableHeight","bankHeight","bankWidth","dragListWidth","draggableWidth","setListValues","sortableCards","anySortableCards","correctOptions","compareRangeBoundaryPoints","whichA","whichB","mode","Range","START_TO_START","END_TO_START","START_TO_END","END_TO_END","compareBoundaryPoints","spanRanges","cloneRange","setEnd","endContainer","endOffset","rangesOverlap","rangesDoNotOverlap","rangeIncludes","rangeIsIncluded","intersectRanges","starter","ender","unionRanges","findBoundaryWordIndex","selectionRange","wordRanges","goal","initialLowerBound","initialUpperBound","bestValidWordIndex","lowerBound","upperBound","iterationCount","mid","rangeComparison","findFirstAndLastWordIndexes","firstWordIndex","lastWordIndex","addHighlight","existingHighlights","newHighlight","newHighlights","mergedDomRange","domRange","mergedFirstWordIndex","mergedLastWordIndex","newMergedDomRange","newMergedHighlight","existingKeys","newKey","createNewUniqueKey","buildHighlight","newHighlightRange","existingHighlightRange","indexes","firstWord","lastWord","deserializeHighlight","serializedHighlight","serializeHighlight","getRelativePosition","parent","getRelativeRect","getClientRectsForTextInRange","mutableRects","addClientRectsForTextInNodeAndRange","commonAncestorContainer","nodeContentsRange","selectNodeContents","nodeType","Node","TEXT_NODE","intersectedRange","addClientRectsForText","ELEMENT_NODE","childNodes","textNode","textRange","computedStyle","parsedLineHeight","boundingRects","getClientRects","boundingRect","heightIncrease","HighlightRenderer","PureComponent","cachedHighlightRects","_computeRects","tooltipIsHovered","clientRects","relativeRects","_rectIsHovered","mouseOffsetPosition","positionWithinRect","isHovered","mouseClientPosition","rects","highlightRect","zIndexes","belowContent","HighlightTooltip","_getFocusRect","focusNode","focusOffset","focusRange","createRange","setStart","focusRect","relativeFocusRect","tooltipLabel","HighlightSetRenderer","hoveredHighlightKey","hoveringTooltipFor","_highlightRenderers","_handleMouseMove","_getHoveredHighlightKey","_updateEditListeners","editable","highlights","wasListening","willListen","highlightKeys","highlightRenderer","_renderTooltip","hoveredHighlight","onRemoveHighlight","highlightKey","SelectionTracker","mouseState","trackedSelection","_handleSelectionChange","_updateTrackedSelection","_handleMouseDown","_handleMouseUp","_updateListeners","enabled","_computeFocusAndRange","getSelection","rangeCount","getRangeAt","collapsed","focusAndRange","proposedHighlight","userIsMouseSelecting","HighlightingUI","_handleAddHighlight","highlightToAdd","onAddHighlight","collapseToEnd","_selectionIsValid","contentNode","contentRange","collapse","contentContainsFocus","selectionIsValid","WordIndexer","_container","_sendWordsUpdate","onWordsUpdate","_getWordRanges","treeWalker","ownerDocument","createTreeWalker","NodeFilter","SHOW_TEXT","SHOW_ELEMENT","FILTER_ACCEPT","trailingWordRange","nextNode","currentNode","nodeValue","wordPattern","wordMatch","newTrailingWordRange","HighlightableContent","_content","newDomHighlights","_getDOMHighlights","newSerializedHighlights","onSerializedHighlightsUpdate","_handleRemoveHighlight","keyToRemove","serializedHighlights","_handleWordsUpdate","_buildHighlight","highlightRange","domHighlights","getInitialParseState","currentRef","useRefs","lastRef","firstSentenceRef","firstQuestionRef","lastFootnote","RefStart","getRefContent","refContent","REF_STYLE","RefEnd","newline","passageFootnote","inlineRegex","footnote","refStart","closeIndex","refNestingLevel","START_REF_PREFIX","refEnd","END_REF_PREFIX","squareLabel","space","LABEL_OUTER_STYLE","SQUARE_LABEL_STYLE","circleLabel","CIRCLE_LABEL_STYLE","squareBracketRef","reviewHighlight","WebkitUserSelect","LineHeightMeasurer","_line","measureLineHeight","measurer","Passage","_contentRef","_lineHeightMeasurerRef","_onResize","_stylesAppiedTimer","nLines","startLineNumbersAfter","stylesAreApplied","_handleSerializedHighlightsUpdate","_updateState","_this$_lineHeightMeas","shouldRenderJipt","_measureLines","_getInitialLineNumber","contentsHeight","_getLineHeight","isPassageBeforeThisPassage","passagesBeforeUs","passageWidget","getLineCount","_this$_lineHeightMeas2","_getStartRefLineNumber","refRef","PassageMarkdown","$ref","$refText","vPos","_convertPosToLineNumber","_getEndRefLineNumber","absoluteVPos","relativeVPos","_getRefContent","refStartLine","refEndLine","_renderInstructions","parseState","firstQuestionNumber","questionSymbol","questionNumber","sentenceSymbol","parsedInstructions","passageText","_renderContent","_hasFootnotes","rawContent","footnotes","_renderFootnotes","lineNumbers","showLineNumbers","lineN","lineAt","translatedLine","doubleQuoteParsedContent","parsedContent","hasTitle","passageTitle","PassageRefTarget","BAR","LINE","PIC","HISTOGRAM","DOTPLOT","scaleY","maxY","snapsPerLine","picSize","pixBoxHeight","picUrl","plotDimensions","labelInterval","starting","Plotter","hairlineRange","categoryHeights","DOT_PLOT_POINT_SIZE","DOT_PLOT_POINT_PADDING","DOT_TICK_POINT_SIZE","pics","dotTicks","isBar","isLine","isPic","isHistogram","isDotplot","isTiledPlot","config","bars","dividers","dimX","barPad","barWidth","picBoxHeight","picBoxWidthPx","picPadAllWidth","picPad","picFullWidth","picBoxWidth","dimY","padX","padTop","padBottom","maxCategoryHeight","initialY","dragPrompt","setupCategories","dotPrompt","drawPicHeights","labelCategory","isTeX","mathyCategory","translateX","rotationDeg","rotationRad","labelRotation","shouldRotate","Promise","resolve","categoryHeightPromises","setupBar","startHeight","setupLine","setupPic","setupDotplot","tickStart","tickEnd","measurements","_clampValue","_maybeShowDragPrompt","_maybeHideDragPrompt","barHalfWidth","scaleBar","leftDivider","rightDivider","divHeight","setupTiledPlot","bottomMargin","createImage","midY","leftX","topY","mouseRect","whichPicClicked","setPicHeight","yCoord","adjustedCoord","newJ","newMidY","newTopY","prevValues","shouldDisplay","ps","pic","wasShown","wasJustShown","paddingForBottomLabel","Separator","arrowLength","drawArrow","lineCap","topText","bottomText","ReactionDiagramWidget","separators","Sequence","_handleInteraction","groupWidgetId","objectOf","oldJson","rendererOptions","triangleBeforeAfter","infoTip","infoTipContainer","infoTipTriangle","verticalShadow","infoTipContentContainer","questionMark","InfoTip","handleMouseEnter","handleMouseLeave","didMount","ReactComponentsInfoTip","maxSampleSize","Histogram","_renderThresholdLine","invisiblePointForCoord","handleMouseInteraction","_renderCircle","numBelow","proportionBelow","plotBelowCircle","plotAboveCircle","formattedThreshold","plotLabel","_renderData","pathForData","isBelow","xWidth","yWidth","maxYAxisEntities","ySkip","maxXAxisEntities","xSkip","axisStyle","topLeft","xMid","xOffset","xAxisLabel","yMid","yOffset","yAxisLabel","_getRangeForData","firstIndex","xMax","yMax","_getInitialThreshold","oldRange","nextRange","bottomRight","Simulator","generateNumber","invalidInput","calculateDisplayProportion","userProportion","proportionOrPercentage","checkProportionValidity","handleUserProportionChange","handleSampleSizeChange","sampleSize","handleRunSimulation","numTrials","generateData","getSampleDistribution","proportion","sampleDistribution","normalizedCount","inputComponent","capitalizedID","inputStyle","unhighlightStyle","proportionInput","sampleSizeInput","numTrialsDisplay","generateTable","proportionLabel","startButton","histogramStyle","histogram","Sorter","changed","marginPx","Table","_getRows","_getColumns","eventOrValue","onHeaderChange","rows","extraInputProps","editableHeaders","Editor","widgetEnabled","defaultRows","defaultColumns","filterNonEmpty","rowSolution","rowSupplied","cellSupplied","cellSolution","ROTATE_SNAP_DEGREES","DEGREE_SIGN","RENDER_TRANSFORM_DELAY_IN_MS","ROTATE_HANDLE_DIST","REFLECT_ROTATE_HANDLE_DIST","REFLECT_BUTTON_SIZE","pluckObject","defaultGraphProps","setProps","defaultTransformerProps","gradeEmpty","graphMode","listMode","tools","required","reflection","dilation","drawSolutionShape","colorForTool","tool","scaleToRange","spreadX","spreadY","dilatePointFromCenter","dilationCenter","transformedPoint","stringFromDecimal","stringFromFraction","texFromPoint","texFromVector","texFromAngleDeg","orderInsensitiveCoordsEqual","coord1","coord2","inputComponentForApiOptions","TransformOps","Transformations","transformList","newTransform","_appendAndCollapseLastTwo","_collapseFinalNoOps","transforms","isNoOp","transform1","transform2","_collapseValidMonotypedTransforms","toTeX","ListItem","TransformClass","_getComponentAtPath","verbName","nounName","lowerNounName","val0","val1","isNull","changePoint","ShapeTypes","getPointCountForType","splitType","addMovableShape","translatable","isMoving","previousCoord","currentPoint","moveVector","normalPointStyle","highlightPointStyle","showPoints","addShape","removeShapeWithoutPoints","types","_typesOf","typeOptions","defaultOptions","shapes","_mapTypes","shapeOptions","_addType","updateFuncs","removeFuncs","shape1","shape2","types1","types2","shapes1","_combine","shapes2","partialShape1","partialShape2","_forType","typeDefaultOptions","baseType","pointCount","currentPoints","perimeter","redrawPerim","coord0","points1","points2","line1_0","line1_2","line2_0","line2_2","equalUnflipped","kray","equalFlipped","radius1","radius2","TransformationListItem","TransformationList","_transformationRefs","focusLast","transformationRefs","transformationList","ToolButton","toggled","ToolsBar","changeSelected","removeTool","addTool","onUndoClick","AddTransformBar","Transformer","currentTool","dilationCircle","toolsBar","addTransformerShape","setTransformations","resetCoords","applyTransform","addTransform","toolId","addTranslationTool","addRotationTool","addReflectionTool","addDilationTool","doTransform","_this$shape","_this$shape2","_self$shape","_self$shape2","normalizeReflectionCoords","messyCoords","origDirectionPolar","directionCoefficient","scaleToCurrentRange","updateReflectionTool","changeTool","reflectPoints","reflectLine","reflectButton","reflectRotateHandle","initRotateHandleAngle","rotateHandleApprox","rotateVector","flipped","pointColor","getRotationTransformFromAngle","_self$rotateHandle","_self$rotatePoint","newRadius","origOnMoveEnd","_self$dilationCircle","angleChanged","roundedAngle","transformFunc","applyCoordTransformation","pointTransform","_this$shape3","_this$shape4","startCoords","handleUndoClick","setTransformationProps","newTransfomationList","changes","newTools","getCoords","getEditorJSON","_this$shape5","_getTransformationForID","transformationID","refPath","innerPaths","fullPaths","innerPath","_passToInner","caller","interactiveToolsMode","ToolsBarClass","isUsed","webpackUniversalModuleDefinition","root","factory","this","modules","installedModules","__webpack_require__","moduleId","exports","getter","configurable","enumerable","__esModule","getDefault","getModuleExports","util","dispatch","lens","ops","_wrapped","thaw","lensArr","_zoomStack","wrapped","deZoom","frame","monocle","shortLens","oldProps","newArr","SignificantFigures","mantissa","positive","sigFigs","sigDecs","parseOrder","parseMantissa","parseSign","displaySigFigs","scientific","decAdd","sigAdd","zeroScientific","useScientific","trailingZeros","returnVal","wholePart","fractPart","needDot","zeros","beginning","seenDot","seenSomething","leadZeros","decPlaces","totalDecs","raised","digits","nextToLast","lastChar","roundUp","nextChar","ALL","countSigfigs","OldUnitInput","_errorTimeout","_showError","$error","_hideError","unitParse","sigfigs","sigfigsCorrect","numericallyCorrect","Var","equality","Eq","Mul","conversion","solveLinearEquationForVariable","toPrecision","kasCorrect","guessUnit","primUnits","answerUnit","accepting","acceptingUnits","unit","thisAnswerUnit","asMul","partition","IS_URL","getYoutubeId","regExp","VideoTranscriptLink","useVideo","_result$data","video","transcriptLink","Text","contentId","DEFAULT_WIDTH","DEFAULT_HEIGHT","KA_EMBED","IS_KA_SITE","Video","embedHostname","host","Interactive","ReactionDiagram","Unit","basicWidgets","extraWidgets","skipMathJax","Config","messageStyle","skipStartupTypeset","availableFonts","imageFont","showMathMenu","Configured","Queue","allWidgets","ItemVersion","ProvideKeypad","keypadStyle","_keypadContainer","Keypad","onElementMounted","onDismiss","unmountComponentAtNode","ArticleRenderer","_handleFocusChange","newFocusPath","oldFocusPath","_onRendererBlur","prevFocusPath","didFocusInput","sectionRef","getDOMNode","activate","dismiss","_sections","useNewStyles","sections","section","refForSection","key_","HintRenderer","lastHint","lastRendered","totalHints","classnames","newHint","lastRenderedNewHint","rendererApiOptions","borderLeftColor","borderLeftStyle","borderLeftWidth","HintsRenderer","isFinalHelpPage","_hintsVisible","hintsVisible","hints","_cacheImagesInHint","_cacheHintImages","hintState","hintRenderer","prevHintsVisible","nextHintsVisible","showGetAnotherHint","hintRatioCopy","mobileHintStylesHintsRenderer","mobileHintStylesHintTitle","linkButton","getAnotherHintButton","mobileHintStylesGetAnotherHintButton","evt","plusText","mobileHintStylesPlusText","getAnotherHintText","hintIndentation","rendererMargins","ItemRenderer","questionRenderer","hintsRenderer","handleInteractWithWidget","withRemoved","questionHighlightedWidgets","initialHintsVisible","controlPeripherals","workArea","workAreaSelector","hintsArea","hintsAreaSelector","answerArea","calculator","periodicTable","zTable","tTable","chi2Table","isAnswerable","savedState","question","toggle","onShowCalculator","onShowPeriodicTable","onShowZTable","onShowTTable","onShowChi2Table","questionAreaInputPaths","getNumHints","scoreInput","maxCompatGuess","keScore","emptyQuestionAreaWidgets","qScore","qGuess","_this$hintsRenderer","_this$hintsRenderer2","onRendered","ServerItemRenderer","_fullyRendered","blurTimeoutID","assetsLoaded","contextValue","hintsContainer","LoadingContext","ArrowPicker","COLORS","LIGHT_COLORS","ColorPicker","lightColors","DashPicker","ElementContainer","initiallyVisible","onUp","onDown","onDelete","VisibleIcon","mask","HiddenIcon","HUD","fixedPosition","hud","hudFixedPosition","MultiButtonGroup","PropCheckBox","labelAlignment","localPropName","_labelAlignLeft","truth","RangeInput","devices","PHONE","TABLET","DESKTOP","lintGutterWidth","perseusFrameBorderWidth","setKeypadElement","setRenderer","setScrollableElement","scrollableElement","deepCallbackFor","contentCallback","widgetCallback","optionsCallback","deepCallback","_upgradedWidgetInfo$v","upgradedWidgetInfo","newWidgetInfo","userWidgetInfo","deepWidgetCallback","modifiedContent","newWidgets","newOptions","userOptions","traverse","contentShape","hintShape","tagsShape","buildArrayShape","elementShape","buildObjectShape","hintsShape","tags","TreeMapperJustForLeaves","setContentMapper","newContentMapper","setHintMapper","newHintMapper","setTagsMapper","newTagsMapper","setArrayMapper","newArrayMapper","TreeMapperForLeavesAndCollections","mapTree","buildMapper","mappers","mappedElements","inner","valueShapes","newObject","buildEmptyItemTreeForShape","__type","buildEmptyItemForShape","treeToItem","findContentNodesInItem","itemTree","itemToTree","findHintNodesInItem","inferItemShape","inferItemTreeShape","_multi","MultiRenderer","rendererDataTreeMapper","getRenderersMapper","_handleSerializedStateUpdated","newState","oldState","_getSerializedState","_makeContentRendererData","_makeHintRendererData","makeRenderer","renderers","_annotateRendererArray","_tryMakeRendererState","rendererDataTree","_makeRendererDataTree","renderError","_getRendererProps","otherProps","refFunc","criterion","_findWidgets","handleSerializedState","callingData","_mapRenderers","leafMapper","mapper","_scoreFromRef","getScores","scores","_data$ref","combinedScore","lastSerializedState","countCallback","_data$ref2","rendererDatas","hintRendererDatas","firstN","_getRenderers","buildPropTypeForShape","buildTreePropTypeForShape","elementPropType","propTypeShape","MultiItems","isUpgradedWidgetInfoRenderableBy","widgetRendererVersion","widgetVersion","isRawWidgetInfoRenderableBy","rendererContentVersion","isRendererContentRenderableBy","isRenderable","isItemRenderableByVersion","itemData","nodeIsRenderable","violatingWidgets","registerAllWidgetsForTesting","EditorJsonify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,cAAe;AACXA,EAAAA,UAAU,EAAE;AACRC,IAAAA,KAAK,EAAE,EAAE;AACTC,IAAAA,KAAK,EAAE,CAAA;GACV;AAEDC,EAAAA,eAAe,EAAE;AACbF,IAAAA,KAAK,EAAE,CAAC;AACRC,IAAAA,KAAK,EAAE,CAAA;AACX,GAAA;AACJ,CAAC;;ACVc,SAAS,QAAQ,GAAG;AACnC,EAAE,QAAQ,GAAG,MAAM,CAAC,MAAM,IAAI,UAAU,MAAM,EAAE;AAChD,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/C,MAAM,IAAI,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;AAChC;AACA,MAAM,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;AAC9B,QAAQ,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;AAC/D,UAAU,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;AACpC,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,OAAO,MAAM,CAAC;AAClB,GAAG,CAAC;AACJ;AACA,EAAE,OAAO,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;AACzC;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAME,UAAU,GAAGA,CAAC;EAChBC,IAAI;EACJC,KAAK;EACLC,MAAM;AACNC,EAAAA,KAAK,EAALA,MAAK,GAAG,EAAE;AACVC,EAAAA,KAAAA;AACa,CAAC,kBACdC,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACIC,EAAAA,IAAI,EAAC,KAAK;AACV,EAAA,aAAA,EAAa,CAACH,KAAM;AACpBD,EAAAA,KAAK,EAAAK,QAAA,CAAA;AAAGC,IAAAA,aAAa,EAAE,QAAA;AAAQ,GAAA,EAAKN,MAAK,CAAE;AAC3CF,EAAAA,KAAK,EAAG,CAAA,EAAEA,KAAK,GAAGC,MAAO,CAAI,EAAA,CAAA;AAC7BA,EAAAA,MAAM,EAAC,KAAK;AACZQ,EAAAA,OAAO,EAAG,CAAA,IAAA,EAAMT,KAAM,CAAA,CAAA,EAAGC,MAAO,CAAA,CAAA;AAAE,CAAA,EAEjC,CAAC,CAACE,KAAK,iBAAIC,KAAA,CAAAC,aAAA,CAAA,OAAA,EAAA,IAAA,EAAQF,KAAK,CAAS,eAClCC,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMK,EAAAA,CAAC,EAAEX,IAAK;AAACY,EAAAA,IAAI,EAAC,cAAA;AAAc,CAAA,CAAG,CAE5C;;ACvDD,IAAIC,aAAqD,GAAG,IAAI,CAAA;AAEzD,MAAMC,eAAe,GAAIC,YAAiC,IAAK;AAClEF,EAAAA,aAAa,GAAGE,YAAY,CAAA;AAChC,CAAC,CAAA;AAEM,MAAMC,eAAe,GAAGA,MAA2B;AACtD,EAAA,IAAIH,aAAa,EAAE;AACf,IAAA,OAAOA,aAAa,CAAA;AACxB,GAAA;AAEA,EAAA,MAAM,IAAII,KAAK,CACX,CACI,sDAAsD,EACtD,qDAAqD,EACrD,yEAAyE,CAC5E,CAACC,IAAI,CAAC,IAAI,CAAC,CACf,CAAA;AACL,CAAC;;;;;;;;ACbD,MAAMC,SAAS,GAAG;AAACC,EAAAA,QAAQ,EAAE,MAAA;AAAM,CAAU,CAAA;AAC7C,MAAMC,WAAW,GAAG;AAACD,EAAAA,QAAQ,EAAE,MAAA;AAAM,CAAU,CAAA;AAC/C,MAAME,SAAS,GAAG;AAACF,EAAAA,QAAQ,EAAE,MAAA;AAAM,CAAU,CAAA;AAS7C;AACA;AACA;AACA;;AAEA,MAAMG,KAA+B,GAAG,CACpC,MAAM,cACFlB,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMkB,EAAAA,GAAG,EAAC,MAAM;AAACrB,EAAAA,KAAK,EAAEkB,WAAAA;AAAY,CAAC,EAAA,GAErC,CAAO,EACP,GAAG,CACN,EACD,MAAM,cACFhB,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMkB,EAAAA,GAAG,EAAC,OAAO;AAACrB,EAAAA,KAAK,EAAEgB,SAAAA;AAAU,CAAA,EAAC,GAEpC,CAAO,EACP,GAAG,CACN;AAED;AACCM,KAAU,IAAK;EACZ,MAAM;AAACC,IAAAA,GAAAA;GAAI,GAAGV,eAAe,EAAE,CAAA;EAC/B,IAAIS,KAAK,CAACE,iBAAiB,EAAE;AACzB,IAAA,OAAO,cACHtB,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,OAAO;AAACrB,MAAAA,KAAK,EAAEgB,SAAAA;KACnBS,EAAAA,IAAI,CAACC,cAAc,CAAC,SAAS,CAAC,CAC7B,EACN,SAAS,CACZ,CAAA;AACL,GAAA;AACA,EAAA,OAAO,cACHxB,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,IAAAA,GAAG,EAAC,OAAO;AAACrB,IAAAA,KAAK,EAAEgB,SAAAA;GACnBS,EAAAA,IAAI,CAACC,cAAc,CAAC,QAAQ,CAAC,CAC5B,EACN,QAAQ,CACX,CAAA;AACL,CAAC,EACD,MAAM;EACF,MAAM;AAACH,IAAAA,GAAAA;GAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,EAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,IAAAA,GAAG,EAAC,MAAM;AAACrB,IAAAA,KAAK,EAAEgB,SAAAA;AAAU,GAAA,EAC5BS,IAAI,CAACC,cAAc,CAAC,cAAc,CAAC,CAClC;AAEN;AACA;AACA;AACCC,EAAAA,KAAU,IAAK;AACZ,IAAA,MAAMC,QAAQ,GAAGD,KAAK,CAACE,KAAK,EAAE,CAAA;AAC9BF,IAAAA,KAAK,CAACG,SAAS,CAAC,GAAG,CAAC,CAAA;AACpB,IAAA,IAAIH,KAAK,CAACE,KAAK,EAAE,KAAKD,QAAQ,EAAE;AAC5BD,MAAAA,KAAK,CAACI,GAAG,CAAC,QAAQ,CAAC,CAAA;AACvB,KAAA;AACJ,GAAC,CACJ,CAAA;AACL,CAAC,CACJ,CAAA;AAED,MAAMC,UAAsB,GAAG;EAC3BZ,KAAK;AAEL,EAAA,WAAW,EAAEA,KAAK,CAACa,MAAM,CAAC,CACtB,MAAM;IACF,MAAM;AAACV,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;AACL,GAAC,CACJ,CAAC;EAEFQ,IAAI,EAAE,CACF,MAAM;IACF,MAAM;AAACX,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,OAAO;AAACrB,MAAAA,KAAK,EAAEmB,SAAAA;KACnBM,EAAAA,IAAI,CAACC,cAAc,CAAC,SAAS,CAAC,CAC7B,EACN,SAAS,CACZ,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;IAC/B,OAAO,cACHX,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMkB,MAAAA,GAAG,EAAC,KAAA;KAENnB,eAAAA,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAMgC,MAAAA,SAAS,EAAC,iBAAA;AAAiB,KAAA,EAC5BV,IAAI,CAACC,cAAc,CAAC,KAAK,CAAC,CACxB,eACPxB,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,IAAI;AAACrB,MAAAA,KAAK,EAAEmB,SAAAA;KAChBM,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAC3B,CACH,EACP,OAAO,CACV,CAAA;AACL,GAAC,CACJ;EAEDU,UAAU,EAAE,CACR,MAAM;IACF,MAAM;AAACb,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,MAAA;KAAQI,EAAAA,IAAI,CAACC,cAAc,CAAC,WAAW,CAAC,CAAO,EACxD,QAAQ,CACX,CAAA;GACJ;AACD;EACA,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,SAAA;KAAWI,EAAAA,IAAI,CAACC,cAAc,CAAC,cAAc,CAAC,CAAO,EAC7DC,KAAU,IAAK;AACZA,MAAAA,KAAK,CAACG,SAAS,CAAC,UAAU,CAAC,CAAA;AAC3BH,MAAAA,KAAK,CAACU,SAAS,CAAC,OAAO,CAAC,CAAA;AAC5B,KAAC,CACJ,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACd,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAK;AAACrB,MAAAA,KAAK,EAAEkB,WAAAA;KACjBO,EAAAA,IAAI,CAACC,cAAc,CAAC,KAAK,CAAC,CACzB,EACLC,KAAU,IAAK;AACZ,MAAA,MAAMC,QAAQ,GAAGD,KAAK,CAACE,KAAK,EAAE,CAAA;AAC9BF,MAAAA,KAAK,CAACG,SAAS,CAAC,GAAG,CAAC,CAAA;;AAEpB;AACA;AACA;AACA,MAAA,IAAIH,KAAK,CAACE,KAAK,EAAE,KAAKD,QAAQ,EAAE;AAC5BD,QAAAA,KAAK,CAACG,SAAS,CAAC,KAAK,CAAC,CAAA;AAC1B,OAAA;AACJ,KAAC,CACJ,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACP,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,IAAI;AAACrB,MAAAA,KAAK,EAAEkB,WAAAA;KAChBO,EAAAA,IAAI,CAACC,cAAc,CAAC,MAAM,CAAC,CAC1B,EACN,MAAM,CACT,CAAA;AACL,GAAC,CACJ;EAEDY,UAAU,EAAE,CACR,MAAM;IACF,MAAM;AAACf,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cAACX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,IAAA;KAAMI,EAAAA,IAAI,CAACC,cAAc,CAAC,MAAM,CAAC,CAAO,EAAE,MAAM,CAAC,CAAA;AACtE,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,OAAA;KAASI,EAAAA,IAAI,CAACC,cAAc,CAAC,SAAS,CAAC,CAAO,EACtDC,KAAK,IAAK;AACPA,MAAAA,KAAK,CAACG,SAAS,CAAC,MAAM,CAAC,CAAA;AACvBH,MAAAA,KAAK,CAACU,SAAS,CAAC,OAAO,CAAC,CAAA;AACxBV,MAAAA,KAAK,CAACG,SAAS,CAAC,GAAG,CAAC,CAAA;AACpBH,MAAAA,KAAK,CAACU,SAAS,CAAC,MAAM,CAAC,CAAA;AACvBV,MAAAA,KAAK,CAACU,SAAS,CAAC,MAAM,CAAC,CAAA;AAC3B,KAAC,CACJ,CAAA;AACL,GAAC,CACJ;EAED,iBAAiB,EAAE,CACf,MAAM;IACF,MAAM;AAACd,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cAACX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,IAAA;AAAI,KAAA,EAAE,GAAG,CAAO,EAAE,GAAG,CAAC,CAAA;AAC3C,GAAC,EACD,MAAM;IACF,MAAM;AAACE,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cAACX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,IAAA;KAAMI,EAAAA,IAAI,CAACC,cAAc,CAAC,MAAM,CAAC,CAAO,EAAE,MAAM,CAAC,CAAA;AACtE,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cAACX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,IAAA;KAAMI,EAAAA,IAAI,CAACC,cAAc,CAAC,MAAM,CAAC,CAAO,EAAE,MAAM,CAAC,CAAA;AACtE,GAAC,CACJ;EAED,oBAAoB,EAAE,CAClB,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;AACL,GAAC,EACD,MAAM;IACF,MAAM;AAACH,MAAAA,GAAAA;KAAI,GAAGV,eAAe,EAAE,CAAA;AAC/B,IAAA,OAAO,cACHX,KAAA,CAAAC,aAAA,CAACoB,GAAG,EAAA;AAACF,MAAAA,GAAG,EAAC,KAAA;KAAOI,EAAAA,IAAI,CAACC,cAAc,CAAC,OAAO,CAAC,CAAO,EACnD,OAAO,CACV,CAAA;GACJ,CAAA;AAET,CAAC,CAAA;AAWD,MAAMa,kBAAkB,GAAGC,SAAS,CAACC,OAAO,CACxCD,SAAS,CAACE,KAAK,CAACC,CAAC,CAACX,UAAU,CAAC,CAACY,IAAI,EAAE,CAAC,CACxC,CAAA;AAED,MAAMC,UAAU,SAAS3C,KAAK,CAAC4C,SAAS,CAAQ;AAI5CC,EAAAA,MAAMA,GAAoB;AACtB;AACA;AACA;AACA,IAAA,MAAMC,gBAAgB,GAAGL,CAAC,CAACM,MAAM,CAAC,IAAI,CAAC3B,KAAK,CAAC4B,IAAI,EAAGC,OAAO;AACvD;IACAR,CAAC,CAACC,IAAI,CAACZ,UAAU,CAAC,CAACoB,OAAO,CAACD,OAAO,CAAC,CACtC,CAAA;AAED,IAAA,MAAME,OAAO,GAAGV,CAAC,CAACK,gBAAgB,CAAC,CAACM,GAAG,CAClCH,OAAO,IAAKnB,UAAU,CAACmB,OAAO,CAAC,CACnC,CAAA;AAED,IAAA,MAAMI,UAAU,GAAGZ,CAAC,CAACU,OAAO,CAAC,CAACC,GAAG,CAAEE,GAAG,IAClCA,GAAG,CAACF,GAAG,CAAEG,OAAO,IAAK;AACjB;AACA,MAAA,MAAMC,MAAM,GAAGD,OAAO,CAAC,IAAI,CAACnC,KAAK,CAAC,CAAA;MAClC,oBACIpB,KAAA,CAAAC,aAAA,CAAA,QAAA,EAAA;AACIwD,QAAAA,OAAO,EAAEA,MAAM,IAAI,CAACrC,KAAK,CAACsC,QAAQ,CAACF,MAAM,CAAC,CAAC,CAAC,CAAE;AAC9CvB,QAAAA,SAAS,EAAC,YAAA;AACV;AAAA;AACAd,QAAAA,GAAG,EAAEqC,MAAM,CAAC,CAAC,CAAC,CAACrC,GAAI;AACnBwC,QAAAA,IAAI,EAAC,QAAA;AAAQ,OAAA,EAEZH,MAAM,CAAC,CAAC,CAAC,CACL,CAAA;AAEjB,KAAC,CAAC,CACL,CAAA;AAED,IAAA,MAAMI,WAAW,GAAGnB,CAAC,CAACY,UAAU,CAAC,CAACD,GAAG,CAAC,CAACE,GAAG,EAAEO,CAAC,KAAK;MAC9C,oBACI7D,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACIgC,QAAAA,SAAS,EAAC,yBAAyB;AACnCd,QAAAA,GAAG,EAAE,IAAI,CAACC,KAAK,CAAC4B,IAAI,CAACa,CAAC,CAAA;AAAE,OAAA,EAEvBP,GAAG,CACF,CAAA;AAEd,KAAC,CAAC,CAAA;IAEF,oBACItD,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;MAAKgC,SAAS,EAAG,GAAE,IAAI,CAACb,KAAK,CAACa,SAAS,IAAI,EAAG,CAAA,gBAAA,CAAA;AAAkB,KAAA,EAC3D2B,WAAW,CACV,CAAA;AAEd,GAAA;AACJ,CAAA;AApDMjB,UAAU,CACLb,UAAU,GAAsBA,UAAU,CAAA;AAD/Ca,UAAU,CAELmB,cAAc,GAAQzB,kBAAkB;;ACzOnD;AACA,MAAM0B,SAAS,SAAS/D,KAAK,CAAC4C,SAAS,CAAe;AAAAoB,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CAElDC,SAAS,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CAQTC,KAAK,GAAU;AAACC,MAAAA,OAAO,EAAE,KAAA;KAAM,CAAA;IAAA,IAiH/BC,CAAAA,WAAW,GAAe,MAAM;MAC5B,IAAI,CAACC,QAAQ,CAAC;AAACF,QAAAA,OAAO,EAAE,IAAA;AAAI,OAAC,CAAC,CAAA;AAC9B;AACA;AACA;AACA;AACA;KACH,CAAA;IAAA,IAEDG,CAAAA,eAAe,GAAgCC,KAAK,IAAK;AACrD;AACA,MAAA,MAAMJ,OAAO,GAAGK,iBAAQ,CAACC,WAAW,CAAC,IAAI,CAAC,CAACC,QAAQ,CAACH,KAAK,CAACI,MAAM,CAAC,CAAA;MACjE,IAAI,CAACV,SAAS,GAAGE,OAAO,CAAA;MACxB,IAAI,CAACA,OAAO,EAAE;QACV,IAAI,CAACE,QAAQ,CAAC;AAACF,UAAAA,OAAO,EAAE,KAAA;AAAK,SAAC,CAAC,CAAA;AACnC,OAAA;KACH,CAAA;IAAA,IAEDS,CAAAA,aAAa,GAA+B,MAAM;AAC9C;AACA;MACA,IAAI,IAAI,CAACX,SAAS,EAAE;QAChB,IAAI,CAACY,KAAK,EAAE,CAAA;AAChB,OAAA;MACA,IAAI,CAACZ,SAAS,GAAG,KAAK,CAAA;KACzB,CAAA;IAAA,IAEDa,CAAAA,UAAU,GAAsCC,CAAC,IAAK;AAClD;AACA;AACA;AACA;MACA,IACI,CAAC,IAAI,CAACd,SAAS;AACf;AACA,MAAA,CAACO,iBAAQ,CAACC,WAAW,CAAC,IAAI,CAAC,CAACC,QAAQ,CAACK,CAAC,CAACC,aAAa,CAAC,EACvD;QACE,IAAI,CAACX,QAAQ,CAAC;AAACF,UAAAA,OAAO,EAAE,KAAA;AAAK,SAAC,CAAC,CAAA;AACnC,OAAA;KACH,CAAA;IAAA,IAEDc,CAAAA,kBAAkB,GAAkB,MAAM;AACtC,MAAA,IAAI,IAAI,CAAC9D,KAAK,CAAC+D,cAAc,KAAK,QAAQ,EAAE;AACxC,QAAA,OAAO,IAAI,CAAA;AACf,OAAA;AACA,MAAA,IAAI,IAAI,CAAC/D,KAAK,CAAC+D,cAAc,KAAK,OAAO,EAAE;AACvC,QAAA,OAAO,KAAK,CAAA;AAChB,OAAA;AACA,MAAA,OAAO,IAAI,CAAChB,KAAK,CAACC,OAAO,CAAA;KAC5B,CAAA;IAAA,IAEDgB,CAAAA,MAAM,GAAyBC,KAAK,IAAK;AACrC;AACA,MAAA,MAAM5D,KAAK,GAAG,IAAI,CAAC6D,SAAS,EAAE,CAAA;AAC9B,MAAA,IAAI7C,CAAC,CAAC4C,KAAK,CAAC,CAACE,UAAU,EAAE,EAAE;QACvBF,KAAK,CAAC5D,KAAK,CAAC,CAAA;OACf,MAAM,IAAI4D,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;AAC1B5D,QAAAA,KAAK,CAACI,GAAG,CAACwD,KAAK,CAAC,CAACP,KAAK,EAAE,CAAA;AAC5B,OAAC,MAAM;AACHrD,QAAAA,KAAK,CAAC+D,KAAK,CAACH,KAAK,CAAC,CAACP,KAAK,EAAE,CAAA;AAC9B,OAAA;MACArD,KAAK,CAACqD,KAAK,EAAE,CAAA;KAChB,CAAA;IAAA,IAEDQ,CAAAA,SAAS,GAAwBG,OAAO,IAAK;AACzC;AACA;AACA;AACA,MAAA,MAAMC,EAAE,GAAGC,SAAS,CAACC,YAAY,CAAC,CAAC,CAAC,CAAA;;AAEpC;AACA;AACA;AACA;AACA;AACA,MAAA,OAAOF,EAAE,CAACG,SAAS,CAACpB,iBAAQ,CAACC,WAAW,CAAC,IAAI,CAACoB,IAAI,CAACC,SAAS,CAAC,EAAEN,OAAO,CAAC,CAAA;KAC1E,CAAA;IAAA,IAEDX,CAAAA,KAAK,GAAe,MAAM;AACtB;AACA,MAAA,IAAI,CAACQ,SAAS,EAAE,CAACR,KAAK,EAAE,CAAA;MACxB,IAAI,CAACR,QAAQ,CAAC;AAACF,QAAAA,OAAO,EAAE,IAAA;AAAI,OAAC,CAAC,CAAA;KACjC,CAAA;IAAA,IAED4B,CAAAA,IAAI,GAAe,MAAM;AACrB;AACA,MAAA,IAAI,CAACV,SAAS,EAAE,CAACU,IAAI,EAAE,CAAA;MACvB,IAAI,CAAC1B,QAAQ,CAAC;AAACF,QAAAA,OAAO,EAAE,KAAA;AAAK,OAAC,CAAC,CAAA;KAClC,CAAA;AAAA,GAAA;AAvMD6B,EAAAA,iBAAiBA,GAAG;IAChBC,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC5B,eAAe,CAAC,CAAA;IAC1D2B,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACtB,aAAa,CAAC,CAAA;IAEtD,IAAIuB,WAAW,GAAG,KAAK,CAAA;;AAEvB;IACA,IAAI,CAACd,SAAS,CAAC;AACX;AACA;AACA;AACAe,MAAAA,YAAY,EAAE,2BAA2B;AAEzC;AACA;AACAC,MAAAA,yBAAyB,EAAE,YAAY;AAEvC;AACA;AACAC,MAAAA,qBAAqB,EAAE,IAAI;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,MAAAA,mBAAmB,EAAE,IAAI;AAEzBC,MAAAA,QAAQ,EAAE;QACNC,MAAM,EAAGpB,SAAS,IAAK;AACnB;AACA;AACA;AACA;AACA,UAAA,IAAID,KAAK,GAAGC,SAAS,CAAC3D,KAAK,EAAE,CAAA;;AAE7B;AACA;UACA0D,KAAK,GAAGA,KAAK,CAACsB,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAA;;AAEpC;AACA;AACA;AACA,UAAA,IAAI,IAAI,CAACvF,KAAK,CAACE,iBAAiB,EAAE;YAC9B+D,KAAK,GAAGA,KAAK,CAACsB,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,CAAA;;AAE3C;AACA;AACA;AACA;AACA;YACA,MAAMC,IAAI,GAAGtB,SAAS,CAACuB,YAAY,CAACC,MAAM,CAACnB,SAAS,CAACoB,CAAC,CAAC,CAAA;AACvD,YAAA,IAAIH,IAAI,IAAIA,IAAI,CAACI,OAAO,KAAK,SAAS,EAAE;AACpC1B,cAAAA,SAAS,CAACuB,YAAY,CAACI,SAAS,EAAE,CAAA;AAClC3B,cAAAA,SAAS,CAACzD,GAAG,CAAC,SAAS,CAAC,CAAA;AAC5B,aAAA;AACJ,WAAC,MAAM;YACHwD,KAAK,GAAGA,KAAK,CAACsB,OAAO,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAA;AAC/C,WAAA;UAEA,IAAIP,WAAW,IAAI,IAAI,CAAChF,KAAK,CAACiE,KAAK,KAAKA,KAAK,EAAE;AAC3C,YAAA,IAAI,CAACjE,KAAK,CAAC8F,QAAQ,CAAC7B,KAAK,CAAC,CAAA;AAC9B,WAAA;SACH;QACD8B,KAAK,EAAEA,MAAM;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACAC,UAAAA,CAAC,CAAC3C,iBAAQ,CAACC,WAAW,CAAC,IAAI,CAACoB,IAAI,CAACC,SAAS,CAAC,CAAC,CAACsB,MAAM,EAAE,CAAA;SACxD;QACDC,OAAO,EAAGhC,SAAS,IAAK;AACpB;AACA;AACA;AACA;AACAA,UAAAA,SAAS,CAAC1D,SAAS,CAAC,GAAG,CAAC,CAAA;AAC5B,SAAA;AACJ,OAAA;AACJ,KAAC,CAAC,CAAA;;AAEF;AACA;AACA;IACA,IAAI,CAAC0D,SAAS,EAAE,CAAC3D,KAAK,CAAC,IAAI,CAACP,KAAK,CAACiE,KAAK,CAAC,CAAA;AAExCe,IAAAA,WAAW,GAAG,IAAI,CAAA;AACtB,GAAA;AAEAmB,EAAAA,oBAAoBA,GAAG;IACnBrB,MAAM,CAACsB,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAACjD,eAAe,CAAC,CAAA;IAC7D2B,MAAM,CAACsB,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC3C,aAAa,CAAC,CAAA;AAC7D,GAAA;;AAEA;AACA;AACA;AACA;AACA;;AA4FAhC,EAAAA,MAAMA,GAAoB;IACtB,IAAIZ,SAAS,GAAGwF,UAAU,CAAC;AACvB,MAAA,oBAAoB,EAAE,IAAI;AAE1B;AACA;AACA,MAAA,mBAAmB,EAAE,IAAI;AACzB,MAAA,cAAc,EAAE,IAAA;AACpB,KAAC,CAAC,CAAA;AAEF,IAAA,IAAI,IAAI,CAACrG,KAAK,CAACa,SAAS,EAAE;MACtBA,SAAS,GAAGA,SAAS,GAAG,GAAG,GAAG,IAAI,CAACb,KAAK,CAACa,SAAS,CAAA;AACtD,KAAA;IAEA,IAAIkB,OAAO,GAAG,IAAI,CAAA;AAClB,IAAA,IAAI,IAAI,CAAC+B,kBAAkB,EAAE,EAAE;AAC3B;AACA/B,MAAAA,OAAO,gBACHnD,KAAA,CAAAC,aAAA,CAAC0C,UAAU,EAAA;AACPK,QAAAA,IAAI,EAAE,IAAI,CAAC5B,KAAK,CAACU,UAAW;AAC5BG,QAAAA,SAAS,EAAC,6BAA6B;AACvCX,QAAAA,iBAAiB,EAAE,IAAI,CAACF,KAAK,CAACE,iBAAkB;QAChDoC,QAAQ,EAAE,IAAI,CAAC0B,MAAAA;OAEtB,CAAA,CAAA;AACL,KAAA;IAEA,oBACIpF,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKH,MAAAA,KAAK,EAAE;AAAC4H,QAAAA,OAAO,EAAE,cAAA;AAAc,OAAA;KAChC1H,eAAAA,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKH,MAAAA,KAAK,EAAE;AAAC4H,QAAAA,OAAO,EAAE,cAAA;AAAc,OAAA;KAChC1H,eAAAA,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AACIgC,MAAAA,SAAS,EAAEA,SAAAA;AACX;AAAA;AACA0F,MAAAA,GAAG,EAAC,WAAW;AACf,MAAA,YAAA,EAAY,IAAI,CAACvG,KAAK,CAACwG,SAAU;MACjCC,OAAO,EAAE,IAAI,CAACxD,WAAY;MAC1ByD,MAAM,EAAE,IAAI,CAAC/C,UAAAA;AAAW,KAAA,CAC1B,CACA,eACN/E,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKH,MAAAA,KAAK,EAAE;AAACiI,QAAAA,QAAQ,EAAE,UAAA;OAAY;MAACD,MAAM,EAAE,IAAI,CAAC/C,UAAAA;KAC5C5B,EAAAA,OAAO,CACN,CACJ,CAAA;AAEd,GAAA;AACJ,CAAA;AAlQMY,SAAS,CAIJiE,YAAY,GAAiB;AAChC3C,EAAAA,KAAK,EAAE,EAAE;AACT/D,EAAAA,iBAAiB,EAAE,KAAK;AACxB6D,EAAAA,cAAc,EAAE,SAAA;AACpB,CAAC;;AC5CL;AAgDA,MAAM8C,MAAM,GAAG,EAAE,CAAA;AAELC,IAAAA,mBAAmB,0BAAnBA,mBAAmB,EAAA;EAAnBA,mBAAmB,CAAA,MAAA,CAAA,GAAA,MAAA,CAAA;EAAnBA,mBAAmB,CAAA,OAAA,CAAA,GAAA,OAAA,CAAA;AAAA,EAAA,OAAnBA,mBAAmB,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AAKnBC,IAAAA,iBAAiB,0BAAjBA,iBAAiB,EAAA;EAAjBA,iBAAiB,CAAA,KAAA,CAAA,GAAA,KAAA,CAAA;EAAjBA,iBAAiB,CAAA,QAAA,CAAA,GAAA,QAAA,CAAA;AAAA,EAAA,OAAjBA,iBAAiB,CAAA;AAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AAe7B,MAAMC,QAAQ,GAAIhH,KAAoB,IAAK;AACvC,EAAA,IAAIiH,UAAU,CAAA;AACd,EAAA,IAAIC,WAAW,CAAA;AACf,EAAA,IAAIC,SAAS,CAAA;AACb,EAAA,IAAIC,YAAY,CAAA;AAEhB,EAAA,MAAMC,OAAO,GAAI,CAAA,EAAErH,KAAK,CAACxB,KAAM,CAAqB,oBAAA,CAAA,CAAA;AACpD,EAAA,IAAIwB,KAAK,CAACsH,mBAAmB,KAAK,OAAO,EAAE;AACvCL,IAAAA,UAAU,GAAGI,OAAO,CAAA;AACxB,GAAC,MAAM;AACHH,IAAAA,WAAW,GAAGG,OAAO,CAAA;AACzB,GAAA;EAEA,MAAME,OAAO,GAAI,CAAA,EAAEvH,KAAK,CAACvB,MAAO,CAAWuB,SAAAA,EAAAA,KAAK,CAACwH,KAAM,CAAC,CAAA,CAAA;AACxD,EAAA,IAAIxH,KAAK,CAACyH,iBAAiB,KAAK,KAAK,EAAE;AACnCN,IAAAA,SAAS,GAAGI,OAAO,CAAA;AACvB,GAAC,MAAM;AACHH,IAAAA,YAAY,GAAGG,OAAO,CAAA;AAC1B,GAAA;EAEA,oBACI3I,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACIH,IAAAA,KAAK,EAAE;AACH4H,MAAAA,OAAO,EAAE,OAAO;AAChB7H,MAAAA,MAAM,EAAE,CAAC;AACTD,MAAAA,KAAK,EAAE,CAAC;AACRmI,MAAAA,QAAQ,EAAE,UAAU;MACpBnB,IAAI,EAAExF,KAAK,CAACwF,IAAI;AAChBkC,MAAAA,GAAG,EAAE1H,KAAK,CAAC,KAAK,CAAC;AACjBiH,MAAAA,UAAU,EAAEA,UAAU;AACtBC,MAAAA,WAAW,EAAEA,WAAW;AACxBC,MAAAA,SAAS,EAAEA,SAAS;AACpBC,MAAAA,YAAY,EAAEA,YAAAA;AAClB,KAAA;GACF,CAAA,CAAA;AAEV,CAAC,CAAA;AAgBD,MAAMO,YAAY,GAAI3H,KAAwB,IAAK;AAC/C;AACA;;AAEA;AACA,EAAA,MAAM4H,KAAK,GAAG5H,KAAK,CAACyH,iBAAiB,KAAK,KAAK,CAAA;AAE/C,EAAA,MAAMI,cAAc,GAAGD,KAAK,GAAG,CAAC,GAAG,CAAC,CAAA;AACpC,EAAA,MAAME,eAAe,GAAGF,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,CAAA;EAEtC,oBACIhJ,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACIH,IAAAA,KAAK,EAAE;AACH4H,MAAAA,OAAO,EAAE,OAAO;MAChBK,QAAQ,EAAE3G,KAAK,CAAC2G,QAAQ;MACxBoB,UAAU,EAAE/H,KAAK,CAAC+H,UAAU;MAC5BvC,IAAI,EAAExF,KAAK,CAACwF,IAAI;AAChBkC,MAAAA,GAAG,EAAE1H,KAAK,CAAC,KAAK,CAAC;AACjBxB,MAAAA,KAAK,EAAEwB,KAAK,CAACxB,KAAK,GAAG,CAAC;AACtBC,MAAAA,MAAM,EAAEuB,KAAK,CAACvB,MAAM,GAAG,CAAC;MACxBuJ,SAAS,EAAE,CAAC,CAAC;MACbC,YAAY,EAAE,CAAC,CAAC;AAChBpB,MAAAA,MAAM,EAAEA,MAAAA;AACZ,KAAA;AAAE,GAAA,eAIFjI,KAAA,CAAAC,aAAA,CAACmI,QAAQ,EAAA;IACLM,mBAAmB,EAAEtH,KAAK,CAACsH,mBAAoB;IAC/CG,iBAAiB,EAAEzH,KAAK,CAACyH,iBAAkB;IAC3CD,KAAK,EAAExH,KAAK,CAACkI,MAAO;AACpB1C,IAAAA,IAAI,EAAE,CAAE;AACRkC,IAAAA,GAAG,EAAEI,eAAgB;AACrBtJ,IAAAA,KAAK,EAAEwB,KAAK,CAACxB,KAAK,GAAG,CAAE;AAAC;AACxBC,IAAAA,MAAM,EAAEuB,KAAK,CAACvB,MAAM,GAAG,CAAA;AAAE,GAAA,CAC3B,eAGFG,KAAA,CAAAC,aAAA,CAACmI,QAAQ,EAAA;IACLM,mBAAmB,EAAEtH,KAAK,CAACsH,mBAAoB;IAC/CG,iBAAiB,EAAEzH,KAAK,CAACyH,iBAAkB;IAC3CD,KAAK,EAAExH,KAAK,CAACwH,KAAM;AACnBhC,IAAAA,IAAI,EAAE,CAAE;AACRkC,IAAAA,GAAG,EAAEG,cAAe;IACpBrJ,KAAK,EAAEwB,KAAK,CAACxB,KAAM;IACnBC,MAAM,EAAEuB,KAAK,CAACvB,MAAAA;AAAO,GAAA,CACvB,CACA,CAAA;AAEd,CAAC,CAAA;AAEDkJ,YAAY,CAACf,YAAY,GAAG;AACxBD,EAAAA,QAAQ,EAAE,UAAU;AACpBoB,EAAAA,UAAU,EAAE,SAAS;AACrBvC,EAAAA,IAAI,EAAE,CAAC;AACPkC,EAAAA,GAAG,EAAE,CAAA;AACT,CAAC,CAAA;AAED,MAAMS,gBAAgB,GAAG;AACrBT,EAAAA,GAAG,EAAE;AACDA,IAAAA,GAAG,EAAE,OAAA;GACR;AACDU,EAAAA,MAAM,EAAE;AACJV,IAAAA,GAAG,EAAE,CAAA;AACT,GAAA;AACJ,CAAU,CAAA;AAEV,MAAMW,kBAAkB,GAAG;AACvB7C,EAAAA,IAAI,EAAE;AACF8C,IAAAA,UAAU,EAAE,CAAA;GACf;AAEDC,EAAAA,KAAK,EAAE;AACHD,IAAAA,UAAU,EAAE,MAAA;AAChB,GAAA;AACJ,CAAU,CAAA;AAEV,MAAME,sBAAsB,GAAG;AAC3BhD,EAAAA,IAAI,EAAE;AACFiD,IAAAA,WAAW,EAAE,CAAC;IACdC,SAAS,EAAGC,SAAS,IAAK,CAAA;GAC7B;AACDJ,EAAAA,KAAK,EAAE;AACHE,IAAAA,WAAW,EAAE,OAAO;AACpBC,IAAAA,SAAS,EAAGC,SAAS,IAAK,CAACA,SAAS,GAAG,CAAA;AAC3C,GAAA;AACJ,CAAU,CAAA;AA4BV,MAAMC,OAAO,SAAShK,KAAK,CAAC4C,SAAS,CAAe;AAAAoB,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CAWhDE,KAAK,GAAU;MACXtE,MAAM,EAAE,IAAI;KACf,CAAA;AAAA,GAAA;;AAEDoG,EAAAA,iBAAiBA,GAAG;IAChB,IAAI,CAACgE,aAAa,EAAE,CAAA;AACxB,GAAA;AAEAC,EAAAA,gCAAgCA,GAAG;AAC/B;IACA,IAAI,CAAC5F,QAAQ,CAAC;AAACzE,MAAAA,MAAM,EAAE,IAAA;AAAI,KAAC,CAAC,CAAA;AACjC,GAAA;AAEAsK,EAAAA,kBAAkBA,GAAG;IACjB,IAAI,CAACF,aAAa,EAAE,CAAA;AACxB,GAAA;EAEAG,iBAAiBA,CAACC,cAAwB,EAAE;AACxC,IAAA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAC1B,EAAE,EACFf,kBAAkB,CAAC,IAAI,CAACrI,KAAK,CAACqJ,kBAAkB,CAAC,EACjDb,sBAAsB,CAAC,IAAI,CAACxI,KAAK,CAACsJ,eAAe,CAAC,EAClDnB,gBAAgB,CAAC,IAAI,CAACnI,KAAK,CAACuJ,gBAAgB,CAAC,CAChD,CAAA;AAED,IAAA,IAAIC,UAAU,CAAA;AACd,IAAA,IAAIC,UAAU,CAAA;AAEd,IAAA,IAAIR,cAAc,EAAE;AAChB;AACAO,MAAAA,UAAU,gBACN5K,KAAA,CAAAC,aAAA,CAAC8I,YAAY,EAAA;QACTF,iBAAiB,EAAEV,iBAAiB,CAAC2C,GAAI;AACzCpC,QAAAA,mBAAmB,EAAE,IAAI,CAACtH,KAAK,CAACsJ,eAAgB;AAChD3C,QAAAA,QAAQ,EAAC,UAAU;AACnBa,QAAAA,KAAK,EAAC,OAAO;AACbU,QAAAA,MAAM,EAAE,IAAI,CAAClI,KAAK,CAAC2J,WAAY;QAC/BnE,IAAI,EAAE0D,QAAQ,CAACR,SAAS,CAAC,IAAI,CAAC1I,KAAK,CAAC2I,SAAS,CAAE;QAC/CjB,GAAG,EAAE,CAAC,IAAI,CAAC1H,KAAK,CAAC2I,SAAS,GAAG,CAAE;AAC/BnK,QAAAA,KAAK,EAAE,IAAI,CAACwB,KAAK,CAAC2I,SAAU;AAC5BlK,QAAAA,MAAM,EAAE,IAAI,CAACuB,KAAK,CAAC2I,SAAU;AAC7B9B,QAAAA,MAAM,EAAEA,MAAAA;OAEf,CAAA,CAAA;;AAED;AACA;AACA4C,MAAAA,UAAU,gBACN7K,KAAA,CAAAC,aAAA,CAAC8I,YAAY,EAAA;QACTF,iBAAiB,EAAEV,iBAAiB,CAAC2C,GAAI;AACzCpC,QAAAA,mBAAmB,EAAE,IAAI,CAACtH,KAAK,CAACsJ,eAAgB;AAChDvB,QAAAA,UAAU,EAAC,QAAQ;AACnBP,QAAAA,KAAK,EAAC,OAAO;AACbU,QAAAA,MAAM,EAAE,IAAI,CAAClI,KAAK,CAAC2J,WAAY;QAC/BnE,IAAI,EAAE0D,QAAQ,CAACR,SAAS,CAAC,IAAI,CAAC1I,KAAK,CAAC2I,SAAS,CAAE;QAC/CjB,GAAG,EAAE,CAAC,CAAE;AACRlJ,QAAAA,KAAK,EAAE,IAAI,CAACwB,KAAK,CAAC2I,SAAU;AAC5BlK,QAAAA,MAAM,EAAE,IAAI,CAACuB,KAAK,CAAC2I,SAAU;AAC7B9B,QAAAA,MAAM,EAAEA,MAAAA;OAEf,CAAA,CAAA;AACL,KAAC,MAAM;AACH2C,MAAAA,UAAU,gBACN5K,KAAA,CAAAC,aAAA,CAAC8I,YAAY,EAAA;QACTF,iBAAiB,EAAEV,iBAAiB,CAAC6C,MAAO;AAC5CtC,QAAAA,mBAAmB,EAAE,IAAI,CAACtH,KAAK,CAACsJ,eAAgB;AAChD9B,QAAAA,KAAK,EAAC,OAAO;AACbU,QAAAA,MAAM,EAAE,IAAI,CAAClI,KAAK,CAAC2J,WAAY;QAC/BnE,IAAI,EAAE0D,QAAQ,CAACR,SAAS,CAAC,IAAI,CAAC1I,KAAK,CAAC2I,SAAS,CAAE;QAC/CjB,GAAG,EAAE,CAAC,CAAE;AACRlJ,QAAAA,KAAK,EAAE,IAAI,CAACwB,KAAK,CAAC2I,SAAU;AAC5BlK,QAAAA,MAAM,EAAE,IAAI,CAACuB,KAAK,CAAC2I,SAAU;AAC7B9B,QAAAA,MAAM,EAAEA,MAAAA;OAEf,CAAA,CAAA;AAED4C,MAAAA,UAAU,GAAG,IAAI,CAAA;AACrB,KAAA;;AAEA;AACR;IACQ,oBACI7K,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACIH,MAAAA,KAAK,EAAE;AACHiI,QAAAA,QAAQ,EAAE,UAAU;AACpBlI,QAAAA,MAAM,EAAE,CAAC;QACT6H,OAAO,EAAE,IAAI,CAACtG,KAAK,CAAC6J,IAAI,GAAG,OAAO,GAAG,MAAA;AACzC,OAAA;KAEAjL,eAAAA,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACI;AACA0H,MAAAA,GAAG,EAAC,kBAAkB;AACtB1F,MAAAA,SAAS,EAAC,kBAAkB;AAC5BnC,MAAAA,KAAK,EAAE;AACHiI,QAAAA,QAAQ,EAAE,UAAU;AACpB;AACA;AACA;AACA;AACAlI,QAAAA,MAAM,EAAE,IAAI,CAACsE,KAAK,CAACtE,MAAM,IAAIqL,SAAS;QACtCtE,IAAI,EAAE0D,QAAQ,CAACZ,UAAAA;AACnB,OAAA;AAAE,KAAA,EAEDkB,UAAU,eAGX5K,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACIgC,MAAAA,SAAS,EAAE,IAAI,CAACb,KAAK,CAACa,SAAAA;AACtB;AAAA;AACA0F,MAAAA,GAAG,EAAC,gBAAgB;AACpB7H,MAAAA,KAAK,EAAE;AACHiI,QAAAA,QAAQ,EAAE,UAAU;AACpBe,QAAAA,GAAG,EAAEwB,QAAQ,CAAC,KAAK,CAAC;QACpB1D,IAAI,EAAE0D,QAAQ,CAACT,WAAW;AAC1BP,QAAAA,MAAM,EAAE,YAAY,GAAG,IAAI,CAAClI,KAAK,CAAC2J,WAAW;AAC7CI,QAAAA,SAAS,EAAE,YAAY,GAAG,IAAI,CAAC/J,KAAK,CAAC2J,WAAW;QAChD9C,MAAM,EAAEA,MAAM,GAAG,CAAA;AACrB,OAAA;AAAE,KAAA,EAGD,IAAI,CAAC7G,KAAK,CAACgK,QAAQ,CAACC,KAAK,CAAC,CAAC,CAAC,CAC3B,EAELR,UAAU,CACT,CACJ,CAAA;AAEd,GAAA;AAEAZ,EAAAA,aAAaA,GAAG;AACZ,IAAA,MAAMqB,gBAAgB,GAAG7G,iBAAQ,CAACC,WAAW;AACzC;AACA,IAAA,IAAI,CAACoB,IAAI,CAACwF,gBAAgB,CACX,CAAA;AACnB,IAAA,MAAMzL,MAAM,GAAGyL,gBAAgB,CAACC,YAAY,CAAA;AAC5C,IAAA,IAAI1L,MAAM,KAAK,IAAI,CAACsE,KAAK,CAACtE,MAAM,EAAE;MAC9B,IAAI,CAACyE,QAAQ,CAAC;AAACzE,QAAAA,MAAAA;AAAM,OAAC,CAAC,CAAA;AAC3B,KAAA;AACJ,GAAA;AAEAgD,EAAAA,MAAMA,GAAG;IACL,MAAMwH,cAAc,GAAG,IAAI,CAACjJ,KAAK,CAACuJ,gBAAgB,KAAK,KAAK,CAAA;;AAE5D;AACA,IAAA,oBACI3K,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA,IAAA,EACKoK,cAAc,IAAI,IAAI,CAACD,iBAAiB,CAACC,cAAc,CAAC,eAIzDrK,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKH,MAAAA,KAAK,EAAE,IAAI,CAACsB,KAAK,CAACoK,oBAAAA;AAAqB,KAAA,EAEvC,IAAI,CAACpK,KAAK,CAACgK,QAAQ,CAAC,CAAC,CAAC,CACrB,EAEL,CAACf,cAAc,IAAI,IAAI,CAACD,iBAAiB,EAAE,CACzC,CAAA;AAEf,GAAA;AACJ,CAAA;;AAEA;AA5KMJ,OAAO,CACFhC,YAAY,GAAiB;AAChC/F,EAAAA,SAAS,EAAE,EAAE;AACb8H,EAAAA,SAAS,EAAE,EAAE;AACbgB,EAAAA,WAAW,EAAE,MAAM;EACnBJ,gBAAgB,EAAExC,iBAAiB,CAAC6C,MAAM;EAC1CP,kBAAkB,EAAEvC,mBAAmB,CAACuD,IAAI;EAC5Cf,eAAe,EAAExC,mBAAmB,CAACuD,IAAI;AACzCD,EAAAA,oBAAoB,EAAE,EAAC;AAC3B,CAAC;;ACrPL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,MAAME,SAAS,GAAG;AACrB/L,EAAAA,IAAI,EAAG,CAAoc,mcAAA,CAAA;AAC3cC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,MAAM,EAAE,EAAA;AACZ,CAAU,CAAA;AACH,MAAM8L,eAAe,GAAG;AAC3BhM,EAAAA,IAAI,EAAE,6HAA6H;AACnIC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,MAAM,EAAE,EAAA;AACZ,CAAU,CAAA;AACH,MAAM+L,eAAe,GAAG;AAC3BjM,EAAAA,IAAI,EAAE,uRAAuR;AAC7RC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,MAAA;AACZ,CAAU,CAAA;AACH,MAAMgM,gBAAgB,GAAG;AAC5BlM,EAAAA,IAAI,EAAE,uRAAuR;AAC7RC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAMiM,UAAU,GAAG;AACtBnM,EAAAA,IAAI,EAAE,wOAAwO;AAC9OC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAMkM,mBAAmB,GAAG;AAC/BpM,EAAAA,IAAI,EAAE,imBAAimB;AACvmBC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAMmM,iBAAiB,GAAG;AAC7BrM,EAAAA,IAAI,EAAE,4lBAA4lB;AAClmBC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAMoM,cAAc,GAAG;AAC1BtM,EAAAA,IAAI,EAAE,6eAA6e;AACnfC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,MAAA;AACZ,CAAU,CAAA;AACH,MAAMqM,WAAW,GAAG;AACvBvM,EAAAA,IAAI,EAAE,6fAA6f;AACngBC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,MAAA;AACZ,CAAU,CAAA;AACH,MAAMsM,iBAAiB,GAAG;AAC7BxM,EAAAA,IAAI,EAAE,sFAAsF;AAC5FC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,MAAM,EAAE,EAAA;AACZ,CAAU,CAAA;AACH,MAAMuM,mBAAmB,GAAG;AAC/BzM,EAAAA,IAAI,EAAE,ihBAAihB;AACvhBC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,MAAA;AACZ,CAAU,CAAA;AACV;AACO,MAAMwM,QAAQ,GAAG;AACpB1M,EAAAA,IAAI,EAAE,gvBAAgvB;AACtvBC,EAAAA,KAAK,EAAE,IAAI;AACXC,EAAAA,MAAM,EAAE,IAAA;AACZ,CAAU,CAAA;AACH,MAAMyM,eAAe,GAAG;AAC3B3M,EAAAA,IAAI,EAAE,4lBAA4lB;AAClmBC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAM0M,MAAM,GAAG;AAClB5M,EAAAA,IAAI,EAAE,8RAA8R;AACpSC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,MAAA;AACZ,CAAU,CAAA;AACH,MAAM2M,QAAQ,GAAG;AACpB7M,EAAAA,IAAI,EAAE,6XAA6X;AACnYC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAM4M,UAAU,GAAG;AACtB9M,EAAAA,IAAI,EAAE,ueAAue;AAC7eC,EAAAA,KAAK,EAAE,GAAG;AACVC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAM6M,QAAQ,GAAG;AACpB/M,EAAAA,IAAI,EAAE,6kBAA6kB;AACnlBC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,MAAM,EAAE,EAAA;AACZ,CAAU,CAAA;AACH,MAAM8M,YAAY,GAAG;AACxBhN,EAAAA,IAAI,EAAE,22BAA22B;AACj3BC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,MAAM,EAAE,EAAA;AACZ,CAAU,CAAA;AACH,MAAM+M,UAAU,GAAG;AACtBjN,EAAAA,IAAI,EAAE,ufAAuf;AAC7fC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAMgN,SAAS,GAAG;AACrBlN,EAAAA,IAAI,EAAE,m/BAAm/B;AACz/BC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,MAAM,EAAE,GAAA;AACZ,CAAU,CAAA;AACH,MAAMiN,QAAQ,GAAG;AACpBnN,EAAAA,IAAI,EAAE,kiBAAkiB;AACxiBC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,MAAM,EAAE,EAAA;AACZ,CAAU,CAAA;AACH,MAAMkN,SAAS,GAAG;AACrBpN,EAAAA,IAAI,EAAG,CAA6J,4JAAA,CAAA;AACpKC,EAAAA,KAAK,EAAE,EAAE;AACTC,EAAAA,MAAM,EAAE,EAAA;AACZ,CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClHV;AACA;AACA;;AAEA;AACA;AACA;MACamN,MAAM,GAAGzC,MAAM,CAAC0C,MAAM,CAAC;AAChC;AACJ;AACA;AACIC,EAAAA,OAAO,EAAE,SAAS;AAClB;AACJ;AACA;AACIC,EAAAA,QAAQ,EAAE,UAAU;AACpB;AACJ;AACA;AACA;AACIC,EAAAA,YAAY,EAAE,cAAc;AAC5B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,EAAAA,UAAU,EAAE,YAAY;AACxB;AACJ;AACA;AACA;AACIC,EAAAA,gBAAgB,EAAE,kBAAkB;AACpC;AACJ;AACA;AACA;AACIC,EAAAA,OAAO,EAAE,SAAA;AACb,CAAC,EAAC;;AAEF;AACA;AACA;;AA+BO,MAAMC,GAAY,GAAG;AACxB;AACAC,EAAAA,GAAG,EAAEA,CAACC,OAAe,EAAEC,KAAuB,KAAK;IAC/ChN,eAAe,EAAE,CAAC6M,GAAG,CAACC,GAAG,CAACC,OAAO,EAAEC,KAAK,CAAC,CAAA;GAC5C;AAED;AACAC,EAAAA,KAAK,EAAEA,CAIHF,OAAe,EACfG,IAAe,EACfF,KAAuB,KACtB;IACDhN,eAAe,EAAE,CAAC6M,GAAG,CAACI,KAAK,CAACF,OAAO,EAAEG,IAAI,EAAEF,KAAK,CAAC,CAAA;AACrD,GAAA;AACJ;;ACzFO,MAAMG,YAAY,SAASlN,KAAK,CAAC;AAIpCoD,EAAAA,WAAWA,CAAC0J,OAAe,EAAEG,IAAe,EAAEpI,OAAiB,EAAE;IAC7D,KAAK,CAACiI,OAAO,CAAC,CAAA;AAAC,IAAA,IAAA,CAJnBG,IAAI,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACJE,QAAQ,GAAA,KAAA,CAAA,CAAA;IAIJ,IAAI,CAACF,IAAI,GAAGA,IAAI,CAAA;AAChB,IAAA,IAAI,CAACE,QAAQ,GAAGtI,OAAO,IAAPA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,OAAO,CAAEsI,QAAQ,CAAA;AACrC,GAAA;AACJ;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,QAAQ,GAAG;AACb;AACA;AACA,KAAK,EACL,KAAK;AACL;AACA,oBAAoB,EACpB,UAAU,EACV,UAAU,EACV,YAAY,EACZ,YAAY,EACZ,mBAAmB,EACnB,aAAa;AACb;AACA;AACA,UAAU;AACV;AACA,IAAI;AACJ;AACA,QAAQ,EACR,SAAS,EACT,kBAAkB,EAClB,eAAe,EAClB;AAEM,MAAMC,mBAAmB,GAAI7M,KAAU,IAAU;AACpD,EAAA,MAAM8M,QAAQ,GAAA/N,QAAA,CAAA,EAAA,EAAOiB,KAAK,CAAU,CAAA;AACpC,EAAA,KAAK,MAAM+M,IAAI,IAAIH,QAAQ,EAAE;IACzB,IAAIG,IAAI,IAAID,QAAQ,EAAE;MAClB,OAAOA,QAAQ,CAACC,IAAI,CAAC,CAAA;AACzB,KAAA;AACJ,GAAA;AACA,EAAA,OAAOD,QAAQ,CAAA;AACnB,CAAC;;AC7CD;AAoBA,MAAME,KAAK,GACP,UAAU,GACV,2CAA2C,GAC3C,2CAA2C,GAC3C,2BAA2B,CAAA;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,eAAe,GAAG,SAAlBA,eAAeA,CACjBC,SAAc,EACdJ,QAKO,EACPK,QAAQ,EACV;AACE;AACA;AACA;AACA;AACA;EACA,MAAMC,SAAS,GAAG/L,CAAC,CAACgM,IAAI,CAACH,SAAS,CAAClN,KAAK,EAAEsN,QAAoB,CAAC,CAAA;EAC/D,MAAMC,SAAS,GAAGlM,CAAC,CAACmM,MAAM,CAACJ,SAAS,EAAEN,QAAQ,CAAC,CAAA;EAC/CI,SAAS,CAAClN,KAAK,CAAC8F,QAAQ,CAACyH,SAAS,EAAEJ,QAAQ,CAAC,CAAA;AACjD,CAAC,CAAA;;AAED;AACA;AACA;AACA,MAAMM,aAAa,GAAG,SAAhBA,aAAaA,CACfP,SAAc,EACdQ,QAAgB,EAChBzJ,KAAU,EACVkJ,QAAQ,EACV;EACE,IAAIlJ,KAAK,KAAK6F,SAAS,EAAE;AACrB;AACA;IACA,OAAOzI,CAAC,CAACsM,OAAO,CAACF,aAAa,EAAEP,SAAS,EAAEQ,QAAQ,CAAC,CAAA;AACxD,GAAA;AACA;AACA;EACA,MAAMZ,QAA6B,GAAG,EAAE,CAAA;AACxCA,EAAAA,QAAQ,CAACY,QAAQ,CAAC,GAAGzJ,KAAK,CAAA;AAC1BgJ,EAAAA,eAAe,CAACC,SAAS,EAAEJ,QAAQ,EAAEK,QAAQ,CAAC,CAAA;AAClD,CAAC,CAAA;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMS,MAAgB,GAAG,SAAnBA,MAAgBA,CACzBC,wBAAwB,EACxBC,SAAS,EACTX,QAAQ,EACV;EACE,IAAI9L,CAAC,CAAC0M,QAAQ,CAACF,wBAAwB,CAAC,IAAIV,QAAQ,KAAKrD,SAAS,EAAE;AAChE;AACAqD,IAAAA,QAAQ,GAAGW,SAAS,CAAA;AACpB,IAAA,OAAOb,eAAe;AAClB;AACA,IAAA,IAAI,EACJY,wBAAwB;AAAE;AAC1BV,IAAAA,QAAQ,CACX,CAAA;AACL,GAAA;AACA,EAAA,IAAI,OAAOU,wBAAwB,KAAK,QAAQ,EAAE;AAC9C;AACA,IAAA,OAAOJ,aAAa;AAChB;AACA,IAAA,IAAI,EACJI,wBAAwB;AAAE;IAC1BC,SAAS,EACTX,QAAQ,CACX,CAAA;AACL,GAAA;EACA,MAAM,IAAIT,YAAY,CAClB,uCAAuC;AACnC;AACArL,EAAAA,CAAC,CAAC2M,OAAO,CAACC,SAAS,CAAC,CAACxO,IAAI,EAAE,GAC3B,IAAI,GACJuN,KAAK,EACTpB,MAAM,CAACG,QAAQ,CAClB,CAAA;AACL,CAAC,CAAA;AAEM,MAAMmC,SAAS,GAAG;AACrBpI,EAAAA,QAAQ,EAAE5E,SAAS,CAACiN,IAAI,CAACC,UAAAA;AAC7B,CAAU;;;;;;;;AC1HV;AAOA,MAAMC,cAAmC,GAAG,EAAE,CAAA;AAC9C,SAASC,YAAYA,CAACC,IAAS,EAAE;AAC7B,EAAA,IAAI,CAACF,cAAc,CAACE,IAAI,CAAC,EAAE;AACvB;AACA,IAAA,MAAMC,KAAK,GAAGxI,CAAC,CAAC,QAAQ,CAAC,CAACuI,IAAI,CAACA,IAAI,CAAC,CAACE,QAAQ,CAAC,MAAM,CAAC,CAAA;AACrD;IACAJ,cAAc,CAACE,IAAI,CAAC,GAAGC,KAAK,CAAChQ,KAAK,EAAE,GAAG,CAAC,CAAA;IACxCgQ,KAAK,CAACE,MAAM,EAAE,CAAA;AAClB,GAAA;EACA,OAAOL,cAAc,CAACE,IAAI,CAAC,CAAA;AAC/B,CAAA;AAEA,MAAMI,cAAc,SAAS/P,KAAK,CAAC4C,SAAS,CAAW;AAAAoB,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CAYnDE,KAAK,GAAQ;MACT6L,KAAK,EAAE,IAAI,CAAC5O,KAAK,CAACqE,OAAO,CAAC1D,MAAM,CAAC,EAAE,CAAA;KACtC,CAAA;AAAA,IAAA,IAAA,CAyCDmF,QAAQ,GAGI,CAAC+I,KAAK,EAAEzL,KAAK,KAAK;MAC1B,IAAIwL,KAAK,GAAGvN,CAAC,CAACyN,KAAK,CAAC,IAAI,CAAC/L,KAAK,CAAC6L,KAAK,CAAC,CAAA;MACrCA,KAAK,CAACC,KAAK,CAAC,GAAGzL,KAAK,CAACI,MAAM,CAACS,KAAK,CAAA;AAEjC,MAAA,IAAI4K,KAAK,KAAKD,KAAK,CAACG,MAAM,GAAG,CAAC,EAAE;AAC5BH,QAAAA,KAAK,GAAGA,KAAK,CAACjO,MAAM,CAAC,EAAE,CAAC,CAAA;AAC5B,OAAA;MAEA,IAAI,CAACuC,QAAQ,CAAC;AAAC0L,QAAAA,KAAK,EAAEA,KAAAA;AAAK,OAAC,CAAC,CAAA;MAC7B,IAAI,CAAC5O,KAAK,CAAC8F,QAAQ,CAACzE,CAAC,CAAC2N,OAAO,CAACJ,KAAK,CAAC,CAAC,CAAA;KACxC,CAAA;AAAA,IAAA,IAAA,CAEDK,SAAS,GAAsD,CAC3DJ,KAAK,EACLzL,KAAK,KACJ;AACD,MAAA,MAAM8L,KAAK,GAAG9L,KAAK,CAAC+L,WAAW,CAACC,OAAO,CAAA;;AAEvC;AACA,MAAA,IAAIF,KAAK,KAAK,CAAC,oBAAoB,IAAI,CAACnM,KAAK,CAAC6L,KAAK,CAACC,KAAK,CAAC,KAAK,EAAE,EAAE;QAC/DzL,KAAK,CAACiM,cAAc,EAAE,CAAA;QAEtB,MAAMT,KAAK,GAAGvN,CAAC,CAACyN,KAAK,CAAC,IAAI,CAAC/L,KAAK,CAAC6L,KAAK,CAAC,CAAA;QACvC,MAAMU,UAAU,GAAGT,KAAK,KAAK,CAAC,GAAG,CAAC,GAAGA,KAAK,GAAG,CAAC,CAAA;AAE9C,QAAA,IACIA,KAAK,KAAKD,KAAK,CAACG,MAAM,GAAG,CAAC,KACzBF,KAAK,KAAK,CAAC,IAAID,KAAK,CAACU,UAAU,CAAC,KAAK,EAAE,CAAC,EAC3C;AACE;AACA;AACA;AACAjM,UAAAA,iBAAQ,CAACC,WAAW,CAAC,IAAI,CAACoB,IAAI,CAAC,QAAQ,GAAG4K,UAAU,CAAC,CAAC,CAAC5L,KAAK,EAAE,CAAC;AACnE,SAAC,MAAM;AACHkL,UAAAA,KAAK,CAACW,MAAM,CAACV,KAAK,EAAE,CAAC,CAAC,CAAA;UACtB,IAAI,CAAC3L,QAAQ,CAAC;AAAC0L,YAAAA,KAAK,EAAEA,KAAAA;AAAK,WAAC,EAAE,YAAY;AACtC;AACAvL,YAAAA,iBAAQ,CAACC,WAAW;AAChB;AACA;AACA,YAAA,IAAI,CAACoB,IAAI,CAAC,QAAQ,GAAG4K,UAAU,CAAA;AAC/B;aACH,CAAC5L,KAAK,EAAE,CAAA;AACb,WAAC,CAAC,CAAA;AACN,SAAA;;AAEA;AACA;AACJ,OAAC,MAAM,IACHwL,KAAK,KAAK,CAAC,oBACX,IAAI,CAACnM,KAAK,CAAC6L,KAAK,CAACC,KAAK,CAAC,CAACE,MAAM,KAAK,CAAC,IACpCF,KAAK,KAAK,IAAI,CAAC9L,KAAK,CAAC6L,KAAK,CAACG,MAAM,GAAG,CAAC,EACvC;QACE3L,KAAK,CAACiM,cAAc,EAAE,CAAA;QAEtB,MAAMT,KAAK,GAAGvN,CAAC,CAACyN,KAAK,CAAC,IAAI,CAAC/L,KAAK,CAAC6L,KAAK,CAAC,CAAA;AACvCA,QAAAA,KAAK,CAACW,MAAM,CAACV,KAAK,EAAE,CAAC,CAAC,CAAA;QACtB,IAAI,CAAC3L,QAAQ,CAAC;AAAC0L,UAAAA,KAAK,EAAEA,KAAAA;AAAK,SAAC,CAAC,CAAA;QAC7B,IAAI,CAAC5O,KAAK,CAAC8F,QAAQ,CAACzE,CAAC,CAAC2N,OAAO,CAACJ,KAAK,CAAC,CAAC,CAAA;;AAErC;AACJ,OAAC,MAAM,IAAIM,KAAK,KAAK,EAAE,cAAc;QACjC9L,KAAK,CAACiM,cAAc,EAAE,CAAA;QAEtB,MAAMT,KAAK,GAAGvN,CAAC,CAACyN,KAAK,CAAC,IAAI,CAAC/L,KAAK,CAAC6L,KAAK,CAAC,CAAA;AACvC,QAAA,MAAMU,UAAU,GAAGT,KAAK,GAAG,CAAC,CAAA;AAE5B,QAAA,IAAIA,KAAK,KAAKD,KAAK,CAACG,MAAM,GAAG,CAAC,EAAE;AAC5B;AACA;AACA1L,UAAAA,iBAAQ,CAACC,WAAW,CAAC,IAAI,CAACoB,IAAI,CAAC,QAAQ,GAAG4K,UAAU,CAAC,CAAC,CAAC5L,KAAK,EAAE,CAAC;AACnE,SAAC,MAAM;UACHkL,KAAK,CAACW,MAAM,CAACD,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,CAAA;UAC/B,IAAI,CAACpM,QAAQ,CAAC;AAAC0L,YAAAA,KAAK,EAAEA,KAAAA;AAAK,WAAC,EAAE,YAAY;AACtC;AACAvL,YAAAA,iBAAQ,CAACC,WAAW;AAChB;AACA;AACA,YAAA,IAAI,CAACoB,IAAI,CAAC,QAAQ,GAAG4K,UAAU,CAAA;AAC/B;aACH,CAAC5L,KAAK,EAAE,CAAA;AACb,WAAC,CAAC,CAAA;AACN,SAAA;AACJ,OAAA;KACH,CAAA;AAAA,GAAA;EA9HDoF,gCAAgCA,CAACyE,SAAc,EAAE;IAC7C,IAAI,CAACrK,QAAQ,CAAC;AACV0L,MAAAA,KAAK,EAAErB,SAAS,CAAClJ,OAAO,CAAC1D,MAAM,CAAC,EAAE,CAAA;AACtC,KAAC,CAAC,CAAA;AACN,GAAA;AAEAc,EAAAA,MAAMA,GAAoB;AACtB,IAAA,MAAMZ,SAAS,GAAG,CACd,0BAA0B,EAC1B,kBAAkB,EAClB,SAAS,GAAG,IAAI,CAACb,KAAK,CAACwP,MAAM,CAChC,CAAC/P,IAAI,CAAC,GAAG,CAAC,CAAA;AAEX,IAAA,MAAMgQ,MAAM,GAAGpO,CAAC,CAACW,GAAG,CAChB,IAAI,CAACe,KAAK,CAAC6L,KAAK,EAChB,UAAUc,IAAI,EAAEjN,CAAC,EAAE;MACf,oBACI7D,KAAA,CAAAC,aAAA,CAAA,IAAA,EAAA;AAAIkB,QAAAA,GAAG,EAAE0C,CAAAA;OACL7D,eAAAA,KAAA,CAAAC,aAAA,CAAA,OAAA,EAAA;QACI0H,GAAG,EAAE,QAAQ,GAAG9D,CAAE;AAClBF,QAAAA,IAAI,EAAC,MAAM;AACX0B,QAAAA,KAAK,EAAEyL,IAAAA;AACP;AACA;AAAA;QACA5J,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC6J,IAAI,CAAC,IAAI,EAAElN,CAAC,CAAA;AACpC;AACA;AAAA;QACAwM,SAAS,EAAE,IAAI,CAACA,SAAS,CAACU,IAAI,CAAC,IAAI,EAAElN,CAAC,CAAE;AACxC/D,QAAAA,KAAK,EAAE;UAACF,KAAK,EAAE8P,YAAY,CAACoB,IAAI,CAAA;AAAC,SAAA;AAAE,OAAA,CACrC,CACD,CAAA;KAEZ,EACD,IAAI,CACP,CAAA;IAED,oBAAO9Q,KAAA,CAAAC,aAAA,CAAA,IAAA,EAAA;AAAIgC,MAAAA,SAAS,EAAEA,SAAAA;AAAU,KAAA,EAAE4O,MAAM,CAAM,CAAA;AAClD,GAAA;AA0FJ,CAAA;AA/IMd,cAAc,CACTT,SAAS,GAAG;EACf7J,OAAO,EAAEnD,SAAS,CAAC0O,KAAK;EACxBJ,MAAM,EAAEtO,SAAS,CAAC2O,MAAM;AACxB/J,EAAAA,QAAQ,EAAE5E,SAAS,CAACiN,IAAI,CAACC,UAAAA;AAC7B,CAAC,CAAA;AALCO,cAAc,CAOT/H,YAAY,GAAQ;AACvBvC,EAAAA,OAAO,EAAE,EAAE;AACXmL,EAAAA,MAAM,EAAE,YAAA;AACZ,CAAC;;AC7BL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,MAAMM,WAAW,GAAG,EAAE,CAAA;AAEtB,MAAMC,aAAa,SAASnR,KAAK,CAAC4C,SAAS,CAAM;AAY7CC,EAAAA,MAAMA,GAAoB;AACtB,IAAA,oBACI7C,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA,IAAA,EACK,IAAI,CAACmB,KAAK,CAACgQ,SAAS,iBACjBpR,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKH,MAAAA,KAAK,EAAE;AAACiB,QAAAA,QAAQ,EAAE,EAAA;AAAE,OAAA;AAAE,KAAA,EAAC,OAAK,CACpC,eAKDf,KAAA,CAAAC,aAAA,CAAC8P,cAAc,EAAA;AACXtK,MAAAA,OAAO,EAAE,IAAI,CAACrE,KAAK,CAACiE,KAAK,IAAI6L,WAAY;AACzCN,MAAAA,MAAM,EAAC,UAAU;AACjB1J,MAAAA,QAAQ,EAAE,IAAI,CAAC9F,KAAK,CAAC8F,QAAAA;AAAS,KAAA,CAChC,CACA,CAAA;AAEd,GAAA;AACJ,CAAA;AA9BMiK,aAAa,CACR7B,SAAS,GAAG;EACfjK,KAAK,EAAE/C,SAAS,CAACC,OAAO,CAACD,SAAS,CAAC2O,MAAM,CAAC;AAC1C/J,EAAAA,QAAQ,EAAE5E,SAAS,CAACiN,IAAI,CAACC,UAAU;AACnC4B,EAAAA,SAAS,EAAE9O,SAAS,CAAC+O,IAAI,CAAC7B,UAAAA;AAC9B,CAAC,CAAA;AALC2B,aAAa,CAORnJ,YAAY,GAAQ;AACvB3C,EAAAA,KAAK,EAAE6L,WAAW;AAClBE,EAAAA,SAAS,EAAE,IAAA;AACf,CAAC;;AC9BL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQO,MAAME,UAAU,GAAG;AACtBhC,EAAAA,SAAS,EAAEhN,SAAS,CAACiP,KAAK,CAAC;AACvBC,IAAAA,SAAS,EAAElP,SAAS,CAAC+O,IAAI,CAAC7B,UAAU;AAEpCiC,IAAAA,YAAY,EAAEnP,SAAS,CAACiN,IAAI,CAACC,UAAU;AACvCkC,IAAAA,aAAa,EAAEpP,SAAS,CAACiN,IAAI,CAACC,UAAU;AACxCmC,IAAAA,mBAAmB,EAAErP,SAAS,CAACiN,IAAI,CAACC,UAAU;AAC9CoC,IAAAA,oBAAoB,EAAEtP,SAAS,CAAC+O,IAAI,CAAC7B,UAAU;AAC/CqC,IAAAA,QAAQ,EAAEvP,SAAS,CAAC+O,IAAI,CAAC7B,UAAU;IAEnCsC,kBAAkB,EAAExP,SAAS,CAACiN,IAAI;IAClCwC,cAAc,EAAEzP,SAAS,CAACiN,IAAI;IAC9ByC,mBAAmB,EAAE1P,SAAS,CAACiN,IAAI;AAEnC;AACA;AACA;AACA;AACA;AACA0C,IAAAA,cAAc,EAAE3P,SAAS,CAACiN,IAAI,CAACC,UAAU;AAEzC;AACA;IACA0C,gBAAgB,EAAE5P,SAAS,CAAC6P,IAAI;IAChCC,iBAAiB,EAAE9P,SAAS,CAAC6P,IAAI;AAEjC;AACA;AACA;AACA;AACAE,IAAAA,YAAY,EAAE/P,SAAS,CAACiP,KAAK,CAAC;AAC1B;AACA;MACAe,IAAI,EAAEhQ,SAAS,CAACiN,IAAAA;AACpB,KAAC,CAAC;AAEF;AACA;IACAgD,cAAc,EAAEjQ,SAAS,CAACiN,IAAI;AAE9B;AACA;AACA;AACA;IACAiD,gBAAgB,EAAElQ,SAAS,CAACiN,IAAI;AAEhC;AACA;AACA;AACA;AACA;IACAkD,YAAY,EAAEnQ,SAAS,CAAC+O,IAAI;AAE5B;AACA;AACA;AACA;AACA;AACA;IACAqB,iBAAiB,EAAEpQ,SAAS,CAACiN,IAAI;AAEjC;IACAoD,QAAQ,EAAErQ,SAAS,CAAC+O,IAAI;AAExB;AACA;AACA;IACAuB,uBAAuB,EAAEtQ,SAAS,CAACiN,IAAI;AAEvC;IACAsD,cAAc,EAAEvQ,SAAS,CAAC+O,IAAI;AAE9B;IACAyB,iBAAiB,EAAExQ,SAAS,CAAC2O,MAAM;AAEnC;AACA;AACA;AACA;AACA;AACA;IACA8B,aAAa,EAAEzQ,SAAS,CAAC+O,IAAI;AAE7B;IACA2B,OAAO,EAAE1Q,SAAS,CAAC+O,IAAI;AAEvB;AACA;AACA;AACA;AACA;AACA;IACA4B,eAAe,EAAE3Q,SAAS,CAAC+O,IAAI;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA6B,iBAAiB,EAAE5Q,SAAS,CAAC6Q,MAAAA;GAChC,CAAC,CAAC3D,UAAU;AAEb4D,EAAAA,QAAQ,EAAE;AACN5B,IAAAA,SAAS,EAAE,KAAK;AAChBmB,IAAAA,QAAQ,EAAE,KAAK;AACflB,IAAAA,YAAY,EAAE,YAAY,EAAE;AAC5BC,IAAAA,aAAa,EAAE,YAAY,EAAE;AAC7BC,IAAAA,mBAAmB,EAAER,aAAa;AAClCS,IAAAA,oBAAoB,EAAE,KAAK;AAC3BC,IAAAA,QAAQ,EAAE,KAAK;IACfI,cAAc,EAAE,YAAkB;AAC9B,MAAA,OAAO,IAAI,CAAA;KACd;AACDI,IAAAA,YAAY,EAAE;MACVC,IAAI,EACAlR,KAAU,IACsC;AAChD,QAAA,oBAAOpB,KAAA,CAAAC,aAAA,CAAA,GAAA,EAAOmB,KAAK,CAAI,CAAA;AAC3B,OAAA;KACH;AACDwR,IAAAA,uBAAuB,EAAE,YAAY,EAAE;AACvCC,IAAAA,cAAc,EAAE,KAAK;AACrBE,IAAAA,aAAa,EAAE,KAAK;AACpBC,IAAAA,OAAO,EAAE,KAAK;AACdC,IAAAA,eAAe,EAAE,KAAK;AACtBC,IAAAA,iBAAiB,EAAE,CAAA;AACvB,GAAA;AACJ,EAAU;AAEH,MAAMG,UAAU,GAAG;AACtBC,EAAAA,QAAQ,EAAE,kBAAkB;AAC5BC,EAAAA,mBAAmB,EAAE,8BAA8B;AACnDC,EAAAA,mBAAmB,EAAE,6BAA6B;AAClDC,EAAAA,KAAK,EAAE,eAAe;AACtBC,EAAAA,OAAO,EAAE,iBAAiB;AAC1BC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAE,sBAAsB;AAC9BC,IAAAA,QAAQ,EAAE,wBAAwB;AAClCC,IAAAA,cAAc,EAAE,8BAAA;GACnB;AACDC,EAAAA,WAAW,EAAE,qBAAqB;AAClCC,EAAAA,OAAO,EAAE,iBAAiB;AAC1BC,EAAAA,SAAS,EAAE,mBAAmB;AAC9BC,EAAAA,UAAU,EAAE,oBAAoB;AAChCC,EAAAA,MAAM,EAAE,gBAAA;AACZ;;ACrLA,MAAMC,QAAQ,GAAG;AACb;AACAC,EAAAA,SAAS,EAAE,UAAUC,IAAY,EAAU;AACvC,IAAA,OAAO,OAAOA,IAAI,KAAK,QAAQ,GACzBA,IAAI,CACC3N,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CACxBA,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CACvBA,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,GACxB2N,IAAI,CAAA;GACb;AAED;AACAC,EAAAA,KAAK,EAAE,UAAUC,GAAW,EAAU;IAClC,IAAIA,GAAG,KAAK,CAAC,EAAE;AACX,MAAA,OAAOA,GAAG,CAAA;AACd,KAAA;IACA,IAAIA,GAAG,GAAG,CAAC,EAAE;AACT,MAAA,OAAO,CAACJ,QAAQ,CAACG,KAAK,CAAC,CAACC,GAAG,CAAC,CAAA;AAChC,KAAA;AACA,IAAA,OAAOC,IAAI,CAACC,GAAG,CAAC,IAAI,EAAED,IAAI,CAACE,GAAG,CAACH,GAAG,EAAE,IAAI,CAAC,CAAC,CAAA;GAC7C;AAEDI,EAAAA,SAAS,EAAE,UAAUC,CAAS,EAAU;IACpC,IAAIA,CAAC,IAAI,CAAC,EAAE;AACR,MAAA,OAAOA,CAAC,CAAA;AACZ,KAAA;IACA,OAAOA,CAAC,GAAGT,QAAQ,CAACQ,SAAS,CAACC,CAAC,GAAG,CAAC,CAAC,CAAA;GACvC;AAEDC,EAAAA,MAAM,EAAE,UAAUC,CAAS,EAAEC,CAAS,EAAU;AAC5C,IAAA,IAAI3F,SAAS,CAACc,MAAM,GAAG,CAAC,EAAE;AACtB;AACA;MACA,MAAM8E,IAAI,GAAG,EAAE,CAAC5J,KAAK,CAAC6J,IAAI,CAAC7F,SAAS,EAAE,CAAC,CAAC,CAAA;AACxC;AACA,MAAA,OAAO+E,QAAQ,CAACU,MAAM,CAACC,CAAC,EAAEX,QAAQ,CAACU,MAAM,CAAC,GAAGG,IAAI,CAAC,CAAC,CAAA;AACvD,KAAA;AACA,IAAA,IAAIE,GAAG,CAAA;AAEPJ,IAAAA,CAAC,GAAGN,IAAI,CAACW,GAAG,CAACL,CAAC,CAAC,CAAA;AACfC,IAAAA,CAAC,GAAGP,IAAI,CAACW,GAAG,CAACJ,CAAC,CAAC,CAAA;AAEf,IAAA,OAAOA,CAAC,EAAE;MACNG,GAAG,GAAGJ,CAAC,GAAGC,CAAC,CAAA;AACXD,MAAAA,CAAC,GAAGC,CAAC,CAAA;AACLA,MAAAA,CAAC,GAAGG,GAAG,CAAA;AACX,KAAA;AAEA,IAAA,OAAOJ,CAAC,CAAA;GACX;AAEDM,EAAAA,MAAM,EAAE,UAAUN,CAAS,EAAEC,CAAS,EAAU;AAC5C,IAAA,IAAI3F,SAAS,CAACc,MAAM,GAAG,CAAC,EAAE;AACtB;AACA;MACA,MAAM8E,IAAI,GAAG,EAAE,CAAC5J,KAAK,CAAC6J,IAAI,CAAC7F,SAAS,EAAE,CAAC,CAAC,CAAA;AACxC;AACA,MAAA,OAAO+E,QAAQ,CAACiB,MAAM,CAACN,CAAC,EAAEX,QAAQ,CAACiB,MAAM,CAAC,GAAGJ,IAAI,CAAC,CAAC,CAAA;AACvD,KAAA;AACA,IAAA,OAAOR,IAAI,CAACW,GAAG,CAACL,CAAC,GAAGC,CAAC,CAAC,GAAGZ,QAAQ,CAACU,MAAM,CAACC,CAAC,EAAEC,CAAC,CAAC,CAAA;GACjD;EAEDM,MAAM,EAAE,CACJ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EACtE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CACzB;AAEDC,EAAAA,OAAO,EAAE,UAAUC,CAAS,EAAW;IACnC,IAAIA,CAAC,IAAI,CAAC,EAAE;AACR,MAAA,OAAO,KAAK,CAAA;AAChB,KAAA;IACA,IAAIA,CAAC,GAAG,GAAG,EAAE;AACT,MAAA,OAAO,CAAC,CAACpO,CAAC,CAACqO,IAAI,CAACrB,QAAQ,CAACkB,MAAM,EAAE,UAAUI,CAAC,EAAE7R,CAAC,EAAE;QAC7C,OAAO4Q,IAAI,CAACW,GAAG,CAACM,CAAC,GAAGF,CAAC,CAAC,IAAI,GAAG,CAAA;OAChC,CAAC,CAACrF,MAAM,CAAA;AACb,KAAA;AACA,IAAA,IAAIqF,CAAC,IAAI,CAAC,IAAKA,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,KAAK,CAAE,EAAE;AAClC,MAAA,OAAO,KAAK,CAAA;AAChB,KAAA;IACA,KAAK,IAAI3R,CAAC,GAAG,CAAC,EAAE8R,IAAI,GAAGlB,IAAI,CAACkB,IAAI,CAACH,CAAC,CAAC,EAAE3R,CAAC,IAAI8R,IAAI,EAAE9R,CAAC,IAAI,CAAC,EAAE;AACpD,MAAA,IAAI2R,CAAC,GAAG3R,CAAC,KAAK,CAAC,EAAE;AACb,QAAA,OAAO,KAAK,CAAA;AAChB,OAAA;AACJ,KAAA;AAEA,IAAA,OAAO,IAAI,CAAA;GACd;AACD;AACA+R,EAAAA,qBAAqB,EAAE,UAAUzC,MAAc,EAAyB;IACpE,IAAIA,MAAM,KAAK,CAAC,EAAE;AACd,MAAA,OAAO,EAAE,CAAA;AACb,KAAA;AACA,IAAA,IAAIiB,QAAQ,CAACmB,OAAO,CAACpC,MAAM,CAAC,EAAE;MAC1B,OAAO,CAACA,MAAM,CAAC,CAAA;AACnB,KAAA;AAEA,IAAA,MAAM0C,IAAI,GAAGpB,IAAI,CAACkB,IAAI,CAACxC,MAAM,CAAC,CAAA;IAC9B,KAAK,IAAI2C,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAID,IAAI,EAAEC,CAAC,EAAE,EAAE;AAC5B,MAAA,IAAI3C,MAAM,GAAG2C,CAAC,KAAK,CAAC,EAAE;AAClB,QAAA,OAAO1O,CAAC,CAAC2O,KAAK,CACV3B,QAAQ,CAACwB,qBAAqB,CAACE,CAAC,CAAC,EACjC1B,QAAQ,CAACwB,qBAAqB,CAACzC,MAAM,GAAG2C,CAAC,CAAC,CAC7C,CAAA;AACL,OAAA;AACJ,KAAA;GACH;AAED;AACA;AACA;AACAE,EAAAA,cAAc,EAAE,UAAUC,SAAiB,EAAEzB,GAAW,EAAU;IAC9D,OAAOC,IAAI,CAACyB,KAAK,CAAC1B,GAAG,GAAGyB,SAAS,CAAC,GAAGA,SAAS,CAAA;GACjD;AAED;AACAE,EAAAA,OAAO,EAAE,UAAUC,SAAiB,EAAE5B,GAAW,EAAU;AACvD,IAAA,MAAM6B,MAAM,GAAG5B,IAAI,CAAC6B,GAAG,CAAC,EAAE,EAAEF,SAAS,CAAC,CAACG,OAAO,CAAC,CAAC,CAAC,CAAA;AACjD;AACA,IAAA,OAAO9B,IAAI,CAACyB,KAAK,CAAC,CAAC1B,GAAG,GAAG6B,MAAM,EAAEE,OAAO,CAAC,CAAC,CAAC,CAAC,GAAGF,MAAM,CAAA;GACxD;AAED;AACJ;AACA;AACA;AACIG,EAAAA,aAAa,EAAE,UAAUhC,GAAW,EAAE4B,SAAiB,EAAU;AAC7D;AACA,IAAA,MAAMK,QAAQ,GAAGjC,GAAG,CAAC+B,OAAO,CAACH,SAAS,CAAC,CAAA;IACvC,IAAIM,MAAO,CAACC,KAAK,CAAC,CAACF,QAAQ,EAAEjC,GAAG,CAAC,EAAE;AAC/B,MAAA,OAAOiC,QAAQ,CAAA;AACnB,KAAA;IACA,OAAO,WAAW,GAAGA,QAAQ,CAAA;GAChC;AAED;AACJ;AACA;AACA;AACA;AACIG,EAAAA,aAAa,EAAE,UAAUpC,GAAW,EAAE4B,SAAiB,EAAU;IAC7D,MAAMS,KAAK,GAAGzC,QAAQ,CAAC+B,OAAO,CAACC,SAAS,EAAE5B,GAAG,CAAC,CAAA;IAC9C,IAAIkC,MAAO,CAACC,KAAK,CAACE,KAAK,EAAErC,GAAG,CAAC,EAAE;MAC3B,OAAOsC,MAAM,CAACD,KAAK,CAAC,CAAA;AACxB,KAAA;AACA,IAAA,OAAOzC,QAAQ,CAACoC,aAAa,CAAChC,GAAG,EAAE4B,SAAS,CAAC,CAAA;GAChD;AAED;AACA;AACA;AACA;AACA;AACAW,EAAAA,UAAU,EAAE,UACRC,OAAe,EACfC,SAAkB,EACF;IAChB,IAAIA,SAAS,IAAI,IAAI,EAAE;MACnBA,SAAS,GAAGxC,IAAI,CAAC6B,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;AAChC,KAAA;AAEA,IAAA,IAAIU,OAAO,GAAG,CAAC,IAAIA,OAAO,GAAG,CAAC,EAAE;AAC5B,MAAA,IAAIE,KAAK,GAAGF,OAAO,GAAG,CAAC,CAAA;AACvBE,MAAAA,KAAK,IAAIA,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;MAE1B,MAAMC,EAAE,GAAG/C,QAAQ,CAAC2C,UAAU,CAACG,KAAK,EAAED,SAAS,CAAC,CAAA;AAChDE,MAAAA,EAAE,CAAC,CAAC,CAAC,IAAI1C,IAAI,CAACyB,KAAK,CAACc,OAAO,GAAGE,KAAK,CAAC,GAAGC,EAAE,CAAC,CAAC,CAAC,CAAA;AAC5C,MAAA,OAAOA,EAAE,CAAA;AACb,KAAA;AACA,IAAA,IAAI1C,IAAI,CAACW,GAAG,CAACX,IAAI,CAACyB,KAAK,CAACkB,MAAM,CAACJ,OAAO,CAAC,CAAC,GAAGA,OAAO,CAAC,IAAIC,SAAS,EAAE;MAC9D,OAAO,CAACxC,IAAI,CAACyB,KAAK,CAACc,OAAO,CAAC,EAAE,CAAC,CAAC,CAAA;AACnC,KAAA;IACA,IAAIK,GAAG,GAAG,CAAC,CAAA;IACX,IAAIC,GAAG,GAAG,CAAC,CAAA;IACX,IAAIC,GAAG,GAAG,CAAC,CAAA;IACX,IAAIC,GAAG,GAAG,CAAC,CAAA;IACX,IAAIC,IAAI,GAAG,CAAC,CAAA;IACZ,IAAIC,IAAI,GAAG,CAAC,CAAA;;AAEZ;AACA,IAAA,OAAO,IAAI,EAAE;AACT,MAAA,IAAIjD,IAAI,CAACW,GAAG,CAACgC,MAAM,CAACK,IAAI,GAAGC,IAAI,CAAC,GAAGV,OAAO,CAAC,IAAIC,SAAS,EAAE;AACtD,QAAA,OAAO,CAACQ,IAAI,EAAEC,IAAI,CAAC,CAAA;AACvB,OAAA;AACA,MAAA,IAAID,IAAI,GAAGC,IAAI,GAAGV,OAAO,EAAE;AACvBK,QAAAA,GAAG,GAAGI,IAAI,CAAA;AACVH,QAAAA,GAAG,GAAGI,IAAI,CAAA;AACd,OAAC,MAAM;AACHH,QAAAA,GAAG,GAAGE,IAAI,CAAA;AACVD,QAAAA,GAAG,GAAGE,IAAI,CAAA;AACd,OAAA;MAEAD,IAAI,GAAGJ,GAAG,GAAGE,GAAG,CAAA;MAChBG,IAAI,GAAGJ,GAAG,GAAGE,GAAG,CAAA;AACpB,KAAA;GACH;AAED;AACA;AACA;AACAG,EAAAA,gBAAgB,EAAE,UAAUhI,IAAY,EAAiC;AACrEA,IAAAA,IAAI,GAAGvI,CAAC,CAACwQ,IAAI,CAACjI,IAAI,CAAC,CAAA;AACnBA,IAAAA,IAAI,GAAGA,IAAI,CAAChJ,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,CAAA;AAC9D,IAAA,IAAIgJ,IAAI,CAACkI,KAAK,CAAC,YAAY,CAAC,EAAE;AAC1B,MAAA,OAAO,SAAS,CAAA;AACpB,KAAA;AACA,IAAA,IAAIlI,IAAI,CAACkI,KAAK,CAAC,6BAA6B,CAAC,EAAE;AAC3C,MAAA,OAAO,OAAO,CAAA;AAClB,KAAA;AACA,IAAA,MAAMC,QAAQ,GAAGnI,IAAI,CAACkI,KAAK,CAAC,2BAA2B,CAAC,CAAA;AACxD,IAAA,IAAIC,QAAQ,EAAE;AACV,MAAA,OAAOC,UAAU,CAACD,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAGC,UAAU,CAACD,QAAQ,CAAC,CAAC,CAAC,CAAC,GAClD,UAAU,GACV,QAAQ,CAAA;AAClB,KAAA;AACA,IAAA,IAAInI,IAAI,CAAChJ,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAACkR,KAAK,CAAC,OAAO,CAAC,EAAE;AAC3C,MAAA,OAAO,SAAS,CAAA;AACpB,KAAA;AACA,IAAA,IAAIlI,IAAI,CAACkI,KAAK,CAAC,kCAAkC,CAAC,EAAE;AAChD,MAAA,OAAO,IAAI,CAAA;AACf,KAAA;AACA,IAAA,OAAO,IAAI,CAAA;GACd;AAED;AACAG,EAAAA,eAAe,EAAE,UAAU7E,QAAc,EAAE8E,MAAmB,EAAU;IACpE,IAAI9E,QAAM,IAAI,IAAI,EAAE;AAChB,MAAA,OAAO,EAAE,CAAA;AACb,KAAA;IACA,IAAIA,QAAM,KAAK,CAAC,EAAE;MACd,OAAO,GAAG,CAAC;AACf,KAAA;;IAEA,IAAI8E,MAAM,KAAK,SAAS,EAAE;AACtB,MAAA,OAAO9E,QAAM,GAAG,GAAG,GAAG,GAAG,CAAA;AAC7B,KAAA;IAEA,IAAI8E,MAAM,KAAK,IAAI,EAAE;MACjB,MAAMH,QAAQ,GAAGpB,MAAO,CAACK,UAAU,CAAC5D,QAAM,GAAGsB,IAAI,CAACyD,EAAE,CAAC,CAAA;MACrD,MAAMC,SAAS,GAAG1D,IAAI,CAACW,GAAG,CAAC0C,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;AACvC,MAAA,MAAMM,WAAW,GAAGN,QAAQ,CAAC,CAAC,CAAC,CAAA;AAC/B,MAAA,IAAIpB,MAAO,CAAC2B,SAAS,CAACF,SAAS,CAAC,EAAE;QAC9B,MAAMG,IAAI,GAAGnF,QAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAAA;QAClC,MAAMoF,EAAE,GAAG,QAAQ,CAAA;QACnB,OACID,IAAI,IACHH,SAAS,KAAK,CAAC,GAAG,EAAE,GAAGA,SAAS,CAAC,GAClCI,EAAE,IACDH,WAAW,KAAK,CAAC,GAAG,EAAE,GAAG,GAAG,GAAGA,WAAW,CAAC,CAAA;AAEpD,OAAA;AACJ,KAAA;AAEA,IAAA,IAAI3V,CAAC,CAAC,CAAC,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,CAACkC,QAAQ,CAACsT,MAAM,CAAC,EAAE;AACjE,MAAA,MAAMH,QAAQ,GAAGpB,MAAO,CAACK,UAAU,CAAC5D,QAAM,CAAC,CAAA;MAC3C,MAAMgF,SAAS,GAAG1D,IAAI,CAACW,GAAG,CAAC0C,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;AACvC,MAAA,MAAMM,WAAW,GAAGN,QAAQ,CAAC,CAAC,CAAC,CAAA;MAC/B,MAAMQ,IAAI,GAAGnF,QAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,CAAA;MAClC,IAAIiF,WAAW,KAAK,CAAC,EAAE;AACnB,QAAA,OAAOE,IAAI,GAAGH,SAAS,CAAC;AAC5B,OAAA;;MACA,IAAIF,MAAM,KAAK,OAAO,EAAE;AACpB,QAAA,MAAMO,OAAO,GAAGL,SAAS,GAAGC,WAAW,CAAA;AACvC,QAAA,MAAMK,OAAO,GAAG,CAACN,SAAS,GAAGK,OAAO,IAAIJ,WAAW,CAAA;AACnD,QAAA,OACIE,IAAI,IACHG,OAAO,GAAGA,OAAO,GAAG,GAAG,GAAG,EAAE,CAAC,GAC9BD,OAAO,GACP,GAAG,GACHJ,WAAW,CAAA;AAEnB,OAAC;AACD,MAAA,OAAOE,IAAI,GAAGH,SAAS,GAAG,GAAG,GAAGC,WAAW,CAAA;AAC/C,KAAA;;AAEA;IACA,OAAOtB,MAAM,CAAC3D,QAAM,CAAC,CAAA;AACzB,GAAA;AACJ;;AC3RA;AAWA,MAAMuF,gBAAgB,GAAGjE,IAAI,CAAC6B,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;AAkBlC,MAAMqC,MAAM,GAAG;AAClBC,EAAAA,qBAAqB,EAAErX,IAAI,CAACkB,CAAC,CACzB,oCAAoC,GAChC,mCAAmC,GACnC,mCAAmC,GACnC,kCAAkC,GAClC,+BAA+B,CAC5B;EACXoW,mBAAmB,EAAEtX,IAAI,CAACkB,CAAC,CACvB,+BAA+B,GAC3B,6CAA6C,GAC7C,kBAAkB,CACf;EACXqW,2BAA2B,EAAEvX,IAAI,CAACkB,CAAC,CAC/B,iCAAiC,GAAG,gCAAgC,CAC7D;EACXsW,qBAAqB,EAAExX,IAAI,CAACkB,CAAC,CACzB,iCAAiC,GAC7B,sBAAsB,GACtB,8BAA8B,CAC3B;EACXuW,yBAAyB,EAAEzX,IAAI,CAACkB,CAAC,CAC7B,oCAAoC,GAChC,wCAAwC,GACxC,iCAAiC,CAC9B;AACXwW,EAAAA,gBAAgB,EAAE1X,IAAI,CAACkB,CAAC,CACpB,6DAA6D,CACtD;AACXyW,EAAAA,kBAAkB,EAAE3X,IAAI,CAACkB,CAAC,CACtB,+CAA+C,CAAA;AAEvD,CAAU,CAAA;;AAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM0W,eAAe,GAAG;AACpB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,EAAAA,SAAS,EAAE;AACPC,IAAAA,YAAY,EAAE,2CAA2C;AACzDC,IAAAA,yBAAyB,EAAE,UACvBF,SAAoB,EACpB3T,OAAY,EACU;AACtB;AACAA,MAAAA,OAAO,GAAGhD,CAAC,CAACmM,MAAM,CACd;AACI2K,QAAAA,QAAQ,EAAE,UAAU;AACpBC,QAAAA,KAAK,EAAE,KAAK;AACZC,QAAAA,KAAK,EAAEN,eAAe,CAACC,SAAS,CAACC,YAAAA;OACpC,EACD5T,OAAO,CACV,CAAA;AACD,MAAA,IAAIiU,eAAe,CAAA;AACnB;AACA;MACA,IAAI,CAACjX,CAAC,CAACkX,OAAO,CAAClU,OAAO,CAACgU,KAAK,CAAC,EAAE;QAC3BC,eAAe,GAAGjU,OAAO,CAACgU,KAAK,CAACG,KAAK,CAAC,SAAS,CAAC,CAAA;AACpD,OAAC,MAAM;QACHF,eAAe,GAAGjU,OAAO,CAACgU,KAAK,CAAA;AACnC,OAAA;;AAEA;AACA,MAAA,IAAIhU,OAAO,CAACoU,OAAO,KAAK3O,SAAS,EAAE;AAC/B;AACA;QACAzF,OAAO,CAACqU,QAAQ,GAAG,CAAC,CAAA;AACxB,OAAA;AACA;AACA;AACA;MACArU,OAAO,CAACqU,QAAQ,GAAG,CAACrU,OAAO,CAACqU,QAAQ,GAAGpB,gBAAgB,CAAA;;AAEvD;AACA;AACA;AACA;MACA,IAAIjW,CAAC,CAAC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"}