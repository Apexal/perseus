{"version":3,"file":"index.js","sources":["../../src/components/input/cursor-contexts.ts","../../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../src/data/keys.ts","../../src/fake-react-native-web/text.tsx","../../src/fake-react-native-web/view.tsx","../../src/components/common-style.ts","../../src/components/input/cursor-handle.tsx","../../src/components/input/drag-listener.ts","../../src/enums.ts","../../src/utils.ts","../../src/components/input/math-wrapper.ts","../../src/components/input/scroll-into-view.ts","../../src/components/input/math-input.tsx","../../src/components/prop-types.js","../../src/store/actions.ts","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../src/components/gesture-state-machine.ts","../../src/components/node-manager.ts","../../src/components/popover-state-machine.ts","../../src/components/gesture-manager.ts","../../src/data/key-configs.ts","../../src/store/echo-reducer.ts","../../src/store/input-reducer.ts","../../src/components/corner-decal.tsx","../../src/components/styles.ts","../../src/components/math-icon.tsx","../../src/components/iconography/cos.js","../../src/components/iconography/log.js","../../src/components/iconography/equal.js","../../src/components/iconography/backspace.js","../../src/components/iconography/sqrt.js","../../src/components/iconography/exp.js","../../src/components/iconography/neq.js","../../src/components/iconography/geq.js","../../src/components/iconography/ln.js","../../src/components/iconography/dismiss.js","../../src/components/iconography/sin.js","../../src/components/iconography/lt.js","../../src/components/iconography/cube-root.js","../../src/components/iconography/plus.js","../../src/components/iconography/tan.js","../../src/components/iconography/arrow.js","../../src/components/iconography/left.js","../../src/components/iconography/up.js","../../src/components/iconography/down.js","../../src/components/iconography/left-paren.js","../../src/components/iconography/right-paren.js","../../src/components/iconography/gt.js","../../src/components/iconography/divide.js","../../src/components/iconography/period.js","../../src/components/iconography/percent.js","../../src/components/iconography/times.js","../../src/components/iconography/exp-3.js","../../src/components/iconography/exp-2.js","../../src/components/iconography/right.js","../../src/components/iconography/cdot.js","../../src/components/iconography/log-n.js","../../src/components/iconography/leq.js","../../src/components/iconography/minus.js","../../src/components/iconography/radical.js","../../src/components/iconography/frac.js","../../src/components/iconography/jump-out-parentheses.js","../../src/components/iconography/jump-out-exponent.js","../../src/components/iconography/jump-out-base.js","../../src/components/iconography/jump-into-numerator.js","../../src/components/iconography/jump-out-numerator.js","../../src/components/iconography/jump-out-denominator.js","../../src/components/iconography/index.js","../../src/components/svg-icon.tsx","../../src/components/text-icon.tsx","../../src/components/icon.tsx","../../src/components/multi-symbol-grid.tsx","../../src/components/keypad-button.tsx","../../src/components/empty-keypad-button.tsx","../../src/components/touchable-keypad-button.tsx","../../src/components/many-keypad-button.tsx","../../src/components/z-indexes.ts","../../src/components/echo-manager.tsx","../../src/components/multi-symbol-popover.tsx","../../src/components/popover-manager.tsx","../../src/components/keypad.tsx","../../src/components/tabbar/icons.tsx","../../src/components/tabbar/item.tsx","../../src/components/tabbar/tabbar.tsx","../../src/components/two-page-keypad.tsx","../../src/components/expression-keypad.tsx","../../src/components/fraction-keypad.tsx","../../src/store/shared.ts","../../src/store/keypad-reducer.ts","../../src/components/compute-layout-parameters.ts","../../src/store/layout-reducer.ts","../../src/components/velocity-tracker.ts","../../src/store/pager-reducer.ts","../../src/store/index.ts","../../src/components/navigation-pad.tsx","../../src/components/keypad-container.tsx","../../src/components/provided-keypad.tsx"],"sourcesContent":["/**\n * Enum that defines the various contexts in which a cursor can exist. The\n * active context is determined first by looking at the cursor's siblings (e.g.,\n * for the `BEFORE_FRACTION` context), and then at its direct parent. Though a\n * cursor could in theory be nested in multiple contexts, we only care about the\n * immediate context.\n *\n * TODO(charlie): Add a context to represent being inside of a radical. Right\n * now, we show the dismiss button rather than allowing the user to jump out of\n * the radical.\n */\n\nexport enum CursorContext {\n    // The cursor is not in any of the other viable contexts.\n    NONE = \"NONE\",\n\n    // The cursor is within a set of parentheses.\n    IN_PARENS = \"IN_PARENS\",\n\n    // The cursor is within a superscript (e.g., an exponent).\n    IN_SUPER_SCRIPT = \"IN_SUPER_SCRIPT\",\n\n    // The cursor is within a subscript (e.g., the base of a custom logarithm).\n    IN_SUB_SCRIPT = \"IN_SUB_SCRIPT\",\n\n    // The cursor is in the numerator of a fraction.\n    IN_NUMERATOR = \"IN_NUMERATOR\",\n\n    // The cursor is in the denominator of a fraction.\n    IN_DENOMINATOR = \"IN_DENOMINATOR\",\n\n    // The cursor is sitting before a fraction; that is, the cursor is within\n    // what looks to be a mixed number preceding a fraction. This will only be\n    // the case when the only math between the cursor and the fraction to its\n    // write is non-leaf math (numbers and variables).\n    BEFORE_FRACTION = \"BEFORE_FRACTION\",\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/**\n * This file contains constants for keypad buttons that aren't single\n * alphanumeric characters.\n */\n\n// TODO(charlie): There's duplication between this file and key-configs.js.\n// We should clean it up by removing this file and requiring clients to use the\n// `id` field on the key configurations.\nenum Keys {\n    PLUS = \"PLUS\",\n    MINUS = \"MINUS\",\n    NEGATIVE = \"NEGATIVE\",\n    TIMES = \"TIMES\",\n    DIVIDE = \"DIVIDE\",\n    DECIMAL = \"DECIMAL\",\n    PERIOD = \"PERIOD\",\n    PERCENT = \"PERCENT\",\n    CDOT = \"CDOT\",\n    EQUAL = \"EQUAL\",\n    NEQ = \"NEQ\",\n    GT = \"GT\",\n    LT = \"LT\",\n    GEQ = \"GEQ\",\n    LEQ = \"LEQ\", // mobile native only\n    FRAC_INCLUSIVE = \"FRAC_INCLUSIVE\", // mobile native only\n    FRAC_EXCLUSIVE = \"FRAC_EXCLUSIVE\", // mobile native only\n    FRAC = \"FRAC\",\n    EXP = \"EXP\",\n    EXP_2 = \"EXP_2\",\n    EXP_3 = \"EXP_3\",\n    SQRT = \"SQRT\",\n    CUBE_ROOT = \"CUBE_ROOT\",\n    RADICAL = \"RADICAL\",\n    LEFT_PAREN = \"LEFT_PAREN\",\n    RIGHT_PAREN = \"RIGHT_PAREN\",\n    LN = \"LN\",\n    LOG = \"LOG\",\n    LOG_N = \"LOG_N\",\n    SIN = \"SIN\",\n    COS = \"COS\", // TODO(charlie): Add in additional Greek letters.\n    TAN = \"TAN\",\n\n    PI = \"PI\",\n    THETA = \"THETA\",\n\n    UP = \"UP\",\n    RIGHT = \"RIGHT\",\n    DOWN = \"DOWN\",\n    LEFT = \"LEFT\",\n    BACKSPACE = \"BACKSPACE\",\n    DISMISS = \"DISMISS\",\n\n    JUMP_OUT_PARENTHESES = \"JUMP_OUT_PARENTHESES\",\n    JUMP_OUT_EXPONENT = \"JUMP_OUT_EXPONENT\",\n    JUMP_OUT_BASE = \"JUMP_OUT_BASE\",\n    JUMP_INTO_NUMERATOR = \"JUMP_INTO_NUMERATOR\",\n    JUMP_OUT_NUMERATOR = \"JUMP_OUT_NUMERATOR\",\n    JUMP_OUT_DENOMINATOR = \"JUMP_OUT_DENOMINATOR\", // Multi-functional keys.\n\n    NOOP = \"NOOP\", // mobile native only\n\n    // A custom key that captures an arbitrary number of symbols but has no\n    // 'default' symbol or action.\n    // MANY = \"MANY\",\n}\n\nexport default Keys;\n","import {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\nimport type {CSSProperties} from \"aphrodite\";\n\ntype Props = {\n    children: React.ReactNode;\n    // The `dynamicStyle` prop is provided for animating dynamic\n    // properties, as creating Aphrodite StyleSheets in animation loops is\n    // expensive. `dynamicStyle` should be a raw style object, rather than\n    // a StyleSheet.\n    dynamicStyle?: CSSProperties;\n    numberOfLines?: number;\n    style?: StyleType;\n};\n\nclass Text extends React.Component<Props> {\n    render(): React.ReactNode {\n        const {numberOfLines, style} = this.props;\n\n        const className = css(\n            styles.initial,\n            ...(Array.isArray(style) ? style : [style]),\n            numberOfLines === 1 && styles.singleLineStyle,\n        );\n\n        return (\n            <span className={className} style={this.props.dynamicStyle}>\n                {this.props.children}\n            </span>\n        );\n    }\n}\n\n// https://github.com/necolas/react-native-web/blob/master/src/components/Text/index.js\nconst styles = StyleSheet.create({\n    initial: {\n        color: \"inherit\",\n        display: \"inline\",\n        font: \"inherit\",\n        margin: 0,\n        padding: 0,\n        textDecorationLine: \"none\",\n        wordWrap: \"break-word\",\n    },\n    singleLineStyle: {\n        maxWidth: \"100%\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n    },\n});\n\nexport default Text;\n","import {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\nimport type {CSSProperties} from \"aphrodite\";\n\ntype Props = {\n    ariaLabel?: string;\n    children?: React.ReactNode;\n    // The `dynamicStyle` prop is provided for animating dynamic\n    // properties, as creating Aphrodite StyleSheets in animation loops is\n    // expensive. `dynamicStyle` should be a raw style object, rather than\n    // a StyleSheet.\n    dynamicStyle?: CSSProperties;\n    // The `extraClassName` prop should almost never be used. It gives the\n    // client a way to provide an additional CSS class name, to augment\n    // the class name generated by Aphrodite. (Right now, it's only used to\n    // disable some externally-applied CSS that would otherwise be far too\n    // difficult to override with inline styles.)\n    extraClassName?: string;\n    numberOfLines?: number;\n    onClick?: (arg1: React.SyntheticEvent<HTMLDivElement>) => void;\n    onTouchCancel?: (arg1: React.TouchEvent<HTMLDivElement>) => void;\n    onTouchEnd?: (arg1: React.TouchEvent<HTMLDivElement>) => void;\n    onTouchMove?: (arg1: React.TouchEvent<HTMLDivElement>) => void;\n    onTouchStart?: (arg1: React.TouchEvent<HTMLDivElement>) => void;\n    role?: string;\n    style?: StyleType;\n};\n\nclass View extends React.Component<Props> {\n    static styles = StyleSheet.create({\n        // From: https://github.com/necolas/react-native-web/blob/master/src/components/View/index.js\n        // eslint-disable-next-line react-native/no-unused-styles\n        initial: {\n            alignItems: \"stretch\",\n            borderWidth: 0,\n            borderStyle: \"solid\",\n            boxSizing: \"border-box\",\n            display: \"flex\",\n            flexBasis: \"auto\",\n            flexDirection: \"column\",\n            margin: 0,\n            padding: 0,\n            position: \"relative\",\n            // button and anchor reset\n            backgroundColor: \"transparent\",\n            color: \"inherit\",\n            font: \"inherit\",\n            textAlign: \"inherit\",\n            textDecorationLine: \"none\",\n            // list reset\n            listStyle: \"none\",\n            // fix flexbox bugs\n            maxWidth: \"100%\",\n            minHeight: 0,\n            minWidth: 0,\n        },\n    });\n\n    render(): React.ReactNode {\n        const className =\n            css(\n                View.styles.initial,\n                ...(Array.isArray(this.props.style)\n                    ? this.props.style\n                    : [this.props.style]),\n            ) +\n            (this.props.extraClassName ? ` ${this.props.extraClassName}` : \"\");\n\n        return (\n            <div\n                className={className}\n                style={this.props.dynamicStyle}\n                onClick={this.props.onClick}\n                onTouchCancel={this.props.onTouchCancel}\n                onTouchEnd={this.props.onTouchEnd}\n                onTouchMove={this.props.onTouchMove}\n                onTouchStart={this.props.onTouchStart}\n                aria-label={this.props.ariaLabel}\n                role={this.props.role}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default View;\n","/**\n * Common parameters used to style components.\n */\nimport Color from \"@khanacademy/wonder-blocks-color\";\n\nexport const wonderBlocksBlue = Color.blue;\nexport const offBlack = Color.offBlack;\nexport const offBlack32 = Color.offBlack32;\nexport const offBlack16 = Color.offBlack16;\nexport const offBlack8 = Color.offBlack8;\n\nexport const iconSizeHeightPx = 48;\nexport const iconSizeWidthPx = 48;\nexport const compactKeypadBorderRadiusPx = 4;\nexport const cursorHandleRadiusPx = 11;\n\n// The amount to multiply the radius by to get the distance from the\n// center to the tip of the cursor handle.  The cursor is a circle with\n// one quadrant replace with a square.  The hypotenuse of the square is\n// 1.045 times the radius of the circle.\nexport const cursorHandleDistanceMultiplier = 1.045;\n\n// Keypad button colors\nexport const valueGrey = \"#FFF\";\nexport const operatorGrey = \"#FAFAFA\";\nexport const controlGrey = \"#F6F7F7\";\nexport const emptyGrey = \"#F0F1F2\";\n\n// Constants defining any borders between elements in the keypad.\nexport const innerBorderColor = offBlack16;\nexport const innerBorderStyle = \"solid\";\nexport const innerBorderWidthPx = 1;\n\n// The width at which a device is classified as a \"tablet\" for the purposes\n// of the keypad layout.\nexport const tabletCutoffPx = 600;\n\n// The dimensions that define various components in the tree, which may be\n// needed outside of those components in order to determine various layout\n// parameters.\nexport const pageIndicatorHeightPx = 16;\nexport const navigationPadWidthPx = 192;\n// HACK(charlie): This should be injected by webapp somehow.\n// TODO(charlie): Add a link to the webapp location as soon as the footer\n// has settled down.\nexport const toolbarHeightPx = 60;\n","/**\n * Renders the green tear-shaped handle under the cursor.\n */\n\nimport * as React from \"react\";\n\nimport {\n    cursorHandleRadiusPx,\n    cursorHandleDistanceMultiplier,\n} from \"../common-style\";\n\nconst touchTargetRadiusPx = 2 * cursorHandleRadiusPx;\nconst touchTargetHeightPx = 2 * touchTargetRadiusPx;\nconst touchTargetWidthPx = 2 * touchTargetRadiusPx;\n\nconst cursorRadiusPx = cursorHandleRadiusPx;\nconst cursorHeightPx = cursorHandleDistanceMultiplier * (cursorRadiusPx * 4);\nconst cursorWidthPx = 4 * cursorRadiusPx;\n\ntype Props = {\n    animateIntoPosition: boolean;\n    onTouchCancel: (arg1: React.TouchEvent<HTMLSpanElement>) => void;\n    onTouchEnd: (arg1: React.TouchEvent<HTMLSpanElement>) => void;\n    onTouchMove: (arg1: React.TouchEvent<HTMLSpanElement>) => void;\n    onTouchStart: (arg1: React.TouchEvent<HTMLSpanElement>) => void;\n    visible: boolean;\n    x: number;\n    y: number;\n};\n\ntype DefaultProps = {\n    animateIntoPosition: Props[\"animateIntoPosition\"];\n    visible: Props[\"visible\"];\n    x: Props[\"x\"];\n    y: Props[\"y\"];\n};\n\nclass CursorHandle extends React.Component<Props> {\n    static defaultProps: DefaultProps = {\n        animateIntoPosition: false,\n        visible: false,\n        x: 0,\n        y: 0,\n    };\n\n    render(): React.ReactNode {\n        const {x, y, animateIntoPosition} = this.props;\n\n        const animationStyle = animateIntoPosition\n            ? {\n                  transitionDuration: \"100ms\",\n                  transitionProperty: \"transform\",\n              }\n            : {};\n        const transformString = `translate(${x}px, ${y}px)`;\n\n        const outerStyle = {\n            position: \"absolute\",\n            // This is essentially webapp's interactiveComponent + 1.\n            // TODO(charlie): Pull in those styles somehow to avoid breakages.\n            zIndex: 4,\n            left: -touchTargetWidthPx / 2,\n            top: 0,\n            transform: transformString,\n            width: touchTargetWidthPx,\n            height: touchTargetHeightPx,\n            // Touch events that start on the cursor shouldn't be allowed to\n            // produce page scrolls.\n            touchAction: \"none\",\n            ...animationStyle,\n        } as const;\n\n        return (\n            <span\n                style={outerStyle}\n                onTouchStart={this.props.onTouchStart}\n                onTouchMove={this.props.onTouchMove}\n                onTouchEnd={this.props.onTouchEnd}\n                onTouchCancel={this.props.onTouchCancel}\n            >\n                <svg\n                    fill=\"none\"\n                    width={cursorWidthPx}\n                    height={cursorHeightPx}\n                    viewBox={`0 0 ${cursorWidthPx} ${cursorHeightPx}`}\n                >\n                    <filter\n                        id=\"math-input_cursor\"\n                        colorInterpolationFilters=\"sRGB\"\n                        filterUnits=\"userSpaceOnUse\"\n                        height={cursorHeightPx * 0.87} // ~40\n                        width={cursorWidthPx * 0.82} // ~36\n                        x=\"4\"\n                        y=\"0\"\n                    >\n                        <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\n                        <feColorMatrix\n                            in=\"SourceAlpha\"\n                            type=\"matrix\"\n                            values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n                        />\n                        <feOffset dy=\"4\" />\n                        <feGaussianBlur stdDeviation=\"4\" />\n                        <feColorMatrix\n                            type=\"matrix\"\n                            values=\"0 0 0 0 0.129412 0 0 0 0 0.141176 0 0 0 0 0.172549 0 0 0 0.08 0\"\n                        />\n                        <feBlend\n                            in2=\"BackgroundImageFix\"\n                            mode=\"normal\"\n                            result=\"effect1_dropShadow\"\n                        />\n                        <feBlend\n                            in=\"SourceGraphic\"\n                            in2=\"effect1_dropShadow\"\n                            mode=\"normal\"\n                            result=\"shape\"\n                        />\n                    </filter>\n                    <g filter=\"url(#math-input_cursor)\">\n                        <path\n                            d=\"m22 4-7.07 7.0284c-1.3988 1.3901-2.3515 3.1615-2.7376 5.09-.3861 1.9284-.1883 3.9274.5685 5.7441s2.0385 3.3694 3.6831 4.4619c1.6445 1.0925 3.5781 1.6756 5.556 1.6756s3.9115-.5831 5.556-1.6756c1.6446-1.0925 2.9263-2.6452 3.6831-4.4619s.9546-3.8157.5685-5.7441c-.3861-1.9285-1.3388-3.6999-2.7376-5.09z\"\n                            fill=\"#1865f2\"\n                        />\n                    </g>\n                    <path\n                        d=\"m14.9301 10.4841 7.0699-7.06989 7.0699 7.06989.0001.0001c1.3988 1.3984 2.3515 3.1802 2.7376 5.1201s.1883 3.9507-.5685 5.7782c-.7568 1.8274-2.0385 3.3894-3.6831 4.4883-1.6445 1.099-3.5781 1.6855-5.556 1.6855s-3.9115-.5865-5.556-1.6855c-1.6446-1.0989-2.9263-2.6609-3.6831-4.4883-.7568-1.8275-.9546-3.8383-.5685-5.7782s1.3388-3.7217 2.7376-5.1201z\"\n                        stroke=\"#fff\"\n                        strokeWidth=\"2\"\n                    />\n                </svg>\n            </span>\n        );\n    }\n}\n\nexport default CursorHandle;\n","/**\n * A gesture recognizer that detects 'drags', crudely defined as either scrolls\n * or touches that move a sufficient distance.\n */\n\n// The 'slop' factor, after which we consider the use to be dragging. The value\n// is taken from the Android SDK. It won't be robust to page zoom and the like,\n// but it should be good enough for our purposes.\nconst touchSlopPx = 8;\n\nclass DragListener {\n    _scrollListener: () => void;\n    _moveListener: (evt: TouchEvent) => void;\n    _endAndCancelListener: (evt: TouchEvent) => void;\n\n    constructor(onDrag, initialEvent) {\n        // We detect drags in two ways. First, by listening for the window\n        // scroll event (we consider any legitimate scroll to be a drag).\n        this._scrollListener = () => {\n            onDrag();\n        };\n\n        // And second, by listening for touch moves and tracking the each\n        // finger's displacement. This allows us to track, e.g., when the user\n        // scrolls within an individual view.\n        const touchLocationsById = {};\n        for (let i = 0; i < initialEvent.changedTouches.length; i++) {\n            const touch = initialEvent.changedTouches[i];\n            touchLocationsById[touch.identifier] = [\n                touch.clientX,\n                touch.clientY,\n            ];\n        }\n\n        this._moveListener = (evt) => {\n            for (let i = 0; i < evt.changedTouches.length; i++) {\n                const touch = evt.changedTouches[i];\n                const initialTouchLocation =\n                    touchLocationsById[touch.identifier];\n                if (initialTouchLocation) {\n                    const touchLocation = [touch.clientX, touch.clientY];\n                    const dx = touchLocation[0] - initialTouchLocation[0];\n                    const dy = touchLocation[1] - initialTouchLocation[1];\n\n                    const squaredDist = dx * dx + dy * dy;\n                    const squaredTouchSlop = touchSlopPx * touchSlopPx;\n\n                    if (squaredDist > squaredTouchSlop) {\n                        onDrag();\n                    }\n                }\n            }\n        };\n\n        // Clean-up any terminated gestures, since some browsers reuse\n        // identifiers.\n        this._endAndCancelListener = (evt) => {\n            for (let i = 0; i < evt.changedTouches.length; i++) {\n                delete touchLocationsById[evt.changedTouches[i].identifier];\n            }\n        };\n    }\n\n    attach() {\n        window.addEventListener(\"scroll\", this._scrollListener);\n        window.addEventListener(\"touchmove\", this._moveListener);\n        window.addEventListener(\"touchend\", this._endAndCancelListener);\n        window.addEventListener(\"touchcancel\", this._endAndCancelListener);\n    }\n\n    detach() {\n        window.removeEventListener(\"scroll\", this._scrollListener);\n        window.removeEventListener(\"touchmove\", this._moveListener);\n        window.removeEventListener(\"touchend\", this._endAndCancelListener);\n        window.removeEventListener(\"touchcancel\", this._endAndCancelListener);\n    }\n}\n\nexport default DragListener;\n","/**\n * Constants that are shared between multiple files.\n */\n\nexport enum KeypadType {\n    FRACTION = \"FRACTION\",\n    EXPRESSION = \"EXPRESSION\",\n}\n\nexport enum KeyType {\n    EMPTY = \"EMPTY\",\n    // For numerals, variables, and any other characters that themselves\n    // compose 'values'.\n    VALUE = \"VALUE\",\n    // For buttons that insert or adjust math in an input.\n    OPERATOR = \"OPERATOR\",\n    // For buttons that move the cursor in an input (including via\n    // deletion).\n    INPUT_NAVIGATION = \"INPUT_NAVIGATION\",\n    // For buttons that modify the broader keypad state (e.g., by changing\n    // the visible pane).\n    KEYPAD_NAVIGATION = \"KEYPAD_NAVIGATION\",\n    // For buttons that house multiple buttons and have no action\n    // themselves.\n    MANY = \"MANY\",\n    // For the echo animation that appears on press.\n    ECHO = \"ECHO\",\n}\n\nexport enum DeviceOrientation {\n    LANDSCAPE = \"LANDSCAPE\",\n    PORTRAIT = \"PORTRAIT\",\n}\n\nexport enum DeviceType {\n    PHONE = \"PHONE\",\n    TABLET = \"TABLET\",\n}\n\nexport enum LayoutMode {\n    FULLSCREEN = \"FULLSCREEN\",\n    COMPACT = \"COMPACT\",\n}\n\nexport enum BorderDirection {\n    LEFT = \"LEFT\",\n    BOTTOM = \"BOTTOM\",\n}\n\nexport const BorderStyles: {\n    [style: string]: ReadonlyArray<BorderDirection>;\n} = {\n    LEFT: [BorderDirection.LEFT],\n    BOTTOM: [BorderDirection.BOTTOM],\n    ALL: [BorderDirection.LEFT, BorderDirection.BOTTOM],\n    NONE: [],\n};\n\nexport enum IconType {\n    MATH = \"MATH\",\n    SVG = \"SVG\",\n    TEXT = \"TEXT\",\n}\n\nexport enum DecimalSeparator {\n    COMMA = \"COMMA\",\n    PERIOD = \"PERIOD\",\n}\n\nexport enum EchoAnimationType {\n    SLIDE_AND_FADE = \"SLIDE_AND_FADE\",\n    FADE_ONLY = \"FADE_ONLY\",\n    LONG_FADE_ONLY = \"LONG_FADE_ONLY\",\n}\n","import {getDecimalSeparator} from \"@khanacademy/wonder-blocks-i18n\";\n\nimport {DecimalSeparator} from \"./enums\";\n\n// NOTES(kevinb):\n// - In order to get the correct decimal separator for the current locale,\n//   the locale must bet set using `setLocale(kaLocale)` which can be\n//   imported from wonder-blocks-i18n.\n// - Some languages/locales use different decimal separators than the ones\n//   listed here.  Much of the Arab world uses U+066C.\nexport const decimalSeparator: string =\n    getDecimalSeparator() === \",\"\n        ? DecimalSeparator.COMMA\n        : DecimalSeparator.PERIOD;\n","/**\n * This file contains a wrapper around MathQuill so that we can provide a\n * more regular interface for the functionality we need while insulating us\n * from MathQuill changes.\n */\n\nimport $ from \"jquery\";\nimport MathQuill from \"mathquill\";\n\nimport Keys from \"../../data/keys\";\nimport {DecimalSeparator} from \"../../enums\";\nimport {decimalSeparator} from \"../../utils\";\n\nimport {CursorContext} from \"./cursor-contexts\";\n\n// Keeping `window` in place for test suite and GitHub Pages.\n// If it does not exist, fall back to CommonJS require. - jsatk\n\nconst decimalSymbol = decimalSeparator === DecimalSeparator.COMMA ? \",\" : \".\";\n\nenum ActionType {\n    WRITE = \"write\",\n    CMD = \"cmd\",\n    KEYSTROKE = \"keystroke\",\n    MQ_END = 0,\n}\n\n// A mapping from keys that can be pressed on a keypad to the way in which\n// MathQuill should modify its input in response to that key-press. Any keys\n// that do not provide explicit actions (like the numeral keys) will merely\n// write their contents to MathQuill.\nconst KeyActions: {[K in Keys]?: {str: string; fn: ActionType}} = {\n    [Keys.PLUS]: {str: \"+\", fn: ActionType.WRITE},\n    [Keys.MINUS]: {str: \"-\", fn: ActionType.WRITE},\n    [Keys.NEGATIVE]: {str: \"-\", fn: ActionType.WRITE},\n    [Keys.TIMES]: {str: \"\\\\times\", fn: ActionType.WRITE},\n    [Keys.DIVIDE]: {str: \"\\\\div\", fn: ActionType.WRITE},\n    [Keys.DECIMAL]: {\n        str: decimalSymbol,\n        fn: ActionType.WRITE,\n    },\n    [Keys.EQUAL]: {str: \"=\", fn: ActionType.WRITE},\n    [Keys.NEQ]: {str: \"\\\\neq\", fn: ActionType.WRITE},\n    [Keys.CDOT]: {str: \"\\\\cdot\", fn: ActionType.WRITE},\n    [Keys.PERCENT]: {str: \"%\", fn: ActionType.WRITE},\n    [Keys.LEFT_PAREN]: {str: \"(\", fn: ActionType.CMD},\n    [Keys.RIGHT_PAREN]: {str: \")\", fn: ActionType.CMD},\n    [Keys.SQRT]: {str: \"sqrt\", fn: ActionType.CMD},\n    [Keys.PI]: {str: \"pi\", fn: ActionType.CMD},\n    [Keys.THETA]: {str: \"theta\", fn: ActionType.CMD},\n    [Keys.RADICAL]: {str: \"nthroot\", fn: ActionType.CMD},\n    [Keys.LT]: {str: \"<\", fn: ActionType.WRITE},\n    [Keys.LEQ]: {str: \"\\\\leq\", fn: ActionType.WRITE},\n    [Keys.GT]: {str: \">\", fn: ActionType.WRITE},\n    [Keys.GEQ]: {str: \"\\\\geq\", fn: ActionType.WRITE},\n    [Keys.UP]: {str: \"Up\", fn: ActionType.KEYSTROKE},\n    [Keys.DOWN]: {str: \"Down\", fn: ActionType.KEYSTROKE},\n    // The `FRAC_EXCLUSIVE` variant is handled manually, since we may need to do\n    // some additional navigation depending on the cursor position.\n    [Keys.FRAC_INCLUSIVE]: {str: \"/\", fn: ActionType.CMD},\n};\n\nconst NormalCommands = {\n    [Keys.LOG]: \"log\",\n    [Keys.LN]: \"ln\",\n    [Keys.SIN]: \"sin\",\n    [Keys.COS]: \"cos\",\n    [Keys.TAN]: \"tan\",\n};\n\nconst ArithmeticOperators = [\"+\", \"-\", \"\\\\cdot\", \"\\\\times\", \"\\\\div\"];\nconst EqualityOperators = [\"=\", \"\\\\neq\", \"<\", \"\\\\leq\", \">\", \"\\\\geq\"];\n\nconst Numerals = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\nconst GreekLetters = [\"\\\\theta\", \"\\\\pi\"];\nconst Letters = [\n    \"A\",\n    \"B\",\n    \"C\",\n    \"D\",\n    \"E\",\n    \"F\",\n    \"G\",\n    \"H\",\n    \"I\",\n    \"J\",\n    \"K\",\n    \"L\",\n    \"M\",\n    \"N\",\n    \"O\",\n    \"P\",\n    \"Q\",\n    \"R\",\n    \"S\",\n    \"T\",\n    \"U\",\n    \"V\",\n    \"W\",\n    \"X\",\n    \"Y\",\n    \"Z\",\n];\n\n// We only consider numerals, variables, and Greek Letters to be proper\n// leaf nodes.\nconst ValidLeaves = [\n    ...Numerals,\n    ...GreekLetters,\n    ...Letters.map((letter) => letter.toLowerCase()),\n    ...Letters.map((letter) => letter.toUpperCase()),\n];\n\nconst KeysForJumpContext = {\n    [CursorContext.IN_PARENS]: Keys.JUMP_OUT_PARENTHESES,\n    [CursorContext.IN_SUPER_SCRIPT]: Keys.JUMP_OUT_EXPONENT,\n    [CursorContext.IN_SUB_SCRIPT]: Keys.JUMP_OUT_BASE,\n    [CursorContext.BEFORE_FRACTION]: Keys.JUMP_INTO_NUMERATOR,\n    [CursorContext.IN_NUMERATOR]: Keys.JUMP_OUT_NUMERATOR,\n    [CursorContext.IN_DENOMINATOR]: Keys.JUMP_OUT_DENOMINATOR,\n};\n\nclass MathWrapper {\n    MQ: any; // MathQuill interface\n    mathField: any; // MathQuill input\n    callbacks: any;\n\n    constructor(element, options = {}, callbacks = {}) {\n        this.MQ = MathQuill.getInterface(2);\n        this.mathField = this.MQ.MathField(element, {\n            // use a span instead of a textarea so that we don't bring up the\n            // native keyboard on mobile when selecting the input\n            substituteTextarea: function () {\n                return document.createElement(\"span\");\n            },\n        });\n        this.callbacks = callbacks;\n    }\n\n    focus() {\n        // HACK(charlie): We shouldn't reaching into MathQuill internals like\n        // this, but it's the easiest way to allow us to manage the focus state\n        // ourselves.\n        const controller = this.mathField.__controller;\n        controller.cursor.show();\n\n        // Set MathQuill's internal state to reflect the focus, otherwise it\n        // will consistently try to hide the cursor on key-press and introduce\n        // layout jank.\n        controller.blurred = false;\n    }\n\n    blur() {\n        const controller = this.mathField.__controller;\n        controller.cursor.hide();\n        controller.blurred = true;\n    }\n\n    _writeNormalFunction(name: string) {\n        this.mathField.write(`\\\\${name}\\\\left(\\\\right)`);\n        this.mathField.keystroke(\"Left\");\n    }\n\n    /**\n     * Handle a key press and return the resulting cursor state.\n     *\n     * @param {Key} key - an enum representing the key that was pressed\n     * @returns {object} a cursor object, consisting of a cursor context\n     */\n    pressKey(key: string) {\n        const cursor = this.mathField.__controller.cursor;\n\n        if (key in KeyActions) {\n            const {str, fn} = KeyActions[key];\n\n            if (str && fn) {\n                this.mathField[fn](str);\n            }\n        } else if (Object.keys(NormalCommands).includes(key)) {\n            this._writeNormalFunction(NormalCommands[key]);\n        } else if (key === Keys.FRAC_EXCLUSIVE) {\n            // If there's nothing to the left of the cursor, then we want to\n            // leave the cursor to the left of the fraction after creating it.\n            const shouldNavigateLeft = cursor[this.MQ.L] === ActionType.MQ_END;\n            this.mathField.cmd(\"\\\\frac\");\n            if (shouldNavigateLeft) {\n                this.mathField.keystroke(\"Left\");\n            }\n        } else if (key === Keys.FRAC) {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const shouldNavigateLeft = cursor[this.MQ.L] === ActionType.MQ_END;\n            this.mathField.cmd(\"\\\\frac\");\n        } else if (key === Keys.LOG_N) {\n            this.mathField.write(\"log_{ }\\\\left(\\\\right)\");\n            this.mathField.keystroke(\"Left\"); // into parentheses\n            this.mathField.keystroke(\"Left\"); // out of parentheses\n            this.mathField.keystroke(\"Left\"); // into index\n        } else if (key === Keys.CUBE_ROOT) {\n            this.mathField.write(\"\\\\sqrt[3]{}\");\n            this.mathField.keystroke(\"Left\"); // under the root\n        } else if (\n            key === Keys.EXP ||\n            key === Keys.EXP_2 ||\n            key === Keys.EXP_3\n        ) {\n            this._handleExponent(cursor, key);\n        } else if (\n            key === Keys.JUMP_OUT_PARENTHESES ||\n            key === Keys.JUMP_OUT_EXPONENT ||\n            key === Keys.JUMP_OUT_BASE ||\n            key === Keys.JUMP_INTO_NUMERATOR ||\n            key === Keys.JUMP_OUT_NUMERATOR ||\n            key === Keys.JUMP_OUT_DENOMINATOR\n        ) {\n            this._handleJumpOut(cursor, key);\n        } else if (key === Keys.BACKSPACE) {\n            this._handleBackspace(cursor);\n        } else if (key === Keys.LEFT) {\n            this._handleLeftArrow(cursor);\n        } else if (key === Keys.RIGHT) {\n            this._handleRightArrow(cursor);\n        } else if (/^[a-zA-Z]$/.test(key)) {\n            this.mathField[ActionType.WRITE](key);\n        } else if (/^NUM_\\d/.test(key)) {\n            this.mathField[ActionType.WRITE](key[4]);\n        }\n\n        if (!cursor.selection) {\n            // don't show the cursor for selections\n            cursor.show();\n        }\n\n        if (this.callbacks.onSelectionChanged) {\n            this.callbacks.onSelectionChanged(cursor.selection);\n        }\n\n        // NOTE(charlie): It's insufficient to do this as an `edited` handler\n        // on the MathField, as that handler isn't triggered on navigation\n        // events.\n        return {\n            context: this.contextForCursor(cursor),\n        };\n    }\n\n    /**\n     * Place the cursor beside the node located at the given coordinates.\n     *\n     * @param {number} x - the x coordinate in the viewport\n     * @param {number} y - the y coordinate in the viewport\n     * @param {Node} hitNode - the node next to which the cursor should be\n     *                         placed; if provided, the coordinates will be used\n     *                         to determine on which side of the node the cursor\n     *                         should be placed\n     */\n    setCursorPosition(x: number, y: number, hitNode: HTMLElement) {\n        const el = hitNode || document.elementFromPoint(x, y);\n\n        if (el) {\n            const cursor = this.getCursor();\n\n            if (el.hasAttribute(\"mq-root-block\")) {\n                // If we're in the empty area place the cursor at the right\n                // end of the expression.\n                cursor.insAtRightEnd(this.mathField.__controller.root);\n            } else {\n                // Otherwise place beside the element at x, y.\n                const controller = this.mathField.__controller;\n\n                const pageX = x - document.body.scrollLeft;\n                const pageY = y - document.body.scrollTop;\n                controller.seek($(el), pageX, pageY).cursor.startSelection();\n\n                // Unless that would leave us mid-command, in which case, we\n                // need to adjust and place the cursor inside the parens\n                // following the command.\n                const command = this._maybeFindCommand(cursor[this.MQ.L]);\n                if (command && command.endNode) {\n                    // NOTE(charlie): endNode should definitely be \\left(.\n                    cursor.insLeftOf(command.endNode);\n                    this.mathField.keystroke(\"Right\");\n                }\n            }\n\n            if (this.callbacks.onCursorMove) {\n                this.callbacks.onCursorMove({\n                    context: this.contextForCursor(cursor),\n                });\n            }\n        }\n    }\n\n    getCursor() {\n        return this.mathField.__controller.cursor;\n    }\n\n    getSelection() {\n        return this.getCursor().selection;\n    }\n\n    getContent() {\n        return this.mathField.latex();\n    }\n\n    setContent(latex: string) {\n        this.mathField.latex(latex);\n    }\n\n    isEmpty() {\n        const cursor = this.getCursor();\n        return cursor.parent.id === 1 && cursor[1] === 0 && cursor[-1] === 0;\n    }\n\n    // Notes about MathQuill\n    //\n    // MathQuill's stores its layout as nested linked lists.  Each node in the\n    // list has this.MQ.L '-1' and this.MQ.R '1' properties that define links to\n    // the left and right nodes respectively.  They also have\n    //\n    // ctrlSeq: contains the latex code snippet that defines that node.\n    // jQ: jQuery object for the DOM node(s) for this MathQuill node.\n    // ends: pointers to the nodes at the ends of the container.\n    // parent: parent node.\n    // blocks: an array containing one or more nodes that make up the node.\n    // sub?: subscript node if there is one as is the case in log_n\n    //\n    // All of the code below is super fragile.  Please be especially careful\n    // when upgrading MathQuill.\n\n    _handleBackspaceInNthRoot(cursor) {\n        const isAtLeftEnd = cursor[this.MQ.L] === ActionType.MQ_END;\n\n        const isRootEmpty = this._isInsideEmptyNode(\n            cursor.parent.parent.blocks[0].ends,\n        );\n\n        if (isAtLeftEnd) {\n            this._selectNode(cursor.parent.parent, cursor);\n\n            if (isRootEmpty) {\n                this.mathField.keystroke(\"Backspace\");\n            }\n        } else {\n            this.mathField.keystroke(\"Backspace\");\n        }\n    }\n\n    /**\n     * Advances the cursor to the next logical position.\n     *\n     * @param {cursor} cursor\n     * @private\n     */\n    _handleJumpOut(cursor, key) {\n        const context = this.contextForCursor(cursor);\n\n        // Validate that the current cursor context matches the key's intent.\n        if (KeysForJumpContext[context] !== key) {\n            // If we don't have a valid cursor context, yet the user was able\n            // to trigger a jump-out key, that's a broken invariant. Rather\n            // than throw an error (which would kick the user out of the\n            // exercise), we do nothing, as a fallback strategy. The user can\n            // still move the cursor manually.\n            return;\n        }\n\n        switch (context) {\n            case CursorContext.IN_PARENS:\n                // Insert at the end of the parentheses, and then navigate right\n                // once more to get 'beyond' the parentheses.\n                cursor.insRightOf(cursor.parent.parent);\n                break;\n\n            case CursorContext.BEFORE_FRACTION:\n                // Find the nearest fraction to the right of the cursor.\n                let fractionNode;\n                let visitor = cursor;\n                while (visitor[this.MQ.R] !== ActionType.MQ_END) {\n                    if (this._isFraction(visitor[this.MQ.R])) {\n                        fractionNode = visitor[this.MQ.R];\n                    }\n                    visitor = visitor[this.MQ.R];\n                }\n\n                // Jump into it!\n                cursor.insLeftOf(fractionNode);\n                this.mathField.keystroke(\"Right\");\n                break;\n\n            case CursorContext.IN_NUMERATOR:\n                // HACK(charlie): I can't find a better way to do this. The goal\n                // is to place the cursor at the start of the matching\n                // denominator. So, we identify the appropriate node, and\n                // continue rightwards until we find ourselves inside of it.\n                // It's possible that there are cases in which we don't reach\n                // the denominator, though I can't think of any.\n                const siblingDenominator = cursor.parent.parent.blocks[1];\n                while (cursor.parent !== siblingDenominator) {\n                    this.mathField.keystroke(\"Right\");\n                }\n                break;\n\n            case CursorContext.IN_DENOMINATOR:\n                cursor.insRightOf(cursor.parent.parent);\n                break;\n\n            case CursorContext.IN_SUB_SCRIPT:\n                // Insert just beyond the superscript.\n                cursor.insRightOf(cursor.parent.parent);\n\n                // Navigate right once more, if we're right before parens. This\n                // is to handle the standard case in which the subscript is the\n                // base of a custom log.\n                if (this._isParens(cursor[this.MQ.R])) {\n                    this.mathField.keystroke(\"Right\");\n                }\n                break;\n\n            case CursorContext.IN_SUPER_SCRIPT:\n                // Insert just beyond the superscript.\n                cursor.insRightOf(cursor.parent.parent);\n                break;\n\n            default:\n                throw new Error(\n                    `Attempted to 'Jump Out' from node, but found no ` +\n                        `appropriate cursor context: ${context}`,\n                );\n        }\n    }\n\n    /**\n     * Selects and deletes part of the expression based on the cursor location.\n     * See inline comments for precise behavior of different cases.\n     *\n     * @param {cursor} cursor\n     * @private\n     */\n    _handleBackspace(cursor) {\n        if (!cursor.selection) {\n            const parent = cursor.parent;\n            const grandparent = parent.parent;\n            const leftNode = cursor[this.MQ.L];\n\n            if (this._isFraction(leftNode)) {\n                this._selectNode(leftNode, cursor);\n            } else if (this._isSquareRoot(leftNode)) {\n                this._selectNode(leftNode, cursor);\n            } else if (this._isNthRoot(leftNode)) {\n                this._selectNode(leftNode, cursor);\n            } else if (this._isNthRootIndex(parent)) {\n                this._handleBackspaceInRootIndex(cursor);\n            } else if (leftNode.ctrlSeq === \"\\\\left(\") {\n                this._handleBackspaceOutsideParens(cursor);\n            } else if (grandparent.ctrlSeq === \"\\\\left(\") {\n                this._handleBackspaceInsideParens(cursor);\n            } else if (this._isInsideLogIndex(cursor)) {\n                this._handleBackspaceInLogIndex(cursor);\n            } else if (\n                leftNode.ctrlSeq === \"\\\\ge \" ||\n                leftNode.ctrlSeq === \"\\\\le \"\n            ) {\n                this._handleBackspaceAfterLigaturedSymbol(cursor);\n            } else if (\n                this._isNthRoot(grandparent) &&\n                leftNode === ActionType.MQ_END\n            ) {\n                this._handleBackspaceInNthRoot(cursor);\n            } else {\n                this.mathField.keystroke(\"Backspace\");\n            }\n        } else {\n            this.mathField.keystroke(\"Backspace\");\n        }\n    }\n\n    _handleLeftArrow(cursor) {\n        // If we're inside a function, and just after the left parentheses, we\n        // need to skip the entire function name, rather than move the cursor\n        // inside of it. For example, when hitting left from within the\n        // parentheses in `cos()`, we want to place the cursor to the left of\n        // the entire expression, rather than between the `s` and the left\n        // parenthesis.\n        // From the cursor's perspective, this requires that our left node is\n        // the ActionType.MQ_END node, that our grandparent is the left parenthesis, and\n        // the nodes to the left of our grandparent comprise a valid function\n        // name.\n        if (cursor[this.MQ.L] === ActionType.MQ_END) {\n            const parent = cursor.parent;\n            const grandparent = parent.parent;\n            if (grandparent.ctrlSeq === \"\\\\left(\") {\n                const command = this._maybeFindCommandBeforeParens(grandparent);\n                if (command) {\n                    cursor.insLeftOf(command.startNode);\n                    return;\n                }\n            }\n        }\n\n        // Otherwise, we default to the standard MathQull left behavior.\n        this.mathField.keystroke(\"Left\");\n    }\n\n    _handleRightArrow(cursor) {\n        const command = this._maybeFindCommand(cursor[this.MQ.R]);\n        if (command) {\n            // Similarly, if a function is to our right, then we need to place\n            // the cursor at the start of its parenthetical content, which is\n            // done by putting it to the left of ites parentheses and then\n            // moving right once.\n            cursor.insLeftOf(command.endNode);\n            this.mathField.keystroke(\"Right\");\n        } else {\n            // Otherwise, we default to the standard MathQull right behavior.\n            this.mathField.keystroke(\"Right\");\n        }\n    }\n\n    _handleExponent(cursor, key) {\n        // If there's an invalid operator preceding the cursor (anything that\n        // knowingly cannot be raised to a power), add an empty set of\n        // parentheses and apply the exponent to that.\n        const invalidPrefixes = [...ArithmeticOperators, ...EqualityOperators];\n\n        const precedingNode = cursor[this.MQ.L];\n        const shouldPrefixWithParens =\n            precedingNode === ActionType.MQ_END ||\n            invalidPrefixes.includes(precedingNode.ctrlSeq.trim());\n        if (shouldPrefixWithParens) {\n            this.mathField.write(\"\\\\left(\\\\right)\");\n        }\n\n        // Insert the appropriate exponent operator.\n        switch (key) {\n            case Keys.EXP:\n                this.mathField.cmd(\"^\");\n                break;\n\n            case Keys.EXP_2:\n            case Keys.EXP_3:\n                this.mathField.write(`^${key === Keys.EXP_2 ? 2 : 3}`);\n\n                // If we enter a square or a cube, we should leave the cursor\n                // within the newly inserted parens, if they exist. This takes\n                // exactly four left strokes, since the cursor by default would\n                // end up to the right of the exponent.\n                if (shouldPrefixWithParens) {\n                    this.mathField.keystroke(\"Left\");\n                    this.mathField.keystroke(\"Left\");\n                    this.mathField.keystroke(\"Left\");\n                    this.mathField.keystroke(\"Left\");\n                }\n                break;\n\n            default:\n                throw new Error(`Invalid exponent key: ${key}`);\n        }\n    }\n\n    /**\n     * Return the start node, end node, and full name of the command of which\n     * the initial node is a part, or `null` if the node is not part of a\n     * command.\n     *\n     * @param {node} initialNode - the node to included as part of the command\n     * @returns {null|object} - `null` or an object containing the start node\n     *                          (`startNode`), end node (`endNode`), and full\n     *                          name (`name`) of the command\n     * @private\n     */\n    _maybeFindCommand(initialNode) {\n        if (!initialNode) {\n            return null;\n        }\n\n        // MathQuill stores commands as separate characters so that\n        // users can delete commands one character at a time.  We iterate over\n        // the nodes from right to left until we hit a sequence starting with a\n        // '\\\\', which signifies the start of a command; then we iterate from\n        // left to right until we hit a '\\\\left(', which signifies the end of a\n        // command.  If we encounter any character that doesn't belong in a\n        // command, we return null.  We match a single character at a time.\n        // Ex) ['\\\\l', 'o', 'g ', '\\\\left(', ...]\n        const commandCharRegex = /^[a-z]$/;\n        const commandStartRegex = /^\\\\[a-z]$/;\n        const commandEndSeq = \"\\\\left(\";\n\n        // Note: We allowlist the set of valid commands, since relying solely on\n        // a command being prefixed with a backslash leads to undesired\n        // behavior. For example, Greek symbols, left parentheses, and square\n        // roots all get treated as commands.\n        const validCommands = [\"\\\\log\", \"\\\\ln\", \"\\\\cos\", \"\\\\sin\", \"\\\\tan\"];\n\n        let name = \"\";\n        let startNode;\n        let endNode;\n\n        // Collect the portion of the command from the current node, leftwards\n        // until the start of the command.\n        let node = initialNode;\n        while (node !== 0) {\n            const ctrlSeq = node.ctrlSeq.trim();\n            if (commandCharRegex.test(ctrlSeq)) {\n                name = ctrlSeq + name;\n            } else if (commandStartRegex.test(ctrlSeq)) {\n                name = ctrlSeq + name;\n                startNode = node;\n                break;\n            } else {\n                break;\n            }\n\n            node = node[this.MQ.L];\n        }\n\n        // If we hit the start of a command, then grab the rest of it by\n        // iterating rightwards to compute the full name of the command, along\n        // with its terminal node.\n        if (startNode) {\n            // Next, iterate from the start to the right.\n            node = initialNode[this.MQ.R];\n            while (node !== 0) {\n                const ctrlSeq = node.ctrlSeq.trim();\n                if (commandCharRegex.test(ctrlSeq)) {\n                    // If we have a single character, add it to the command\n                    // name.\n                    name = name + ctrlSeq;\n                } else if (ctrlSeq === commandEndSeq) {\n                    // If we hit the command end delimiter (the left\n                    // parentheses surrounding its arguments), stop.\n                    endNode = node;\n                    break;\n                }\n\n                node = node[this.MQ.R];\n            }\n            if (validCommands.includes(name)) {\n                return {name, startNode, endNode};\n            } else {\n                return null;\n            }\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Return the start node, end node, and full name of the command to the left\n     * of `\\\\left(`, or `null` if there is no command.\n     *\n     * @param {node} leftParenNode - node where .ctrlSeq == `\\\\left(`\n     * @returns {null|object} - `null` or an object containing the start node\n     *                          (`startNode`), end node (`endNode`), and full\n     *                          name (`name`) of the command\n     * @private\n     */\n    _maybeFindCommandBeforeParens(leftParenNode) {\n        return this._maybeFindCommand(leftParenNode[this.MQ.L]);\n    }\n\n    _selectNode(node, cursor) {\n        cursor.insLeftOf(node);\n        cursor.startSelection();\n        cursor.insRightOf(node);\n        cursor.select();\n        cursor.endSelection();\n    }\n\n    _isFraction(node) {\n        return node.jQ && node.jQ.hasClass(\"mq-fraction\");\n    }\n\n    _isNumerator(node) {\n        return node.jQ && node.jQ.hasClass(\"mq-numerator\");\n    }\n\n    _isDenominator(node) {\n        return node.jQ && node.jQ.hasClass(\"mq-denominator\");\n    }\n\n    _isSubScript(node) {\n        // NOTE(charlie): MyScript has a structure whereby its superscripts seem\n        // to be represented as a parent node with 'mq-sup-only' containing a\n        // single child with 'mq-sup'.\n        return (\n            node.jQ &&\n            (node.jQ.hasClass(\"mq-sub-only\") || node.jQ.hasClass(\"mq-sub\"))\n        );\n    }\n\n    _isSuperScript(node) {\n        // NOTE(charlie): MyScript has a structure whereby its superscripts seem\n        // to be represented as a parent node with 'mq-sup-only' containing a\n        // single child with 'mq-sup'.\n        return (\n            node.jQ &&\n            (node.jQ.hasClass(\"mq-sup-only\") || node.jQ.hasClass(\"mq-sup\"))\n        );\n    }\n\n    _isParens(node) {\n        return node && node.ctrlSeq === \"\\\\left(\";\n    }\n\n    _isLeaf(node) {\n        return (\n            node && node.ctrlSeq && ValidLeaves.includes(node.ctrlSeq.trim())\n        );\n    }\n\n    _isSquareRoot(node) {\n        return (\n            node.blocks &&\n            node.blocks[0].jQ &&\n            node.blocks[0].jQ.hasClass(\"mq-sqrt-stem\")\n        );\n    }\n\n    _isNthRoot(node) {\n        return (\n            node.blocks &&\n            node.blocks[0].jQ &&\n            node.blocks[0].jQ.hasClass(\"mq-nthroot\")\n        );\n    }\n\n    _isNthRootIndex(node) {\n        return node.jQ && node.jQ.hasClass(\"mq-nthroot\");\n    }\n\n    _isInsideLogIndex(cursor) {\n        const grandparent = cursor.parent.parent;\n\n        if (grandparent && grandparent.jQ.hasClass(\"mq-supsub\")) {\n            const command = this._maybeFindCommandBeforeParens(grandparent);\n\n            if (command && command.name === \"\\\\log\") {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    _isInsideEmptyNode(cursor) {\n        return (\n            cursor[this.MQ.L] === ActionType.MQ_END &&\n            cursor[this.MQ.R] === ActionType.MQ_END\n        );\n    }\n\n    _handleBackspaceInRootIndex(cursor) {\n        if (this._isInsideEmptyNode(cursor)) {\n            // When deleting the index in a nthroot, we change from the nthroot\n            // to a sqrt, e.g. \\sqrt[|]{35x-5} => |\\sqrt{35x-5}.  If there's no\n            // content under the root, then we delete the whole thing.\n\n            const grandparent = cursor.parent.parent;\n            const latex = grandparent.latex();\n            const reinsertionPoint = grandparent[this.MQ.L];\n\n            this._selectNode(grandparent, cursor);\n\n            const rootIsEmpty = grandparent.blocks[1].jQ.text() === \"\";\n\n            if (rootIsEmpty) {\n                // If there is not content under the root then simply delete\n                // the whole thing.\n                this.mathField.keystroke(\"Backspace\");\n            } else {\n                // Replace the nthroot with a sqrt if there was content under\n                // the root.\n\n                // Start by deleting the selection.\n                this.mathField.keystroke(\"Backspace\");\n\n                // Replace the nth-root with a sqrt.\n                this.mathField.write(latex.replace(/^\\\\sqrt\\[\\]/, \"\\\\sqrt\"));\n\n                // Adjust the cursor to be to the left the sqrt.\n                if (reinsertionPoint === ActionType.MQ_END) {\n                    this.mathField.moveToDirEnd(this.MQ.L);\n                } else {\n                    cursor.insRightOf(reinsertionPoint);\n                }\n            }\n        } else {\n            if (cursor[this.MQ.L] !== ActionType.MQ_END) {\n                // If the cursor is not at the leftmost position inside the\n                // root's index, delete a character.\n                this.mathField.keystroke(\"Backspace\");\n            } else {\n                // TODO(kevinb) verify that we want this behavior after testing\n                // Do nothing because we haven't completely deleted the\n                // index of the radical.\n            }\n        }\n    }\n\n    _handleBackspaceInLogIndex(cursor) {\n        if (this._isInsideEmptyNode(cursor)) {\n            const grandparent = cursor.parent.parent;\n            const command = this._maybeFindCommandBeforeParens(grandparent);\n\n            cursor.insLeftOf(command?.startNode);\n            cursor.startSelection();\n\n            if (grandparent[this.MQ.R] !== ActionType.MQ_END) {\n                cursor.insRightOf(grandparent[this.MQ.R]);\n            } else {\n                cursor.insRightOf(grandparent);\n            }\n\n            cursor.select();\n            cursor.endSelection();\n\n            const isLogBodyEmpty =\n                grandparent[this.MQ.R].contentjQ.text() === \"\";\n\n            if (isLogBodyEmpty) {\n                // If there's no content inside the log's parens then delete the\n                // whole thing.\n                this.mathField.keystroke(\"Backspace\");\n            }\n        } else {\n            this.mathField.keystroke(\"Backspace\");\n        }\n    }\n\n    _handleBackspaceOutsideParens(cursor) {\n        // In this case the node with '\\\\left(' for its ctrlSeq\n        // is the parent of the expression contained within the\n        // parentheses.\n        //\n        // Handle selecting an expression before deleting:\n        // (x+1)| => |(x+1)|\n        // \\log(x+1)| => |\\log(x+1)|\n\n        const leftNode = cursor[this.MQ.L];\n        const rightNode = cursor[this.MQ.R];\n        const command = this._maybeFindCommandBeforeParens(leftNode);\n\n        if (command && command.startNode) {\n            // There's a command before the parens so we select it as well as\n            // the parens.\n            cursor.insLeftOf(command.startNode);\n            cursor.startSelection();\n            if (rightNode === ActionType.MQ_END) {\n                cursor.insAtRightEnd(cursor.parent);\n            } else {\n                cursor.insLeftOf(rightNode);\n            }\n            cursor.select();\n            cursor.endSelection();\n        } else {\n            cursor.startSelection();\n            cursor.insLeftOf(leftNode); // left of \\\\left(\n            cursor.select();\n            cursor.endSelection();\n        }\n    }\n\n    _handleBackspaceInsideParens(cursor) {\n        // Handle situations when the cursor is inside parens or a\n        // command that uses parens, e.g. \\log() or \\tan()\n        //\n        // MathQuill represents log(x+1) in roughly the following way\n        // [l, o, g, \\\\left[parent:[x, +, 1]]]\n        //\n        // If the cursor is inside the parentheses it's next to one of:\n        // x, +, or 1.  This makes sub_sub_expr its parent and sub_expr\n        // it's parent.\n        //\n        // Interestingly parent doesn't have any nodes to the left or\n        // right of it (even though the corresponding DOM node has\n        // ( and ) characters on either side.\n        //\n        // The grandparent's ctrlSeq is `\\\\left(`. The `\\\\right)` isn't\n        // stored anywhere.  NOTE(kevinb): I believe this is because\n        // MathQuill knows what the close paren should be and does the\n        // right thing at render time.\n        //\n        // This conditional branch handles the following cases:\n        // - \\log(x+1|) => \\log(x+|)\n        // - \\log(|x+1) => |\\log(x+1)|\n        // - \\log(|) => |\n\n        if (cursor[this.MQ.L] !== ActionType.MQ_END) {\n            // This command contains math and there's some math to\n            // the left of the cursor that we should delete normally\n            // before doing anything special.\n            this.mathField.keystroke(\"Backspace\");\n            return;\n        }\n\n        const grandparent = cursor.parent.parent;\n\n        // If the cursors is inside the parens at the start but the command\n        // has a subscript as is the case in log_n then move the cursor into\n        // the subscript, e.g. \\log_{5}(|x+1) => \\log_{5|}(x+1)\n\n        if (grandparent[this.MQ.L].sub) {\n            // if there is a subscript\n            if (grandparent[this.MQ.L].sub.jQ.text()) {\n                // and it contains text\n                // move the cursor to the right end of the subscript\n                cursor.insAtRightEnd(grandparent[this.MQ.L].sub);\n                return;\n            }\n        }\n\n        // Determine if the parens are empty before we modify the\n        // cursor's position.\n        const isEmpty = this._isInsideEmptyNode(cursor);\n\n        // Insert the cursor to the left of the command if there is one\n        // or before the '\\\\left(` if there isn't\n        const command = this._maybeFindCommandBeforeParens(grandparent);\n\n        cursor.insLeftOf((command && command.startNode) || grandparent);\n        cursor.startSelection();\n        cursor.insRightOf(grandparent);\n        cursor.select();\n        cursor.endSelection();\n\n        // Delete the selection, but only if the parens were empty to\n        // begin with.\n        if (isEmpty) {\n            this.mathField.keystroke(\"Backspace\");\n        }\n    }\n\n    _handleBackspaceAfterLigaturedSymbol(cursor) {\n        this.mathField.keystroke(\"Backspace\");\n        this.mathField.keystroke(\"Backspace\");\n    }\n\n    contextForCursor(cursor) {\n        // First, try to find any fraction to the right, unimpeded.\n        let visitor = cursor;\n        while (visitor[this.MQ.R] !== ActionType.MQ_END) {\n            if (this._isFraction(visitor[this.MQ.R])) {\n                return CursorContext.BEFORE_FRACTION;\n            } else if (!this._isLeaf(visitor[this.MQ.R])) {\n                break;\n            }\n            visitor = visitor[this.MQ.R];\n        }\n\n        // If that didn't work, check if the parent or grandparent is a special\n        // context, so that we can jump outwards.\n        if (this._isParens(cursor.parent && cursor.parent.parent)) {\n            return CursorContext.IN_PARENS;\n        } else if (this._isNumerator(cursor.parent)) {\n            return CursorContext.IN_NUMERATOR;\n        } else if (this._isDenominator(cursor.parent)) {\n            return CursorContext.IN_DENOMINATOR;\n        } else if (this._isSubScript(cursor.parent)) {\n            return CursorContext.IN_SUB_SCRIPT;\n        } else if (this._isSuperScript(cursor.parent)) {\n            return CursorContext.IN_SUPER_SCRIPT;\n        } else {\n            return CursorContext.NONE;\n        }\n    }\n\n    _isAtTopLevel(cursor) {\n        return !cursor.parent.parent;\n    }\n}\n\nexport default MathWrapper;\n","/**\n * A single function used to scroll a DOM node into view, optionally taking into\n * account that it may be obscured by the custom keypad. The logic makes the\n * strong assumption that the keypad will be anchored to the bottom of the page\n * in calculating its height, as this method may be called before the keypad has\n * animated into view.\n *\n * TODO(charlie): Move this scroll logic out of our components and into a higher\n * level in the component tree--perhaps even into webapp, beyond Perseus.\n */\n\nimport {toolbarHeightPx} from \"../common-style\";\n\nexport const scrollIntoView = (containerNode, keypadNode) => {\n    // TODO(charlie): There's no need for us to be reading the keypad bounds\n    // here, since they're pre-determined by logic in the store. We should\n    // instead pass around an object that knows the bounds.\n    const containerBounds = containerNode.getBoundingClientRect();\n    const containerBottomPx = containerBounds.bottom;\n    const containerTopPx = containerBounds.top;\n\n    // Get the element that scrolls the document.\n    const scrollNode = document.scrollingElement;\n\n    const desiredMarginPx = 16;\n\n    if (keypadNode) {\n        // NOTE(charlie): We can't use the bounding rect of the keypad,\n        // as it is likely in the process of animating in. Instead, to\n        // calculate its top, we make the strong assumption that the\n        // keypad will end up anchored at the bottom of the page, but above the\n        // toolbar, and use its height, which is known at this point. Note that,\n        // in the native apps (where the toolbar is rendered natively), this\n        // will result in us leaving excess space between the input and the\n        // keypad, but that seems okay.\n        const pageHeightPx = window.innerHeight;\n        const keypadHeightPx = keypadNode.clientHeight;\n        const keypadTopPx = pageHeightPx - (keypadHeightPx + toolbarHeightPx);\n\n        if (containerBottomPx > keypadTopPx) {\n            // If the input would be obscured by the keypad, scroll such that\n            // the bottom of the input is just above the top of the keypad,\n            // taking care not to scroll the input out of view.\n            const scrollOffset = Math.min(\n                containerBottomPx - keypadTopPx + desiredMarginPx,\n                containerTopPx,\n            );\n\n            if (scrollNode) {\n                scrollNode.scrollTop += scrollOffset;\n            }\n            return;\n        }\n    }\n\n    // Alternatively, if the input is out of the viewport or nearly out\n    // of the viewport, scroll it into view. We can do this regardless\n    // of whether the keypad has been provided.\n    if (scrollNode && containerTopPx < desiredMarginPx) {\n        scrollNode.scrollTop -= containerBounds.height + desiredMarginPx;\n    }\n};\n","import Color from \"@khanacademy/wonder-blocks-color\";\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\nimport {entries} from \"@khanacademy/wonder-stuff-core\";\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport Keys from \"../../data/keys\";\nimport {View} from \"../../fake-react-native-web/index\";\nimport {\n    cursorHandleRadiusPx,\n    cursorHandleDistanceMultiplier,\n    wonderBlocksBlue,\n    offBlack,\n} from \"../common-style\";\nimport ProvidedKeypad from \"../provided-keypad\";\n\nimport CursorHandle from \"./cursor-handle\";\nimport DragListener from \"./drag-listener\";\nimport MathWrapper from \"./math-wrapper\";\nimport {scrollIntoView} from \"./scroll-into-view\";\n\nimport type {Cursor} from \"../../types\";\n\nconst constrainingFrictionFactor = 0.8;\n\ntype Props = {\n    keypadElement: ProvidedKeypad;\n    onBlur: () => void;\n    onChange: (value: string, callback: any) => void;\n    onFocus: () => void;\n    style: any;\n    value: string;\n};\n\ntype DefaultProps = {\n    style: Props[\"style\"];\n    value: Props[\"value\"];\n};\n\ntype HandleState = {\n    animateIntoPosition?: boolean;\n    visible: boolean;\n    x?: number;\n    y?: number;\n};\n\ntype State = {\n    focused: boolean;\n    handle: HandleState;\n};\n\n// eslint-disable-next-line react/no-unsafe\nclass MathInput extends React.Component<Props, State> {\n    didTouchOutside: boolean | null | undefined;\n    didScroll: boolean | null | undefined;\n    mathField: any;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'recordTouchStartOutside' has no initializer and is not definitely assigned in the constructor.\n    recordTouchStartOutside: (arg1: any) => void;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property 'blurOnTouchEndOutside' has no initializer and is not definitely assigned in the constructor.\n    blurOnTouchEndOutside: (arg1: any) => void;\n    dragListener: any;\n    inputRef: HTMLDivElement | null | undefined;\n    _isMounted: boolean | null | undefined;\n    _mathContainer: any;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_container' has no initializer and is not definitely assigned in the constructor.\n    _container: HTMLDivElement;\n    _root: any;\n    // @ts-expect-error [FEI-5003] - TS2564 - Property '_containerBounds' has no initializer and is not definitely assigned in the constructor.\n    _containerBounds: ClientRect;\n    _keypadBounds: ClientRect | null | undefined;\n\n    static defaultProps: DefaultProps = {\n        style: {},\n        value: \"\",\n    };\n\n    state: State = {\n        focused: false,\n        handle: {\n            animateIntoPosition: false,\n            visible: false,\n            x: 0,\n            y: 0,\n        },\n    };\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        this.mathField = new MathWrapper(\n            this._mathContainer,\n            {},\n            {\n                onCursorMove: (cursor: Cursor) => {\n                    // TODO(charlie): It's not great that there is so much coupling\n                    // between this keypad and the input behavior. We should wrap\n                    // this `MathInput` component in an intermediary component\n                    // that translates accesses on the keypad into vanilla props,\n                    // to make this input keypad-agnostic.\n                    this.props.keypadElement &&\n                        this.props.keypadElement.setCursor(cursor);\n                },\n            },\n        );\n\n        // NOTE(charlie): MathQuill binds this handler to manage its\n        // drag-to-select behavior. For reasons that I can't explain, the event\n        // itself gets triggered even if you tap slightly outside of the\n        // bound container (maybe 5px outside of any boundary). As a result, the\n        // cursor appears when tapping at those locations, even though the input\n        // itself doesn't receive any touch start or mouse down event and, as\n        // such, doesn't focus itself. This makes for a confusing UX, as the\n        // cursor appears, but the keypad does not and the input otherwise\n        // treats itself as unfocused. Thankfully, we don't need this behavior--\n        // we manage all of the cursor interactions ourselves--so we can safely\n        // unbind the handler.\n        this.mathField.mathField.__controller.container.unbind(\n            \"mousedown.mathquill\",\n        );\n\n        this.mathField.setContent(this.props.value);\n\n        this._updateInputPadding();\n\n        this._container = ReactDOM.findDOMNode(this) as HTMLDivElement;\n        this._root = this._container.querySelector(\".mq-root-block\");\n        this._root.addEventListener(\"scroll\", this._handleScroll);\n\n        // Record the initial scroll displacement on touch start. This allows\n        // us to detect whether a touch event was a scroll and only blur the\n        // input on non-scrolls--blurring the input on scroll makes for a\n        // frustrating user experience.\n        this.recordTouchStartOutside = (evt: any) => {\n            if (this.state.focused) {\n                // Only blur if the touch is both outside of the input, and\n                // above or to the left or right of the keypad (if it has been\n                // provided). The reasoning for not blurring when touches occur\n                // below the keypad is that the keypad may be anchored above\n                // the 'Check answer' bottom bar, in which case, we don't want\n                // to dismiss the keypad on check.\n                // TODO(charlie): Inject this logic.\n                if (!this._container.contains(evt.target)) {\n                    let touchDidStartInOrBelowKeypad = false;\n                    if (\n                        this.props.keypadElement &&\n                        this.props.keypadElement.getDOMNode()\n                    ) {\n                        const bounds = this._getKeypadBounds();\n                        for (let i = 0; i < evt.changedTouches.length; i++) {\n                            const [x, y] = [\n                                evt.changedTouches[i].clientX,\n                                evt.changedTouches[i].clientY,\n                            ];\n                            if (\n                                (bounds.left <= x &&\n                                    bounds.right >= x &&\n                                    bounds.top <= y &&\n                                    bounds.bottom >= y) ||\n                                bounds.bottom < y\n                            ) {\n                                touchDidStartInOrBelowKeypad = true;\n                                break;\n                            }\n                        }\n                    }\n\n                    if (!touchDidStartInOrBelowKeypad) {\n                        this.didTouchOutside = true;\n\n                        if (this.dragListener) {\n                            this.dragListener.detach();\n                        }\n\n                        this.dragListener = new DragListener(() => {\n                            this.didScroll = true;\n                            this.dragListener.detach();\n                        }, evt);\n                        this.dragListener.attach();\n                    }\n                }\n            }\n        };\n\n        this.blurOnTouchEndOutside = (evt) => {\n            // If the user didn't scroll, blur the input.\n            // TODO(charlie): Verify that the touch that ended actually started\n            // outside the keypad. Right now, you can touch down on the keypad,\n            // touch elsewhere, release the finger on the keypad, and trigger a\n            // dismissal. This code needs to be generalized to handle\n            // multi-touch.\n            if (this.state.focused && this.didTouchOutside && !this.didScroll) {\n                this.blur();\n            }\n\n            this.didTouchOutside = false;\n            this.didScroll = false;\n\n            if (this.dragListener) {\n                this.dragListener.detach();\n            }\n        };\n\n        window.addEventListener(\"touchstart\", this.recordTouchStartOutside);\n        window.addEventListener(\"touchend\", this.blurOnTouchEndOutside);\n        window.addEventListener(\"touchcancel\", this.blurOnTouchEndOutside);\n\n        // HACK(benkomalo): if the window resizes, the keypad bounds can\n        // change. That's a bit peeking into the internals of the keypad\n        // itself, since we know bounds can change only when the viewport\n        // changes, but seems like a rare enough thing to get wrong that it's\n        // not worth wiring up extra things for the technical \"purity\" of\n        // having the keypad notify of changes to us.\n        window.addEventListener(\"resize\", this._clearKeypadBoundsCache);\n        window.addEventListener(\n            \"orientationchange\",\n            this._clearKeypadBoundsCache,\n        );\n    }\n\n    UNSAFE_componentWillReceiveProps(props: Props) {\n        if (this.props.keypadElement !== props.keypadElement) {\n            this._clearKeypadBoundsCache();\n        }\n    }\n\n    componentDidUpdate(prevProps: Props, prevState: State) {\n        if (this.mathField.getContent() !== this.props.value) {\n            this.mathField.setContent(this.props.value);\n        }\n\n        if (prevState.focused !== this.state.focused) {\n            this._updateInputPadding();\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n\n        window.removeEventListener(\"touchstart\", this.recordTouchStartOutside);\n        window.removeEventListener(\"touchend\", this.blurOnTouchEndOutside);\n        window.removeEventListener(\"touchcancel\", this.blurOnTouchEndOutside);\n        // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n        window.removeEventListener(\"resize\", this._clearKeypadBoundsCache());\n        window.removeEventListener(\n            \"orientationchange\",\n            // @ts-expect-error [FEI-5003] - TS2769 - No overload matches this call.\n            this._clearKeypadBoundsCache(),\n        );\n    }\n\n    _clearKeypadBoundsCache: () => void = () => {\n        this._keypadBounds = null;\n    };\n\n    _cacheKeypadBounds: (arg1: any) => void = (keypadNode) => {\n        this._keypadBounds = keypadNode.getBoundingClientRect();\n    };\n\n    _updateInputPadding: () => void = () => {\n        this._container = ReactDOM.findDOMNode(this) as HTMLDivElement;\n        this._root = this._container.querySelector(\".mq-root-block\");\n\n        const padding = this.getInputInnerPadding();\n        // NOTE(diedra): This overrides the default 2px padding from Mathquil.\n        this._root.style.padding =\n            `${padding.paddingTop}px ${padding.paddingRight}px` +\n            ` ${padding.paddingBottom}px ${padding.paddingLeft}px`;\n        this._root.style.fontSize = `${fontSizePt}pt`;\n    };\n\n    /** Gets and cache they bounds of the keypadElement */\n    _getKeypadBounds: () => any = () => {\n        if (!this._keypadBounds) {\n            const node = this.props.keypadElement.getDOMNode();\n            this._cacheKeypadBounds(node);\n        }\n        return this._keypadBounds;\n    };\n\n    _updateCursorHandle: (arg1?: boolean) => void = (animateIntoPosition) => {\n        const containerBounds = this._container.getBoundingClientRect();\n        const cursor: any = this._container.querySelector(\".mq-cursor\");\n        const cursorBounds = cursor.getBoundingClientRect();\n\n        const cursorWidth = cursorBounds.width;\n        const gapBelowCursor = 2;\n\n        const inputInnerPadding = this.getInputInnerPadding();\n\n        // The cursor should never be further right or left than the edge of the\n        // container's values.\n        const furthestRightCursorBound =\n            containerBounds.right -\n            cursorWidth -\n            inputInnerPadding.paddingRight;\n        const furthestLeftCursorBound =\n            containerBounds.left + cursorWidth + inputInnerPadding.paddingLeft;\n\n        let cursorBoundsLeft = cursorBounds.left;\n        if (cursorBounds.left > furthestRightCursorBound) {\n            cursorBoundsLeft = furthestRightCursorBound;\n        } else if (cursorBounds.left < furthestLeftCursorBound) {\n            cursorBoundsLeft = furthestLeftCursorBound;\n        }\n\n        this.setState({\n            handle: {\n                visible: true,\n                animateIntoPosition,\n                // We subtract containerBounds' left/top to correct for the\n                // position of the container within the page.\n                x: cursorBoundsLeft + cursorWidth / 2 - containerBounds.left,\n                y: cursorBounds.bottom + gapBelowCursor - containerBounds.top,\n            },\n        });\n    };\n\n    _hideCursorHandle: () => void = () => {\n        this.setState({\n            handle: {\n                visible: false,\n                x: 0,\n                y: 0,\n            },\n        });\n    };\n\n    _handleScroll: () => void = () => {\n        // If animateIntoPosition is false, the user is currently manually positioning\n        // the cursor. This is important because the user can scroll the input field\n        // with the curor handle, and we don't want to override that ability.\n        // But we do want to hide the handle is the user is just scrolling the input field\n        // normally, because the handle will not move with the scroll.\n        if (this.state.handle.animateIntoPosition !== false) {\n            this._hideCursorHandle();\n        }\n    };\n\n    blur: () => void = () => {\n        this.mathField.blur();\n        this.props.onBlur && this.props.onBlur();\n        this.setState({focused: false, handle: {visible: false}});\n    };\n\n    focus: () => void = () => {\n        // Pass this component's handleKey method to the keypad so it can call\n        // it whenever it needs to trigger a keypress action.\n        this.props.keypadElement.setKeyHandler((key) => {\n            const cursor = this.mathField.pressKey(key);\n\n            // Trigger an `onChange` if the value in the input changed, and hide\n            // the cursor handle whenever the user types a key. If the value\n            // changed as a result of a keypress, we need to be careful not to\n            // call `setState` until after `onChange` has resolved.\n            const hideCursor = () => {\n                this.setState({\n                    handle: {\n                        visible: false,\n                    },\n                });\n            };\n            const value = this.mathField.getContent();\n            if (this.props.value !== value) {\n                this.props.onChange(value, hideCursor);\n            } else {\n                hideCursor();\n            }\n\n            return cursor;\n        });\n\n        this.mathField.focus();\n        this.props.onFocus && this.props.onFocus();\n        this.setState({focused: true}, () => {\n            // NOTE(charlie): We use `setTimeout` to allow for a layout pass to\n            // occur. Otherwise, the keypad is measured incorrectly. Ideally,\n            // we'd use requestAnimationFrame here, but it's unsupported on\n            // Android Browser 4.3.\n            setTimeout(() => {\n                if (this._isMounted) {\n                    // TODO(benkomalo): the keypad is animating at this point,\n                    // so we can't call _cacheKeypadBounds(), even though\n                    // it'd be nice to do so. It should probably be the case\n                    // that the higher level controller tells us when the\n                    // keypad is settled (then scrollIntoView wouldn't have\n                    // to make assumptions about that either).\n                    const maybeKeypadNode =\n                        this.props.keypadElement &&\n                        this.props.keypadElement.getDOMNode();\n                    scrollIntoView(this._container, maybeKeypadNode);\n                }\n            });\n        });\n    };\n\n    /**\n     * Tries to determine which DOM node to place the cursor next to based on\n     * where the user drags the cursor handle.  If it finds a node it will\n     * place the cursor next to it, update the handle to be under the cursor,\n     * and return true.  If it doesn't find a node, it returns false.\n     *\n     * It searches for nodes by doing it tests at the following points:\n     *\n     *   (x - dx, y), (x, y), (x + dx, y)\n     *\n     * If it doesn't find any nodes from the rendered math it will update y\n     * by adding dy.\n     *\n     * The algorithm ends its search when y goes outside the bounds of\n     * containerBounds.\n     *\n     * @param {DOMRect} containerBounds - bounds of the container node\n     * @param {number} x - the initial x coordinate in the viewport\n     * @param {number} y - the initial y coordinate in the viewport\n     * @param {number} dx - horizontal spacing between elementFromPoint calls\n     * @param {number} dy - vertical spacing between elementFromPoint calls,\n     *                      sign determines direction.\n     * @returns {boolean} - true if a node was hit, false otherwise.\n     */\n    _findHitNode: (\n        arg1: ClientRect,\n        arg2: number,\n        arg3: number,\n        arg4: number,\n        arg5: number,\n    ) => boolean = (containerBounds, x, y, dx, dy) => {\n        while (y >= containerBounds.top && y <= containerBounds.bottom) {\n            y += dy;\n\n            const points = [\n                [x - dx, y],\n                [x, y],\n                [x + dx, y],\n            ];\n\n            const elements = points\n                // @ts-expect-error [FEI-5003] - TS2556 - A spread argument must either have a tuple type or be passed to a rest parameter.\n                .map((point) => document.elementFromPoint(...point))\n                // We exclude the root container itself and any nodes marked\n                // as non-leaf which are fractions, parens, and roots.  The\n                // children of those nodes are included in the list because\n                // those are the items we care about placing the cursor next\n                // to.\n                //\n                // MathQuill's mq-non-leaf is not applied to all non-leaf nodes\n                // so the naming is a bit confusing.  Although fractions are\n                // included, neither mq-numerator nor mq-denominator nodes are\n                // and neither are subscripts or superscripts.\n                .filter(\n                    (element) =>\n                        element &&\n                        this._root.contains(element) &&\n                        ((!element.classList.contains(\"mq-root-block\") &&\n                            !element.classList.contains(\"mq-non-leaf\")) ||\n                            element.classList.contains(\"mq-empty\") ||\n                            element.classList.contains(\"mq-hasCursor\")),\n                );\n\n            let hitNode = null;\n\n            // Contains only DOMNodes without child elements.  These should\n            // contain some amount of text though.\n            const leafElements: ReadonlyArray<null | HTMLElement> = [];\n\n            // Contains only DOMNodes with child elements.\n            const nonLeafElements: ReadonlyArray<null | HTMLElement> = [];\n\n            let max = 0;\n            const counts: {\n                [key: string]: number;\n            } = {};\n            const elementsById: Record<string, any> = {};\n\n            for (const element of elements) {\n                // @ts-expect-error [FEI-5003] - TS2531 - Object is possibly 'null'.\n                const id = element.getAttribute(\"mathquill-command-id\");\n                if (id != null) {\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Element | null' is not assignable to parameter of type 'HTMLElement | null'.\n                    leafElements.push(element);\n\n                    counts[id] = (counts[id] || 0) + 1;\n                    elementsById[id] = element;\n                } else {\n                    // @ts-expect-error [FEI-5003] - TS2345 - Argument of type 'Element | null' is not assignable to parameter of type 'HTMLElement | null'.\n                    nonLeafElements.push(element);\n                }\n            }\n\n            // When determining which DOMNode to place the cursor beside, we\n            // prefer leaf nodes.  Hitting a leaf node is a good sign that the\n            // cursor is really close to some piece of math that has been\n            // rendered because leaf nodes contain text.  Non-leaf nodes may\n            // contain a lot of whitespace so the cursor may be further away\n            // from actual text within the expression.\n            //\n            // Since we're doing three hit tests per loop it's possible that\n            // we hit multiple leaf nodes at the same time.  In this case we\n            // we prefer the DOMNode with the most hits.\n            // TODO(kevinb) consider preferring nodes hit by [x, y].\n            for (const [id, count] of entries(counts)) {\n                if (count > max) {\n                    max = count;\n                    hitNode = elementsById[id];\n                }\n            }\n\n            // It's possible that two non-leaf nodes are right beside each\n            // other.  We don't bother counting the number of hits for each,\n            // b/c this seems like an unlikely situation.  Also, ignoring the\n            // hit count in the situation should not have serious effects on\n            // the overall accuracy of the algorithm.\n            if (hitNode == null && nonLeafElements.length > 0) {\n                // @ts-expect-error [FEI-5003] - TS2322 - Type 'HTMLElement | null' is not assignable to type 'null'.\n                hitNode = nonLeafElements[0];\n            }\n\n            if (hitNode !== null) {\n                this.mathField.setCursorPosition(x, y, hitNode);\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    /**\n     * Inserts the cursor at the DOM node closest to the given coordinates,\n     * based on hit-tests conducted using #_findHitNode.\n     *\n     * @param {number} x - the x coordinate in the viewport\n     * @param {number} y - the y coordinate in the viewport\n     */\n    _insertCursorAtClosestNode: (arg1: number, arg2: number) => void = (\n        x,\n        y,\n    ) => {\n        const cursor = this.mathField.getCursor();\n\n        // Pre-emptively check if the input has any child nodes; if not, the\n        // input is empty, so we throw the cursor at the start.\n        if (!this._root.hasChildNodes()) {\n            cursor.insAtLeftEnd(this.mathField.mathField.__controller.root);\n            return;\n        }\n\n        // NOTE(diedra): The adding and subtracting of 10 or 15 pixels here accounts\n        // for the padding that surrounds the input values.\n        if (y > this._containerBounds.bottom) {\n            y = this._containerBounds.bottom - 10;\n        } else if (y < this._containerBounds.top) {\n            y = this._containerBounds.top + 10;\n        }\n        if (x > this._containerBounds.right) {\n            x = this._containerBounds.right - 15;\n        } else if (x < this._containerBounds.left) {\n            x = this._containerBounds.left + 15;\n        }\n\n        let dy;\n\n        // Vertical spacing between hit tests\n        // dy is negative because we're moving upwards.\n        dy = -8;\n\n        // Horizontal spacing between hit tests\n        // Note: This value depends on the font size.  If the gap is too small\n        // we end up placing the cursor at the end of the expression when we\n        // shouldn't.\n        const dx = 5;\n\n        if (this._findHitNode(this._containerBounds, x, y, dx, dy)) {\n            return;\n        }\n\n        // If we haven't found anything start from the top.\n        y = this._containerBounds.top;\n\n        // dy is positive b/c we're going downwards.\n        dy = 8;\n\n        if (this._findHitNode(this._containerBounds, x, y, dx, dy)) {\n            return;\n        }\n\n        const firstChildBounds = this._root.firstChild.getBoundingClientRect();\n        const lastChildBounds = this._root.lastChild.getBoundingClientRect();\n\n        const left = firstChildBounds.left;\n        const right = lastChildBounds.right;\n\n        // We've exhausted all of the options. We're likely either to the right\n        // or left of all of the math, so we place the cursor at the end to\n        // which it's closest.\n        if (Math.abs(x - right) < Math.abs(x - left)) {\n            cursor.insAtRightEnd(this.mathField.mathField.__controller.root);\n        } else {\n            cursor.insAtLeftEnd(this.mathField.mathField.__controller.root);\n        }\n        // In that event, we need to update the cursor context ourselves.\n        this.props.keypadElement &&\n            this.props.keypadElement.setCursor({\n                context: this.mathField.contextForCursor(cursor),\n            });\n    };\n\n    handleTouchStart: (arg1: React.TouchEvent<HTMLDivElement>) => void = (\n        e,\n    ) => {\n        e.stopPropagation();\n\n        // Hide the cursor handle on touch start, if the handle itself isn't\n        // handling the touch event.\n        this._hideCursorHandle();\n\n        // Cache the container bounds, so as to avoid re-computing. If we don't\n        // have any content, then it's not necessary, since the cursor can't be\n        // moved anyway.\n        if (this.mathField.getContent() !== \"\") {\n            this._containerBounds = this._container.getBoundingClientRect();\n\n            // Make the cursor visible and set the handle-less cursor's\n            // location.\n            const touch = e.changedTouches[0];\n            this._insertCursorAtClosestNode(touch.clientX, touch.clientY);\n        }\n\n        // Trigger a focus event, if we're not already focused.\n        if (!this.state.focused) {\n            this.focus();\n        }\n    };\n\n    handleTouchMove: (arg1: React.TouchEvent<HTMLDivElement>) => void = (e) => {\n        e.stopPropagation();\n\n        // Update the handle-less cursor's location on move, if there's any\n        // content in the box. Note that if the user touched outside the keypad\n        // (e.g., with a different finger) during this touch interaction, we\n        // may have blurred, in which case we should ignore the touch (since\n        // the cursor is no longer visible and the input is no longer\n        // highlighted).\n        if (this.mathField.getContent() !== \"\" && this.state.focused) {\n            const touch = e.changedTouches[0];\n            this._insertCursorAtClosestNode(touch.clientX, touch.clientY);\n        }\n    };\n\n    handleTouchEnd: (arg1: React.TouchEvent<HTMLDivElement>) => void = (e) => {\n        e.stopPropagation();\n\n        // And on touch-end, reveal the cursor, unless the input is empty. Note\n        // that if the user touched outside the keypad (e.g., with a different\n        // finger) during this touch interaction, we may have blurred, in which\n        // case we should ignore the touch (since the cursor is no longer\n        // visible and the input is no longer highlighted).\n        if (this.mathField.getContent() !== \"\" && this.state.focused) {\n            this._updateCursorHandle();\n        }\n    };\n\n    /**\n     * When a touch starts in the cursor handle, we track it so as to avoid\n     * handling any touch events ourself.\n     *\n     * @param {TouchEvent} e - the raw touch event from the browser\n     */\n    onCursorHandleTouchStart: (\n        arg1: React.TouchEvent<HTMLSpanElement>,\n    ) => void = (e) => {\n        // NOTE(charlie): The cursor handle is a child of this view, so whenever\n        // it receives a touch event, that event would also typically be bubbled\n        // up to our own handlers. However, we want the cursor to handle its own\n        // touch events, and for this view to only handle touch events that\n        // don't affect the cursor. As such, we `stopPropagation` on any touch\n        // events that are being handled by the cursor, so as to avoid handling\n        // them in our own touch handlers.\n        e.stopPropagation();\n\n        e.preventDefault();\n\n        // Cache the container bounds, so as to avoid re-computing.\n        this._containerBounds = this._container.getBoundingClientRect();\n    };\n\n    _constrainToBound: (\n        arg1: number,\n        arg2: number,\n        arg3: number,\n        arg4: number,\n    ) => number = (value, min, max, friction) => {\n        if (value < min) {\n            return min + (value - min) * friction;\n        } else if (value > max) {\n            return max + (value - max) * friction;\n        } else {\n            return value;\n        }\n    };\n\n    /**\n     * When the user moves the cursor handle update the position of the cursor\n     * and the handle.\n     *\n     * @param {TouchEvent} e - the raw touch event from the browser\n     */\n    onCursorHandleTouchMove: (arg1: React.TouchEvent<HTMLSpanElement>) => void =\n        (e) => {\n            e.stopPropagation();\n\n            const x = e.changedTouches[0].clientX;\n            const y = e.changedTouches[0].clientY;\n\n            const relativeX = x - this._containerBounds.left;\n            const relativeY =\n                y -\n                2 * cursorHandleRadiusPx * cursorHandleDistanceMultiplier -\n                this._containerBounds.top;\n\n            // We subtract the containerBounds left/top to correct for the\n            // MathInput's position on the page. On top of that, we subtract an\n            // additional 2 x {height of the cursor} so that the bottom of the\n            // cursor tracks the user's finger, to make it visible under their\n            // touch.\n            this.setState({\n                handle: {\n                    animateIntoPosition: false,\n                    visible: true,\n                    // TODO(charlie): Use clientX and clientY to avoid the need for\n                    // scroll offsets. This likely also means that the cursor\n                    // detection doesn't work when scrolled, since we're not\n                    // offsetting those values.\n                    x: this._constrainToBound(\n                        relativeX,\n                        0,\n                        this._containerBounds.width,\n                        constrainingFrictionFactor,\n                    ),\n                    y: this._constrainToBound(\n                        relativeY,\n                        0,\n                        this._containerBounds.height,\n                        constrainingFrictionFactor,\n                    ),\n                },\n            });\n\n            // Use a y-coordinate that's just above where the user is actually\n            // touching because they're dragging the handle which is a little\n            // below where the cursor actually is.\n            const distanceAboveFingerToTrySelecting = 22;\n            const adjustedY = y - distanceAboveFingerToTrySelecting;\n\n            this._insertCursorAtClosestNode(x, adjustedY);\n        };\n\n    /**\n     * When the user releases the cursor handle, animate it back into place.\n     *\n     * @param {TouchEvent} e - the raw touch event from the browser\n     */\n    onCursorHandleTouchEnd: (arg1: React.TouchEvent<HTMLSpanElement>) => void =\n        (e) => {\n            e.stopPropagation();\n\n            this._updateCursorHandle(true);\n        };\n\n    /**\n     * If the gesture is cancelled mid-drag, simply hide it.\n     *\n     * @param {TouchEvent} e - the raw touch event from the browser\n     */\n    onCursorHandleTouchCancel: (\n        arg1: React.TouchEvent<HTMLSpanElement>,\n    ) => void = (e) => {\n        e.stopPropagation();\n\n        this._updateCursorHandle(true);\n    };\n\n    domKeyToMathQuillKey: (arg1: string) => string | null | undefined = (\n        key,\n    ) => {\n        const keyMap = {\n            \"+\": Keys.PLUS,\n            \"-\": Keys.MINUS,\n            \"*\": Keys.TIMES,\n            \"/\": Keys.DIVIDE,\n            \".\": Keys.DECIMAL,\n            \"%\": Keys.PERCENT,\n            \"=\": Keys.EQUAL,\n            \">\": Keys.GT,\n            \"<\": Keys.LT,\n            \"^\": Keys.EXP,\n        } as const;\n\n        // Numbers\n        if ([\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"].includes(key)) {\n            return `NUM_${key}`;\n        }\n\n        // Movement keys\n        else if (key === \"Backspace\") {\n            return Keys.BACKSPACE;\n        }\n\n        // Operators\n        else if (key in keyMap) {\n            return keyMap[key];\n        }\n\n        // The key pressed doesn't map to any of the math input operators\n        return null;\n    };\n\n    handleKeyUp: (arg1: React.KeyboardEvent<HTMLDivElement>) => void = (\n        event,\n    ) => {\n        const mathQuillKey = this.domKeyToMathQuillKey(event.key);\n\n        if (mathQuillKey) {\n            this.mathField.pressKey(mathQuillKey);\n\n            // TODO(diedra): If the new value being added is off-screen to the right\n            // due to the max-width of the text box, scroll the box to show the newest\n            // value\n            const value = this.mathField.getContent();\n            if (this.props.value !== value) {\n                this.mathField.setContent(this.props.value);\n                this.props.onChange(value, false);\n                this._hideCursorHandle();\n            }\n        }\n    };\n\n    getBorderWidthPx: () => number = () => {\n        // TODO(diedra): Move these to the common style package.\n        const normalBorderWidthPx = 1;\n        const focusedBorderWidthPx = 2;\n\n        return this.state.focused ? focusedBorderWidthPx : normalBorderWidthPx;\n    };\n\n    // Calculate the appropriate padding based on the border width (which is\n    // considered 'padding', since we're using 'border-box') and the fact\n    // that MathQuill automatically applies 2px of padding to the inner\n    // input.\n    getInputInnerPadding: () => {\n        paddingTop: number;\n        paddingRight: number;\n        paddingBottom: number;\n        paddingLeft: number;\n    } = () => {\n        const paddingInset = totalDesiredPadding - this.getBorderWidthPx();\n\n        // Now, translate that to the appropriate padding for each direction.\n        // The complication here is that we want numerals to be centered within\n        // the input. However, Symbola (MathQuill's font of choice) renders\n        // numerals with approximately 3px of padding below and 1px of padding\n        // above (to make room for ascenders and descenders). So we ignore those\n        // padding values for the vertical directions.\n        const symbolaPaddingBottom = 3;\n        const symbolaPaddingTop = 1;\n        const padding = {\n            paddingTop: paddingInset - symbolaPaddingTop,\n            paddingRight: paddingInset,\n            paddingBottom: paddingInset - symbolaPaddingBottom,\n            paddingLeft: paddingInset,\n        } as const;\n\n        return padding;\n    };\n\n    render(): React.ReactNode {\n        const {focused, handle} = this.state;\n        const {style} = this.props;\n\n        const innerStyle = {\n            ...inlineStyles.innerContainer,\n            borderWidth: this.getBorderWidthPx(),\n            ...(focused\n                ? {\n                      borderColor: wonderBlocksBlue,\n                  }\n                : {}),\n            ...style,\n        } as const;\n\n        // NOTE(diedra): This label explicitly refers to tapping because this field\n        // is currently only seen if the user is using a mobile device.\n        // We added the tapping instructions because there is currently a bug where\n        // Android users need to use two fingers to tap the input field to make the\n        // keyboard appear. It should only require one finger, which is how iOS works.\n        // TODO(diedra): Fix the bug that is causing Android to require a two finger tap\n        // to the open the keyboard, and then remove the second half of this label.\n        const ariaLabel =\n            i18n._(\"Math input box\") +\n            \" \" +\n            i18n._(\"Tap with one or two fingers to open keyboard\");\n\n        return (\n            <View\n                style={styles.input}\n                onTouchStart={this.handleTouchStart}\n                onTouchMove={this.handleTouchMove}\n                onTouchEnd={this.handleTouchEnd}\n                onClick={(e) => e.stopPropagation()}\n                role={\"textbox\"}\n                ariaLabel={ariaLabel}\n            >\n                {/* NOTE(charlie): This is used purely to namespace the styles in\n                overrides.css. */}\n                <div\n                    className=\"keypad-input\"\n                    // @ts-expect-error [FEI-5003] - TS2322 - Type 'string' is not assignable to type 'number | undefined'.\n                    tabIndex={\"0\"}\n                    ref={(node) => {\n                        this.inputRef = node;\n                    }}\n                    onKeyUp={this.handleKeyUp}\n                >\n                    {/* NOTE(charlie): This element must be styled with inline\n                    styles rather than with Aphrodite classes, as MathQuill\n                    modifies the class names on the DOM node. */}\n                    <div\n                        ref={(node) => {\n                            this._mathContainer = ReactDOM.findDOMNode(node);\n                        }}\n                        style={innerStyle}\n                    />\n                </div>\n                {focused && handle.visible && (\n                    <CursorHandle\n                        {...handle}\n                        onTouchStart={this.onCursorHandleTouchStart}\n                        onTouchMove={this.onCursorHandleTouchMove}\n                        onTouchEnd={this.onCursorHandleTouchEnd}\n                        onTouchCancel={this.onCursorHandleTouchCancel}\n                    />\n                )}\n            </View>\n        );\n    }\n}\n\nconst fontSizePt = 18;\nconst inputMaxWidth = 128;\n\n// The height of numerals in Symbola (rendered at 18pt) is about 20px (though\n// they render at 24px due to padding for ascenders and descenders). We want our\n// box to be laid out such that there's 12px of padding between a numeral and the\n// edge of the input, so we use this 20px number as our 'base height' and\n// account for the ascender and descender padding when computing the additional\n// padding in our `render` method.\nconst numeralHeightPx = 20;\nconst totalDesiredPadding = 12;\nconst minHeightPx = numeralHeightPx + totalDesiredPadding * 2;\nconst minWidthPx = 64;\n\nconst styles = StyleSheet.create({\n    input: {\n        position: \"relative\",\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        maxWidth: inputMaxWidth,\n    },\n});\n\nconst inlineStyles = {\n    // Styles for the inner, MathQuill-ified input element. It's important that\n    // these are done with regular inline styles rather than Aphrodite classes\n    // as MathQuill adds CSS class names to the element outside of the typical\n    // React flow; assigning a class to the element can thus disrupt MathQuill\n    // behavior. For example, if the client provided new styles to be applied\n    // on focus and the styles here were applied with Aphrodite, then Aphrodite\n    // would merge the provided styles with the base styles here, producing a\n    // new CSS class name that we would apply to the element, clobbering any CSS\n    // class names that MathQuill had applied itself.\n    innerContainer: {\n        backgroundColor: \"white\",\n        minHeight: minHeightPx,\n        minWidth: minWidthPx,\n        maxWidth: inputMaxWidth,\n        boxSizing: \"border-box\",\n        position: \"relative\",\n        borderStyle: \"solid\",\n        borderColor: Color.offBlack50,\n        borderRadius: 4,\n        color: offBlack,\n    },\n} as const;\n\nexport default MathInput;\n","/**\n * React PropTypes that may be shared between components.\n */\n\nimport PropTypes from \"prop-types\";\n\n// NOTE(jared): This is no longer guaranteed to be React element\n// NOTE(matthewc): only seems to be used in Perseus\nexport const keypadElementPropType = PropTypes.shape({\n    activate: PropTypes.func.isRequired,\n    dismiss: PropTypes.func.isRequired,\n    configure: PropTypes.func.isRequired,\n    setCursor: PropTypes.func.isRequired,\n    setKeyHandler: PropTypes.func.isRequired,\n    getDOMNode: PropTypes.func.isRequired,\n});\n","import Keys from \"../data/keys\";\n\nimport type {\n    KeypadConfiguration,\n    KeyHandler,\n    Cursor,\n    ActiveNodesObj,\n    Border,\n} from \"../types\";\n\n// naming convention: verb + noun\n// the noun should be one of the other properties in the object that's\n// being dispatched\n\ntype DismissKeypadAction = {\n    type: \"DismissKeypad\";\n};\n\nexport const dismissKeypad = (): DismissKeypadAction => {\n    return {\n        type: \"DismissKeypad\",\n    };\n};\n\ntype ActivateKeypadAction = {\n    type: \"ActivateKeypad\";\n};\n\nexport const activateKeypad = (): ActivateKeypadAction => {\n    return {\n        type: \"ActivateKeypad\",\n    };\n};\n\n/**\n * Configure the keypad with the provided configuration parameters.\n */\ntype ConfigureKeypadAction = {\n    type: \"ConfigureKeypad\";\n    configuration: KeypadConfiguration;\n};\n\nexport const configureKeypad = (\n    configuration: KeypadConfiguration,\n): ConfigureKeypadAction => {\n    return {\n        type: \"ConfigureKeypad\",\n        configuration,\n    };\n};\n\ntype SetPageSizeAction = {\n    type: \"SetPageSize\";\n    pageWidthPx: number;\n    pageHeightPx: number;\n};\n\nexport const setPageSize = (\n    pageWidthPx: number,\n    pageHeightPx: number,\n): SetPageSizeAction => {\n    return {\n        type: \"SetPageSize\",\n        pageWidthPx,\n        pageHeightPx,\n    };\n};\n\ntype RemoveEchoAction = {\n    type: \"RemoveEcho\";\n    animationId: string;\n};\n\nexport const removeEcho = (animationId: string): RemoveEchoAction => {\n    return {\n        type: \"RemoveEcho\",\n        animationId,\n    };\n};\n\n// Input-related actions.\ntype SetKeyHandlerAction = {\n    type: \"SetKeyHandler\";\n    keyHandler: KeyHandler;\n};\n\nexport const setKeyHandler = (keyHandler: KeyHandler): SetKeyHandlerAction => {\n    return {\n        type: \"SetKeyHandler\",\n        keyHandler,\n    };\n};\n\ntype SetCursorAction = {\n    type: \"SetCursor\";\n    cursor: Cursor;\n};\n\nexport const setCursor = (cursor: Cursor): SetCursorAction => {\n    return {\n        type: \"SetCursor\",\n        cursor,\n    };\n};\n\n// Gesture actions\ntype OnSwipeChangeAction = {\n    type: \"OnSwipeChange\";\n    dx: number;\n};\n\nexport const onSwipeChange = (dx: number): OnSwipeChangeAction => {\n    return {\n        type: \"OnSwipeChange\",\n        dx,\n    };\n};\n\ntype OnSwipeEndAction = {\n    type: \"OnSwipeEnd\";\n    dx: number;\n};\n\nexport const onSwipeEnd = (dx: number): OnSwipeEndAction => {\n    return {\n        type: \"OnSwipeEnd\",\n        dx,\n    };\n};\n\ntype SetActiveNodesAction = {\n    type: \"SetActiveNodes\";\n    activeNodes: any;\n};\n\nexport const setActiveNodes = (\n    activeNodes: ActiveNodesObj,\n): SetActiveNodesAction => {\n    return {\n        type: \"SetActiveNodes\",\n        activeNodes,\n    };\n};\n\ntype PressKeyAction = {\n    type: \"PressKey\";\n    key: Keys;\n    borders: Border;\n    initialBounds: DOMRect;\n    inPopover: boolean;\n};\n\nexport const pressKey = (\n    key: Keys,\n    borders: Border,\n    initialBounds: DOMRect,\n    inPopover: any,\n): PressKeyAction => {\n    return {\n        type: \"PressKey\",\n        key,\n        borders,\n        initialBounds,\n        inPopover,\n    };\n};\n\nexport type Action =\n    | DismissKeypadAction\n    | ActivateKeypadAction\n    | ConfigureKeypadAction\n    | SetPageSizeAction\n    | RemoveEchoAction\n    | SetKeyHandlerAction\n    | SetCursorAction\n    | OnSwipeChangeAction\n    | OnSwipeEndAction\n    | SetActiveNodesAction\n    | PressKeyAction;\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import Keys from \"../data/keys\";\n\n/**\n * The state machine that backs our gesture system. In particular, this state\n * machine manages the interplay between focuses, touch ups, and swiping.\n * It is entirely ignorant of the existence of popovers and the positions of\n * DOM nodes, operating solely on IDs. The state machine does accommodate for\n * multi-touch interactions, tracking gesture state on a per-touch basis.\n */\n\n// exported for tests\nexport type Handlers = {\n    onFocus: (id: string) => void;\n    onBlur: () => void;\n    onTrigger: (id: string) => void;\n    onLongPress: (id: string) => void;\n    onSwipeChange: (x: number) => void;\n    onSwipeEnd: (x: number) => void;\n    onTouchEnd: (id: string) => void;\n};\n\ntype Options = {\n    longPressWaitTimeMs: number;\n    swipeThresholdPx: number;\n    holdIntervalMs: number;\n};\n\ntype TouchState = {\n    activeNodeId: Keys;\n    pressAndHoldIntervalId: number | null;\n    longPressTimeoutId: number | null;\n    swipeLocked: boolean;\n    startX: number;\n};\n\ntype TouchStateMap = Record<Keys, TouchState>;\n\ntype SwipeState = {\n    touchId: Keys;\n    startX: number;\n};\n\nconst defaultOptions: Options = {\n    longPressWaitTimeMs: 50,\n    swipeThresholdPx: 20,\n    holdIntervalMs: 250,\n};\n\nclass GestureStateMachine {\n    handlers: Handlers;\n    options: Options;\n    swipeDisabledNodeIds: Partial<[Keys]>;\n    multiPressableKeys: Partial<[Keys]>;\n    touchState: Partial<TouchStateMap>;\n    swipeState: SwipeState | null;\n\n    constructor(\n        handlers: Handlers,\n        options: Partial<Options>,\n        swipeDisabledNodeIds?: [Keys],\n        multiPressableKeys?: [Keys],\n    ) {\n        this.handlers = handlers;\n        this.options = {\n            ...defaultOptions,\n            ...options,\n        };\n        this.swipeDisabledNodeIds = swipeDisabledNodeIds || [];\n        this.multiPressableKeys = multiPressableKeys || [];\n\n        // TODO(charlie): Add types for this file. It's not great that we're now\n        // passing around these opaque state objects.\n        this.touchState = {};\n        this.swipeState = null;\n    }\n\n    _maybeCancelLongPressForTouch(touchId) {\n        const {longPressTimeoutId} = this.touchState[touchId];\n        if (longPressTimeoutId) {\n            clearTimeout(longPressTimeoutId);\n            this.touchState[touchId] = {\n                ...this.touchState[touchId],\n                longPressTimeoutId: null,\n            };\n        }\n    }\n\n    _maybeCancelPressAndHoldForTouch(touchId) {\n        const {pressAndHoldIntervalId} = this.touchState[touchId];\n        if (pressAndHoldIntervalId) {\n            // If there was an interval set to detect holds, clear it out.\n            clearInterval(pressAndHoldIntervalId);\n            this.touchState[touchId] = {\n                ...this.touchState[touchId],\n                pressAndHoldIntervalId: null,\n            };\n        }\n    }\n\n    _cleanupTouchEvent(touchId) {\n        this._maybeCancelLongPressForTouch(touchId);\n        this._maybeCancelPressAndHoldForTouch(touchId);\n        delete this.touchState[touchId];\n    }\n\n    /**\n     * Handle a focus event on the node with the given identifier, which may be\n     * `null` to indicate that the user has dragged their finger off of any\n     * registered nodes, but is still in the middle of a gesture.\n     *\n     * @param {string|null} id - the identifier of the newly focused node, or\n     *                           `null` if no node is focused\n     * @param {number} touchId - a unique identifier associated with the touch\n     */\n    _onFocus(id, touchId) {\n        // If we're in the middle of a long-press, cancel it.\n        this._maybeCancelLongPressForTouch(touchId);\n\n        // Reset any existing hold-detecting interval.\n        this._maybeCancelPressAndHoldForTouch(touchId);\n\n        // Set the focused node ID and handle the focus event.\n        // Note: we can call `onFocus` with `null` IDs. The semantics of an\n        // `onFocus` with a `null` ID differs from that of `onBlur`. The former\n        // indicates that a gesture that can focus future nodes is still in\n        // progress, but that no node is currently focused. The latter\n        // indicates that the gesture has ended and nothing will be focused.\n        this.touchState[touchId] = {\n            ...this.touchState[touchId],\n            activeNodeId: id,\n        };\n        this.handlers.onFocus(id);\n\n        if (id) {\n            // Handle logic for repeating button presses.\n            if (this.multiPressableKeys.includes(id)) {\n                // Start by triggering a click, iOS style.\n                this.handlers.onTrigger(id);\n\n                // Set up a new hold detector for the current button.\n                this.touchState[touchId] = {\n                    ...this.touchState[touchId],\n                    pressAndHoldIntervalId: setInterval(() => {\n                        // On every cycle, trigger the click handler.\n                        this.handlers.onTrigger(id);\n                    }, this.options.holdIntervalMs),\n                };\n            } else {\n                // Set up a new hold detector for the current button.\n                this.touchState[touchId] = {\n                    ...this.touchState[touchId],\n                    longPressTimeoutId: setTimeout(() => {\n                        this.handlers.onLongPress(id);\n                        this.touchState[touchId] = {\n                            ...this.touchState[touchId],\n                            longPressTimeoutId: null,\n                        };\n                    }, this.options.longPressWaitTimeMs),\n                };\n            }\n        }\n    }\n\n    /**\n     * Clear out all active gesture information.\n     */\n    _onSwipeStart() {\n        for (const activeTouchId of Object.keys(this.touchState)) {\n            this._maybeCancelLongPressForTouch(activeTouchId);\n            this._maybeCancelPressAndHoldForTouch(activeTouchId);\n        }\n        this.touchState = {};\n        this.handlers.onBlur();\n    }\n\n    /**\n     * A function that returns the identifier of the node over which the touch\n     * event occurred. This is provided as a piece of lazy computation, as\n     * computing the DOM node for a given point is expensive, and the state\n     * machine won't always need that information. For example, if the user is\n     * swiping, then `onTouchMove` needs to be performant and doesn't care about\n     * the node over which the touch occurred.\n     *\n     * @typedef idComputation\n     * @returns {DOMNode} - the identifier of the node over which the touch\n     *                      occurred\n     */\n\n    /**\n     * Handle a touch-start event on the node with the given identifer.\n     *\n     * @param {idComputation} getId - a function that returns identifier of the\n     *                                node over which the start event occurred\n     * @param {number} touchId - a unique identifier associated with the touch\n     */\n    onTouchStart(getId, touchId, pageX) {\n        // Ignore any touch events that start mid-swipe.\n        if (this.swipeState) {\n            return;\n        }\n\n        if (this.touchState[touchId]) {\n            // It turns out we can get multiple touch starts with no\n            // intervening move, end, or cancel events in Android WebViews.\n            // TODO(benkomalo): it's not entirely clear why this happens, but\n            // it seems to happen with the backspace button. It may be related\n            // to FastClick (https://github.com/ftlabs/fastclick/issues/71)\n            // though I haven't verified, and it's probably good to be robust\n            // here anyways.\n            return;\n        }\n\n        const startingNodeId = getId();\n        this.touchState[touchId] = {\n            swipeLocked: this.swipeDisabledNodeIds.includes(startingNodeId),\n            startX: pageX,\n        };\n\n        this._onFocus(startingNodeId, touchId);\n    }\n\n    /**\n     * Handle a touch-move event on the node with the given identifer.\n     *\n     * @param {idComputation} getId - a function that returns identifier of the\n     *                                node over which the move event occurred\n     * @param {number} touchId - a unique identifier associated with the touch\n     * @param {number} pageX - the x coordinate of the touch\n     * @param {boolean} swipeEnabled - whether the system should allow for\n     *                                 transitions into a swiping state\n     */\n    onTouchMove(getId, touchId, pageX, swipeEnabled) {\n        if (this.swipeState) {\n            // Only respect the finger that started a swipe. Any other lingering\n            // gestures are ignored.\n            if (this.swipeState.touchId === touchId) {\n                this.handlers.onSwipeChange(pageX - this.swipeState.startX);\n            }\n        } else if (this.touchState[touchId]) {\n            // It could be touch events started outside the keypad and\n            // moved into it; ignore them.\n            const {activeNodeId, startX, swipeLocked} =\n                this.touchState[touchId];\n\n            const dx = pageX - startX;\n            const shouldBeginSwiping =\n                swipeEnabled &&\n                !swipeLocked &&\n                Math.abs(dx) > this.options.swipeThresholdPx;\n\n            if (shouldBeginSwiping) {\n                this._onSwipeStart();\n\n                // Trigger the swipe.\n                this.swipeState = {\n                    touchId,\n                    startX,\n                };\n                this.handlers.onSwipeChange(pageX - this.swipeState.startX);\n            } else {\n                const id = getId();\n                if (id !== activeNodeId) {\n                    this._onFocus(id, touchId);\n                }\n            }\n        }\n    }\n\n    /**\n     * Handle a touch-end event on the node with the given identifer.\n     *\n     * @param {idComputation} getId - a function that returns identifier of the\n     *                                node over which the end event occurred\n     * @param {number} touchId - a unique identifier associated with the touch\n     * @param {number} pageX - the x coordinate of the touch\n     */\n    onTouchEnd(getId, touchId, pageX) {\n        if (this.swipeState) {\n            // Only respect the finger that started a swipe. Any other lingering\n            // gestures are ignored.\n            if (this.swipeState.touchId === touchId) {\n                this.handlers.onSwipeEnd(pageX - this.swipeState.startX);\n                this.swipeState = null;\n            }\n        } else if (this.touchState[touchId]) {\n            // It could be touch events started outside the keypad and\n            // moved into it; ignore them.\n            const {activeNodeId, pressAndHoldIntervalId} =\n                this.touchState[touchId];\n\n            this._cleanupTouchEvent(touchId);\n\n            const didPressAndHold = !!pressAndHoldIntervalId;\n            if (didPressAndHold) {\n                // We don't trigger a touch end if there was a press and hold,\n                // because the key has been triggered at least once and calling\n                // the onTouchEnd handler would add an extra trigger.\n                this.handlers.onBlur();\n            } else {\n                // Trigger a touch-end. There's no need to notify clients of a\n                // blur as clients are responsible for handling any cleanup in\n                // their touch-end handlers.\n                this.handlers.onTouchEnd(activeNodeId);\n            }\n        }\n    }\n\n    /**\n     * Handle a touch-cancel event.\n     */\n    onTouchCancel(touchId) {\n        // If a touch is cancelled and we're swiping, end the swipe with no\n        // displacement.\n        if (this.swipeState) {\n            if (this.swipeState.touchId === touchId) {\n                this.handlers.onSwipeEnd(0);\n                this.swipeState = null;\n            }\n        } else if (this.touchState[touchId]) {\n            // Otherwise, trigger a full blur. We don't want to trigger a\n            // touch-up, since the cancellation means that the user probably\n            // didn't release over a key intentionally.\n            this._cleanupTouchEvent(touchId);\n            this.handlers.onBlur();\n        }\n    }\n}\n\nexport default GestureStateMachine;\n","import type {Border, LayoutProps} from \"../types\";\n/**\n * A manager for our node-to-ID system. In particular, this class is\n * responsible for maintaing a mapping between DOM nodes and node IDs, and\n * translating touch events from the raw positions at which they occur to the\n * nodes over which they are occurring. This differs from browser behavior, in\n * which touch events are only sent to the node in which a touch started.\n */\n\nclass NodeManager {\n    _nodesById: Record<string, HTMLElement>;\n    _bordersById: Record<string, Border>;\n    _orderedIds: ReadonlyArray<string>;\n    _cachedBoundingBoxesById: Record<string, DOMRect>;\n\n    constructor() {\n        // A mapping from IDs to DOM nodes.\n        this._nodesById = {};\n\n        // A mapping from IDs to the borders around the DOM nodes, which can be\n        // useful for layout purposes.\n        this._bordersById = {};\n\n        // An ordered list of IDs, where DOM nodes that are \"higher\" on the\n        // page come earlier in the list. Note that an ID may be present in\n        // this ordered list but not be registered to a DOM node (i.e., if it\n        // is registered as a child of another DOM node, but hasn't appeared in\n        // the DOM yet).\n        this._orderedIds = [];\n\n        // Cache bounding boxes aggressively, re-computing on page resize. Our\n        // caching here makes the strict assumption that if a node is reasonably\n        // assumed to be on-screen, its bounds won't change. For example, if we\n        // see that a touch occurred within the bounds of a node, we cache those\n        // bounds.\n        // TODO(charlie): It'd be great if we could pre-compute these when the\n        // page is idle and the keypad is visible (i.e., the nodes are in their\n        // proper positions).\n        this._cachedBoundingBoxesById = {};\n        window.addEventListener(\"resize\", () => {\n            this._cachedBoundingBoxesById = {};\n        });\n    }\n\n    /**\n     * Register a DOM node with a given identifier.\n     *\n     * @param {string} id - the identifier of the given node\n     * @param {node} domNode - the DOM node linked to the identifier\n     * @param {object} borders - an opaque object describing the node's borders\n     */\n    registerDOMNode(\n        id: string,\n        domNode: HTMLElement,\n        childIds: ReadonlyArray<string>,\n        borders: Border,\n    ) {\n        this._nodesById[id] = domNode;\n        this._bordersById[id] = borders;\n\n        // Make sure that any children appear first.\n        // TODO(charlie): This is a very simplistic system that wouldn't\n        // properly handle multiple levels of nesting.\n        const allIds = [...(childIds || []), id, ...this._orderedIds];\n\n        // De-dupe the list of IDs.\n        const orderedIds = [];\n        const seenIds = {};\n        for (const id of allIds) {\n            if (!seenIds[id]) {\n                // @ts-expect-error TS2345\n                orderedIds.push(id);\n                seenIds[id] = true;\n            }\n        }\n\n        this._orderedIds = orderedIds;\n    }\n\n    /**\n     * Unregister the DOM node with the given identifier.\n     *\n     * @param {string} id - the identifier of the node to unregister\n     */\n    unregisterDOMNode(id: string) {\n        delete this._nodesById[id];\n    }\n\n    /**\n     * Return the identifier of the topmost node located at the given\n     * coordinates.\n     *\n     * @param {number} x - the x coordinate at which to search for a node\n     * @param {number} y - the y coordinate at which to search for a node\n     * @returns {null|string} - null or the identifier of the topmost node at\n     *                          the given coordinates\n     */\n    idForCoords(x: number, y: number): string | void {\n        for (const id of this._orderedIds) {\n            const domNode = this._nodesById[id];\n            if (domNode) {\n                const bounds = domNode.getBoundingClientRect();\n                if (\n                    bounds.left <= x &&\n                    bounds.right > x &&\n                    bounds.top <= y &&\n                    bounds.bottom > y\n                ) {\n                    this._cachedBoundingBoxesById[id] = bounds;\n                    return id;\n                }\n            }\n        }\n    }\n\n    /**\n     * Return the necessary layout information, including the bounds and border\n     * values, for the node with the given identifier.\n     *\n     * @param {string} id - the identifier of the node for which to return the\n     *                      layout information\n     * @returns {object} - the bounding client rect for the given node, along\n     *                     with its borders\n     */\n    layoutPropsForId(id: string): LayoutProps {\n        if (!this._cachedBoundingBoxesById[id]) {\n            const node = this._nodesById[id];\n\n            this._cachedBoundingBoxesById[id] = node\n                ? node.getBoundingClientRect()\n                : new DOMRect();\n        }\n\n        return {\n            initialBounds: this._cachedBoundingBoxesById[id],\n            borders: this._bordersById[id],\n        };\n    }\n}\n\nexport default NodeManager;\n","import type {ActiveNodesObj} from \"../types\";\n\n/**\n * A state machine for the popover state. In particular, this class manages the\n * mapping of parent nodes to their children, and translates touch events that\n * traverse various nodes to actions that are conditioned on whether a popover\n * is present.\n */\n\ntype Handlers = {\n    onActiveNodesChanged: (activeNodes: ActiveNodesObj) => void;\n    onClick: (keyId: string, domNodeId: string, inPopover: boolean) => void;\n};\n\nclass PopoverStateMachine {\n    handlers: Handlers;\n    popovers: Record<string, ReadonlyArray<string>>;\n    activePopover: string | null;\n\n    constructor(handlers) {\n        this.handlers = handlers;\n\n        this.activePopover = null;\n        this.popovers = {};\n    }\n\n    /**\n     * Register a popover container as containing a set of children.\n     *\n     * @param {string} id - the identifier of the popover container\n     * @param {string[]} childIds - the identifiers of the nodes contained in\n     *                              the popover container\n     */\n    registerPopover(id, childIds) {\n        this.popovers[id] = childIds;\n    }\n\n    /**\n     * Unregister a popover container.\n     *\n     * @param {string} id - the identifier of the popover container to\n     *                      unregister\n     */\n    unregisterPopover(id) {\n        delete this.popovers[id];\n    }\n\n    /**\n     * @returns {boolean} - whether a popover is active and visible\n     */\n    isPopoverVisible() {\n        return this.activePopover != null;\n    }\n\n    /**\n     * Blur the active nodes.\n     */\n    onBlur() {\n        this.activePopover = null;\n        this.handlers.onActiveNodesChanged({\n            popover: null,\n            focus: null,\n        });\n    }\n\n    /**\n     * Handle a focus event on the node with the given identifier.\n     *\n     * @param {string} id - the identifier of the node that was focused\n     */\n    onFocus(id) {\n        if (this.activePopover) {\n            // If we have a popover that is currently active, we focus this\n            // node if it's in the popover, and remove any highlight otherwise.\n            if (this._isNodeInsidePopover(this.activePopover, id)) {\n                this.handlers.onActiveNodesChanged({\n                    popover: {\n                        parentId: this.activePopover,\n                        childIds: this.popovers[this.activePopover],\n                    },\n                    focus: id,\n                });\n            } else {\n                this.handlers.onActiveNodesChanged({\n                    popover: {\n                        parentId: this.activePopover,\n                        childIds: this.popovers[this.activePopover],\n                    },\n                    focus: null,\n                });\n            }\n        } else {\n            this.activePopover = null;\n            this.handlers.onActiveNodesChanged({\n                popover: null,\n                focus: id,\n            });\n        }\n    }\n\n    /**\n     * Handle a long press event on the node with the given identifier.\n     *\n     * @param {string} id - the identifier of the node that was long-pressed\n     */\n    onLongPress(id) {\n        // We only care about long presses if they occur on a popover, and we\n        // don't already have a popover active.\n        if (!this.activePopover && this.popovers[id]) {\n            // NOTE(charlie): There's an assumption here that focusing the\n            // first child is the correct behavior for a newly focused popover.\n            // This relies on the fact that the children are rendered\n            // bottom-up. If that rendering changes, this logic will need to\n            // change as well.\n            this.activePopover = id;\n            this.handlers.onActiveNodesChanged({\n                popover: {\n                    parentId: id,\n                    childIds: this.popovers[id],\n                },\n                focus: this._defaultNodeForPopover(this.activePopover),\n            });\n        }\n    }\n\n    /**\n     * Handle the trigger (click or hold) of the node with the given identifier.\n     *\n     * @param {string} id - the identifier of the node that was triggered\n     */\n    onTrigger(id) {\n        this.handlers.onClick(id, id, false);\n    }\n\n    /**\n     * Handle a touch-end event on the node with the given identifier.\n     *\n     * @param {string} id - the identifier of the node over which the touch\n     *                      ended\n     */\n    onTouchEnd(id) {\n        const inPopover = !!this.activePopover;\n        if (inPopover) {\n            // If we have a popover that is currently active, we trigger a\n            // click on this node if and only if it's in the popover, with the\n            // exception that, if the node passed back _is_ the active popover,\n            // then we trigger its default node. This latter case should only\n            // be triggered if the user were to tap down on a popover-enabled\n            // node, hold for long enough for the popover to appear, and then\n            // release without ever moving their finger, in which case, the\n            // underlying gesture system would have no idea that the popover's\n            // first child node was now focused.\n            if (this._isNodeInsidePopover(this.activePopover, id)) {\n                this.handlers.onClick(id, id, inPopover);\n            } else if (this.activePopover === id) {\n                const keyId = this._defaultNodeForPopover(id);\n                this.handlers.onClick(keyId, keyId, inPopover);\n            }\n        } else if (this.popovers[id]) {\n            // Otherwise, if the node is itself a popover revealer, trigger the\n            // clicking of its default node, but pass back the popover node ID\n            // for layout purposes.\n            const keyId = this._defaultNodeForPopover(id);\n            const domNodeId = id;\n            this.handlers.onClick(keyId, domNodeId, inPopover);\n        } else if (id != null) {\n            // Finally, if we have no active popover, and we touched up over a\n            // valid key, trigger a click.\n            this.onTrigger(id);\n        }\n\n        this.onBlur();\n    }\n\n    _isNodeInsidePopover(popover, id) {\n        return this.popovers[popover].includes(id);\n    }\n\n    _defaultNodeForPopover(popover) {\n        return this.popovers[popover][0];\n    }\n}\n\nexport default PopoverStateMachine;\n","/**\n * A high-level manager for our gesture system. In particular, this class\n * connects our various bits of logic for managing gestures and interactions,\n * and links them together.\n */\n\nimport GestureStateMachine from \"./gesture-state-machine\";\nimport NodeManager from \"./node-manager\";\nimport PopoverStateMachine from \"./popover-state-machine\";\n\nconst coordsForEvent = (evt) => {\n    return [evt.changedTouches[0].clientX, evt.changedTouches[0].clientY];\n};\n\nclass GestureManager {\n    swipeEnabled: boolean;\n    trackEvents: boolean;\n    nodeManager: NodeManager;\n    popoverStateMachine: PopoverStateMachine;\n    gestureStateMachine: GestureStateMachine;\n\n    constructor(options, handlers, disabledSwipeKeys, multiPressableKeys) {\n        const {swipeEnabled} = options;\n\n        this.swipeEnabled = swipeEnabled;\n\n        // Events aren't tracked until event tracking is enabled.\n        this.trackEvents = false;\n\n        this.nodeManager = new NodeManager();\n        this.popoverStateMachine = new PopoverStateMachine({\n            onActiveNodesChanged: (activeNodes) => {\n                const {popover, ...rest} = activeNodes;\n                handlers.onActiveNodesChanged({\n                    popover: popover && {\n                        parentId: popover.parentId,\n                        bounds: this.nodeManager.layoutPropsForId(\n                            popover.parentId,\n                        ).initialBounds,\n                        childKeyIds: popover.childIds,\n                    },\n                    ...rest,\n                });\n            },\n            /**\n             * `onClick` takes two arguments:\n             *\n             * @param {string} keyId - the identifier key that should initiate\n             *                         a click\n             * @param {string} domNodeId - the identifier of the DOM node on\n             *                             which the click should be considered\n             *                             to have occurred\n             * @param {bool} inPopover - whether the key was contained within a\n             *                           popover\n             *\n             * These two parameters will often be equivalent. They will differ,\n             * though, when a popover button is itself clicked, in which case\n             * we need to mimic the effects of clicking on its 'primary' child\n             * key, but animate the click on the popover button.\n             */\n            onClick: (keyId, domNodeId, inPopover) => {\n                handlers.onClick(\n                    keyId,\n                    this.nodeManager.layoutPropsForId(domNodeId),\n                    inPopover,\n                );\n            },\n        });\n        this.gestureStateMachine = new GestureStateMachine(\n            {\n                onFocus: (id) => {\n                    this.popoverStateMachine.onFocus(id);\n                },\n                onLongPress: (id) => {\n                    this.popoverStateMachine.onLongPress(id);\n                },\n                onTouchEnd: (id) => {\n                    this.popoverStateMachine.onTouchEnd(id);\n                },\n                onBlur: () => {\n                    this.popoverStateMachine.onBlur();\n                },\n                onSwipeChange: handlers.onSwipeChange,\n                onSwipeEnd: handlers.onSwipeEnd,\n                onTrigger: (id) => {\n                    this.popoverStateMachine.onTrigger(id);\n                },\n            },\n            {},\n            disabledSwipeKeys,\n            multiPressableKeys,\n        );\n    }\n\n    /**\n     * Handle a touch-start event that originated in a node registered with the\n     * gesture system.\n     *\n     * @param {TouchEvent} evt - the raw touch event from the browser\n     * @param {string} id - the identifier of the DOM node in which the touch\n     *                      occurred\n     */\n    onTouchStart(evt: TouchEvent, id?) {\n        if (!this.trackEvents) {\n            return;\n        }\n\n        const [x] = coordsForEvent(evt);\n\n        // TODO(charlie): It doesn't seem to be guaranteed that every touch\n        // event on `changedTouches` originates from the node through which this\n        // touch event was sent. In that case, we'd be inappropriately reporting\n        // the starting node ID.\n        for (let i = 0; i < evt.changedTouches.length; i++) {\n            this.gestureStateMachine.onTouchStart(\n                () => id,\n                evt.changedTouches[i].identifier,\n                x,\n            );\n        }\n\n        // If an event started in a view that we're managing, we'll handle it\n        // all the way through.\n        evt.preventDefault();\n    }\n\n    /**\n     * Handle a touch-move event that originated in a node registered with the\n     * gesture system.\n     *\n     * @param {TouchEvent} evt - the raw touch event from the browser\n     */\n    onTouchMove(evt: TouchEvent) {\n        if (!this.trackEvents) {\n            return;\n        }\n\n        const swipeLocked = this.popoverStateMachine.isPopoverVisible();\n        const swipeEnabled = this.swipeEnabled && !swipeLocked;\n        const [x, y] = coordsForEvent(evt);\n        for (let i = 0; i < evt.changedTouches.length; i++) {\n            this.gestureStateMachine.onTouchMove(\n                () => this.nodeManager.idForCoords(x, y),\n                evt.changedTouches[i].identifier,\n                x,\n                swipeEnabled,\n            );\n        }\n    }\n\n    /**\n     * Handle a touch-end event that originated in a node registered with the\n     * gesture system.\n     *\n     * @param {TouchEvent} evt - the raw touch event from the browser\n     */\n    onTouchEnd(evt: TouchEvent) {\n        if (!this.trackEvents) {\n            return;\n        }\n\n        const [x, y] = coordsForEvent(evt);\n        for (let i = 0; i < evt.changedTouches.length; i++) {\n            this.gestureStateMachine.onTouchEnd(\n                () => this.nodeManager.idForCoords(x, y),\n                evt.changedTouches[i].identifier,\n                x,\n            );\n        }\n    }\n\n    /**\n     * Handle a touch-cancel event that originated in a node registered with the\n     * gesture system.\n     *\n     * @param {TouchEvent} evt - the raw touch event from the browser\n     */\n    onTouchCancel(evt: TouchEvent) {\n        if (!this.trackEvents) {\n            return;\n        }\n\n        for (let i = 0; i < evt.changedTouches.length; i++) {\n            this.gestureStateMachine.onTouchCancel(\n                evt.changedTouches[i].identifier,\n            );\n        }\n    }\n\n    /**\n     * Register a DOM node with a given identifier.\n     *\n     * @param {string} id - the identifier of the given node\n     * @param {node} domNode - the DOM node linked to the identifier\n     * @param {string[]} childIds - the identifiers of any DOM nodes that\n     *                              should be considered children of this node,\n     *                              in that they should take priority when\n     *                              intercepting touch events\n     * @param {object} borders - an opaque object describing the node's borders\n     */\n    registerDOMNode(id, domNode, childIds, borders) {\n        this.nodeManager.registerDOMNode(id, domNode, childIds, borders);\n        this.popoverStateMachine.registerPopover(id, childIds);\n    }\n\n    /**\n     * Unregister the DOM node with the given identifier.\n     *\n     * @param {string} id - the identifier of the node to unregister\n     */\n    unregisterDOMNode(id) {\n        this.nodeManager.unregisterDOMNode(id);\n        this.popoverStateMachine.unregisterPopover(id);\n    }\n\n    /**\n     * Enable event tracking for the gesture manager.\n     */\n    enableEventTracking() {\n        this.trackEvents = true;\n    }\n\n    /**\n     * Disable event tracking for the gesture manager. When called, the gesture\n     * manager will drop any events received by managed nodes.\n     */\n    disableEventTracking() {\n        this.trackEvents = false;\n    }\n}\n\nexport default GestureManager;\n","/**\n * This file contains configuration settings for the buttons in the keypad.\n */\nimport * as i18n from \"@khanacademy/wonder-blocks-i18n\";\n\nimport {DecimalSeparator, IconType, KeyType} from \"../enums\";\nimport {decimalSeparator} from \"../utils\";\n\nimport Keys from \"./keys\";\n\nexport type KeyConfig = {\n    id: string;\n    type: string;\n    ariaLabel: string;\n};\n\n// I tried to make the below {[key in Keys]: KeyConfig}\n// but we are doing all kinds of sneaky magic that makes it hard to\n// type this safely. Leaving it for now as a generic index signature.\nconst KeyConfigs: {[key: string]: any} = {\n    // Basic math keys.\n    [Keys.PLUS]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a plus sign.\n        ariaLabel: i18n._(\"Plus\"),\n    },\n    [Keys.MINUS]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a minus sign.\n        ariaLabel: i18n._(\"Minus\"),\n    },\n    [Keys.NEGATIVE]: {\n        type: KeyType.VALUE,\n        // I18N: A label for a minus sign.\n        ariaLabel: i18n._(\"Negative\"),\n    },\n    [Keys.TIMES]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a multiplication sign (represented with an 'x').\n        ariaLabel: i18n._(\"Multiply\"),\n    },\n    [Keys.DIVIDE]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a division sign.\n        ariaLabel: i18n._(\"Divide\"),\n    },\n    [Keys.DECIMAL]: {\n        type: KeyType.VALUE,\n        // I18N: A label for a decimal symbol.\n        ariaLabel: i18n._(\"Decimal\"),\n        icon:\n            decimalSeparator === DecimalSeparator.COMMA\n                ? {\n                      // TODO(charlie): Get an SVG icon for the comma, or verify with\n                      // design that the text-rendered version is acceptable.\n                      type: IconType.TEXT,\n                      data: \",\",\n                  }\n                : {\n                      type: IconType.SVG,\n                      data: Keys.PERIOD,\n                  },\n    },\n    [Keys.PERCENT]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a percent sign.\n        ariaLabel: i18n._(\"Percent\"),\n    },\n    [Keys.CDOT]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a multiplication sign (represented as a dot).\n        ariaLabel: i18n._(\"Multiply\"),\n    },\n    [Keys.EQUAL]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Equals sign\"),\n    },\n    [Keys.NEQ]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Not-equals sign\"),\n    },\n    [Keys.GT]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a 'greater than' sign (represented as '>').\n        ariaLabel: i18n._(\"Greater than sign\"),\n    },\n    [Keys.LT]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a 'less than' sign (represented as '<').\n        ariaLabel: i18n._(\"Less than sign\"),\n    },\n    [Keys.GEQ]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Greater than or equal to sign\"),\n    },\n    [Keys.LEQ]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Less than or equal to sign\"),\n    },\n    // mobile native\n    [Keys.FRAC_INCLUSIVE]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a button that creates a new fraction and puts the\n        // current expression in the numerator of that fraction.\n        ariaLabel: i18n._(\"Fraction, with current expression in numerator\"),\n    },\n    // mobile native\n    [Keys.FRAC_EXCLUSIVE]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a button that creates a new fraction next to the\n        // cursor.\n        ariaLabel: i18n._(\"Fraction, excluding the current expression\"),\n    },\n    // mobile web\n    [Keys.FRAC]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a button that creates a new fraction next to the\n        // cursor.\n        ariaLabel: i18n._(\"Fraction, excluding the current expression\"),\n    },\n    [Keys.EXP]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a button that will allow the user to input a custom\n        // exponent.\n        ariaLabel: i18n._(\"Custom exponent\"),\n    },\n    [Keys.EXP_2]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a button that will square (take to the second\n        // power) some math.\n        ariaLabel: i18n._(\"Square\"),\n    },\n    [Keys.EXP_3]: {\n        type: KeyType.OPERATOR,\n        // I18N: A label for a button that will cube (take to the third power)\n        // some math.\n        ariaLabel: i18n._(\"Cube\"),\n    },\n    [Keys.SQRT]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Square root\"),\n    },\n    [Keys.CUBE_ROOT]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Cube root\"),\n    },\n    [Keys.RADICAL]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Radical with custom root\"),\n    },\n    [Keys.LEFT_PAREN]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Left parenthesis\"),\n    },\n    [Keys.RIGHT_PAREN]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Right parenthesis\"),\n    },\n    [Keys.LN]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Natural logarithm\"),\n    },\n    [Keys.LOG]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Logarithm with base 10\"),\n    },\n    [Keys.LOG_N]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Logarithm with custom base\"),\n    },\n    [Keys.SIN]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Sine\"),\n    },\n    [Keys.COS]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Cosine\"),\n    },\n    [Keys.TAN]: {\n        type: KeyType.OPERATOR,\n        ariaLabel: i18n._(\"Tangent\"),\n    },\n    [Keys.PI]: {\n        type: KeyType.VALUE,\n        ariaLabel: i18n._(\"Pi\"),\n        icon: {\n            type: IconType.MATH,\n            data: \"\\\\pi\",\n        },\n    },\n    [Keys.THETA]: {\n        type: KeyType.VALUE,\n        ariaLabel: i18n._(\"Theta\"),\n        icon: {\n            type: IconType.MATH,\n            data: \"\\\\theta\",\n        },\n    },\n    [Keys.NOOP]: {\n        type: KeyType.EMPTY,\n    },\n\n    // Input navigation keys.\n    [Keys.UP]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Up arrow\"),\n    },\n    [Keys.RIGHT]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Right arrow\"),\n    },\n    [Keys.DOWN]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Down arrow\"),\n    },\n    [Keys.LEFT]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Left arrow\"),\n    },\n    [Keys.JUMP_OUT_PARENTHESES]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Navigate right out of a set of parentheses\"),\n    },\n    [Keys.JUMP_OUT_EXPONENT]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Navigate right out of an exponent\"),\n    },\n    [Keys.JUMP_OUT_BASE]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Navigate right out of a base\"),\n    },\n    [Keys.JUMP_INTO_NUMERATOR]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\"Navigate right into the numerator of a fraction\"),\n    },\n    [Keys.JUMP_OUT_NUMERATOR]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\n            \"Navigate right out of the numerator and into the denominator\",\n        ),\n    },\n    [Keys.JUMP_OUT_DENOMINATOR]: {\n        type: KeyType.INPUT_NAVIGATION,\n        ariaLabel: i18n._(\n            \"Navigate right out of the denominator of a fraction\",\n        ),\n    },\n    [Keys.BACKSPACE]: {\n        type: KeyType.INPUT_NAVIGATION,\n        // I18N: A label for a button that will delete some input.\n        ariaLabel: i18n._(\"Delete\"),\n    },\n\n    // Keypad navigation keys.\n    [Keys.DISMISS]: {\n        type: KeyType.KEYPAD_NAVIGATION,\n        // I18N: A label for a button that will dismiss/hide a keypad.\n        ariaLabel: i18n._(\"Dismiss\"),\n    },\n\n    // TODO(charlie): Use the numeral color for the 'Many' key.\n    // MANY: {\n    //     type: KeyType.MANY,\n    //     // childKeyIds will be configured by the client.\n    // },\n\n    [Keys.PERIOD]: {},\n};\n\n// Add in every numeral.\nconst NUMBERS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\nfor (const num of NUMBERS) {\n    // TODO(charlie): Consider removing the SVG icons that we have for the\n    // numeral keys. They can be rendered just as easily with text (though that\n    // would mean that we'd be using text beyond the variable key).\n    const textRepresentation = `${num}`;\n    KeyConfigs[`NUM_${num}`] = {\n        type: KeyType.VALUE,\n        ariaLabel: textRepresentation,\n        icon: {\n            type: IconType.TEXT,\n            data: textRepresentation,\n        },\n    };\n}\n\n// Add in every variable.\nconst LETTERS = [\n    \"A\",\n    \"B\",\n    \"C\",\n    \"D\",\n    \"E\",\n    \"F\",\n    \"G\",\n    \"H\",\n    \"I\",\n    \"J\",\n    \"K\",\n    \"L\",\n    \"M\",\n    \"N\",\n    \"O\",\n    \"P\",\n    \"Q\",\n    \"R\",\n    \"S\",\n    \"T\",\n    \"U\",\n    \"V\",\n    \"W\",\n    \"X\",\n    \"Y\",\n    \"Z\",\n];\nfor (const letter of LETTERS) {\n    const lowerCaseVariable = letter.toLowerCase();\n    const upperCaseVariable = letter.toUpperCase();\n\n    for (const textRepresentation of [lowerCaseVariable, upperCaseVariable]) {\n        KeyConfigs[textRepresentation] = {\n            type: KeyType.VALUE,\n            ariaLabel: textRepresentation,\n            icon: {\n                type: IconType.MATH,\n                data: textRepresentation,\n            },\n        };\n    }\n}\n\nfor (const key of Object.keys(KeyConfigs)) {\n    KeyConfigs[key] = {\n        id: key,\n        // Default to an SVG icon indexed by the key name.\n        icon: {\n            type: IconType.SVG,\n            data: key,\n        },\n        ...KeyConfigs[key],\n    };\n}\n\nexport default KeyConfigs;\n","import KeyConfigs from \"../data/key-configs\";\nimport {EchoAnimationType, KeyType} from \"../enums\";\n\nimport type {Action} from \"./actions\";\nimport type {EchoState} from \"./types\";\n\n// Used to generate unique animation IDs for the echo animations. The actual\n// values are irrelevant as long as they are unique.\nlet _lastAnimationId = 0;\n\nconst initialEchoState = {\n    echoes: [],\n} as const;\n\nconst echoReducer = function (\n    state: EchoState = initialEchoState,\n    action: Action,\n): EchoState {\n    switch (action.type) {\n        case \"PressKey\":\n            const keyConfig = KeyConfigs[action.key];\n\n            // Add in the echo animation if the user performs a math\n            // operation.\n            if (\n                keyConfig.type === KeyType.VALUE ||\n                keyConfig.type === KeyType.OPERATOR\n            ) {\n                return {\n                    ...state,\n                    echoes: [\n                        ...state.echoes,\n                        {\n                            animationId: \"\" + _lastAnimationId++,\n                            animationType: action.inPopover\n                                ? EchoAnimationType.LONG_FADE_ONLY\n                                : EchoAnimationType.FADE_ONLY,\n                            borders: action.borders,\n                            id: keyConfig.id,\n                            initialBounds: action.initialBounds,\n                        },\n                    ],\n                };\n            }\n            return state;\n\n        case \"RemoveEcho\":\n            const remainingEchoes = state.echoes.filter((echo) => {\n                return echo.animationId !== action.animationId;\n            });\n            return {\n                ...state,\n                echoes: remainingEchoes,\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport default echoReducer;\n","import {CursorContext} from \"../components/input/cursor-contexts\";\nimport KeyConfigs from \"../data/key-configs\";\nimport {KeyType} from \"../enums\";\n\nimport type {Cursor, KeyHandler} from \"../types\";\nimport type {Action} from \"./actions\";\nimport type {InputState} from \"./types\";\n\nconst initialInputState: {\n    keyHandler: KeyHandler | null;\n    cursor: Cursor;\n} = {\n    keyHandler: null,\n    cursor: {\n        context: CursorContext.NONE,\n    },\n};\n\nconst inputReducer = function (\n    state: InputState = initialInputState,\n    action: Action,\n): InputState {\n    switch (action.type) {\n        case \"SetKeyHandler\":\n            return {\n                ...state,\n                keyHandler: action.keyHandler,\n            };\n\n        case \"PressKey\":\n            const keyConfig = KeyConfigs[action.key];\n            if (keyConfig.type !== KeyType.KEYPAD_NAVIGATION) {\n                // This is probably an anti-pattern but it works for the\n                // case where we don't actually control the state but we\n                // still want to communicate with the other object\n                return {\n                    ...state,\n                    cursor: state.keyHandler?.(keyConfig.id),\n                };\n            }\n\n            // TODO(kevinb) get state from MathQuill and store it?\n            return state;\n\n        case \"SetCursor\":\n            return {\n                ...state,\n                cursor: action.cursor,\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport default inputReducer;\n","/**\n * A small triangular decal to sit in the corner of a parent component.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {View} from \"../fake-react-native-web/index\";\n\nimport {offBlack} from \"./common-style\";\n\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\ntype Props = {\n    style: StyleType;\n};\n\nclass CornerDecal extends React.Component<Props> {\n    render() {\n        const {style} = this.props;\n\n        const containerStyle = [\n            styles.container,\n            ...(Array.isArray(style) ? style : [style]),\n        ];\n\n        return (\n            <View style={containerStyle}>\n                <svg\n                    width={triangleSizePx}\n                    height={triangleSizePx}\n                    viewBox=\"4 4 8 8\"\n                >\n                    <path\n                        fill={offBlack}\n                        opacity=\"0.3\"\n                        d=\"M5.29289322,5.70710678 L10.2928932,10.7071068 C10.9228581,11.3370716 12,10.8909049 12,10 L12,5 C12,4.44771525 11.5522847,4 11,4 L6,4 C5.10909515,4 4.66292836,5.07714192 5.29289322,5.70710678 Z\" // @Nolint\n                    />\n                </svg>\n            </View>\n        );\n    }\n}\n\nconst triangleSizePx = 7;\n\nconst styles = StyleSheet.create({\n    container: {\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        width: triangleSizePx,\n        height: triangleSizePx,\n    },\n});\n\nexport default CornerDecal;\n","/**\n * Common styles shared across components.\n */\n\nimport {StyleSheet} from \"aphrodite\";\n\nimport {compactKeypadBorderRadiusPx} from \"./common-style\";\n\nexport default StyleSheet.create({\n    row: {\n        flexDirection: \"row\",\n    },\n    column: {\n        flexDirection: \"column\",\n    },\n    oneColumn: {\n        flexGrow: 1,\n    },\n    fullWidth: {\n        width: \"100%\",\n    },\n    stretch: {\n        alignItems: \"stretch\",\n    },\n    centered: {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    centeredText: {\n        textAlign: \"center\",\n    },\n    roundedTopLeft: {\n        borderTopLeftRadius: compactKeypadBorderRadiusPx,\n    },\n    roundedTopRight: {\n        borderTopRightRadius: compactKeypadBorderRadiusPx,\n    },\n});\n","/**\n * A component that renders an icon with math (via KaTeX).\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport katex from \"katex\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport {View} from \"../fake-react-native-web/index\";\n\nimport {iconSizeHeightPx, iconSizeWidthPx} from \"./common-style\";\nimport Styles from \"./styles\";\n\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\nconst {row, centered} = Styles;\n\ntype Props = {\n    math: string;\n    style: StyleType;\n};\n\nclass MathIcon extends React.Component<Props> {\n    componentDidMount() {\n        this._renderMath();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.math !== this.props.math) {\n            this._renderMath();\n        }\n    }\n\n    _renderMath = () => {\n        const {math} = this.props;\n        katex.render(math, ReactDOM.findDOMNode(this));\n    };\n\n    render() {\n        const {style} = this.props;\n\n        const containerStyle = [\n            row,\n            centered,\n            styles.size,\n            styles.base,\n            ...(Array.isArray(style) ? style : [style]),\n        ];\n\n        return <View style={containerStyle} />;\n    }\n}\n\nconst styles = StyleSheet.create({\n    size: {\n        height: iconSizeHeightPx,\n        width: iconSizeWidthPx,\n    },\n\n    base: {\n        fontSize: 25,\n    },\n});\n\nexport default MathIcon;\n","/**\n * An autogenerated component that renders the COS iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Cos extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M13 12h24v24H13z\" />\n                    <path\n                        d=\"M18.182 29.168c1.386 0 2.226-.602 2.674-1.232l-1.162-1.078a1.707 1.707 0 0 1-1.428.728c-1.078 0-1.834-.798-1.834-1.974s.756-1.96 1.834-1.96c.616 0 1.106.252 1.428.728l1.162-1.092c-.448-.616-1.288-1.218-2.674-1.218-2.086 0-3.584 1.47-3.584 3.542 0 2.086 1.498 3.556 3.584 3.556zm6.972 0c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.336 1.582c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Cos;\n","/**\n * An autogenerated component that renders the LOG iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Log extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M16.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H31.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Log;\n","/**\n * An autogenerated component that renders the EQUAL iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Equal extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M16 21h17M16 27h17\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Equal;\n","/**\n * An autogenerated component that renders the BACKSPACE iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst Backspace = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                <path\n                    d=\"M13 24l6 6h14V18H19l-6 6zm-1.414-1.414l6-6A2 2 0 0 1 19 16h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H19a2 2 0 0 1-1.414-.586l-6-6a2 2 0 0 1 0-2.828z\"\n                    fill=\"#888D93\"\n                />\n                <path\n                    d=\"M23 21l6 6M29 21l-6 6\"\n                    stroke=\"#888D93\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default Backspace;\n","/**\n * An autogenerated component that renders the SQRT iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Sqrt extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M14 29l4 6 9-14h7\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Sqrt;\n","/**\n * An autogenerated component that renders the EXP iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Exp extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M28 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM30 18h4v4h-4v-4zM14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Exp;\n","/**\n * An autogenerated component that renders the NEQ iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Neq extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M19 33l10-18M16 21h17M16 27h17\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Neq;\n","/**\n * An autogenerated component that renders the GEQ iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Geq extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M16 33h16M16 30l16-6-16-6\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Geq;\n","/**\n * An autogenerated component that renders the LN iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Ln extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M20.836 29v-9.338h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882H22.6V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Ln;\n","/**\n * An autogenerated component that renders the DISMISS iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst Dismiss = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                <path\n                    d=\"M18 21l6 6 6-6\"\n                    strokeLinecap=\"round\"\n                    strokeWidth=\"2\"\n                    stroke=\"#71B307\"\n                    strokeLinejoin=\"round\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default Dismiss;\n","/**\n * An autogenerated component that renders the SIN iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Sin extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M18.655 29.168c1.876 0 2.926-.938 2.926-2.17 0-2.73-4.004-1.89-4.004-2.898 0-.378.42-.672 1.064-.672.826 0 1.596.35 2.002.784l.714-1.218c-.672-.532-1.582-.924-2.73-.924-1.778 0-2.772.994-2.772 2.128 0 2.66 4.018 1.75 4.018 2.87 0 .42-.364.728-1.134.728-.84 0-1.848-.462-2.338-.924l-.77 1.246c.714.658 1.848 1.05 3.024 1.05zm5.124-7.658c.588 0 1.064-.476 1.064-1.064 0-.588-.476-1.05-1.064-1.05a1.06 1.06 0 0 0-1.064 1.05c0 .588.49 1.064 1.064 1.064zm.896 7.49v-6.762h-1.778V29h1.778zm8.106 0v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Sin;\n","/**\n * An autogenerated component that renders the LT iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Lt extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M32 30l-16-6 16-6\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Lt;\n","/**\n * An autogenerated component that renders the CUBE_ROOT iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass CubeRoot extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M17.91 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z\"\n                        fill={this.props.color}\n                    />\n                    <path\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M14 29l4 6 9-14h7\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default CubeRoot;\n","/**\n * An autogenerated component that renders the PLUS iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Plus extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M19 24h10M24 29V19\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Plus;\n","/**\n * An autogenerated component that renders the TAN iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Tan extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M16.93 29.168c.742 0 1.218-.196 1.484-.434l-.378-1.344c-.098.098-.35.196-.616.196-.392 0-.616-.322-.616-.742v-3.052h1.372v-1.554h-1.372V20.39h-1.792v1.848h-1.12v1.554h1.12v3.528c0 1.204.672 1.848 1.918 1.848zM25.232 29v-4.368c0-1.946-1.414-2.562-2.954-2.562-1.064 0-2.128.336-2.954 1.064l.672 1.19c.574-.532 1.246-.798 1.974-.798.896 0 1.484.448 1.484 1.134v.91c-.448-.532-1.246-.826-2.142-.826-1.078 0-2.352.602-2.352 2.184 0 1.512 1.274 2.24 2.352 2.24.882 0 1.68-.322 2.142-.868v.7h1.778zm-3.206-1.036c-.7 0-1.274-.364-1.274-.994 0-.658.574-1.022 1.274-1.022.574 0 1.134.196 1.428.588v.84c-.294.392-.854.588-1.428.588zM33.338 29v-4.774c0-1.316-.714-2.156-2.198-2.156-1.106 0-1.932.532-2.366 1.05v-.882h-1.778V29h1.778v-4.55c.294-.406.84-.798 1.54-.798.756 0 1.246.322 1.246 1.26V29h1.778z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Tan;\n","/**\n * An arrow icon, used by the other navigational keys.\n */\nimport * as React from \"react\";\n\nconst Arrow = (props) => {\n    return (\n        <g fill=\"none\" fillRule=\"evenodd\" {...props}>\n            <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n            <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n            <path\n                stroke=\"#888D93\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M22 18l-6 6 6 6M16 24h16\"\n            />\n        </g>\n    );\n};\n\nexport default Arrow;\n","/**\n * An component that renders the LEFT iconograpy in SVG.\n */\nimport * as React from \"react\";\n\nimport Arrow from \"./arrow\";\n\nconst Left = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <Arrow />\n        </svg>\n    );\n};\n\nexport default Left;\n","/**\n * A component that renders the UP iconograpy in SVG.\n */\nimport * as React from \"react\";\n\nimport Arrow from \"./arrow\";\n\nconst Up = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <Arrow transform=\"rotate(90 24 24)\" />\n        </svg>\n    );\n};\n\nexport default Up;\n","/**\n * A component that renders the DOWN iconograpy in SVG.\n */\nimport * as React from \"react\";\n\nimport Arrow from \"./arrow\";\n\nconst Down = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <Arrow transform=\"rotate(270 24 24)\" />\n        </svg>\n    );\n};\n\nexport default Down;\n","/**\n * An autogenerated component that renders the LEFT_PAREN iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass LeftParen extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M26 14c-4 6-4 14 0 20\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default LeftParen;\n","/**\n * An autogenerated component that renders the RIGHT_PAREN iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass RightParen extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M23 14c4 6 4 14 0 20\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default RightParen;\n","/**\n * An autogenerated component that renders the GT iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Gt extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M16 30l16-6-16-6\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Gt;\n","/**\n * An autogenerated component that renders the DIVIDE iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Divide extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M19 24h10\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                    <circle fill={this.props.color} cx=\"24\" cy=\"19.5\" r=\"1.5\" />\n                    <circle fill={this.props.color} cx=\"24\" cy=\"28.5\" r=\"1.5\" />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Divide;\n","/**\n * An autogenerated component that renders the PERIOD iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Period extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <circle fill={this.props.color} cx=\"24\" cy=\"30\" r=\"2\" />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Period;\n","/**\n * An autogenerated component that renders the PERCENT iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Percent extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <g transform=\"translate(12 12)\">\n                        <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n                        <path\n                            d=\"M16 4L8 20\"\n                            stroke={this.props.color}\n                            strokeWidth=\"2\"\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                        />\n                        <circle\n                            stroke={this.props.color}\n                            strokeWidth=\"2\"\n                            cx=\"7\"\n                            cy=\"7\"\n                            r=\"3\"\n                        />\n                        <circle\n                            stroke={this.props.color}\n                            strokeWidth=\"2\"\n                            cx=\"17\"\n                            cy=\"17\"\n                            r=\"3\"\n                        />\n                    </g>\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Percent;\n","/**\n * An autogenerated component that renders the TIMES iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Times extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M20 20l8 8M28 20l-8 8\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Times;\n","/**\n * An autogenerated component that renders the EXP_3 iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Exp3 extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM30.92 23.12c1.66 0 2.76-.81 2.76-1.98 0-.96-.86-1.51-1.57-1.58.79-.13 1.46-.72 1.46-1.5 0-1.1-.95-1.83-2.65-1.83-1.23 0-2.11.45-2.67 1.08l.83 1.08c.47-.42 1.05-.64 1.66-.64.64 0 1.12.19 1.12.61 0 .35-.39.52-1.08.52-.25 0-.77 0-.9-.01v1.53c.1-.01.61-.01.9-.01.91 0 1.19.18 1.19.56 0 .37-.38.65-1.12.65-.58 0-1.34-.23-1.82-.7l-.87 1.17c.52.6 1.48 1.05 2.76 1.05z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Exp3;\n","/**\n * An autogenerated component that renders the EXP_2 iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Exp2 extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M14 21c0-.552.456-1 1.002-1h9.996A1 1 0 0 1 26 21v14c0 .552-.456 1-1.002 1h-9.996A1 1 0 0 1 14 35V21zm2 1h8v12h-8V22zM33.67 23v-1.5h-2.44c1.66-1.16 2.39-2.03 2.39-3.05 0-1.34-1.13-2.22-2.7-2.22-.93 0-1.99.33-2.7 1.11l.95 1.14c.48-.45 1.04-.73 1.78-.73.49 0 .92.24.92.7 0 .66-.54 1.12-3.43 3.21V23h5.23z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Exp2;\n","/**\n * A component that renders the RIGHT iconograpy in SVG.\n */\nimport * as React from \"react\";\n\nimport Arrow from \"./arrow\";\n\nconst Right = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <Arrow transform=\"rotate(180 24 24)\" />\n        </svg>\n    );\n};\n\nexport default Right;\n","/**\n * An autogenerated component that renders the CDOT iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Cdot extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <g transform=\"translate(12 12)\">\n                        <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n                        <circle fill={this.props.color} cx=\"12\" cy=\"12\" r=\"3\" />\n                    </g>\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Cdot;\n","/**\n * An autogenerated component that renders the LOG_N iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass LogN extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M30 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM32 30h4v4h-4v-4zM12.776 29v-9.338h-1.778V29h1.778zm4.9.168c2.24 0 3.584-1.624 3.584-3.556 0-1.918-1.344-3.542-3.584-3.542-2.226 0-3.57 1.624-3.57 3.542 0 1.932 1.344 3.556 3.57 3.556zm0-1.582c-1.106 0-1.722-.91-1.722-1.974 0-1.05.616-1.96 1.722-1.96 1.106 0 1.736.91 1.736 1.96 0 1.064-.63 1.974-1.736 1.974zm7.672 4.158c1.666 0 3.654-.63 3.654-3.206v-6.3H27.21v.868c-.546-.686-1.274-1.036-2.086-1.036-1.708 0-2.982 1.232-2.982 3.444 0 2.254 1.288 3.444 2.982 3.444.826 0 1.554-.392 2.086-1.064v.686c0 1.33-1.008 1.708-1.862 1.708-.854 0-1.568-.238-2.114-.84l-.798 1.288c.854.742 1.75 1.008 2.912 1.008zm.336-4.368c-1.008 0-1.708-.7-1.708-1.862 0-1.162.7-1.862 1.708-1.862.588 0 1.232.322 1.526.77v2.184c-.294.434-.938.77-1.526.77z\"\n                        fill={this.props.color}\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default LogN;\n","/**\n * An autogenerated component that renders the LEQ iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Leq extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                    <path\n                        d=\"M16 33h16M32 30l-16-6 16-6\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Leq;\n","/**\n * An autogenerated component that renders the MINUS iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Minus extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M19 24h10\"\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Minus;\n","/**\n * An autogenerated component that renders the RADICAL iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass Radical extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <path\n                        d=\"M13 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM15 18h4v4h-4v-4z\"\n                        fill={this.props.color}\n                    />\n                    <path\n                        stroke={this.props.color}\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M14 29l4 6 9-14h7\"\n                    />\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default Radical;\n","/**\n * An autogenerated component that renders the FRAC iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\n\nclass FracInclusive extends React.Component {\n    static propTypes = {\n        color: PropTypes.string.isRequired,\n    };\n\n    render() {\n        return (\n            <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n                <g fill=\"none\" fillRule=\"evenodd\">\n                    <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                    <g transform=\"translate(12 12)\">\n                        <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n                        <path\n                            d=\"M8 16.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997c-.55 0-.997-.453-.997-.997v-6.006zM10 18h4v4h-4v-4z\"\n                            fill={this.props.color}\n                        />\n                        <rect\n                            fill={this.props.color}\n                            x=\"2\"\n                            y=\"11\"\n                            width=\"20\"\n                            height=\"2\"\n                            rx=\"1\"\n                        />\n                        <path\n                            d=\"M8 .997C8 .447 8.453 0 8.997 0h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997H8.997C8.447 8 8 7.547 8 7.003V.997zM10 2h4v4h-4V2z\"\n                            fill={this.props.color}\n                        />\n                    </g>\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default FracInclusive;\n","/**\n * An autogenerated component that renders the JUMP_OUT_PARENTHESES iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst JumpOutParentheses = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                <path\n                    d=\"M24 18c3 3 3 9 0 12M18 18c-3 3-3 9 0 12\"\n                    stroke=\"#888D93\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n                <path\n                    stroke=\"#78C008\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M32 27l3-3-3-3M22 24h12\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default JumpOutParentheses;\n","/**\n * An autogenerated component that renders the JUMP_OUT_EXPONENT iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst JumpOutExponent = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                <path\n                    d=\"M35 19v16M23 19l8 8M31 23v4h-4\"\n                    stroke=\"#78C008\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n                <path\n                    d=\"M12 12.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 14h4v4h-4v-4z\"\n                    fill=\"#888D93\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default JumpOutExponent;\n","/**\n * An autogenerated component that renders the JUMP_OUT_BASE iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst JumpOutBase = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                <path\n                    d=\"M12 28.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM14 30h4v4h-4v-4z\"\n                    fill=\"#888D93\"\n                />\n                <path\n                    d=\"M35 13v16M23 29l8-8M27 21h4v4\"\n                    stroke=\"#78C008\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default JumpOutBase;\n","/**\n * An autogenerated component that renders the JUMP_INTO_NUMERATOR iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst JumpIntoNumerator = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                <path\n                    d=\"M13 16v16M17 22l6-6M23 20v-4h-4\"\n                    stroke=\"#78C008\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n                <path\n                    d=\"M26 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 29h4v4h-4v-4z\"\n                    fill=\"#888D93\"\n                />\n                <path\n                    d=\"M35 24H25\"\n                    stroke=\"#888D93\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n                <path\n                    d=\"M26 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM28 15h4v4h-4v-4z\"\n                    fill=\"#78C008\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default JumpIntoNumerator;\n","/**\n * An autogenerated component that renders the JUMP_OUT_NUMERATOR iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst JumpOutNumerator = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path fill=\"none\" d=\"M0 0h48v48H0z\" />\n                <path fill=\"none\" d=\"M12 12h24v24H12z\" />\n                <path\n                    stroke=\"#78C008\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M33 29l-3 3-3-3M30 18v14\"\n                />\n                <path\n                    d=\"M16 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 29h4v4h-4v-4z\"\n                    fill=\"#78C008\"\n                />\n                <path\n                    d=\"M25 24H15\"\n                    stroke=\"#888D93\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n                <path\n                    d=\"M16 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM18 15h4v4h-4v-4z\"\n                    fill=\"#888D93\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default JumpOutNumerator;\n","/**\n * An autogenerated component that renders the JUMP_OUT_DENOMINATOR iconograpy in SVG.\n *\n * Generated with: https://gist.github.com/crm416/3c7abc88e520eaed72347af240b32590.\n */\nimport * as React from \"react\";\n\nconst JumpOutDenominator = () => {\n    return (\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\">\n            <g fill=\"none\" fillRule=\"evenodd\">\n                <path d=\"M0 0h48v48H0z\" />\n                <path d=\"M12 12h24v24H12z\" />\n                <path\n                    d=\"M35 16v16m-4-4v-4h-4m-2 6l6-6\"\n                    stroke=\"#78C008\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n                <path\n                    d=\"M14 27.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 29h4v4h-4v-4z\"\n                    fill=\"#888D93\"\n                />\n                <path\n                    d=\"M23 24H13\"\n                    stroke=\"#888D93\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n                <path\n                    d=\"M14 13.997c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM16 15h4v4h-4v-4z\"\n                    fill=\"#888D93\"\n                />\n            </g>\n        </svg>\n    );\n};\n\nexport default JumpOutDenominator;\n","/**\n * A directory of autogenerated icon components.\n */\n\nexport {default as COS} from \"./cos\";\nexport {default as LOG} from \"./log\";\nexport {default as EQUAL} from \"./equal\";\nexport {default as BACKSPACE} from \"./backspace\";\nexport {default as SQRT} from \"./sqrt\";\nexport {default as EXP} from \"./exp\";\nexport {default as NEQ} from \"./neq\";\nexport {default as GEQ} from \"./geq\";\nexport {default as LN} from \"./ln\";\nexport {default as DISMISS} from \"./dismiss\";\nexport {default as SIN} from \"./sin\";\nexport {default as LT} from \"./lt\";\nexport {default as CUBE_ROOT} from \"./cube-root\";\nexport {default as PLUS} from \"./plus\";\nexport {default as TAN} from \"./tan\";\nexport {default as LEFT} from \"./left\";\nexport {default as UP} from \"./up\";\nexport {default as DOWN} from \"./down\";\nexport {default as LEFT_PAREN} from \"./left-paren\";\nexport {default as RIGHT_PAREN} from \"./right-paren\";\nexport {default as GT} from \"./gt\";\nexport {default as DIVIDE} from \"./divide\";\nexport {default as PERIOD} from \"./period\";\nexport {default as PERCENT} from \"./percent\";\nexport {default as TIMES} from \"./times\";\nexport {default as EXP_3} from \"./exp-3\";\nexport {default as EXP_2} from \"./exp-2\";\nexport {default as RIGHT} from \"./right\";\nexport {default as CDOT} from \"./cdot\";\nexport {default as LOG_N} from \"./log-n\";\nexport {default as LEQ} from \"./leq\";\nexport {default as MINUS} from \"./minus\";\nexport {default as NEGATIVE} from \"./minus\";\nexport {default as RADICAL} from \"./radical\";\nexport {default as FRAC} from \"./frac\";\nexport {default as JUMP_OUT_PARENTHESES} from \"./jump-out-parentheses\";\nexport {default as JUMP_OUT_EXPONENT} from \"./jump-out-exponent\";\nexport {default as JUMP_OUT_BASE} from \"./jump-out-base\";\nexport {default as JUMP_INTO_NUMERATOR} from \"./jump-into-numerator\";\nexport {default as JUMP_OUT_NUMERATOR} from \"./jump-out-numerator\";\nexport {default as JUMP_OUT_DENOMINATOR} from \"./jump-out-denominator\";\n","/**\n * A component that renders a single SVG icon.\n */\n\nimport * as React from \"react\";\n\nimport * as Iconography from \"./iconography/index\";\n\ntype Props = {\n    color: string;\n    name: string;\n};\n\nclass SvgIcon extends React.Component<Props> {\n    render() {\n        const {color, name} = this.props;\n\n        // eslint-disable-next-line import/namespace\n        const SvgForName = Iconography[name];\n        return <SvgForName color={color} />;\n    }\n}\n\nexport default SvgIcon;\n","/**\n * A component that renders a text-based icon.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {View, Text} from \"../fake-react-native-web/index\";\n\nimport {iconSizeHeightPx, iconSizeWidthPx} from \"./common-style\";\nimport Styles from \"./styles\";\n\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\nconst {row, centered} = Styles;\n\ntype Props = {\n    character: string;\n    style?: StyleType;\n};\n\nclass TextIcon extends React.Component<Props> {\n    render() {\n        const {character, style} = this.props;\n\n        const containerStyle = [\n            row,\n            centered,\n            styles.size,\n            styles.base,\n            ...(Array.isArray(style) ? style : [style]),\n        ];\n        return (\n            <View style={containerStyle}>\n                <Text>{character}</Text>\n            </View>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    size: {\n        height: iconSizeHeightPx,\n        width: iconSizeWidthPx,\n    },\n\n    base: {\n        fontFamily: \"Proxima Nova\",\n        fontSize: 25,\n    },\n});\n\nexport default TextIcon;\n","/**\n * A component that renders an icon for a symbol with the given name.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {IconType} from \"../enums\";\n\nimport {offBlack} from \"./common-style\";\nimport MathIcon from \"./math-icon\";\nimport SvgIcon from \"./svg-icon\";\nimport TextIcon from \"./text-icon\";\n\nimport type {IconConfig} from \"../types\";\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\nconst focusedColor = \"#FFF\";\nconst unfocusedColor = offBlack;\n\ntype Props = {\n    focused: boolean;\n    icon: IconConfig;\n    style?: StyleType;\n};\n\nclass Icon extends React.PureComponent<Props> {\n    render() {\n        const {focused, icon, style} = this.props;\n\n        const styleWithFocus: StyleType = [\n            focused ? styles.focused : styles.unfocused,\n            ...(Array.isArray(style) ? style : [style]),\n        ];\n\n        switch (icon.type) {\n            case IconType.MATH:\n                return <MathIcon math={icon.data} style={styleWithFocus} />;\n\n            case IconType.SVG:\n                // TODO(charlie): Support passing style objects to `SvgIcon`.\n                // This will require migrating the individual icons to use\n                // `currentColor` and accept a `className` prop, rather than\n                // relying on an explicit color prop.\n                return (\n                    <SvgIcon\n                        name={icon.data}\n                        color={focused ? focusedColor : unfocusedColor}\n                    />\n                );\n\n            case IconType.TEXT:\n                return (\n                    <TextIcon character={icon.data} style={styleWithFocus} />\n                );\n            default:\n                throw new Error(\"No icon or symbol provided\");\n        }\n    }\n}\n\nconst styles = StyleSheet.create({\n    unfocused: {\n        color: unfocusedColor,\n    },\n\n    focused: {\n        color: focusedColor,\n    },\n});\n\nexport default Icon;\n","/**\n * A grid of symbols, rendered as text and positioned based on the number of\n * symbols provided. Up to four symbols will be shown.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {IconType} from \"../enums\";\nimport {View} from \"../fake-react-native-web/index\";\nimport {IconConfig} from \"../types\";\n\nimport {iconSizeHeightPx, iconSizeWidthPx} from \"./common-style\";\nimport Icon from \"./icon\";\nimport Styles from \"./styles\";\n\nconst {row, column, centered, fullWidth} = Styles;\n\ntype Props = {\n    focused: boolean;\n    icons: ReadonlyArray<IconConfig>;\n};\n\nclass MultiSymbolGrid extends React.Component<Props> {\n    render() {\n        const {focused, icons} = this.props;\n\n        // Validate that we only received math-based icons. Right now, this\n        // component only supports math icons (and it should only be passed\n        // variables and Greek letters, which are always rendered as math).\n        // Supporting other types of icons is possible but would require\n        // some styles coercion and doesn't seem worthwhile right now.\n        icons.forEach((icon) => {\n            if (icon.type !== IconType.MATH) {\n                throw new Error(\n                    `Received invalid icon: type=${icon.type}, ` +\n                        `data=${icon.data}`,\n                );\n            }\n        });\n\n        if (icons.length === 1) {\n            return <Icon icon={icons[0]} focused={focused} />;\n        } else {\n            const primaryIconStyle = styles.base;\n            const secondaryIconStyle = [styles.base, styles.secondary];\n\n            if (icons.length === 2) {\n                return (\n                    <View style={[row, styles.size]}>\n                        <View\n                            style={[\n                                column,\n                                centered,\n                                fullWidth,\n                                styles.middleLeft,\n                            ]}\n                        >\n                            <Icon\n                                style={primaryIconStyle}\n                                icon={icons[0]}\n                                focused={focused}\n                            />\n                        </View>\n                        <View\n                            style={[\n                                column,\n                                centered,\n                                fullWidth,\n                                styles.middleRight,\n                            ]}\n                        >\n                            <Icon\n                                style={secondaryIconStyle}\n                                icon={icons[1]}\n                                focused={focused}\n                            />\n                        </View>\n                    </View>\n                );\n            } else if (icons.length >= 3) {\n                return (\n                    <View style={[column, styles.size]}>\n                        <View style={row}>\n                            <View style={[centered, fullWidth, styles.topLeft]}>\n                                <Icon\n                                    style={primaryIconStyle}\n                                    icon={icons[0]}\n                                    focused={focused}\n                                />\n                            </View>\n                            <View\n                                style={[centered, fullWidth, styles.topRight]}\n                            >\n                                <Icon\n                                    style={secondaryIconStyle}\n                                    icon={icons[1]}\n                                    focused={focused}\n                                />\n                            </View>\n                        </View>\n                        <View style={row}>\n                            <View\n                                style={[centered, fullWidth, styles.bottomLeft]}\n                            >\n                                <Icon\n                                    style={secondaryIconStyle}\n                                    icon={icons[2]}\n                                    focused={focused}\n                                />\n                            </View>\n                            <View\n                                style={[\n                                    centered,\n                                    fullWidth,\n                                    styles.bottomRight,\n                                ]}\n                            >\n                                {icons[3] && (\n                                    <Icon\n                                        style={secondaryIconStyle}\n                                        icon={icons[3]}\n                                        focused={focused}\n                                    />\n                                )}\n                            </View>\n                        </View>\n                    </View>\n                );\n            }\n        }\n\n        throw new Error(`Invalid number of icons: ${icons.length}`);\n    }\n}\n\nconst verticalInsetPx = 2;\nconst horizontalInsetPx = 4;\n\nconst styles = StyleSheet.create({\n    size: {\n        height: iconSizeHeightPx,\n        width: iconSizeWidthPx,\n    },\n\n    // For the three- and four-icon layouts.\n    bottomLeft: {\n        marginBottom: verticalInsetPx,\n        marginLeft: horizontalInsetPx,\n    },\n    topLeft: {\n        marginTop: verticalInsetPx,\n        marginLeft: horizontalInsetPx,\n    },\n    topRight: {\n        marginTop: verticalInsetPx,\n        marginRight: horizontalInsetPx,\n    },\n    bottomRight: {\n        marginBottom: verticalInsetPx,\n        marginRight: horizontalInsetPx,\n    },\n\n    // For the two-icon layout.\n    middleLeft: {\n        marginLeft: horizontalInsetPx,\n    },\n    middleRight: {\n        marginRight: horizontalInsetPx,\n    },\n\n    base: {\n        fontSize: 18,\n    },\n\n    secondary: {\n        opacity: 0.3,\n    },\n});\n\nexport default MultiSymbolGrid;\n","/**\n * A component that renders a keypad button.\n */\n\nimport {StyleSheet, css} from \"aphrodite\";\nimport * as React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport {BorderDirection, BorderStyles, KeyType} from \"../enums\";\nimport {View} from \"../fake-react-native-web/index\";\n\nimport {\n    wonderBlocksBlue,\n    innerBorderColor,\n    innerBorderStyle,\n    innerBorderWidthPx,\n    valueGrey,\n    operatorGrey,\n    controlGrey,\n    emptyGrey,\n} from \"./common-style\";\nimport CornerDecal from \"./corner-decal\";\nimport Icon from \"./icon\";\nimport MultiSymbolGrid from \"./multi-symbol-grid\";\n\nimport type {State} from \"../store/types\";\nimport type {Border, NonManyKeyConfig, IconConfig} from \"../types\";\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\ninterface ReduxProps {\n    heightPx: number;\n    widthPx: number;\n}\n\ninterface Props extends ReduxProps {\n    ariaLabel?: string;\n    borders: Border;\n    childKeys: ReadonlyArray<NonManyKeyConfig>;\n    disabled: boolean;\n    focused: boolean;\n    popoverEnabled: boolean;\n    type: KeyType;\n    icon: IconConfig;\n    style?: StyleType;\n    onTouchCancel?: (evt: React.TouchEvent<HTMLDivElement>) => void;\n    onTouchEnd?: (evt: React.TouchEvent<HTMLDivElement>) => void;\n    onTouchMove?: (evt: React.TouchEvent<HTMLDivElement>) => void;\n    onTouchStart?: (evt: React.TouchEvent<HTMLDivElement>) => void;\n    // NOTE(matthewc)[LC-754] this is a normal React thing, but TS\n    // gets mad if I don't explicitly set it as a prop\n    ref?: (any) => void;\n}\n\n// eslint-disable-next-line react/no-unsafe\nclass KeypadButton extends React.PureComponent<Props> {\n    buttonSizeStyle: StyleType | undefined;\n\n    static defaultProps = {\n        borders: BorderStyles.ALL,\n        childKeys: [],\n        disabled: false,\n        focused: false,\n        popoverEnabled: false,\n    };\n\n    UNSAFE_componentWillMount() {\n        this.buttonSizeStyle = styleForButtonDimensions(\n            this.props.heightPx,\n            this.props.widthPx,\n        );\n    }\n\n    componentDidMount() {\n        this._preInjectStyles();\n    }\n\n    UNSAFE_componentWillUpdate(newProps, newState) {\n        // Only recompute the Aphrodite StyleSheet when the button height has\n        // changed. Though it is safe to recompute the StyleSheet (since\n        // they're content-addressable), it saves us a bunch of hashing and\n        // other work to cache it here.\n        if (\n            newProps.heightPx !== this.props.heightPx ||\n            newProps.widthPx !== this.props.widthPx\n        ) {\n            this.buttonSizeStyle = styleForButtonDimensions(\n                newProps.heightPx,\n                newProps.widthPx,\n            );\n\n            this._preInjectStyles();\n        }\n    }\n\n    _preInjectStyles = () => {\n        // HACK(charlie): Pre-inject all of the possible styles for the button.\n        // This avoids a flickering effect in the echo animation whereby the\n        // echoes vary in size as they animate. Note that we need to account for\n        // the \"initial\" styles that `View` will include, as these styles are\n        // applied to `View` components and Aphrodite will consolidate the style\n        // object. This method must be called whenever a property that\n        // influences the possible outcomes of `this._getFocusStyle` and\n        // `this._getButtonStyle` changes (such as `this.buttonSizeStyle`).\n        for (const type of Object.values(KeyType)) {\n            css(View.styles.initial, ...this._getFocusStyle(type));\n\n            for (const borders of Object.values(BorderStyles)) {\n                css(\n                    View.styles.initial,\n                    ...this._getButtonStyle(type, borders),\n                );\n            }\n        }\n    };\n\n    _getFocusStyle = (type: KeyType) => {\n        let focusBackgroundStyle;\n        if (\n            type === KeyType.INPUT_NAVIGATION ||\n            type === KeyType.KEYPAD_NAVIGATION\n        ) {\n            focusBackgroundStyle = styles.light;\n        } else {\n            focusBackgroundStyle = styles.bright;\n        }\n\n        return [styles.focusBox, focusBackgroundStyle];\n    };\n\n    _getButtonStyle = (type, borders, style?) => {\n        // Select the appropriate style for the button.\n        let backgroundStyle;\n        switch (type) {\n            case KeyType.EMPTY:\n                backgroundStyle = styles.empty;\n                break;\n\n            case KeyType.MANY:\n            case KeyType.VALUE:\n                backgroundStyle = styles.value;\n                break;\n\n            case KeyType.OPERATOR:\n                backgroundStyle = styles.operator;\n                break;\n\n            case KeyType.INPUT_NAVIGATION:\n            case KeyType.KEYPAD_NAVIGATION:\n                backgroundStyle = styles.control;\n                break;\n\n            case KeyType.ECHO:\n                backgroundStyle = null;\n                break;\n        }\n\n        const borderStyle = [];\n        if (borders.includes(BorderDirection.LEFT)) {\n            // @ts-expect-error TS2345\n            borderStyle.push(styles.leftBorder);\n        }\n        if (borders.includes(BorderDirection.BOTTOM)) {\n            // @ts-expect-error TS2345\n            borderStyle.push(styles.bottomBorder);\n        }\n\n        return [\n            styles.buttonBase,\n            backgroundStyle,\n            ...borderStyle,\n            type === KeyType.ECHO && styles.echo,\n            this.buttonSizeStyle,\n            // React Native allows you to set the 'style' props on user defined\n            // components.\n            //   See: https://facebook.github.io/react-native/docs/style.html\n            ...(Array.isArray(style) ? style : [style]),\n        ];\n    };\n\n    render() {\n        const {\n            ariaLabel,\n            borders,\n            childKeys,\n            disabled,\n            focused,\n            icon,\n            onTouchCancel,\n            onTouchEnd,\n            onTouchMove,\n            onTouchStart,\n            popoverEnabled,\n            style,\n            type,\n        } = this.props;\n\n        // We render in the focus state if the key is focused, or if it's an\n        // echo.\n        const renderFocused =\n            (!disabled && focused) || popoverEnabled || type === KeyType.ECHO;\n        const buttonStyle = this._getButtonStyle(type, borders, style);\n        const focusStyle = this._getFocusStyle(type);\n        const iconWrapperStyle = [\n            styles.iconWrapper,\n            disabled ? styles.disabled : undefined,\n        ];\n\n        const eventHandlers = {\n            onTouchCancel,\n            onTouchEnd,\n            onTouchMove,\n            onTouchStart,\n        };\n\n        const maybeFocusBox = renderFocused && <View style={focusStyle} />;\n        const maybeCornerDecal = !renderFocused &&\n            !disabled &&\n            childKeys &&\n            childKeys.length > 0 && <CornerDecal style={styles.decalInset} />;\n\n        if (type === KeyType.EMPTY) {\n            return <View style={buttonStyle} {...eventHandlers} />;\n        } else if (type === KeyType.MANY) {\n            // TODO(charlie): Make the long-press interaction accessible. See\n            // the TODO in key-configs.js for more.\n            const manyButtonA11yMarkup = {\n                role: \"button\",\n                ariaLabel: childKeys[0].ariaLabel,\n            };\n            const icons = childKeys.map((keyConfig) => {\n                return keyConfig.icon;\n            }) as ReadonlyArray<IconConfig>;\n            return (\n                <View\n                    style={buttonStyle}\n                    {...eventHandlers}\n                    {...manyButtonA11yMarkup}\n                >\n                    {maybeFocusBox}\n                    <View style={iconWrapperStyle}>\n                        <MultiSymbolGrid\n                            icons={icons}\n                            focused={renderFocused}\n                        />\n                    </View>\n                    {maybeCornerDecal}\n                </View>\n            );\n        } else {\n            const a11yMarkup = {\n                role: \"button\",\n                ariaLabel: ariaLabel,\n            };\n\n            return (\n                <View style={buttonStyle} {...eventHandlers} {...a11yMarkup}>\n                    {maybeFocusBox}\n                    <View style={iconWrapperStyle}>\n                        <Icon\n                            icon={icon as IconConfig}\n                            focused={renderFocused}\n                        />\n                    </View>\n                    {maybeCornerDecal}\n                </View>\n            );\n        }\n    }\n}\n\nconst focusInsetPx = 4;\nconst focusBoxZIndex = 0;\n\nconst styles = StyleSheet.create({\n    buttonBase: {\n        flex: 1,\n        cursor: \"pointer\",\n        // Make the text unselectable\n        userSelect: \"none\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        // Borders are made selectively visible.\n        borderColor: innerBorderColor,\n        borderStyle: innerBorderStyle,\n        boxSizing: \"border-box\",\n    },\n\n    decalInset: {\n        top: focusInsetPx,\n        right: focusInsetPx,\n    },\n\n    // Overrides for the echo state, where we want to render the borders for\n    // layout purposes, but we don't want them to be visible.\n    echo: {\n        borderColor: \"transparent\",\n    },\n\n    // Background colors and other base styles that may vary between key types.\n    value: {\n        backgroundColor: valueGrey,\n    },\n    operator: {\n        backgroundColor: operatorGrey,\n    },\n    control: {\n        backgroundColor: controlGrey,\n    },\n    empty: {\n        backgroundColor: emptyGrey,\n        cursor: \"default\",\n    },\n\n    bright: {\n        backgroundColor: wonderBlocksBlue,\n    },\n    light: {\n        backgroundColor: \"rgba(33, 36, 44, 0.1)\",\n    },\n\n    iconWrapper: {\n        zIndex: focusBoxZIndex + 1,\n    },\n\n    focusBox: {\n        position: \"absolute\",\n        zIndex: focusBoxZIndex,\n        left: focusInsetPx,\n        right: focusInsetPx,\n        bottom: focusInsetPx,\n        top: focusInsetPx,\n        borderRadius: 1,\n    },\n\n    disabled: {\n        opacity: 0.3,\n    },\n\n    // Styles used to render the appropriate borders. Buttons are only allowed\n    // to render left and bottom borders, to simplify layout.\n    leftBorder: {\n        borderLeftWidth: innerBorderWidthPx,\n    },\n    bottomBorder: {\n        borderBottomWidth: innerBorderWidthPx,\n    },\n});\n\nconst styleForButtonDimensions = (heightPx, widthPx) => {\n    return StyleSheet.create({\n        // eslint-disable-next-line react-native/no-unused-styles\n        buttonSize: {\n            height: heightPx,\n            width: widthPx,\n            maxWidth: widthPx,\n        },\n    }).buttonSize;\n};\n\nconst mapStateToProps = (state: State): ReduxProps => {\n    return {\n        heightPx: state.layout.buttonDimensions.heightPx,\n        widthPx: state.layout.buttonDimensions.widthPx,\n    };\n};\n\nexport default connect(mapStateToProps, null, null, {forwardRef: true})(\n    KeypadButton,\n);\n","/**\n * A keypad button containing no symbols and triggering no actions on click.\n */\n\nimport * as React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport KeyConfigs from \"../data/key-configs\";\n\nimport GestureManager from \"./gesture-manager\";\nimport KeypadButton from \"./keypad-button\";\n\nimport type {State} from \"../store/types\";\n\ninterface ReduxProps {\n    gestureManager: GestureManager;\n}\n\nclass EmptyKeypadButton extends React.Component<ReduxProps> {\n    render() {\n        const {gestureManager, ...rest} = this.props;\n\n        // Register touch events on the button, but don't register its DOM node\n        // or compute focus state or anything like that. We want the gesture\n        // manager to know about touch events that start on empty buttons, but\n        // we don't need it to know about their DOM nodes, as it doesn't need\n        // to focus them or trigger presses.\n        return (\n            <KeypadButton\n                onTouchStart={(evt: TouchEvent) =>\n                    gestureManager.onTouchStart(evt)\n                }\n                onTouchEnd={(evt: TouchEvent) => gestureManager.onTouchEnd(evt)}\n                onTouchMove={(evt: TouchEvent) =>\n                    gestureManager.onTouchMove(evt)\n                }\n                onTouchCancel={(evt: TouchEvent) =>\n                    gestureManager.onTouchCancel(evt)\n                }\n                {...KeyConfigs.NOOP}\n                {...rest}\n            />\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): ReduxProps => {\n    const {gestures} = state;\n    return {\n        gestureManager: gestures.gestureManager,\n    };\n};\n\nexport default connect(mapStateToProps, null, null, {forwardRef: true})(\n    EmptyKeypadButton,\n);\n","/**\n * A touchable wrapper around the base KeypadButton component. This button is\n * responsible for keeping our button ID system (which will be used to handle\n * touch events globally) opaque to the KeypadButton.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {connect} from \"react-redux\";\n\nimport KeyConfigs from \"../data/key-configs\";\nimport Keys from \"../data/keys\";\nimport {KeyType} from \"../enums\";\n\nimport GestureManager from \"./gesture-manager\";\nimport KeypadButton from \"./keypad-button\";\n\nimport type {State} from \"../store/types\";\nimport type {Border, IconConfig, KeyConfig, NonManyKeyConfig} from \"../types\";\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\ninterface SharedProps {\n    borders?: Border;\n    disabled?: boolean;\n    style?: StyleType;\n}\n\ninterface OwnProps extends SharedProps {\n    keyConfig: KeyConfig;\n}\n\ninterface Props extends SharedProps {\n    childKeyIds?: ReadonlyArray<string>;\n    gestureManager: GestureManager;\n    id: Keys | \"MANY\";\n    focused: boolean;\n    popoverEnabled: boolean;\n    childKeys?: ReadonlyArray<NonManyKeyConfig>;\n    ariaLabel?: string;\n    icon: IconConfig;\n    type: KeyType;\n}\n\nclass TouchableKeypadButton extends React.Component<Props> {\n    shouldComponentUpdate(newProps: Props) {\n        // We take advantage of a few different properties of our key\n        // configuration system. Namely, we know that the other props flow\n        // directly from the ID, and thus don't need to be checked. If a key has\n        // a custom style, we bail out (this should be rare).\n        return (\n            newProps.id !== this.props.id ||\n            newProps.gestureManager !== this.props.gestureManager ||\n            newProps.focused !== this.props.focused ||\n            newProps.disabled !== this.props.disabled ||\n            newProps.popoverEnabled !== this.props.popoverEnabled ||\n            newProps.type !== this.props.type ||\n            !!newProps.style\n        );\n    }\n\n    componentWillUnmount() {\n        const {gestureManager, id} = this.props;\n        gestureManager.unregisterDOMNode(id);\n    }\n\n    render() {\n        const {\n            borders,\n            childKeyIds,\n            disabled,\n            gestureManager,\n            id,\n            style,\n            ...rest\n        } = this.props;\n\n        // Only bind the relevant event handlers if the key is enabled.\n        const eventHandlers = disabled\n            ? {\n                  onTouchStart: (evt) => evt.preventDefault(),\n              }\n            : {\n                  onTouchStart: (evt) => gestureManager.onTouchStart(evt, id),\n                  onTouchEnd: (evt) => gestureManager.onTouchEnd(evt),\n                  onTouchMove: (evt) => gestureManager.onTouchMove(evt),\n                  onTouchCancel: (evt) => gestureManager.onTouchCancel(evt),\n              };\n\n        const styleWithAddons = [\n            ...(Array.isArray(style) ? style : [style]),\n            styles.preventScrolls,\n        ];\n\n        return (\n            <KeypadButton\n                ref={(node) =>\n                    gestureManager.registerDOMNode(\n                        id,\n                        ReactDOM.findDOMNode(node),\n                        childKeyIds,\n                        borders,\n                    )\n                }\n                borders={borders}\n                disabled={disabled}\n                style={styleWithAddons}\n                {...eventHandlers}\n                {...rest}\n            />\n        );\n    }\n}\n\nconst extractProps = (keyConfig: NonManyKeyConfig) => {\n    const {ariaLabel, icon, type} = keyConfig;\n    return {ariaLabel, icon, type};\n};\n\nconst mapStateToProps = (state: State, ownProps: OwnProps): Props => {\n    const {gestures} = state;\n\n    const {keyConfig, ...rest} = ownProps;\n    const {id, type} = keyConfig;\n\n    const childKeyIds =\n        \"childKeyIds\" in keyConfig ? keyConfig.childKeyIds : undefined;\n\n    const childKeys = childKeyIds\n        ? childKeyIds.map((id) => KeyConfigs[id])\n        : undefined;\n\n    // Override with the default child props, if the key is a multi-symbol key\n    // (but not a many-symbol key, which operates under different rules).\n    const useFirstChildProps =\n        type !== KeyType.MANY && childKeys && childKeys.length > 0;\n\n    return {\n        ...rest,\n        childKeyIds: childKeyIds,\n        gestureManager: gestures.gestureManager,\n        id: id,\n\n        // Add in some gesture state.\n        focused: gestures.focus === id,\n        popoverEnabled: gestures.popover?.parentId === id,\n\n        // Pass down the child keys and any extracted props.\n        childKeys,\n        ...extractProps(useFirstChildProps ? childKeys[0] : keyConfig),\n    };\n};\n\nconst styles = StyleSheet.create({\n    preventScrolls: {\n        // Touch events that start in the touchable buttons shouldn't be\n        // allowed to produce page scrolls.\n        touchAction: \"none\",\n    },\n});\n\nexport default connect(mapStateToProps, null, null, {forwardRef: true})(\n    TouchableKeypadButton,\n);\n","/**\n * A keypad button that displays an arbitrary number of symbols, with no\n * 'default' symbol.\n */\n\nimport * as React from \"react\";\n\nimport KeyConfigs from \"../data/key-configs\";\nimport {KeyType} from \"../enums\";\nimport {KeyConfig} from \"../types\";\n\nimport EmptyKeypadButton from \"./empty-keypad-button\";\nimport TouchableKeypadButton from \"./touchable-keypad-button\";\n\ntype Props = {\n    keys: ReadonlyArray<string>;\n};\n\nclass ManyKeypadButton extends React.Component<Props> {\n    static defaultProps = {\n        keys: [],\n    };\n\n    render() {\n        const {keys, ...rest} = this.props;\n\n        // If we have no extra symbols, render an empty button. If we have just\n        // one, render a standard button. Otherwise, capture them all in a\n        // single button.\n        if (keys.length === 0) {\n            return <EmptyKeypadButton />;\n        } else if (keys.length === 1) {\n            const keyConfig = KeyConfigs[keys[0]];\n            return <TouchableKeypadButton keyConfig={keyConfig} {...rest} />;\n        } else {\n            const keyConfig: KeyConfig = {\n                id: \"MANY\",\n                type: KeyType.MANY,\n                childKeyIds: keys,\n            };\n            return <TouchableKeypadButton keyConfig={keyConfig} {...rest} />;\n        }\n    }\n}\n\nexport default ManyKeypadButton;\n","/**\n * This file contains all of the z-index values used throughout the math-input\n * component and its children.\n */\n\nexport const popover = 1;\nexport const echo = 2;\nexport const keypad = 1060;\n","/**\n * A component that renders and animates the selection state effect effect.\n */\n\nimport * as React from \"react\";\nimport {TransitionGroup, CSSTransition} from \"react-transition-group\";\n\nimport KeyConfigs from \"../data/key-configs\";\nimport Keys from \"../data/keys\";\nimport {KeyType, EchoAnimationType} from \"../enums\";\n\nimport KeypadButton from \"./keypad-button\";\nimport * as zIndexes from \"./z-indexes\";\n\nimport type {Border, Bound} from \"../types\";\n\ntype EchoProps = {\n    animationDurationMs: number;\n    borders: Border;\n    id: Keys;\n    initialBounds: Bound;\n    onAnimationFinish: () => void;\n};\n\nclass Echo extends React.Component<EchoProps> {\n    componentDidMount() {\n        // NOTE(charlie): This is somewhat unfortunate, as the component is\n        // encoding information about its own animation, of which it should be\n        // ignorant. However, there doesn't seem to be a cleaner way to make\n        // this happen, and at least here, all the animation context is\n        // colocated in this file.\n        const {animationDurationMs, onAnimationFinish} = this.props;\n        setTimeout(() => onAnimationFinish(), animationDurationMs);\n    }\n\n    render() {\n        const {borders, id, initialBounds} = this.props;\n        const {icon} = KeyConfigs[id];\n\n        const containerStyle: any = {\n            zIndex: zIndexes.echo,\n            position: \"absolute\",\n            pointerEvents: \"none\",\n            ...initialBounds,\n        };\n\n        // NOTE(charlie): In some browsers, Aphrodite doesn't seem to flush its\n        // styles quickly enough, so there's a flickering effect on the first\n        // animation. Thus, it's much safer to do the styles purely inline.\n        // <View> makes this difficult because some of its defaults, which are\n        // applied via StyleSheet, will override our inlines.\n        return (\n            <div style={containerStyle}>\n                <KeypadButton\n                    icon={icon}\n                    type={KeyType.ECHO}\n                    borders={borders}\n                />\n            </div>\n        );\n    }\n}\n\ntype EchoPropType = {\n    animationId: string;\n    animationType: EchoAnimationType;\n    borders: Border;\n    id: Keys;\n    initialBounds: Bound;\n};\n\ntype EchoManagerProps = {\n    echoes: ReadonlyArray<EchoPropType>;\n    onAnimationFinish?: (animationId: string) => void;\n};\n\nclass EchoManager extends React.Component<EchoManagerProps> {\n    _animationConfigForType = (animationType) => {\n        // NOTE(charlie): These must be kept in sync with the transition\n        // durations and classnames specified in echo.css.\n        let animationDurationMs;\n        let animationTransitionName;\n\n        switch (animationType) {\n            case EchoAnimationType.SLIDE_AND_FADE:\n                animationDurationMs = 400;\n                animationTransitionName = \"echo-slide-and-fade\";\n                break;\n\n            case EchoAnimationType.FADE_ONLY:\n                animationDurationMs = 300;\n                animationTransitionName = \"echo-fade-only\";\n                break;\n\n            case EchoAnimationType.LONG_FADE_ONLY:\n                animationDurationMs = 400;\n                animationTransitionName = \"echo-long-fade-only\";\n                break;\n\n            default:\n                throw new Error(\n                    `Invalid echo animation type: ${animationType}`,\n                );\n        }\n\n        return {\n            animationDurationMs,\n            animationTransitionName,\n        };\n    };\n\n    render() {\n        const {echoes, onAnimationFinish} = this.props;\n\n        return (\n            <span>\n                {Object.keys(EchoAnimationType).map((animationType) => {\n                    // Collect the relevant parameters for the animation type, and\n                    // filter for the appropriate echoes.\n                    const {animationDurationMs, animationTransitionName} =\n                        this._animationConfigForType(animationType);\n                    const echoesForType = echoes.filter((echo) => {\n                        return echo.animationType === animationType;\n                    });\n\n                    // TODO(charlie): Manage this animation with Aphrodite styles.\n                    // Right now, there's a bug in the autoprefixer that breaks CSS\n                    // transitions on mobile Safari.\n                    // See: https://github.com/Khan/aphrodite/issues/68.\n                    // As such, we have to do this with a stylesheet.\n                    return (\n                        <TransitionGroup key={animationType}>\n                            {echoesForType.map((echo) => {\n                                const {animationId} = echo;\n                                return (\n                                    <CSSTransition\n                                        classNames={animationTransitionName}\n                                        enter={true}\n                                        exit={false}\n                                        timeout={{\n                                            enter: animationDurationMs,\n                                        }}\n                                        key={animationId}\n                                    >\n                                        <Echo\n                                            animationDurationMs={\n                                                animationDurationMs\n                                            }\n                                            onAnimationFinish={() =>\n                                                onAnimationFinish?.(animationId)\n                                            }\n                                            {...echo}\n                                        />\n                                    </CSSTransition>\n                                );\n                            })}\n                        </TransitionGroup>\n                    );\n                })}\n            </span>\n        );\n    }\n}\n\nexport default EchoManager;\n","/**\n * A popover that renders a set of keys floating above the page.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport {BorderStyles} from \"../enums\";\nimport {View} from \"../fake-react-native-web/index\";\nimport {KeyConfig} from \"../types\";\n\nimport TouchableKeypadButton from \"./touchable-keypad-button\";\nimport * as zIndexes from \"./z-indexes\";\n\ntype Prop = {\n    keys: ReadonlyArray<KeyConfig>;\n};\n\nclass MultiSymbolPopover extends React.Component<Prop> {\n    render() {\n        const {keys} = this.props;\n\n        // TODO(charlie): We have to require this lazily because of a cyclic\n        // dependence in our components.\n        return (\n            <View style={styles.container}>\n                {keys.map((key) => {\n                    return (\n                        <TouchableKeypadButton\n                            keyConfig={key}\n                            borders={BorderStyles.NONE}\n                        />\n                    );\n                })}\n            </View>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flexDirection: \"column-reverse\",\n        position: \"relative\",\n        width: \"100%\",\n        borderRadius: 2,\n        boxShadow: \"0 2px 6px rgba(0, 0, 0, 0.3)\",\n        zIndex: zIndexes.popover,\n    },\n\n    // eslint-disable-next-line react-native/no-unused-styles\n    popoverButton: {\n        backgroundColor: \"#FFF\",\n        borderWidth: 0,\n    },\n});\n\nexport default MultiSymbolPopover;\n","/**\n * A component that renders and animates the popovers that appear over the\n * multi-functional keys.\n */\n\nimport * as React from \"react\";\nimport {CSSTransition} from \"react-transition-group\";\n\nimport KeyConfigs from \"../data/key-configs\";\n\nimport MultiSymbolPopover from \"./multi-symbol-popover\";\n\nimport type {Popover, KeyConfig} from \"../types\";\n\n// NOTE(charlie): These must be kept in sync with the transition durations and\n// classnames specified in popover.less.\nconst animationTransitionName = \"popover\";\nconst animationDurationMs = 200;\n\ntype Props = {\n    // TODO(matthewc) should be something like Bound, but couldn't fix errors\n    bounds: any;\n    childKeys: ReadonlyArray<KeyConfig>;\n};\n\n// A container component used to position a popover absolutely at a specific\n// position.\nclass PopoverContainer extends React.Component<Props> {\n    render() {\n        const {bounds, childKeys} = this.props;\n\n        const containerStyle = {\n            position: \"absolute\",\n            ...bounds,\n        };\n\n        return (\n            <div style={containerStyle}>\n                <MultiSymbolPopover keys={childKeys} />\n            </div>\n        );\n    }\n}\n\ntype PopoverManagerProps = {\n    popover: Popover | null;\n};\n\nclass PopoverManager extends React.Component<PopoverManagerProps> {\n    render() {\n        const {popover} = this.props;\n\n        return popover ? (\n            <CSSTransition\n                in={true}\n                classNames={animationTransitionName}\n                enter={true}\n                exit={false}\n                timeout={{\n                    enter: animationDurationMs,\n                }}\n            >\n                <PopoverContainer\n                    key={popover.childKeyIds[0]}\n                    bounds={popover.bounds}\n                    childKeys={popover.childKeyIds.map((id) => KeyConfigs[id])}\n                />\n            </CSSTransition>\n        ) : null;\n    }\n}\n\nexport default PopoverManager;\n","/**\n * A keypad component that acts as a container for rows or columns of buttons,\n * and manages the rendering of echo animations on top of those buttons.\n */\n\nimport * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {connect} from \"react-redux\";\n\nimport {View} from \"../fake-react-native-web/index\";\nimport {removeEcho} from \"../store/actions\";\n\nimport EchoManager from \"./echo-manager\";\nimport PopoverManager from \"./popover-manager\";\n\nimport type {State} from \"../store/types\";\nimport type {Popover, Echo} from \"../types\";\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\ninterface ReduxProps {\n    active: boolean;\n    echoes: ReadonlyArray<Echo>;\n    popover: Popover | null;\n}\n\ninterface Props extends ReduxProps {\n    children: React.ReactNode;\n    style?: StyleType;\n    removeEcho?: (animationId: string) => void;\n}\n\n// eslint-disable-next-line react/no-unsafe\nclass Keypad extends React.Component<Props> {\n    _isMounted: boolean | undefined;\n    _resizeTimeout: number | null | undefined;\n    _container: DOMRect | null | undefined;\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        window.addEventListener(\"resize\", this._onResize);\n        this._updateSizeAndPosition();\n    }\n\n    UNSAFE_componentWillReceiveProps(newProps) {\n        if (!this._container && (newProps.popover || newProps.echoes.length)) {\n            this._computeContainer();\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n\n        window.removeEventListener(\"resize\", this._onResize);\n    }\n\n    _computeContainer = () => {\n        const domNode = ReactDOM.findDOMNode(this) as Element;\n        this._container = domNode.getBoundingClientRect();\n    };\n\n    _updateSizeAndPosition = () => {\n        // Mark the container for recalculation next time the keypad is\n        // opened.\n        // TODO(charlie): Since we're not recalculating the container\n        // immediately, if you were to resize the page while a popover were\n        // active, you'd likely get unexpected behavior. This seems very\n        // difficult to do and, as such, incredibly unlikely, but we may\n        // want to reconsider the caching here.\n        this._container = null;\n    };\n\n    _onResize = () => {\n        // Whenever the page resizes, we need to recompute the container's\n        // bounding box. This is the only time that the bounding box can change.\n\n        // Throttle resize events -- taken from:\n        //    https://developer.mozilla.org/en-US/docs/Web/Events/resize\n        if (this._resizeTimeout == null) {\n            this._resizeTimeout = window.setTimeout(() => {\n                this._resizeTimeout = null;\n\n                if (this._isMounted) {\n                    this._updateSizeAndPosition();\n                }\n            }, 66);\n        }\n    };\n\n    render() {\n        const {children, echoes, removeEcho, popover, style} = this.props;\n\n        // Translate the echo boxes, as they'll be positioned absolutely to\n        // this relative container.\n        const relativeEchoes = echoes.map((echo) => {\n            const {initialBounds, ...rest} = echo;\n            return {\n                ...rest,\n                initialBounds: {\n                    // @ts-expect-error TS2533\n                    top: initialBounds.top - this._container.top,\n                    // @ts-expect-error TS2533\n                    right: initialBounds.right - this._container.left,\n                    // @ts-expect-error TS2533\n                    bottom: initialBounds.bottom - this._container.top,\n                    // @ts-expect-error TS2533\n                    left: initialBounds.left - this._container.left,\n                    width: initialBounds.width,\n                    height: initialBounds.height,\n                },\n            };\n        });\n\n        // Translate the popover bounds from page-absolute to keypad-relative.\n        // Note that we only need three bounds, since popovers are anchored to\n        // the bottom left corners of the keys over which they appear.\n        const relativePopover = popover && {\n            ...popover,\n            bounds: {\n                bottom:\n                    // @ts-expect-error TS2533\n                    this._container.height -\n                    // @ts-expect-error TS2533\n                    (popover.bounds.bottom - this._container.top),\n                // @ts-expect-error TS2533\n                left: popover.bounds.left - this._container.left,\n                width: popover.bounds.width,\n            },\n        };\n\n        return (\n            <View style={style}>\n                {children}\n                <EchoManager\n                    echoes={relativeEchoes}\n                    onAnimationFinish={removeEcho}\n                />\n                <PopoverManager popover={relativePopover} />\n            </View>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): ReduxProps => {\n    return {\n        echoes: state.echoes.echoes,\n        active: state.keypad.active,\n        popover: state.gestures.popover,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        removeEcho: (animationId) => {\n            dispatch(removeEcho(animationId));\n        },\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n    forwardRef: true,\n})(Keypad);\n","import * as React from \"react\";\n\nimport type {TabbarItemType} from \"./types\";\n\ntype Props = {\n    tintColor: string;\n    type: TabbarItemType;\n};\n\nconst IconAsset = function ({tintColor, type}: Props): React.ReactElement {\n    if (type === \"Geometry\") {\n        return (\n            <svg\n                width=\"32\"\n                height=\"32\"\n                viewBox=\"0 0 32 32\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n            >\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M7.57584 7.09442C7.92723 6.92984 8.3421 6.98339 8.64018 7.23179L26.6402 22.2318C26.9636 22.5013 27.0836 22.9446 26.9403 23.3404C26.7969 23.7363 26.421 24 26 24H8C7.44772 24 7 23.5523 7 23V8.00001C7 7.61199 7.22446 7.259 7.57584 7.09442ZM9 10.1351V17H13C13.5523 17 14 17.4477 14 18V22H23.238L9 10.1351ZM12 22V19H9V22H12Z\"\n                    fill={tintColor}\n                />\n            </svg>\n        );\n    } else if (type === \"Operators\") {\n        return (\n            <svg\n                width=\"32\"\n                height=\"32\"\n                viewBox=\"0 0 32 32\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n            >\n                <path\n                    fillRule=\"evenodd\"\n                    clipRule=\"evenodd\"\n                    d=\"M29 6H30V7H29V6ZM27 6C27 4.89543 27.8954 4 29 4H30C31.1046 4 32 4.89543 32 6V7C32 8.10457 31.1046 9 30 9H29C27.8954 9 27 8.10457 27 7V6ZM11.1318 6.50386C11.3098 6.19229 11.6411 6 12 6H14C14.5523 6 15 6.44772 15 7C15 7.55228 14.5523 8 14 8H12.5803L8.86824 14.4961C8.68527 14.8163 8.34091 15.0098 7.97225 14.9996C7.6036 14.9894 7.2705 14.7771 7.10557 14.4472L5.10557 10.4472C4.85858 9.95324 5.05881 9.35256 5.55279 9.10557C6.04676 8.85858 6.64744 9.05881 6.89443 9.55279L8.0588 11.8815L11.1318 6.50386ZM7.70676 16.2925C8.09748 16.6829 8.09779 17.316 7.70745 17.7068C7.28543 18.1292 6.84383 18.7303 6.51157 19.3658C6.17039 20.0184 6 20.601 6 21C6 21.3789 6.17235 21.9897 6.51638 22.6649C6.85315 23.3259 7.28488 23.9121 7.66786 24.2557C8.07892 24.6246 8.11314 25.2568 7.74429 25.6679C7.37544 26.0789 6.7432 26.1131 6.33214 25.7443C5.7161 25.1915 5.14783 24.3844 4.73434 23.5728C4.32813 22.7755 3.99999 21.8345 4 21C4.00001 20.1391 4.3301 19.2217 4.73917 18.4392C5.15715 17.6397 5.71554 16.8708 6.29255 16.2932C6.68288 15.9025 7.31605 15.9022 7.70676 16.2925ZM11.2932 16.2925C11.684 15.9022 12.3171 15.9025 12.7075 16.2932C13.2845 16.8708 13.8428 17.6397 14.2608 18.4392C14.6699 19.2217 15 20.1391 15 21C15 21.8345 14.6719 22.7755 14.2657 23.5728C13.8522 24.3844 13.2839 25.1915 12.6679 25.7443C12.2568 26.1131 11.6246 26.0789 11.2557 25.6679C10.8869 25.2568 10.9211 24.6246 11.3321 24.2557C11.7151 23.9121 12.1469 23.3259 12.4836 22.6649C12.8276 21.9897 13 21.3789 13 21C13 20.601 12.8296 20.0184 12.4884 19.3658C12.1562 18.7303 11.7146 18.1292 11.2925 17.7068C10.9022 17.316 10.9025 16.6829 11.2932 16.2925ZM27.9363 17.6489C28.1302 18.166 27.8682 18.7424 27.3511 18.9363L21.848 21L27.3511 23.0637C27.8682 23.2576 28.1302 23.834 27.9363 24.3511C27.7424 24.8682 27.166 25.1302 26.6489 24.9363L18.6489 21.9363C18.2586 21.79 18 21.4168 18 21C18 20.5832 18.2586 20.21 18.6489 20.0637L26.6489 17.0637C27.166 16.8698 27.7424 17.1318 27.9363 17.6489ZM21 8V13H24V8H21ZM20 6C19.4477 6 19 6.44772 19 7V14C19 14.5523 19.4477 15 20 15H25C25.5523 15 26 14.5523 26 14V7C26 6.44772 25.5523 6 25 6H20Z\"\n                    fill={tintColor}\n                />\n            </svg>\n        );\n    } else if (type === \"Numbers\") {\n        return (\n            <svg\n                width=\"32\"\n                height=\"32\"\n                viewBox=\"0 0 32 32\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n            >\n                <path\n                    d=\"M10.4123 19.5794V21.0004H4.71434V19.5794H6.73034V14.0214C6.73034 13.9001 6.73267 13.7764 6.73734 13.6504C6.742 13.5244 6.749 13.3961 6.75834 13.2654L5.42834 14.3714C5.335 14.4414 5.244 14.4858 5.15534 14.5044C5.06667 14.5231 4.98267 14.5254 4.90334 14.5114C4.824 14.4928 4.754 14.4648 4.69334 14.4274C4.63267 14.3854 4.586 14.3434 4.55334 14.3014L3.94434 13.4824L7.06634 10.8364H8.65534V19.5794H10.4123ZM18.7924 19.2294C19.0024 19.2294 19.1658 19.2878 19.2824 19.4044C19.4038 19.5211 19.4644 19.6751 19.4644 19.8664V21.0004H12.4224V20.3704C12.4224 20.2491 12.4481 20.1184 12.4994 19.9784C12.5508 19.8338 12.6371 19.7031 12.7584 19.5864L15.7684 16.5694C16.0251 16.3128 16.2514 16.0678 16.4474 15.8344C16.6434 15.5964 16.8068 15.3654 16.9374 15.1414C17.0681 14.9128 17.1661 14.6818 17.2314 14.4484C17.2968 14.2151 17.3294 13.9701 17.3294 13.7134C17.3294 13.2608 17.2128 12.9178 16.9794 12.6844C16.7461 12.4464 16.4171 12.3274 15.9924 12.3274C15.8058 12.3274 15.6331 12.3554 15.4744 12.4114C15.3204 12.4628 15.1804 12.5351 15.0544 12.6284C14.9331 12.7218 14.8281 12.8314 14.7394 12.9574C14.6508 13.0834 14.5854 13.2211 14.5434 13.3704C14.4594 13.6038 14.3451 13.7601 14.2004 13.8394C14.0604 13.9141 13.8598 13.9304 13.5984 13.8884L12.5764 13.7064C12.6511 13.2118 12.7911 12.7778 12.9964 12.4044C13.2018 12.0311 13.4584 11.7208 13.7664 11.4734C14.0744 11.2261 14.4268 11.0418 14.8234 10.9204C15.2201 10.7944 15.6471 10.7314 16.1044 10.7314C16.5851 10.7314 17.0214 10.8038 17.4134 10.9484C17.8101 11.0884 18.1484 11.2868 18.4284 11.5434C18.7084 11.7954 18.9254 12.1011 19.0794 12.4604C19.2334 12.8198 19.3104 13.2164 19.3104 13.6504C19.3104 14.0238 19.2568 14.3691 19.1494 14.6864C19.0421 15.0038 18.8951 15.3071 18.7084 15.5964C18.5264 15.8811 18.3141 16.1588 18.0714 16.4294C17.8288 16.7001 17.5721 16.9731 17.3014 17.2484L15.1454 19.4534C15.3834 19.3834 15.6191 19.3298 15.8524 19.2924C16.0858 19.2504 16.3051 19.2294 16.5104 19.2294H18.7924ZM21.4535 13.7064C21.5282 13.2118 21.6682 12.7778 21.8735 12.4044C22.0789 12.0311 22.3355 11.7208 22.6435 11.4734C22.9515 11.2261 23.3015 11.0418 23.6935 10.9204C24.0902 10.7944 24.5172 10.7314 24.9745 10.7314C25.4599 10.7314 25.8939 10.8014 26.2765 10.9414C26.6639 11.0768 26.9905 11.2634 27.2565 11.5014C27.5225 11.7394 27.7255 12.0171 27.8655 12.3344C28.0102 12.6518 28.0825 12.9924 28.0825 13.3564C28.0825 13.6784 28.0475 13.9631 27.9775 14.2104C27.9122 14.4531 27.8119 14.6654 27.6765 14.8474C27.5459 15.0294 27.3825 15.1834 27.1865 15.3094C26.9952 15.4354 26.7735 15.5404 26.5215 15.6244C27.6882 16.0071 28.2715 16.7841 28.2715 17.9554C28.2715 18.4734 28.1759 18.9308 27.9845 19.3274C27.7932 19.7194 27.5365 20.0484 27.2145 20.3144C26.8925 20.5804 26.5169 20.7811 26.0875 20.9164C25.6629 21.0471 25.2172 21.1124 24.7505 21.1124C24.2559 21.1124 23.8195 21.0564 23.4415 20.9444C23.0635 20.8324 22.7299 20.6644 22.4405 20.4404C22.1559 20.2164 21.9109 19.9364 21.7055 19.6004C21.5002 19.2598 21.3205 18.8631 21.1665 18.4104L22.0205 18.0604C22.2445 17.9671 22.4522 17.9414 22.6435 17.9834C22.8395 18.0254 22.9795 18.1281 23.0635 18.2914C23.1569 18.4688 23.2549 18.6321 23.3575 18.7814C23.4649 18.9308 23.5839 19.0614 23.7145 19.1734C23.8452 19.2808 23.9922 19.3648 24.1555 19.4254C24.3235 19.4861 24.5149 19.5164 24.7295 19.5164C25.0002 19.5164 25.2359 19.4721 25.4365 19.3834C25.6372 19.2948 25.8052 19.1804 25.9405 19.0404C26.0759 18.8958 26.1762 18.7348 26.2415 18.5574C26.3115 18.3754 26.3465 18.1958 26.3465 18.0184C26.3465 17.7851 26.3255 17.5751 26.2835 17.3884C26.2415 17.1971 26.1435 17.0361 25.9895 16.9054C25.8402 16.7701 25.6162 16.6674 25.3175 16.5974C25.0235 16.5228 24.6222 16.4854 24.1135 16.4854V15.1274C24.5382 15.1274 24.8859 15.0924 25.1565 15.0224C25.4272 14.9524 25.6395 14.8544 25.7935 14.7284C25.9475 14.6024 26.0525 14.4508 26.1085 14.2734C26.1692 14.0961 26.1995 13.9024 26.1995 13.6924C26.1995 13.2491 26.0829 12.9108 25.8495 12.6774C25.6209 12.4441 25.2942 12.3274 24.8695 12.3274C24.6829 12.3274 24.5102 12.3554 24.3515 12.4114C24.1975 12.4628 24.0575 12.5351 23.9315 12.6284C23.8102 12.7218 23.7052 12.8314 23.6165 12.9574C23.5279 13.0834 23.4625 13.2211 23.4205 13.3704C23.3319 13.6038 23.2175 13.7601 23.0775 13.8394C22.9375 13.9141 22.7345 13.9304 22.4685 13.8884L21.4535 13.7064Z\"\n                    fill={tintColor}\n                />\n            </svg>\n        );\n    }\n\n    // type as never;\n    throw new Error(\"Invalid icon type\");\n};\n\nexport default IconAsset;\n","import Clickable from \"@khanacademy/wonder-blocks-clickable\";\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport {View} from \"@khanacademy/wonder-blocks-core\";\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport IconAsset from \"./icons\";\n\nimport type {TabbarItemType} from \"./types\";\n\nconst styles = StyleSheet.create({\n    base: {\n        display: \"flex\",\n        width: 44,\n        height: 38,\n        boxSizing: \"border-box\",\n        borderRadius: 3,\n        border: `1px solid transparent`,\n        marginRight: 1,\n        marginLeft: 1,\n    },\n    hovered: {\n        background: `linear-gradient(0deg, rgba(24, 101, 242, 0.32), rgba(24, 101, 242, 0.32)), ${Color.white}`,\n        border: \"1px solid #1865F2\",\n    },\n    pressed: {\n        background: \"#1B50B3\",\n    },\n    focused: {\n        outline: \"none\",\n        border: `2px solid ${Color.blue}`,\n    },\n    innerBox: {\n        boxSizing: \"border-box\",\n        border: `1px solid transparent`,\n        borderRadius: 2,\n        display: \"flex\",\n        flex: 1,\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    innerBoxPressed: {\n        border: `1px solid ${Color.white}`,\n    },\n    activeIndicator: {\n        position: \"absolute\",\n        boxSizing: \"border-box\",\n        bottom: 3,\n        width: 36,\n        height: 3,\n        marginLeft: 3,\n    },\n});\n\nfunction imageTintColor(\n    itemState: ItemState,\n    hovered: boolean,\n    focused: boolean,\n    pressed: boolean,\n): string {\n    if (itemState === \"disabled\") {\n        return Color.offBlack64;\n    } else if (pressed) {\n        return Color.white;\n    } else if (itemState === \"active\") {\n        return Color.blue;\n    } else if (hovered) {\n        return Color.blue;\n    }\n    return Color.offBlack64;\n}\nexport type ItemState = \"active\" | \"inactive\" | \"disabled\";\ntype Props = {\n    onClick: () => void;\n    itemState: ItemState;\n    itemType: TabbarItemType;\n};\n\nclass TabbarItem extends React.Component<Props> {\n    render(): React.ReactNode {\n        const {onClick, itemType, itemState} = this.props;\n        return (\n            <Clickable onClick={onClick} disabled={itemState === \"disabled\"}>\n                {({hovered, focused, pressed}) => {\n                    const tintColor = imageTintColor(\n                        itemState,\n                        hovered,\n                        focused,\n                        pressed,\n                    );\n\n                    return (\n                        <View\n                            style={[\n                                styles.base,\n                                itemState !== \"disabled\" &&\n                                    hovered &&\n                                    styles.hovered,\n                                focused && styles.focused,\n                                pressed && styles.pressed,\n                            ]}\n                        >\n                            <View\n                                style={[\n                                    styles.innerBox,\n                                    pressed && styles.innerBoxPressed,\n                                ]}\n                            >\n                                <IconAsset\n                                    type={itemType}\n                                    tintColor={tintColor}\n                                />\n                            </View>\n                            {itemState === \"active\" && (\n                                <View\n                                    style={[\n                                        styles.activeIndicator,\n                                        {\n                                            backgroundColor: tintColor,\n                                        },\n                                    ]}\n                                />\n                            )}\n                        </View>\n                    );\n                }}\n            </Clickable>\n        );\n    }\n}\n\nexport const TabbarItemForTesting = TabbarItem;\n\nexport default TabbarItem;\n","import Color from \"@khanacademy/wonder-blocks-color\";\nimport {View} from \"@khanacademy/wonder-blocks-core\";\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport TabbarItem from \"./item\";\n\nimport type {TabbarItemType} from \"./types\";\n\nconst styles = StyleSheet.create({\n    tabbar: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        background: Color.offWhite,\n        paddingTop: 2,\n        paddingBottom: 2,\n        borderTop: `1px solid ${Color.offBlack50}`,\n        borderBottom: `1px solid ${Color.offBlack50}`,\n    },\n});\n\ntype TabbarState = {\n    selectedItem: number;\n};\n\ntype Props = {\n    items: ReadonlyArray<TabbarItemType>;\n    onSelect: (item: TabbarItemType) => void;\n};\n\nclass Tabbar extends React.Component<Props, TabbarState> {\n    state: TabbarState = {\n        selectedItem: 0,\n    };\n    render(): React.ReactNode {\n        const {items, onSelect} = this.props;\n        return (\n            <View style={styles.tabbar}>\n                {items.map((item, index) => (\n                    <TabbarItem\n                        key={`tabbar-item-${index}`}\n                        itemState={\n                            index === this.state.selectedItem\n                                ? \"active\"\n                                : \"inactive\"\n                        }\n                        itemType={item}\n                        onClick={() => {\n                            this.setState({selectedItem: index});\n                            onSelect(item);\n                        }}\n                    />\n                ))}\n            </View>\n        );\n    }\n}\n\nexport default Tabbar;\n","/**\n * A keypad with two pages of keys.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport {View} from \"../fake-react-native-web/index\";\n\nimport {\n    innerBorderColor,\n    innerBorderStyle,\n    innerBorderWidthPx,\n    offBlack16,\n} from \"./common-style\";\nimport Keypad from \"./keypad\";\nimport Styles from \"./styles\";\nimport Tabbar from \"./tabbar/tabbar\";\n\nimport type {State} from \"../store/types\";\n\nconst {column, row, fullWidth} = Styles;\n\ninterface ReduxProps {\n    paginationEnabled: boolean;\n}\n\ninterface Props extends ReduxProps {\n    currentPage: number;\n    leftPage: React.ReactNode;\n    rightPage: React.ReactNode;\n}\n\nclass TwoPageKeypad extends React.Component<Props> {\n    state = {\n        selectedPage: \"Numbers\",\n    };\n\n    render() {\n        const {leftPage, paginationEnabled, rightPage} = this.props;\n\n        const {selectedPage} = this.state;\n\n        if (paginationEnabled) {\n            return (\n                <Keypad style={[column, styles.keypad]}>\n                    <Tabbar\n                        items={[\"Numbers\", \"Operators\"]}\n                        onSelect={(selectedItem) => {\n                            this.setState({selectedPage: selectedItem});\n                        }}\n                    />\n                    <View style={styles.borderTop}>\n                        {selectedPage === \"Numbers\" && rightPage}\n                        {selectedPage === \"Operators\" && leftPage}\n                    </View>\n                </Keypad>\n            );\n        } else {\n            return (\n                <Keypad style={styles.keypad}>\n                    <View style={row}>\n                        <View style={fullWidth}>{leftPage}</View>\n                        <View style={[styles.borderLeft, fullWidth]}>\n                            {rightPage}\n                        </View>\n                    </View>\n                </Keypad>\n            );\n        }\n    }\n}\n\nconst styles = StyleSheet.create({\n    keypad: {\n        // Set the background to light grey, so that when the user drags the\n        // keypad pages past the edges, there's a grey backdrop.\n        backgroundColor: offBlack16,\n    },\n\n    borderTop: {\n        borderTop:\n            `${innerBorderWidthPx}px ${innerBorderStyle} ` +\n            `${innerBorderColor}`,\n    },\n    borderLeft: {\n        borderLeft:\n            `${innerBorderWidthPx}px ${innerBorderStyle} ` +\n            `${innerBorderColor}`,\n        boxSizing: \"content-box\",\n    },\n});\n\nconst mapStateToProps = (state: State): ReduxProps => {\n    return {\n        paginationEnabled: state.layout.paginationEnabled,\n    };\n};\n\nexport default connect(mapStateToProps, null, null, {forwardRef: true})(\n    TwoPageKeypad,\n);\n","/**\n * A keypad that includes all of the expression symbols.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport KeyConfigs from \"../data/key-configs\";\nimport {BorderStyles} from \"../enums\";\nimport {View} from \"../fake-react-native-web/index\";\n\nimport {valueGrey, controlGrey} from \"./common-style\";\nimport {CursorContext} from \"./input/cursor-contexts\";\nimport ManyKeypadButton from \"./many-keypad-button\";\nimport Styles from \"./styles\";\nimport TouchableKeypadButton from \"./touchable-keypad-button\";\nimport TwoPageKeypad from \"./two-page-keypad\";\n\nimport type {State} from \"../store/types\";\nimport type {KeypadLayout} from \"../types\";\n\nconst {row, column, oneColumn, fullWidth, roundedTopLeft, roundedTopRight} =\n    Styles;\n\ninterface ReduxProps {\n    currentPage: number;\n    cursorContext?: CursorContext;\n    dynamicJumpOut: boolean;\n}\n\ninterface Props extends ReduxProps {\n    extraKeys?: ReadonlyArray<string>;\n    roundTopLeft: boolean;\n    roundTopRight: boolean;\n}\n\nexport const expressionKeypadLayout: KeypadLayout = {\n    rows: 4,\n    columns: 5,\n    numPages: 2,\n    // Since we include a two-key popover in the top-right, when the popover\n    // is visible, the keypad will expand to fill the equivalent of five\n    // rows vertically.\n    maxVisibleRows: 4,\n};\n\nclass ExpressionKeypad extends React.Component<Props> {\n    render() {\n        const {\n            currentPage,\n            cursorContext,\n            dynamicJumpOut,\n            extraKeys,\n            roundTopLeft,\n            roundTopRight,\n        } = this.props;\n\n        let dismissOrJumpOutKey;\n        if (dynamicJumpOut) {\n            switch (cursorContext) {\n                case CursorContext.IN_PARENS:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_PARENTHESES;\n                    break;\n\n                case CursorContext.IN_SUPER_SCRIPT:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_EXPONENT;\n                    break;\n\n                case CursorContext.IN_SUB_SCRIPT:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_BASE;\n                    break;\n\n                case CursorContext.BEFORE_FRACTION:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_INTO_NUMERATOR;\n                    break;\n\n                case CursorContext.IN_NUMERATOR:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_NUMERATOR;\n                    break;\n\n                case CursorContext.IN_DENOMINATOR:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_DENOMINATOR;\n                    break;\n\n                case CursorContext.NONE:\n                default:\n                    dismissOrJumpOutKey = KeyConfigs.DISMISS;\n                    break;\n            }\n        } else {\n            dismissOrJumpOutKey = KeyConfigs.DISMISS;\n        }\n\n        const rightPageStyle = [\n            row,\n            fullWidth,\n            styles.rightPage,\n            roundTopRight && roundedTopRight,\n        ];\n        const rightPage = (\n            <View style={rightPageStyle}>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_7}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_4}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_1}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <ManyKeypadButton keys={extraKeys} />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_8}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_5}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_2}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_0}\n                        borders={BorderStyles.LEFT}\n                    />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_9}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_6}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_3}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.DECIMAL}\n                        borders={BorderStyles.LEFT}\n                    />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.DIVIDE}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.TIMES}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.MINUS}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.PLUS}\n                        borders={BorderStyles.LEFT}\n                    />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.FRAC}\n                        style={roundTopRight && roundedTopRight}\n                    />\n                    <TouchableKeypadButton keyConfig={KeyConfigs.CDOT} />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.BACKSPACE}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={dismissOrJumpOutKey}\n                        borders={BorderStyles.LEFT}\n                    />\n                </View>\n            </View>\n        );\n\n        const leftPageStyle = [\n            row,\n            fullWidth,\n            styles.leftPage,\n            roundTopLeft && roundedTopLeft,\n        ];\n        const leftPage = (\n            <View style={leftPageStyle}>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.EXP_2}\n                        borders={BorderStyles.NONE}\n                        style={roundTopLeft && roundedTopLeft}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.SQRT}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.LOG}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.SIN}\n                        borders={BorderStyles.NONE}\n                    />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.EXP_3}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.CUBE_ROOT}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.LN}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.COS}\n                        borders={BorderStyles.NONE}\n                    />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.EXP}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.RADICAL}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.LOG_N}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.TAN}\n                        borders={BorderStyles.NONE}\n                    />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.GEQ}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.EQUAL}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton keyConfig={KeyConfigs.LEQ} />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.LEFT_PAREN}\n                        borders={BorderStyles.LEFT}\n                    />\n                </View>\n                <View style={[column, oneColumn]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.GT}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NEQ}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.LT}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.RIGHT_PAREN}\n                        borders={BorderStyles.NONE}\n                    />\n                </View>\n            </View>\n        );\n\n        return (\n            <TwoPageKeypad\n                currentPage={currentPage}\n                rightPage={rightPage}\n                leftPage={leftPage}\n            />\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    // NOTE(charlie): These backgrounds are applied to as to fill in some\n    // unfortunate 'cracks' in the layout. However, not all keys in the first\n    // page use this background color (namely, the 'command' keys, backspace and\n    // dismiss).\n    // TODO(charlie): Apply the proper background between the 'command' keys.\n    rightPage: {\n        backgroundColor: valueGrey,\n    },\n\n    leftPage: {\n        backgroundColor: controlGrey,\n    },\n});\n\nconst mapStateToProps = (state: State): ReduxProps => {\n    return {\n        currentPage: state.pager.currentPage,\n        cursorContext: state.input.cursor?.context,\n        dynamicJumpOut: !state.layout.navigationPadEnabled,\n    };\n};\n\nexport default connect(mapStateToProps, null, null, {forwardRef: true})(\n    ExpressionKeypad,\n);\n","/**\n * A keypad that includes the digits, as well as the symbols required to deal\n * with fractions, decimals, and percents.\n */\n\nimport * as React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport KeyConfigs from \"../data/key-configs\";\nimport {BorderStyles} from \"../enums\";\nimport {View} from \"../fake-react-native-web/index\";\n\nimport {CursorContext} from \"./input/cursor-contexts\";\nimport Keypad from \"./keypad\";\nimport Styles from \"./styles\";\nimport TouchableKeypadButton from \"./touchable-keypad-button\";\n\nimport type {State} from \"../store/types\";\nimport type {KeypadLayout} from \"../types\";\n\nconst {row, roundedTopLeft, roundedTopRight} = Styles;\n\ninterface ReduxProps {\n    cursorContext?: CursorContext;\n    dynamicJumpOut: boolean;\n}\n\ninterface Props extends ReduxProps {\n    roundTopLeft: boolean;\n    roundTopRight: boolean;\n}\n\nexport const fractionKeypadLayout: KeypadLayout = {\n    rows: 4,\n    columns: 4,\n    numPages: 1,\n    // Since we include a two-key popover in the top-right, when the popover\n    // is visible, the keypad will expand to fill the equivalent of five\n    // rows vertically.\n    maxVisibleRows: 5,\n};\n\nclass FractionKeypad extends React.Component<Props> {\n    render() {\n        const {cursorContext, dynamicJumpOut, roundTopLeft, roundTopRight} =\n            this.props;\n\n        let dismissOrJumpOutKey;\n        if (dynamicJumpOut) {\n            switch (cursorContext) {\n                case CursorContext.IN_PARENS:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_PARENTHESES;\n                    break;\n\n                case CursorContext.IN_SUPER_SCRIPT:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_EXPONENT;\n                    break;\n\n                case CursorContext.IN_SUB_SCRIPT:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_BASE;\n                    break;\n\n                case CursorContext.BEFORE_FRACTION:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_INTO_NUMERATOR;\n                    break;\n\n                case CursorContext.IN_NUMERATOR:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_NUMERATOR;\n                    break;\n\n                case CursorContext.IN_DENOMINATOR:\n                    dismissOrJumpOutKey = KeyConfigs.JUMP_OUT_DENOMINATOR;\n                    break;\n\n                case CursorContext.NONE:\n                default:\n                    dismissOrJumpOutKey = KeyConfigs.DISMISS;\n                    break;\n            }\n        } else {\n            dismissOrJumpOutKey = KeyConfigs.DISMISS;\n        }\n\n        return (\n            <Keypad>\n                <View style={row}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_7}\n                        borders={BorderStyles.NONE}\n                        style={roundTopLeft && roundedTopLeft}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_8}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_9}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.FRAC}\n                        disabled={\n                            // NOTE(charlie): It's only sufficient to use\n                            // `IN_NUMERATOR` and `IN_DENOMINATOR` here because we\n                            // don't support parentheses in this keypad. If we did,\n                            // then when the cursor was inside a parenthetical\n                            // expression in a numerator or denominator, this check\n                            // would fail.\n                            cursorContext === CursorContext.IN_NUMERATOR ||\n                            cursorContext === CursorContext.IN_DENOMINATOR\n                        }\n                        style={roundTopRight && roundedTopRight}\n                    />\n                </View>\n                <View style={row}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_4}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_5}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_6}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton keyConfig={KeyConfigs.PERCENT} />\n                </View>\n                <View style={row}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_1}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_2}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_3}\n                        borders={BorderStyles.BOTTOM}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.BACKSPACE}\n                        borders={BorderStyles.LEFT}\n                    />\n                </View>\n                <View style={row}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NEGATIVE}\n                        borders={BorderStyles.NONE}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.NUM_0}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.DECIMAL}\n                        borders={BorderStyles.LEFT}\n                    />\n                    <TouchableKeypadButton\n                        keyConfig={dismissOrJumpOutKey}\n                        borders={BorderStyles.LEFT}\n                    />\n                </View>\n            </Keypad>\n        );\n    }\n}\n\nconst mapStateToProps = (state: State): ReduxProps => {\n    return {\n        cursorContext: state.input.cursor?.context,\n        dynamicJumpOut: !state.layout.navigationPadEnabled,\n    };\n};\n\nexport default connect(mapStateToProps, null, null, {forwardRef: true})(\n    FractionKeypad,\n);\n","import {expressionKeypadLayout} from \"../components/expression-keypad\";\nimport {fractionKeypadLayout} from \"../components/fraction-keypad\";\nimport {KeypadType} from \"../enums\";\n\nconst defaultKeypadType = KeypadType.EXPRESSION;\n\nconst keypadForType = {\n    [KeypadType.FRACTION]: fractionKeypadLayout,\n    [KeypadType.EXPRESSION]: expressionKeypadLayout,\n} as const;\n\nexport {keypadForType, defaultKeypadType};\n","import KeyConfigs from \"../data/key-configs\";\nimport Keys from \"../data/keys\";\n\nimport {defaultKeypadType} from \"./shared\";\n\nimport type {Action} from \"./actions\";\nimport type {KeypadState} from \"./types\";\n\nconst initialKeypadState = {\n    extraKeys: [\"x\", \"y\", Keys.THETA, Keys.PI],\n    keypadType: defaultKeypadType,\n    active: false,\n} as const;\n\nconst keypadReducer = function (\n    state: KeypadState = initialKeypadState,\n    action: Action,\n): KeypadState {\n    switch (action.type) {\n        case \"DismissKeypad\":\n            return {\n                ...state,\n                active: false,\n            };\n\n        case \"ActivateKeypad\":\n            return {\n                ...state,\n                active: true,\n            };\n\n        case \"ConfigureKeypad\":\n            return {\n                ...state,\n                // Default `extraKeys` to the empty array.\n                extraKeys: [],\n                ...action.configuration,\n            };\n\n        case \"PressKey\":\n            const keyConfig = KeyConfigs[action.key];\n            // NOTE(charlie): Our keypad system operates by triggering key\n            // presses with key IDs in a dumb manner, such that the keys\n            // don't know what they can do--instead, the store is\n            // responsible for interpreting key presses and triggering the\n            // right actions when they occur. Hence, we figure off a\n            // dismissal here rather than dispatching a dismiss action in\n            // the first place.\n            if (keyConfig.id === Keys.DISMISS) {\n                return keypadReducer(state, {type: \"DismissKeypad\"});\n            }\n            return state;\n\n        default:\n            return state;\n    }\n};\n\nexport default keypadReducer;\n","/**\n * An algorithm for computing the appropriate layout parameters for the keypad,\n * including the size of the buttons and whether or not to render fullscreen,\n * taking into account a number of factors including the size of the screen, the\n * orientation of the screen, the presence of browser chrome, the presence of\n * other exercise-related chrome, the size of the input box, the parameters that\n * define the keypad (i.e., the number of rows, columns, and pages), and so\n * forth.\n *\n * The computations herein make some strong assumptions about the sizes of\n * various other elements and the situations under which they will be visible\n * (e.g., browser chrome). However, this is just a heuristic--it's not crucial\n * that our buttons are sized in a pixel-perfect manner, but rather, that we\n * make a balanced use of space.\n *\n * Note that one goal of the algorithm is to avoid resizing the keypad in the\n * face of dynamic browser chrome. In order to avoid that awkwardness, we tend\n * to be conservative in our measurements and make things smaller than they\n * might need to be.\n */\n\nimport {DeviceType, DeviceOrientation, LayoutMode} from \"../enums\";\n\nimport {\n    pageIndicatorHeightPx,\n    toolbarHeightPx,\n    navigationPadWidthPx,\n    innerBorderWidthPx,\n} from \"./common-style\";\n\nconst minButtonHeight = 48;\nconst maxButtonSize = 64;\nconst minSpaceAboveKeypad = 32;\n\n// These values are taken from an iPhone 5, but should be consistent with the\n// iPhone 4 as well. Regardless, these are meant to be representative of the\n// possible types of browser chrome that could appear in various context, rather\n// than pixel-perfect for every device.\nconst safariNavBarWhenShrunk = 44;\nconst safariNavBarWhenExpanded = 64;\nconst safariToolbar = 44;\n\n// In mobile Safari, the browser chrome is completely hidden in landscape,\n// though a shrunken navbar and full-sized toolbar on scroll. In portrait, the\n// shrunken navbar is always visible, but expands on scroll (and the toolbar\n// appears as well).\nconst maxLandscapeBrowserChrome = safariNavBarWhenShrunk + safariToolbar;\nconst maxPortraitBrowserChrome =\n    safariToolbar + (safariNavBarWhenExpanded - safariNavBarWhenShrunk);\n\n// This represents the 'worst case' aspect ratio that we care about (for\n// portrait layouts). It's taken from the iPhone 4. The height is computed by\n// taking the height of the device and removing the persistent, shrunken navbar.\n// (We don't need to account for the expanded navbar, since we include the\n// difference when reserving space above the keypad.)\nconst worstCaseAspectRatio = 320 / (480 - safariNavBarWhenShrunk);\n\nexport const computeLayoutParameters = (\n    {numColumns, numMaxVisibleRows, numPages},\n    {pageWidthPx, pageHeightPx},\n    {deviceOrientation, deviceType},\n    {navigationPadEnabled, paginationEnabled, toolbarEnabled},\n) => {\n    // First, compute some values that will be used in multiple computations.\n    const effectiveNumColumns = paginationEnabled\n        ? numColumns\n        : numColumns * numPages;\n\n    // Then, compute the button dimensions based on the provided parameters.\n    let buttonDimensions;\n    if (deviceType === DeviceType.PHONE) {\n        const isLandscape = deviceOrientation === DeviceOrientation.LANDSCAPE;\n\n        // In many cases, the browser chrome will already have been factored\n        // into `pageHeightPx`. But we have no way of knowing if that's\n        // the case or not. As such, we take a conservative approach and\n        // assume that the chrome is _never_ included in `pageHeightPx`.\n        const browserChromeHeight = isLandscape\n            ? maxLandscapeBrowserChrome\n            : maxPortraitBrowserChrome;\n\n        // Count up all the space that we need to reserve on the page.\n        // Namely, we need to account for:\n        //  1. Space between the keypad and the top of the page.\n        //  2. The presence of the exercise toolbar.\n        //  3. The presence of the view pager indicator.\n        //  4. Any browser chrome that may appear later.\n        const reservedSpace =\n            minSpaceAboveKeypad +\n            browserChromeHeight +\n            (toolbarEnabled ? toolbarHeightPx : 0) +\n            (paginationEnabled ? pageIndicatorHeightPx : 0);\n\n        // Next, compute the effective width and height. We can use the page\n        // width as the effective width. For the height, though, we take\n        // another conservative measure when in portrait by assuming that\n        // the device has the worst possible aspect ratio. In other words,\n        // we ignore the device height in portrait and assume the worst.\n        // This prevents the keypad from changing size when browser chrome\n        // appears and disappears.\n        const effectiveWidth = pageWidthPx;\n        const effectiveHeight = isLandscape\n            ? pageHeightPx\n            : pageWidthPx / worstCaseAspectRatio;\n        const maxKeypadHeight = effectiveHeight - reservedSpace;\n\n        // Finally, compute the button height and width. In computing the\n        // height, accommodate for the maximum number of rows that will ever be\n        // visible (since the toggling of popovers can increase the number of\n        // visible rows).\n        const buttonHeightPx = Math.max(\n            Math.min(maxKeypadHeight / numMaxVisibleRows, maxButtonSize),\n            minButtonHeight,\n        );\n\n        let buttonWidthPx;\n        if (numPages > 1) {\n            const effectiveNumColumns = paginationEnabled\n                ? numColumns\n                : numColumns * numPages;\n            buttonWidthPx = effectiveWidth / effectiveNumColumns;\n        } else {\n            buttonWidthPx = isLandscape\n                ? maxButtonSize\n                : effectiveWidth / numColumns;\n        }\n\n        buttonDimensions = {\n            widthPx: buttonWidthPx,\n            heightPx: buttonHeightPx,\n        };\n    } else if (deviceType === DeviceType.TABLET) {\n        buttonDimensions = {\n            widthPx: maxButtonSize,\n            heightPx: maxButtonSize,\n        };\n    } else {\n        throw new Error(\"Invalid device type: \" + deviceType);\n    }\n\n    // Finally, determine whether the keypad should be rendered in the\n    // fullscreen layout by determining its resultant width.\n    const numSeparators =\n        (navigationPadEnabled ? 1 : 0) +\n        (!paginationEnabled ? numPages - 1 : 0);\n    const keypadWidth =\n        effectiveNumColumns * buttonDimensions.widthPx +\n        (navigationPadEnabled ? navigationPadWidthPx : 0) +\n        numSeparators * innerBorderWidthPx;\n    return {\n        buttonDimensions,\n        layoutMode:\n            keypadWidth >= pageWidthPx\n                ? LayoutMode.FULLSCREEN\n                : LayoutMode.COMPACT,\n    };\n};\n","import {tabletCutoffPx} from \"../components/common-style\";\nimport {computeLayoutParameters} from \"../components/compute-layout-parameters\";\nimport {DeviceOrientation, DeviceType, LayoutMode} from \"../enums\";\n\nimport {defaultKeypadType, keypadForType} from \"./shared\";\n\nimport type {Action} from \"./actions\";\nimport type {LayoutState} from \"./types\";\n\nconst initialLayoutState = {\n    gridDimensions: {\n        numRows: keypadForType[defaultKeypadType].rows,\n        numColumns: keypadForType[defaultKeypadType].columns,\n        numMaxVisibleRows: keypadForType[defaultKeypadType].maxVisibleRows,\n        numPages: keypadForType[defaultKeypadType].numPages,\n    },\n    buttonDimensions: {\n        widthPx: 48,\n        heightPx: 48,\n    },\n    pageDimensions: {\n        pageWidthPx: 0,\n        pageHeightPx: 0,\n    },\n    layoutMode: LayoutMode.FULLSCREEN,\n    paginationEnabled: false,\n    navigationPadEnabled: false,\n} as const;\n\n/**\n * Compute the additional layout state based on the provided page and grid\n * dimensions.\n */\nconst layoutParametersForDimensions = (\n    pageDimensions:\n        | {\n              pageHeightPx: never;\n              pageWidthPx: never;\n          }\n        | {\n              pageHeightPx: number;\n              pageWidthPx: number;\n          },\n    gridDimensions,\n) => {\n    const {pageWidthPx, pageHeightPx} = pageDimensions;\n\n    // Determine the device type and orientation.\n    const deviceOrientation =\n        pageWidthPx > pageHeightPx\n            ? DeviceOrientation.LANDSCAPE\n            : DeviceOrientation.PORTRAIT;\n    const deviceType =\n        Math.min(pageWidthPx, pageHeightPx) > tabletCutoffPx\n            ? DeviceType.TABLET\n            : DeviceType.PHONE;\n\n    // Using that information, make some decisions (or assumptions)\n    // about the resulting layout.\n    const navigationPadEnabled = deviceType === DeviceType.TABLET;\n    const paginationEnabled =\n        deviceType === DeviceType.PHONE &&\n        deviceOrientation === DeviceOrientation.PORTRAIT;\n\n    const deviceInfo = {deviceOrientation, deviceType} as const;\n    const layoutOptions = {\n        navigationPadEnabled,\n        paginationEnabled,\n        // HACK(charlie): It's not great that we're making assumptions about\n        // the toolbar (which is rendered by webapp, and should always be\n        // visible and anchored to the bottom of the page for phone and\n        // tablet exercises). But this is primarily a heuristic (the goal is\n        // to preserve a 'good' amount of space between the top of the\n        // keypad and the top of the page) so we afford to have some margin\n        // of error.\n        toolbarEnabled: true,\n    } as const;\n\n    return {\n        ...computeLayoutParameters(\n            gridDimensions,\n            pageDimensions,\n            deviceInfo,\n            layoutOptions,\n        ),\n        // Pass along some of the layout information, so that other\n        // components in the heirarchy can adapt appropriately.\n        navigationPadEnabled,\n        paginationEnabled,\n    };\n};\n\nconst layoutReducer = function (\n    state: LayoutState = initialLayoutState,\n    action: Action,\n): LayoutState {\n    switch (action.type) {\n        case \"ConfigureKeypad\":\n            const {keypadType} = action.configuration;\n            const gridDimensions = {\n                numRows: keypadForType[keypadType].rows,\n                numColumns: keypadForType[keypadType].columns,\n                numMaxVisibleRows: keypadForType[keypadType].maxVisibleRows,\n                numPages: keypadForType[keypadType].numPages,\n            } as const;\n\n            return {\n                ...state,\n                ...layoutParametersForDimensions(\n                    state.pageDimensions,\n                    gridDimensions,\n                ),\n                gridDimensions,\n            };\n\n        case \"SetPageSize\":\n            const {pageWidthPx, pageHeightPx} = action;\n            const pageDimensions = {pageWidthPx, pageHeightPx} as const;\n\n            return {\n                ...state,\n                ...layoutParametersForDimensions(\n                    pageDimensions,\n                    state.gridDimensions,\n                ),\n                pageDimensions,\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport default layoutReducer;\n","/**\n * A system for tracking gesture velocity in a single dimension.\n *\n * Velocity is computed by smoothing linearly over the gestures that have\n * occurred in the last 100 milliseconds.\n */\n\nimport now from \"performance-now\";\n\ntype Event = {\n    x: number;\n    t: number;\n};\n\nclass VelocityTracker {\n    options: {\n        velocityTimeout: number;\n    };\n    _events: Array<Event>;\n\n    constructor(options?) {\n        this.options = {\n            velocityTimeout: 100,\n            ...options,\n        };\n        this._events = [];\n    }\n\n    /**\n     * Pushes an event with the given displacement onto the event buffer,\n     * associating it with a timestamp. Note that, as this method computes the\n     * timestamp for the event at calltime, it should be called immediately\n     * after the event occurs.\n     *\n     * @param {number} x - the cumulative displacement of the event\n     */\n    push(x: number) {\n        this._events.push({\n            x,\n            t: now(),\n        });\n    }\n\n    /**\n     * Compute the velocity with respect to the events that have been tracked\n     * by the system. Velocity is computed by smoothing linearly over recent\n     * displacement values.\n     *\n     * Note that, for performance reasons, a call to `getVelocity` will clear\n     * out the event buffer. As such, repeated calls will not return the same\n     * value (in particular, a second call in quick succession will return 0).\n     *\n     * @returns {number} the velocity associated with the tracker\n     */\n    getVelocity(): number {\n        const events = this._getEvents();\n\n        if (events.length < 2) {\n            return 0;\n        } else {\n            const current = events[events.length - 1];\n            const first = events[0];\n            const dt = current.t - first.t;\n            return (current.x - first.x) / dt;\n        }\n    }\n\n    /**\n     * Filter the tracked events to exclude any events that occurred too far in\n     * the past, and reset the event buffer.\n     *\n     * @returns {number[]} an array of displacements corresponding to events\n     *                     that occurred in the past `velocityTimeout`\n     *                     milliseconds\n     */\n    _getEvents(): ReadonlyArray<Event> {\n        const threshold = now() - this.options.velocityTimeout;\n        const recentEvents = this._events.filter((event) => {\n            return event.t > threshold;\n        });\n        this._events = [];\n        return recentEvents;\n    }\n}\n\nexport default VelocityTracker;\n","import VelocityTracker from \"../components/velocity-tracker\";\nimport KeyConfigs from \"../data/key-configs\";\nimport {KeyType} from \"../enums\";\n\nimport {defaultKeypadType, keypadForType} from \"./shared\";\n\nimport type {Action} from \"./actions\";\nimport type {PagerState} from \"./types\";\n\n// We default to the right-most page. This is done so-as to enforce a\n// consistent orientation between the view pager layout and the flattened\n// layout, where our default page appears on the far right.\nconst getDefaultPage = (numPages) => numPages - 1;\n\nconst initialPagerState = {\n    animateToPosition: false,\n    currentPage: getDefaultPage(keypadForType[defaultKeypadType].numPages),\n    // The cumulative differential in the horizontal direction for the\n    // current swipe.\n    dx: 0,\n    numPages: keypadForType[defaultKeypadType].numPages,\n    pageWidthPx: 0,\n    velocityTracker: new VelocityTracker(),\n} as const;\n\nconst pagerReducer = function (\n    state: PagerState = initialPagerState,\n    action: Action,\n): PagerState {\n    switch (action.type) {\n        case \"ConfigureKeypad\":\n            const {keypadType} = action.configuration;\n            const {numPages} = keypadForType[keypadType];\n            return {\n                ...state,\n                numPages,\n                animateToPosition: false,\n                currentPage: getDefaultPage(numPages),\n                dx: 0,\n            };\n\n        case \"SetPageSize\":\n            return {\n                ...state,\n                pageWidthPx: action.pageWidthPx,\n            };\n\n        case \"PressKey\":\n            const keyConfig = KeyConfigs[action.key];\n\n            // Reset the keypad page if the user performs a math operation.\n            if (\n                keyConfig.type === KeyType.VALUE ||\n                keyConfig.type === KeyType.OPERATOR\n            ) {\n                return {\n                    ...state,\n                    animateToPosition: true,\n                    // We start at the right-most page.\n                    currentPage: getDefaultPage(state.numPages),\n                    dx: 0,\n                };\n            }\n            return state;\n\n        case \"OnSwipeChange\":\n            state.velocityTracker.push(action.dx);\n\n            return {\n                ...state,\n                animateToPosition: false,\n                dx: action.dx,\n            };\n\n        case \"OnSwipeEnd\":\n            const {pageWidthPx, velocityTracker} = state;\n            const {dx} = action;\n            const velocity = velocityTracker.getVelocity();\n\n            // NOTE(charlie): These will need refinement. The velocity comes\n            // from Framer.\n            const minFlingVelocity = 0.1;\n            const minFlingDistance = 10;\n\n            const shouldPageRight =\n                dx < -pageWidthPx / 2 ||\n                (velocity < -minFlingVelocity && dx < -minFlingDistance);\n\n            const shouldPageLeft =\n                dx > pageWidthPx / 2 ||\n                (velocity > minFlingVelocity && dx > minFlingDistance);\n\n            if (shouldPageRight) {\n                const nextPage = Math.min(\n                    state.currentPage + 1,\n                    state.numPages - 1,\n                );\n                return {\n                    ...state,\n                    animateToPosition: true,\n                    currentPage: nextPage,\n                    dx: 0,\n                };\n            } else if (shouldPageLeft) {\n                const prevPage = Math.max(state.currentPage - 1, 0);\n                return {\n                    ...state,\n                    animateToPosition: true,\n                    currentPage: prevPage,\n                    dx: 0,\n                };\n            }\n\n            return {\n                ...state,\n                animateToPosition: true,\n                dx: 0,\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport default pagerReducer;\n","import * as Redux from \"redux\";\n\nimport GestureManager from \"../components/gesture-manager\";\nimport Keys from \"../data/keys\";\n\nimport {onSwipeChange, onSwipeEnd, setActiveNodes, pressKey} from \"./actions\";\nimport echoReducer from \"./echo-reducer\";\nimport inputReducer from \"./input-reducer\";\nimport keypadReducer from \"./keypad-reducer\";\nimport layoutReducer from \"./layout-reducer\";\nimport pagerReducer from \"./pager-reducer\";\nimport {defaultKeypadType, keypadForType} from \"./shared\";\n\nimport type {LayoutProps, ActiveNodesObj} from \"../types\";\nimport type {Action} from \"./actions\";\nimport type {GestureState} from \"./types\";\n\nexport const createStore = () => {\n    // TODO(matthewc)[LC-752]: gestureReducer can't be moved from this file\n    // because it depends on `store` being in scope (see note below)\n    const createGestureManager = (swipeEnabled: boolean) => {\n        return new GestureManager(\n            {\n                swipeEnabled,\n            },\n            {\n                onSwipeChange: (dx: number) => {\n                    store.dispatch(onSwipeChange(dx));\n                },\n                onSwipeEnd: (dx: number) => {\n                    store.dispatch(onSwipeEnd(dx));\n                },\n                onActiveNodesChanged: (activeNodes: ActiveNodesObj) => {\n                    store.dispatch(setActiveNodes(activeNodes));\n                },\n                onClick: (\n                    key: Keys,\n                    layoutProps: LayoutProps,\n                    inPopover: boolean,\n                ) => {\n                    store.dispatch(\n                        pressKey(\n                            key,\n                            layoutProps.borders,\n                            layoutProps.initialBounds,\n                            inPopover,\n                        ),\n                    );\n                },\n            },\n            [],\n            [Keys.BACKSPACE, Keys.UP, Keys.RIGHT, Keys.DOWN, Keys.LEFT],\n        );\n    };\n\n    const initialGestureState = {\n        popover: null,\n        focus: null,\n        gestureManager: createGestureManager(\n            keypadForType[defaultKeypadType].numPages > 1,\n        ),\n    } as const;\n\n    const gestureReducer = function (\n        state: GestureState = initialGestureState,\n        action: Action,\n    ): GestureState {\n        switch (action.type) {\n            case \"DismissKeypad\":\n                // NOTE(charlie): In the past, we enforced the \"gesture manager\n                // will not receive any events when the keypad is hidden\"\n                // assumption by assuming that the keypad would be hidden when\n                // dismissed and, as such, that none of its managed DOM nodes\n                // would be able to receive touch events. However, on mobile\n                // Safari, we're seeing that some of the keys receive touch\n                // events even when off-screen, inexplicably. So, to guard\n                // against that bug and make the contract explicit, we enable\n                // and disable event tracking on activation and dismissal.\n                state.gestureManager.disableEventTracking();\n                return state;\n\n            case \"ActivateKeypad\":\n                state.gestureManager.enableEventTracking();\n                return state;\n\n            case \"SetActiveNodes\":\n                return {\n                    ...state,\n                    ...action.activeNodes,\n                };\n\n            case \"ConfigureKeypad\":\n                const {keypadType} = action.configuration;\n                const {numPages} = keypadForType[keypadType];\n                const swipeEnabled = numPages > 1;\n                return {\n                    popover: null,\n                    focus: null,\n                    gestureManager: createGestureManager(swipeEnabled),\n                };\n\n            default:\n                return state;\n        }\n    };\n\n    const reducer = Redux.combineReducers({\n        input: inputReducer,\n        keypad: keypadReducer,\n        pager: pagerReducer,\n        gestures: gestureReducer,\n        echoes: echoReducer,\n        layout: layoutReducer,\n    });\n\n    // TODO(charlie): This non-inlined return is necessary so as to allow the\n    // gesture manager to dispatch actions on the store in its callbacks. We\n    // should come up with a better pattern to remove the two-way dependency.\n    // eslint-disable-next-line import/no-deprecated\n    const store = Redux.createStore(reducer);\n\n    return store;\n};\n","/**\n * A component that renders a navigation pad, which consists of an arrow for\n * each possible direction.\n */\n\nimport {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\n\nimport KeyConfigs from \"../data/key-configs\";\nimport {BorderStyles} from \"../enums\";\nimport {View} from \"../fake-react-native-web/index\";\n\nimport {\n    navigationPadWidthPx,\n    controlGrey,\n    valueGrey,\n    offBlack16,\n} from \"./common-style\";\nimport Styles from \"./styles\";\nimport TouchableKeypadButton from \"./touchable-keypad-button\";\n\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\nconst {row, column, centered, stretch, roundedTopLeft} = Styles;\n\ntype Props = {\n    roundTopLeft: boolean;\n    style: StyleType;\n};\n\nclass NavigationPad extends React.Component<Props> {\n    render() {\n        // TODO(charlie): Disable the navigational arrows depending on the\n        // cursor context.\n        const {roundTopLeft, style} = this.props;\n\n        const containerStyle = [\n            column,\n            centered,\n            styles.container,\n            roundTopLeft && roundedTopLeft,\n            ...(Array.isArray(style) ? style : [style]),\n        ];\n\n        return (\n            <View style={containerStyle}>\n                <View style={[row, centered]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.UP}\n                        borders={BorderStyles.NONE}\n                        style={[styles.navigationKey, styles.topArrow]}\n                    />\n                </View>\n                <View style={[row, centered, stretch]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.LEFT}\n                        borders={BorderStyles.NONE}\n                        style={[styles.navigationKey, styles.leftArrow]}\n                    />\n                    <View style={styles.horizontalSpacer} />\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.RIGHT}\n                        borders={BorderStyles.NONE}\n                        style={[styles.navigationKey, styles.rightArrow]}\n                    />\n                </View>\n                <View style={[row, centered]}>\n                    <TouchableKeypadButton\n                        keyConfig={KeyConfigs.DOWN}\n                        borders={BorderStyles.NONE}\n                        style={[styles.navigationKey, styles.bottomArrow]}\n                    />\n                </View>\n            </View>\n        );\n    }\n}\n\nconst buttonSizePx = 48;\nconst borderRadiusPx = 4;\nconst borderWidthPx = 1;\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: controlGrey,\n        width: navigationPadWidthPx,\n    },\n\n    navigationKey: {\n        borderColor: offBlack16,\n        backgroundColor: valueGrey,\n        width: buttonSizePx,\n        height: buttonSizePx,\n\n        // Override the default box-sizing so that our buttons are\n        // `buttonSizePx` exclusive of their borders.\n        boxSizing: \"content-box\",\n    },\n\n    topArrow: {\n        borderTopWidth: borderWidthPx,\n        borderLeftWidth: borderWidthPx,\n        borderRightWidth: borderWidthPx,\n        borderTopLeftRadius: borderRadiusPx,\n        borderTopRightRadius: borderRadiusPx,\n    },\n\n    rightArrow: {\n        borderTopWidth: borderWidthPx,\n        borderRightWidth: borderWidthPx,\n        borderBottomWidth: borderWidthPx,\n        borderTopRightRadius: borderRadiusPx,\n        borderBottomRightRadius: borderRadiusPx,\n    },\n\n    bottomArrow: {\n        borderBottomWidth: borderWidthPx,\n        borderLeftWidth: borderWidthPx,\n        borderRightWidth: borderWidthPx,\n        borderBottomLeftRadius: borderRadiusPx,\n        borderBottomRightRadius: borderRadiusPx,\n    },\n\n    leftArrow: {\n        borderTopWidth: borderWidthPx,\n        borderBottomWidth: borderWidthPx,\n        borderLeftWidth: borderWidthPx,\n        borderTopLeftRadius: borderRadiusPx,\n        borderBottomLeftRadius: borderRadiusPx,\n    },\n\n    horizontalSpacer: {\n        background: valueGrey,\n        // No need to set a height -- the spacer will be stretched by its\n        // parent.\n        width: buttonSizePx,\n    },\n});\n\nexport default NavigationPad;\n","import {StyleSheet} from \"aphrodite\";\nimport * as React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport {LayoutMode, KeypadType} from \"../enums\";\nimport {View} from \"../fake-react-native-web/index\";\nimport {setPageSize} from \"../store/actions\";\n\nimport {\n    innerBorderColor,\n    innerBorderStyle,\n    innerBorderWidthPx,\n    compactKeypadBorderRadiusPx,\n} from \"./common-style\";\nimport ExpressionKeypad from \"./expression-keypad\";\nimport FractionKeypad from \"./fraction-keypad\";\nimport NavigationPad from \"./navigation-pad\";\nimport Styles from \"./styles\";\nimport * as zIndexes from \"./z-indexes\";\n\nimport type {State as ReduxState} from \"../store/types\";\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\nconst {row, centered, fullWidth} = Styles;\n\ninterface ReduxProps {\n    active?: boolean;\n    extraKeys?: ReadonlyArray<string>;\n    keypadType?: KeypadType;\n    layoutMode?: LayoutMode;\n    navigationPadEnabled?: boolean;\n}\n\ninterface Props extends ReduxProps {\n    onDismiss?: () => void;\n    onElementMounted: (element: any) => void;\n    onPageSizeChange?: (width: number, height: number) => void;\n    style?: StyleType;\n}\n\ntype State = {\n    hasBeenActivated: boolean;\n    viewportWidth: string | number;\n};\n\n// eslint-disable-next-line react/no-unsafe\nclass KeypadContainer extends React.Component<Props, State> {\n    _resizeTimeout: number | null | undefined;\n    hasMounted: boolean | undefined;\n\n    state = {\n        hasBeenActivated: false,\n        viewportWidth: \"100vw\",\n    };\n\n    UNSAFE_componentWillMount() {\n        if (this.props.active) {\n            this.setState({\n                hasBeenActivated: this.props.active,\n            });\n        }\n    }\n\n    componentDidMount() {\n        // Relay the initial size metrics.\n        this._onResize();\n\n        // And update it on resize.\n        window.addEventListener(\"resize\", this._throttleResizeHandler);\n        window.addEventListener(\n            \"orientationchange\",\n            this._throttleResizeHandler,\n        );\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps) {\n        if (!this.state.hasBeenActivated && nextProps.active) {\n            this.setState({\n                hasBeenActivated: true,\n            });\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.active && !this.props.active) {\n            this.props.onDismiss && this.props.onDismiss();\n        }\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this._throttleResizeHandler);\n        window.removeEventListener(\n            \"orientationchange\",\n            this._throttleResizeHandler,\n        );\n    }\n\n    _throttleResizeHandler = () => {\n        // Throttle the resize callbacks.\n        // https://developer.mozilla.org/en-US/docs/Web/Events/resize\n        if (this._resizeTimeout == null) {\n            this._resizeTimeout = window.setTimeout(() => {\n                this._resizeTimeout = null;\n\n                this._onResize();\n            }, 66);\n        }\n    };\n\n    _onResize = () => {\n        // Whenever the page resizes, we need to force an update, as the button\n        // heights and keypad width are computed based on horizontal space.\n        this.setState({\n            viewportWidth: window.innerWidth,\n        });\n        this.props.onPageSizeChange?.(window.innerWidth, window.innerHeight);\n    };\n\n    renderKeypad = () => {\n        const {extraKeys, keypadType, layoutMode, navigationPadEnabled} =\n            this.props;\n\n        const keypadProps = {\n            extraKeys,\n            // HACK(charlie): In order to properly round the corners of the\n            // compact keypad, we need to instruct some of our child views to\n            // crop themselves. At least we're colocating all the layout\n            // information in this component, though.\n            roundTopLeft:\n                layoutMode === LayoutMode.COMPACT && !navigationPadEnabled,\n            roundTopRight: layoutMode === LayoutMode.COMPACT,\n        };\n\n        // Select the appropriate keyboard given the type.\n        // TODO(charlie): In the future, we might want to move towards a\n        // data-driven approach to defining keyboard layouts, and have a\n        // generic keyboard that takes some \"keyboard data\" and renders it.\n        // However, the keyboards differ pretty heavily right now and it's not\n        // clear what that format would look like exactly. Plus, there aren't\n        // very many of them. So to keep us moving, we'll just hardcode.\n        switch (keypadType) {\n            case KeypadType.FRACTION:\n                return <FractionKeypad {...keypadProps} />;\n\n            case KeypadType.EXPRESSION:\n                return <ExpressionKeypad {...keypadProps} />;\n\n            default:\n                throw new Error(\"Invalid keypad type: \" + keypadType);\n        }\n    };\n\n    render() {\n        const {\n            active,\n            layoutMode,\n            navigationPadEnabled,\n            onElementMounted,\n            style,\n        } = this.props;\n        const {hasBeenActivated} = this.state;\n\n        // NOTE(charlie): We render the transforms as pure inline styles to\n        // avoid an Aphrodite bug in mobile Safari.\n        //   See: https://github.com/Khan/aphrodite/issues/68.\n        let dynamicStyle = {\n            ...(active ? inlineStyles.active : inlineStyles.hidden),\n        };\n\n        if (!active && !hasBeenActivated) {\n            dynamicStyle = {\n                ...dynamicStyle,\n                ...inlineStyles.invisible,\n            };\n        }\n\n        const keypadContainerStyle = [\n            row,\n            centered,\n            fullWidth,\n            styles.keypadContainer,\n            ...(Array.isArray(style) ? style : [style]),\n        ];\n\n        const keypadStyle = [\n            row,\n            styles.keypadBorder,\n            layoutMode === LayoutMode.FULLSCREEN\n                ? styles.fullscreen\n                : styles.compact,\n        ];\n\n        // TODO(charlie): When the keypad is shorter than the width of the\n        // screen, add a border on its left and right edges, and round out the\n        // corners.\n        return (\n            <View\n                style={keypadContainerStyle}\n                dynamicStyle={dynamicStyle}\n                extraClassName=\"keypad-container\"\n            >\n                <View\n                    style={keypadStyle}\n                    ref={(element) => {\n                        if (!this.hasMounted && element) {\n                            this.hasMounted = true;\n                            onElementMounted(element);\n                        }\n                    }}\n                >\n                    {navigationPadEnabled && (\n                        <NavigationPad\n                            roundTopLeft={layoutMode === LayoutMode.COMPACT}\n                            style={styles.navigationPadContainer}\n                        />\n                    )}\n                    <View style={styles.keypadLayout}>\n                        {this.renderKeypad()}\n                    </View>\n                </View>\n            </View>\n        );\n    }\n}\n\nconst keypadAnimationDurationMs = 300;\nconst borderWidthPx = 1;\n\nconst styles = StyleSheet.create({\n    keypadContainer: {\n        bottom: 0,\n        left: 0,\n        right: 0,\n        position: \"fixed\",\n        transition: `${keypadAnimationDurationMs}ms ease-out`,\n        transitionProperty: \"transform\",\n        zIndex: zIndexes.keypad,\n    },\n\n    keypadBorder: {\n        boxShadow: \"0 1px 4px 0 rgba(0, 0, 0, 0.1)\",\n        borderColor: \"rgba(0, 0, 0, 0.2)\",\n        borderStyle: \"solid\",\n    },\n\n    fullscreen: {\n        borderTopWidth: borderWidthPx,\n    },\n\n    compact: {\n        borderTopRightRadius: compactKeypadBorderRadiusPx,\n        borderTopLeftRadius: compactKeypadBorderRadiusPx,\n\n        borderTopWidth: borderWidthPx,\n        borderRightWidth: borderWidthPx,\n        borderLeftWidth: borderWidthPx,\n    },\n\n    navigationPadContainer: {\n        // Add a separator between the navigation pad and the keypad.\n        borderRight:\n            `${innerBorderWidthPx}px ${innerBorderStyle} ` +\n            `${innerBorderColor}`,\n        boxSizing: \"content-box\",\n    },\n\n    // Defer to the navigation pad, such that the navigation pad is always\n    // rendered at full-width, and the keypad takes up just the remaining space.\n    // TODO(charlie): Avoid shrinking the keys and, instead, make the keypad\n    // scrollable.\n    keypadLayout: {\n        flexGrow: 1,\n        // Avoid unitless flex-basis, per: https://philipwalton.com/articles/normalizing-cross-browser-flexbox-bugs/\n        flexBasis: \"0%\",\n    },\n});\n\n// Note: these don't go through an autoprefixer/aphrodite.\nconst inlineStyles = {\n    // If the keypad is yet to have ever been activated, we keep it invisible\n    // so as to avoid, e.g., the keypad flashing at the bottom of the page\n    // during the initial render.\n    invisible: {\n        visibility: \"hidden\",\n    },\n\n    hidden: {\n        transform: \"translate3d(0, 100%, 0)\",\n    },\n\n    active: {\n        transform: \"translate3d(0, 0, 0)\",\n    },\n};\n\nconst mapStateToProps = (state: ReduxState): ReduxProps => {\n    return {\n        extraKeys: state.keypad.extraKeys,\n        keypadType: state.keypad.keypadType,\n        active: state.keypad.active,\n        layoutMode: state.layout.layoutMode,\n        navigationPadEnabled: state.layout.navigationPadEnabled,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        onPageSizeChange: (pageWidthPx, pageHeightPx) => {\n            dispatch(setPageSize(pageWidthPx, pageHeightPx));\n        },\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, {\n    forwardRef: true,\n})(KeypadContainer);\n","import * as React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {Provider} from \"react-redux\";\n\nimport {\n    activateKeypad,\n    dismissKeypad,\n    configureKeypad,\n    setCursor,\n    setKeyHandler,\n} from \"../store/actions\";\nimport {createStore} from \"../store/index\";\n\nimport KeypadContainer from \"./keypad-container\";\n\nimport type {Cursor, KeypadConfiguration, KeyHandler} from \"../types\";\nimport type {StyleType} from \"@khanacademy/wonder-blocks-core\";\n\ntype Props = {\n    onElementMounted?: (arg1: any) => void;\n    onDismiss?: () => void;\n    style?: StyleType;\n};\n\nclass ProvidedKeypad extends React.Component<Props> {\n    store: any;\n\n    constructor(props) {\n        super(props);\n        this.store = createStore();\n    }\n\n    activate: () => void = () => {\n        this.store.dispatch(activateKeypad());\n    };\n\n    dismiss: () => void = () => {\n        this.store.dispatch(dismissKeypad());\n    };\n\n    configure: (configuration: KeypadConfiguration, cb: () => void) => void = (\n        configuration,\n        cb,\n    ) => {\n        this.store.dispatch(configureKeypad(configuration));\n\n        // HACK(charlie): In Perseus, triggering a focus causes the keypad to\n        // animate into view and re-configure. We'd like to provide the option\n        // to re-render the re-configured keypad before animating it into view,\n        // to avoid jank in the animation. As such, we support passing a\n        // callback into `configureKeypad`. However, implementing this properly\n        // would require middleware, etc., so we just hack it on with\n        // `setTimeout` for now.\n        setTimeout(() => cb && cb());\n    };\n\n    setCursor: (cursor: Cursor) => void = (cursor) => {\n        this.store.dispatch(setCursor(cursor));\n    };\n\n    setKeyHandler: (keyHandler: KeyHandler) => void = (keyHandler) => {\n        this.store.dispatch(setKeyHandler(keyHandler));\n    };\n\n    getDOMNode: () => ReturnType<typeof ReactDOM.findDOMNode> = () => {\n        return ReactDOM.findDOMNode(this);\n    };\n\n    render(): React.ReactNode {\n        const {onElementMounted, onDismiss, style} = this.props;\n\n        return (\n            <Provider store={this.store}>\n                <KeypadContainer\n                    onElementMounted={(element) => {\n                        // Append the dispatch methods that we want to expose\n                        // externally to the returned React element.\n                        const elementWithDispatchMethods = {\n                            ...element,\n                            activate: this.activate,\n                            dismiss: this.dismiss,\n                            configure: this.configure,\n                            setCursor: this.setCursor,\n                            setKeyHandler: this.setKeyHandler,\n                            getDOMNode: this.getDOMNode,\n                        } as const;\n                        onElementMounted &&\n                            onElementMounted(elementWithDispatchMethods);\n                    }}\n                    onDismiss={onDismiss}\n                    style={style}\n                />\n            </Provider>\n        );\n    }\n}\n\nexport default ProvidedKeypad;\n"],"names":["CursorContext","Keys","Text","React","Component","render","numberOfLines","style","props","className","css","styles","initial","Array","isArray","singleLineStyle","createElement","dynamicStyle","children","StyleSheet","create","color","display","font","margin","padding","textDecorationLine","wordWrap","maxWidth","overflow","textOverflow","whiteSpace","View","extraClassName","onClick","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","ariaLabel","role","alignItems","borderWidth","borderStyle","boxSizing","flexBasis","flexDirection","position","backgroundColor","textAlign","listStyle","minHeight","minWidth","wonderBlocksBlue","Color","blue","offBlack","offBlack32","offBlack16","offBlack8","iconSizeHeightPx","iconSizeWidthPx","compactKeypadBorderRadiusPx","cursorHandleRadiusPx","cursorHandleDistanceMultiplier","valueGrey","operatorGrey","controlGrey","emptyGrey","innerBorderColor","innerBorderStyle","innerBorderWidthPx","tabletCutoffPx","pageIndicatorHeightPx","navigationPadWidthPx","toolbarHeightPx","touchTargetRadiusPx","touchTargetHeightPx","touchTargetWidthPx","cursorRadiusPx","cursorHeightPx","cursorWidthPx","CursorHandle","x","y","animateIntoPosition","animationStyle","transitionDuration","transitionProperty","transformString","outerStyle","_extends","zIndex","left","top","transform","width","height","touchAction","fill","viewBox","id","colorInterpolationFilters","filterUnits","floodOpacity","result","in","type","values","dy","stdDeviation","in2","mode","filter","d","stroke","strokeWidth","defaultProps","visible","touchSlopPx","DragListener","constructor","onDrag","initialEvent","_scrollListener","_moveListener","_endAndCancelListener","touchLocationsById","i","changedTouches","length","touch","identifier","clientX","clientY","evt","initialTouchLocation","touchLocation","dx","squaredDist","squaredTouchSlop","attach","window","addEventListener","detach","removeEventListener","KeypadType","KeyType","DeviceOrientation","DeviceType","LayoutMode","BorderDirection","BorderStyles","LEFT","BOTTOM","ALL","NONE","IconType","DecimalSeparator","EchoAnimationType","decimalSeparator","getDecimalSeparator","COMMA","PERIOD","decimalSymbol","ActionType","KeyActions","PLUS","str","fn","WRITE","MINUS","NEGATIVE","TIMES","DIVIDE","DECIMAL","EQUAL","NEQ","CDOT","PERCENT","LEFT_PAREN","CMD","RIGHT_PAREN","SQRT","PI","THETA","RADICAL","LT","LEQ","GT","GEQ","UP","KEYSTROKE","DOWN","FRAC_INCLUSIVE","NormalCommands","LOG","LN","SIN","COS","TAN","ArithmeticOperators","EqualityOperators","Numerals","GreekLetters","Letters","ValidLeaves","map","letter","toLowerCase","toUpperCase","KeysForJumpContext","IN_PARENS","JUMP_OUT_PARENTHESES","IN_SUPER_SCRIPT","JUMP_OUT_EXPONENT","IN_SUB_SCRIPT","JUMP_OUT_BASE","BEFORE_FRACTION","JUMP_INTO_NUMERATOR","IN_NUMERATOR","JUMP_OUT_NUMERATOR","IN_DENOMINATOR","JUMP_OUT_DENOMINATOR","MathWrapper","element","options","callbacks","MQ","mathField","MathQuill","getInterface","MathField","substituteTextarea","document","focus","controller","__controller","cursor","show","blurred","blur","hide","_writeNormalFunction","name","write","keystroke","pressKey","key","Object","keys","includes","FRAC_EXCLUSIVE","shouldNavigateLeft","L","MQ_END","cmd","FRAC","LOG_N","CUBE_ROOT","EXP","EXP_2","EXP_3","_handleExponent","_handleJumpOut","BACKSPACE","_handleBackspace","_handleLeftArrow","RIGHT","_handleRightArrow","test","selection","onSelectionChanged","context","contextForCursor","setCursorPosition","hitNode","el","elementFromPoint","getCursor","hasAttribute","insAtRightEnd","root","pageX","body","scrollLeft","pageY","scrollTop","seek","$","startSelection","command","_maybeFindCommand","endNode","insLeftOf","onCursorMove","getSelection","getContent","latex","setContent","isEmpty","parent","_handleBackspaceInNthRoot","isAtLeftEnd","isRootEmpty","_isInsideEmptyNode","blocks","ends","_selectNode","insRightOf","fractionNode","visitor","R","_isFraction","siblingDenominator","_isParens","Error","grandparent","leftNode","_isSquareRoot","_isNthRoot","_isNthRootIndex","_handleBackspaceInRootIndex","ctrlSeq","_handleBackspaceOutsideParens","_handleBackspaceInsideParens","_isInsideLogIndex","_handleBackspaceInLogIndex","_handleBackspaceAfterLigaturedSymbol","_maybeFindCommandBeforeParens","startNode","invalidPrefixes","precedingNode","shouldPrefixWithParens","trim","initialNode","commandCharRegex","commandStartRegex","commandEndSeq","validCommands","node","leftParenNode","select","endSelection","jQ","hasClass","_isNumerator","_isDenominator","_isSubScript","_isSuperScript","_isLeaf","reinsertionPoint","rootIsEmpty","text","replace","moveToDirEnd","isLogBodyEmpty","contentjQ","rightNode","sub","_isAtTopLevel","scrollIntoView","containerNode","keypadNode","containerBounds","getBoundingClientRect","containerBottomPx","bottom","containerTopPx","scrollNode","scrollingElement","desiredMarginPx","pageHeightPx","innerHeight","keypadHeightPx","clientHeight","keypadTopPx","scrollOffset","Math","min","constrainingFrictionFactor","MathInput","args","didTouchOutside","didScroll","recordTouchStartOutside","blurOnTouchEndOutside","dragListener","inputRef","_isMounted","_mathContainer","_container","_root","_containerBounds","_keypadBounds","state","focused","handle","_clearKeypadBoundsCache","_cacheKeypadBounds","_updateInputPadding","ReactDOM","findDOMNode","querySelector","getInputInnerPadding","paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","fontSizePt","_getKeypadBounds","keypadElement","getDOMNode","_updateCursorHandle","cursorBounds","cursorWidth","gapBelowCursor","inputInnerPadding","furthestRightCursorBound","right","furthestLeftCursorBound","cursorBoundsLeft","setState","_hideCursorHandle","_handleScroll","onBlur","setKeyHandler","hideCursor","value","onChange","onFocus","setTimeout","maybeKeypadNode","_findHitNode","points","elements","point","contains","classList","nonLeafElements","max","counts","elementsById","getAttribute","push","count","entries","_insertCursorAtClosestNode","hasChildNodes","insAtLeftEnd","firstChildBounds","firstChild","lastChildBounds","lastChild","abs","setCursor","handleTouchStart","e","stopPropagation","handleTouchMove","handleTouchEnd","onCursorHandleTouchStart","preventDefault","_constrainToBound","friction","onCursorHandleTouchMove","relativeX","relativeY","distanceAboveFingerToTrySelecting","adjustedY","onCursorHandleTouchEnd","onCursorHandleTouchCancel","domKeyToMathQuillKey","keyMap","handleKeyUp","event","mathQuillKey","getBorderWidthPx","normalBorderWidthPx","focusedBorderWidthPx","paddingInset","totalDesiredPadding","symbolaPaddingBottom","symbolaPaddingTop","componentDidMount","container","unbind","target","touchDidStartInOrBelowKeypad","bounds","UNSAFE_componentWillReceiveProps","componentDidUpdate","prevProps","prevState","componentWillUnmount","innerStyle","inlineStyles","innerContainer","borderColor","i18n","_","input","tabIndex","ref","onKeyUp","inputMaxWidth","numeralHeightPx","minHeightPx","minWidthPx","verticalAlign","offBlack50","borderRadius","keypadElementPropType","PropTypes","shape","activate","func","isRequired","dismiss","configure","dismissKeypad","activateKeypad","configureKeypad","configuration","setPageSize","pageWidthPx","removeEcho","animationId","keyHandler","onSwipeChange","onSwipeEnd","setActiveNodes","activeNodes","borders","initialBounds","inPopover","defaultOptions","longPressWaitTimeMs","swipeThresholdPx","holdIntervalMs","GestureStateMachine","handlers","swipeDisabledNodeIds","multiPressableKeys","touchState","swipeState","_maybeCancelLongPressForTouch","touchId","longPressTimeoutId","clearTimeout","_maybeCancelPressAndHoldForTouch","pressAndHoldIntervalId","clearInterval","_cleanupTouchEvent","_onFocus","activeNodeId","onTrigger","setInterval","onLongPress","_onSwipeStart","activeTouchId","getId","startingNodeId","swipeLocked","startX","swipeEnabled","shouldBeginSwiping","didPressAndHold","NodeManager","_nodesById","_bordersById","_orderedIds","_cachedBoundingBoxesById","registerDOMNode","domNode","childIds","allIds","orderedIds","seenIds","unregisterDOMNode","idForCoords","layoutPropsForId","DOMRect","PopoverStateMachine","popovers","activePopover","registerPopover","unregisterPopover","isPopoverVisible","onActiveNodesChanged","popover","_isNodeInsidePopover","parentId","_defaultNodeForPopover","keyId","domNodeId","coordsForEvent","GestureManager","disabledSwipeKeys","trackEvents","nodeManager","popoverStateMachine","gestureStateMachine","rest","_objectWithoutPropertiesLoose","_excluded","childKeyIds","enableEventTracking","disableEventTracking","KeyConfigs","OPERATOR","VALUE","icon","TEXT","data","SVG","MATH","NOOP","EMPTY","INPUT_NAVIGATION","DISMISS","KEYPAD_NAVIGATION","NUMBERS","num","textRepresentation","LETTERS","lowerCaseVariable","upperCaseVariable","_lastAnimationId","initialEchoState","echoes","echoReducer","action","keyConfig","animationType","LONG_FADE_ONLY","FADE_ONLY","remainingEchoes","echo","initialInputState","inputReducer","CornerDecal","containerStyle","triangleSizePx","opacity","row","column","oneColumn","flexGrow","fullWidth","stretch","centered","justifyContent","centeredText","roundedTopLeft","borderTopLeftRadius","roundedTopRight","borderTopRightRadius","Styles","MathIcon","_renderMath","math","katex","size","base","Cos","fillRule","propTypes","string","Log","Equal","strokeLinecap","strokeLinejoin","Backspace","Sqrt","Exp","Neq","Geq","Ln","Dismiss","Sin","Lt","CubeRoot","Plus","Tan","Arrow","Left","Up","Down","LeftParen","RightParen","Gt","Divide","cx","cy","r","Period","Percent","Times","Exp3","Exp2","Right","Cdot","LogN","Leq","Minus","Radical","FracInclusive","rx","JumpOutParentheses","JumpOutExponent","JumpOutBase","JumpIntoNumerator","JumpOutNumerator","JumpOutDenominator","SvgIcon","SvgForName","Iconography","TextIcon","character","fontFamily","focusedColor","unfocusedColor","Icon","PureComponent","styleWithFocus","unfocused","MultiSymbolGrid","icons","forEach","primaryIconStyle","secondaryIconStyle","secondary","middleLeft","middleRight","topLeft","topRight","bottomLeft","bottomRight","verticalInsetPx","horizontalInsetPx","marginBottom","marginLeft","marginTop","marginRight","KeypadButton","buttonSizeStyle","_preInjectStyles","_getFocusStyle","_getButtonStyle","focusBackgroundStyle","light","bright","focusBox","backgroundStyle","empty","MANY","operator","control","ECHO","leftBorder","bottomBorder","buttonBase","UNSAFE_componentWillMount","styleForButtonDimensions","heightPx","widthPx","UNSAFE_componentWillUpdate","newProps","newState","childKeys","disabled","popoverEnabled","renderFocused","buttonStyle","focusStyle","iconWrapperStyle","iconWrapper","undefined","eventHandlers","maybeFocusBox","maybeCornerDecal","decalInset","manyButtonA11yMarkup","a11yMarkup","focusInsetPx","focusBoxZIndex","flex","userSelect","borderLeftWidth","borderBottomWidth","buttonSize","mapStateToProps","layout","buttonDimensions","connect","forwardRef","EmptyKeypadButton","_this$props","gestureManager","gestures","TouchableKeypadButton","shouldComponentUpdate","styleWithAddons","preventScrolls","extractProps","ownProps","_gestures$popover","_excluded2","useFirstChildProps","ManyKeypadButton","keypad","Echo","animationDurationMs","onAnimationFinish","zIndexes","pointerEvents","EchoManager","_animationConfigForType","animationTransitionName","SLIDE_AND_FADE","echoesForType","TransitionGroup","CSSTransition","classNames","enter","exit","timeout","MultiSymbolPopover","boxShadow","popoverButton","PopoverContainer","PopoverManager","Keypad","_resizeTimeout","_computeContainer","_updateSizeAndPosition","_onResize","relativeEchoes","relativePopover","active","mapDispatchToProps","dispatch","IconAsset","tintColor","xmlns","clipRule","border","hovered","background","white","pressed","outline","innerBox","innerBoxPressed","activeIndicator","imageTintColor","itemState","offBlack64","TabbarItem","itemType","Clickable","tabbar","offWhite","borderTop","borderBottom","Tabbar","selectedItem","items","onSelect","item","index","TwoPageKeypad","selectedPage","leftPage","paginationEnabled","rightPage","borderLeft","expressionKeypadLayout","rows","columns","numPages","maxVisibleRows","ExpressionKeypad","currentPage","cursorContext","dynamicJumpOut","extraKeys","roundTopLeft","roundTopRight","dismissOrJumpOutKey","rightPageStyle","NUM_7","NUM_4","NUM_1","NUM_8","NUM_5","NUM_2","NUM_0","NUM_9","NUM_6","NUM_3","leftPageStyle","_state$input$cursor","pager","navigationPadEnabled","fractionKeypadLayout","FractionKeypad","defaultKeypadType","EXPRESSION","keypadForType","FRACTION","initialKeypadState","keypadType","keypadReducer","minButtonHeight","maxButtonSize","minSpaceAboveKeypad","safariNavBarWhenShrunk","safariNavBarWhenExpanded","safariToolbar","maxLandscapeBrowserChrome","maxPortraitBrowserChrome","worstCaseAspectRatio","computeLayoutParameters","numColumns","numMaxVisibleRows","deviceOrientation","deviceType","toolbarEnabled","effectiveNumColumns","PHONE","isLandscape","LANDSCAPE","browserChromeHeight","reservedSpace","effectiveWidth","effectiveHeight","maxKeypadHeight","buttonHeightPx","buttonWidthPx","TABLET","numSeparators","keypadWidth","layoutMode","FULLSCREEN","COMPACT","initialLayoutState","gridDimensions","numRows","pageDimensions","layoutParametersForDimensions","PORTRAIT","deviceInfo","layoutOptions","layoutReducer","VelocityTracker","_events","velocityTimeout","t","now","getVelocity","events","_getEvents","current","first","dt","threshold","recentEvents","getDefaultPage","initialPagerState","animateToPosition","velocityTracker","pagerReducer","velocity","minFlingVelocity","minFlingDistance","shouldPageRight","shouldPageLeft","nextPage","prevPage","createStore","createGestureManager","store","layoutProps","initialGestureState","gestureReducer","reducer","Redux","combineReducers","NavigationPad","navigationKey","topArrow","leftArrow","horizontalSpacer","rightArrow","bottomArrow","buttonSizePx","borderRadiusPx","borderWidthPx","borderTopWidth","borderRightWidth","borderBottomRightRadius","borderBottomLeftRadius","KeypadContainer","hasMounted","hasBeenActivated","viewportWidth","_throttleResizeHandler","_this$props$onPageSiz","innerWidth","onPageSizeChange","call","renderKeypad","keypadProps","nextProps","onDismiss","onElementMounted","hidden","invisible","keypadContainerStyle","keypadContainer","keypadStyle","keypadBorder","fullscreen","compact","navigationPadContainer","keypadLayout","keypadAnimationDurationMs","transition","borderRight","visibility","ProvidedKeypad","cb","Provider","elementWithDispatchMethods"],"mappings":"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"}